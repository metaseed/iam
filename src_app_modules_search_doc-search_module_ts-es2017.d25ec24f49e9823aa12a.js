"use strict";(self.webpackChunkiam=self.webpackChunkiam||[]).push([["src_app_modules_search_doc-search_module_ts"],{93444:function(t,e,n){n.r(e),n.d(e,{DocSearchModule:function(){return k}});var c=n(81392),r=n(30159),i=n(43796),o=n(17215),s=n(21199),a=n(72077);let u=(()=>{class t{constructor(t){this.matInput=t}ngOnInit(){setTimeout(()=>this.matInput.focus())}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(a.Nt))},t.\u0275dir=o.lG2({type:t,selectors:[["","matInputAutofocus",""]]}),t})(),l=(()=>{class t{constructor(){this.search=new o.vpe}onSearch(t){this.search.next(t.trim())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["iam-doc-search-bar"]],outputs:{search:"search"},decls:4,vars:0,consts:[[1,"doc-search"],[1,"search-icon"],["matInput","","matInputAutofocus","","action-bar-flex","","type","text","placeholder","Search...",1,"input-lg","search-input",3,"keyup"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"mat-icon",1),o._uU(2,"search"),o.qZA(),o.TgZ(3,"input",2),o.NdJ("keyup",function(t){return e.onSearch(t.target.value)}),o.qZA(),o.qZA())},directives:[s.Hw,a.Nt,u],styles:[".doc-search[_ngcontent-%COMP%]{height:4rem;padding-left:1rem;font-size:1.4rem;display:flex;flex:1;background:white}.doc-search[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto}.doc-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;font-family:RobotoRegular;width:auto;max-width:none;display:inline-block;border:0;padding:.25rem .5rem;margin:0}"]}),t})();var m=n(87517),d=n(73898),h=n(84653),p=n(71076),f=n(37705),g=n(7395),_=n(90953);function w(t,e){if(1&t&&o._UZ(0,"div",2),2&t){const t=e.$implicit,n=o.oxw();o.Q6J("innerHTML",n.getMatches(t),o.oJD)}}let y=(()=>{class t{constructor(t){this.router=t}onClick(t){this.router.navigate(["/doc"],{queryParams:{id:this.item.id,title:this.item.title,f:"md"}})}getMatches(t){const e=t.fragment;let n="",c=0;return t.matches.forEach(t=>{const r=t.indices;n+=e.substr(c,r[0]-c),n+=`<em>${t.text}</em>`,c=r[1]}),n+=e.substr(c),n}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(i.F0))},t.\u0275cmp=o.Xpm({type:t,selectors:[["doc-search-item"]],inputs:{item:"item"},decls:9,vars:4,consts:[[1,"title",3,"click"],["class","fragment",3,"innerHTML",4,"ngFor","ngForOf"],[1,"fragment",3,"innerHTML"]],template:function(t,e){1&t&&(o.TgZ(0,"mat-card"),o.TgZ(1,"mat-card-header"),o._UZ(2,"div"),o.TgZ(3,"mat-card-title",0),o.NdJ("click",function(t){return e.onClick(t)}),o._uU(4),o.qZA(),o.TgZ(5,"mat-card-subtitle"),o._uU(6),o.qZA(),o.qZA(),o.TgZ(7,"mat-card-content"),o.YNc(8,w,1,1,"div",1),o.qZA(),o.qZA()),2&t&&(o.xp6(4),o.Oqu(e.item.title),o.xp6(2),o.AsE(" Score: ",e.item.score," Id: ",e.item.id,""),o.xp6(2),o.Q6J("ngForOf",e.item.text_matches))},directives:[_.a8,_.dk,_.n5,_.$j,_.dn,g.sg],styles:[".fragment[_ngcontent-%COMP%]{white-space:pre-wrap}.fragment[_ngcontent-%COMP%]     em{background:yellow}[_nghost-%COMP%]{display:inline-block;max-width:1000px;width:100%;display:flex}mat-card[_ngcontent-%COMP%]{width:100%;margin-top:3px}mat-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{cursor:pointer;text-decoration:underline}"]}),t})();function x(t,e){1&t&&o._UZ(0,"doc-search-item",4),2&t&&o.Q6J("item",e.$implicit)}const b=function(t){return{container:t}},Z=function(t){return[t]},v=[{path:"",component:(()=>{class t{constructor(t){this._store=t,this.searchResult$=this._store.select(c.UQ),this.trackByFunc=(t,e)=>e.id}ngAfterViewInit(){this.docSearchComponent.search.pipe((0,d.b)(500),(0,h.x)(),(0,m.b)(t=>{""!==t.trim()&&this._store.dispatch(new c.i2({query:t}))})).subscribe()}onSearch(t){}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(p.yh))},t.\u0275cmp=o.Xpm({type:t,selectors:[["doc-search-list"]],viewQuery:function(t,e){if(1&t&&o.Gf(l,5),2&t){let t;o.iGM(t=o.CRH())&&(e.docSearchComponent=t.first)}},decls:5,vars:9,consts:[["clickToggleEnable","false",3,"scrollHide"],[1,"search-result"],["search",""],[3,"item",4,"ngFor","ngForOf","ngForTrackBy"],[3,"item"]],template:function(t,e){if(1&t&&(o._UZ(0,"iam-doc-search-bar",0),o.TgZ(1,"div",1,2),o.YNc(3,x,1,1,"doc-search-item",3),o.ALo(4,"async"),o.qZA()),2&t){const t=o.MAs(2);o.Q6J("scrollHide",o.VKq(7,Z,o.VKq(5,b,t))),o.xp6(3),o.Q6J("ngForOf",o.lcZ(4,3,e.searchResult$))("ngForTrackBy",e.trackByFunc)}},directives:[l,f.M,g.sg,y],pipes:[g.Ov],styles:["[_nghost-%COMP%]{max-width:400px;width:100%}.search-result[_ngcontent-%COMP%]{overflow:auto;display:flex;flex-flow:row wrap;box-sizing:border-box;justify-content:space-around;height:calc(100vh - 50px);margin-bottom:50px}"]}),t})()}];let M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[i.Bz.forChild(v)],i.Bz]}),t})();var C=n(73346);let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({providers:[r.N],imports:[[c.m8,C.q,M]]}),t})()}}]);