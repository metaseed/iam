"use strict";(self.webpackChunkiam=self.webpackChunkiam||[]).push([["node_modules_mermaid_dist_stateDiagram-v2-03fb723d_js"],{28493:(ft,$,r)=>{r.r($),r.d($,{diagram:()=>At});var d=r(13361),J=r(44907),P=r(98876),i=r(81370),Q=r(47006),X=r(50997),Z=r(42265);r(68095),r(26705),r(38526),r(8265),r(75359);const C="rect",R="rectWithTitle",T="statediagram",ot=`${T}-state`,v="transition",ct=`${v} note-edge`,it=`${T}-note`,rt=`${T}-cluster`,lt=`${T}-cluster-alt`,B="parent",G="note",dt="state",O="----",at=`${O}${G}`,N=`${O}${B}`,U="fill:none",W="fill: #333",K="text",H="normal";let p={},E=0;function M(t="",n=0,s="",c=O){return`${dt}-${t}${null!==s&&s.length>0?`${c}${s}`:""}-${n}`}const h=(t,n,s,c,l,a)=>{const e=s.id,f=function St(t){return null==t?"":t.classes?t.classes.join(" "):""}(c[e]);if("root"!==e){let A=C;!0===s.start&&(A="start"),!1===s.start&&(A="end"),s.type!==d.a&&(A=s.type),p[e]||(p[e]={id:e,shape:A,description:i.d.sanitizeText(e,(0,i.g)()),classes:`${f} ${ot}`});const o=p[e];s.description&&(Array.isArray(o.description)?(o.shape=R,o.description.push(s.description)):o.description.length>0?(o.shape=R,o.description=o.description===e?[s.description]:[o.description,s.description]):(o.shape=C,o.description=s.description),o.description=i.d.sanitizeTextOrArray(o.description,(0,i.g)())),1===o.description.length&&o.shape===R&&(o.shape=C),!o.type&&s.doc&&(i.l.info("Setting cluster for ",e,x(s)),o.type="group",o.dir=x(s),o.shape=s.type===d.b?"divider":"roundedWithTitle",o.classes=o.classes+" "+rt+" "+(a?lt:""));const u={labelStyle:"",shape:o.shape,labelText:o.description,classes:o.classes,style:"",id:e,dir:o.dir,domId:M(e,E),type:o.type,padding:15};if(s.note){const S={labelStyle:"",shape:"note",labelText:s.note.text,classes:it,style:"",id:e+at+"-"+E,domId:M(e,E,G),type:o.type,padding:15},g={labelStyle:"",shape:"noteGroup",labelText:s.note.text,classes:o.classes,style:"",id:e+N,domId:M(e,E,B),type:"group",padding:0};E++;const _=e+N;t.setNode(_,g),t.setNode(S.id,S),t.setNode(e,u),t.setParent(e,_),t.setParent(S.id,_);let y=e,D=S.id;"left of"===s.note.position&&(y=S.id,D=e),t.setEdge(y,D,{arrowhead:"none",arrowType:"",style:U,labelStyle:"",classes:ct,arrowheadStyle:W,labelpos:"c",labelType:K,thickness:H})}else t.setNode(e,u)}n&&"root"!==n.id&&(i.l.trace("Setting node ",e," to be child of its parent ",n.id),t.setParent(e,n.id)),s.doc&&(i.l.trace("Adding nodes children "),Dt(t,s,s.doc,c,l,!a))},Dt=(t,n,s,c,l,a)=>{i.l.trace("items",s),s.forEach(e=>{switch(e.stmt){case d.c:case d.a:h(t,n,e,c,l,a);break;case d.S:{h(t,n,e.state1,c,l,a),h(t,n,e.state2,c,l,a);const f={id:"edge"+E,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:U,labelStyle:"",label:i.d.sanitizeText(e.description,(0,i.g)()),arrowheadStyle:W,labelpos:"c",labelType:K,thickness:H,classes:v};t.setEdge(e.state1.id,e.state2.id,f,E),E++}}})},x=(t,n=d.e)=>{let s=n;if(t.doc)for(let c=0;c<t.doc.length;c++){const l=t.doc[c];"dir"===l.stmt&&(s=l.value)}return s},At={parser:d.p,db:d.d,renderer:{setConf:function(t){const n=Object.keys(t);for(const s of n);},getClasses:function(t,n){i.l.trace("Extracting classes"),n.db.clear();try{return n.parser.parse(t),n.db.extract(n.db.getRootDocV2()),n.db.getClasses()}catch(s){return s}},draw:function(t,n,s,c){i.l.info("Drawing state diagram (v2)",n),p={};let l=c.db.getDirection();void 0===l&&(l=d.D);const{securityLevel:a,state:e}=(0,i.g)(),f=e.nodeSpacing||50,A=e.rankSpacing||50;i.l.info(c.db.getRootDocV2()),c.db.extract(c.db.getRootDocV2()),i.l.info(c.db.getRootDocV2());const o=c.db.getStates(),u=new J.k({multigraph:!0,compound:!0}).setGraph({rankdir:x(c.db.getRootDocV2()),nodesep:f,ranksep:A,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let S;h(u,void 0,c.db.getRootDocV2(),o,c.db,!0),"sandbox"===a&&(S=(0,P.Ys)("#i"+n));const g=(0,P.Ys)("sandbox"===a?S.nodes()[0].contentDocument.body:"body"),_=g.select(`[id="${n}"]`),y=g.select("#"+n+" g");(0,Q.r)(y,u,["barb"],T,n),Z.u.insertTitle(_,"statediagramTitleText",e.titleTopMargin,c.db.getDiagramTitle());const j=_.node().getBBox(),V=j.width+16,k=j.height+16;_.attr("class",T);const Y=_.node().getBBox();(0,X.c)(_,k,V,e.useMaxWidth);const z=`${Y.x-8} ${Y.y-8} ${V} ${k}`;i.l.debug(`viewBox ${z}`),_.attr("viewBox",z);const ht=document.querySelectorAll('[id="'+n+'"] .edgeLabel .label');for(const L of ht){const I=L.getBBox(),b=document.createElementNS("http://www.w3.org/2000/svg",C);b.setAttribute("rx",0),b.setAttribute("ry",0),b.setAttribute("width",I.width),b.setAttribute("height",I.height),L.insertBefore(b,L.firstChild)}}},styles:d.s,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,d.d.clear()}}}}]);