(self.webpackChunkiam=self.webpackChunkiam||[]).push([["src_app_modules_markdown_editor_markdown-editor_module_ts"],{7838:(At,nt,de)=>{!function(x){"use strict";var U={},H=/[^\s\u00a0]/,V=x.Pos,s=x.cmpPos;function M(X){var Q=X.search(H);return-1==Q?0:Q}function oe(X,Q){var z=X.getMode();return!1!==z.useInnerComments&&z.innerMode?X.getModeAt(Q):z}x.commands.toggleComment=function(X){X.toggleComment()},x.defineExtension("toggleComment",function(X){X||(X=U);for(var Q=this,z=1/0,ae=this.listSelections(),se=null,Fe=ae.length-1;Fe>=0;Fe--){var ee=ae[Fe].from(),re=ae[Fe].to();ee.line>=z||(re.line>=z&&(re=V(z,0)),z=ee.line,null==se?Q.uncomment(ee,re,X)?se="un":(Q.lineComment(ee,re,X),se="line"):"un"==se?Q.uncomment(ee,re,X):Q.lineComment(ee,re,X))}}),x.defineExtension("lineComment",function(X,Q,z){z||(z=U);var ae=this,se=oe(ae,X),Fe=ae.getLine(X.line);if(null!=Fe&&!function(X,Q,z){return/\bstring\b/.test(X.getTokenTypeAt(V(Q.line,0)))&&!/^[\'\"\`]/.test(z)}(ae,X,Fe)){var ee=z.lineComment||se.lineComment;if(!ee)return void((z.blockCommentStart||se.blockCommentStart)&&(z.fullLines=!0,ae.blockComment(X,Q,z)));var re=Math.min(0!=Q.ch||Q.line==X.line?Q.line+1:Q.line,ae.lastLine()+1),L=null==z.padding?" ":z.padding,_=z.commentBlankLines||X.line==Q.line;ae.operation(function(){if(z.indent){for(var g=null,S=X.line;S<re;++S){var R=(T=ae.getLine(S)).slice(0,M(T));(null==g||g.length>R.length)&&(g=R)}for(S=X.line;S<re;++S){var T=ae.getLine(S),C=g.length;!_&&!H.test(T)||(T.slice(0,C)!=g&&(C=M(T)),ae.replaceRange(g+ee+L,V(S,0),V(S,C)))}}else for(S=X.line;S<re;++S)(_||H.test(ae.getLine(S)))&&ae.replaceRange(ee+L,V(S,0))})}}),x.defineExtension("blockComment",function(X,Q,z){z||(z=U);var ae=this,se=oe(ae,X),Fe=z.blockCommentStart||se.blockCommentStart,ee=z.blockCommentEnd||se.blockCommentEnd;if(Fe&&ee){if(!/\bcomment\b/.test(ae.getTokenTypeAt(V(X.line,0)))){var re=Math.min(Q.line,ae.lastLine());re!=X.line&&0==Q.ch&&H.test(ae.getLine(re))&&--re;var L=null==z.padding?" ":z.padding;X.line>re||ae.operation(function(){if(0!=z.fullLines){var _=H.test(ae.getLine(re));ae.replaceRange(L+ee,V(re)),ae.replaceRange(Fe+L,V(X.line,0));var g=z.blockCommentLead||se.blockCommentLead;if(null!=g)for(var S=X.line+1;S<=re;++S)(S!=re||_)&&ae.replaceRange(g+L,V(S,0))}else{var T=0==s(ae.getCursor("to"),Q),R=!ae.somethingSelected();ae.replaceRange(ee,Q),T&&ae.setSelection(R?Q:ae.getCursor("from"),Q),ae.replaceRange(Fe,X)}})}}else(z.lineComment||se.lineComment)&&0!=z.fullLines&&ae.lineComment(X,Q,z)}),x.defineExtension("uncomment",function(X,Q,z){z||(z=U);var g,ae=this,se=oe(ae,X),Fe=Math.min(0!=Q.ch||Q.line==X.line?Q.line:Q.line-1,ae.lastLine()),ee=Math.min(X.line,Fe),re=z.lineComment||se.lineComment,L=[],_=null==z.padding?" ":z.padding;e:if(re){for(var S=ee;S<=Fe;++S){var T=ae.getLine(S),R=T.indexOf(re);if(R>-1&&!/comment/.test(ae.getTokenTypeAt(V(S,R+1)))&&(R=-1),-1==R&&H.test(T)||R>-1&&H.test(T.slice(0,R)))break e;L.push(T)}if(ae.operation(function(){for(var ze=ee;ze<=Fe;++ze){var je=L[ze-ee],D=je.indexOf(re),b=D+re.length;D<0||(je.slice(b,b+_.length)==_&&(b+=_.length),g=!0,ae.replaceRange("",V(ze,D),V(ze,b)))}}),g)return!0}var C=z.blockCommentStart||se.blockCommentStart,P=z.blockCommentEnd||se.blockCommentEnd;if(!C||!P)return!1;var te=z.blockCommentLead||se.blockCommentLead,Z=ae.getLine(ee),$=Z.indexOf(C);if(-1==$)return!1;var j=Fe==ee?Z:ae.getLine(Fe),pe=j.indexOf(P,Fe==ee?$+C.length:0),y=V(ee,$+1),le=V(Fe,pe+1);if(-1==pe||!/comment/.test(ae.getTokenTypeAt(y))||!/comment/.test(ae.getTokenTypeAt(le))||ae.getRange(y,le,"\n").indexOf(P)>-1)return!1;var fe=Z.lastIndexOf(C,X.ch),Ee=-1==fe?-1:Z.slice(0,X.ch).indexOf(P,fe+C.length);if(-1!=fe&&-1!=Ee&&Ee+P.length!=X.ch)return!1;Ee=j.indexOf(P,Q.ch);var He=j.slice(Q.ch).lastIndexOf(C,Ee-Q.ch);return fe=-1==Ee||-1==He?-1:Q.ch+He,(-1==Ee||-1==fe||fe==Q.ch)&&(ae.operation(function(){ae.replaceRange("",V(Fe,pe-(_&&j.slice(pe-_.length,pe)==_?_.length:0)),V(Fe,pe+P.length));var ze=$+C.length;if(_&&Z.slice(ze,ze+_.length)==_&&(ze+=_.length),ae.replaceRange("",V(ee,$),V(ee,ze)),te)for(var je=ee+1;je<=Fe;++je){var D=ae.getLine(je),b=D.indexOf(te);if(-1!=b&&!H.test(D.slice(0,b))){var Te=b+te.length;_&&D.slice(Te,Te+_.length)==_&&(Te+=_.length),ae.replaceRange("",V(je,b),V(je,Te))}}}),!0)})}(de(9475))},6584:(At,nt,de)=>{!function(x){function U(V,s,M){var oe,N=V.getWrapperElement();return(oe=N.appendChild(document.createElement("div"))).className=M?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof s?oe.innerHTML=s:oe.appendChild(s),x.addClass(N,"dialog-opened"),oe}function H(V,s){V.state.currentNotificationClose&&V.state.currentNotificationClose(),V.state.currentNotificationClose=s}x.defineExtension("openDialog",function(V,s,M){M||(M={}),H(this,null);var N=U(this,V,M.bottom),oe=!1,X=this;function Q(se){if("string"==typeof se)z.value=se;else{if(oe)return;oe=!0,x.rmClass(N.parentNode,"dialog-opened"),N.parentNode.removeChild(N),X.focus(),M.onClose&&M.onClose(N)}}var ae,z=N.getElementsByTagName("input")[0];return z?(z.focus(),M.value&&(z.value=M.value,!1!==M.selectValueOnOpen&&z.select()),M.onInput&&x.on(z,"input",function(se){M.onInput(se,z.value,Q)}),M.onKeyUp&&x.on(z,"keyup",function(se){M.onKeyUp(se,z.value,Q)}),x.on(z,"keydown",function(se){M&&M.onKeyDown&&M.onKeyDown(se,z.value,Q)||((27==se.keyCode||!1!==M.closeOnEnter&&13==se.keyCode)&&(z.blur(),x.e_stop(se),Q()),13==se.keyCode&&s(z.value,se))}),!1!==M.closeOnBlur&&x.on(N,"focusout",function(se){null!==se.relatedTarget&&Q()})):(ae=N.getElementsByTagName("button")[0])&&(x.on(ae,"click",function(){Q(),X.focus()}),!1!==M.closeOnBlur&&x.on(ae,"blur",Q),ae.focus()),Q}),x.defineExtension("openConfirm",function(V,s,M){H(this,null);var N=U(this,V,M&&M.bottom),oe=N.getElementsByTagName("button"),X=!1,Q=this,z=1;function ae(){X||(X=!0,x.rmClass(N.parentNode,"dialog-opened"),N.parentNode.removeChild(N),Q.focus())}oe[0].focus();for(var se=0;se<oe.length;++se){var Fe=oe[se];(function(ee){x.on(Fe,"click",function(re){x.e_preventDefault(re),ae(),ee&&ee(Q)})})(s[se]),x.on(Fe,"blur",function(){--z,setTimeout(function(){z<=0&&ae()},200)}),x.on(Fe,"focus",function(){++z})}}),x.defineExtension("openNotification",function(V,s){H(this,Q);var oe,M=U(this,V,s&&s.bottom),N=!1,X=s&&void 0!==s.duration?s.duration:5e3;function Q(){N||(N=!0,clearTimeout(oe),x.rmClass(M.parentNode,"dialog-opened"),M.parentNode.removeChild(M))}return x.on(M,"click",function(z){x.e_preventDefault(z),Q()}),X&&(oe=setTimeout(Q,X)),Q})}(de(9475))},8237:(At,nt,de)=>{!function(x){"use strict";x.defineOption("fullScreen",!1,function(V,s,M){M==x.Init&&(M=!1),!M!=!s&&(s?function(V){var s=V.getWrapperElement();V.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:s.style.width,height:s.style.height},s.style.width="",s.style.height="auto",s.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",V.refresh()}(V):function(V){var s=V.getWrapperElement();s.className=s.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var M=V.state.fullScreenRestore;s.style.width=M.width,s.style.height=M.height,window.scrollTo(M.scrollLeft,M.scrollTop),V.refresh()}(V))})}(de(9475))},2946:(At,nt,de)=>{!function(x){var U=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),H=x.Pos,V={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function s(z){return z&&z.bracketRegex||/[(){}[\]]/}function M(z,ae,se){var Fe=z.getLineHandle(ae.line),ee=ae.ch-1,re=se&&se.afterCursor;null==re&&(re=/(^| )cm-fat-cursor($| )/.test(z.getWrapperElement().className));var L=s(se),_=!re&&ee>=0&&L.test(Fe.text.charAt(ee))&&V[Fe.text.charAt(ee)]||L.test(Fe.text.charAt(ee+1))&&V[Fe.text.charAt(++ee)];if(!_)return null;var g=">"==_.charAt(1)?1:-1;if(se&&se.strict&&g>0!=(ee==ae.ch))return null;var S=z.getTokenTypeAt(H(ae.line,ee+1)),T=N(z,H(ae.line,ee+(g>0?1:0)),g,S,se);return null==T?null:{from:H(ae.line,ee),to:T&&T.pos,match:T&&T.ch==_.charAt(0),forward:g>0}}function N(z,ae,se,Fe,ee){for(var re=ee&&ee.maxScanLineLength||1e4,L=ee&&ee.maxScanLines||1e3,_=[],g=s(ee),S=se>0?Math.min(ae.line+L,z.lastLine()+1):Math.max(z.firstLine()-1,ae.line-L),T=ae.line;T!=S;T+=se){var R=z.getLine(T);if(R){var C=se>0?0:R.length-1,P=se>0?R.length:-1;if(!(R.length>re))for(T==ae.line&&(C=ae.ch-(se<0?1:0));C!=P;C+=se){var te=R.charAt(C);if(g.test(te)&&(void 0===Fe||(z.getTokenTypeAt(H(T,C+1))||"")==(Fe||""))){var Z=V[te];if(Z&&">"==Z.charAt(1)==se>0)_.push(te);else{if(!_.length)return{pos:H(T,C),ch:te};_.pop()}}}}}return T-se!=(se>0?z.lastLine():z.firstLine())&&null}function oe(z,ae,se){for(var Fe=z.state.matchBrackets.maxHighlightLineLength||1e3,ee=se&&se.highlightNonMatching,re=[],L=z.listSelections(),_=0;_<L.length;_++){var g=L[_].empty()&&M(z,L[_].head,se);if(g&&(g.match||!1!==ee)&&z.getLine(g.from.line).length<=Fe){var S=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";re.push(z.markText(g.from,H(g.from.line,g.from.ch+1),{className:S})),g.to&&z.getLine(g.to.line).length<=Fe&&re.push(z.markText(g.to,H(g.to.line,g.to.ch+1),{className:S}))}}if(re.length){U&&z.state.focused&&z.focus();var T=function(){z.operation(function(){for(var R=0;R<re.length;R++)re[R].clear()})};if(!ae)return T;setTimeout(T,800)}}function X(z){z.operation(function(){z.state.matchBrackets.currentlyHighlighted&&(z.state.matchBrackets.currentlyHighlighted(),z.state.matchBrackets.currentlyHighlighted=null),z.state.matchBrackets.currentlyHighlighted=oe(z,!1,z.state.matchBrackets)})}function Q(z){z.state.matchBrackets&&z.state.matchBrackets.currentlyHighlighted&&(z.state.matchBrackets.currentlyHighlighted(),z.state.matchBrackets.currentlyHighlighted=null)}x.defineOption("matchBrackets",!1,function(z,ae,se){se&&se!=x.Init&&(z.off("cursorActivity",X),z.off("focus",X),z.off("blur",Q),Q(z)),ae&&(z.state.matchBrackets="object"==typeof ae?ae:{},z.on("cursorActivity",X),z.on("focus",X),z.on("blur",Q))}),x.defineExtension("matchBrackets",function(){oe(this,!0)}),x.defineExtension("findMatchingBracket",function(z,ae,se){return(se||"boolean"==typeof ae)&&(se?(se.strict=ae,ae=se):ae=ae?{strict:!0}:null),M(this,z,ae)}),x.defineExtension("scanForBracket",function(z,ae,se,Fe){return N(this,z,ae,se,Fe)})}(de(9475))},8209:(At,nt,de)=>{!function(x){"use strict";function U(s){s.state.tagHit&&s.state.tagHit.clear(),s.state.tagOther&&s.state.tagOther.clear(),s.state.tagHit=s.state.tagOther=null}function H(s){s.state.failedTagMatch=!1,s.operation(function(){if(U(s),!s.somethingSelected()){var M=s.getCursor(),N=s.getViewport();N.from=Math.min(N.from,M.line),N.to=Math.max(M.line+1,N.to);var oe=x.findMatchingTag(s,M,N);if(oe){if(s.state.matchBothTags){var X="open"==oe.at?oe.open:oe.close;X&&(s.state.tagHit=s.markText(X.from,X.to,{className:"CodeMirror-matchingtag"}))}var Q="close"==oe.at?oe.open:oe.close;Q?s.state.tagOther=s.markText(Q.from,Q.to,{className:"CodeMirror-matchingtag"}):s.state.failedTagMatch=!0}}})}function V(s){s.state.failedTagMatch&&H(s)}x.defineOption("matchTags",!1,function(s,M,N){N&&N!=x.Init&&(s.off("cursorActivity",H),s.off("viewportChange",V),U(s)),M&&(s.state.matchBothTags="object"==typeof M&&M.bothTags,s.on("cursorActivity",H),s.on("viewportChange",V),H(s))}),x.commands.toMatchingTag=function(s){var M=x.findMatchingTag(s,s.getCursor());if(M){var N="close"==M.at?M.open:M.close;N&&s.extendSelection(N.to,N.from)}}}(de(9475),de(829))},3613:(At,nt,de)=>{!function(x){"use strict";x.registerHelper("fold","brace",function(U,H){var M,V=H.line,s=U.getLine(V);function N(R){for(var C=H.ch,P=0;;){var te=C<=0?-1:s.lastIndexOf(R,C-1);if(-1!=te){if(1==P&&te<H.ch)break;if(M=U.getTokenTypeAt(x.Pos(V,te+1)),!/^(comment|string)/.test(M))return te+1;C=te-1}else{if(1==P)break;P=1,C=s.length}}}var Q,z,ae,oe=N("{"),X=N("[");if(null!=oe&&(null==X||X>oe))ae=oe,Q="{",z="}";else{if(null==X)return;ae=X,Q="[",z="]"}var ee,re,se=1,Fe=U.lastLine();e:for(var L=V;L<=Fe;++L)for(var _=U.getLine(L),g=L==V?ae:0;;){var S=_.indexOf(Q,g),T=_.indexOf(z,g);if(S<0&&(S=_.length),T<0&&(T=_.length),(g=Math.min(S,T))==_.length)break;if(U.getTokenTypeAt(x.Pos(L,g+1))==M)if(g==S)++se;else if(!--se){ee=L,re=g;break e}++g}if(null!=ee&&V!=ee)return{from:x.Pos(V,ae),to:x.Pos(ee,re)}}),x.registerHelper("fold","import",function(U,H){function V(Q){if(Q<U.firstLine()||Q>U.lastLine())return null;var z=U.getTokenAt(x.Pos(Q,1));if(/\S/.test(z.string)||(z=U.getTokenAt(x.Pos(Q,z.end+1))),"keyword"!=z.type||"import"!=z.string)return null;for(var ae=Q,se=Math.min(U.lastLine(),Q+10);ae<=se;++ae){var ee=U.getLine(ae).indexOf(";");if(-1!=ee)return{startCh:z.end,end:x.Pos(ae,ee)}}}var N,s=H.line,M=V(s);if(!M||V(s-1)||(N=V(s-2))&&N.end.line==s-1)return null;for(var oe=M.end;;){var X=V(oe.line+1);if(null==X)break;oe=X.end}return{from:U.clipPos(x.Pos(s,M.startCh+1)),to:oe}}),x.registerHelper("fold","include",function(U,H){function V(X){if(X<U.firstLine()||X>U.lastLine())return null;var Q=U.getTokenAt(x.Pos(X,1));return/\S/.test(Q.string)||(Q=U.getTokenAt(x.Pos(X,Q.end+1))),"meta"==Q.type&&"#include"==Q.string.slice(0,8)?Q.start+8:void 0}var s=H.line,M=V(s);if(null==M||null!=V(s-1))return null;for(var N=s;null!=V(N+1);)++N;return{from:x.Pos(s,M+1),to:U.clipPos(x.Pos(N))}})}(de(9475))},6571:(At,nt,de)=>{!function(x){"use strict";function U(M,N,oe,X){if(oe&&oe.call){var Q=oe;oe=null}else Q=s(M,oe,"rangeFinder");"number"==typeof N&&(N=x.Pos(N,0));var z=s(M,oe,"minFoldSize");function ae(re){var L=Q(M,N);if(!L||L.to.line-L.from.line<z)return null;if("fold"===X)return L;for(var _=M.findMarksAt(L.from),g=0;g<_.length;++g)if(_[g].__isFold){if(!re)return null;L.cleared=!0,_[g].clear()}return L}var se=ae(!0);if(s(M,oe,"scanUp"))for(;!se&&N.line>M.firstLine();)N=x.Pos(N.line-1,0),se=ae(!1);if(se&&!se.cleared&&"unfold"!==X){var Fe=function(M,N,oe){var X=s(M,N,"widget");if("function"==typeof X&&(X=X(oe.from,oe.to)),"string"==typeof X){var Q=document.createTextNode(X);(X=document.createElement("span")).appendChild(Q),X.className="CodeMirror-foldmarker"}else X&&(X=X.cloneNode(!0));return X}(M,oe,se);x.on(Fe,"mousedown",function(re){ee.clear(),x.e_preventDefault(re)});var ee=M.markText(se.from,se.to,{replacedWith:Fe,clearOnEnter:s(M,oe,"clearOnEnter"),__isFold:!0});ee.on("clear",function(re,L){x.signal(M,"unfold",M,re,L)}),x.signal(M,"fold",M,se.from,se.to)}}x.newFoldFunction=function(M,N){return function(oe,X){U(oe,X,{rangeFinder:M,widget:N})}},x.defineExtension("foldCode",function(M,N,oe){U(this,M,N,oe)}),x.defineExtension("isFolded",function(M){for(var N=this.findMarksAt(M),oe=0;oe<N.length;++oe)if(N[oe].__isFold)return!0}),x.commands.toggleFold=function(M){M.foldCode(M.getCursor())},x.commands.fold=function(M){M.foldCode(M.getCursor(),null,"fold")},x.commands.unfold=function(M){M.foldCode(M.getCursor(),{scanUp:!1},"unfold")},x.commands.foldAll=function(M){M.operation(function(){for(var N=M.firstLine(),oe=M.lastLine();N<=oe;N++)M.foldCode(x.Pos(N,0),{scanUp:!1},"fold")})},x.commands.unfoldAll=function(M){M.operation(function(){for(var N=M.firstLine(),oe=M.lastLine();N<=oe;N++)M.foldCode(x.Pos(N,0),{scanUp:!1},"unfold")})},x.registerHelper("fold","combine",function(){var M=Array.prototype.slice.call(arguments,0);return function(N,oe){for(var X=0;X<M.length;++X){var Q=M[X](N,oe);if(Q)return Q}}}),x.registerHelper("fold","auto",function(M,N){for(var oe=M.getHelpers(N,"fold"),X=0;X<oe.length;X++){var Q=oe[X](M,N);if(Q)return Q}});var V={rangeFinder:x.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:!1,clearOnEnter:!0};function s(M,N,oe){if(N&&void 0!==N[oe])return N[oe];var X=M.options.foldOptions;return X&&void 0!==X[oe]?X[oe]:V[oe]}x.defineOption("foldOptions",null),x.defineExtension("foldOption",function(M,N){return s(this,M,N)})}(de(9475))},829:(At,nt,de)=>{!function(x){"use strict";var U=x.Pos;function H(L,_){return L.line-_.line||L.ch-_.ch}var V="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",M=new RegExp("<(/?)(["+V+"]["+V+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");function N(L,_,g,S){this.line=_,this.ch=g,this.cm=L,this.text=L.getLine(_),this.min=S?Math.max(S.from,L.firstLine()):L.firstLine(),this.max=S?Math.min(S.to-1,L.lastLine()):L.lastLine()}function oe(L,_){var g=L.cm.getTokenTypeAt(U(L.line,_));return g&&/\btag\b/.test(g)}function X(L){if(!(L.line>=L.max))return L.ch=0,L.text=L.cm.getLine(++L.line),!0}function Q(L){if(!(L.line<=L.min))return L.text=L.cm.getLine(--L.line),L.ch=L.text.length,!0}function z(L){for(;;){var _=L.text.indexOf(">",L.ch);if(-1==_){if(X(L))continue;return}if(oe(L,_+1)){var g=L.text.lastIndexOf("/",_),S=g>-1&&!/\S/.test(L.text.slice(g+1,_));return L.ch=_+1,S?"selfClose":"regular"}L.ch=_+1}}function ae(L){for(;;){var _=L.ch?L.text.lastIndexOf("<",L.ch-1):-1;if(-1==_){if(Q(L))continue;return}if(oe(L,_+1)){M.lastIndex=_,L.ch=_;var g=M.exec(L.text);if(g&&g.index==_)return g}else L.ch=_}}function se(L){for(;;){M.lastIndex=L.ch;var _=M.exec(L.text);if(!_){if(X(L))continue;return}if(oe(L,_.index+1))return L.ch=_.index+_[0].length,_;L.ch=_.index+1}}function Fe(L){for(;;){var _=L.ch?L.text.lastIndexOf(">",L.ch-1):-1;if(-1==_){if(Q(L))continue;return}if(oe(L,_+1)){var g=L.text.lastIndexOf("/",_),S=g>-1&&!/\S/.test(L.text.slice(g+1,_));return L.ch=_+1,S?"selfClose":"regular"}L.ch=_}}function ee(L,_){for(var g=[];;){var T,S=se(L),R=L.line,C=L.ch-(S?S[0].length:0);if(!S||!(T=z(L)))return;if("selfClose"!=T)if(S[1]){for(var P=g.length-1;P>=0;--P)if(g[P]==S[2]){g.length=P;break}if(P<0&&(!_||_==S[2]))return{tag:S[2],from:U(R,C),to:U(L.line,L.ch)}}else g.push(S[2])}}function re(L,_){for(var g=[];;){var S=Fe(L);if(!S)return;if("selfClose"!=S){var T=L.line,R=L.ch,C=ae(L);if(!C)return;if(C[1])g.push(C[2]);else{for(var P=g.length-1;P>=0;--P)if(g[P]==C[2]){g.length=P;break}if(P<0&&(!_||_==C[2]))return{tag:C[2],from:U(L.line,L.ch),to:U(T,R)}}}else ae(L)}}x.registerHelper("fold","xml",function(L,_){for(var g=new N(L,_.line,0);;){var S=se(g);if(!S||g.line!=_.line)return;var T=z(g);if(!T)return;if(!S[1]&&"selfClose"!=T){var R=U(g.line,g.ch),C=ee(g,S[2]);return C&&H(C.from,R)>0?{from:R,to:C.from}:null}}}),x.findMatchingTag=function(L,_,g){var S=new N(L,_.line,_.ch,g);if(-1!=S.text.indexOf(">")||-1!=S.text.indexOf("<")){var T=z(S),R=T&&U(S.line,S.ch),C=T&&ae(S);if(T&&C&&!(H(S,_)>0)){var P={from:U(S.line,S.ch),to:R,tag:C[2]};return"selfClose"==T?{open:P,close:null,at:"open"}:C[1]?{open:re(S,C[2]),close:P,at:"close"}:{open:P,close:ee(S=new N(L,R.line,R.ch,g),C[2]),at:"open"}}}},x.findEnclosingTag=function(L,_,g,S){for(var T=new N(L,_.line,_.ch,g);;){var R=re(T,S);if(!R)break;var P=ee(new N(L,_.line,_.ch,g),R.tag);if(P)return{open:R,close:P}}},x.scanForClosingTag=function(L,_,g,S){return ee(new N(L,_.line,_.ch,S?{from:0,to:S}:null),g)}}(de(9475))},7630:(At,nt,de)=>{!function(x){"use strict";x.overlayMode=function(U,H,V){return{startState:function(){return{base:x.startState(U),overlay:x.startState(H),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(s){return{base:x.copyState(U,s.base),overlay:x.copyState(H,s.overlay),basePos:s.basePos,baseCur:null,overlayPos:s.overlayPos,overlayCur:null}},token:function(s,M){return(s!=M.streamSeen||Math.min(M.basePos,M.overlayPos)<s.start)&&(M.streamSeen=s,M.basePos=M.overlayPos=s.start),s.start==M.basePos&&(M.baseCur=U.token(s,M.base),M.basePos=s.pos),s.start==M.overlayPos&&(s.pos=s.start,M.overlayCur=H.token(s,M.overlay),M.overlayPos=s.pos),s.pos=Math.min(M.basePos,M.overlayPos),null==M.overlayCur?M.baseCur:null!=M.baseCur&&M.overlay.combineTokens||V&&null==M.overlay.combineTokens?M.baseCur+" "+M.overlayCur:M.overlayCur},indent:U.indent&&function(s,M,N){return U.indent(s.base,M,N)},electricChars:U.electricChars,innerMode:function(s){return{state:s.base,mode:U}},blankLine:function(s){var M,N;return U.blankLine&&(M=U.blankLine(s.base)),H.blankLine&&(N=H.blankLine(s.overlay)),null==N?M:V&&null!=M?M+" "+N:N}}}}(de(9475))},8744:(At,nt,de)=>{!function(x){"use strict";function U(H,V){function s(N){clearTimeout(M.doRedraw),M.doRedraw=setTimeout(function(){M.redraw()},N)}this.cm=H,this.options=V,this.buttonHeight=V.scrollButtonHeight||H.getOption("scrollButtonHeight"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=H.getWrapperElement().appendChild(document.createElement("div")),this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none",this.computeScale();var M=this;H.on("refresh",this.resizeHandler=function(){clearTimeout(M.doUpdate),M.doUpdate=setTimeout(function(){M.computeScale()&&s(20)},100)}),H.on("markerAdded",this.resizeHandler),H.on("markerCleared",this.resizeHandler),!1!==V.listenForChanges&&H.on("changes",this.changeHandler=function(){s(250)})}x.defineExtension("annotateScrollbar",function(H){return"string"==typeof H&&(H={className:H}),new U(this,H)}),x.defineOption("scrollButtonHeight",0),U.prototype.computeScale=function(){var H=this.cm,V=(H.getWrapperElement().clientHeight-H.display.barHeight-2*this.buttonHeight)/H.getScrollerElement().scrollHeight;if(V!=this.hScale)return this.hScale=V,!0},U.prototype.update=function(H){this.annotations=H,this.redraw()},U.prototype.redraw=function(H){!1!==H&&this.computeScale();var V=this.cm,s=this.hScale,M=document.createDocumentFragment(),N=this.annotations,oe=V.getOption("lineWrapping"),X=oe&&1.5*V.defaultTextHeight(),Q=null,z=null;function ae(T,R){if(Q!=T.line){Q=T.line,z=V.getLineHandle(T.line);var C=V.getLineHandleVisualStart(z);C!=z&&(Q=V.getLineNumber(C),z=C)}return z.widgets&&z.widgets.length||oe&&z.height>X?V.charCoords(T,"local")[R?"top":"bottom"]:V.heightAtLine(z,"local")+(R?0:z.height)}var se=V.lastLine();if(V.display.barWidth)for(var ee,Fe=0;Fe<N.length;Fe++){var re=N[Fe];if(!(re.to.line>se)){for(var L=ee||ae(re.from,!0)*s,_=ae(re.to,!1)*s;Fe<N.length-1&&!(N[Fe+1].to.line>se||(ee=ae(N[Fe+1].from,!0)*s,ee>_+.9));)_=ae((re=N[++Fe]).to,!1)*s;if(_!=L){var g=Math.max(_-L,3),S=M.appendChild(document.createElement("div"));S.style.cssText="position: absolute; right: 0px; width: "+Math.max(V.display.barWidth-1,2)+"px; top: "+(L+this.buttonHeight)+"px; height: "+g+"px",S.className=this.options.className,re.id&&S.setAttribute("annotation-id",re.id)}}}this.div.textContent="",this.div.appendChild(M)},U.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler),this.cm.off("markerAdded",this.resizeHandler),this.cm.off("markerCleared",this.resizeHandler),this.changeHandler&&this.cm.off("changes",this.changeHandler),this.div.parentNode.removeChild(this.div)}}(de(9475))},102:(At,nt,de)=>{!function(x){"use strict";function V(s,M){var N=Number(M);return/^[-+]/.test(M)?s.getCursor().line+N:N-1}x.defineOption("search",{bottom:!1}),x.commands.jumpToLine=function(s){var M=s.getCursor();!function(s,M,N,oe,X){s.openDialog?s.openDialog(M,X,{value:oe,selectValueOnOpen:!0,bottom:s.options.search.bottom}):X(prompt(N,oe))}(s,function(s){return s.phrase("Jump to line:")+' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+s.phrase("(Use line:column or scroll% syntax)")+"</span>"}(s),s.phrase("Jump to line:"),M.line+1+":"+M.ch,function(N){var oe;if(N)if(oe=/^\s*([\+\-]?\d+)\s*\:\s*(\d+)\s*$/.exec(N))s.setCursor(V(s,oe[1]),Number(oe[2]));else if(oe=/^\s*([\+\-]?\d+(\.\d+)?)\%\s*/.exec(N)){var X=Math.round(s.lineCount()*Number(oe[1])/100);/^[-+]/.test(oe[1])&&(X=M.line+X+1),s.setCursor(X-1,M.ch)}else(oe=/^\s*\:?\s*([\+\-]?\d+)\s*/.exec(N))&&s.setCursor(V(s,oe[1]),M.ch)})},x.keyMap.default["Alt-G"]="jumpToLine"}(de(9475),de(6584))},1252:(At,nt,de)=>{!function(x){"use strict";function U(s,M,N,oe){this.cm=s,this.options=oe;var X={listenForChanges:!1};for(var Q in oe)X[Q]=oe[Q];X.className||(X.className="CodeMirror-search-match"),this.annotation=s.annotateScrollbar(X),this.query=M,this.caseFold=N,this.gap={from:s.firstLine(),to:s.lastLine()+1},this.matches=[],this.update=null,this.findMatches(),this.annotation.update(this.matches);var z=this;s.on("change",this.changeHandler=function(ae,se){z.onChange(se)})}x.defineExtension("showMatchesOnScrollbar",function(s,M,N){return"string"==typeof N&&(N={className:N}),N||(N={}),new U(this,s,M,N)});function V(s,M,N){return s<=M?s:Math.max(M,s+N)}U.prototype.findMatches=function(){if(this.gap){for(var s=0;s<this.matches.length&&!((M=this.matches[s]).from.line>=this.gap.to);s++)M.to.line>=this.gap.from&&this.matches.splice(s--,1);for(var N=this.cm.getSearchCursor(this.query,x.Pos(this.gap.from,0),{caseFold:this.caseFold,multiline:this.options.multiline}),oe=this.options&&this.options.maxMatches||1e3;N.findNext();){var M;if((M={from:N.from(),to:N.to()}).from.line>=this.gap.to||(this.matches.splice(s++,0,M),this.matches.length>oe))break}this.gap=null}},U.prototype.onChange=function(s){var M=s.from.line,N=x.changeEnd(s).line,oe=N-s.to.line;if(this.gap?(this.gap.from=Math.min(V(this.gap.from,M,oe),s.from.line),this.gap.to=Math.max(V(this.gap.to,M,oe),s.from.line)):this.gap={from:s.from.line,to:N+1},oe)for(var X=0;X<this.matches.length;X++){var Q=this.matches[X],z=V(Q.from.line,M,oe);z!=Q.from.line&&(Q.from=x.Pos(z,Q.from.ch));var ae=V(Q.to.line,M,oe);ae!=Q.to.line&&(Q.to=x.Pos(ae,Q.to.ch))}clearTimeout(this.update);var se=this;this.update=setTimeout(function(){se.updateAfterChange()},250)},U.prototype.updateAfterChange=function(){this.findMatches(),this.annotation.update(this.matches)},U.prototype.clear=function(){this.cm.off("change",this.changeHandler),this.annotation.clear()}}(de(9475),de(7660),de(8744))},615:(At,nt,de)=>{!function(x){"use strict";function H(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function V(C){return C.state.search||(C.state.search=new H)}function s(C){return"string"==typeof C&&C==C.toLowerCase()}function M(C,P,te){return C.getSearchCursor(P,te,{caseFold:s(P),multiline:!0})}function oe(C,P,te,Z,$){C.openDialog?C.openDialog(P,$,{value:Z,selectValueOnOpen:!0,bottom:C.options.search.bottom}):$(prompt(te,Z))}function Q(C){return C.replace(/\\([nrt\\])/g,function(P,te){return"n"==te?"\n":"r"==te?"\r":"t"==te?"\t":"\\"==te?"\\":P})}function z(C){var P=C.match(/^\/(.*)\/([a-z]*)$/);if(P)try{C=new RegExp(P[1],-1==P[2].indexOf("i")?"":"i")}catch(te){}else C=Q(C);return("string"==typeof C?""==C:C.test(""))&&(C=/x^/),C}function ae(C,P,te){P.queryText=te,P.query=z(te),C.removeOverlay(P.overlay,s(P.query)),P.overlay=function(C,P){return"string"==typeof C?C=new RegExp(C.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),P?"gi":"g"):C.global||(C=new RegExp(C.source,C.ignoreCase?"gi":"g")),{token:function(te){C.lastIndex=te.pos;var Z=C.exec(te.string);if(Z&&Z.index==te.pos)return te.pos+=Z[0].length||1,"searching";Z?te.pos=Z.index:te.skipToEnd()}}}(P.query,s(P.query)),C.addOverlay(P.overlay),C.showMatchesOnScrollbar&&(P.annotate&&(P.annotate.clear(),P.annotate=null),P.annotate=C.showMatchesOnScrollbar(P.query,s(P.query)))}function se(C,P,te,Z){var $=V(C);if($.query)return Fe(C,P);var j=C.getSelection()||$.lastQuery;if(j instanceof RegExp&&"x^"==j.source&&(j=null),te&&C.openDialog){var pe=null,y=function(le,fe){x.e_stop(fe),le&&(le!=$.queryText&&(ae(C,$,le),$.posFrom=$.posTo=C.getCursor()),pe&&(pe.style.opacity=1),Fe(C,fe.shiftKey,function(Ee,He){var ze;He.line<3&&document.querySelector&&(ze=C.display.wrapper.querySelector(".CodeMirror-dialog"))&&ze.getBoundingClientRect().bottom-4>C.cursorCoords(He,"window").top&&((pe=ze).style.opacity=.4)}))};(function(C,P,te,Z,$){C.openDialog(P,Z,{value:te,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){ee(C)},onKeyDown:$,bottom:C.options.search.bottom})})(C,L(C),j,y,function(le,fe){var Ee=x.keyName(le),He=C.getOption("extraKeys"),ze=He&&He[Ee]||x.keyMap[C.getOption("keyMap")][Ee];"findNext"==ze||"findPrev"==ze||"findPersistentNext"==ze||"findPersistentPrev"==ze?(x.e_stop(le),ae(C,V(C),fe),C.execCommand(ze)):("find"==ze||"findPersistent"==ze)&&(x.e_stop(le),y(fe,le))}),Z&&j&&(ae(C,$,j),Fe(C,P))}else oe(C,L(C),"Search for:",j,function(le){le&&!$.query&&C.operation(function(){ae(C,$,le),$.posFrom=$.posTo=C.getCursor(),Fe(C,P)})})}function Fe(C,P,te){C.operation(function(){var Z=V(C),$=M(C,Z.query,P?Z.posFrom:Z.posTo);!$.find(P)&&!($=M(C,Z.query,P?x.Pos(C.lastLine()):x.Pos(C.firstLine(),0))).find(P)||(C.setSelection($.from(),$.to()),C.scrollIntoView({from:$.from(),to:$.to()},20),Z.posFrom=$.from(),Z.posTo=$.to(),te&&te($.from(),$.to()))})}function ee(C){C.operation(function(){var P=V(C);P.lastQuery=P.query,P.query&&(P.query=P.queryText=null,C.removeOverlay(P.overlay),P.annotate&&(P.annotate.clear(),P.annotate=null))})}function re(C,P){var te=C?document.createElement(C):document.createDocumentFragment();for(var Z in P)te[Z]=P[Z];for(var $=2;$<arguments.length;$++){var j=arguments[$];te.appendChild("string"==typeof j?document.createTextNode(j):j)}return te}function L(C){return re("",null,re("span",{className:"CodeMirror-search-label"},C.phrase("Search:"))," ",re("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"})," ",re("span",{style:"color: #888",className:"CodeMirror-search-hint"},C.phrase("(Use /re/ syntax for regexp search)")))}function T(C,P,te){C.operation(function(){for(var Z=M(C,P);Z.findNext();)if("string"!=typeof P){var $=C.getRange(Z.from(),Z.to()).match(P);Z.replace(te.replace(/\$(\d)/g,function(j,pe){return $[pe]}))}else Z.replace(te)})}function R(C,P){if(!C.getOption("readOnly")){var te=C.getSelection()||V(C).lastQuery,Z=C.phrase(P?"Replace all:":"Replace:"),$=re("",null,re("span",{className:"CodeMirror-search-label"},Z),function(C){return re("",null," ",re("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"})," ",re("span",{style:"color: #888",className:"CodeMirror-search-hint"},C.phrase("(Use /re/ syntax for regexp search)")))}(C));oe(C,$,Z,te,function(j){!j||(j=z(j),oe(C,function(C){return re("",null,re("span",{className:"CodeMirror-search-label"},C.phrase("With:"))," ",re("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"}))}(C),C.phrase("Replace with:"),"",function(pe){if(pe=Q(pe),P)T(C,j,pe);else{ee(C);var y=M(C,j,C.getCursor("from")),le=function(){var He,Ee=y.from();!(He=y.findNext())&&(y=M(C,j),!(He=y.findNext())||Ee&&y.from().line==Ee.line&&y.from().ch==Ee.ch)||(C.setSelection(y.from(),y.to()),C.scrollIntoView({from:y.from(),to:y.to()}),function(C,P,te,Z){C.openConfirm?C.openConfirm(P,Z):confirm(te)&&Z[0]()}(C,function(C){return re("",null,re("span",{className:"CodeMirror-search-label"},C.phrase("Replace?"))," ",re("button",{},C.phrase("Yes"))," ",re("button",{},C.phrase("No"))," ",re("button",{},C.phrase("All"))," ",re("button",{},C.phrase("Stop")))}(C),C.phrase("Replace?"),[function(){fe(He)},le,function(){T(C,j,pe)}]))},fe=function(Ee){y.replace("string"==typeof j?pe:pe.replace(/\$(\d)/g,function(He,ze){return Ee[ze]})),le()};le()}}))})}}x.defineOption("search",{bottom:!1}),x.commands.find=function(C){ee(C),se(C)},x.commands.findPersistent=function(C){ee(C),se(C,!1,!0)},x.commands.findPersistentNext=function(C){se(C,!1,!0,!0)},x.commands.findPersistentPrev=function(C){se(C,!0,!0,!0)},x.commands.findNext=se,x.commands.findPrev=function(C){se(C,!0)},x.commands.clearSearch=ee,x.commands.replace=R,x.commands.replaceAll=function(C){R(C,!0)}}(de(9475),de(7660),de(6584))},7660:(At,nt,de)=>{!function(x){"use strict";var z,ae,U=x.Pos;function V(L,_){for(var g=function(L){var _=L.flags;return null!=_?_:(L.ignoreCase?"i":"")+(L.global?"g":"")+(L.multiline?"m":"")}(L),S=g,T=0;T<_.length;T++)-1==S.indexOf(_.charAt(T))&&(S+=_.charAt(T));return g==S?L:new RegExp(L.source,S)}function s(L){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(L.source)}function M(L,_,g){_=V(_,"g");for(var S=g.line,T=g.ch,R=L.lastLine();S<=R;S++,T=0){_.lastIndex=T;var C=L.getLine(S),P=_.exec(C);if(P)return{from:U(S,P.index),to:U(S,P.index+P[0].length),match:P}}}function N(L,_,g){if(!s(_))return M(L,_,g);_=V(_,"gm");for(var S,T=1,R=g.line,C=L.lastLine();R<=C;){for(var P=0;P<T&&!(R>C);P++){var te=L.getLine(R++);S=null==S?te:S+"\n"+te}T*=2,_.lastIndex=g.ch;var Z=_.exec(S);if(Z){var $=S.slice(0,Z.index).split("\n"),j=Z[0].split("\n"),pe=g.line+$.length-1,y=$[$.length-1].length;return{from:U(pe,y),to:U(pe+j.length-1,1==j.length?y+j[0].length:j[j.length-1].length),match:Z}}}}function oe(L,_,g){for(var S,T=0;T<=L.length;){_.lastIndex=T;var R=_.exec(L);if(!R)break;var C=R.index+R[0].length;if(C>L.length-g)break;(!S||C>S.index+S[0].length)&&(S=R),T=R.index+1}return S}function X(L,_,g){_=V(_,"g");for(var S=g.line,T=g.ch,R=L.firstLine();S>=R;S--,T=-1){var C=L.getLine(S),P=oe(C,_,T<0?0:C.length-T);if(P)return{from:U(S,P.index),to:U(S,P.index+P[0].length),match:P}}}function Q(L,_,g){if(!s(_))return X(L,_,g);_=V(_,"gm");for(var S,T=1,R=L.getLine(g.line).length-g.ch,C=g.line,P=L.firstLine();C>=P;){for(var te=0;te<T&&C>=P;te++){var Z=L.getLine(C--);S=null==S?Z:Z+"\n"+S}T*=2;var $=oe(S,_,R);if($){var j=S.slice(0,$.index).split("\n"),pe=$[0].split("\n"),y=C+j.length,le=j[j.length-1].length;return{from:U(y,le),to:U(y+pe.length-1,1==pe.length?le+pe[0].length:pe[pe.length-1].length),match:$}}}}function se(L,_,g,S){if(L.length==_.length)return g;for(var T=0,R=g+Math.max(0,L.length-_.length);;){if(T==R)return T;var C=T+R>>1,P=S(L.slice(0,C)).length;if(P==g)return C;P>g?R=C:T=C+1}}function Fe(L,_,g,S){if(!_.length)return null;var T=S?z:ae,R=T(_).split(/\r|\n\r?/);e:for(var C=g.line,P=g.ch,te=L.lastLine()+1-R.length;C<=te;C++,P=0){var Z=L.getLine(C).slice(P),$=T(Z);if(1==R.length){var j=$.indexOf(R[0]);if(-1==j)continue e;return g=se(Z,$,j,T)+P,{from:U(C,se(Z,$,j,T)+P),to:U(C,se(Z,$,j+R[0].length,T)+P)}}var pe=$.length-R[0].length;if($.slice(pe)==R[0]){for(var y=1;y<R.length-1;y++)if(T(L.getLine(C+y))!=R[y])continue e;var le=L.getLine(C+R.length-1),fe=T(le),Ee=R[R.length-1];if(fe.slice(0,Ee.length)==Ee)return{from:U(C,se(Z,$,pe,T)+P),to:U(C+R.length-1,se(le,fe,Ee.length,T))}}}}function ee(L,_,g,S){if(!_.length)return null;var T=S?z:ae,R=T(_).split(/\r|\n\r?/);e:for(var C=g.line,P=g.ch,te=L.firstLine()-1+R.length;C>=te;C--,P=-1){var Z=L.getLine(C);P>-1&&(Z=Z.slice(0,P));var $=T(Z);if(1==R.length){var j=$.lastIndexOf(R[0]);if(-1==j)continue e;return{from:U(C,se(Z,$,j,T)),to:U(C,se(Z,$,j+R[0].length,T))}}var pe=R[R.length-1];if($.slice(0,pe.length)==pe){var y=1;for(g=C-R.length+1;y<R.length-1;y++)if(T(L.getLine(g+y))!=R[y])continue e;var le=L.getLine(C+1-R.length),fe=T(le);if(fe.slice(fe.length-R[0].length)==R[0])return{from:U(C+1-R.length,se(le,fe,le.length-R[0].length,T)),to:U(C,se(Z,$,pe.length,T))}}}}function re(L,_,g,S){var T;this.atOccurrence=!1,this.doc=L,g=g?L.clipPos(g):U(0,0),this.pos={from:g,to:g},"object"==typeof S?T=S.caseFold:(T=S,S=null),"string"==typeof _?(null==T&&(T=!1),this.matches=function(R,C){return(R?ee:Fe)(L,_,C,T)}):(_=V(_,"gm"),this.matches=S&&!1===S.multiline?function(R,C){return(R?X:M)(L,_,C)}:function(R,C){return(R?Q:N)(L,_,C)})}String.prototype.normalize?(z=function(L){return L.normalize("NFD").toLowerCase()},ae=function(L){return L.normalize("NFD")}):(z=function(L){return L.toLowerCase()},ae=function(L){return L}),re.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(L){for(var _=this.matches(L,this.doc.clipPos(L?this.pos.from:this.pos.to));_&&0==x.cmpPos(_.from,_.to);)L?_.from.ch?_.from=U(_.from.line,_.from.ch-1):_=_.from.line==this.doc.firstLine()?null:this.matches(L,this.doc.clipPos(U(_.from.line-1))):_.to.ch<this.doc.getLine(_.to.line).length?_.to=U(_.to.line,_.to.ch+1):_=_.to.line==this.doc.lastLine()?null:this.matches(L,U(_.to.line+1,0));if(_)return this.pos=_,this.atOccurrence=!0,this.pos.match||!0;var g=U(L?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:g,to:g},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(L,_){if(this.atOccurrence){var g=x.splitLines(L);this.doc.replaceRange(g,this.pos.from,this.pos.to,_),this.pos.to=U(this.pos.from.line+g.length-1,g[g.length-1].length+(1==g.length?this.pos.from.ch:0))}}},x.defineExtension("getSearchCursor",function(L,_,g){return new re(this.doc,L,_,g)}),x.defineDocExtension("getSearchCursor",function(L,_,g){return new re(this,L,_,g)}),x.defineExtension("selectMatches",function(L,_){for(var g=[],S=this.getSearchCursor(L,this.getCursor("from"),_);S.findNext()&&!(x.cmpPos(S.to(),this.getCursor("to"))>0);)g.push({anchor:S.from(),head:S.to()});g.length&&this.setSelections(g,0)})}(de(9475))},8543:(At,nt,de)=>{!function(x){"use strict";var U=x.commands,H=x.Pos;function V(B,K){return B.line==K.line&&B.ch==K.ch}var s=[];function M(B){s.push(B),s.length>50&&s.shift()}function oe(B){return s[s.length-(B?Math.min(B,1):1)]||""}var Q=null;function z(B,K,ne,me,Oe){null==Oe&&(Oe=B.getRange(K,ne)),"grow"==me&&Q&&Q.cm==B&&V(K,Q.pos)&&B.isClean(Q.gen)?function(B){if(!s.length)return M(B);s[s.length-1]+=B}(Oe):!1!==me&&M(Oe),B.replaceRange("",K,ne,"+delete"),Q="grow"==me?{cm:B,pos:K,gen:B.changeGeneration()}:null}function ae(B,K,ne){return B.findPosH(K,ne,"char",!0)}function se(B,K,ne){return B.findPosH(K,ne,"word",!0)}function Fe(B,K,ne){return B.findPosV(K,ne,"line",B.doc.sel.goalColumn)}function ee(B,K,ne){return B.findPosV(K,ne,"page",B.doc.sel.goalColumn)}function re(B,K,ne){for(var me=K.line,Oe=B.getLine(me),tt=/\S/.test(ne<0?Oe.slice(0,K.ch):Oe.slice(K.ch)),ve=B.firstLine(),Qe=B.lastLine();;){if((me+=ne)<ve||me>Qe)return B.clipPos(H(me-ne,ne<0?0:null));if(Oe=B.getLine(me),/\S/.test(Oe))tt=!0;else if(tt)return H(me,0)}}function L(B,K,ne){for(var me=K.line,Oe=K.ch,tt=B.getLine(K.line),ve=!1;;){var Qe=tt.charAt(Oe+(ne<0?-1:0));if(Qe){if(ve&&/[!?.]/.test(Qe))return H(me,Oe+(ne>0?1:0));ve||(ve=/\w/.test(Qe)),Oe+=ne}else{if(me==(ne<0?B.firstLine():B.lastLine())||(tt=B.getLine(me+ne),!/\S/.test(tt)))return H(me,Oe);me+=ne,Oe=ne<0?tt.length:0}}}function _(B,K,ne){var me;if(B.findMatchingBracket&&(me=B.findMatchingBracket(K,{strict:!0}))&&me.match&&(me.forward?1:-1)==ne)return ne>0?H(me.to.line,me.to.ch+1):me.to;for(var Oe=!0;;Oe=!1){var tt=B.getTokenAt(K),ve=H(K.line,ne<0?tt.start:tt.end);if(!(Oe&&ne>0&&tt.end==K.ch)&&/\w/.test(tt.string))return ve;var Qe=B.findPosH(ve,ne,"char");if(V(ve,Qe))return K;K=Qe}}function g(B,K){var ne=B.state.emacsPrefix;return ne?(j(B),"-"==ne?-1:Number(ne)):K?null:1}function S(B){var K="string"==typeof B?function(ne){ne.execCommand(B)}:B;return function(ne){var me=g(ne);K(ne);for(var Oe=1;Oe<me;++Oe)K(ne)}}function T(B,K,ne,me){var Oe=g(B);Oe<0&&(me=-me,Oe=-Oe);for(var tt=0;tt<Oe;++tt){var ve=ne(B,K,me);if(V(ve,K))break;K=ve}return K}function R(B,K){var ne=function(me){me.extendSelection(T(me,me.getCursor(),B,K))};return ne.motion=!0,ne}function C(B,K,ne,me){for(var tt,Oe=B.listSelections(),ve=Oe.length;ve--;)z(B,tt=Oe[ve].head,T(B,tt,K,ne),me)}function P(B,K){if(B.somethingSelected()){for(var me,ne=B.listSelections(),Oe=ne.length;Oe--;)z(B,(me=ne[Oe]).anchor,me.head,K);return!0}}function te(B,K){B.state.emacsPrefix?"-"!=K&&(B.state.emacsPrefix+=K):(B.state.emacsPrefix=K,B.on("keyHandled",$),B.on("inputRead",pe))}var Z={"Alt-G":!0,"Ctrl-X":!0,"Ctrl-Q":!0,"Ctrl-U":!0};function $(B,K){!B.state.emacsPrefixMap&&!Z.hasOwnProperty(K)&&j(B)}function j(B){B.state.emacsPrefix=null,B.off("keyHandled",$),B.off("inputRead",pe)}function pe(B,K){var ne=g(B);if(ne>1&&"+input"==K.origin){for(var me=K.text.join("\n"),Oe="",tt=1;tt<ne;++tt)Oe+=me;B.replaceSelection(Oe)}}function y(B,K){"string"==typeof K&&(/^\d$/.test(K)||"Ctrl-U"==K)||(B.removeKeyMap(D),B.state.emacsPrefixMap=!1,B.off("keyHandled",y),B.off("inputRead",y))}function le(B){B.setExtending(!1),B.setCursor(B.getCursor())}function Ee(B,K,ne){B.openDialog?B.openDialog(function(B){var K=document.createDocumentFragment(),ne=document.createElement("input");return ne.setAttribute("type","text"),ne.style.width="10em",K.appendChild(document.createTextNode(B+": ")),K.appendChild(ne),K}(K),ne,{bottom:!0}):ne(prompt(K,""))}function He(B,K){var ne=B.getCursor(),me=B.findPosH(ne,1,"word");B.replaceRange(K(B.getRange(ne,me)),ne,me),B.setCursor(me)}U.setMark=function(B){B.setCursor(B.getCursor()),B.setExtending(!B.getExtending()),B.on("change",function(){B.setExtending(!1)})},U.killRegion=function(B){z(B,B.getCursor("start"),B.getCursor("end"),!0)},U.killLineEmacs=S(function(B){var K=B.getCursor(),ne=B.clipPos(H(K.line)),me=B.getRange(K,ne);/\S/.test(me)||(me+="\n",ne=H(K.line+1,0)),z(B,K,ne,"grow",me)}),U.killRingSave=function(B){M(B.getSelection()),le(B)},U.yank=function(B){var K=B.getCursor();B.replaceRange(oe(g(B)),K,K,"paste"),B.setSelection(K,B.getCursor())},U.yankPop=function(B){B.replaceSelection((s.length>1&&s.pop(),oe()),"around","paste")},U.forwardChar=R(ae,1),U.backwardChar=R(ae,-1),U.deleteChar=function(B){C(B,ae,1,!1)},U.deleteForwardChar=function(B){P(B,!1)||C(B,ae,1,!1)},U.deleteBackwardChar=function(B){P(B,!1)||C(B,ae,-1,!1)},U.forwardWord=R(se,1),U.backwardWord=R(se,-1),U.killWord=function(B){C(B,se,1,"grow")},U.backwardKillWord=function(B){C(B,se,-1,"grow")},U.nextLine=R(Fe,1),U.previousLine=R(Fe,-1),U.scrollDownCommand=R(ee,-1),U.scrollUpCommand=R(ee,1),U.backwardParagraph=R(re,-1),U.forwardParagraph=R(re,1),U.backwardSentence=R(L,-1),U.forwardSentence=R(L,1),U.killSentence=function(B){C(B,L,1,"grow")},U.backwardKillSentence=function(B){z(B,B.getCursor(),L(B,B.getCursor(),1),"grow")},U.killSexp=function(B){C(B,_,1,"grow")},U.backwardKillSexp=function(B){C(B,_,-1,"grow")},U.forwardSexp=R(_,1),U.backwardSexp=R(_,-1),U.markSexp=function(B){var K=B.getCursor();B.setSelection(T(B,K,_,1),K)},U.transposeSexps=function(B){var K=_(B,B.getCursor(),-1),ne=_(B,K,1),me=_(B,ne,1),Oe=_(B,me,-1);B.replaceRange(B.getRange(Oe,me)+B.getRange(ne,Oe)+B.getRange(K,ne),K,me)},U.backwardUpList=S(function(B){for(var K=B.getCursor(),ne=K.line,me=K.ch,Oe=[];ne>=B.firstLine();){for(var tt=B.getLine(ne),ve=null==me?tt.length:me;ve>0;)if(")"==(me=tt.charAt(--ve)))Oe.push("(");else if("]"==me)Oe.push("[");else if("}"==me)Oe.push("{");else if(/[\(\{\[]/.test(me)&&(!Oe.length||Oe.pop()!=me))return B.extendSelection(H(ne,ve));--ne,me=null}}),U.justOneSpace=function(B){for(var K=B.getCursor(),ne=K.ch,me=K.ch,Oe=B.getLine(K.line);ne&&/\s/.test(Oe.charAt(ne-1));)--ne;for(;me<Oe.length&&/\s/.test(Oe.charAt(me));)++me;B.replaceRange(" ",H(K.line,ne),H(K.line,me))},U.openLine=S(function(B){B.replaceSelection("\n","start")}),U.transposeCharsRepeatable=S(function(B){B.execCommand("transposeChars")}),U.capitalizeWord=S(function(B){He(B,function(K){var ne=K.search(/\w/);return-1==ne?K:K.slice(0,ne)+K.charAt(ne).toUpperCase()+K.slice(ne+1).toLowerCase()})}),U.upcaseWord=S(function(B){He(B,function(K){return K.toUpperCase()})}),U.downcaseWord=S(function(B){He(B,function(K){return K.toLowerCase()})}),U.undoRepeatable=S("undo"),U.keyboardQuit=function(B){B.execCommand("clearSearch"),le(B)},U.newline=S(function(B){B.replaceSelection("\n","end")}),U.gotoLine=function(B){var K=g(B,!0);if(null!=K&&K>0)return B.setCursor(K-1);Ee(B,"Goto line",function(ne){var me;ne&&!isNaN(me=Number(ne))&&me==(0|me)&&me>0&&B.setCursor(me-1)})},U.indentRigidly=function(B){B.indentSelection(g(B,!0)||B.getOption("indentUnit"))},U.exchangePointAndMark=function(B){B.setSelection(B.getCursor("head"),B.getCursor("anchor"))},U.quotedInsertTab=S("insertTab"),U.universalArgument=function(K){K.state.emacsPrefixMap=!0,K.addKeyMap(D),K.on("keyHandled",y),K.on("inputRead",y)},x.emacs={kill:z,killRegion:P,repeated:S};var je=x.keyMap.emacs=x.normalizeKeyMap({"Ctrl-W":"killRegion","Ctrl-K":"killLineEmacs","Alt-W":"killRingSave","Ctrl-Y":"yank","Alt-Y":"yankPop","Ctrl-Space":"setMark","Ctrl-Shift-2":"setMark","Ctrl-F":"forwardChar","Ctrl-B":"backwardChar",Right:"forwardChar",Left:"backwardChar","Ctrl-D":"deleteChar",Delete:"deleteForwardChar","Ctrl-H":"deleteBackwardChar",Backspace:"deleteBackwardChar","Alt-F":"forwardWord","Alt-B":"backwardWord","Alt-Right":"forwardWord","Alt-Left":"backwardWord","Alt-D":"killWord","Alt-Backspace":"backwardKillWord","Ctrl-N":"nextLine","Ctrl-P":"previousLine",Down:"nextLine",Up:"previousLine","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd",End:"goLineEnd",Home:"goLineStart","Alt-V":"scrollDownCommand","Ctrl-V":"scrollUpCommand",PageUp:"scrollDownCommand",PageDown:"scrollUpCommand","Ctrl-Up":"backwardParagraph","Ctrl-Down":"forwardParagraph","Alt-{":"backwardParagraph","Alt-}":"forwardParagraph","Alt-A":"backwardSentence","Alt-E":"forwardSentence","Alt-K":"killSentence","Ctrl-X Delete":"backwardKillSentence","Ctrl-Alt-K":"killSexp","Ctrl-Alt-Backspace":"backwardKillSexp","Ctrl-Alt-F":"forwardSexp","Ctrl-Alt-B":"backwardSexp","Shift-Ctrl-Alt-2":"markSexp","Ctrl-Alt-T":"transposeSexps","Ctrl-Alt-U":"backwardUpList","Alt-Space":"justOneSpace","Ctrl-O":"openLine","Ctrl-T":"transposeCharsRepeatable","Alt-C":"capitalizeWord","Alt-U":"upcaseWord","Alt-L":"downcaseWord","Alt-;":"toggleComment","Ctrl-/":"undoRepeatable","Shift-Ctrl--":"undoRepeatable","Ctrl-Z":"undoRepeatable","Cmd-Z":"undoRepeatable","Ctrl-X U":"undoRepeatable","Shift-Ctrl-Z":"redo","Shift-Alt-,":"goDocStart","Shift-Alt-.":"goDocEnd","Ctrl-S":"findPersistentNext","Ctrl-R":"findPersistentPrev","Ctrl-G":"keyboardQuit","Shift-Alt-5":"replace","Alt-/":"autocomplete",Enter:"newlineAndIndent","Ctrl-J":"newline",Tab:"indentAuto","Alt-G G":"gotoLine","Ctrl-X Tab":"indentRigidly","Ctrl-X Ctrl-X":"exchangePointAndMark","Ctrl-X Ctrl-S":"save","Ctrl-X Ctrl-W":"save","Ctrl-X S":"saveAll","Ctrl-X F":"open","Ctrl-X K":"close","Ctrl-X H":"selectAll","Ctrl-Q Tab":"quotedInsertTab","Ctrl-U":"universalArgument",fallthrough:"default"}),D={"Ctrl-G":j};function b(B){D[B]=function(K){te(K,B)},je["Ctrl-"+B]=function(K){te(K,B)},Z["Ctrl-"+B]=!0}for(var Te=0;Te<10;++Te)b(String(Te));b("-")}(de(9475))},8823:(At,nt,de)=>{!function(x){"use strict";var U=x.commands,H=x.Pos;function s(g,S){g.extendSelectionsBy(function(T){return g.display.shift||g.doc.extend||T.empty()?function(g,S,T){if(T<0&&0==S.ch)return g.clipPos(H(S.line-1));var R=g.getLine(S.line);if(T>0&&S.ch>=R.length)return g.clipPos(H(S.line+1,0));for(var P,C="start",te=S.ch,Z=te,$=T<0?0:R.length,j=0;Z!=$;Z+=T,j++){var pe=R.charAt(T<0?Z-1:Z),y="_"!=pe&&x.isWordChar(pe)?"w":"o";if("w"==y&&pe.toUpperCase()==pe&&(y="W"),"start"==C)"o"!=y?(C="in",P=y):te=Z+T;else if("in"==C&&P!=y){if("w"==P&&"W"==y&&T<0&&Z--,"W"==P&&"w"==y&&T>0){if(Z==te+1){P="w";continue}Z--}break}}return H(S.line,Z)}(g.doc,T.head,S):S<0?T.from():T.to()})}function M(g,S){if(g.isReadOnly())return x.Pass;g.operation(function(){for(var T=g.listSelections().length,R=[],C=-1,P=0;P<T;P++){var te=g.listSelections()[P].head;if(!(te.line<=C)){var Z=H(te.line+(S?0:1),0);g.replaceRange("\n",Z,null,"+insertLine"),g.indentLine(Z.line,null,!0),R.push({head:Z,anchor:Z}),C=te.line+1}}g.setSelections(R)}),g.execCommand("indentAuto")}function N(g,S){for(var T=S.ch,R=T,C=g.getLine(S.line);T&&x.isWordChar(C.charAt(T-1));)--T;for(;R<C.length&&x.isWordChar(C.charAt(R));)++R;return{from:H(S.line,T),to:H(S.line,R),word:C.slice(T,R)}}function oe(g,S){for(var T=g.listSelections(),R=[],C=0;C<T.length;C++){var P=T[C],te=g.findPosV(P.anchor,S,"line",P.anchor.goalColumn),Z=g.findPosV(P.head,S,"line",P.head.goalColumn);te.goalColumn=null!=P.anchor.goalColumn?P.anchor.goalColumn:g.cursorCoords(P.anchor,"div").left,Z.goalColumn=null!=P.head.goalColumn?P.head.goalColumn:g.cursorCoords(P.head,"div").left;var $={anchor:te,head:Z};R.push(P),R.push($)}g.setSelections(R)}U.goSubwordLeft=function(g){s(g,-1)},U.goSubwordRight=function(g){s(g,1)},U.scrollLineUp=function(g){var S=g.getScrollInfo();if(!g.somethingSelected()){var T=g.lineAtHeight(S.top+S.clientHeight,"local");g.getCursor().line>=T&&g.execCommand("goLineUp")}g.scrollTo(null,S.top-g.defaultTextHeight())},U.scrollLineDown=function(g){var S=g.getScrollInfo();if(!g.somethingSelected()){var T=g.lineAtHeight(S.top,"local")+1;g.getCursor().line<=T&&g.execCommand("goLineDown")}g.scrollTo(null,S.top+g.defaultTextHeight())},U.splitSelectionByLine=function(g){for(var S=g.listSelections(),T=[],R=0;R<S.length;R++)for(var C=S[R].from(),P=S[R].to(),te=C.line;te<=P.line;++te)P.line>C.line&&te==P.line&&0==P.ch||T.push({anchor:te==C.line?C:H(te,0),head:te==P.line?P:H(te)});g.setSelections(T,0)},U.singleSelectionTop=function(g){var S=g.listSelections()[0];g.setSelection(S.anchor,S.head,{scroll:!1})},U.selectLine=function(g){for(var S=g.listSelections(),T=[],R=0;R<S.length;R++){var C=S[R];T.push({anchor:H(C.from().line,0),head:H(C.to().line+1,0)})}g.setSelections(T)},U.insertLineAfter=function(g){return M(g,!1)},U.insertLineBefore=function(g){return M(g,!0)},U.selectNextOccurrence=function(g){var S=g.getCursor("from"),T=g.getCursor("to"),R=g.state.sublimeFindFullWord==g.doc.sel;if(0==x.cmpPos(S,T)){var C=N(g,S);if(!C.word)return;g.setSelection(C.from,C.to),R=!0}else{var P=g.getRange(S,T),te=R?new RegExp("\\b"+P+"\\b"):P,Z=g.getSearchCursor(te,T),$=Z.findNext();if($||($=(Z=g.getSearchCursor(te,H(g.firstLine(),0))).findNext()),!$||function(g,S,T){for(var R=0;R<g.length;R++)if(0==x.cmpPos(g[R].from(),S)&&0==x.cmpPos(g[R].to(),T))return!0;return!1}(g.listSelections(),Z.from(),Z.to()))return;g.addSelection(Z.from(),Z.to())}R&&(g.state.sublimeFindFullWord=g.doc.sel)},U.skipAndSelectNextOccurrence=function(g){var S=g.getCursor("anchor"),T=g.getCursor("head");U.selectNextOccurrence(g),0!=x.cmpPos(S,T)&&g.doc.setSelections(g.doc.listSelections().filter(function(R){return R.anchor!=S||R.head!=T}))},U.addCursorToPrevLine=function(g){oe(g,-1)},U.addCursorToNextLine=function(g){oe(g,1)};var Q="(){}[]";function z(g){for(var S=g.listSelections(),T=[],R=0;R<S.length;R++){var C=S[R],P=C.head,te=g.scanForBracket(P,-1);if(!te)return!1;for(;;){var Z=g.scanForBracket(P,1);if(!Z)return!1;if(Z.ch==Q.charAt(Q.indexOf(te.ch)+1)){var $=H(te.pos.line,te.pos.ch+1);if(0!=x.cmpPos($,C.from())||0!=x.cmpPos(Z.pos,C.to())){T.push({anchor:$,head:Z.pos});break}if(!(te=g.scanForBracket(te.pos,-1)))return!1}P=H(Z.pos.line,Z.pos.ch+1)}}return g.setSelections(T),!0}function ae(g){return g?/\bpunctuation\b/.test(g)?g:void 0:null}function se(g,S,T){if(g.isReadOnly())return x.Pass;for(var P,R=g.listSelections(),C=[],te=0;te<R.length;te++){var Z=R[te];if(!Z.empty()){for(var $=Z.from().line,j=Z.to().line;te<R.length-1&&R[te+1].from().line==j;)j=R[++te].to().line;R[te].to().ch||j--,C.push($,j)}}C.length?P=!0:C.push(g.firstLine(),g.lastLine()),g.operation(function(){for(var pe=[],y=0;y<C.length;y+=2){var fe=C[y+1],Ee=H(C[y],0),He=H(fe),ze=g.getRange(Ee,He,!1);ze.sort(S?function(je,D){return je<D?-T:je==D?0:T}:function(je,D){var b=je.toUpperCase(),Te=D.toUpperCase();return b!=Te&&(je=b,D=Te),je<D?-T:je==D?0:T}),g.replaceRange(ze,Ee,He),P&&pe.push({anchor:Ee,head:H(fe+1,0)})}P&&g.setSelections(pe,0)})}function Fe(g,S){g.operation(function(){for(var T=g.listSelections(),R=[],C=[],P=0;P<T.length;P++)(te=T[P]).empty()?(R.push(P),C.push("")):C.push(S(g.getRange(te.from(),te.to())));var Z;for(g.replaceSelections(C,"around","case"),P=R.length-1;P>=0;P--){var te=T[R[P]];if(!(Z&&x.cmpPos(te.head,Z)>0)){var $=N(g,te.head);Z=$.from,g.replaceRange(S($.word),$.from,$.to)}}})}function ee(g){var S=g.getCursor("from"),T=g.getCursor("to");if(0==x.cmpPos(S,T)){var R=N(g,S);if(!R.word)return;S=R.from,T=R.to}return{from:S,to:T,query:g.getRange(S,T),word:R}}function re(g,S){var T=ee(g);if(T){var R=T.query,C=g.getSearchCursor(R,S?T.to:T.from);(S?C.findNext():C.findPrevious())?g.setSelection(C.from(),C.to()):(C=g.getSearchCursor(R,S?H(g.firstLine(),0):g.clipPos(H(g.lastLine()))),(S?C.findNext():C.findPrevious())?g.setSelection(C.from(),C.to()):T.word&&g.setSelection(T.from,T.to))}}U.selectScope=function(g){z(g)||g.execCommand("selectAll")},U.selectBetweenBrackets=function(g){if(!z(g))return x.Pass},U.goToBracket=function(g){g.extendSelectionsBy(function(S){var T=g.scanForBracket(S.head,1,ae(g.getTokenTypeAt(S.head)));if(T&&0!=x.cmpPos(T.pos,S.head))return T.pos;var R=g.scanForBracket(S.head,-1,ae(g.getTokenTypeAt(H(S.head.line,S.head.ch+1))));return R&&H(R.pos.line,R.pos.ch+1)||S.head})},U.swapLineUp=function(g){if(g.isReadOnly())return x.Pass;for(var S=g.listSelections(),T=[],R=g.firstLine()-1,C=[],P=0;P<S.length;P++){var te=S[P],Z=te.from().line-1,$=te.to().line;C.push({anchor:H(te.anchor.line-1,te.anchor.ch),head:H(te.head.line-1,te.head.ch)}),0==te.to().ch&&!te.empty()&&--$,Z>R?T.push(Z,$):T.length&&(T[T.length-1]=$),R=$}g.operation(function(){for(var j=0;j<T.length;j+=2){var pe=T[j],y=T[j+1],le=g.getLine(pe);g.replaceRange("",H(pe,0),H(pe+1,0),"+swapLine"),y>g.lastLine()?g.replaceRange("\n"+le,H(g.lastLine()),null,"+swapLine"):g.replaceRange(le+"\n",H(y,0),null,"+swapLine")}g.setSelections(C),g.scrollIntoView()})},U.swapLineDown=function(g){if(g.isReadOnly())return x.Pass;for(var S=g.listSelections(),T=[],R=g.lastLine()+1,C=S.length-1;C>=0;C--){var P=S[C],te=P.to().line+1,Z=P.from().line;0==P.to().ch&&!P.empty()&&te--,te<R?T.push(te,Z):T.length&&(T[T.length-1]=Z),R=Z}g.operation(function(){for(var $=T.length-2;$>=0;$-=2){var j=T[$],pe=T[$+1],y=g.getLine(j);j==g.lastLine()?g.replaceRange("",H(j-1),H(j),"+swapLine"):g.replaceRange("",H(j,0),H(j+1,0),"+swapLine"),g.replaceRange(y+"\n",H(pe,0),null,"+swapLine")}g.scrollIntoView()})},U.toggleCommentIndented=function(g){g.toggleComment({indent:!0})},U.joinLines=function(g){for(var S=g.listSelections(),T=[],R=0;R<S.length;R++){for(var C=S[R],P=C.from(),te=P.line,Z=C.to().line;R<S.length-1&&S[R+1].from().line==Z;)Z=S[++R].to().line;T.push({start:te,end:Z,anchor:!C.empty()&&P})}g.operation(function(){for(var $=0,j=[],pe=0;pe<T.length;pe++){for(var fe,y=T[pe],le=y.anchor&&H(y.anchor.line-$,y.anchor.ch),Ee=y.start;Ee<=y.end;Ee++){var He=Ee-$;Ee==y.end&&(fe=H(He,g.getLine(He).length+1)),He<g.lastLine()&&(g.replaceRange(" ",H(He),H(He+1,/^\s*/.exec(g.getLine(He+1))[0].length)),++$)}j.push({anchor:le||fe,head:fe})}g.setSelections(j,0)})},U.duplicateLine=function(g){g.operation(function(){for(var S=g.listSelections().length,T=0;T<S;T++){var R=g.listSelections()[T];R.empty()?g.replaceRange(g.getLine(R.head.line)+"\n",H(R.head.line,0)):g.replaceRange(g.getRange(R.from(),R.to()),R.from())}g.scrollIntoView()})},U.sortLines=function(g){se(g,!0,1)},U.reverseSortLines=function(g){se(g,!0,-1)},U.sortLinesInsensitive=function(g){se(g,!1,1)},U.reverseSortLinesInsensitive=function(g){se(g,!1,-1)},U.nextBookmark=function(g){var S=g.state.sublimeBookmarks;if(S)for(;S.length;){var T=S.shift(),R=T.find();if(R)return S.push(T),g.setSelection(R.from,R.to)}},U.prevBookmark=function(g){var S=g.state.sublimeBookmarks;if(S)for(;S.length;){S.unshift(S.pop());var T=S[S.length-1].find();if(T)return g.setSelection(T.from,T.to);S.pop()}},U.toggleBookmark=function(g){for(var S=g.listSelections(),T=g.state.sublimeBookmarks||(g.state.sublimeBookmarks=[]),R=0;R<S.length;R++){for(var C=S[R].from(),P=S[R].to(),te=S[R].empty()?g.findMarksAt(C):g.findMarks(C,P),Z=0;Z<te.length;Z++)if(te[Z].sublimeBookmark){te[Z].clear();for(var $=0;$<T.length;$++)T[$]==te[Z]&&T.splice($--,1);break}Z==te.length&&T.push(g.markText(C,P,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},U.clearBookmarks=function(g){var S=g.state.sublimeBookmarks;if(S)for(var T=0;T<S.length;T++)S[T].clear();S.length=0},U.selectBookmarks=function(g){var S=g.state.sublimeBookmarks,T=[];if(S)for(var R=0;R<S.length;R++){var C=S[R].find();C?T.push({anchor:C.from,head:C.to}):S.splice(R--,0)}T.length&&g.setSelections(T,0)},U.smartBackspace=function(g){if(g.somethingSelected())return x.Pass;g.operation(function(){for(var S=g.listSelections(),T=g.getOption("indentUnit"),R=S.length-1;R>=0;R--){var C=S[R].head,P=g.getRange({line:C.line,ch:0},C),te=x.countColumn(P,null,g.getOption("tabSize")),Z=g.findPosH(C,-1,"char",!1);if(P&&!/\S/.test(P)&&te%T==0){var $=new H(C.line,x.findColumn(P,te-T,T));$.ch!=C.ch&&(Z=$)}g.replaceRange("",Z,C,"+delete")}})},U.delLineRight=function(g){g.operation(function(){for(var S=g.listSelections(),T=S.length-1;T>=0;T--)g.replaceRange("",S[T].anchor,H(S[T].to().line),"+delete");g.scrollIntoView()})},U.upcaseAtCursor=function(g){Fe(g,function(S){return S.toUpperCase()})},U.downcaseAtCursor=function(g){Fe(g,function(S){return S.toLowerCase()})},U.setSublimeMark=function(g){g.state.sublimeMark&&g.state.sublimeMark.clear(),g.state.sublimeMark=g.setBookmark(g.getCursor())},U.selectToSublimeMark=function(g){var S=g.state.sublimeMark&&g.state.sublimeMark.find();S&&g.setSelection(g.getCursor(),S)},U.deleteToSublimeMark=function(g){var S=g.state.sublimeMark&&g.state.sublimeMark.find();if(S){var T=g.getCursor(),R=S;if(x.cmpPos(T,R)>0){var C=R;R=T,T=C}g.state.sublimeKilled=g.getRange(T,R),g.replaceRange("",T,R)}},U.swapWithSublimeMark=function(g){var S=g.state.sublimeMark&&g.state.sublimeMark.find();S&&(g.state.sublimeMark.clear(),g.state.sublimeMark=g.setBookmark(g.getCursor()),g.setCursor(S))},U.sublimeYank=function(g){null!=g.state.sublimeKilled&&g.replaceSelection(g.state.sublimeKilled,null,"paste")},U.showInCenter=function(g){var S=g.cursorCoords(null,"local");g.scrollTo(null,(S.top+S.bottom)/2-g.getScrollInfo().clientHeight/2)},U.findUnder=function(g){re(g,!0)},U.findUnderPrevious=function(g){re(g,!1)},U.findAllUnder=function(g){var S=ee(g);if(S){for(var T=g.getSearchCursor(S.query),R=[],C=-1;T.findNext();)R.push({anchor:T.from(),head:T.to()}),T.from().line<=S.from.line&&T.from().ch<=S.from.ch&&C++;g.setSelections(R,C)}};var L=x.keyMap;L.macSublime={"Cmd-Left":"goLineStartSmart","Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-Left":"goSubwordLeft","Ctrl-Right":"goSubwordRight","Ctrl-Alt-Up":"scrollLineUp","Ctrl-Alt-Down":"scrollLineDown","Cmd-L":"selectLine","Shift-Cmd-L":"splitSelectionByLine",Esc:"singleSelectionTop","Cmd-Enter":"insertLineAfter","Shift-Cmd-Enter":"insertLineBefore","Cmd-D":"selectNextOccurrence","Shift-Cmd-Space":"selectScope","Shift-Cmd-M":"selectBetweenBrackets","Cmd-M":"goToBracket","Cmd-Ctrl-Up":"swapLineUp","Cmd-Ctrl-Down":"swapLineDown","Cmd-/":"toggleCommentIndented","Cmd-J":"joinLines","Shift-Cmd-D":"duplicateLine",F5:"sortLines","Shift-F5":"reverseSortLines","Cmd-F5":"sortLinesInsensitive","Shift-Cmd-F5":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Cmd-F2":"toggleBookmark","Shift-Cmd-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Cmd-K Cmd-D":"skipAndSelectNextOccurrence","Cmd-K Cmd-K":"delLineRight","Cmd-K Cmd-U":"upcaseAtCursor","Cmd-K Cmd-L":"downcaseAtCursor","Cmd-K Cmd-Space":"setSublimeMark","Cmd-K Cmd-A":"selectToSublimeMark","Cmd-K Cmd-W":"deleteToSublimeMark","Cmd-K Cmd-X":"swapWithSublimeMark","Cmd-K Cmd-Y":"sublimeYank","Cmd-K Cmd-C":"showInCenter","Cmd-K Cmd-G":"clearBookmarks","Cmd-K Cmd-Backspace":"delLineLeft","Cmd-K Cmd-1":"foldAll","Cmd-K Cmd-0":"unfoldAll","Cmd-K Cmd-J":"unfoldAll","Ctrl-Shift-Up":"addCursorToPrevLine","Ctrl-Shift-Down":"addCursorToNextLine","Cmd-F3":"findUnder","Shift-Cmd-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Cmd-[":"fold","Shift-Cmd-]":"unfold","Cmd-I":"findIncremental","Shift-Cmd-I":"findIncrementalReverse","Cmd-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"macDefault"},x.normalizeKeyMap(L.macSublime),L.pcSublime={"Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-T":"transposeChars","Alt-Left":"goSubwordLeft","Alt-Right":"goSubwordRight","Ctrl-Up":"scrollLineUp","Ctrl-Down":"scrollLineDown","Ctrl-L":"selectLine","Shift-Ctrl-L":"splitSelectionByLine",Esc:"singleSelectionTop","Ctrl-Enter":"insertLineAfter","Shift-Ctrl-Enter":"insertLineBefore","Ctrl-D":"selectNextOccurrence","Shift-Ctrl-Space":"selectScope","Shift-Ctrl-M":"selectBetweenBrackets","Ctrl-M":"goToBracket","Shift-Ctrl-Up":"swapLineUp","Shift-Ctrl-Down":"swapLineDown","Ctrl-/":"toggleCommentIndented","Ctrl-J":"joinLines","Shift-Ctrl-D":"duplicateLine",F9:"sortLines","Shift-F9":"reverseSortLines","Ctrl-F9":"sortLinesInsensitive","Shift-Ctrl-F9":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Ctrl-F2":"toggleBookmark","Shift-Ctrl-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Ctrl-K Ctrl-D":"skipAndSelectNextOccurrence","Ctrl-K Ctrl-K":"delLineRight","Ctrl-K Ctrl-U":"upcaseAtCursor","Ctrl-K Ctrl-L":"downcaseAtCursor","Ctrl-K Ctrl-Space":"setSublimeMark","Ctrl-K Ctrl-A":"selectToSublimeMark","Ctrl-K Ctrl-W":"deleteToSublimeMark","Ctrl-K Ctrl-X":"swapWithSublimeMark","Ctrl-K Ctrl-Y":"sublimeYank","Ctrl-K Ctrl-C":"showInCenter","Ctrl-K Ctrl-G":"clearBookmarks","Ctrl-K Ctrl-Backspace":"delLineLeft","Ctrl-K Ctrl-1":"foldAll","Ctrl-K Ctrl-0":"unfoldAll","Ctrl-K Ctrl-J":"unfoldAll","Ctrl-Alt-Up":"addCursorToPrevLine","Ctrl-Alt-Down":"addCursorToNextLine","Ctrl-F3":"findUnder","Shift-Ctrl-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Ctrl-[":"fold","Shift-Ctrl-]":"unfold","Ctrl-I":"findIncremental","Shift-Ctrl-I":"findIncrementalReverse","Ctrl-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"pcDefault"},x.normalizeKeyMap(L.pcSublime),L.sublime=L.default==L.macDefault?L.macSublime:L.pcSublime}(de(9475),de(7660),de(2946))},1900:(At,nt,de)=>{!function(x){"use strict";var U=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<Del>",type:"keyToKey",toKeys:"x",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"gn",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!0}},{keys:"gN",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!1}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],H=U.length,V=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"vglobal",shortName:"v"},{name:"global",shortName:"g"}],s=x.Pos;x.Vim=function(){function X(o,l){this==x.keyMap.vim&&(x.rmClass(o.getWrapperElement(),"cm-fat-cursor"),"contenteditable"==o.getOption("inputStyle")&&null!=document.body.style.caretColor&&(function(o){ae(o),o.off("cursorActivity",z),o.state.fatCursorMarks=null}(o),o.getInputField().style.caretColor="")),(!l||l.attach!=Q)&&function(o){o.setOption("disableInput",!1),o.off("cursorActivity",Rn),x.off(o.getInputField(),"paste",g(o)),o.state.vim=null}(o)}function Q(o,l){this==x.keyMap.vim&&(x.addClass(o.getWrapperElement(),"cm-fat-cursor"),"contenteditable"==o.getOption("inputStyle")&&null!=document.body.style.caretColor&&(function(o){o.state.fatCursorMarks=[],z(o),o.on("cursorActivity",z)}(o),o.getInputField().style.caretColor="transparent")),(!l||l.attach!=Q)&&function(o){o.setOption("disableInput",!0),o.setOption("showCursorWhenSelecting",!1),x.signal(o,"vim-mode-change",{mode:"normal"}),o.on("cursorActivity",Rn),tt(o),x.on(o.getInputField(),"paste",g(o))}(o)}function z(o){if(o.state.fatCursorMarks){ae(o);for(var l=o.listSelections(),u=[],c=0;c<l.length;c++){var d=l[c];if(d.empty()){var v=o.getLine(d.anchor.line).length;u.push(d.anchor.ch<v?o.markText(d.anchor,s(d.anchor.line,d.anchor.ch+1),{className:"cm-fat-cursor-mark"}):o.markText(s(d.anchor.line,v-1),s(d.anchor.line,v),{className:"cm-fat-cursor-mark"}))}}o.state.fatCursorMarks=u}}function ae(o){var l=o.state.fatCursorMarks;if(l)for(var u=0;u<l.length;u++)l[u].clear()}function ee(o,l){if(l){if(this[o])return this[o];var u=function(o){if("'"==o.charAt(0))return o.charAt(1);var l=o.split(/-(?!$)/),u=l[l.length-1];if(1==l.length&&1==l[0].length)return!1;if(2==l.length&&"Shift"==l[0]&&1==u.length)return!1;for(var c=!1,d=0;d<l.length;d++){var v=l[d];v in re?l[d]=re[v]:c=!0,v in L&&(l[d]=L[v])}return!!c&&(He(u)&&(l[l.length-1]=u.toLowerCase()),"<"+l.join("-")+">")}(o);if(!u)return!1;var c=x.Vim.findKey(l,u);return"function"==typeof c&&x.signal(l,"vim-keypress",u),c}}x.defineOption("vimMode",!1,function(o,l,u){l&&"vim"!=o.getOption("keyMap")?o.setOption("keyMap","vim"):!l&&u!=x.Init&&/^vim/.test(o.getOption("keyMap"))&&o.setOption("keyMap","default")});var re={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A",CapsLock:""},L={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"};function g(o){var l=o.state.vim;return l.onPasteFn||(l.onPasteFn=function(){l.insertMode||(o.setCursor(St(o.getCursor(),0,1)),Yt.enterInsertMode(o,{},l))}),l.onPasteFn}var S=/[\d]/,T=[x.isWordChar,function(o){return o&&!x.isWordChar(o)&&!/\s/.test(o)}],R=[function(o){return/\S/.test(o)}];function C(o,l){for(var u=[],c=o;c<o+l;c++)u.push(String.fromCharCode(c));return u}var pe,P=C(65,26),te=C(97,26),Z=C(48,10),$=[].concat(P,te,Z,["<",">"]),j=[].concat(P,te,Z,["-",'"',".",":","_","/"]);try{pe=new RegExp("^[\\p{Lu}]$","u")}catch(o){pe=/^[A-Z]$/}function y(o,l){return l>=o.firstLine()&&l<=o.lastLine()}function le(o){return/^[a-z]$/.test(o)}function fe(o){return-1!="()[]{}".indexOf(o)}function Ee(o){return S.test(o)}function He(o){return pe.test(o)}function ze(o){return/^\s*$/.test(o)}function je(o){return-1!=".?!".indexOf(o)}function D(o,l){for(var u=0;u<l.length;u++)if(l[u]==o)return!0;return!1}var b={};function Te(o,l,u,c,d){if(void 0===l&&!d)throw Error("defaultValue is required unless callback is provided");if(u||(u="string"),b[o]={type:u,defaultValue:l,callback:d},c)for(var v=0;v<c.length;v++)b[c[v]]=b[o];l&&B(o,l)}function B(o,l,u,c){var d=b[o],v=(c=c||{}).scope;if(!d)return new Error("Unknown option: "+o);if("boolean"==d.type){if(l&&!0!==l)return new Error("Invalid argument: "+o+"="+l);!1!==l&&(l=!0)}d.callback?("local"!==v&&d.callback(l,void 0),"global"!==v&&u&&d.callback(l,u)):("local"!==v&&(d.value="boolean"==d.type?!!l:l),"global"!==v&&u&&(u.state.vim.options[o]={value:l}))}function K(o,l,u){var c=b[o],d=(u=u||{}).scope;if(!c)return new Error("Unknown option: "+o);if(c.callback){var v=l&&c.callback(void 0,l);return"global"!==d&&void 0!==v?v:"local"!==d?c.callback():void 0}return((v="global"!==d&&l&&l.state.vim.options[o])||"local"!==d&&c||{}).value}Te("filetype",void 0,"string",["ft"],function(o,l){if(void 0!==l){var u;if(void 0===o)return"null"==(u=l.getOption("mode"))?"":u;l.setOption("mode",u=""==o?"null":o)}});var ve,ne=function(){var o=100,l=-1,u=0,c=0,d=new Array(o);function w(E,G){(l+=G)>u?l=u:l<c&&(l=c);var J=d[(o+l)%o];if(J&&!J.find()){var we,ge=G>0?1:-1,ye=E.getCursor();do{if((J=d[(o+(l+=ge))%o])&&(we=J.find())&&!rt(ye,we))break}while(l<u&&l>c)}return J}return{cachedCursor:void 0,add:function(E,G,J){var we=d[l%o];function ye(Be){var De=++l%o,qe=d[De];qe&&qe.clear(),d[De]=E.setBookmark(Be)}if(we){var xe=we.find();xe&&!rt(xe,G)&&ye(G)}else ye(G);ye(J),u=l,(c=l-o+1)<0&&(c=0)},find:function(E,G){var J=l,ge=w(E,G);return l=J,ge&&ge.find()},move:w}},me=function(o){return o?{changes:o.changes,expectCursorActivityForChange:o.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function Oe(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=me()}function tt(o){return o.state.vim||(o.state.vim={inputState:new nr,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},fakeCursor:null,insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),o.state.vim}function Qe(){for(var o in ve={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:ne(),macroModeState:new Oe,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new gr({}),searchHistoryController:new tr,exCommandHistoryController:new tr},b){var l=b[o];l.value=l.defaultValue}}Oe.prototype={exitMacroRecordMode:function(){var o=ve.macroModeState;o.onRecordingDone&&o.onRecordingDone(),o.onRecordingDone=void 0,o.isRecording=!1},enterMacroRecordMode:function(o,l){var u=ve.registerController.getRegister(l);u&&(u.clear(),this.latestRegister=l,o.openDialog&&(this.onRecordingDone=o.openDialog(document.createTextNode("(recording)["+l+"]"),null,{bottom:!0})),this.isRecording=!0)}};var Ke,hr={buildKeyMap:function(){},getRegisterController:function(){return ve.registerController},resetVimGlobalState_:Qe,getVimGlobalState_:function(){return ve},maybeInitVimState_:tt,suppressErrorLogging:!1,InsertModeKey:si,map:function(o,l,u){Ir.map(o,l,u)},unmap:function(o,l){Ir.unmap(o,l)},noremap:function(o,l,u){function c(we){return we?[we]:["normal","insert","visual"]}for(var d=c(u),v=U.length,F=v-H;F<v&&d.length;F++){var E=U[F];if(!(E.keys!=l||u&&E.context&&E.context!==u||"ex"===E.type.substr(0,2)||"key"===E.type.substr(0,3))){var G={};for(var J in E)G[J]=E[J];G.keys=o,u&&!G.context&&(G.context=u),this._mapCommand(G);var ge=c(E.context);d=d.filter(function(we){return-1===ge.indexOf(we)})}}},mapclear:function(o){var l=U.length,u=H,c=U.slice(0,l-u);if(U=U.slice(l-u),o)for(var d=c.length-1;d>=0;d--){var v=c[d];if(o!==v.context)if(v.context)this._mapCommand(v);else{var w=["normal","insert","visual"];for(var F in w)if(w[F]!==o){var E={};for(var G in v)E[G]=v[G];E.context=w[F],this._mapCommand(E)}}}},setOption:B,getOption:K,defineOption:Te,defineEx:function(o,l,u){if(l){if(0!==o.indexOf(l))throw new Error('(Vim.defineEx) "'+l+'" is not a prefix of "'+o+'", command not registered')}else l=o;Ri[o]=u,Ir.commandMap_[l]={name:o,shortName:l,type:"api"}},handleKey:function(o,l,u){var c=this.findKey(o,l,u);if("function"==typeof c)return c()},findKey:function(o,l,u){var G,c=tt(o);function d(){var J=ve.macroModeState;if(J.isRecording){if("q"==l)return J.exitMacroRecordMode(),pt(o),!0;"mapping"!=u&&function(o,l){if(!o.isPlaying){var c=ve.registerController.getRegister(o.latestRegister);c&&c.pushText(l)}}(J,l)}}function v(){if("<Esc>"==l)return pt(o),c.visualMode?ar(o):c.insertMode&&kn(o),!0}return!1===(G=c.insertMode?function(){if(v())return!0;for(var J=c.inputState.keyBuffer=c.inputState.keyBuffer+l,ge=1==l.length,we=Dt.matchCommand(J,U,c.inputState,"insert");J.length>1&&"full"!=we.type;){J=c.inputState.keyBuffer=J.slice(1);var ye=Dt.matchCommand(J,U,c.inputState,"insert");"none"!=ye.type&&(we=ye)}if("none"==we.type)return pt(o),!1;if("partial"==we.type)return Ke&&window.clearTimeout(Ke),Ke=window.setTimeout(function(){c.insertMode&&c.inputState.keyBuffer&&pt(o)},K("insertModeEscKeysTimeout")),!ge;if(Ke&&window.clearTimeout(Ke),ge){for(var xe=o.listSelections(),Be=0;Be<xe.length;Be++){var De=xe[Be].head;o.replaceRange("",St(De,0,-(J.length-1)),De,"+input")}ve.macroModeState.lastInsertModeChanges.changes.pop()}return pt(o),we.command}():function(){if(d()||v())return!0;var J=c.inputState.keyBuffer=c.inputState.keyBuffer+l;if(/^[1-9]\d*$/.test(J))return!0;if(!(ge=/^(\d*)(.*)$/.exec(J)))return pt(o),!1;var we=c.visualMode?"visual":"normal",ye=ge[2]||ge[1];c.inputState.operatorShortcut&&c.inputState.operatorShortcut.slice(-1)==ye&&(ye=c.inputState.operatorShortcut);var ge,xe=Dt.matchCommand(ye,U,c.inputState,we);return"none"==xe.type?(pt(o),!1):"partial"==xe.type||(c.inputState.keyBuffer="",(ge=/^(\d*)(.*)$/.exec(J))[1]&&"0"!=ge[1]&&c.inputState.pushRepeatDigit(ge[1]),xe.command)}())?c.insertMode||1!==l.length?void 0:function(){return!0}:!0===G?function(){return!0}:function(){return o.operation(function(){o.curOp.isVimOp=!0;try{"keyToKey"==G.type?function(J){for(var ge;J;)ge=/<\w+-.+?>|<\w+>|./.exec(J),J=J.substring(ge.index+(l=ge[0]).length),x.Vim.handleKey(o,l,"mapping")}(G.toKeys):Dt.processCommand(o,c,G)}catch(J){throw o.state.vim=void 0,tt(o),x.Vim.suppressErrorLogging||console.log(J),J}return!0})}},handleEx:function(o,l){Ir.processCommand(o,l)},defineMotion:function(o,l){Ht[o]=l},defineAction:function(o,l){Yt[o]=l},defineOperator:function(o,l){Fr[o]=l},mapCommand:function(o,l,u,c,d){var v={keys:o,type:l};for(var w in v[l]=u,v[l+"Args"]=c,d)v[w]=d[w];Nn(v)},_mapCommand:Nn,defineRegister:function(o,l){var u=ve.registerController.registers;if(!o||1!=o.length)throw Error("Register name must be 1 character");if(u[o])throw Error("Register already defined "+o);u[o]=l,j.push(o)},exitVisualMode:ar,exitInsertMode:kn};function nr(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}function pt(o,l){o.state.vim.inputState=new nr,x.signal(o,"vim-command-done",l)}function yt(o,l,u){this.clear(),this.keyBuffer=[o||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!l,this.blockwise=!!u}function gr(o){this.registers=o,this.unnamedRegister=o['"']=new yt,o["."]=new yt,o[":"]=new yt,o["/"]=new yt}function tr(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}nr.prototype.pushRepeatDigit=function(o){this.operator?this.motionRepeat=this.motionRepeat.concat(o):this.prefixRepeat=this.prefixRepeat.concat(o)},nr.prototype.getRepeat=function(){var o=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(o=1,this.prefixRepeat.length>0&&(o*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(o*=parseInt(this.motionRepeat.join(""),10))),o},yt.prototype={setText:function(o,l,u){this.keyBuffer=[o||""],this.linewise=!!l,this.blockwise=!!u},pushText:function(o,l){l&&(this.linewise||this.keyBuffer.push("\n"),this.linewise=!0),this.keyBuffer.push(o)},pushInsertModeChanges:function(o){this.insertModeChanges.push(me(o))},pushSearchQuery:function(o){this.searchQueries.push(o)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}},gr.prototype={pushText:function(o,l,u,c,d){if("_"!==o){c&&"\n"!==u.charAt(u.length-1)&&(u+="\n");var v=this.isValidRegister(o)?this.getRegister(o):null;if(!v){switch(l){case"yank":this.registers[0]=new yt(u,c,d);break;case"delete":case"change":-1==u.indexOf("\n")?this.registers["-"]=new yt(u,c):(this.shiftNumericRegisters_(),this.registers[1]=new yt(u,c))}return void this.unnamedRegister.setText(u,c,d)}He(o)?v.pushText(u,c):v.setText(u,c,d),this.unnamedRegister.setText(v.toString(),c)}},getRegister:function(o){return this.isValidRegister(o)?(o=o.toLowerCase(),this.registers[o]||(this.registers[o]=new yt),this.registers[o]):this.unnamedRegister},isValidRegister:function(o){return o&&D(o,j)},shiftNumericRegisters_:function(){for(var o=9;o>=2;o--)this.registers[o]=this.getRegister(""+(o-1))}},tr.prototype={nextMatch:function(o,l){var u=this.historyBuffer,c=l?-1:1;null===this.initialPrefix&&(this.initialPrefix=o);for(var d=this.iterator+c;l?d>=0:d<u.length;d+=c)for(var v=u[d],w=0;w<=v.length;w++)if(this.initialPrefix==v.substring(0,w))return this.iterator=d,v;return d>=u.length?(this.iterator=u.length,this.initialPrefix):d<0?o:void 0},pushInput:function(o){var l=this.historyBuffer.indexOf(o);l>-1&&this.historyBuffer.splice(l,1),o.length&&this.historyBuffer.push(o)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var Dt={matchCommand:function(o,l,u,c){var d=function(o,l,u,c){for(var d,v=[],w=[],F=0;F<l.length;F++){var E=l[F];"insert"==u&&"insert"!=E.context||E.context&&E.context!=u||c.operator&&"action"==E.type||!(d=yr(o,E.keys))||("partial"==d&&v.push(E),"full"==d&&w.push(E))}return{partial:v.length&&v,full:w.length&&w}}(o,l,c,u);if(!d.full&&!d.partial)return{type:"none"};if(!d.full&&d.partial)return{type:"partial"};for(var v,w=0;w<d.full.length;w++)v||(v=d.full[w]);if("<character>"==v.keys.slice(-11)){var E=function(o){var l=/^.*(<[^>]+>)$/.exec(o),u=l?l[1]:o.slice(-1);if(u.length>1)switch(u){case"<CR>":u="\n";break;case"<Space>":u=" ";break;default:u=""}return u}(o);if(!E)return{type:"none"};u.selectedCharacter=E}return{type:"full",command:v}},processCommand:function(o,l,u){switch(l.inputState.repeatOverride=u.repeatOverride,u.type){case"motion":this.processMotion(o,l,u);break;case"operator":this.processOperator(o,l,u);break;case"operatorMotion":this.processOperatorMotion(o,l,u);break;case"action":this.processAction(o,l,u);break;case"search":this.processSearch(o,l,u);break;case"ex":case"keyToEx":this.processEx(o,l,u)}},processMotion:function(o,l,u){l.inputState.motion=u.motion,l.inputState.motionArgs=ft(u.motionArgs),this.evalInput(o,l)},processOperator:function(o,l,u){var c=l.inputState;if(c.operator){if(c.operator==u.operator)return c.motion="expandToLine",c.motionArgs={linewise:!0},void this.evalInput(o,l);pt(o)}c.operator=u.operator,c.operatorArgs=ft(u.operatorArgs),u.keys.length>1&&(c.operatorShortcut=u.keys),u.exitVisualBlock&&(l.visualBlock=!1,Qt(o)),l.visualMode&&this.evalInput(o,l)},processOperatorMotion:function(o,l,u){var c=l.visualMode,d=ft(u.operatorMotionArgs);d&&c&&d.visualLine&&(l.visualLine=!0),this.processOperator(o,l,u),c||this.processMotion(o,l,u)},processAction:function(o,l,u){var c=l.inputState,d=c.getRepeat(),v=!!d,w=ft(u.actionArgs)||{};c.selectedCharacter&&(w.selectedCharacter=c.selectedCharacter),u.operator&&this.processOperator(o,l,u),u.motion&&this.processMotion(o,l,u),(u.motion||u.operator)&&this.evalInput(o,l),w.repeat=d||1,w.repeatIsExplicit=v,w.registerName=c.registerName,pt(o),l.lastMotion=null,u.isEdit&&this.recordLastEdit(l,c,u),Yt[u.action](o,w,l)},processSearch:function(o,l,u){if(o.getSearchCursor){var c=u.searchArgs.forward,d=u.searchArgs.wholeWordOnly;sr(o).setReversed(!c);var v=c?"/":"?",w=sr(o).getQuery(),F=o.getScrollInfo();switch(u.searchArgs.querySrc){case"prompt":var we=ve.macroModeState;we.isPlaying?E(Be=we.replaySearchQueries.shift(),!0,!1):yn(o,{onClose:function(De){o.scrollTo(F.left,F.top),E(De,!0,!0);var qe=ve.macroModeState;qe.isRecording&&function(o,l){if(!o.isPlaying){var c=ve.registerController.getRegister(o.latestRegister);c&&c.pushSearchQuery&&c.pushSearchQuery(l)}}(qe,De)},prefix:v,desc:"(JavaScript regexp)",onKeyUp:function(De,qe,Xe){var ur,Lt,et=x.keyName(De);"Up"==et||"Down"==et?(ur=De.target?De.target.selectionEnd:0,Xe(qe=ve.searchHistoryController.nextMatch(qe,"Up"==et)||""),ur&&De.target&&(De.target.selectionEnd=De.target.selectionStart=Math.min(ur,De.target.value.length))):"Left"!=et&&"Right"!=et&&"Ctrl"!=et&&"Alt"!=et&&"Shift"!=et&&ve.searchHistoryController.reset();try{Lt=ln(o,qe,!0,!0)}catch(_t){}Lt?o.scrollIntoView(Ni(o,!c,Lt),30):(In(o),o.scrollTo(F.left,F.top))},onKeyDown:function(De,qe,Xe){var et=x.keyName(De);"Esc"==et||"Ctrl-C"==et||"Ctrl-["==et||"Backspace"==et&&""==qe?(ve.searchHistoryController.pushInput(qe),ve.searchHistoryController.reset(),ln(o,w),In(o),o.scrollTo(F.left,F.top),x.e_stop(De),pt(o),Xe(),o.focus()):"Up"==et||"Down"==et?x.e_stop(De):"Ctrl-U"==et&&(x.e_stop(De),Xe(""))}});break;case"wordUnderCursor":var ye=kr(o,!1,0,!1,!0),xe=!0;if(ye||(ye=kr(o,!1,0,!1,!1),xe=!1),!ye)return;var Be=o.getLine(ye.start.line).substring(ye.start.ch,ye.end.ch);Be=xe&&d?"\\b"+Be+"\\b":function(o){return o.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}(Be),ve.jumpList.cachedCursor=o.getCursor(),o.setCursor(ye.start),E(Be,!0,!1)}}function E(De,qe,Xe){ve.searchHistoryController.pushInput(De),ve.searchHistoryController.reset();try{ln(o,De,qe,Xe)}catch(et){return ht(o,"Invalid regex: "+De),void pt(o)}Dt.processMotion(o,l,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:u.searchArgs.toJumplist}})}},processEx:function(o,l,u){function c(v){ve.exCommandHistoryController.pushInput(v),ve.exCommandHistoryController.reset(),Ir.processCommand(o,v)}function d(v,w,F){var J,E=x.keyName(v);("Esc"==E||"Ctrl-C"==E||"Ctrl-["==E||"Backspace"==E&&""==w)&&(ve.exCommandHistoryController.pushInput(w),ve.exCommandHistoryController.reset(),x.e_stop(v),pt(o),F(),o.focus()),"Up"==E||"Down"==E?(x.e_stop(v),J=v.target?v.target.selectionEnd:0,F(w=ve.exCommandHistoryController.nextMatch(w,"Up"==E)||""),J&&v.target&&(v.target.selectionEnd=v.target.selectionStart=Math.min(J,v.target.value.length))):"Ctrl-U"==E?(x.e_stop(v),F("")):"Left"!=E&&"Right"!=E&&"Ctrl"!=E&&"Alt"!=E&&"Shift"!=E&&ve.exCommandHistoryController.reset()}"keyToEx"==u.type?Ir.processCommand(o,u.exArgs.input):yn(o,l.visualMode?{onClose:c,prefix:":",value:"'<,'>",onKeyDown:d,selectValueOnOpen:!1}:{onClose:c,prefix:":",onKeyDown:d})},evalInput:function(o,l){var ye,xe,Be,u=l.inputState,c=u.motion,d=u.motionArgs||{},v=u.operator,w=u.operatorArgs||{},F=u.registerName,E=l.sel,G=$e(l.visualMode?Tt(o,E.head):o.getCursor("head")),J=$e(l.visualMode?Tt(o,E.anchor):o.getCursor("anchor")),ge=$e(G),we=$e(J);if(v&&this.recordLastEdit(l,u),(Be=void 0!==u.repeatOverride?u.repeatOverride:u.getRepeat())>0&&d.explicitRepeat?d.repeatIsExplicit=!0:(d.noRepeat||!d.explicitRepeat&&0===Be)&&(Be=1,d.repeatIsExplicit=!1),u.selectedCharacter&&(d.selectedCharacter=w.selectedCharacter=u.selectedCharacter),d.repeat=Be,pt(o),c){var De=Ht[c](o,G,d,l,u);if(l.lastMotion=Ht[c],!De)return;if(d.toJumplist){var qe=ve.jumpList,Xe=qe.cachedCursor;Xe?(dr(o,Xe,De),delete qe.cachedCursor):dr(o,G,De)}De instanceof Array?(xe=De[0],ye=De[1]):ye=De,ye||(ye=$e(G)),l.visualMode?(l.visualBlock&&ye.ch===1/0||(ye=Tt(o,ye)),xe&&(xe=Tt(o,xe)),E.anchor=xe=xe||we,E.head=ye,Qt(o),Ve(o,l,"<",st(xe,ye)?xe:ye),Ve(o,l,">",st(xe,ye)?ye:xe)):v||(ye=Tt(o,ye),o.setCursor(ye.line,ye.ch))}if(v){if(w.lastSel){xe=we;var et=w.lastSel,bt=Math.abs(et.head.line-et.anchor.line),ur=Math.abs(et.head.ch-et.anchor.ch);ye=et.visualLine?s(we.line+bt,we.ch):et.visualBlock?s(we.line+bt,we.ch+ur):et.head.line==et.anchor.line?s(we.line,we.ch+ur):s(we.line+bt,we.ch),l.visualMode=!0,l.visualLine=et.visualLine,l.visualBlock=et.visualBlock,E=l.sel={anchor:xe,head:ye},Qt(o)}else l.visualMode&&(w.lastSel={anchor:$e(E.anchor),head:$e(E.head),visualBlock:l.visualBlock,visualLine:l.visualLine});var Lt,_t,gt,lt,qt;if(l.visualMode){if(Lt=Ft(E.head,E.anchor),_t=vt(E.head,E.anchor),gt=l.visualLine||w.linewise,qt=Gr(o,{anchor:Lt,head:_t},lt=l.visualBlock?"block":gt?"line":"char"),gt){var Gt=qt.ranges;if("block"==lt)for(var ut=0;ut<Gt.length;ut++)Gt[ut].head.ch=wt(o,Gt[ut].head.line);else"line"==lt&&(Gt[0].head=s(Gt[0].head.line+1,0))}}else{if(Lt=$e(xe||we),st(_t=$e(ye||ge),Lt)){var en=Lt;Lt=_t,_t=en}(gt=d.linewise||w.linewise)?function(o,l,u){l.ch=0,u.ch=0,u.line++}(0,Lt,_t):d.forward&&function(o,l,u){var c=o.getRange(l,u);if(/\n\s*$/.test(c)){var d=c.split("\n");d.pop();for(var v=d.pop();d.length>0&&v&&ze(v);v=d.pop())u.line--,u.ch=0;v?(u.line--,u.ch=wt(o,u.line)):u.ch=0}}(o,Lt,_t),qt=Gr(o,{anchor:Lt,head:_t},lt="char",!d.inclusive||gt)}o.setSelections(qt.ranges,qt.primary),l.lastMotion=null,w.repeat=Be,w.registerName=F,w.linewise=gt;var tn=Fr[v](o,w,qt.ranges,we,ye);l.visualMode&&ar(o,null!=tn),tn&&o.setCursor(tn)}},recordLastEdit:function(o,l,u){var c=ve.macroModeState;c.isPlaying||(o.lastEditInputState=l,o.lastEditActionCommand=u,c.lastInsertModeChanges.changes=[],c.lastInsertModeChanges.expectCursorActivityForChange=!1,c.lastInsertModeChanges.visualBlock=o.visualBlock?o.sel.head.line-o.sel.anchor.line:0)}},Ht={moveToTopLine:function(o,l,u){var c=oi(o).top+u.repeat-1;return s(c,It(o.getLine(c)))},moveToMiddleLine:function(o){var l=oi(o),u=Math.floor(.5*(l.top+l.bottom));return s(u,It(o.getLine(u)))},moveToBottomLine:function(o,l,u){var c=oi(o).bottom-u.repeat+1;return s(c,It(o.getLine(c)))},expandToLine:function(o,l,u){return s(l.line+u.repeat-1,1/0)},findNext:function(o,l,u){var c=sr(o),d=c.getQuery();if(d){var v=!u.forward;return v=c.isReversed()?!v:v,ii(o,d),Ni(o,v,d,u.repeat)}},findAndSelectNextInclusive:function(o,l,u,c,d){var v=sr(o),w=v.getQuery();if(w){var F=!u.forward,E=function(o,l,u,c,d){return void 0===c&&(c=1),o.operation(function(){var v=o.getCursor(),w=o.getSearchCursor(u,v),F=w.find(!l);!d.visualMode&&F&&rt(w.from(),v)&&w.find(!l);for(var E=0;E<c;E++)if(!(F=w.find(l))&&!(w=o.getSearchCursor(u,l?s(o.lastLine()):s(o.firstLine(),0))).find(l))return;return[w.from(),w.to()]})}(o,F=v.isReversed()?!F:F,w,u.repeat,c);if(E){if(d.operator)return E;var G=E[0],J=s(E[1].line,E[1].ch-1);if(c.visualMode){(c.visualLine||c.visualBlock)&&(c.visualLine=!1,c.visualBlock=!1,x.signal(o,"vim-mode-change",{mode:"visual",subMode:""}));var ge=c.sel.anchor;if(ge)return v.isReversed()?u.forward?[ge,G]:[ge,J]:u.forward?[ge,J]:[ge,G]}else c.visualMode=!0,c.visualLine=!1,c.visualBlock=!1,x.signal(o,"vim-mode-change",{mode:"visual",subMode:""});return F?[J,G]:[G,J]}}},goToMark:function(o,l,u,c){var d=Bi(o,c,u.selectedCharacter);return d?u.linewise?{line:d.line,ch:It(o.getLine(d.line))}:d:null},moveToOtherHighlightedEnd:function(o,l,u,c){if(c.visualBlock&&u.sameLine){var d=c.sel;return[Tt(o,s(d.anchor.line,d.head.ch)),Tt(o,s(d.head.line,d.anchor.ch))]}return[c.sel.head,c.sel.anchor]},jumpToMark:function(o,l,u,c){for(var d=l,v=0;v<u.repeat;v++){var w=d;for(var F in c.marks)if(le(F)){var E=c.marks[F].find();if(!((u.forward?st(E,w):st(w,E))||u.linewise&&E.line==w.line)){var J=rt(w,d),ge=u.forward?Br(w,E,d):Br(d,E,w);(J||ge)&&(d=E)}}}return u.linewise&&(d=s(d.line,It(o.getLine(d.line)))),d},moveByCharacters:function(o,l,u){var d=u.repeat;return s(l.line,u.forward?l.ch+d:l.ch-d)},moveByLines:function(o,l,u,c){var d=l,v=d.ch;switch(c.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:v=c.lastHPos;break;default:c.lastHPos=v}var w=u.repeat+(u.repeatOffset||0),F=u.forward?d.line+w:d.line-w,E=o.firstLine(),G=o.lastLine(),J=o.findPosV(d,u.forward?w:-w,"line",c.lastHSPos);return(u.forward?J.line>F:J.line<F)&&(F=J.line,v=J.ch),F<E&&d.line==E?this.moveToStartOfLine(o,l,u,c):F>G&&d.line==G?Ae(o,l,u,c,!0):(u.toFirstChar&&(v=It(o.getLine(F)),c.lastHPos=v),c.lastHSPos=o.charCoords(s(F,v),"div").left,s(F,v))},moveByDisplayLines:function(o,l,u,c){var d=l;switch(c.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:c.lastHSPos=o.charCoords(d,"div").left}var v=u.repeat;if((w=o.findPosV(d,u.forward?v:-v,"line",c.lastHSPos)).hitSide)if(u.forward)var F=o.charCoords(w,"div"),w=o.coordsChar({top:F.top+8,left:c.lastHSPos},"div");else{var G=o.charCoords(s(o.firstLine(),0),"div");G.left=c.lastHSPos,w=o.coordsChar(G,"div")}return c.lastHPos=w.ch,w},moveByPage:function(o,l,u){var d=u.repeat;return o.findPosV(l,u.forward?d:-d,"page")},moveByParagraph:function(o,l,u){return kt(o,l,u.repeat,u.forward?1:-1)},moveBySentence:function(o,l,u){return function(o,l,u,c){function d(E,G){if(G.pos+G.dir<0||G.pos+G.dir>=G.line.length){if(G.ln+=G.dir,!y(E,G.ln))return G.line=null,G.ln=null,void(G.pos=null);G.line=E.getLine(G.ln),G.pos=G.dir>0?0:G.line.length-1}else G.pos+=G.dir}function v(E,G,J,ge){var ye=""===(we=E.getLine(G)),xe={line:we,ln:G,pos:J,dir:ge},Be={ln:xe.ln,pos:xe.pos},De=""===xe.line;for(d(E,xe);null!==xe.line;){if(Be.ln=xe.ln,Be.pos=xe.pos,""===xe.line&&!De)return{ln:xe.ln,pos:xe.pos};if(ye&&""!==xe.line&&!ze(xe.line[xe.pos]))return{ln:xe.ln,pos:xe.pos};je(xe.line[xe.pos])&&!ye&&(xe.pos===xe.line.length-1||ze(xe.line[xe.pos+1]))&&(ye=!0),d(E,xe)}var we=E.getLine(Be.ln);Be.pos=0;for(var qe=we.length-1;qe>=0;--qe)if(!ze(we[qe])){Be.pos=qe;break}return Be}function w(E,G,J,ge){var ye={line:we=E.getLine(G),ln:G,pos:J,dir:ge},xe={ln:ye.ln,pos:null},Be=""===ye.line;for(d(E,ye);null!==ye.line;){if(""===ye.line&&!Be)return null!==xe.pos?xe:{ln:ye.ln,pos:ye.pos};if(je(ye.line[ye.pos])&&null!==xe.pos&&(ye.ln!==xe.ln||ye.pos+1!==xe.pos))return xe;""!==ye.line&&!ze(ye.line[ye.pos])&&(Be=!1,xe={ln:ye.ln,pos:ye.pos}),d(E,ye)}var we=E.getLine(xe.ln);xe.pos=0;for(var De=0;De<we.length;++De)if(!ze(we[De])){xe.pos=De;break}return xe}for(var F={ln:l.line,pos:l.ch};u>0;)F=c<0?w(o,F.ln,F.pos,c):v(o,F.ln,F.pos,c),u--;return s(F.ln,F.pos)}(o,l,u.repeat,u.forward?1:-1)},moveByScroll:function(o,l,u,c){var v,d=o.getScrollInfo(),w=u.repeat;w||(w=d.clientHeight/(2*o.defaultTextHeight()));var F=o.charCoords(l,"local");if(u.repeat=w,!(v=Ht.moveByDisplayLines(o,l,u,c)))return null;var E=o.charCoords(v,"local");return o.scrollTo(null,d.top+E.top-F.top),v},moveByWords:function(o,l,u){return function(o,l,u,c,d,v){var w=$e(l),F=[];(c&&!d||!c&&d)&&u++;for(var E=!(c&&d),G=0;G<u;G++){var J=Ce(o,l,c,v,E);if(!J){var ge=wt(o,o.lastLine());F.push(c?{line:o.lastLine(),from:ge,to:ge}:{line:0,from:0,to:0});break}F.push(J),l=s(J.line,c?J.to-1:J.from)}var we=F.length!=u,ye=F[0],xe=F.pop();return c&&!d?(!we&&(ye.from!=w.ch||ye.line!=w.line)&&(xe=F.pop()),s(xe.line,xe.from)):c&&d?s(xe.line,xe.to-1):!c&&d?(!we&&(ye.to!=w.ch||ye.line!=w.line)&&(xe=F.pop()),s(xe.line,xe.to)):s(xe.line,xe.from)}(o,l,u.repeat,!!u.forward,!!u.wordEnd,!!u.bigWord)},moveTillCharacter:function(o,l,u){var d=Nt(o,u.repeat,u.forward,u.selectedCharacter),v=u.forward?-1:1;return ce(v,u),d?(d.ch+=v,d):null},moveToCharacter:function(o,l,u){var c=u.repeat;return ce(0,u),Nt(o,c,u.forward,u.selectedCharacter)||l},moveToSymbol:function(o,l,u){return function(o,l,u,c){var d=$e(o.getCursor()),v=u?1:-1,w=u?o.lineCount():-1,F=d.ch,E=d.line,G=o.getLine(E),J={lineText:G,nextCh:G.charAt(F),lastCh:null,index:F,symb:c,reverseSymb:(u?{")":"(","}":"{"}:{"(":")","{":"}"})[c],forward:u,depth:0,curMoveThrough:!1},ge=Je[c];if(!ge)return d;var we=W[ge].init,ye=W[ge].isComplete;for(we&&we(J);E!==w&&l;){if(J.index+=v,J.nextCh=J.lineText.charAt(J.index),!J.nextCh){if(J.lineText=o.getLine(E+=v)||"",v>0)J.index=0;else{var xe=J.lineText.length;J.index=xe>0?xe-1:0}J.nextCh=J.lineText.charAt(J.index)}ye(J)&&(d.line=E,d.ch=J.index,l--)}return J.nextCh||J.curMoveThrough?s(E,J.index):d}(o,u.repeat,u.forward,u.selectedCharacter)||l},moveToColumn:function(o,l,u,c){var d=u.repeat;return c.lastHPos=d-1,c.lastHSPos=o.charCoords(l,"div").left,function(o,l){var u=o.getCursor().line;return Tt(o,s(u,l-1))}(o,d)},moveToEol:function(o,l,u,c){return Ae(o,l,u,c,!1)},moveToFirstNonWhiteSpaceCharacter:function(o,l){return s(l.line,It(o.getLine(l.line)))},moveToMatchedSymbol:function(o,l){for(var w,u=l,c=u.line,d=u.ch,v=o.getLine(c);d<v.length;d++)if((w=v.charAt(d))&&fe(w)){var F=o.getTokenTypeAt(s(c,d+1));if("string"!==F&&"comment"!==F)break}if(d<v.length){var E="<"===d||">"===d?/[(){}[\]<>]/:/[(){}[\]]/;return o.findMatchingBracket(s(c,d),{bracketRegex:E}).to}return u},moveToStartOfLine:function(o,l){return s(l.line,0)},moveToLineOrEdgeOfDocument:function(o,l,u){var c=u.forward?o.lastLine():o.firstLine();return u.repeatIsExplicit&&(c=u.repeat-o.getOption("firstLineNumber")),s(c,It(o.getLine(c)))},textObjectManipulation:function(o,l,u,c){var w=u.selectedCharacter;"b"==w?w="(":"B"==w&&(w="{");var E,F=!u.textObjectInner;if({"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"}[w])E=function(o,l,u,c){var v,w,d=l,F={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[u],E={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[u],J=o.getLine(d.line).charAt(d.ch)===E?1:0;if(v=o.scanForBracket(s(d.line,d.ch+J),-1,void 0,{bracketRegex:F}),w=o.scanForBracket(s(d.line,d.ch+J),1,void 0,{bracketRegex:F}),!v||!w)return{start:d,end:d};if((v=v.pos).line==(w=w.pos).line&&v.ch>w.ch||v.line>w.line){var ge=v;v=w,w=ge}return c?w.ch+=1:v.ch+=1,{start:v,end:w}}(o,l,w,F);else if({"'":!0,'"':!0,"`":!0}[w])E=function(o,l,u,c){var F,E,G,J,d=$e(l),w=o.getLine(d.line).split(""),ge=w.indexOf(u);if(d.ch<ge?d.ch=ge:ge<d.ch&&w[d.ch]==u&&(E=d.ch,--d.ch),w[d.ch]!=u||E)for(G=d.ch;G>-1&&!F;G--)w[G]==u&&(F=G+1);else F=d.ch+1;if(F&&!E)for(G=F,J=w.length;G<J&&!E;G++)w[G]==u&&(E=G);return F&&E?(c&&(--F,++E),{start:s(d.line,F),end:s(d.line,E)}):{start:d,end:d}}(o,l,w,F);else if("W"===w)E=kr(o,F,0,!0);else if("w"===w)E=kr(o,F,0,!1);else if("p"===w)if(E=kt(o,l,u.repeat,0,F),u.linewise=!0,c.visualMode)c.visualLine||(c.visualLine=!0);else{var G=c.inputState.operatorArgs;G&&(G.linewise=!0),E.end.line--}else{if("t"!==w)return null;E=function(o,l,u){var c=l;if(!x.findMatchingTag||!x.findEnclosingTag)return{start:c,end:c};var d=x.findMatchingTag(o,l)||x.findEnclosingTag(o,l);return d&&d.open&&d.close?u?{start:d.open.from,end:d.close.to}:{start:d.open.to,end:d.close.from}:{start:c,end:c}}(o,l,F)}return o.state.vim.visualMode?function(o,l,u){var w,c=o.state.vim.sel,d=c.head,v=c.anchor;return st(u,l)&&(w=u,u=l,l=w),st(d,v)?(d=Ft(l,d),v=vt(v,u)):(v=Ft(l,v),-1==(d=St(d=vt(d,u),0,-1)).ch&&d.line!=o.firstLine()&&(d=s(d.line-1,wt(o,d.line-1)))),[v,d]}(o,E.start,E.end):[E.start,E.end]},repeatLastCharacterSearch:function(o,l,u){var c=ve.lastCharacterSearch,d=u.repeat,v=u.forward===c.forward,w=(c.increment?1:0)*(v?-1:1);o.moveH(-w,"char"),u.inclusive=!!v;var F=Nt(o,d,v,c.selectedCharacter);return F?(F.ch+=w,F):(o.moveH(w,"char"),l)}};function Kr(o,l){for(var u=[],c=0;c<l;c++)u.push(o);return u}var Fr={change:function(o,l,u){var c,d,v=o.state.vim,w=u[0].anchor,F=u[0].head;if(v.visualMode)if(l.fullLine)F.ch=Number.MAX_VALUE,F.line--,o.setSelection(w,F),d=o.getSelection(),o.replaceSelection(""),c=w;else{d=o.getSelection();var we=Kr("",u.length);o.replaceSelections(we),c=Ft(u[0].head,u[0].anchor)}else{d=o.getRange(w,F);var E=v.lastEditInputState||{};if("moveByWords"==E.motion&&!ze(d)){var G=/\s+$/.exec(d);G&&E.motionArgs&&E.motionArgs.forward&&(F=St(F,0,-G[0].length),d=d.slice(0,-G[0].length))}var J=new s(w.line-1,Number.MAX_VALUE),ge=o.firstLine()==o.lastLine();F.line>o.lastLine()&&l.linewise&&!ge?o.replaceRange("",J,F):o.replaceRange("",w,F),l.linewise&&(ge||(o.setCursor(J),x.commands.newlineAndIndent(o)),w.ch=Number.MAX_VALUE),c=w}ve.registerController.pushText(l.registerName,"change",d,l.linewise,u.length>1),Yt.enterInsertMode(o,{head:c},o.state.vim)},delete:function(o,l,u){var c,d,v=o.state.vim;if(v.visualBlock){d=o.getSelection();var E=Kr("",u.length);o.replaceSelections(E),c=u[0].anchor}else{var w=u[0].anchor,F=u[0].head;l.linewise&&F.line!=o.firstLine()&&w.line==o.lastLine()&&w.line==F.line-1&&(w.line==o.firstLine()?w.ch=0:w=s(w.line-1,wt(o,w.line-1))),d=o.getRange(w,F),o.replaceRange("",w,F),c=w,l.linewise&&(c=Ht.moveToFirstNonWhiteSpaceCharacter(o,w))}return ve.registerController.pushText(l.registerName,"delete",d,l.linewise,v.visualBlock),Tt(o,c)},indent:function(o,l,u){var c=o.state.vim,v=c.visualBlock?u[u.length-1].anchor.line:u[0].head.line,w=c.visualMode?l.repeat:1;l.linewise&&v--;for(var F=u[0].anchor.line;F<=v;F++)for(var E=0;E<w;E++)o.indentLine(F,l.indentRight);return Ht.moveToFirstNonWhiteSpaceCharacter(o,u[0].anchor)},indentAuto:function(o,l,u){return o.execCommand("indentAuto"),Ht.moveToFirstNonWhiteSpaceCharacter(o,u[0].anchor)},changeCase:function(o,l,u,c,d){for(var v=o.getSelections(),w=[],F=l.toLower,E=0;E<v.length;E++){var G=v[E],J="";if(!0===F)J=G.toLowerCase();else if(!1===F)J=G.toUpperCase();else for(var ge=0;ge<G.length;ge++){var we=G.charAt(ge);J+=He(we)?we.toLowerCase():we.toUpperCase()}w.push(J)}return o.replaceSelections(w),l.shouldMoveCursor?d:!o.state.vim.visualMode&&l.linewise&&u[0].anchor.line+1==u[0].head.line?Ht.moveToFirstNonWhiteSpaceCharacter(o,c):l.linewise?c:Ft(u[0].anchor,u[0].head)},yank:function(o,l,u,c){var d=o.state.vim,v=o.getSelection(),w=d.visualMode?Ft(d.sel.anchor,d.sel.head,u[0].head,u[0].anchor):c;return ve.registerController.pushText(l.registerName,"yank",v,l.linewise,d.visualBlock),w}};var Yt={jumpListWalk:function(o,l,u){if(!u.visualMode){var c=l.repeat,w=ve.jumpList.move(o,l.forward?c:-c),F=w?w.find():void 0;F=F||o.getCursor(),o.setCursor(F)}},scroll:function(o,l,u){if(!u.visualMode){var c=l.repeat||1,d=o.defaultTextHeight(),v=o.getScrollInfo().top,w=d*c,F=l.forward?v+w:v-w,E=$e(o.getCursor()),G=o.charCoords(E,"local");if(l.forward)F>G.top?(E.line+=(F-G.top)/d,E.line=Math.ceil(E.line),o.setCursor(E),G=o.charCoords(E,"local"),o.scrollTo(null,G.top)):o.scrollTo(null,F);else{var J=F+o.getScrollInfo().clientHeight;J<G.bottom?(E.line-=(G.bottom-J)/d,E.line=Math.floor(E.line),o.setCursor(E),G=o.charCoords(E,"local"),o.scrollTo(null,G.bottom-o.getScrollInfo().clientHeight)):o.scrollTo(null,F)}}},scrollToCursor:function(o,l){var u=o.getCursor().line,c=o.charCoords(s(u,0),"local"),d=o.getScrollInfo().clientHeight,v=c.top,w=c.bottom-v;switch(l.position){case"center":v=v-d/2+w;break;case"bottom":v=v-d+w}o.scrollTo(null,v)},replayMacro:function(o,l,u){var c=l.selectedCharacter,d=l.repeat,v=ve.macroModeState;for("@"==c?c=v.latestRegister:v.latestRegister=c;d--;)ho(o,u,v,c)},enterMacroRecordMode:function(o,l){var u=ve.macroModeState,c=l.selectedCharacter;ve.registerController.isValidRegister(c)&&u.enterMacroRecordMode(o,c)},toggleOverwrite:function(o){o.state.overwrite?(o.toggleOverwrite(!1),o.setOption("keyMap","vim-insert"),x.signal(o,"vim-mode-change",{mode:"insert"})):(o.toggleOverwrite(!0),o.setOption("keyMap","vim-replace"),x.signal(o,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(o,l,u){if(!o.getOption("readOnly")){u.insertMode=!0,u.insertModeRepeat=l&&l.repeat||1;var c=l?l.insertAt:null,d=u.sel,v=l.head||o.getCursor("head"),w=o.listSelections().length;if("eol"==c)v=s(v.line,wt(o,v.line));else if("bol"==c)v=s(v.line,0);else if("charAfter"==c)v=St(v,0,1);else if("firstNonBlank"==c)v=Ht.moveToFirstNonWhiteSpaceCharacter(o,v);else if("startOfSelectedArea"==c){if(!u.visualMode)return;u.visualBlock?(v=s(Math.min(d.head.line,d.anchor.line),Math.min(d.head.ch,d.anchor.ch)),w=Math.abs(d.head.line-d.anchor.line)+1):v=d.head.line<d.anchor.line?d.head:s(d.anchor.line,0)}else if("endOfSelectedArea"==c){if(!u.visualMode)return;u.visualBlock?(v=s(Math.min(d.head.line,d.anchor.line),Math.max(d.head.ch+1,d.anchor.ch)),w=Math.abs(d.head.line-d.anchor.line)+1):v=d.head.line>=d.anchor.line?St(d.head,0,1):s(d.anchor.line,0)}else if("inplace"==c){if(u.visualMode)return}else"lastEdit"==c&&(v=xn(o)||v);o.setOption("disableInput",!1),l&&l.replace?(o.toggleOverwrite(!0),o.setOption("keyMap","vim-replace"),x.signal(o,"vim-mode-change",{mode:"replace"})):(o.toggleOverwrite(!1),o.setOption("keyMap","vim-insert"),x.signal(o,"vim-mode-change",{mode:"insert"})),ve.macroModeState.isPlaying||(o.on("change",bn),x.on(o.getInputField(),"keydown",ui)),u.visualMode&&ar(o),Zr(o,v,w)}},toggleVisualMode:function(o,l,u){var v,c=l.repeat,d=o.getCursor();u.visualMode?u.visualLine^l.linewise||u.visualBlock^l.blockwise?(u.visualLine=!!l.linewise,u.visualBlock=!!l.blockwise,x.signal(o,"vim-mode-change",{mode:"visual",subMode:u.visualLine?"linewise":u.visualBlock?"blockwise":""}),Qt(o)):ar(o):(u.visualMode=!0,u.visualLine=!!l.linewise,u.visualBlock=!!l.blockwise,v=Tt(o,s(d.line,d.ch+c-1)),u.sel={anchor:d,head:v},x.signal(o,"vim-mode-change",{mode:"visual",subMode:u.visualLine?"linewise":u.visualBlock?"blockwise":""}),Qt(o),Ve(o,u,"<",Ft(d,v)),Ve(o,u,">",vt(d,v)))},reselectLastSelection:function(o,l,u){var c=u.lastSelection;if(u.visualMode&&Xr(o,u),c){var d=c.anchorMark.find(),v=c.headMark.find();if(!d||!v)return;u.sel={anchor:d,head:v},u.visualMode=!0,u.visualLine=c.visualLine,u.visualBlock=c.visualBlock,Qt(o),Ve(o,u,"<",Ft(d,v)),Ve(o,u,">",vt(d,v)),x.signal(o,"vim-mode-change",{mode:"visual",subMode:u.visualLine?"linewise":u.visualBlock?"blockwise":""})}},joinLines:function(o,l,u){var c,d;if(u.visualMode){if(c=o.getCursor("anchor"),st(d=o.getCursor("head"),c)){var v=d;d=c,c=v}d.ch=wt(o,d.line)-1}else{var w=Math.max(l.repeat,2);c=o.getCursor(),d=Tt(o,s(c.line+w-1,1/0))}for(var F=0,E=c.line;E<d.line;E++){F=wt(o,c.line),v=s(c.line+1,wt(o,c.line+1));var G=o.getRange(c,v);G=l.keepSpaces?G.replace(/\n\r?/g,""):G.replace(/\n\s*/g," "),o.replaceRange(G,c,v)}var J=s(c.line,F);u.visualMode&&ar(o,!1),o.setCursor(J)},newLineAndEnterInsertMode:function(o,l,u){u.insertMode=!0;var c=$e(o.getCursor());c.line!==o.firstLine()||l.after?(c.line=l.after?c.line:c.line-1,c.ch=wt(o,c.line),o.setCursor(c),(x.commands.newlineAndIndentContinueComment||x.commands.newlineAndIndent)(o)):(o.replaceRange("\n",s(o.firstLine(),0)),o.setCursor(o.firstLine(),0)),this.enterInsertMode(o,{repeat:l.repeat},u)},paste:function(o,l,u){var c=$e(o.getCursor()),d=ve.registerController.getRegister(l.registerName);if(v=d.toString()){if(l.matchIndent){var w=o.getOption("tabSize"),F=function(ut){var en=ut.split("\t").length-1,un=ut.split(" ").length-1;return en*w+1*un},E=o.getLine(o.getCursor().line),G=F(E.match(/^\s*/)[0]),J=v.replace(/\n$/,""),ge=v!==J,we=F(v.match(/^\s*/)[0]),v=J.replace(/^\s*/gm,function(ut){var en=G+(F(ut)-we);if(en<0)return"";if(o.getOption("indentWithTabs")){var un=Math.floor(en/w);return Array(un+1).join("\t")}return Array(en+1).join(" ")});v+=ge?"\n":""}l.repeat>1&&(v=Array(l.repeat+1).join(v));var De,qe,ye=d.linewise,xe=d.blockwise;if(xe){v=v.split("\n"),ye&&v.pop();for(var Be=0;Be<v.length;Be++)v[Be]=""==v[Be]?" ":v[Be];c.ch+=l.after?1:0,c.ch=Math.min(wt(o,c.line),c.ch)}else ye?u.visualMode?v=u.visualLine?v.slice(0,-1):"\n"+v.slice(0,v.length-1)+"\n":l.after?(v="\n"+v.slice(0,v.length-1),c.ch=wt(o,c.line)):c.ch=0:c.ch+=l.after?1:0;if(u.visualMode){u.lastPastedText=v;var Xe,et=function(o,l){var v,w,F,u=l.lastSelection,d=function(){var v=o.getCursor(),w=o.getCursor(),F=u.visualBlock;if(F){w=s(v.line+F.height,v.ch+F.width);for(var J=[],ge=v.line;ge<w.line;ge++){var we=s(ge,v.ch),ye=s(ge,w.ch);J.push({anchor:we,head:ye})}o.setSelections(J)}else{var Be=u.anchorMark.find(),De=u.headMark.find(),qe=De.line-Be.line;w={line:w.line+qe,ch:qe?w.ch:De.ch-Be.ch+w.ch},u.visualLine&&(v=s(v.line,0),w=s(w.line,wt(o,w.line))),o.setSelection(v,w)}return[v,w]};return l.visualMode?(v=o.listSelections(),F=v[v.length-1],[st((w=v[0]).anchor,w.head)?w.anchor:w.head,st(F.anchor,F.head)?F.head:F.anchor]):d()}(o,u),bt=et[0],ur=et[1],Lt=o.getSelection(),_t=o.listSelections(),gt=new Array(_t.length).join("1").split("1");u.lastSelection&&(Xe=u.lastSelection.headMark.find()),ve.registerController.unnamedRegister.setText(Lt),xe?(o.replaceSelections(gt),ur=s(bt.line+v.length-1,bt.ch),o.setCursor(bt),Rr(o,ur),o.replaceSelections(v),De=bt):u.visualBlock?(o.replaceSelections(gt),o.setCursor(bt),o.replaceRange(v,bt,bt),De=bt):(o.replaceRange(v,bt,ur),De=o.posFromIndex(o.indexFromPos(bt)+v.length-1)),Xe&&(u.lastSelection.headMark=o.setBookmark(Xe)),ye&&(De.ch=0)}else if(xe){for(o.setCursor(c),Be=0;Be<v.length;Be++){var lt=c.line+Be;lt>o.lastLine()&&o.replaceRange("\n",s(lt,0)),wt(o,lt)<c.ch&&an(o,lt,c.ch)}o.setCursor(c),Rr(o,s(c.line+v.length-1,c.ch)),o.replaceSelections(v),De=c}else o.replaceRange(v,c),ye&&l.after?De=s(c.line+1,It(o.getLine(c.line+1))):ye&&!l.after?De=s(c.line,It(o.getLine(c.line))):!ye&&l.after?(qe=o.indexFromPos(c),De=o.posFromIndex(qe+v.length-1)):(qe=o.indexFromPos(c),De=o.posFromIndex(qe+v.length));u.visualMode&&ar(o,!1),o.setCursor(De)}},undo:function(o,l){o.operation(function(){xt(o,x.commands.undo,l.repeat)(),o.setCursor(o.getCursor("anchor"))})},redo:function(o,l){xt(o,x.commands.redo,l.repeat)()},setRegister:function(o,l,u){u.inputState.registerName=l.selectedCharacter},setMark:function(o,l,u){Ve(o,u,l.selectedCharacter,o.getCursor())},replace:function(o,l,u){var v,w,c=l.selectedCharacter,d=o.getCursor(),F=o.listSelections();if(u.visualMode)d=o.getCursor("start"),w=o.getCursor("end");else{var E=o.getLine(d.line);(v=d.ch+l.repeat)>E.length&&(v=E.length),w=s(d.line,v)}if("\n"==c)u.visualMode||o.replaceRange("",d,w),(x.commands.newlineAndIndentContinueComment||x.commands.newlineAndIndent)(o);else{var G=o.getRange(d,w);if(G=G.replace(/[^\n]/g,c),u.visualBlock){var J=new Array(o.getOption("tabSize")+1).join(" ");G=(G=o.getSelection()).replace(/\t/g,J).replace(/[^\n]/g,c).split("\n"),o.replaceSelections(G)}else o.replaceRange(G,d,w);u.visualMode?(d=st(F[0].anchor,F[0].head)?F[0].anchor:F[0].head,o.setCursor(d),ar(o,!1)):o.setCursor(St(w,0,-1))}},incrementNumberToken:function(o,l){for(var v,w,F,E,u=o.getCursor(),c=o.getLine(u.line),d=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi;null!==(v=d.exec(c))&&!(u.ch<(F=(w=v.index)+v[0].length)););if(l.backtrack||!(F<=u.ch)){if(!v)return;var G=v[2]||v[4],J=v[3]||v[5],ge=l.increase?1:-1,we={"0b":2,0:8,"":10,"0x":16}[G.toLowerCase()];E=(parseInt(v[1]+J,we)+ge*l.repeat).toString(we);var xe=G?new Array(J.length-E.length+1+v[1].length).join("0"):"";E="-"===E.charAt(0)?"-"+G+xe+E.substr(1):G+xe+E;var Be=s(u.line,w),De=s(u.line,F);o.replaceRange(E,Be,De),o.setCursor(s(u.line,w+E.length-1))}},repeatLastEdit:function(o,l,u){if(u.lastEditInputState){var d=l.repeat;d&&l.repeatIsExplicit?u.lastEditInputState.repeatOverride=d:d=u.lastEditInputState.repeatOverride||d,Mr(o,u,d,!1)}},indent:function(o,l){o.indentLine(o.getCursor().line,l.indentRight)},exitInsertMode:kn};function Tt(o,l){var u=o.state.vim,c=u.insertMode||u.visualMode,d=Math.min(Math.max(o.firstLine(),l.line),o.lastLine()),v=wt(o,d)-1+!!c,w=Math.min(Math.max(0,l.ch),v);return s(d,w)}function ft(o){var l={};for(var u in o)o.hasOwnProperty(u)&&(l[u]=o[u]);return l}function St(o,l,u){return"object"==typeof l&&(u=l.ch,l=l.line),s(o.line+l,o.ch+u)}function yr(o,l){if("<character>"==l.slice(-11)){var u=l.length-11,c=o.slice(0,u),d=l.slice(0,u);return c==d&&o.length>u?"full":0==d.indexOf(c)&&"partial"}return o==l?"full":0==l.indexOf(o)&&"partial"}function xt(o,l,u){return function(){for(var c=0;c<u;c++)l(o)}}function $e(o){return s(o.line,o.ch)}function rt(o,l){return o.ch==l.ch&&o.line==l.line}function st(o,l){return o.line<l.line||o.line==l.line&&o.ch<l.ch}function Ft(o,l){return arguments.length>2&&(l=Ft.apply(void 0,Array.prototype.slice.call(arguments,1))),st(o,l)?o:l}function vt(o,l){return arguments.length>2&&(l=vt.apply(void 0,Array.prototype.slice.call(arguments,1))),st(o,l)?l:o}function Br(o,l,u){var c=st(o,l),d=st(l,u);return c&&d}function wt(o,l){return o.getLine(l).length}function xr(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function an(o,l,u){var c=wt(o,l),d=new Array(u-c+1).join(" ");o.setCursor(s(l,c)),o.replaceRange(d,o.getCursor())}function Rr(o,l){var u=[],c=o.listSelections(),d=$e(o.clipPos(l)),v=!rt(l,d),F=function(o,l,u){for(var c=0;c<o.length;c++){var d="head"!=u&&rt(o[c].anchor,l),v="anchor"!=u&&rt(o[c].head,l);if(d||v)return c}return-1}(c,o.getCursor("head")),E=rt(c[F].head,c[F].anchor),G=c.length-1,J=G-F>F?G:0,ge=c[J].anchor,we=Math.min(ge.line,d.line),ye=Math.max(ge.line,d.line),xe=ge.ch,Be=d.ch,De=c[J].head.ch-xe,qe=Be-xe;De>0&&qe<=0?(xe++,v||Be--):De<0&&qe>=0?(xe--,E||Be++):De<0&&-1==qe&&(xe--,Be++);for(var Xe=we;Xe<=ye;Xe++){var et={anchor:new s(Xe,xe),head:new s(Xe,Be)};u.push(et)}return o.setSelections(u),l.ch=Be,ge.ch=xe,ge}function Zr(o,l,u){for(var c=[],d=0;d<u;d++){var v=St(l,d,0);c.push({anchor:v,head:v})}o.setSelections(c,0)}function Xr(o,l){var u=l.sel.anchor,c=l.sel.head;l.lastPastedText&&(c=o.posFromIndex(o.indexFromPos(u)+l.lastPastedText.length),l.lastPastedText=null),l.lastSelection={anchorMark:o.setBookmark(u),headMark:o.setBookmark(c),anchor:$e(u),head:$e(c),visualMode:l.visualMode,visualLine:l.visualLine,visualBlock:l.visualBlock}}function Qt(o,l,u){var c=o.state.vim,d=Gr(o,l=l||c.sel,u=u||c.visualLine?"line":c.visualBlock?"block":"char");o.setSelections(d.ranges,d.primary),ai(o)}function Gr(o,l,u,c){var d=$e(l.head),v=$e(l.anchor);if("char"==u){var w=c||st(l.head,l.anchor)?0:1,F=st(l.head,l.anchor)?1:0;return d=St(l.head,0,w),{ranges:[{anchor:v=St(l.anchor,0,F),head:d}],primary:0}}if("line"==u){if(st(l.head,l.anchor))d.ch=0,v.ch=wt(o,v.line);else{v.ch=0;var E=o.lastLine();d.line>E&&(d.line=E),d.ch=wt(o,d.line)}return{ranges:[{anchor:v,head:d}],primary:0}}if("block"==u){for(var G=Math.min(v.line,d.line),J=Math.min(v.ch,d.ch),ge=Math.max(v.line,d.line),we=Math.max(v.ch,d.ch)+1,ye=ge-G+1,xe=d.line==G?0:ye-1,Be=[],De=0;De<ye;De++)Be.push({anchor:s(G+De,J),head:s(G+De,we)});return{ranges:Be,primary:xe}}}function ar(o,l){var u=o.state.vim;!1!==l&&o.setCursor(Tt(o,u.sel.head)),Xr(o,u),u.visualMode=!1,u.visualLine=!1,u.visualBlock=!1,u.insertMode||x.signal(o,"vim-mode-change",{mode:"normal"}),li(u)}function It(o){if(!o)return 0;var l=o.search(/\S/);return-1==l?o.length:l}function kr(o,l,u,c,d){for(var v=function(o){var l=o.getCursor("head");return 1==o.getSelection().length&&(l=Ft(l,o.getCursor("anchor"))),l}(o),w=o.getLine(v.line),F=v.ch,E=d?T[0]:R[0];!E(w.charAt(F));)if(++F>=w.length)return null;c?E=R[0]:(E=T[0])(w.charAt(F))||(E=T[1]);for(var G=F,J=F;E(w.charAt(G))&&G<w.length;)G++;for(;E(w.charAt(J))&&J>=0;)J--;if(J++,l){for(var ge=G;/\s/.test(w.charAt(G))&&G<w.length;)G++;if(ge==G){for(var we=J;/\s/.test(w.charAt(J-1))&&J>0;)J--;J||(J=we)}}return{start:s(v.line,J),end:s(v.line,G)}}function dr(o,l,u){rt(l,u)||ve.jumpList.add(o,l,u)}function ce(o,l){ve.lastCharacterSearch.increment=o,ve.lastCharacterSearch.forward=l.forward,ve.lastCharacterSearch.selectedCharacter=l.selectedCharacter}var Je={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},W={bracket:{isComplete:function(o){if(o.nextCh===o.symb){if(o.depth++,o.depth>=1)return!0}else o.nextCh===o.reverseSymb&&o.depth--;return!1}},section:{init:function(o){o.curMoveThrough=!0,o.symb=(o.forward?"]":"[")===o.symb?"{":"}"},isComplete:function(o){return 0===o.index&&o.nextCh===o.symb}},comment:{isComplete:function(o){var l="*"===o.lastCh&&"/"===o.nextCh;return o.lastCh=o.nextCh,l}},method:{init:function(o){o.symb="m"===o.symb?"{":"}",o.reverseSymb="{"===o.symb?"}":"{"},isComplete:function(o){return o.nextCh===o.symb}},preprocess:{init:function(o){o.index=0},isComplete:function(o){if("#"===o.nextCh){var l=o.lineText.match(/^#(\w+)/)[1];if("endif"===l){if(o.forward&&0===o.depth)return!0;o.depth++}else if("if"===l){if(!o.forward&&0===o.depth)return!0;o.depth--}if("else"===l&&0===o.depth)return!0}return!1}}};function Ce(o,l,u,c,d){var v=l.line,w=l.ch,F=o.getLine(v),E=u?1:-1,G=c?R:T;if(d&&""==F){if(F=o.getLine(v+=E),!y(o,v))return null;w=u?0:F.length}for(;;){if(d&&""==F)return{from:0,to:0,line:v};for(var J=E>0?F.length:-1,ge=J,we=J;w!=J;){for(var ye=!1,xe=0;xe<G.length&&!ye;++xe)if(G[xe](F.charAt(w))){for(ge=w;w!=J&&G[xe](F.charAt(w));)w+=E;if(ye=ge!=(we=w),ge==l.ch&&v==l.line&&we==ge+E)continue;return{from:Math.min(ge,we+1),to:Math.max(ge,we),line:v}}ye||(w+=E)}if(!y(o,v+=E))return null;F=o.getLine(v),w=E>0?0:F.length}}function Ae(o,l,u,c,d){var w=s(l.line+u.repeat-1,1/0),F=o.clipPos(w);return F.ch--,d||(c.lastHPos=1/0,c.lastHSPos=o.charCoords(F,"div").left),w}function Nt(o,l,u,c){for(var w,d=o.getCursor(),v=d.ch,F=0;F<l;F++){if(-1==(w=Ze(v,o.getLine(d.line),c,u,!0)))return null;v=w}return s(o.getCursor().line,w)}function Ve(o,l,u,c){!D(u,$)||(l.marks[u]&&l.marks[u].clear(),l.marks[u]=o.setBookmark(c))}function Ze(o,l,u,c,d){var v;return c?-1!=(v=l.indexOf(u,o+1))&&!d&&(v-=1):-1!=(v=l.lastIndexOf(u,o-1))&&!d&&(v+=1),v}function kt(o,l,u,c,d){var G,v=l.line,w=o.firstLine(),F=o.lastLine(),J=v;function ge(De){return!o.getLine(De)}function we(De,qe,Xe){return Xe?ge(De)!=ge(De+qe):!ge(De)&&ge(De+qe)}if(c){for(;w<=J&&J<=F&&u>0;)we(J,c)&&u--,J+=c;return new s(J,0)}var ye=o.state.vim;if(ye.visualLine&&we(v,1,!0)){var xe=ye.sel.anchor;we(xe.line,-1,!0)&&(!d||xe.line!=v)&&(v+=1)}var Be=ge(v);for(J=v;J<=F&&u;J++)we(J,1,!0)&&(!d||ge(J)!=Be)&&u--;for(G=new s(J,0),J>F&&!Be?Be=!0:d=!1,J=v;J>w&&(d&&ge(J)!=Be&&J!=v||!we(J,-1,!0));J--);return{start:new s(J,0),end:G}}function We(){}function sr(o){var l=o.state.vim;return l.searchState_||(l.searchState_=new We)}function he(o,l){var u=Se(o,l)||[];if(!u.length)return[];var c=[];if(0===u[0]){for(var d=0;d<u.length;d++)"number"==typeof u[d]&&c.push(o.substring(u[d]+1,u[d+1]));return c}}function Se(o,l){l||(l="/");for(var u=!1,c=[],d=0;d<o.length;d++){var v=o.charAt(d);!u&&v==l&&c.push(d),u=!u&&"\\"==v}return c}Te("pcre",!0,"boolean"),We.prototype={getQuery:function(){return ve.query},setQuery:function(o){ve.query=o},getOverlay:function(){return this.searchOverlay},setOverlay:function(o){this.searchOverlay=o},isReversed:function(){return ve.isReversed},setReversed:function(o){ve.isReversed=o},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(o){this.annotate=o}};var at={"\\n":"\n","\\r":"\r","\\t":"\t"};var Bt={"\\/":"/","\\\\":"\\","\\n":"\n","\\r":"\r","\\t":"\t","\\&":"&"};function On(o,l,u){if(ve.registerController.getRegister("/").setText(o),o instanceof RegExp)return o;var v,w,d=function(o){return Se(o,"/")}(o);return d.length?(v=o.substring(0,d[0]),w=-1!=o.substring(d[0]).indexOf("i")):v=o,v?(K("pcre")||(v=function(o){for(var c=!1,d=[],v=-1;v<o.length;v++){var w=o.charAt(v)||"",F=o.charAt(v+1)||"",E=F&&-1!="|(){".indexOf(F);c?(("\\"!==w||!E)&&d.push(w),c=!1):"\\"===w?(c=!0,F&&-1!="}".indexOf(F)&&(E=!0),(!E||"\\"===F)&&d.push(w)):(d.push(w),E&&"\\"!==F&&d.push("\\"))}return d.join("")}(v)),u&&(l=/^[^A-Z]*$/.test(v)),new RegExp(v,l||w?"i":void 0)):null}function Hr(o){"string"==typeof o&&(o=document.createElement(o));for(var l,u=1;u<arguments.length;u++)if(l=arguments[u])if("object"!=typeof l&&(l=document.createTextNode(l)),l.nodeType)o.appendChild(l);else for(var c in l)!Object.prototype.hasOwnProperty.call(l,c)||("$"===c[0]?o.style[c.slice(1)]=l[c]:o.setAttribute(c,l[c]));return o}function ht(o,l){var u=Hr("pre",{$color:"red"},l);o.openNotification?o.openNotification(u,{bottom:!0,duration:5e3}):alert(u.innerText)}function yn(o,l){var u=(l.prefix||"")+" "+(l.desc||""),c=function(o,l){return Hr(document.createDocumentFragment(),Hr("span",{$fontFamily:"monospace",$whiteSpace:"pre"},o,Hr("input",{type:"text",autocorrect:"off",autocapitalize:"off",spellcheck:"false"})),l&&Hr("span",{$color:"#888"},l))}(l.prefix,l.desc);o.openDialog?o.openDialog(c,l.onClose,{onKeyDown:l.onKeyDown,onKeyUp:l.onKeyUp,bottom:!0,selectValueOnOpen:!1,value:l.value}):l.onClose(prompt(u,""))}function ln(o,l,u,c){if(l){var d=sr(o),v=On(l,!!u,!!c);if(v)return ii(o,v),function(o,l){if(o instanceof RegExp&&l instanceof RegExp){for(var u=["global","multiline","ignoreCase","source"],c=0;c<u.length;c++){var d=u[c];if(o[d]!==l[d])return!1}return!0}return!1}(v,d.getQuery())||d.setQuery(v),v}}var ni=0;function ii(o,l){clearTimeout(ni),ni=setTimeout(function(){var u=sr(o),c=u.getOverlay();(!c||l!=c.query)&&(c&&o.removeOverlay(c),c=function(o){if("^"==o.source.charAt(0))var l=!0;return{token:function(u){if(!l||u.sol()){var c=u.match(o,!1);if(c)return 0==c[0].length?(u.next(),"searching"):u.sol()||(u.backUp(1),o.exec(u.next()+c[0]))?(u.match(o),"searching"):(u.next(),null);for(;!u.eol()&&(u.next(),!u.match(o,!1)););}else u.skipToEnd()},query:o}}(l),o.addOverlay(c),o.showMatchesOnScrollbar&&(u.getScrollbarAnnotate()&&u.getScrollbarAnnotate().clear(),u.setScrollbarAnnotate(o.showMatchesOnScrollbar(l))),u.setOverlay(c))},50)}function Ni(o,l,u,c){return void 0===c&&(c=1),o.operation(function(){for(var d=o.getCursor(),v=o.getSearchCursor(u,d),w=0;w<c;w++){var F=v.find(l);if(0==w&&F&&rt(v.from(),d)&&(F=v.find(l)),!F&&!(v=o.getSearchCursor(u,l?s(o.lastLine()):s(o.firstLine(),0))).find(l))return}return v.from()})}function In(o){var l=sr(o);o.removeOverlay(sr(o).getOverlay()),l.setOverlay(null),l.getScrollbarAnnotate()&&(l.getScrollbarAnnotate().clear(),l.setScrollbarAnnotate(null))}function _r(o,l,u){return"number"!=typeof o&&(o=o.line),l instanceof Array?D(o,l):"number"==typeof u?o>=l&&o<=u:o==l}function oi(o){var l=o.getScrollInfo(),d=o.coordsChar({left:0,top:6+l.top},"local"),w=o.coordsChar({left:0,top:l.clientHeight-10+l.top},"local");return{top:d.line,bottom:w.line}}function Bi(o,l,u){if("'"==u||"`"==u)return ve.jumpList.find(o,-1)||s(0,0);if("."==u)return xn(o);var c=l.marks[u];return c&&c.find()}function xn(o){for(var l=o.doc.history.done,u=l.length;u--;)if(l[u].changes)return $e(l[u].changes[0].to)}var sn=function(){this.buildCommandMap_()};sn.prototype={processCommand:function(o,l,u){var c=this;o.operation(function(){o.curOp.isVimOp=!0,c._processCommand(o,l,u)})},_processCommand:function(o,l,u){var c=o.state.vim,d=ve.registerController.getRegister(":"),v=d.toString();c.visualMode&&ar(o);var w=new x.StringStream(l);d.setText(l);var E,G,F=u||{};F.input=l;try{this.parseInput_(o,w,F)}catch(ge){throw ht(o,ge.toString()),ge}if(F.commandName){if(E=this.matchCommand_(F.commandName)){if(G=E.name,E.excludeFromCommandHistory&&d.setText(v),this.parseCommandArgs_(w,F,E),"exToKey"==E.type){for(var J=0;J<E.toKeys.length;J++)x.Vim.handleKey(o,E.toKeys[J],"mapping");return}if("exToEx"==E.type)return void this.processCommand(o,E.toInput)}}else void 0!==F.line&&(G="move");if(G)try{Ri[G](o,F),(!E||!E.possiblyAsync)&&F.callback&&F.callback()}catch(ge){throw ht(o,ge.toString()),ge}else ht(o,'Not an editor command ":'+l+'"')},parseInput_:function(o,l,u){l.eatWhile(":"),l.eat("%")?(u.line=o.firstLine(),u.lineEnd=o.lastLine()):(u.line=this.parseLineSpec_(o,l),void 0!==u.line&&l.eat(",")&&(u.lineEnd=this.parseLineSpec_(o,l)));var c=l.match(/^(\w+|!!|@@|[!#&*<=>@~])/);return u.commandName=c?c[1]:l.match(/.*/)[0],u},parseLineSpec_:function(o,l){var u=l.match(/^(\d+)/);if(u)return parseInt(u[1],10)-1;switch(l.next()){case".":return this.parseLineSpecOffset_(l,o.getCursor().line);case"$":return this.parseLineSpecOffset_(l,o.lastLine());case"'":var c=l.next(),d=Bi(o,o.state.vim,c);if(!d)throw new Error("Mark not set");return this.parseLineSpecOffset_(l,d.line);case"-":case"+":return l.backUp(1),this.parseLineSpecOffset_(l,o.getCursor().line);default:return void l.backUp(1)}},parseLineSpecOffset_:function(o,l){var u=o.match(/^([+-])?(\d+)/);if(u){var c=parseInt(u[2],10);"-"==u[1]?l-=c:l+=c}return l},parseCommandArgs_:function(o,l,u){if(!o.eol()){l.argString=o.match(/.*/)[0];var c=u.argDelimiter||/\s+/,d=xr(l.argString).split(c);d.length&&d[0]&&(l.args=d)}},matchCommand_:function(o){for(var l=o.length;l>0;l--){var u=o.substring(0,l);if(this.commandMap_[u]){var c=this.commandMap_[u];if(0===c.name.indexOf(o))return c}}return null},buildCommandMap_:function(){this.commandMap_={};for(var o=0;o<V.length;o++){var l=V[o];this.commandMap_[l.shortName||l.name]=l}},map:function(o,l,u){if(":"!=o&&":"==o.charAt(0)){if(u)throw Error("Mode not supported for ex mappings");var c=o.substring(1);this.commandMap_[c]=":"!=l&&":"==l.charAt(0)?{name:c,type:"exToEx",toInput:l.substring(1),user:!0}:{name:c,type:"exToKey",toKeys:l,user:!0}}else if(":"!=l&&":"==l.charAt(0)){var d={keys:o,type:"keyToEx",exArgs:{input:l.substring(1)}};u&&(d.context=u),U.unshift(d)}else d={keys:o,type:"keyToKey",toKeys:l},u&&(d.context=u),U.unshift(d)},unmap:function(o,l){if(":"!=o&&":"==o.charAt(0)){if(l)throw Error("Mode not supported for ex mappings");var u=o.substring(1);if(this.commandMap_[u]&&this.commandMap_[u].user)return void delete this.commandMap_[u]}else for(var c=o,d=0;d<U.length;d++)if(c==U[d].keys&&U[d].context===l)return void U.splice(d,1);throw Error("No such mapping.")}};var Ri={colorscheme:function(o,l){!l.args||l.args.length<1?ht(o,o.getOption("theme")):o.setOption("theme",l.args[0])},map:function(o,l,u){var c=l.args;!c||c.length<2?o&&ht(o,"Invalid mapping: "+l.input):Ir.map(c[0],c[1],u)},imap:function(o,l){this.map(o,l,"insert")},nmap:function(o,l){this.map(o,l,"normal")},vmap:function(o,l){this.map(o,l,"visual")},unmap:function(o,l,u){var c=l.args;!c||c.length<1?o&&ht(o,"No such mapping: "+l.input):Ir.unmap(c[0],u)},move:function(o,l){Dt.processCommand(o,o.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:l.line+1})},set:function(o,l){var u=l.args,c=l.setCfg||{};if(!u||u.length<1)o&&ht(o,"Invalid mapping: "+l.input);else{var d=u[0].split("="),v=d[0],w=d[1],F=!1;if("?"==v.charAt(v.length-1)){if(w)throw Error("Trailing characters: "+l.argString);v=v.substring(0,v.length-1),F=!0}void 0===w&&"no"==v.substring(0,2)&&(v=v.substring(2),w=!1);var E=b[v]&&"boolean"==b[v].type;if(E&&null==w&&(w=!0),!E&&void 0===w||F){var G=K(v,o,c);G instanceof Error?ht(o,G.message):ht(o,!0===G||!1===G?" "+(G?"":"no")+v:"  "+v+"="+G)}else{var J=B(v,w,o,c);J instanceof Error&&ht(o,J.message)}}},setlocal:function(o,l){l.setCfg={scope:"local"},this.set(o,l)},setglobal:function(o,l){l.setCfg={scope:"global"},this.set(o,l)},registers:function(o,l){var u=l.args,c=ve.registerController.registers,d="----------Registers----------\n\n";if(u){u=u.join("");for(var F=0;F<u.length;F++)v=u.charAt(F),ve.registerController.isValidRegister(v)&&(d+='"'+v+"    "+(c[v]||new yt).toString()+"\n")}else for(var v in c){var w=c[v].toString();w.length&&(d+='"'+v+"    "+w+"\n")}ht(o,d)},sort:function(o,l){var u,c,d,v,w;var E=function(){if(l.argString){var gt=new x.StringStream(l.argString);if(gt.eat("!")&&(u=!0),gt.eol())return;if(!gt.eatSpace())return"Invalid arguments";var lt=gt.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!lt&&!gt.eol())return"Invalid arguments";if(lt[1]){c=-1!=lt[1].indexOf("i"),d=-1!=lt[1].indexOf("u");var qt=-1!=lt[1].indexOf("d")||-1!=lt[1].indexOf("n")&&1,Gt=-1!=lt[1].indexOf("x")&&1,ut=-1!=lt[1].indexOf("o")&&1;if(qt+Gt+ut>1)return"Invalid arguments";v=(qt?"decimal":Gt&&"hex")||ut&&"octal"}lt[2]&&(w=new RegExp(lt[2].substr(1,lt[2].length-2),c?"i":""))}}();if(E)ht(o,E+": "+l.argString);else{var G=l.line||o.firstLine(),J=l.lineEnd||l.line||o.lastLine();if(G!=J){var ge=s(G,0),we=s(J,wt(o,J)),ye=o.getRange(ge,we).split("\n"),xe=w||("decimal"==v?/(-?)([\d]+)/:"hex"==v?/(-?)(?:0x)?([0-9a-f]+)/i:"octal"==v?/([0-7]+)/:null),Be="decimal"==v?10:"hex"==v?16:"octal"==v?8:null,De=[],qe=[];if(v||w)for(var Xe=0;Xe<ye.length;Xe++){var et=w?ye[Xe].match(w):null;et&&""!=et[0]?De.push(et):!w&&xe.exec(ye[Xe])?De.push(ye[Xe]):qe.push(ye[Xe])}else qe=ye;if(De.sort(w?function(gt,lt){var qt;return u&&(qt=gt,gt=lt,lt=qt),c&&(gt[0]=gt[0].toLowerCase(),lt[0]=lt[0].toLowerCase()),gt[0]<lt[0]?-1:1}:bt),w)for(Xe=0;Xe<De.length;Xe++)De[Xe]=De[Xe].input;else v||qe.sort(bt);if(ye=u?De.concat(qe):qe.concat(De),d){var _t,Lt=ye;for(ye=[],Xe=0;Xe<Lt.length;Xe++)Lt[Xe]!=_t&&ye.push(Lt[Xe]),_t=Lt[Xe]}o.replaceRange(ye.join("\n"),ge,we)}}function bt(gt,lt){var qt;u&&(qt=gt,gt=lt,lt=qt),c&&(gt=gt.toLowerCase(),lt=lt.toLowerCase());var Gt=v&&xe.exec(gt),ut=v&&xe.exec(lt);return Gt?(Gt=parseInt((Gt[1]+Gt[2]).toLowerCase(),Be))-(ut=parseInt((ut[1]+ut[2]).toLowerCase(),Be)):gt<lt?-1:1}},vglobal:function(o,l){this.global(o,l)},global:function(o,l){var u=l.argString;if(u){var E,c="v"===l.commandName[0],d=void 0!==l.line?l.line:o.firstLine(),v=l.lineEnd||l.line||o.lastLine(),w=function(o){return he(o,"/")}(u),F=u;if(w.length&&(F=w[0],E=w.slice(1,w.length).join("/")),F)try{ln(o,F,!0,!0)}catch(De){return void ht(o,"Invalid regex: "+F)}for(var G=sr(o).getQuery(),J=[],ge=d;ge<=v;ge++){var we=o.getLineHandle(ge);G.test(we.text)!==c&&J.push(E?we:we.text)}if(E){var xe=0,Be=function(){if(xe<J.length){var De=J[xe++],qe=o.getLineNumber(De);if(null==qe)return void Be();Ir.processCommand(o,qe+1+E,{callback:Be})}};Be()}else ht(o,J.join("\n"))}else ht(o,"Regular Expression missing from global")},substitute:function(o,l){if(!o.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var d,w,F,E,u=l.argString,c=u?he(u,u[0]):[],v="",G=!1,J=!1;if(c.length)d=c[0],K("pcre")&&""!==d&&(d=new RegExp(d).source),v=c[1],/(^|[^\\])(\\\\)*\$$/.test(d)&&(d=d.slice(0,-1)+"\\n",v=(v||"")+"\n"),void 0!==v&&(v=K("pcre")?function(o){for(var l=new x.StringStream(o),u=[];!l.eol();){for(;l.peek()&&"\\"!=l.peek();)u.push(l.next());var c=!1;for(var d in Bt)if(l.match(d,!0)){c=!0,u.push(Bt[d]);break}c||u.push(l.next())}return u.join("")}(v.replace(/([^\\])&/g,"$1$$&")):function(o){for(var l=!1,u=[],c=-1;c<o.length;c++){var d=o.charAt(c)||"",v=o.charAt(c+1)||"";at[d+v]?(u.push(at[d+v]),c++):l?(u.push(d),l=!1):"\\"===d?(l=!0,Ee(v)||"$"===v?u.push("$"):"/"!==v&&"\\"!==v&&u.push("\\")):("$"===d&&u.push("$"),u.push(d),"/"===v&&u.push("\\"))}return u.join("")}(v),ve.lastSubstituteReplacePart=v),w=c[2]?c[2].split(" "):[];else if(u&&u.length)return void ht(o,"Substitutions should be of the form :s/pattern/replace/");if(w&&(F=w[0],E=parseInt(w[1]),F&&(-1!=F.indexOf("c")&&(G=!0),-1!=F.indexOf("g")&&(J=!0),d=K("pcre")?d+"/"+F:d.replace(/\//g,"\\/")+"/"+F)),d)try{ln(o,d,!0,!0)}catch(qe){return void ht(o,"Invalid regex: "+d)}if(void 0!==(v=v||ve.lastSubstituteReplacePart)){var we=sr(o).getQuery(),ye=void 0!==l.line?l.line:o.getCursor().line,xe=l.lineEnd||ye;ye==o.firstLine()&&xe==o.lastLine()&&(xe=1/0),E&&(xe=(ye=xe)+E-1);var Be=Tt(o,s(ye,0)),De=o.getSearchCursor(we,Be);!function(o,l,u,c,d,v,w,F,E){o.state.vim.exMode=!0;var J,ge,we,G=!1;function ye(){o.operation(function(){for(;!G;)xe(),Be();De()})}function xe(){var et=o.getRange(v.from(),v.to()).replace(w,F),bt=v.to().line;v.replace(et),ge=v.to().line,d+=ge-bt,we=ge<bt}function Be(){for(;v.findNext()&&_r(v.from(),c,d);)if(u||v.from().line!=ge||we)return o.scrollIntoView(v.from(),30),o.setSelection(v.from(),v.to()),J=v.from(),void(G=!1);G=!0}function De(Xe){if(Xe&&Xe(),o.focus(),J){o.setCursor(J);var et=o.state.vim;et.exMode=!1,et.lastHPos=et.lastHSPos=J.ch}E&&E()}function qe(Xe,et,bt){switch(x.e_stop(Xe),x.keyName(Xe)){case"Y":xe(),Be();break;case"N":Be();break;case"A":var Lt=E;E=void 0,o.operation(ye),E=Lt;break;case"L":xe();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":De(bt)}return G&&De(bt),!0}if(Be(),!G)return l?void yn(o,{prefix:Hr("span","replace with ",Hr("strong",F)," (y/n/a/q/l)"),onKeyDown:qe}):(ye(),void(E&&E()));ht(o,"No matches for "+w.source)}(o,G,J,ye,xe,De,we,v,l.callback)}else ht(o,"No previous substitute regular expression")},redo:x.commands.redo,undo:x.commands.undo,write:function(o){x.commands.save?x.commands.save(o):o.save&&o.save()},nohlsearch:function(o){In(o)},yank:function(o){var l=$e(o.getCursor()),c=o.getLine(l.line);ve.registerController.pushText("0","yank",c,!0,!0)},delmarks:function(o,l){if(l.argString&&xr(l.argString))for(var u=o.state.vim,c=new x.StringStream(xr(l.argString));!c.eol();){c.eatSpace();var d=c.pos;if(!c.match(/[a-zA-Z]/,!1))return void ht(o,"Invalid argument: "+l.argString.substring(d));var v=c.next();if(c.match("-",!0)){if(!c.match(/[a-zA-Z]/,!1))return void ht(o,"Invalid argument: "+l.argString.substring(d));var w=v,F=c.next();if(!(le(w)&&le(F)||He(w)&&He(F)))return void ht(o,"Invalid argument: "+w+"-");var E=w.charCodeAt(0),G=F.charCodeAt(0);if(E>=G)return void ht(o,"Invalid argument: "+l.argString.substring(d));for(var J=0;J<=G-E;J++){var ge=String.fromCharCode(E+J);delete u.marks[ge]}}else delete u.marks[v]}else ht(o,"Argument required")}},Ir=new sn;function kn(o){var l=o.state.vim,u=ve.macroModeState,c=ve.registerController.getRegister("."),d=u.isPlaying,v=u.lastInsertModeChanges;d||(o.off("change",bn),x.off(o.getInputField(),"keydown",ui)),!d&&l.insertModeRepeat>1&&(Mr(o,l,l.insertModeRepeat-1,!0),l.lastEditInputState.repeatOverride=l.insertModeRepeat),delete l.insertModeRepeat,l.insertMode=!1,o.setCursor(o.getCursor().line,o.getCursor().ch-1),o.setOption("keyMap","vim"),o.setOption("disableInput",!0),o.toggleOverwrite(!1),c.setText(v.changes.join("")),x.signal(o,"vim-mode-change",{mode:"normal"}),u.isRecording&&function(o){if(!o.isPlaying){var u=ve.registerController.getRegister(o.latestRegister);u&&u.pushInsertModeChanges&&u.pushInsertModeChanges(o.lastInsertModeChanges)}}(u)}function Nn(o){U.unshift(o)}function ho(o,l,u,c){var d=ve.registerController.getRegister(c);if(":"==c)return d.keyBuffer[0]&&Ir.processCommand(o,d.keyBuffer[0]),void(u.isPlaying=!1);var v=d.keyBuffer,w=0;u.isPlaying=!0,u.replaySearchQueries=d.searchQueries.slice(0);for(var F=0;F<v.length;F++)for(var G,J,E=v[F];E;)if(G=/<\w+-.+?>|<\w+>|./.exec(E),E=E.substring(G.index+(J=G[0]).length),x.Vim.handleKey(o,J,"macro"),l.insertMode){var ge=d.insertModeChanges[w++].changes;ve.macroModeState.lastInsertModeChanges.changes=ge,Wi(o,ge,1),kn(o)}u.isPlaying=!1}function bn(o,l){var u=ve.macroModeState,c=u.lastInsertModeChanges;if(!u.isPlaying)for(;l;){if(c.expectCursorActivityForChange=!0,c.ignoreCount>1)c.ignoreCount--;else if("+input"==l.origin||"paste"==l.origin||void 0===l.origin){var d=o.listSelections().length;d>1&&(c.ignoreCount=d);var v=l.text.join("\n");c.maybeReset&&(c.changes=[],c.maybeReset=!1),v&&(o.state.overwrite&&!/\n/.test(v)?c.changes.push([v]):c.changes.push(v))}l=l.next}}function Rn(o){var l=o.state.vim;if(l.insertMode){var u=ve.macroModeState;if(u.isPlaying)return;var c=u.lastInsertModeChanges;c.expectCursorActivityForChange?c.expectCursorActivityForChange=!1:c.maybeReset=!0}else o.curOp.isVimOp||function(o,l){var u=o.getCursor("anchor"),c=o.getCursor("head");if(l.visualMode&&!o.somethingSelected()?ar(o,!1):!l.visualMode&&!l.insertMode&&o.somethingSelected()&&(l.visualMode=!0,l.visualLine=!1,x.signal(o,"vim-mode-change",{mode:"visual"})),l.visualMode){var d=st(c,u)?0:-1,v=st(c,u)?-1:0;c=St(c,0,d),u=St(u,0,v),l.sel={anchor:u,head:c},Ve(o,l,"<",Ft(c,u)),Ve(o,l,">",vt(c,u))}else l.insertMode||(l.lastHPos=o.getCursor().ch)}(o,l);l.visualMode&&ai(o)}function ai(o){var l="cm-animate-fat-cursor",u=o.state.vim,c=Tt(o,$e(u.sel.head)),d=St(c,0,1);if(li(u),c.ch==o.getLine(c.line).length){var v=Hr("span",{class:l},"\xa0");u.fakeCursorBookmark=o.setBookmark(c,{widget:v})}else u.fakeCursor=o.markText(c,d,{className:l})}function li(o){o.fakeCursor&&(o.fakeCursor.clear(),o.fakeCursor=null),o.fakeCursorBookmark&&(o.fakeCursorBookmark.clear(),o.fakeCursorBookmark=null)}function si(o){this.keyName=o}function ui(o){var u=ve.macroModeState.lastInsertModeChanges,c=x.keyName(o);c&&(-1!=c.indexOf("Delete")||-1!=c.indexOf("Backspace"))&&x.lookupKey(c,"vim-insert",function(){return u.maybeReset&&(u.changes=[],u.maybeReset=!1),u.changes.push(new si(c)),!0})}function Mr(o,l,u,c){var d=ve.macroModeState;d.isPlaying=!0;var v=!!l.lastEditActionCommand,w=l.inputState;function F(){v?Dt.processAction(o,l,l.lastEditActionCommand):Dt.evalInput(o,l)}function E(J){d.lastInsertModeChanges.changes.length>0&&Wi(o,d.lastInsertModeChanges.changes,J=l.lastEditActionCommand?J:1)}if(l.inputState=l.lastEditInputState,v&&l.lastEditActionCommand.interlaceInsertRepeat)for(var G=0;G<u;G++)F(),E(1);else c||F(),E(u);l.inputState=w,l.insertMode&&!c&&kn(o),d.isPlaying=!1}function Wi(o,l,u){function c(we){return"string"==typeof we?x.commands[we](o):we(o),!0}var d=o.getCursor("head"),v=ve.macroModeState.lastInsertModeChanges.visualBlock;v&&(Zr(o,d,v+1),u=o.listSelections().length,o.setCursor(d));for(var w=0;w<u;w++){v&&o.setCursor(St(d,w,0));for(var F=0;F<l.length;F++){var E=l[F];if(E instanceof si)x.lookupKey(E.keyName,"vim-insert",c);else if("string"==typeof E){var G=o.getCursor();o.replaceRange(E,G,G)}else{var J=o.getCursor(),ge=St(J,0,E[0].length);o.replaceRange(E[0],J,ge)}}}v&&o.setCursor(St(d,0,1))}return x.keyMap.vim={attach:Q,detach:X,call:ee},Te("insertModeEscKeysTimeout",200,"number"),x.keyMap["vim-insert"]={fallthrough:["default"],attach:Q,detach:X,call:ee},x.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:Q,detach:X,call:ee},Qe(),hr}()}(de(9475),de(7660),de(6584),de(2946))},9475:function(At){At.exports=function(){"use strict";var nt=navigator.userAgent,de=navigator.platform,x=/gecko\/\d/i.test(nt),U=/MSIE \d/.test(nt),H=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nt),V=/Edge\/(\d+)/.exec(nt),s=U||H||V,M=s&&(U?document.documentMode||6:+(V||H)[1]),N=!V&&/WebKit\//.test(nt),oe=N&&/Qt\/\d+\.\d+/.test(nt),X=!V&&/Chrome\//.test(nt),Q=/Opera\//.test(nt),z=/Apple Computer/.test(navigator.vendor),ae=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(nt),se=/PhantomJS/.test(nt),Fe=z&&(/Mobile\/\w+/.test(nt)||navigator.maxTouchPoints>2),ee=/Android/.test(nt),re=Fe||ee||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(nt),L=Fe||/Mac/.test(de),_=/\bCrOS\b/.test(nt),g=/win/i.test(de),S=Q&&nt.match(/Version\/(\d*\.\d*)/);S&&(S=Number(S[1])),S&&S>=15&&(Q=!1,N=!0);var T=L&&(oe||Q&&(null==S||S<12.11)),R=x||s&&M>=9;function C(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var pe,P=function(e,t){var n=e.className,r=C(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function te(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function Z(e,t){return te(e).appendChild(t)}function $(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var a=0;a<t.length;++a)i.appendChild(t[a]);return i}function j(e,t,n,r){var i=$(e,t,n,r);return i.setAttribute("role","presentation"),i}function y(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function le(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function fe(e,t){var n=e.className;C(t).test(n)||(e.className+=(n?" ":"")+t)}function Ee(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!C(n[r]).test(t)&&(t+=" "+n[r]);return t}pe=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(i){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var He=function(e){e.select()};function ze(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function je(e,t,n){for(var r in t||(t={}),e)e.hasOwnProperty(r)&&(!1!==n||!t.hasOwnProperty(r))&&(t[r]=e[r]);return t}function D(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var a=r||0,f=i||0;;){var h=e.indexOf("\t",a);if(h<0||h>=t)return f+(t-a);f+=h-a,f+=n-f%n,a=h+1}}Fe?He=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:s&&(He=function(e){try{e.select()}catch(t){}});var b=function(){this.id=null,this.f=null,this.time=0,this.handler=ze(this.onTimeout,this)};function Te(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}b.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},b.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var K={toString:function(){return"CodeMirror.Pass"}},ne={scroll:!1},me={origin:"*mouse"},Oe={origin:"+move"};function tt(e,t,n){for(var r=0,i=0;;){var a=e.indexOf("\t",r);-1==a&&(a=e.length);var f=a-r;if(a==e.length||i+f>=t)return r+Math.min(f,t-i);if(i+=a-r,r=a+1,(i+=n-i%n)>=t)return r}}var ve=[""];function Qe(e){for(;ve.length<=e;)ve.push(Ke(ve)+" ");return ve[e]}function Ke(e){return e[e.length-1]}function hr(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function pt(){}function yt(e,t){var n;return Object.create?n=Object.create(e):(pt.prototype=e,n=new pt),t&&je(t,n),n}var ir=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function gr(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||ir.test(e))}function tr(e,t){return t?!!(t.source.indexOf("\\w")>-1&&gr(e))||t.test(e):gr(e)}function Dt(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var Ht=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Nr(e){return e.charCodeAt(0)>=768&&Ht.test(e)}function Kr(e,t,n){for(;(n<0?t>0:t<e.length)&&Nr(e.charAt(t));)t+=n;return t}function Fr(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,a=r<0?Math.ceil(i):Math.floor(i);if(a==t)return e(a)?t:n;e(a)?n=a:t=a+r}}var Yt=null;function Or(e,t,n){var r;Yt=null;for(var i=0;i<e.length;++i){var a=e[i];if(a.from<t&&a.to>t)return i;a.to==t&&(a.from!=a.to&&"before"==n?r=i:Yt=i),a.from==t&&(a.from!=a.to&&"before"!=n?r=i:Yt=i)}return null!=r?r:Yt}var Tt=function(){function n(m){return m<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(m):1424<=m&&m<=1524?"R":1536<=m&&m<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(m-1536):1774<=m&&m<=2220?"r":8192<=m&&m<=8203?"w":8204==m?"b":"L"}var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,a=/[LRr]/,f=/[Lb1n]/,h=/[1n]/;function p(m,A,O){this.level=m,this.from=A,this.to=O}return function(m,A){var O="ltr"==A?"L":"R";if(0==m.length||"ltr"==A&&!r.test(m))return!1;for(var q=m.length,Y=[],ue=0;ue<q;++ue)Y.push(n(m.charCodeAt(ue)));for(var be=0,Le=O;be<q;++be){var Ie=Y[be];"m"==Ie?Y[be]=Le:Le=Ie}for(var Re=0,Ne=O;Re<q;++Re){var Pe=Y[Re];"1"==Pe&&"r"==Ne?Y[Re]="n":a.test(Pe)&&(Ne=Pe,"r"==Pe&&(Y[Re]="R"))}for(var Ye=1,Ge=Y[0];Ye<q-1;++Ye){var it=Y[Ye];"+"==it&&"1"==Ge&&"1"==Y[Ye+1]?Y[Ye]="1":","==it&&Ge==Y[Ye+1]&&("1"==Ge||"n"==Ge)&&(Y[Ye]=Ge),Ge=it}for(var Ct=0;Ct<q;++Ct){var $t=Y[Ct];if(","==$t)Y[Ct]="N";else if("%"==$t){var Ot=void 0;for(Ot=Ct+1;Ot<q&&"%"==Y[Ot];++Ot);for(var Ar=Ct&&"!"==Y[Ct-1]||Ot<q&&"1"==Y[Ot]?"1":"N",Sr=Ct;Sr<Ot;++Sr)Y[Sr]=Ar;Ct=Ot-1}}for(var Kt=0,wr=O;Kt<q;++Kt){var rr=Y[Kt];"L"==wr&&"1"==rr?Y[Kt]="L":a.test(rr)&&(wr=rr)}for(var jt=0;jt<q;++jt)if(i.test(Y[jt])){var Zt=void 0;for(Zt=jt+1;Zt<q&&i.test(Y[Zt]);++Zt);for(var Pt="L"==(jt?Y[jt-1]:O),$n=Pt==("L"==(Zt<q?Y[Zt]:O))?Pt?"L":"R":O,mn=jt;mn<Zt;++mn)Y[mn]=$n;jt=Zt-1}for(var Qr,cr=[],er=0;er<q;)if(f.test(Y[er])){var qo=er;for(++er;er<q&&f.test(Y[er]);++er);cr.push(new p(0,qo,er))}else{var on=er,Dn=cr.length,Fn="rtl"==A?1:0;for(++er;er<q&&"L"!=Y[er];++er);for(var vr=on;vr<er;)if(h.test(Y[vr])){on<vr&&(cr.splice(Dn,0,new p(1,on,vr)),Dn+=Fn);var ei=vr;for(++vr;vr<er&&h.test(Y[vr]);++vr);cr.splice(Dn,0,new p(2,ei,vr)),Dn+=Fn,on=vr}else++vr;on<er&&cr.splice(Dn,0,new p(1,on,er))}return"ltr"==A&&(1==cr[0].level&&(Qr=m.match(/^\s+/))&&(cr[0].from=Qr[0].length,cr.unshift(new p(0,0,Qr[0].length))),1==Ke(cr).level&&(Qr=m.match(/\s+$/))&&(Ke(cr).to-=Qr[0].length,cr.push(new p(0,q-Qr[0].length,q)))),"rtl"==A?cr.reverse():cr}}();function ft(e,t){var n=e.order;return null==n&&(n=e.order=Tt(e.text,t)),n}var St=[],Ue=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||St).concat(n)}};function yr(e,t){return e._handlers&&e._handlers[t]||St}function Ut(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var a=Te(i,n);a>-1&&(r[t]=i.slice(0,a).concat(i.slice(a+1)))}}}function xt(e,t){var n=yr(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function $e(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),xt(e,n||t.type,e,t),wt(t)||t.codemirrorIgnore}function rt(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==Te(n,t[r])&&n.push(t[r])}function st(e,t){return yr(e,t).length>0}function Ft(e){e.prototype.on=function(t,n){Ue(this,t,n)},e.prototype.off=function(t,n){Ut(this,t,n)}}function vt(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Br(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function wt(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function xr(e){vt(e),Br(e)}function or(e){return e.target||e.srcElement}function an(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),L&&e.ctrlKey&&1==t&&(t=3),t}var Zr,Jt,Rr=function(){if(s&&M<9)return!1;var e=$("div");return"draggable"in e||"dragDrop"in e}();function qr(e){if(null==Zr){var t=$("span","\u200b");Z(e,$("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Zr=t.offsetWidth<=1&&t.offsetHeight>2&&!(s&&M<8))}var n=Zr?$("span","\u200b"):$("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Xr(e){if(null!=Jt)return Jt;var t=Z(e,document.createTextNode("A\u062eA")),n=pe(t,0,1).getBoundingClientRect(),r=pe(t,1,2).getBoundingClientRect();return te(e),!(!n||n.left==n.right)&&(Jt=r.right-n.right<3)}var e,Vr=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var a=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),f=a.indexOf("\r");-1!=f?(n.push(a.slice(0,f)),t+=f+1):(n.push(a),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Qt=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(n){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Gr="oncopy"in(e=$("div"))||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy),jr=null;var $r={},lr={};function It(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),$r[e]=t}function Pr(e){if("string"==typeof e&&lr.hasOwnProperty(e))e=lr[e];else if(e&&"string"==typeof e.name&&lr.hasOwnProperty(e.name)){var t=lr[e.name];"string"==typeof t&&(t={name:t}),(e=yt(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Pr("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Pr("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function dr(e,t){t=Pr(t);var n=$r[t.name];if(!n)return dr(e,"text/plain");var r=n(e,t);if(ce.hasOwnProperty(t.name)){var i=ce[t.name];for(var a in i)!i.hasOwnProperty(a)||(r.hasOwnProperty(a)&&(r["_"+a]=r[a]),r[a]=i[a])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var f in t.modeProps)r[f]=t.modeProps[f];return r}var ce={};function Je(e,t){je(t,ce.hasOwnProperty(e)?ce[e]:ce[e]={})}function W(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function ie(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Ce(e,t,n){return!e.startState||e.startState(t,n)}var _e=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Ae(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],a=i.chunkSize();if(t<a){n=i;break}t-=a}return n.lines[t]}function Nt(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(a){var f=a.text;i==n.line&&(f=f.slice(0,n.ch)),i==t.line&&(f=f.slice(t.ch)),r.push(f),++i}),r}function zt(e,t,n){var r=[];return e.iter(t,n,function(i){r.push(i.text)}),r}function Ve(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function Ze(e){if(null==e.parent)return null;for(var t=e.parent,n=Te(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function kt(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],a=i.height;if(t<a){e=i;continue e}t-=a,n+=i.chunkSize()}return n}while(!e.lines);for(var f=0;f<e.lines.length;++f){var p=e.lines[f].height;if(t<p)break;t-=p}return n+f}function Mt(e,t){return t>=e.first&&t<e.first+e.size}function ot(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ke(e,t,n){if(void 0===n&&(n=null),!(this instanceof ke))return new ke(e,t,n);this.line=e,this.ch=t,this.sticky=n}function We(e,t){return e.line-t.line||e.ch-t.ch}function sr(e,t){return e.sticky==t.sticky&&0==We(e,t)}function k(e){return ke(e.line,e.ch)}function I(e,t){return We(e,t)<0?t:e}function he(e,t){return We(e,t)<0?e:t}function Se(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Me(e,t){if(t.line<e.first)return ke(e.first,0);var n=e.first+e.size-1;return t.line>n?ke(n,Ae(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?ke(e.line,t):n<0?ke(e.line,0):e}(t,Ae(e,t.line).text.length)}function ct(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=Me(e,t[r]);return n}_e.prototype.eol=function(){return this.pos>=this.string.length},_e.prototype.sol=function(){return this.pos==this.lineStart},_e.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},_e.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},_e.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},_e.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},_e.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},_e.prototype.skipToEnd=function(){this.pos=this.string.length},_e.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},_e.prototype.backUp=function(e){this.pos-=e},_e.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=D(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?D(this.string,this.lineStart,this.tabSize):0)},_e.prototype.indentation=function(){return D(this.string,null,this.tabSize)-(this.lineStart?D(this.string,this.lineStart,this.tabSize):0)},_e.prototype.match=function(e,t,n){if("string"!=typeof e){var a=this.string.slice(this.pos).match(e);return a&&a.index>0?null:(a&&!1!==t&&(this.pos+=a[0].length),a)}var r=function(f){return n?f.toLowerCase():f};if(r(this.string.substr(this.pos,e.length))==r(e))return!1!==t&&(this.pos+=e.length),!0},_e.prototype.current=function(){return this.string.slice(this.start,this.pos)},_e.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},_e.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},_e.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Bt=function(e,t){this.state=e,this.lookAhead=t},Rt=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function On(e,t,n,r){var i=[e.state.modeGen],a={};ii(e,t.text,e.doc.mode,n,function(m,A){return i.push(m,A)},a,r);for(var f=n.state,h=function(m){n.baseTokens=i;var A=e.state.overlays[m],O=1,q=0;n.state=!0,ii(e,t.text,A.mode,n,function(Y,ue){for(var be=O;q<Y;){var Le=i[O];Le>Y&&i.splice(O,1,Y,i[O+1],Le),O+=2,q=Math.min(Y,Le)}if(ue)if(A.opaque)i.splice(be,O-be,Y,"overlay "+ue),O=be+2;else for(;be<O;be+=2){var Ie=i[be+1];i[be+1]=(Ie?Ie+" ":"")+"overlay "+ue}},a),n.state=f,n.baseTokens=null,n.baseTokenPos=1},p=0;p<e.state.overlays.length;++p)h(p);return{styles:i,classes:a.bgClass||a.textClass?a:null}}function Hr(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=ht(e,Ze(t)),i=t.text.length>e.options.maxHighlightLength&&W(e.doc.mode,r.state),a=On(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=a.styles,a.classes?t.styleClasses=a.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function ht(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new Rt(r,!0,t);var a=function(e,t,n){for(var r,i,a=e.doc,f=n?-1:t-(e.doc.mode.innerMode?1e3:100),h=t;h>f;--h){if(h<=a.first)return a.first;var p=Ae(a,h-1),m=p.stateAfter;if(m&&(!n||h+(m instanceof Bt?m.lookAhead:0)<=a.modeFrontier))return h;var A=D(p.text,null,e.options.tabSize);(null==i||r>A)&&(i=h-1,r=A)}return i}(e,t,n),f=a>r.first&&Ae(r,a-1).stateAfter,h=f?Rt.fromSaved(r,f,a):new Rt(r,Ce(r.mode),a);return r.iter(a,t,function(p){ti(e,p.text,h);var m=h.line;p.stateAfter=m==t-1||m%5==0||m>=i.viewFrom&&m<i.viewTo?h.save():null,h.nextLine()}),n&&(r.modeFrontier=h.line),h}function ti(e,t,n,r){var i=e.doc.mode,a=new _e(t,e.options.tabSize,n);for(a.start=a.pos=r||0,""==t&&yn(i,n.state);!a.eol();)ri(i,a,n.state),a.start=a.pos}function yn(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=ie(e,t);if(n.mode.blankLine)return n.mode.blankLine(n.state)}}function ri(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=ie(e,n).mode);var a=e.token(t,n);if(t.pos>t.start)return a}throw new Error("Mode "+e.name+" failed to advance stream.")}Rt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Rt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Rt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Rt.fromSaved=function(e,t,n){return t instanceof Bt?new Rt(e,W(e.mode,t.state),n,t.lookAhead):new Rt(e,W(e.mode,t),n)},Rt.prototype.save=function(e){var t=!1!==e?W(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Bt(t,this.maxLookAhead):t};var ln=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function Ii(e,t,n,r){var f,A,i=e.doc,a=i.mode,h=Ae(i,(t=Me(i,t)).line),p=ht(e,t.line,n),m=new _e(h.text,e.options.tabSize,p);for(r&&(A=[]);(r||m.pos<t.ch)&&!m.eol();)m.start=m.pos,f=ri(a,m,p.state),r&&A.push(new ln(m,f,W(i.mode,p.state)));return r?A:new ln(m,f,p.state)}function ni(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+n[2])}return e}function ii(e,t,n,r,i,a,f){var h=n.flattenSpans;null==h&&(h=e.options.flattenSpans);var O,p=0,m=null,A=new _e(t,e.options.tabSize,r),q=e.options.addModeClass&&[null];for(""==t&&ni(yn(n,r.state),a);!A.eol();){if(A.pos>e.options.maxHighlightLength?(h=!1,f&&ti(e,t,r,A.pos),A.pos=t.length,O=null):O=ni(ri(n,A,r.state,q),a),q){var Y=q[0].name;Y&&(O="m-"+(O?Y+" "+O:Y))}if(!h||m!=O){for(;p<A.start;)i(p=Math.min(A.start,p+5e3),m);m=O}A.start=A.pos}for(;p<A.pos;){var ue=Math.min(A.pos,p+5e3);i(ue,m),p=ue}}var In=!1,_r=!1;function xn(e,t,n){this.marker=e,this.from=t,this.to=n}function sn(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Ri(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Nn(e,t){if(t.full)return null;var n=Mt(e,t.from.line)&&Ae(e,t.from.line).markedSpans,r=Mt(e,t.to.line)&&Ae(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,a=t.to.ch,f=0==We(t.from,t.to),h=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var a=e[i],f=a.marker;null!=a.from&&!(f.inclusiveLeft?a.from<=t:a.from<t)&&(a.from!=t||"bookmark"!=f.type||n&&a.marker.insertLeft)||(r||(r=[])).push(new xn(f,a.from,null==a.to||(f.inclusiveRight?a.to>=t:a.to>t)?null:a.to))}return r}(n,i,f),p=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var a=e[i],f=a.marker;(null==a.to||(f.inclusiveRight?a.to>=t:a.to>t)||a.from==t&&"bookmark"==f.type&&(!n||a.marker.insertLeft))&&(r||(r=[])).push(new xn(f,null==a.from||(f.inclusiveLeft?a.from<=t:a.from<t)?null:a.from-t,null==a.to?null:a.to-t))}return r}(r,a,f),m=1==t.text.length,A=Ke(t.text).length+(m?i:0);if(h)for(var O=0;O<h.length;++O){var q=h[O];if(null==q.to){var Y=sn(p,q.marker);Y?m&&(q.to=null==Y.to?null:Y.to+A):q.to=i}}if(p)for(var ue=0;ue<p.length;++ue){var be=p[ue];null!=be.to&&(be.to+=A),null==be.from?sn(h,be.marker)||(be.from=A,m&&(h||(h=[])).push(be)):(be.from+=A,m&&(h||(h=[])).push(be))}h&&(h=Pi(h)),p&&p!=h&&(p=Pi(p));var Ie=[h];if(!m){var Ne,Re=t.text.length-2;if(Re>0&&h)for(var Pe=0;Pe<h.length;++Pe)null==h[Pe].to&&(Ne||(Ne=[])).push(new xn(h[Pe].marker,null,null));for(var Ye=0;Ye<Re;++Ye)Ie.push(Ne);Ie.push(p)}return Ie}function Pi(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Hi(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function _i(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Bn(e){return e.inclusiveLeft?-1:0}function bn(e){return e.inclusiveRight?1:0}function Rn(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),a=We(r.from,i.from)||Bn(e)-Bn(t);return a?-a:We(r.to,i.to)||bn(e)-bn(t)||t.id-e.id}function ai(e,t){var r,n=_r&&e.markedSpans;if(n)for(var i=void 0,a=0;a<n.length;++a)(i=n[a]).marker.collapsed&&null==(t?i.from:i.to)&&(!r||Rn(r,i.marker)<0)&&(r=i.marker);return r}function li(e){return ai(e,!0)}function Pn(e){return ai(e,!1)}function si(e,t){var r,n=_r&&e.markedSpans;if(n)for(var i=0;i<n.length;++i){var a=n[i];a.marker.collapsed&&(null==a.from||a.from<t)&&(null==a.to||a.to>t)&&(!r||Rn(r,a.marker)<0)&&(r=a.marker)}return r}function ui(e,t,n,r,i){var a=Ae(e,t),f=_r&&a.markedSpans;if(f)for(var h=0;h<f.length;++h){var p=f[h];if(p.marker.collapsed){var m=p.marker.find(0),A=We(m.from,n)||Bn(p.marker)-Bn(i),O=We(m.to,r)||bn(p.marker)-bn(i);if(!(A>=0&&O<=0||A<=0&&O>=0)&&(A<=0&&(p.marker.inclusiveRight&&i.inclusiveLeft?We(m.to,n)>=0:We(m.to,n)>0)||A>=0&&(p.marker.inclusiveRight&&i.inclusiveLeft?We(m.from,r)<=0:We(m.from,r)<0)))return!0}}}function Mr(e){for(var t;t=li(e);)e=t.find(-1,!0).line;return e}function l(e,t){var n=Ae(e,t),r=Mr(n);return n==r?t:Ze(r)}function u(e,t){if(t>e.lastLine())return t;var r,n=Ae(e,t);if(!c(e,n))return t;for(;r=Pn(n);)n=r.find(1,!0).line;return Ze(n)+1}function c(e,t){var n=_r&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&d(e,t,r))return!0}}function d(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return d(e,r.line,sn(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,a=0;a<t.markedSpans.length;++a)if((i=t.markedSpans[a]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&d(e,t,i))return!0}function v(e){for(var t=0,n=(e=Mr(e)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var a=n.parent;a;a=(n=a).parent)for(var f=0;f<a.children.length;++f){var h=a.children[f];if(h==n)break;t+=h.height}return t}function w(e){if(0==e.height)return 0;for(var n,t=e.text.length,r=e;n=li(r);){var i=n.find(0,!0);r=i.from.line,t+=i.from.ch-i.to.ch}for(r=e;n=Pn(r);){var a=n.find(0,!0);t-=r.text.length-a.from.ch,t+=(r=a.to.line).text.length-a.to.ch}return t}function F(e){var t=e.display,n=e.doc;t.maxLine=Ae(n,n.first),t.maxLineLength=w(t.maxLine),t.maxLineChanged=!0,n.iter(function(r){var i=w(r);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=r)})}var E=function(e,t,n){this.text=e,_i(this,t),this.height=n?n(this):1};function J(e){e.parent=null,Hi(e)}E.prototype.lineNo=function(){return Ze(this)},Ft(E);var ge={},we={};function ye(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?we:ge;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function xe(e,t){var n=j("span",null,null,N?"padding-right: .1px":null),r={pre:j("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var a=i?t.rest[i-1]:t.line,f=void 0;r.pos=0,r.addToken=De,Xr(e.display.measure)&&(f=ft(a,e.doc.direction))&&(r.addToken=Xe(r.addToken,f)),r.map=[],bt(a,r,Hr(e,a,t!=e.display.externalMeasured&&Ze(a))),a.styleClasses&&(a.styleClasses.bgClass&&(r.bgClass=Ee(a.styleClasses.bgClass,r.bgClass||"")),a.styleClasses.textClass&&(r.textClass=Ee(a.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(qr(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(N){var p=r.content.lastChild;(/\bcm-tab\b/.test(p.className)||p.querySelector&&p.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return xt(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=Ee(r.pre.className,r.textClass||"")),r}function Be(e){var t=$("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function De(e,t,n,r,i,a,f){if(t){var A,h=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var a=e.charAt(i);" "==a&&n&&(i==e.length-1||32==e.charCodeAt(i+1))&&(a="\xa0"),r+=a,n=" "==a}return r}(t,e.trailingSpace):t,p=e.cm.state.specialChars,m=!1;if(p.test(t)){A=document.createDocumentFragment();for(var O=0;;){p.lastIndex=O;var q=p.exec(t),Y=q?q.index-O:t.length-O;if(Y){var ue=document.createTextNode(h.slice(O,O+Y));A.appendChild(s&&M<9?$("span",[ue]):ue),e.map.push(e.pos,e.pos+Y,ue),e.col+=Y,e.pos+=Y}if(!q)break;O+=Y+1;var be=void 0;if("\t"==q[0]){var Le=e.cm.options.tabSize,Ie=Le-e.col%Le;(be=A.appendChild($("span",Qe(Ie),"cm-tab"))).setAttribute("role","presentation"),be.setAttribute("cm-text","\t"),e.col+=Ie}else"\r"==q[0]||"\n"==q[0]?((be=A.appendChild($("span","\r"==q[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",q[0]),e.col+=1):((be=e.cm.options.specialCharPlaceholder(q[0])).setAttribute("cm-text",q[0]),A.appendChild(s&&M<9?$("span",[be]):be),e.col+=1);e.map.push(e.pos,e.pos+1,be),e.pos++}}else e.col+=t.length,A=document.createTextNode(h),e.map.push(e.pos,e.pos+t.length,A),s&&M<9&&(m=!0),e.pos+=t.length;if(e.trailingSpace=32==h.charCodeAt(t.length-1),n||r||i||m||a||f){var Re=n||"";r&&(Re+=r),i&&(Re+=i);var Ne=$("span",[A],Re,a);if(f)for(var Pe in f)f.hasOwnProperty(Pe)&&"style"!=Pe&&"class"!=Pe&&Ne.setAttribute(Pe,f[Pe]);return e.content.appendChild(Ne)}e.content.appendChild(A)}}function Xe(e,t){return function(n,r,i,a,f,h,p){i=i?i+" cm-force-border":"cm-force-border";for(var m=n.pos,A=m+r.length;;){for(var O=void 0,q=0;q<t.length&&!((O=t[q]).to>m&&O.from<=m);q++);if(O.to>=A)return e(n,r,i,a,f,h,p);e(n,r.slice(0,O.to-m),i,a,null,h,p),a=null,r=r.slice(O.to-m),m=O.to}}}function et(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function bt(e,t,n){var r=e.markedSpans,i=e.text,a=0;if(r)for(var O,q,ue,be,Le,Ie,Re,h=i.length,p=0,m=1,A="",Y=0;;){if(Y==p){ue=be=Le=q="",Re=null,Ie=null,Y=1/0;for(var Ne=[],Pe=void 0,Ye=0;Ye<r.length;++Ye){var Ge=r[Ye],it=Ge.marker;if("bookmark"==it.type&&Ge.from==p&&it.widgetNode)Ne.push(it);else if(Ge.from<=p&&(null==Ge.to||Ge.to>p||it.collapsed&&Ge.to==p&&Ge.from==p)){if(null!=Ge.to&&Ge.to!=p&&Y>Ge.to&&(Y=Ge.to,be=""),it.className&&(ue+=" "+it.className),it.css&&(q=(q?q+";":"")+it.css),it.startStyle&&Ge.from==p&&(Le+=" "+it.startStyle),it.endStyle&&Ge.to==Y&&(Pe||(Pe=[])).push(it.endStyle,Ge.to),it.title&&((Re||(Re={})).title=it.title),it.attributes)for(var Ct in it.attributes)(Re||(Re={}))[Ct]=it.attributes[Ct];it.collapsed&&(!Ie||Rn(Ie.marker,it)<0)&&(Ie=Ge)}else Ge.from>p&&Y>Ge.from&&(Y=Ge.from)}if(Pe)for(var $t=0;$t<Pe.length;$t+=2)Pe[$t+1]==Y&&(be+=" "+Pe[$t]);if(!Ie||Ie.from==p)for(var Ot=0;Ot<Ne.length;++Ot)et(t,0,Ne[Ot]);if(Ie&&(Ie.from||0)==p){if(et(t,(null==Ie.to?h+1:Ie.to)-p,Ie.marker,null==Ie.from),null==Ie.to)return;Ie.to==p&&(Ie=!1)}}if(p>=h)break;for(var Ar=Math.min(h,Y);;){if(A){var Sr=p+A.length;if(!Ie){var Kt=Sr>Ar?A.slice(0,Ar-p):A;t.addToken(t,Kt,O?O+ue:ue,Le,p+Kt.length==Y?be:"",q,Re)}if(Sr>=Ar){A=A.slice(Ar-p),p=Ar;break}p=Sr,Le=""}A=i.slice(a,a=n[m++]),O=ye(n[m++],t.cm.options)}}else for(var f=1;f<n.length;f+=2)t.addToken(t,i.slice(a,a=n[f]),ye(n[f+1],t.cm.options))}function ur(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=Pn(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?Ze(Ke(this.rest))-n+1:1,this.node=this.text=null,this.hidden=c(e,t)}function Lt(e,t,n){for(var i,r=[],a=t;a<n;a=i){var f=new ur(e.doc,Ae(e.doc,a),a);i=a+f.size,r.push(f)}return r}var _t=null;var Gt=null;function ut(e,t){var n=yr(e,t);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);_t?i=_t.delayedCallbacks:Gt?i=Gt:(i=Gt=[],setTimeout(en,0));for(var a=function(h){i.push(function(){return n[h].apply(null,r)})},f=0;f<n.length;++f)a(f)}}function en(){var e=Gt;Gt=null;for(var t=0;t<e.length;++t)e[t]()}function un(e,t,n,r){for(var i=0;i<t.changes.length;i++){var a=t.changes[i];"text"==a?Ol(e,t):"gutter"==a?$o(e,t,n,r):"class"==a?po(e,t):"widget"==a&&Il(e,t,r)}t.changes=null}function tn(e){return e.node==e.text&&(e.node=$("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),s&&M<8&&(e.node.style.zIndex=2)),e.node}function Vo(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):xe(e,t)}function Ol(e,t){var n=t.text.className,r=Vo(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,po(e,t)):n&&(t.text.className=n)}function po(e,t){(function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=tn(t);t.background=r.insertBefore($("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}})(e,t),t.line.wrapClass?tn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className=""),t.text.className=(t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass)||""}function $o(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=tn(t);t.gutterBackground=$("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var a=t.line.gutterMarkers;if(e.options.lineNumbers||a){var f=tn(t),h=t.gutter=$("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(h.setAttribute("aria-hidden","true"),e.display.input.setUneditable(h),f.insertBefore(h,t.text),t.line.gutterClass&&(h.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!a||!a["CodeMirror-linenumbers"])&&(t.lineNumber=h.appendChild($("div",ot(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),a)for(var p=0;p<e.display.gutterSpecs.length;++p){var m=e.display.gutterSpecs[p].className,A=a.hasOwnProperty(m)&&a[m];A&&h.appendChild($("div",[A],"CodeMirror-gutter-elt","left: "+r.gutterLeft[m]+"px; width: "+r.gutterWidth[m]+"px"))}}}function Il(e,t,n){t.alignable&&(t.alignable=null);for(var r=C("CodeMirror-linewidget"),i=t.node.firstChild,a=void 0;i;i=a)a=i.nextSibling,r.test(i.className)&&t.node.removeChild(i);ea(e,t,n)}function Nl(e,t,n,r){var i=Vo(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),po(e,t),$o(e,t,n,r),ea(e,t,r),t.node}function ea(e,t,n){if(ta(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)ta(e,t.rest[r],t,n,!1)}function ta(e,t,n,r,i){if(t.widgets)for(var a=tn(n),f=0,h=t.widgets;f<h.length;++f){var p=h[f],m=$("div",[p.node],"CodeMirror-linewidget"+(p.className?" "+p.className:""));p.handleMouseEvents||m.setAttribute("cm-ignore-events","true"),Bl(p,m,n,r),e.display.input.setUneditable(m),i&&p.above?a.insertBefore(m,n.gutter||n.text):a.appendChild(m),ut(p,"redraw")}}function Bl(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function fi(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!y(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),Z(t.display.measure,$("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function rn(e,t){for(var n=or(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Ui(e){return e.lineSpace.offsetTop}function vo(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function ra(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=Z(e.measure,$("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return!isNaN(r.left)&&!isNaN(r.right)&&(e.cachedPaddingH=r),r}function Yr(e){return 50-e.display.nativeBarWidth}function Cn(e){return e.display.scroller.clientWidth-Yr(e)-e.display.barWidth}function go(e){return e.display.scroller.clientHeight-Yr(e)-e.display.barHeight}function na(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(Ze(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function ia(e,t,n,r){return Jr(e,Hn(e,t),n,r)}function mo(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Ln(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Hn(e,t){var n=Ze(t),r=mo(e,n);r&&!r.text?r=null:r&&r.changes&&(un(e,r,n,Co(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var n=Ze(t=Mr(t)),r=e.display.externalMeasured=new ur(e.doc,t,n);r.lineN=n;var i=r.built=xe(e,r);return r.text=i.pre,Z(e.display.lineMeasure,i.pre),r}(e,t));var i=na(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Jr(e,t,n,r,i){t.before&&(n=-1);var f,a=n+(r||"");return t.cache.hasOwnProperty(a)?f=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var r=e.options.lineWrapping,i=r&&Cn(e);if(!t.measure.heights||r&&t.measure.width!=i){var a=t.measure.heights=[];if(r){t.measure.width=i;for(var f=t.text.firstChild.getClientRects(),h=0;h<f.length-1;h++){var p=f[h],m=f[h+1];Math.abs(p.bottom-m.bottom)>2&&a.push((p.bottom+m.top)/2-n.top)}}a.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(f=function(e,t,n,r){var m,i=aa(t.map,n,r),a=i.node,f=i.start,h=i.end,p=i.collapse;if(3==a.nodeType){for(var A=0;A<4;A++){for(;f&&Nr(t.line.text.charAt(i.coverStart+f));)--f;for(;i.coverStart+h<i.coverEnd&&Nr(t.line.text.charAt(i.coverStart+h));)++h;if((m=s&&M<9&&0==f&&h==i.coverEnd-i.coverStart?a.parentNode.getBoundingClientRect():Hl(pe(a,f,h).getClientRects(),r)).left||m.right||0==f)break;h=f,f-=1,p="right"}s&&M<11&&(m=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=jr)return jr;var t=Z(e,$("span","x")),n=t.getBoundingClientRect(),r=pe(t,0,1).getBoundingClientRect();return jr=Math.abs(n.left-r.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,m))}else{var O;f>0&&(p=r="right"),m=e.options.lineWrapping&&(O=a.getClientRects()).length>1?O["right"==r?O.length-1:0]:a.getBoundingClientRect()}if(s&&M<9&&!f&&(!m||!m.left&&!m.right)){var q=a.parentNode.getClientRects()[0];m=q?{left:q.left,right:q.left+Wn(e.display),top:q.top,bottom:q.bottom}:oa}for(var Y=m.top-t.rect.top,ue=m.bottom-t.rect.top,be=(Y+ue)/2,Le=t.view.measure.heights,Ie=0;Ie<Le.length-1&&!(be<Le[Ie]);Ie++);var Pe={left:("right"==p?m.right:m.left)-t.rect.left,right:("left"==p?m.left:m.right)-t.rect.left,top:Ie?Le[Ie-1]:0,bottom:Le[Ie]};return!m.left&&!m.right&&(Pe.bogus=!0),e.options.singleCursorHeightPerLine||(Pe.rtop=Y,Pe.rbottom=ue),Pe}(e,t,n,r)).bogus||(t.cache[a]=f)),{left:f.left,right:f.right,top:i?f.rtop:f.top,bottom:i?f.rbottom:f.bottom}}var Sn,oa={left:0,right:0,top:0,bottom:0};function aa(e,t,n){for(var r,i,a,f,h,p,m=0;m<e.length;m+=3)if(p=e[m+1],t<(h=e[m])?(i=0,a=1,f="left"):t<p?a=1+(i=t-h):(m==e.length-3||t==p&&e[m+3]>t)&&(i=(a=p-h)-1,t>=p&&(f="right")),null!=i){if(r=e[m+2],h==p&&n==(r.insertLeft?"left":"right")&&(f=n),"left"==n&&0==i)for(;m&&e[m-2]==e[m-3]&&e[m-1].insertLeft;)r=e[2+(m-=3)],f="left";if("right"==n&&i==p-h)for(;m<e.length-3&&e[m+3]==e[m+4]&&!e[m+5].insertLeft;)r=e[(m+=3)+2],f="right";break}return{node:r,start:i,end:a,collapse:f,coverStart:h,coverEnd:p}}function Hl(e,t){var n=oa;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function la(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function sa(e){e.display.externalMeasure=null,te(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)la(e.display.view[t])}function ci(e){sa(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function ua(){return X&&ee?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function fa(){return X&&ee?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function yo(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=fi(e.widgets[n]));return t}function zi(e,t,n,r,i){if(!i){var a=yo(t);n.top+=a,n.bottom+=a}if("line"==r)return n;r||(r="local");var f=v(t);if("local"==r?f+=Ui(e.display):f-=e.display.viewOffset,"page"==r||"window"==r){var h=e.display.lineSpace.getBoundingClientRect();f+=h.top+("window"==r?0:fa());var p=h.left+("window"==r?0:ua());n.left+=p,n.right+=p}return n.top+=f,n.bottom+=f,n}function ca(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=ua(),i-=fa();else if("local"==n||!n){var a=e.display.sizer.getBoundingClientRect();r+=a.left,i+=a.top}var f=e.display.lineSpace.getBoundingClientRect();return{left:r-f.left,top:i-f.top}}function Ki(e,t,n,r,i){return r||(r=Ae(e.doc,t.line)),zi(e,r,ia(e,r,t.ch,i),n)}function Wr(e,t,n,r,i,a){function f(ue,be){var Le=Jr(e,i,ue,be?"right":"left",a);return be?Le.left=Le.right:Le.right=Le.left,zi(e,r,Le,n)}r=r||Ae(e.doc,t.line),i||(i=Hn(e,r));var h=ft(r,e.doc.direction),p=t.ch,m=t.sticky;if(p>=r.text.length?(p=r.text.length,m="before"):p<=0&&(p=0,m="after"),!h)return f("before"==m?p-1:p,"before"==m);function A(ue,be,Le){return f(Le?ue-1:ue,1==h[be].level!=Le)}var O=Or(h,p,m),q=Yt,Y=A(p,O,"before"==m);return null!=q&&(Y.other=A(p,q,"before"!=m)),Y}function ha(e,t){var n=0;t=Me(e.doc,t),e.options.lineWrapping||(n=Wn(e.display)*t.ch);var r=Ae(e.doc,t.line),i=v(r)+Ui(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function xo(e,t,n,r,i){var a=ke(e,t,n);return a.xRel=i,r&&(a.outside=r),a}function ko(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return xo(r.first,0,null,-1,-1);var i=kt(r,n),a=r.first+r.size-1;if(i>a)return xo(r.first+r.size-1,Ae(r,a).text.length,null,1,1);t<0&&(t=0);for(var f=Ae(r,i);;){var h=Ul(e,f,i,t,n),p=si(f,h.ch+(h.xRel>0||h.outside>0?1:0));if(!p)return h;var m=p.find(1);if(m.line==i)return m;f=Ae(r,i=m.line)}}function da(e,t,n,r){r-=yo(t);var i=t.text.length,a=Fr(function(f){return Jr(e,n,f-1).bottom<=r},i,0);return{begin:a,end:i=Fr(function(f){return Jr(e,n,f).top>r},a,i)}}function pa(e,t,n,r){return n||(n=Hn(e,t)),da(e,t,n,zi(e,t,Jr(e,n,r),"line").top)}function bo(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function Ul(e,t,n,r,i){i-=v(t);var a=Hn(e,t),f=yo(t),h=0,p=t.text.length,m=!0,A=ft(t,e.doc.direction);if(A){var O=(e.options.lineWrapping?Kl:zl)(e,t,n,a,A,r,i);h=(m=1!=O.level)?O.from:O.to-1,p=m?O.to:O.from-1}var be,Le,q=null,Y=null,ue=Fr(function(Ye){var Ge=Jr(e,a,Ye);return Ge.top+=f,Ge.bottom+=f,!!bo(Ge,r,i,!1)&&(Ge.top<=i&&Ge.left<=r&&(q=Ye,Y=Ge),!0)},h,p),Ie=!1;if(Y){var Re=r-Y.left<Y.right-r,Ne=Re==m;ue=q+(Ne?0:1),Le=Ne?"after":"before",be=Re?Y.left:Y.right}else{!m&&(ue==p||ue==h)&&ue++,Le=0==ue?"after":ue==t.text.length?"before":Jr(e,a,ue-(m?1:0)).bottom+f<=i==m?"after":"before";var Pe=Wr(e,ke(n,ue,Le),"line",t,a);be=Pe.left,Ie=i<Pe.top?-1:i>=Pe.bottom?1:0}return xo(n,ue=Kr(t.text,ue,1),Le,Ie,r-be)}function zl(e,t,n,r,i,a,f){var h=Fr(function(O){var q=i[O],Y=1!=q.level;return bo(Wr(e,ke(n,Y?q.to:q.from,Y?"before":"after"),"line",t,r),a,f,!0)},0,i.length-1),p=i[h];if(h>0){var m=1!=p.level,A=Wr(e,ke(n,m?p.from:p.to,m?"after":"before"),"line",t,r);bo(A,a,f,!0)&&A.top>f&&(p=i[h-1])}return p}function Kl(e,t,n,r,i,a,f){var h=da(e,t,r,f),p=h.begin,m=h.end;/\s/.test(t.text.charAt(m-1))&&m--;for(var A=null,O=null,q=0;q<i.length;q++){var Y=i[q];if(!(Y.from>=m||Y.to<=p)){var be=Jr(e,r,1!=Y.level?Math.min(m,Y.to)-1:Math.max(p,Y.from)).right,Le=be<a?a-be+1e9:be-a;(!A||O>Le)&&(A=Y,O=Le)}}return A||(A=i[i.length-1]),A.from<p&&(A={from:p,to:A.to,level:A.level}),A.to>m&&(A={from:A.from,to:m,level:A.level}),A}function _n(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Sn){Sn=$("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)Sn.appendChild(document.createTextNode("x")),Sn.appendChild($("br"));Sn.appendChild(document.createTextNode("x"))}Z(e.measure,Sn);var n=Sn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),te(e.measure),n||1}function Wn(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=$("span","xxxxxxxxxx"),n=$("pre",[t],"CodeMirror-line-like");Z(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function Co(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,a=t.gutters.firstChild,f=0;a;a=a.nextSibling,++f){var h=e.display.gutterSpecs[f].className;n[h]=a.offsetLeft+a.clientLeft+i,r[h]=a.clientWidth}return{fixedPos:So(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function So(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function va(e){var t=_n(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/Wn(e.display)-3);return function(i){if(c(e.doc,i))return 0;var a=0;if(i.widgets)for(var f=0;f<i.widgets.length;f++)i.widgets[f].height&&(a+=i.widgets[f].height);return n?a+(Math.ceil(i.text.length/r)||1)*t:a+t}}function wo(e){var t=e.doc,n=va(e);t.iter(function(r){var i=n(r);i!=r.height&&Ve(r,i)})}function wn(e,t,n,r){var i=e.display;if(!n&&"true"==or(t).getAttribute("cm-not-content"))return null;var a,f,h=i.lineSpace.getBoundingClientRect();try{a=t.clientX-h.left,f=t.clientY-h.top}catch(O){return null}var m,p=ko(e,a,f);if(r&&p.xRel>0&&(m=Ae(e.doc,p.line).text).length==p.ch){var A=D(m,m.length,e.options.tabSize)-m.length;p=ke(p.line,Math.max(0,Math.round((a-ra(e.display).left)/Wn(e.display))-A))}return p}function Ln(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function br(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)_r&&l(e.doc,t)<i.viewTo&&cn(e);else if(n<=i.viewFrom)_r&&u(e.doc,n+r)>i.viewFrom?cn(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)cn(e);else if(t<=i.viewFrom){var a=Zi(e,n,n+r,1);a?(i.view=i.view.slice(a.index),i.viewFrom=a.lineN,i.viewTo+=r):cn(e)}else if(n>=i.viewTo){var f=Zi(e,t,t,-1);f?(i.view=i.view.slice(0,f.index),i.viewTo=f.lineN):cn(e)}else{var h=Zi(e,t,t,-1),p=Zi(e,n,n+r,1);h&&p?(i.view=i.view.slice(0,h.index).concat(Lt(e,h.lineN,p.lineN)).concat(i.view.slice(p.index)),i.viewTo+=r):cn(e)}var m=i.externalMeasured;m&&(n<m.lineN?m.lineN+=r:t<m.lineN+m.size&&(i.externalMeasured=null))}function fn(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var a=r.view[Ln(e,t)];if(null!=a.node){var f=a.changes||(a.changes=[]);-1==Te(f,n)&&f.push(n)}}}function cn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Zi(e,t,n,r){var a,i=Ln(e,t),f=e.display.view;if(!_r||n==e.doc.first+e.doc.size)return{index:i,lineN:n};for(var h=e.display.viewFrom,p=0;p<i;p++)h+=f[p].size;if(h!=t){if(r>0){if(i==f.length-1)return null;a=h+f[i].size-t,i++}else a=h-t;t+=a,n+=a}for(;l(e.doc,n)!=n;){if(i==(r<0?0:f.length-1))return null;n+=r*f[i-(r<0?1:0)].size,i+=r}return{index:i,lineN:n}}function ga(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];!i.hidden&&(!i.node||i.changes)&&++n}return n}function hi(e){e.display.input.showSelection(e.display.input.prepareSelection())}function ma(e,t){void 0===t&&(t=!0);for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),a=r.selection=document.createDocumentFragment(),f=0;f<n.sel.ranges.length;f++)if(t||f!=n.sel.primIndex){var h=n.sel.ranges[f];if(!(h.from().line>=e.display.viewTo||h.to().line<e.display.viewFrom)){var p=h.empty();(p||e.options.showCursorWhenSelecting)&&ya(e,h.head,i),p||Gl(e,h,a)}}return r}function ya(e,t,n){var r=Wr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild($("div","\xa0","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var a=Ki(e,t,"div",null,null);a.right-a.left>0&&(i.style.width=a.right-a.left+"px")}if(r.other){var f=n.appendChild($("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));f.style.display="",f.style.left=r.other.left+"px",f.style.top=r.other.top+"px",f.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function Gi(e,t){return e.top-t.top||e.left-t.left}function Gl(e,t,n){var r=e.display,i=e.doc,a=document.createDocumentFragment(),f=ra(e.display),h=f.left,p=Math.max(r.sizerWidth,Cn(e)-r.sizer.offsetLeft)-f.right,m="ltr"==i.direction;function A(Ne,Pe,Ye,Ge){Pe<0&&(Pe=0),Pe=Math.round(Pe),Ge=Math.round(Ge),a.appendChild($("div",null,"CodeMirror-selected","position: absolute; left: "+Ne+"px;\n                             top: "+Pe+"px; width: "+(null==Ye?p-Ne:Ye)+"px;\n                             height: "+(Ge-Pe)+"px"))}function O(Ne,Pe,Ye){var Ct,$t,Ge=Ae(i,Ne),it=Ge.text.length;function Ot(Kt,wr){return Ki(e,ke(Ne,Kt),"div",Ge,wr)}function Ar(Kt,wr,rr){var jt=pa(e,Ge,null,Kt),Zt="ltr"==wr==("after"==rr)?"left":"right";return Ot("after"==rr?jt.begin:jt.end-(/\s/.test(Ge.text.charAt(jt.end-1))?2:1),Zt)[Zt]}var Sr=ft(Ge,i.direction);return function(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,a=0;a<e.length;++a){var f=e[a];(f.from<n&&f.to>t||t==n&&f.to==t)&&(r(Math.max(f.from,t),Math.min(f.to,n),1==f.level?"rtl":"ltr",a),i=!0)}i||r(t,n,"ltr")}(Sr,Pe||0,null==Ye?it:Ye,function(Kt,wr,rr,jt){var Zt="ltr"==rr,Pt=Ot(Kt,Zt?"left":"right"),Lr=Ot(wr-1,Zt?"right":"left"),$n=null==Pe&&0==Kt,mn=null==Ye&&wr==it,cr=0==jt,Qr=!Sr||jt==Sr.length-1;if(Lr.top-Pt.top<=3){var on=(m?$n:mn)&&cr?h:(Zt?Pt:Lr).left;A(on,Pt.top,((m?mn:$n)&&Qr?p:(Zt?Lr:Pt).right)-on,Pt.bottom)}else{var Fn,vr,ei,Xo;Zt?(Fn=m&&$n&&cr?h:Pt.left,vr=m?p:Ar(Kt,rr,"before"),ei=m?h:Ar(wr,rr,"after"),Xo=m&&mn&&Qr?p:Lr.right):(Fn=m?Ar(Kt,rr,"before"):h,vr=!m&&$n&&cr?p:Pt.right,ei=!m&&mn&&Qr?h:Lr.left,Xo=m?Ar(wr,rr,"after"):p),A(Fn,Pt.top,vr-Fn,Pt.bottom),Pt.bottom<Lr.top&&A(h,Pt.bottom,null,Lr.top),A(ei,Lr.top,Xo-ei,Lr.bottom)}(!Ct||Gi(Pt,Ct)<0)&&(Ct=Pt),Gi(Lr,Ct)<0&&(Ct=Lr),(!$t||Gi(Pt,$t)<0)&&($t=Pt),Gi(Lr,$t)<0&&($t=Lr)}),{start:Ct,end:$t}}var q=t.from(),Y=t.to();if(q.line==Y.line)O(q.line,q.ch,Y.ch);else{var ue=Ae(i,q.line),be=Ae(i,Y.line),Le=Mr(ue)==Mr(be),Ie=O(q.line,q.ch,Le?ue.text.length+1:null).end,Re=O(Y.line,Le?0:null,Y.ch).start;Le&&(Ie.top<Re.top-2?(A(Ie.right,Ie.top,null,Ie.bottom),A(h,Re.top,Re.left,Re.bottom)):A(Ie.right,Ie.top,Re.left-Ie.right,Ie.bottom)),Ie.bottom<Re.top&&A(h,Ie.bottom,null,Re.top)}n.appendChild(a)}function Lo(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||Un(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function xa(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Ao(e))}function To(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Un(e))},100)}function Ao(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(xt(e,"focus",e,t),e.state.focused=!0,fe(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),N&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Lo(e))}function Un(e,t){e.state.delayingBlurEvent||(e.state.focused&&(xt(e,"blur",e,t),e.state.focused=!1,P(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function ji(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=Math.max(0,t.scroller.getBoundingClientRect().top),i=t.lineDiv.getBoundingClientRect().top,a=0,f=0;f<t.view.length;f++){var h=t.view[f],p=e.options.lineWrapping,m=void 0,A=0;if(!h.hidden){if(i+=h.line.height,s&&M<8){var O=h.node.offsetTop+h.node.offsetHeight;m=O-n,n=O}else{var q=h.node.getBoundingClientRect();m=q.bottom-q.top,!p&&h.text.firstChild&&(A=h.text.firstChild.getBoundingClientRect().right-q.left-1)}var Y=h.line.height-m;if((Y>.005||Y<-.005)&&(i<r&&(a-=Y),Ve(h.line,m),ka(h.line),h.rest))for(var ue=0;ue<h.rest.length;ue++)ka(h.rest[ue]);if(A>e.display.sizerWidth){var be=Math.ceil(A/Wn(e.display));be>e.display.maxLineLength&&(e.display.maxLineLength=be,e.display.maxLine=h.line,e.display.maxLineChanged=!0)}}}Math.abs(a)>2&&(t.scroller.scrollTop+=a)}function ka(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function Yi(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Ui(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,a=kt(t,r),f=kt(t,i);if(n&&n.ensure){var h=n.ensure.from.line,p=n.ensure.to.line;h<a?(a=h,f=kt(t,v(Ae(t,h))+e.wrapper.clientHeight)):Math.min(p,t.lastLine())>=f&&(a=kt(t,v(Ae(t,p))-e.wrapper.clientHeight),f=p)}return{from:a,to:Math.max(f,a+1)}}function Mo(e,t){var n=e.display,r=_n(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,a=go(e),f={};t.bottom-t.top>a&&(t.bottom=t.top+a);var h=e.doc.height+vo(n),m=t.bottom>h-r;if(t.top<i)f.scrollTop=t.top<r?0:t.top;else if(t.bottom>i+a){var A=Math.min(t.top,(m?h:t.bottom)-a);A!=i&&(f.scrollTop=A)}var O=e.options.fixedGutter?0:n.gutters.offsetWidth,q=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-O,Y=Cn(e)-n.gutters.offsetWidth,ue=t.right-t.left>Y;return ue&&(t.right=t.left+Y),t.left<10?f.scrollLeft=0:t.left<q?f.scrollLeft=Math.max(0,t.left+O-(ue?0:10)):t.right>Y+q-3&&(f.scrollLeft=t.right+(ue?0:10)-Y),f}function Eo(e,t){null!=t&&(Ji(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function zn(e){Ji(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function di(e,t,n){(null!=t||null!=n)&&Ji(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Ji(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,ba(e,ha(e,t.from),ha(e,t.to),t.margin))}function ba(e,t,n,r){var i=Mo(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});di(e,i.scrollLeft,i.scrollTop)}function pi(e,t){Math.abs(e.doc.scrollTop-t)<2||(x||Fo(e,{top:t}),Ca(e,t,!0),x&&Fo(e),mi(e,100))}function Ca(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Tn(e,t,n,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(!(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||r)&&(e.doc.scrollLeft=t,Aa(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function vi(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+vo(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Yr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var An=function(e,t,n){this.cm=n;var r=this.vert=$("div",[$("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=$("div",[$("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),Ue(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),Ue(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,s&&M<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};An.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;return n?(this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0",this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+(e.viewHeight-(t?r:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0"),t?(this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+(e.viewWidth-e.barLeft-(n?r:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},An.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},An.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},An.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=L&&!ae?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new b,this.disableVert=new b},An.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,function r(){var i=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,r)})},An.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var gi=function(){};function Kn(e,t){t||(t=vi(e));var n=e.display.barWidth,r=e.display.barHeight;Sa(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&ji(e),Sa(e,vi(e)),n=e.display.barWidth,r=e.display.barHeight}function Sa(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}gi.prototype.update=function(){return{bottom:0,right:0}},gi.prototype.setScrollLeft=function(){},gi.prototype.setScrollTop=function(){},gi.prototype.clear=function(){};var wa={native:An,null:gi};function La(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&P(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new wa[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),Ue(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?Tn(e,t):pi(e,t)},e),e.display.scrollbars.addClass&&fe(e.display.wrapper,e.display.scrollbars.addClass)}var ql=0;function Mn(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ql,markArrays:null},function(e){_t?_t.ops.push(e):e.ownsGroup=_t={ops:[e],delayedCallbacks:[]}}(e.curOp)}function En(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{_t=null,t(n)}}(t,function(n){for(var r=0;r<n.ops.length;r++)n.ops[r].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)Vl(t[n]);for(var r=0;r<t.length;r++)$l(t[r]);for(var i=0;i<t.length;i++)es(t[i]);for(var a=0;a<t.length;a++)ts(t[a]);for(var f=0;f<t.length;f++)rs(t[f])}(n)})}function Vl(e){var t=e.cm,n=t.display;(function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Yr(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Yr(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&F(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Qi(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function $l(e){e.updatedDisplay=e.mustUpdate&&Do(e.cm,e.update)}function es(e){var t=e.cm,n=t.display;e.updatedDisplay&&ji(t),e.barMeasure=vi(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=ia(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Yr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Cn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function ts(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Tn(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==le();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Kn(t,e.barMeasure),e.updatedDisplay&&Io(t,e.barMeasure),e.selectionChanged&&Lo(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&xa(e.cm)}function rs(e){var t=e.cm,n=t.display,r=t.doc;e.updatedDisplay&&Ta(t,e.update),null!=n.wheelStartX&&(null!=e.scrollTop||null!=e.scrollLeft||e.scrollToPos)&&(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Ca(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Tn(t,e.scrollLeft,!0,!0),e.scrollToPos&&function(e,t){if(!$e(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!se){var a=$("div","\u200b",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-Ui(e.display))+"px;\n                         height: "+(t.bottom-t.top+Yr(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(a),a.scrollIntoView(i),e.display.lineSpace.removeChild(a)}}}(t,function(e,t,n,r){var i;null==r&&(r=0),!e.options.lineWrapping&&t==n&&(n="before"==t.sticky?ke(t.line,t.ch+1,"before"):t,t=t.ch?ke(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t);for(var a=0;a<5;a++){var f=!1,h=Wr(e,t),p=n&&n!=t?Wr(e,n):h,m=Mo(e,i={left:Math.min(h.left,p.left),top:Math.min(h.top,p.top)-r,right:Math.max(h.left,p.left),bottom:Math.max(h.bottom,p.bottom)+r}),A=e.doc.scrollTop,O=e.doc.scrollLeft;if(null!=m.scrollTop&&(pi(e,m.scrollTop),Math.abs(e.doc.scrollTop-A)>1&&(f=!0)),null!=m.scrollLeft&&(Tn(e,m.scrollLeft),Math.abs(e.doc.scrollLeft-O)>1&&(f=!0)),!f)break}return i}(t,Me(r,e.scrollToPos.from),Me(r,e.scrollToPos.to),e.scrollToPos.margin));var a=e.maybeHiddenMarkers,f=e.maybeUnhiddenMarkers;if(a)for(var h=0;h<a.length;++h)a[h].lines.length||xt(a[h],"hide");if(f)for(var p=0;p<f.length;++p)f[p].lines.length&&xt(f[p],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&xt(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Tr(e,t){if(e.curOp)return t();Mn(e);try{return t()}finally{En(e)}}function Xt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Mn(e);try{return t.apply(e,arguments)}finally{En(e)}}}function pr(e){return function(){if(this.curOp)return e.apply(this,arguments);Mn(this);try{return e.apply(this,arguments)}finally{En(this)}}}function Vt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Mn(t);try{return e.apply(this,arguments)}finally{En(t)}}}function mi(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,ze(ns,e))}function ns(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=ht(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(a){if(r.line>=e.display.viewFrom){var f=a.styles,h=a.text.length>e.options.maxHighlightLength?W(t.mode,r.state):null,p=On(e,a,r,!0);h&&(r.state=h),a.styles=p.styles;var m=a.styleClasses,A=p.classes;A?a.styleClasses=A:m&&(a.styleClasses=null);for(var O=!f||f.length!=a.styles.length||m!=A&&(!m||!A||m.bgClass!=A.bgClass||m.textClass!=A.textClass),q=0;!O&&q<f.length;++q)O=f[q]!=a.styles[q];O&&i.push(r.line),a.stateAfter=r.save(),r.nextLine()}else a.text.length<=e.options.maxHighlightLength&&ti(e,a.text,r),a.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return mi(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&Tr(e,function(){for(var a=0;a<i.length;a++)fn(e,i[a],"text")})}}var Qi=function(e,t,n){var r=e.display;this.viewport=t,this.visible=Yi(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Cn(e),this.force=n,this.dims=Co(e),this.events=[]};function Do(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return cn(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==ga(e))return!1;Ma(e)&&(cn(e),t.dims=Co(e));var i=r.first+r.size,a=Math.max(t.visible.from-e.options.viewportMargin,r.first),f=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<a&&a-n.viewFrom<20&&(a=Math.max(r.first,n.viewFrom)),n.viewTo>f&&n.viewTo-f<20&&(f=Math.min(i,n.viewTo)),_r&&(a=l(e.doc,a),f=u(e.doc,f));var h=a!=n.viewFrom||f!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;(function(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=Lt(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=Lt(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(Ln(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(Lt(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,Ln(e,n)))),r.viewTo=n})(e,a,f),n.viewOffset=v(Ae(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var p=ga(e);if(!h&&0==p&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var m=function(e){if(e.hasFocus())return null;var t=le();if(!t||!y(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&y(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(e);return p>4&&(n.lineDiv.style.display="none"),function(e,t,n){var r=e.display,i=e.options.lineNumbers,a=r.lineDiv,f=a.firstChild;function h(ue){var be=ue.nextSibling;return N&&L&&e.display.currentWheelTarget==ue?ue.style.display="none":ue.parentNode.removeChild(ue),be}for(var p=r.view,m=r.viewFrom,A=0;A<p.length;A++){var O=p[A];if(!O.hidden)if(O.node&&O.node.parentNode==a){for(;f!=O.node;)f=h(f);var Y=i&&null!=t&&t<=m&&O.lineNumber;O.changes&&(Te(O.changes,"gutter")>-1&&(Y=!1),un(e,O,m,n)),Y&&(te(O.lineNumber),O.lineNumber.appendChild(document.createTextNode(ot(e.options,m)))),f=O.node.nextSibling}else{var q=Nl(e,O,m,n);a.insertBefore(q,f)}m+=O.size}for(;f;)f=h(f)}(e,n.updateLineNumbers,t.dims),p>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=le()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&y(document.body,e.anchorNode)&&y(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(m),te(n.cursorDiv),te(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,h&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,mi(e,400)),n.updateLineNumbers=null,!0}function Ta(e,t){for(var n=t.viewport,r=!0;;r=!1){if(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Cn(e))r&&(t.visible=Yi(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+vo(e.display)-go(e),n.top)}),t.visible=Yi(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!Do(e,t))break;ji(e);var i=vi(e);hi(e),Kn(e,i),Io(e,i),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Fo(e,t){var n=new Qi(e,t);if(Do(e,n)){ji(e),Ta(e,n);var r=vi(e);hi(e),Kn(e,r),Io(e,r),n.finish()}}function Oo(e){e.sizer.style.marginLeft=e.gutters.offsetWidth+"px",ut(e,"gutterChanged",e)}function Io(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Yr(e)+"px"}function Aa(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=So(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,a=r+"px",f=0;f<n.length;f++)if(!n[f].hidden){e.options.fixedGutter&&(n[f].gutter&&(n[f].gutter.style.left=a),n[f].gutterBackground&&(n[f].gutterBackground.style.left=a));var h=n[f].alignable;if(h)for(var p=0;p<h.length;p++)h[p].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function Ma(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=ot(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild($("div",[$("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=i.firstChild.offsetWidth,f=i.offsetWidth-a;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(a,r.lineGutter.offsetWidth-f)+1,r.lineNumWidth=r.lineNumInnerWidth+f,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",Oo(e.display),!0}return!1}function No(e,t){for(var n=[],r=!1,i=0;i<e.length;i++){var a=e[i],f=null;if("string"!=typeof a&&(f=a.style,a=a.className),"CodeMirror-linenumbers"==a){if(!t)continue;r=!0}n.push({className:a,style:f})}return t&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function Ea(e){var t=e.gutters,n=e.gutterSpecs;te(t),e.lineGutter=null;for(var r=0;r<n.length;++r){var i=n[r],a=i.className,f=i.style,h=t.appendChild($("div",null,"CodeMirror-gutter "+a));f&&(h.style.cssText=f),"CodeMirror-linenumbers"==a&&(e.lineGutter=h,h.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",Oo(e)}function yi(e){Ea(e.display),br(e),Aa(e)}function ss(e,t,n,r){var i=this;this.input=n,i.scrollbarFiller=$("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=$("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=j("div",null,"CodeMirror-code"),i.selectionDiv=$("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=$("div",null,"CodeMirror-cursors"),i.measure=$("div",null,"CodeMirror-measure"),i.lineMeasure=$("div",null,"CodeMirror-measure"),i.lineSpace=j("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var a=j("div",[i.lineSpace],"CodeMirror-lines");i.mover=$("div",[a],null,"position: relative"),i.sizer=$("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=$("div",null,null,"position: absolute; height: 50px; width: 1px;"),i.gutters=$("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=$("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=$("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),i.wrapper.setAttribute("translate","no"),s&&M<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),!N&&!(x&&re)&&(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,i.gutterSpecs=No(r.gutters,r.lineNumbers),Ea(i),n.init(i)}Qi.prototype.signal=function(e,t){st(e,t)&&this.events.push(arguments)},Qi.prototype.finish=function(){for(var e=0;e<this.events.length;e++)xt.apply(null,this.events[e])};var qi=0,Er=null;function Da(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function us(e){var t=Da(e);return t.x*=Er,t.y*=Er,t}function Fa(e,t){var n=Da(t),r=n.x,i=n.y,a=e.display,f=a.scroller,p=f.scrollHeight>f.clientHeight;if(r&&f.scrollWidth>f.clientWidth||i&&p){if(i&&L&&N)e:for(var m=t.target,A=a.view;m!=f;m=m.parentNode)for(var O=0;O<A.length;O++)if(A[O].node==m){e.display.currentWheelTarget=m;break e}if(r&&!x&&!Q&&null!=Er)return i&&p&&pi(e,Math.max(0,f.scrollTop+i*Er)),Tn(e,Math.max(0,f.scrollLeft+r*Er)),(!i||i&&p)&&vt(t),void(a.wheelStartX=null);if(i&&null!=Er){var q=i*Er,Y=e.doc.scrollTop,ue=Y+a.wrapper.clientHeight;q<0?Y=Math.max(0,Y+q-50):ue=Math.min(e.doc.height,ue+q+50),Fo(e,{top:Y,bottom:ue})}qi<20&&(null==a.wheelStartX?(a.wheelStartX=f.scrollLeft,a.wheelStartY=f.scrollTop,a.wheelDX=r,a.wheelDY=i,setTimeout(function(){if(null!=a.wheelStartX){var be=f.scrollLeft-a.wheelStartX,Le=f.scrollTop-a.wheelStartY,Ie=Le&&a.wheelDY&&Le/a.wheelDY||be&&a.wheelDX&&be/a.wheelDX;a.wheelStartX=a.wheelStartY=null,Ie&&(Er=(Er*qi+Ie)/(qi+1),++qi)}},200)):(a.wheelDX+=r,a.wheelDY+=i))}}s?Er=-.53:x?Er=15:X?Er=-.7:z&&(Er=-1/3);var Dr=function(e,t){this.ranges=e,this.primIndex=t};Dr.prototype.primary=function(){return this.ranges[this.primIndex]},Dr.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!sr(n.anchor,r.anchor)||!sr(n.head,r.head))return!1}return!0},Dr.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new dt(k(this.ranges[t].anchor),k(this.ranges[t].head));return new Dr(e,this.primIndex)},Dr.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},Dr.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(We(t,r.from())>=0&&We(e,r.to())<=0)return n}return-1};var dt=function(e,t){this.anchor=e,this.head=t};function Ur(e,t,n){var r=e&&e.options.selectionsMayTouch,i=t[n];t.sort(function(q,Y){return We(q.from(),Y.from())}),n=Te(t,i);for(var a=1;a<t.length;a++){var f=t[a],h=t[a-1],p=We(h.to(),f.from());if(r&&!f.empty()?p>0:p>=0){var m=he(h.from(),f.from()),A=I(h.to(),f.to()),O=h.empty()?f.from()==f.head:h.from()==h.head;a<=n&&--n,t.splice(--a,2,new dt(O?A:m,O?m:A))}}return new Dr(t,n)}function hn(e,t){return new Dr([new dt(e,t||e)],0)}function dn(e){return e.text?ke(e.from.line+e.text.length-1,Ke(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Oa(e,t){if(We(e,t.from)<0)return e;if(We(e,t.to)<=0)return dn(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=dn(t).ch-t.to.ch),ke(n,r)}function Bo(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new dt(Oa(i.anchor,t),Oa(i.head,t)))}return Ur(e.cm,n,e.sel.primIndex)}function Ia(e,t,n){return e.line==t.line?ke(n.line,e.ch-t.ch+n.ch):ke(n.line+(e.line-t.line),e.ch)}function Ro(e){e.doc.mode=dr(e.options,e.doc.modeOption),xi(e)}function xi(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,mi(e,100),e.state.modeGen++,e.curOp&&br(e)}function Na(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Ke(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Po(e,t,n,r){function i(Re){return n?n[Re]:null}function a(Re,Ne,Pe){(function(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Hi(e),_i(e,n);var i=r?r(e):1;i!=e.height&&Ve(e,i)})(Re,Ne,Pe,r),ut(Re,"change",Re,t)}function f(Re,Ne){for(var Pe=[],Ye=Re;Ye<Ne;++Ye)Pe.push(new E(m[Ye],i(Ye),r));return Pe}var h=t.from,p=t.to,m=t.text,A=Ae(e,h.line),O=Ae(e,p.line),q=Ke(m),Y=i(m.length-1),ue=p.line-h.line;if(t.full)e.insert(0,f(0,m.length)),e.remove(m.length,e.size-m.length);else if(Na(e,t)){var be=f(0,m.length-1);a(O,O.text,Y),ue&&e.remove(h.line,ue),be.length&&e.insert(h.line,be)}else if(A==O)if(1==m.length)a(A,A.text.slice(0,h.ch)+q+A.text.slice(p.ch),Y);else{var Le=f(1,m.length-1);Le.push(new E(q+A.text.slice(p.ch),Y,r)),a(A,A.text.slice(0,h.ch)+m[0],i(0)),e.insert(h.line+1,Le)}else if(1==m.length)a(A,A.text.slice(0,h.ch)+m[0]+O.text.slice(p.ch),i(0)),e.remove(h.line+1,ue);else{a(A,A.text.slice(0,h.ch)+m[0],i(0)),a(O,q+O.text.slice(p.ch),Y);var Ie=f(1,m.length-1);ue>1&&e.remove(h.line+1,ue-1),e.insert(h.line+1,Ie)}ut(e,"change",e,t)}function pn(e,t,n){!function r(i,a,f){if(i.linked)for(var h=0;h<i.linked.length;++h){var p=i.linked[h];if(p.doc!=a){var m=f&&p.sharedHist;n&&!m||(t(p.doc,m),r(p.doc,i,m))}}}(e,null,!0)}function Ba(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,wo(e),Ro(e),Ra(e),e.options.direction=t.direction,e.options.lineWrapping||F(e),e.options.mode=t.modeOption,br(e)}function Ra(e){("rtl"==e.doc.direction?fe:P)(e.display.lineDiv,"CodeMirror-rtl")}function Xi(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Ho(e,t){var n={from:k(t.from),to:dn(t),text:Nt(e,t.from,t.to)};return _a(e,n,t.from.line,t.to.line+1),pn(e,function(r){return _a(r,n,t.from.line,t.to.line+1)},!0),n}function Pa(e){for(;e.length&&Ke(e).ranges;)e.pop()}function Ha(e,t,n,r){var i=e.history;i.undone.length=0;var f,h,a=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(f=function(e,t){return t?(Pa(e.done),Ke(e.done)):e.done.length&&!Ke(e.done).ranges?Ke(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Ke(e.done)):void 0}(i,i.lastOp==r)))h=Ke(f.changes),0==We(t.from,t.to)&&0==We(t.from,h.to)?h.to=dn(t):f.changes.push(Ho(e,t));else{var p=Ke(i.done);for((!p||!p.ranges)&&Vi(e.sel,i.done),f={changes:[Ho(e,t)],generation:i.generation},i.done.push(f);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,h||xt(e,"historyAdded")}function ps(e,t,n,r){var i=e.history,a=r&&r.origin;n==i.lastSelOp||a&&i.lastSelOrigin==a&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==a||function(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,a,Ke(i.done),t))?i.done[i.done.length-1]=t:Vi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=a,i.lastSelOp=n,r&&!1!==r.clearRedo&&Pa(i.undone)}function Vi(e,t){var n=Ke(t);n&&n.ranges&&n.equals(e)||t.push(e)}function _a(e,t,n,r){var i=t["spans_"+e.id],a=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(f){f.markedSpans&&((i||(i=t["spans_"+e.id]={}))[a]=f.markedSpans),++a})}function vs(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Wa(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(vs(n[i]));return r}(e,t),r=Nn(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var a=n[i],f=r[i];if(a&&f)e:for(var h=0;h<f.length;++h){for(var p=f[h],m=0;m<a.length;++m)if(a[m].marker==p.marker)continue e;a.push(p)}else f&&(n[i]=f)}return n}function Zn(e,t,n){for(var r=[],i=0;i<e.length;++i){var a=e[i];if(a.ranges)r.push(n?Dr.prototype.deepCopy.call(a):a);else{var f=a.changes,h=[];r.push({changes:h});for(var p=0;p<f.length;++p){var m=f[p],A=void 0;if(h.push({from:m.from,to:m.to,text:m.text}),t)for(var O in m)(A=O.match(/^spans_(\d+)$/))&&Te(t,Number(A[1]))>-1&&(Ke(h)[O]=m[O],delete m[O])}}}return r}function _o(e,t,n,r){if(r){var i=e.anchor;if(n){var a=We(t,i)<0;a!=We(n,i)<0?(i=t,t=n):a!=We(t,n)<0&&(t=n)}return new dt(i,t)}return new dt(n||t,t)}function $i(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),fr(e,new Dr([_o(e.sel.primary(),t,n,i)],0),r)}function Ua(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),a=0;a<e.sel.ranges.length;a++)r[a]=_o(e.sel.ranges[a],t[a],null,i);fr(e,Ur(e.cm,r,e.sel.primIndex),n)}function Wo(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,fr(e,Ur(e.cm,i,e.sel.primIndex),r)}function za(e,t,n,r){fr(e,hn(t,n),r)}function Ka(e,t,n){var r=e.history.done,i=Ke(r);i&&i.ranges?(r[r.length-1]=t,eo(e,t,n)):fr(e,t,n)}function fr(e,t,n){eo(e,t,n),ps(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function eo(e,t,n){(st(e,"beforeSelectionChange")||e.cm&&st(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var r={ranges:t.ranges,update:function(i){this.ranges=[];for(var a=0;a<i.length;a++)this.ranges[a]=new dt(Me(e,i[a].anchor),Me(e,i[a].head))},origin:n&&n.origin};return xt(e,"beforeSelectionChange",e,r),e.cm&&xt(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?Ur(e.cm,r.ranges,r.ranges.length-1):t}(e,t,n));var r=n&&n.bias||(We(t.primary().head,e.sel.primary().head)<0?-1:1);Za(e,ja(e,t,r,!0)),(!n||!1!==n.scroll)&&e.cm&&"nocursor"!=e.cm.getOption("readOnly")&&zn(e.cm)}function Za(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,rt(e.cm)),ut(e,"cursorActivity",e))}function Ga(e){Za(e,ja(e,e.sel,null,!1))}function ja(e,t,n,r){for(var i,a=0;a<t.ranges.length;a++){var f=t.ranges[a],h=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[a],p=to(e,f.anchor,h&&h.anchor,n,r),m=to(e,f.head,h&&h.head,n,r);(i||p!=f.anchor||m!=f.head)&&(i||(i=t.ranges.slice(0,a)),i[a]=new dt(p,m))}return i?Ur(e.cm,i,t.primIndex):t}function Gn(e,t,n,r,i){var a=Ae(e,t.line);if(a.markedSpans)for(var f=0;f<a.markedSpans.length;++f){var h=a.markedSpans[f],p=h.marker,m="selectLeft"in p?!p.selectLeft:p.inclusiveLeft,A="selectRight"in p?!p.selectRight:p.inclusiveRight;if((null==h.from||(m?h.from<=t.ch:h.from<t.ch))&&(null==h.to||(A?h.to>=t.ch:h.to>t.ch))){if(i&&(xt(p,"beforeCursorEnter"),p.explicitlyCleared)){if(a.markedSpans){--f;continue}break}if(!p.atomic)continue;if(n){var O=p.find(r<0?1:-1),q=void 0;if((r<0?A:m)&&(O=Ya(e,O,-r,O&&O.line==t.line?a:null)),O&&O.line==t.line&&(q=We(O,n))&&(r<0?q<0:q>0))return Gn(e,O,t,r,i)}var Y=p.find(r<0?-1:1);return(r<0?m:A)&&(Y=Ya(e,Y,r,Y.line==t.line?a:null)),Y?Gn(e,Y,t,r,i):null}}return t}function to(e,t,n,r,i){var a=r||1;return Gn(e,t,n,a,i)||!i&&Gn(e,t,n,a,!0)||Gn(e,t,n,-a,i)||!i&&Gn(e,t,n,-a,!0)||(e.cantEdit=!0,ke(e.first,0))}function Ya(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?Me(e,ke(t.line-1)):null:n>0&&t.ch==(r||Ae(e,t.line)).text.length?t.line<e.first+e.size-1?ke(t.line+1,0):null:new ke(t.line,t.ch+n)}function Ja(e){e.setSelection(ke(e.firstLine(),0),ke(e.lastLine()),ne)}function Qa(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(i,a,f,h){i&&(r.from=Me(e,i)),a&&(r.to=Me(e,a)),f&&(r.text=f),void 0!==h&&(r.origin=h)}),xt(e,"beforeChange",e,r),e.cm&&xt(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function jn(e,t,n){if(e.cm){if(!e.cm.curOp)return Xt(e.cm,jn)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(st(e,"beforeChange")||e.cm&&st(e.cm,"beforeChange"))||(t=Qa(e,t,!0))){var r=In&&!n&&function(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(Y){if(Y.markedSpans)for(var ue=0;ue<Y.markedSpans.length;++ue){var be=Y.markedSpans[ue].marker;be.readOnly&&(!r||-1==Te(r,be))&&(r||(r=[])).push(be)}}),!r)return null;for(var i=[{from:t,to:n}],a=0;a<r.length;++a)for(var f=r[a],h=f.find(0),p=0;p<i.length;++p){var m=i[p];if(!(We(m.to,h.from)<0||We(m.from,h.to)>0)){var A=[p,1],O=We(m.from,h.from),q=We(m.to,h.to);(O<0||!f.inclusiveLeft&&!O)&&A.push({from:m.from,to:h.from}),(q>0||!f.inclusiveRight&&!q)&&A.push({from:h.to,to:m.to}),i.splice.apply(i,A),p+=A.length-3}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)qa(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else qa(e,t)}}function qa(e,t){if(1!=t.text.length||""!=t.text[0]||0!=We(t.from,t.to)){var n=Bo(e,t);Ha(e,t,n,e.cm?e.cm.curOp.id:NaN),ki(e,t,n,Nn(e,t));var r=[];pn(e,function(i,a){!a&&-1==Te(r,i.history)&&(el(i.history,t),r.push(i.history)),ki(i,t,null,Nn(i,t))})}}function ro(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!r||n){for(var a,i=e.history,f=e.sel,h="undo"==t?i.done:i.undone,p="undo"==t?i.undone:i.done,m=0;m<h.length&&(a=h[m],!(n?a.ranges&&!a.equals(e.sel):!a.ranges));m++);if(m!=h.length){for(i.lastOrigin=i.lastSelOrigin=null;;){if(!(a=h.pop()).ranges){if(r)return void h.push(a);break}if(Vi(a,p),n&&!a.equals(e.sel))return void fr(e,a,{clearRedo:!1});f=a}var A=[];Vi(f,p),p.push({changes:A,generation:i.generation}),i.generation=a.generation||++i.maxGeneration;for(var O=st(e,"beforeChange")||e.cm&&st(e.cm,"beforeChange"),q=function(be){var Le=a.changes[be];if(Le.origin=t,O&&!Qa(e,Le,!1))return h.length=0,{};A.push(Ho(e,Le));var Ie=be?Bo(e,Le):Ke(h);ki(e,Le,Ie,Wa(e,Le)),!be&&e.cm&&e.cm.scrollIntoView({from:Le.from,to:dn(Le)});var Re=[];pn(e,function(Ne,Pe){!Pe&&-1==Te(Re,Ne.history)&&(el(Ne.history,Le),Re.push(Ne.history)),ki(Ne,Le,null,Wa(Ne,Le))})},Y=a.changes.length-1;Y>=0;--Y){var ue=q(Y);if(ue)return ue.v}}}}function Xa(e,t){if(0!=t&&(e.first+=t,e.sel=new Dr(hr(e.sel.ranges,function(i){return new dt(ke(i.anchor.line+t,i.anchor.ch),ke(i.head.line+t,i.head.ch))}),e.sel.primIndex),e.cm)){br(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)fn(e.cm,r,"gutter")}}function ki(e,t,n,r){if(e.cm&&!e.cm.curOp)return Xt(e.cm,ki)(e,t,n,r);if(t.to.line<e.first)Xa(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Xa(e,i),t={from:ke(e.first,0),to:ke(t.to.line+i,t.to.ch),text:[Ke(t.text)],origin:t.origin}}var a=e.lastLine();t.to.line>a&&(t={from:t.from,to:ke(a,Ae(e,a).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Nt(e,t.from,t.to),n||(n=Bo(e,t)),e.cm?function(e,t,n){var r=e.doc,i=e.display,a=t.from,f=t.to,h=!1,p=a.line;e.options.lineWrapping||(p=Ze(Mr(Ae(r,a.line))),r.iter(p,f.line+1,function(Y){if(Y==i.maxLine)return h=!0,!0})),r.sel.contains(t.from,t.to)>-1&&rt(e),Po(r,t,n,va(e)),e.options.lineWrapping||(r.iter(p,a.line+t.text.length,function(Y){var ue=w(Y);ue>i.maxLineLength&&(i.maxLine=Y,i.maxLineLength=ue,i.maxLineChanged=!0,h=!1)}),h&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=Ae(e,r).stateAfter;if(i&&(!(i instanceof Bt)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(r,a.line),mi(e,400);var m=t.text.length-(f.line-a.line)-1;t.full?br(e):a.line!=f.line||1!=t.text.length||Na(e.doc,t)?br(e,a.line,f.line+1,m):fn(e,a.line,"text");var A=st(e,"changes"),O=st(e,"change");if(O||A){var q={from:a,to:f,text:t.text,removed:t.removed,origin:t.origin};O&&ut(e,"change",e,q),A&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(q)}e.display.selForContextMenu=null}(e.cm,t,r):Po(e,t,r),eo(e,n,ne),e.cantEdit&&to(e,ke(e.firstLine(),0))&&(e.cantEdit=!1)}}function Yn(e,t,n,r,i){var a;r||(r=n),We(r,n)<0&&(n=(a=[r,n])[0],r=a[1]),"string"==typeof t&&(t=e.splitLines(t)),jn(e,{from:n,to:r,text:t,origin:i})}function Va(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function $a(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i],f=!0;if(a.ranges){a.copied||((a=e[i]=a.deepCopy()).copied=!0);for(var h=0;h<a.ranges.length;h++)Va(a.ranges[h].anchor,t,n,r),Va(a.ranges[h].head,t,n,r)}else{for(var p=0;p<a.changes.length;++p){var m=a.changes[p];if(n<m.from.line)m.from=ke(m.from.line+r,m.from.ch),m.to=ke(m.to.line+r,m.to.ch);else if(t<=m.to.line){f=!1;break}}f||(e.splice(0,i+1),i=0)}}}function el(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;$a(e.done,n,r,i),$a(e.undone,n,r,i)}function bi(e,t,n,r){var i=t,a=t;return"number"==typeof t?a=Ae(e,Se(e,t)):i=Ze(t),null==i?null:(r(a,i)&&e.cm&&fn(e.cm,i,n),a)}function Ci(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function Si(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}dt.prototype.from=function(){return he(this.anchor,this.head)},dt.prototype.to=function(){return I(this.anchor,this.head)},dt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Ci.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,J(i),ut(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},Si.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var a=Math.min(t,i-e),f=r.height;if(r.removeInner(e,a),this.height-=f-r.height,i==a&&(this.children.splice(n--,1),r.parent=null),0==(t-=a))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Ci))){var h=[];this.collapse(h),this.children=[new Ci(h)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],a=i.chunkSize();if(e<=a){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var f=i.lines.length%25+25,h=f;h<i.lines.length;){var p=new Ci(i.lines.slice(h,h+=25));i.height-=p.height,this.children.splice(++r,0,p),p.parent=this}i.lines=i.lines.slice(0,f),this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var n=new Si(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=n.size,e.height-=n.height;var i=Te(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var r=new Si(e.children);r.parent=e,e.children=[r,n],e=r}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],a=i.chunkSize();if(e<a){var f=Math.min(t,a-e);if(i.iterN(e,f,n))return!0;if(0==(t-=f))break;e=0}else e-=a}}};var wi=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function tl(e,t,n){v(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Eo(e,n)}wi.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=Ze(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var a=fi(this);Ve(n,Math.max(0,n.height-a)),e&&(Tr(e,function(){tl(e,n,-a),fn(e,r,"widget")}),ut(e,"lineWidgetCleared",e,this,r))}},wi.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=fi(this)-t;!i||(c(this.doc,r)||Ve(r,r.height+i),n&&Tr(n,function(){n.curOp.forceUpdate=!0,tl(n,r,i),ut(n,"lineWidgetChanged",n,e,Ze(r))}))},Ft(wi);var rl=0,vn=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++rl};function Jn(e,t,n,r,i){if(r&&r.shared)return function(e,t,n,r,i){(r=je(r)).shared=!1;var a=[Jn(e,t,n,r,i)],f=a[0],h=r.widgetNode;return pn(e,function(p){h&&(r.widgetNode=h.cloneNode(!0)),a.push(Jn(p,Me(p,t),Me(p,n),r,i));for(var m=0;m<p.linked.length;++m)if(p.linked[m].isParent)return;f=Ke(a)}),new Li(a,f)}(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Xt(e.cm,Jn)(e,t,n,r,i);var a=new vn(e,i),f=We(t,n);if(r&&je(r,a,!1),f>0||0==f&&!1!==a.clearWhenEmpty)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=j("span",[a.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(ui(e,t.line,t,n,a)||t.line!=n.line&&ui(e,n.line,t,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");_r=!0}a.addToHistory&&Ha(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var m,h=t.line,p=e.cm;if(e.iter(h,n.line+1,function(O){p&&a.collapsed&&!p.options.lineWrapping&&Mr(O)==p.display.maxLine&&(m=!0),a.collapsed&&h!=t.line&&Ve(O,0),function(e,t,n){var r=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));r&&r.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],r&&r.add(e.markedSpans)),t.marker.attachLine(e)}(O,new xn(a,h==t.line?t.ch:null,h==n.line?n.ch:null),e.cm&&e.cm.curOp),++h}),a.collapsed&&e.iter(t.line,n.line+1,function(O){c(e,O)&&Ve(O,0)}),a.clearOnEnter&&Ue(a,"beforeCursorEnter",function(){return a.clear()}),a.readOnly&&(In=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++rl,a.atomic=!0),p){if(m&&(p.curOp.updateMaxLine=!0),a.collapsed)br(p,t.line,n.line+1);else if(a.className||a.startStyle||a.endStyle||a.css||a.attributes||a.title)for(var A=t.line;A<=n.line;A++)fn(p,A,"text");a.atomic&&Ga(p.doc),ut(p,"markerAdded",p,a)}return a}vn.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Mn(e),st(this,"clear")){var n=this.find();n&&ut(this,"clear",n.from,n.to)}for(var r=null,i=null,a=0;a<this.lines.length;++a){var f=this.lines[a],h=sn(f.markedSpans,this);e&&!this.collapsed?fn(e,Ze(f),"text"):e&&(null!=h.to&&(i=Ze(f)),null!=h.from&&(r=Ze(f))),f.markedSpans=Ri(f.markedSpans,h),null==h.from&&this.collapsed&&!c(this.doc,f)&&e&&Ve(f,_n(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var p=0;p<this.lines.length;++p){var m=Mr(this.lines[p]),A=w(m);A>e.display.maxLineLength&&(e.display.maxLine=m,e.display.maxLineLength=A,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&br(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Ga(e.doc)),e&&ut(e,"markerCleared",e,this,r,i),t&&En(e),this.parent&&this.parent.clear()}},vn.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,r,i=0;i<this.lines.length;++i){var a=this.lines[i],f=sn(a.markedSpans,this);if(null!=f.from&&(n=ke(t?a:Ze(a),f.from),-1==e))return n;if(null!=f.to&&(r=ke(t?a:Ze(a),f.to),1==e))return r}return n&&{from:n,to:r}},vn.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;!t||!r||Tr(r,function(){var i=t.line,a=Ze(t.line),f=mo(r,a);if(f&&(la(f),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!c(n.doc,i)&&null!=n.height){var h=n.height;n.height=null;var p=fi(n)-h;p&&Ve(i,i.height+p)}ut(r,"markerChanged",r,e)})},vn.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||-1==Te(t.maybeHiddenMarkers,this))&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},vn.prototype.detachLine=function(e){if(this.lines.splice(Te(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},Ft(vn);var Li=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function nl(e){return e.findMarks(ke(e.first,0),e.clipPos(ke(e.lastLine())),function(t){return t.parent})}function Cs(e){for(var t=function(r){var i=e[r],a=[i.primary.doc];pn(i.primary.doc,function(p){return a.push(p)});for(var f=0;f<i.markers.length;f++){var h=i.markers[f];-1==Te(a,h.doc)&&(h.parent=null,i.markers.splice(f--,1))}},n=0;n<e.length;n++)t(n)}Li.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ut(this,"clear")}},Li.prototype.find=function(e,t){return this.primary.find(e,t)},Ft(Li);var Ss=0,Cr=function(e,t,n,r,i){if(!(this instanceof Cr))return new Cr(e,t,n,r,i);null==n&&(n=0),Si.call(this,[new Ci([new E("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var a=ke(n,0);this.sel=hn(a),this.history=new Xi(null),this.id=++Ss,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Po(this,{from:a,to:a,text:e}),fr(this,hn(a),ne)};Cr.prototype=yt(Si.prototype,{constructor:Cr,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=zt(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Vt(function(e){var t=ke(this.first,0),n=this.first+this.size-1;jn(this,{from:t,to:ke(n,Ae(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&di(this.cm,0,0),fr(this,hn(t),ne)}),replaceRange:function(e,t,n,r){Yn(this,e,t=Me(this,t),n=n?Me(this,n):t,r)},getRange:function(e,t,n){var r=Nt(this,Me(this,e),Me(this,t));return!1===n?r:r.join(""===n?"":n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Mt(this,e))return Ae(this,e)},getLineNumber:function(e){return Ze(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Ae(this,e)),Mr(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Me(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Vt(function(e,t,n){za(this,Me(this,"number"==typeof e?ke(e,t||0):e),null,n)}),setSelection:Vt(function(e,t,n){za(this,Me(this,e),Me(this,t||e),n)}),extendSelection:Vt(function(e,t,n){$i(this,Me(this,e),t&&Me(this,t),n)}),extendSelections:Vt(function(e,t){Ua(this,ct(this,e),t)}),extendSelectionsBy:Vt(function(e,t){Ua(this,ct(this,hr(this.sel.ranges,e)),t)}),setSelections:Vt(function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new dt(Me(this,e[i].anchor),Me(this,e[i].head||e[i].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),fr(this,Ur(this.cm,r,t),n)}}),addSelection:Vt(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new dt(Me(this,e),Me(this,t||e))),fr(this,Ur(this.cm,r,r.length-1),n)}),getSelection:function(e){for(var n,t=this.sel.ranges,r=0;r<t.length;r++){var i=Nt(this,t[r].from(),t[r].to());n=n?n.concat(i):i}return!1===e?n:n.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=Nt(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Vt(function(e,t,n){for(var r=[],i=this.sel,a=0;a<i.ranges.length;a++){var f=i.ranges[a];r[a]={from:f.from(),to:f.to(),text:this.splitLines(e[a]),origin:n}}for(var h=t&&"end"!=t&&function(e,t,n){for(var r=[],i=ke(e.first,0),a=i,f=0;f<t.length;f++){var h=t[f],p=Ia(h.from,i,a),m=Ia(dn(h),i,a);if(i=h.to,a=m,"around"==n){var A=e.sel.ranges[f],O=We(A.head,A.anchor)<0;r[f]=new dt(O?m:p,O?p:m)}else r[f]=new dt(p,p)}return new Dr(r,e.sel.primIndex)}(this,r,t),p=r.length-1;p>=0;p--)jn(this,r[p]);h?Ka(this,h):this.cm&&zn(this.cm)}),undo:Vt(function(){ro(this,"undo")}),redo:Vt(function(){ro(this,"redo")}),undoSelection:Vt(function(){ro(this,"undo",!0)}),redoSelection:Vt(function(){ro(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new Xi(this.history),pn(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Zn(this.history.done),undone:Zn(this.history.undone)}},setHistory:function(e){var t=this.history=new Xi(this.history);t.done=Zn(e.done.slice(0),null,!0),t.undone=Zn(e.undone.slice(0),null,!0)},setGutterMarker:Vt(function(e,t,n){return bi(this,e,"gutter",function(r){var i=r.gutterMarkers||(r.gutterMarkers={});return i[t]=n,!n&&Dt(i)&&(r.gutterMarkers=null),!0})}),clearGutter:Vt(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&bi(t,n,"gutter",function(){return n.gutterMarkers[e]=null,Dt(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!(Mt(this,e)&&(t=e,e=Ae(this,e))))return null}else if(null==(t=Ze(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Vt(function(e,t,n){return bi(this,e,"gutter"==t?"gutter":"class",function(r){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(r[i]){if(C(n).test(r[i]))return!1;r[i]+=" "+n}else r[i]=n;return!0})}),removeLineClass:Vt(function(e,t,n){return bi(this,e,"gutter"==t?"gutter":"class",function(r){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",a=r[i];if(!a)return!1;if(null==n)r[i]=null;else{var f=a.match(C(n));if(!f)return!1;var h=f.index+f[0].length;r[i]=a.slice(0,f.index)+(f.index&&h!=a.length?" ":"")+a.slice(h)||null}return!0})}),addLineWidget:Vt(function(e,t,n){return function(e,t,n,r){var i=new wi(e,n,r),a=e.cm;return a&&i.noHScroll&&(a.display.alignWidgets=!0),bi(e,t,"widget",function(f){var h=f.widgets||(f.widgets=[]);if(null==i.insertAt?h.push(i):h.splice(Math.min(h.length,Math.max(0,i.insertAt)),0,i),i.line=f,a&&!c(e,f)){var p=v(f)<e.scrollTop;Ve(f,f.height+fi(i)),p&&Eo(a,i.height),a.curOp.forceUpdate=!0}return!0}),a&&ut(a,"lineWidgetAdded",a,i,"number"==typeof t?t:Ze(t)),i}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Jn(this,Me(this,e),Me(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Jn(this,e=Me(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=Ae(this,(e=Me(this,e)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=Me(this,e),t=Me(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(a){var f=a.markedSpans;if(f)for(var h=0;h<f.length;h++){var p=f[h];!(null!=p.to&&i==e.line&&e.ch>=p.to||null==p.from&&i!=e.line||null!=p.from&&i==t.line&&p.from>=t.ch)&&(!n||n(p.marker))&&r.push(p.marker.parent||p.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var a=i.text.length+r;if(a>e)return t=e,!0;e-=a,++n}),Me(this,ke(n,t))},indexFromPos:function(e){var t=(e=Me(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(r){t+=r.text.length+n}),t},copy:function(e){var t=new Cr(zt(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new Cr(zt(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),a=e.clipPos(i.from),f=e.clipPos(i.to);if(We(a,f)){var h=Jn(e,a,f,r.primary,r.primary.type);r.markers.push(h),h.parent=r}}}(r,nl(this)),r},unlinkDoc:function(e){if(e instanceof Et&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Cs(nl(this));break}if(e.history==this.history){var r=[e.id];pn(e,function(i){return r.push(i.id)},!0),e.history=new Xi(null),e.history.done=Zn(this.history.done,r),e.history.undone=Zn(this.history.undone,r)}},iterLinkedDocs:function(e){pn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Vr(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Vt(function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&function(e){Tr(e,function(){Ra(e),br(e)})}(this.cm))})}),Cr.prototype.eachLine=Cr.prototype.iter;var il=0;function ws(e){var t=this;if(ol(t),!$e(t,e)&&!rn(t.display,e)){vt(e),s&&(il=+new Date);var n=wn(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,a=Array(i),f=0,h=function(){++f==i&&Xt(t,function(){var Y={from:n=Me(t.doc,n),to:n,text:t.doc.splitLines(a.filter(function(ue){return null!=ue}).join(t.doc.lineSeparator())),origin:"paste"};jn(t.doc,Y),Ka(t.doc,hn(Me(t.doc,n),Me(t.doc,dn(Y))))})()},p=function(Y,ue){if(t.options.allowDropFileTypes&&-1==Te(t.options.allowDropFileTypes,Y.type))h();else{var be=new FileReader;be.onerror=function(){return h()},be.onload=function(){var Le=be.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Le)||(a[ue]=Le),h()},be.readAsText(Y)}},m=0;m<r.length;m++)p(r[m],m);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var A=e.dataTransfer.getData("Text");if(A){var O;if(t.state.draggingText&&!t.state.draggingText.copy&&(O=t.listSelections()),eo(t.doc,hn(n,n)),O)for(var q=0;q<O.length;++q)Yn(t.doc,"",O[q].anchor,O[q].head,"drag");t.replaceSelection(A,"around","paste"),t.display.input.focus()}}catch(Y){}}}}function ol(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function al(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<t.length;r++){var i=t[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation(function(){for(var a=0;a<n.length;a++)e(n[a])})}}var ll=!1;function As(){ll||(function(){var e;Ue(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,al(Es)},100))}),Ue(window,"blur",function(){return al(Un)})}(),ll=!0)}function Es(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var gn={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ti=0;Ti<10;Ti++)gn[Ti+48]=gn[Ti+96]=String(Ti);for(var no=65;no<=90;no++)gn[no]=String.fromCharCode(no);for(var Ai=1;Ai<=12;Ai++)gn[Ai+111]=gn[Ai+63235]="F"+Ai;var nn={};function Ds(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var n,r,i,a,f=0;f<t.length-1;f++){var h=t[f];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))n=!0;else if(/^(c|ctrl|control)$/i.test(h))r=!0;else{if(!/^s(hift)?$/i.test(h))throw new Error("Unrecognized modifier name: "+h);i=!0}}return n&&(e="Alt-"+e),r&&(e="Ctrl-"+e),a&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function Fs(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=hr(n.split(" "),Ds),a=0;a<i.length;a++){var f=void 0,h=void 0;a==i.length-1?(h=i.join(" "),f=r):(h=i.slice(0,a+1).join(" "),f="...");var p=t[h];if(p){if(p!=f)throw new Error("Inconsistent bindings for "+h)}else t[h]=f}delete e[n]}for(var m in t)e[m]=t[m];return e}function Qn(e,t,n,r){var i=(t=io(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Qn(e,t.fallthrough,n,r);for(var a=0;a<t.fallthrough.length;a++){var f=Qn(e,t.fallthrough[a],n,r);if(f)return f}}}function sl(e){var t="string"==typeof e?e:gn[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function ul(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(T?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(T?t.ctrlKey:t.metaKey)&&"Mod"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function fl(e,t){if(Q&&34==e.keyCode&&e.char)return!1;var n=gn[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),ul(n,e,t))}function io(e){return"string"==typeof e?nn[e]:e}function qn(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var a=t(n[i]);r.length&&We(a.from,Ke(r).to)<=0;){var f=r.pop();if(We(f.from,a.from)<0){a.from=f.from;break}}r.push(a)}Tr(e,function(){for(var h=r.length-1;h>=0;h--)Yn(e.doc,"",r[h].from,r[h].to,"+delete");zn(e)})}function Uo(e,t,n){var r=Kr(e.text,t+n,n);return r<0||r>e.text.length?null:r}function zo(e,t,n){var r=Uo(e,t.ch,n);return null==r?null:new ke(t.line,r,n<0?"after":"before")}function Ko(e,t,n,r,i){if(e){"rtl"==t.doc.direction&&(i=-i);var a=ft(n,t.doc.direction);if(a){var m,f=i<0?Ke(a):a[0],p=i<0==(1==f.level)?"after":"before";if(f.level>0||"rtl"==t.doc.direction){var A=Hn(t,n),O=Jr(t,A,m=i<0?n.text.length-1:0).top;m=Fr(function(q){return Jr(t,A,q).top==O},i<0==(1==f.level)?f.from:f.to-1,m),"before"==p&&(m=Uo(n,m,1))}else m=i<0?f.to:f.from;return new ke(r,m,p)}}return new ke(r,i<0?n.text.length:0,i<0?"before":"after")}nn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},nn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},nn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},nn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},nn.default=L?nn.macDefault:nn.pcDefault;var Mi={selectAll:Ja,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),ne)},killLine:function(e){return qn(e,function(t){if(t.empty()){var n=Ae(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:ke(t.head.line+1,0)}:{from:t.head,to:ke(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return qn(e,function(t){return{from:ke(t.from().line,0),to:Me(e.doc,ke(t.to().line+1,0))}})},delLineLeft:function(e){return qn(e,function(t){return{from:ke(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return qn(e,function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}})},delWrappedLineRight:function(e){return qn(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ke(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ke(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return cl(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return hl(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function(e,t){var n=Ae(e.doc,t),r=function(e){for(var t;t=Pn(e);)e=t.find(1,!0).line;return e}(n);return r!=n&&(t=Ze(r)),Ko(!0,e,n,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},Oe)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},Oe)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?hl(e,t.head):r},Oe)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var a=n[i].from(),f=D(e.getLine(a.line),a.ch,r);t.push(Qe(r-f%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Tr(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,a=Ae(e.doc,i.line).text;if(a)if(i.ch==a.length&&(i=new ke(i.line,i.ch-1)),i.ch>0)i=new ke(i.line,i.ch+1),e.replaceRange(a.charAt(i.ch-1)+a.charAt(i.ch-2),ke(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var f=Ae(e.doc,i.line-1).text;f&&(i=new ke(i.line,1),e.replaceRange(a.charAt(0)+e.doc.lineSeparator()+f.charAt(f.length-1),ke(i.line-1,f.length-1),i,"+transpose"))}n.push(new dt(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){return Tr(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);zn(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function cl(e,t){var n=Ae(e.doc,t),r=Mr(n);return r!=n&&(t=Ze(r)),Ko(!0,e,r,t,1)}function hl(e,t){var n=cl(e,t.line),r=Ae(e.doc,n.line),i=ft(r,e.doc.direction);if(!i||0==i[0].level){var a=Math.max(n.ch,r.text.search(/\S/));return ke(n.line,t.line==n.line&&t.ch<=a&&t.ch?0:a,n.sticky)}return n}function oo(e,t,n){if("string"==typeof t&&!(t=Mi[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=K}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}var Bs=new b;function Ei(e,t,n,r){var i=e.state.keySeq;if(i){if(sl(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Bs.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),dl(e,i+" "+t,n,r))return!0}return dl(e,t,n,r)}function dl(e,t,n,r){var i=function(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Qn(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Qn(t,e.options.extraKeys,n,e)||Qn(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&ut(e,"keyHandled",e,t,n),("handled"==i||"multi"==i)&&(vt(n),Lo(e)),!!i}function pl(e,t){var n=fl(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?Ei(e,"Shift-"+n,t,function(r){return oo(e,r,!0)})||Ei(e,n,t,function(r){if("string"==typeof r?/^go[A-Z]/.test(r):r.motion)return oo(e,r)}):Ei(e,n,t,function(r){return oo(e,r)}))}var Zo=null;function vl(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=le(),$e(t,e)))){s&&M<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=pl(t,e);Q&&(Zo=r?n:null,!r&&88==n&&!Gr&&(L?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),x&&!L&&!r&&46==n&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==n&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&function(e){var t=e.display.lineDiv;function n(r){(18==r.keyCode||!r.altKey)&&(P(t,"CodeMirror-crosshair"),Ut(document,"keyup",n),Ut(document,"mouseover",n))}fe(t,"CodeMirror-crosshair"),Ue(document,"keyup",n),Ue(document,"mouseover",n)}(t)}}function gl(e){16==e.keyCode&&(this.doc.sel.shift=!1),$e(this,e)}function ml(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||rn(t.display,e)||$e(t,e)||e.ctrlKey&&!e.altKey||L&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(Q&&n==Zo)return Zo=null,void vt(e);if(!Q||e.which&&!(e.which<10)||!pl(t,e)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(e,t,n){return Ei(e,"'"+n+"'",t,function(r){return oo(e,r,!0)})}(t,e,i)||t.display.input.onKeyPress(e))}}}var Di,Fi,Go=function(e,t,n){this.time=e,this.pos=t,this.button=n};function yl(e){var t=this,n=t.display;if(!($e(t,e)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=e.shiftKey,rn(n,e))return void(N||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100)));if(!jo(t,e)){var r=wn(t,e),i=an(e),a=r?function(e,t){var n=+new Date;return Fi&&Fi.compare(n,e,t)?(Di=Fi=null,"triple"):Di&&Di.compare(n,e,t)?(Fi=new Go(n,e,t),Di=null,"double"):(Di=new Go(n,e,t),Fi=null,"single")}(r,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),(!r||!function(e,t,n,r,i){var a="Click";return"double"==r?a="Double"+a:"triple"==r&&(a="Triple"+a),Ei(e,ul(a=(1==t?"Left":2==t?"Middle":"Right")+a,i),i,function(f){if("string"==typeof f&&(f=Mi[f]),!f)return!1;var h=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),h=f(e,n)!=K}finally{e.state.suppressEdits=!1}return h})}(t,i,r,a,e))&&(1==i?r?function(e,t,n,r){s?setTimeout(ze(xa,e),0):e.curOp.focus=le();var f,i=function(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};return null==i.unit&&(i.unit=(_?n.shiftKey&&n.metaKey:n.altKey)?"rectangle":"single"==t?"char":"double"==t?"word":"line"),(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=L?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(L?n.altKey:n.ctrlKey)),i}(e,n,r),a=e.doc.sel;e.options.dragDrop&&Rr&&!e.isReadOnly()&&"single"==n&&(f=a.contains(t))>-1&&(We((f=a.ranges[f]).from(),t)<0||t.xRel>0)&&(We(f.to(),t)>0||t.xRel<0)?function(e,t,n,r){var i=e.display,a=!1,f=Xt(e,function(m){N&&(i.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:To(e)),Ut(i.wrapper.ownerDocument,"mouseup",f),Ut(i.wrapper.ownerDocument,"mousemove",h),Ut(i.scroller,"dragstart",p),Ut(i.scroller,"drop",f),a||(vt(m),r.addNew||$i(e.doc,n,null,null,r.extend),N&&!z||s&&9==M?setTimeout(function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()},20):i.input.focus())}),h=function(m){a=a||Math.abs(t.clientX-m.clientX)+Math.abs(t.clientY-m.clientY)>=10},p=function(){return a=!0};N&&(i.scroller.draggable=!0),e.state.draggingText=f,f.copy=!r.moveOnDrag,Ue(i.wrapper.ownerDocument,"mouseup",f),Ue(i.wrapper.ownerDocument,"mousemove",h),Ue(i.scroller,"dragstart",p),Ue(i.scroller,"drop",f),e.state.delayingBlurEvent=!0,setTimeout(function(){return i.input.focus()},20),i.scroller.dragDrop&&i.scroller.dragDrop()}(e,r,t,i):function(e,t,n,r){s&&To(e);var i=e.display,a=e.doc;vt(t);var f,h,p=a.sel,m=p.ranges;if(r.addNew&&!r.extend?(h=a.sel.contains(n),f=h>-1?m[h]:new dt(n,n)):(f=a.sel.primary(),h=a.sel.primIndex),"rectangle"==r.unit)r.addNew||(f=new dt(n,n)),n=wn(e,t,!0,!0),h=-1;else{var A=xl(e,n,r.unit);f=r.extend?_o(f,A.anchor,A.head,r.extend):A}r.addNew?-1==h?(h=m.length,fr(a,Ur(e,m.concat([f]),h),{scroll:!1,origin:"*mouse"})):m.length>1&&m[h].empty()&&"char"==r.unit&&!r.extend?(fr(a,Ur(e,m.slice(0,h).concat(m.slice(h+1)),0),{scroll:!1,origin:"*mouse"}),p=a.sel):Wo(a,h,f,me):(h=0,fr(a,new Dr([f],0),me),p=a.sel);var O=n;function q(Ne){if(0!=We(O,Ne))if(O=Ne,"rectangle"==r.unit){for(var Pe=[],Ye=e.options.tabSize,Ge=D(Ae(a,n.line).text,n.ch,Ye),it=D(Ae(a,Ne.line).text,Ne.ch,Ye),Ct=Math.min(Ge,it),$t=Math.max(Ge,it),Ot=Math.min(n.line,Ne.line),Ar=Math.min(e.lastLine(),Math.max(n.line,Ne.line));Ot<=Ar;Ot++){var Sr=Ae(a,Ot).text,Kt=tt(Sr,Ct,Ye);Ct==$t?Pe.push(new dt(ke(Ot,Kt),ke(Ot,Kt))):Sr.length>Kt&&Pe.push(new dt(ke(Ot,Kt),ke(Ot,tt(Sr,$t,Ye))))}Pe.length||Pe.push(new dt(n,n)),fr(a,Ur(e,p.ranges.slice(0,h).concat(Pe),h),{origin:"*mouse",scroll:!1}),e.scrollIntoView(Ne)}else{var Zt,wr=f,rr=xl(e,Ne,r.unit),jt=wr.anchor;We(rr.anchor,jt)>0?(Zt=rr.head,jt=he(wr.from(),rr.anchor)):(Zt=rr.anchor,jt=I(wr.to(),rr.head));var Pt=p.ranges.slice(0);Pt[h]=function(e,t){var n=t.anchor,r=t.head,i=Ae(e.doc,n.line);if(0==We(n,r)&&n.sticky==r.sticky)return t;var a=ft(i);if(!a)return t;var f=Or(a,n.ch,n.sticky),h=a[f];if(h.from!=n.ch&&h.to!=n.ch)return t;var m,p=f+(h.from==n.ch==(1!=h.level)?0:1);if(0==p||p==a.length)return t;if(r.line!=n.line)m=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var A=Or(a,r.ch,r.sticky),O=A-f||(r.ch-n.ch)*(1==h.level?-1:1);m=A==p-1||A==p?O<0:O>0}var q=a[p+(m?-1:0)],Y=m==(1==q.level),ue=Y?q.from:q.to,be=Y?"after":"before";return n.ch==ue&&n.sticky==be?t:new dt(new ke(n.line,ue,be),r)}(e,new dt(Me(a,jt),Zt)),fr(a,Ur(e,Pt,h),me)}}var Y=i.wrapper.getBoundingClientRect(),ue=0;function be(Ne){var Pe=++ue,Ye=wn(e,Ne,!0,"rectangle"==r.unit);if(Ye)if(0!=We(Ye,O)){e.curOp.focus=le(),q(Ye);var Ge=Yi(i,a);(Ye.line>=Ge.to||Ye.line<Ge.from)&&setTimeout(Xt(e,function(){ue==Pe&&be(Ne)}),150)}else{var it=Ne.clientY<Y.top?-20:Ne.clientY>Y.bottom?20:0;it&&setTimeout(Xt(e,function(){ue==Pe&&(i.scroller.scrollTop+=it,be(Ne))}),50)}}function Le(Ne){e.state.selectingText=!1,ue=1/0,Ne&&(vt(Ne),i.input.focus()),Ut(i.wrapper.ownerDocument,"mousemove",Ie),Ut(i.wrapper.ownerDocument,"mouseup",Re),a.history.lastSelOrigin=null}var Ie=Xt(e,function(Ne){0!==Ne.buttons&&an(Ne)?be(Ne):Le(Ne)}),Re=Xt(e,Le);e.state.selectingText=Re,Ue(i.wrapper.ownerDocument,"mousemove",Ie),Ue(i.wrapper.ownerDocument,"mouseup",Re)}(e,r,t,i)}(t,r,a,e):or(e)==n.scroller&&vt(e):2==i?(r&&$i(t.doc,r),setTimeout(function(){return n.input.focus()},20)):3==i&&(R?t.display.input.onContextMenu(e):To(t)))}}}function xl(e,t,n){if("char"==n)return new dt(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new dt(ke(t.line,0),Me(e.doc,ke(t.line+1,0)));var r=n(e,t);return new dt(r.from,r.to)}function kl(e,t,n,r){var i,a;if(t.touches)i=t.touches[0].clientX,a=t.touches[0].clientY;else try{i=t.clientX,a=t.clientY}catch(q){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&vt(t);var f=e.display,h=f.lineDiv.getBoundingClientRect();if(a>h.bottom||!st(e,n))return wt(t);a-=h.top-f.viewOffset;for(var p=0;p<e.display.gutterSpecs.length;++p){var m=f.gutters.childNodes[p];if(m&&m.getBoundingClientRect().right>=i)return xt(e,n,e,kt(e.doc,a),e.display.gutterSpecs[p].className,t),wt(t)}}function jo(e,t){return kl(e,t,"gutterClick",!0)}function bl(e,t){rn(e.display,t)||function(e,t){return!!st(e,"gutterContextMenu")&&kl(e,t,"gutterContextMenu",!1)}(e,t)||$e(e,t,"contextmenu")||R||e.display.input.onContextMenu(t)}function Cl(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ci(e)}Go.prototype.compare=function(e,t,n){return this.time+400>e&&0==We(t,this.pos)&&n==this.button};var Xn={toString:function(){return"CodeMirror.Init"}},Sl={},ao={};function Js(e,t,n){if(!t!=!(n&&n!=Xn)){var i=e.display.dragFunctions,a=t?Ue:Ut;a(e.display.scroller,"dragstart",i.start),a(e.display.scroller,"dragenter",i.enter),a(e.display.scroller,"dragover",i.over),a(e.display.scroller,"dragleave",i.leave),a(e.display.scroller,"drop",i.drop)}}function Qs(e){e.options.lineWrapping?(fe(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(P(e.display.wrapper,"CodeMirror-wrap"),F(e)),wo(e),br(e),ci(e),setTimeout(function(){return Kn(e)},100)}function Et(e,t){var n=this;if(!(this instanceof Et))return new Et(e,t);this.options=t=t?je(t):{},je(Sl,t,!1);var r=t.value;"string"==typeof r?r=new Cr(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var i=new Et.inputStyles[t.inputStyle](this),a=this.display=new ss(e,r,i,t);for(var f in a.wrapper.CodeMirror=this,Cl(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),La(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new b,keySeq:null,specialChars:null},t.autofocus&&!re&&a.input.focus(),s&&M<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function(e){var t=e.display;Ue(t.scroller,"mousedown",Xt(e,yl)),Ue(t.scroller,"dblclick",s&&M<11?Xt(e,function(p){if(!$e(e,p)){var m=wn(e,p);if(m&&!jo(e,p)&&!rn(e.display,p)){vt(p);var A=e.findWordAt(m);$i(e.doc,A.anchor,A.head)}}}):function(p){return $e(e,p)||vt(p)}),Ue(t.scroller,"contextmenu",function(p){return bl(e,p)}),Ue(t.input.getField(),"contextmenu",function(p){t.scroller.contains(p.target)||bl(e,p)});var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),(r=t.activeTouch).end=+new Date)}function a(p){if(1!=p.touches.length)return!1;var m=p.touches[0];return m.radiusX<=1&&m.radiusY<=1}function f(p,m){if(null==m.left)return!0;var A=m.left-p.left,O=m.top-p.top;return A*A+O*O>400}Ue(t.scroller,"touchstart",function(p){if(!$e(e,p)&&!a(p)&&!jo(e,p)){t.input.ensurePolled(),clearTimeout(n);var m=+new Date;t.activeTouch={start:m,moved:!1,prev:m-r.end<=300?r:null},1==p.touches.length&&(t.activeTouch.left=p.touches[0].pageX,t.activeTouch.top=p.touches[0].pageY)}}),Ue(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),Ue(t.scroller,"touchend",function(p){var m=t.activeTouch;if(m&&!rn(t,p)&&null!=m.left&&!m.moved&&new Date-m.start<300){var O,A=e.coordsChar(t.activeTouch,"page");O=!m.prev||f(m,m.prev)?new dt(A,A):!m.prev.prev||f(m,m.prev.prev)?e.findWordAt(A):new dt(ke(A.line,0),Me(e.doc,ke(A.line+1,0))),e.setSelection(O.anchor,O.head),e.focus(),vt(p)}i()}),Ue(t.scroller,"touchcancel",i),Ue(t.scroller,"scroll",function(){t.scroller.clientHeight&&(pi(e,t.scroller.scrollTop),Tn(e,t.scroller.scrollLeft,!0),xt(e,"scroll",e))}),Ue(t.scroller,"mousewheel",function(p){return Fa(e,p)}),Ue(t.scroller,"DOMMouseScroll",function(p){return Fa(e,p)}),Ue(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(p){$e(e,p)||xr(p)},over:function(p){$e(e,p)||(function(e,t){var n=wn(e,t);if(n){var r=document.createDocumentFragment();ya(e,n,r),e.display.dragCursor||(e.display.dragCursor=$("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),Z(e.display.dragCursor,r)}}(e,p),xr(p))},start:function(p){return function(e,t){if(s&&(!e.state.draggingText||+new Date-il<100))xr(t);else if(!$e(e,t)&&!rn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!z)){var n=$("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Q&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),Q&&n.parentNode.removeChild(n)}}(e,p)},drop:Xt(e,ws),leave:function(p){$e(e,p)||ol(e)}};var h=t.input.getField();Ue(h,"keyup",function(p){return gl.call(e,p)}),Ue(h,"keydown",Xt(e,vl)),Ue(h,"keypress",Xt(e,ml)),Ue(h,"focus",function(p){return Ao(e,p)}),Ue(h,"blur",function(p){return Un(e,p)})}(this),As(),Mn(this),this.curOp.forceUpdate=!0,Ba(this,r),t.autofocus&&!re||this.hasFocus()?setTimeout(function(){n.hasFocus()&&!n.state.focused&&Ao(n)},20):Un(this),ao)ao.hasOwnProperty(f)&&ao[f](this,t[f],Xn);Ma(this),t.finishInit&&t.finishInit(this);for(var h=0;h<Yo.length;++h)Yo[h](this);En(this),N&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}Et.defaults=Sl,Et.optionHandlers=ao;var Yo=[];function Oi(e,t,n,r){var a,i=e.doc;null==n&&(n="add"),"smart"==n&&(i.mode.indent?a=ht(e,t).state:n="prev");var f=e.options.tabSize,h=Ae(i,t),p=D(h.text,null,f);h.stateAfter&&(h.stateAfter=null);var A,m=h.text.match(/^\s*/)[0];if(r||/\S/.test(h.text)){if("smart"==n&&((A=i.mode.indent(a,h.text.slice(m.length),h.text))==K||A>150)){if(!r)return;n="prev"}}else A=0,n="not";"prev"==n?A=t>i.first?D(Ae(i,t-1).text,null,f):0:"add"==n?A=p+e.options.indentUnit:"subtract"==n?A=p-e.options.indentUnit:"number"==typeof n&&(A=p+n),A=Math.max(0,A);var O="",q=0;if(e.options.indentWithTabs)for(var Y=Math.floor(A/f);Y;--Y)q+=f,O+="\t";if(q<A&&(O+=Qe(A-q)),O!=m)return Yn(i,O,ke(t,0),ke(t,m.length),"+input"),h.stateAfter=null,!0;for(var ue=0;ue<i.sel.ranges.length;ue++){var be=i.sel.ranges[ue];if(be.head.line==t&&be.head.ch<m.length){var Le=ke(t,m.length);Wo(i,ue,new dt(Le,Le));break}}}Et.defineInitHook=function(e){return Yo.push(e)};var zr=null;function lo(e){zr=e}function Jo(e,t,n,r,i){var a=e.doc;e.display.shift=!1,r||(r=a.sel);var f=+new Date-200,h="paste"==i||e.state.pasteIncoming>f,p=Vr(t),m=null;if(h&&r.ranges.length>1)if(zr&&zr.text.join("\n")==t){if(r.ranges.length%zr.text.length==0){m=[];for(var A=0;A<zr.text.length;A++)m.push(a.splitLines(zr.text[A]))}}else p.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(m=hr(p,function(Ie){return[Ie]}));for(var O=e.curOp.updateInput,q=r.ranges.length-1;q>=0;q--){var Y=r.ranges[q],ue=Y.from(),be=Y.to();Y.empty()&&(n&&n>0?ue=ke(ue.line,ue.ch-n):e.state.overwrite&&!h?be=ke(be.line,Math.min(Ae(a,be.line).text.length,be.ch+Ke(p).length)):h&&zr&&zr.lineWise&&zr.text.join("\n")==p.join("\n")&&(ue=be=ke(ue.line,0)));var Le={from:ue,to:be,text:m?m[q%m.length]:p,origin:i||(h?"paste":e.state.cutIncoming>f?"cut":"+input")};jn(e.doc,Le),ut(e,"inputRead",e,Le)}t&&!h&&Ll(e,t),zn(e),e.curOp.updateInput<2&&(e.curOp.updateInput=O),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function wl(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&Tr(t,function(){return Jo(t,n,0,null,"paste")}),!0}function Ll(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var a=e.getModeAt(i.head),f=!1;if(a.electricChars){for(var h=0;h<a.electricChars.length;h++)if(t.indexOf(a.electricChars.charAt(h))>-1){f=Oi(e,i.head.line,"smart");break}}else a.electricInput&&a.electricInput.test(Ae(e.doc,i.head.line).text.slice(0,i.head.ch))&&(f=Oi(e,i.head.line,"smart"));f&&ut(e,"electricInput",e,i.head.line)}}}function Tl(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,a={anchor:ke(i,0),head:ke(i+1,0)};n.push(a),t.push(e.getRange(a.anchor,a.head))}return{text:t,ranges:n}}function Al(e,t,n,r){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",r?"":"off"),e.setAttribute("spellcheck",!!t)}function Ml(){var e=$("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=$("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return N?e.style.width="1000px":e.setAttribute("wrap","off"),Fe&&(e.style.border="1px solid black"),Al(e),t}function Qo(e,t,n,r,i){var a=t,f=n,h=Ae(e,t.line),p=i&&"rtl"==e.direction?-n:n;function A(Re){var Ne;if("codepoint"==r){var Pe=h.text.charCodeAt(t.ch+(n>0?0:-1));Ne=isNaN(Pe)?null:new ke(t.line,Math.max(0,Math.min(h.text.length,t.ch+n*((n>0?Pe>=55296&&Pe<56320:Pe>=56320&&Pe<57343)?2:1))),-n)}else Ne=i?function(e,t,n,r){var i=ft(t,e.doc.direction);if(!i)return zo(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var a=Or(i,n.ch,n.sticky),f=i[a];if("ltr"==e.doc.direction&&f.level%2==0&&(r>0?f.to>n.ch:f.from<n.ch))return zo(t,n,r);var p,h=function(Ie,Re){return Uo(t,Ie instanceof ke?Ie.ch:Ie,Re)},m=function(Ie){return e.options.lineWrapping?(p=p||Hn(e,t),pa(e,t,p,Ie)):{begin:0,end:t.text.length}},A=m("before"==n.sticky?h(n,-1):n.ch);if("rtl"==e.doc.direction||1==f.level){var O=1==f.level==r<0,q=h(n,O?1:-1);if(null!=q&&(O?q<=f.to&&q<=A.end:q>=f.from&&q>=A.begin))return new ke(n.line,q,O?"before":"after")}var ue=function(Ie,Re,Ne){for(;Ie>=0&&Ie<i.length;Ie+=Re){var Ye=i[Ie],Ge=Re>0==(1!=Ye.level),it=Ge?Ne.begin:h(Ne.end,-1);if(Ye.from<=it&&it<Ye.to||(it=Ge?Ye.from:h(Ye.to,-1),Ne.begin<=it&&it<Ne.end))return Ct=it,Ge?new ke(n.line,h(Ct,1),"before"):new ke(n.line,Ct,"after")}var Ct},be=ue(a+r,r,A);if(be)return be;var Le=r>0?A.end:h(A.begin,-1);return null==Le||r>0&&Le==t.text.length||!(be=ue(r>0?0:i.length-1,r,m(Le)))?null:be}(e.cm,h,t,n):zo(h,t,n);if(null==Ne){if(Re||!function(){var Re=t.line+p;return!(Re<e.first||Re>=e.first+e.size)&&(t=new ke(Re,t.ch,t.sticky),h=Ae(e,Re))}())return!1;t=Ko(i,e.cm,h,t.line,p)}else t=Ne;return!0}if("char"==r||"codepoint"==r)A();else if("column"==r)A(!0);else if("word"==r||"group"==r)for(var O=null,q="group"==r,Y=e.cm&&e.cm.getHelper(t,"wordChars"),ue=!0;!(n<0)||A(!ue);ue=!1){var be=h.text.charAt(t.ch)||"\n",Le=tr(be,Y)?"w":q&&"\n"==be?"n":!q||/\s/.test(be)?null:"p";if(q&&!ue&&!Le&&(Le="s"),O&&O!=Le){n<0&&(n=1,A(),t.sticky="after");break}if(Le&&(O=Le),n>0&&!A(!ue))break}var Ie=to(e,t,a,f,!0);return sr(a,Ie)&&(Ie.hitSide=!0),Ie}function El(e,t,n,r){var f,m,i=e.doc,a=t.left;if("page"==r){var h=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),p=Math.max(h-.5*_n(e.display),3);f=(n>0?t.bottom:t.top)+n*p}else"line"==r&&(f=n>0?t.bottom+3:t.top-3);for(;(m=ko(e,a,f)).outside;){if(n<0?f<=0:f>=i.height){m.hitSide=!0;break}f+=5*n}return m}var mt=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new b,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Dl(e,t){var n=mo(e,t.line);if(!n||n.hidden)return null;var r=Ae(e.doc,t.line),i=na(n,r,t.line),a=ft(r,e.doc.direction),f="left";a&&(f=Or(a,t.ch)%2?"right":"left");var p=aa(i.map,t.ch,f);return p.offset="right"==p.collapse?p.end:p.start,p}function Vn(e,t){return t&&(e.bad=!0),e}function so(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return Vn(e.clipPos(ke(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var a=e.display.view[i];if(a.node==r)return eu(a,t,n)}}function eu(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!y(r,t))return Vn(ke(Ze(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var a=e.rest?Ke(e.rest):e.line;return Vn(ke(Ze(a),a.text.length),i)}var f=3==t.nodeType?t:null,h=t;for(!f&&1==t.childNodes.length&&3==t.firstChild.nodeType&&(f=t.firstChild,n&&(n=f.nodeValue.length));h.parentNode!=r;)h=h.parentNode;var p=e.measure,m=p.maps;function A(Le,Ie,Re){for(var Ne=-1;Ne<(m?m.length:0);Ne++)for(var Pe=Ne<0?p.map:m[Ne],Ye=0;Ye<Pe.length;Ye+=3){var Ge=Pe[Ye+2];if(Ge==Le||Ge==Ie){var it=Ze(Ne<0?e.line:e.rest[Ne]),Ct=Pe[Ye]+Re;return(Re<0||Ge!=Le)&&(Ct=Pe[Ye+(Re?1:0)]),ke(it,Ct)}}}var O=A(f,h,n);if(O)return Vn(O,i);for(var q=h.nextSibling,Y=f?f.nodeValue.length-n:0;q;q=q.nextSibling){if(O=A(q,q.firstChild,0))return Vn(ke(O.line,O.ch-Y),i);Y+=q.textContent.length}for(var ue=h.previousSibling,be=n;ue;ue=ue.previousSibling){if(O=A(ue,ue.firstChild,-1))return Vn(ke(O.line,O.ch+be),i);be+=ue.textContent.length}}mt.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;function a(h){for(var p=h.target;p;p=p.parentNode){if(p==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(p.className))break}return!1}function f(h){if(a(h)&&!$e(r,h)){if(r.somethingSelected())lo({lineWise:!1,text:r.getSelections()}),"cut"==h.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var p=Tl(r);lo({lineWise:!0,text:p.text}),"cut"==h.type&&r.operation(function(){r.setSelections(p.ranges,0,ne),r.replaceSelection("",null,"cut")})}if(h.clipboardData){h.clipboardData.clearData();var m=zr.text.join("\n");if(h.clipboardData.setData("Text",m),h.clipboardData.getData("Text")==m)return void h.preventDefault()}var A=Ml(),O=A.firstChild;r.display.lineSpace.insertBefore(A,r.display.lineSpace.firstChild),O.value=zr.text.join("\n");var q=le();He(O),setTimeout(function(){r.display.lineSpace.removeChild(A),q.focus(),q==i&&n.showPrimarySelection()},50)}}i.contentEditable=!0,Al(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize),Ue(i,"paste",function(h){!a(h)||$e(r,h)||wl(h,r)||M<=11&&setTimeout(Xt(r,function(){return t.updateFromDOM()}),20)}),Ue(i,"compositionstart",function(h){t.composing={data:h.data,done:!1}}),Ue(i,"compositionupdate",function(h){t.composing||(t.composing={data:h.data,done:!1})}),Ue(i,"compositionend",function(h){t.composing&&(h.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),Ue(i,"touchstart",function(){return n.forceCompositionEnd()}),Ue(i,"input",function(){t.composing||t.readFromDOMSoon()}),Ue(i,"copy",f),Ue(i,"cut",f)},mt.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},mt.prototype.prepareSelection=function(){var e=ma(this.cm,!1);return e.focus=le()==this.div,e},mt.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},mt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},mt.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),r=n.from(),i=n.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||i.line<t.display.viewFrom)e.removeAllRanges();else{var a=so(t,e.anchorNode,e.anchorOffset),f=so(t,e.focusNode,e.focusOffset);if(!a||a.bad||!f||f.bad||0!=We(he(a,f),r)||0!=We(I(a,f),i)){var h=t.display.view,p=r.line>=t.display.viewFrom&&Dl(t,r)||{node:h[0].measure.map[2],offset:0},m=i.line<t.display.viewTo&&Dl(t,i);if(!m){var A=h[h.length-1].measure,O=A.maps?A.maps[A.maps.length-1]:A.map;m={node:O[O.length-1],offset:O[O.length-2]-O[O.length-3]}}if(!p||!m)return void e.removeAllRanges();var Y,q=e.rangeCount&&e.getRangeAt(0);try{Y=pe(p.node,p.offset,m.offset,m.node)}catch(ue){}Y&&(!x&&t.state.focused?(e.collapse(p.node,p.offset),Y.collapsed||(e.removeAllRanges(),e.addRange(Y))):(e.removeAllRanges(),e.addRange(Y)),q&&null==e.anchorNode?e.addRange(q):x&&this.startGracePeriod()),this.rememberSelection()}}},mt.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},mt.prototype.showMultipleSelections=function(e){Z(this.cm.display.cursorDiv,e.cursors),Z(this.cm.display.selectionDiv,e.selection)},mt.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},mt.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return y(this.div,t)},mt.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||le()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},mt.prototype.blur=function(){this.div.blur()},mt.prototype.getField=function(){return this.div},mt.prototype.supportsTouch=function(){return!0},mt.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):Tr(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function n(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,n))})},mt.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},mt.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(ee&&X&&this.cm.display.gutterSpecs.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=so(t,e.anchorNode,e.anchorOffset),r=so(t,e.focusNode,e.focusOffset);n&&r&&Tr(t,function(){fr(t.doc,hn(n,r),ne),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},mt.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a,f,h,e=this.cm,t=e.display,n=e.doc.sel.primary(),r=n.from(),i=n.to();if(0==r.ch&&r.line>e.firstLine()&&(r=ke(r.line-1,Ae(e.doc,r.line-1).length)),i.ch==Ae(e.doc,i.line).text.length&&i.line<e.lastLine()&&(i=ke(i.line+1,0)),r.line<t.viewFrom||i.line>t.viewTo-1)return!1;r.line==t.viewFrom||0==(a=Ln(e,r.line))?(f=Ze(t.view[0].line),h=t.view[0].node):(f=Ze(t.view[a].line),h=t.view[a-1].node.nextSibling);var m,A,p=Ln(e,i.line);if(p==t.view.length-1?(m=t.viewTo-1,A=t.lineDiv.lastChild):(m=Ze(t.view[p+1].line)-1,A=t.view[p+1].node.previousSibling),!h)return!1;for(var O=e.doc.splitLines(function(e,t,n,r,i){var a="",f=!1,h=e.doc.lineSeparator(),p=!1;function A(){f&&(a+=h,p&&(a+=h),f=p=!1)}function O(Y){Y&&(A(),a+=Y)}function q(Y){if(1==Y.nodeType){var ue=Y.getAttribute("cm-text");if(ue)return void O(ue);var Le,be=Y.getAttribute("cm-marker");if(be){var Ie=e.findMarks(ke(r,0),ke(i+1,0),function(Y){return function(ue){return ue.id==Y}}(+be));return void(Ie.length&&(Le=Ie[0].find(0))&&O(Nt(e.doc,Le.from,Le.to).join(h)))}if("false"==Y.getAttribute("contenteditable"))return;var Re=/^(pre|div|p|li|table|br)$/i.test(Y.nodeName);if(!/^br$/i.test(Y.nodeName)&&0==Y.textContent.length)return;Re&&A();for(var Ne=0;Ne<Y.childNodes.length;Ne++)q(Y.childNodes[Ne]);/^(pre|p)$/i.test(Y.nodeName)&&(p=!0),Re&&(f=!0)}else 3==Y.nodeType&&O(Y.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;q(t),t!=n;)t=t.nextSibling,p=!1;return a}(e,h,A,f,m)),q=Nt(e.doc,ke(f,0),ke(m,Ae(e.doc,m).text.length));O.length>1&&q.length>1;)if(Ke(O)==Ke(q))O.pop(),q.pop(),m--;else{if(O[0]!=q[0])break;O.shift(),q.shift(),f++}for(var Y=0,ue=0,be=O[0],Le=q[0],Ie=Math.min(be.length,Le.length);Y<Ie&&be.charCodeAt(Y)==Le.charCodeAt(Y);)++Y;for(var Re=Ke(O),Ne=Ke(q),Pe=Math.min(Re.length-(1==O.length?Y:0),Ne.length-(1==q.length?Y:0));ue<Pe&&Re.charCodeAt(Re.length-ue-1)==Ne.charCodeAt(Ne.length-ue-1);)++ue;if(1==O.length&&1==q.length&&f==r.line)for(;Y&&Y>r.ch&&Re.charCodeAt(Re.length-ue-1)==Ne.charCodeAt(Ne.length-ue-1);)Y--,ue++;O[O.length-1]=Re.slice(0,Re.length-ue).replace(/^\u200b+/,""),O[0]=O[0].slice(Y).replace(/\u200b+$/,"");var Ye=ke(f,Y),Ge=ke(m,q.length?Ke(q).length-ue:0);return O.length>1||O[0]||We(Ye,Ge)?(Yn(e.doc,O,Ye,Ge,"+input"),!0):void 0},mt.prototype.ensurePolled=function(){this.forceCompositionEnd()},mt.prototype.reset=function(){this.forceCompositionEnd()},mt.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},mt.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},mt.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&Tr(this.cm,function(){return br(e.cm)})},mt.prototype.setUneditable=function(e){e.contentEditable="false"},mt.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Xt(this.cm,Jo)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},mt.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},mt.prototype.onContextMenu=function(){},mt.prototype.resetPosition=function(){},mt.prototype.needsContentAttribute=!0;var Wt=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new b,this.hasSelection=!1,this.composing=null};Wt.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var i=this.textarea;function a(f){if(!$e(r,f)){if(r.somethingSelected())lo({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var h=Tl(r);lo({lineWise:!0,text:h.text}),"cut"==f.type?r.setSelections(h.ranges,null,ne):(n.prevInput="",i.value=h.text.join("\n"),He(i))}"cut"==f.type&&(r.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),Fe&&(i.style.width="0px"),Ue(i,"input",function(){s&&M>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),Ue(i,"paste",function(f){$e(r,f)||wl(f,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())}),Ue(i,"cut",a),Ue(i,"copy",a),Ue(e.scroller,"paste",function(f){if(!rn(e,f)&&!$e(r,f)){if(!i.dispatchEvent)return r.state.pasteIncoming=+new Date,void n.focus();var h=new Event("paste");h.clipboardData=f.clipboardData,i.dispatchEvent(h)}}),Ue(e.lineSpace,"selectstart",function(f){rn(e,f)||vt(f)}),Ue(i,"compositionstart",function(){var f=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:f,range:r.markText(f,r.getCursor("to"),{className:"CodeMirror-composing"})}}),Ue(i,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},Wt.prototype.createField=function(e){this.wrapper=Ml(),this.textarea=this.wrapper.firstChild},Wt.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Wt.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=ma(e);if(e.options.moveInputWithCursor){var i=Wr(e,n.sel.primary().head,"div"),a=t.wrapper.getBoundingClientRect(),f=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+f.top-a.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+f.left-a.left))}return r},Wt.prototype.showSelection=function(e){var n=this.cm.display;Z(n.cursorDiv,e.cursors),Z(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Wt.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&He(this.textarea),s&&M>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",s&&M>=9&&(this.hasSelection=null))}},Wt.prototype.getField=function(){return this.textarea},Wt.prototype.supportsTouch=function(){return!1},Wt.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!re||le()!=this.textarea))try{this.textarea.focus()}catch(e){}},Wt.prototype.blur=function(){this.textarea.blur()},Wt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Wt.prototype.receivedFocus=function(){this.slowPoll()},Wt.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Wt.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))})},Wt.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||Qt(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(s&&M>=9&&this.hasSelection===i||L&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var a=i.charCodeAt(0);if(8203==a&&!r&&(r="\u200b"),8666==a)return this.reset(),this.cm.execCommand("undo")}for(var f=0,h=Math.min(r.length,i.length);f<h&&r.charCodeAt(f)==i.charCodeAt(f);)++f;return Tr(t,function(){Jo(t,i.slice(f),r.length-f,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Wt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Wt.prototype.onKeyPress=function(){s&&M>=9&&(this.hasSelection=null),this.fastPoll()},Wt.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var a=wn(n,e),f=r.scroller.scrollTop;if(a&&!Q){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(a)&&Xt(n,fr)(n.doc,hn(a),ne);var O,p=i.style.cssText,m=t.wrapper.style.cssText,A=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-A.top-5)+"px; left: "+(e.clientX-A.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",N&&(O=window.scrollY),r.input.focus(),N&&window.scrollTo(null,O),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=Y,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),s&&M>=9&&q(),R){xr(e);var ue=function(){Ut(window,"mouseup",ue),setTimeout(Y,20)};Ue(window,"mouseup",ue)}else setTimeout(Y,50)}function q(){if(null!=i.selectionStart){var be=n.somethingSelected(),Le="\u200b"+(be?i.value:"");i.value="\u21da",i.value=Le,t.prevInput=be?"":"\u200b",i.selectionStart=1,i.selectionEnd=Le.length,r.selForContextMenu=n.doc.sel}}function Y(){if(t.contextMenuPending==Y&&(t.contextMenuPending=!1,t.wrapper.style.cssText=m,i.style.cssText=p,s&&M<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=f),null!=i.selectionStart)){(!s||s&&M<9)&&q();var be=0,Le=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"\u200b"==t.prevInput?Xt(n,Ja)(n):be++<10?r.detectingSelectAll=setTimeout(Le,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(Le,200)}}},Wt.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},Wt.prototype.setUneditable=function(){},Wt.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(r,i,a,f){e.defaults[r]=i,a&&(t[r]=f?function(h,p,m){m!=Xn&&a(h,p,m)}:a)}e.defineOption=n,e.Init=Xn,n("value","",function(r,i){return r.setValue(i)},!0),n("mode",null,function(r,i){r.doc.modeOption=i,Ro(r)},!0),n("indentUnit",2,Ro,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(r){xi(r),ci(r),br(r)},!0),n("lineSeparator",null,function(r,i){if(r.doc.lineSep=i,i){var a=[],f=r.doc.first;r.doc.iter(function(p){for(var m=0;;){var A=p.text.indexOf(i,m);if(-1==A)break;m=A+i.length,a.push(ke(f,A))}f++});for(var h=a.length-1;h>=0;h--)Yn(r.doc,i,a[h],ke(a[h].line,a[h].ch+i.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(r,i,a){r.state.specialChars=new RegExp(i.source+(i.test("\t")?"":"|\t"),"g"),a!=Xn&&r.refresh()}),n("specialCharPlaceholder",Be,function(r){return r.refresh()},!0),n("electricChars",!0),n("inputStyle",re?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(r,i){return r.getInputField().spellcheck=i},!0),n("autocorrect",!1,function(r,i){return r.getInputField().autocorrect=i},!0),n("autocapitalize",!1,function(r,i){return r.getInputField().autocapitalize=i},!0),n("rtlMoveVisually",!g),n("wholeLineUpdateBefore",!0),n("theme","default",function(r){Cl(r),yi(r)},!0),n("keyMap","default",function(r,i,a){var f=io(i),h=a!=Xn&&io(a);h&&h.detach&&h.detach(r,f),f.attach&&f.attach(r,h||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Qs,!0),n("gutters",[],function(r,i){r.display.gutterSpecs=No(i,r.options.lineNumbers),yi(r)},!0),n("fixedGutter",!0,function(r,i){r.display.gutters.style.left=i?So(r.display)+"px":"0",r.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(r){return Kn(r)},!0),n("scrollbarStyle","native",function(r){La(r),Kn(r),r.display.scrollbars.setScrollTop(r.doc.scrollTop),r.display.scrollbars.setScrollLeft(r.doc.scrollLeft)},!0),n("lineNumbers",!1,function(r,i){r.display.gutterSpecs=No(r.options.gutters,i),yi(r)},!0),n("firstLineNumber",1,yi,!0),n("lineNumberFormatter",function(r){return r},yi,!0),n("showCursorWhenSelecting",!1,hi,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(r,i){"nocursor"==i&&(Un(r),r.display.input.blur()),r.display.input.readOnlyChanged(i)}),n("screenReaderLabel",null,function(r,i){r.display.input.screenReaderLabelChanged(i=""===i?null:i)}),n("disableInput",!1,function(r,i){i||r.display.input.reset()},!0),n("dragDrop",!0,Js),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,hi,!0),n("singleCursorHeightPerLine",!0,hi,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,xi,!0),n("addModeClass",!1,xi,!0),n("pollInterval",100),n("undoDepth",200,function(r,i){return r.doc.history.undoDepth=i}),n("historyEventDelay",1250),n("viewportMargin",10,function(r){return r.refresh()},!0),n("maxHighlightLength",1e4,xi,!0),n("moveInputWithCursor",!0,function(r,i){i||r.display.input.resetPosition()}),n("tabindex",null,function(r,i){return r.display.input.getField().tabIndex=i||""}),n("autofocus",null),n("direction","ltr",function(r,i){return r.doc.setDirection(i)},!0),n("phrases",null)}(Et),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(r,i){var a=this.options,f=a[r];a[r]==i&&"mode"!=r||(a[r]=i,t.hasOwnProperty(r)&&Xt(this,t[r])(this,i,f),xt(this,"optionChange",this,r))},getOption:function(r){return this.options[r]},getDoc:function(){return this.doc},addKeyMap:function(r,i){this.state.keyMaps[i?"push":"unshift"](io(r))},removeKeyMap:function(r){for(var i=this.state.keyMaps,a=0;a<i.length;++a)if(i[a]==r||i[a].name==r)return i.splice(a,1),!0},addOverlay:pr(function(r,i){var a=r.token?r:e.getMode(this.options,r);if(a.startState)throw new Error("Overlays may not be stateful.");(function(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)})(this.state.overlays,{mode:a,modeSpec:r,opaque:i&&i.opaque,priority:i&&i.priority||0},function(f){return f.priority}),this.state.modeGen++,br(this)}),removeOverlay:pr(function(r){for(var i=this.state.overlays,a=0;a<i.length;++a){var f=i[a].modeSpec;if(f==r||"string"==typeof r&&f.name==r)return i.splice(a,1),this.state.modeGen++,void br(this)}}),indentLine:pr(function(r,i,a){"string"!=typeof i&&"number"!=typeof i&&(i=null==i?this.options.smartIndent?"smart":"prev":i?"add":"subtract"),Mt(this.doc,r)&&Oi(this,r,i,a)}),indentSelection:pr(function(r){for(var i=this.doc.sel.ranges,a=-1,f=0;f<i.length;f++){var h=i[f];if(h.empty())h.head.line>a&&(Oi(this,h.head.line,r,!0),a=h.head.line,f==this.doc.sel.primIndex&&zn(this));else{var p=h.from(),m=h.to(),A=Math.max(a,p.line);a=Math.min(this.lastLine(),m.line-(m.ch?0:1))+1;for(var O=A;O<a;++O)Oi(this,O,r);var q=this.doc.sel.ranges;0==p.ch&&i.length==q.length&&q[f].from().ch>0&&Wo(this.doc,f,new dt(p,q[f].to()),ne)}}}),getTokenAt:function(r,i){return Ii(this,r,i)},getLineTokens:function(r,i){return Ii(this,ke(r),i,!0)},getTokenTypeAt:function(r){r=Me(this.doc,r);var p,i=Hr(this,Ae(this.doc,r.line)),a=0,f=(i.length-1)/2,h=r.ch;if(0==h)p=i[2];else for(;;){var m=a+f>>1;if((m?i[2*m-1]:0)>=h)f=m;else{if(!(i[2*m+1]<h)){p=i[2*m+2];break}a=m+1}}var A=p?p.indexOf("overlay "):-1;return A<0?p:0==A?null:p.slice(0,A-1)},getModeAt:function(r){var i=this.doc.mode;return i.innerMode?e.innerMode(i,this.getTokenAt(r).state).mode:i},getHelper:function(r,i){return this.getHelpers(r,i)[0]},getHelpers:function(r,i){var a=[];if(!n.hasOwnProperty(i))return a;var f=n[i],h=this.getModeAt(r);if("string"==typeof h[i])f[h[i]]&&a.push(f[h[i]]);else if(h[i])for(var p=0;p<h[i].length;p++){var m=f[h[i][p]];m&&a.push(m)}else h.helperType&&f[h.helperType]?a.push(f[h.helperType]):f[h.name]&&a.push(f[h.name]);for(var A=0;A<f._global.length;A++){var O=f._global[A];O.pred(h,this)&&-1==Te(a,O.val)&&a.push(O.val)}return a},getStateAfter:function(r,i){var a=this.doc;return ht(this,(r=Se(a,null==r?a.first+a.size-1:r))+1,i).state},cursorCoords:function(r,i){var f=this.doc.sel.primary();return Wr(this,null==r?f.head:"object"==typeof r?Me(this.doc,r):r?f.from():f.to(),i||"page")},charCoords:function(r,i){return Ki(this,Me(this.doc,r),i||"page")},coordsChar:function(r,i){return ko(this,(r=ca(this,r,i||"page")).left,r.top)},lineAtHeight:function(r,i){return r=ca(this,{top:r,left:0},i||"page").top,kt(this.doc,r+this.display.viewOffset)},heightAtLine:function(r,i,a){var h,f=!1;if("number"==typeof r){var p=this.doc.first+this.doc.size-1;r<this.doc.first?r=this.doc.first:r>p&&(r=p,f=!0),h=Ae(this.doc,r)}else h=r;return zi(this,h,{top:0,left:0},i||"page",a||f).top+(f?this.doc.height-v(h):0)},defaultTextHeight:function(){return _n(this.display)},defaultCharWidth:function(){return Wn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(r,i,a,f,h){var p=this.display,m=(r=Wr(this,Me(this.doc,r))).bottom,A=r.left;if(i.style.position="absolute",i.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(i),p.sizer.appendChild(i),"over"==f)m=r.top;else if("above"==f||"near"==f){var O=Math.max(p.wrapper.clientHeight,this.doc.height),q=Math.max(p.sizer.clientWidth,p.lineSpace.clientWidth);("above"==f||r.bottom+i.offsetHeight>O)&&r.top>i.offsetHeight?m=r.top-i.offsetHeight:r.bottom+i.offsetHeight<=O&&(m=r.bottom),A+i.offsetWidth>q&&(A=q-i.offsetWidth)}i.style.top=m+"px",i.style.left=i.style.right="","right"==h?(A=p.sizer.clientWidth-i.offsetWidth,i.style.right="0px"):("left"==h?A=0:"middle"==h&&(A=(p.sizer.clientWidth-i.offsetWidth)/2),i.style.left=A+"px"),a&&function(e,t){var n=Mo(e,t);null!=n.scrollTop&&pi(e,n.scrollTop),null!=n.scrollLeft&&Tn(e,n.scrollLeft)}(this,{left:A,top:m,right:A+i.offsetWidth,bottom:m+i.offsetHeight})},triggerOnKeyDown:pr(vl),triggerOnKeyPress:pr(ml),triggerOnKeyUp:gl,triggerOnMouseDown:pr(yl),execCommand:function(r){if(Mi.hasOwnProperty(r))return Mi[r].call(null,this)},triggerElectric:pr(function(r){Ll(this,r)}),findPosH:function(r,i,a,f){var h=1;i<0&&(h=-1,i=-i);for(var p=Me(this.doc,r),m=0;m<i&&!(p=Qo(this.doc,p,h,a,f)).hitSide;++m);return p},moveH:pr(function(r,i){var a=this;this.extendSelectionsBy(function(f){return a.display.shift||a.doc.extend||f.empty()?Qo(a.doc,f.head,r,i,a.options.rtlMoveVisually):r<0?f.from():f.to()},Oe)}),deleteH:pr(function(r,i){var f=this.doc;this.doc.sel.somethingSelected()?f.replaceSelection("",null,"+delete"):qn(this,function(h){var p=Qo(f,h.head,r,i,!1);return r<0?{from:p,to:h.head}:{from:h.head,to:p}})}),findPosV:function(r,i,a,f){var h=1,p=f;i<0&&(h=-1,i=-i);for(var m=Me(this.doc,r),A=0;A<i;++A){var O=Wr(this,m,"div");if(null==p?p=O.left:O.left=p,(m=El(this,O,h,a)).hitSide)break}return m},moveV:pr(function(r,i){var a=this,f=this.doc,h=[],p=!this.display.shift&&!f.extend&&f.sel.somethingSelected();if(f.extendSelectionsBy(function(A){if(p)return r<0?A.from():A.to();var O=Wr(a,A.head,"div");null!=A.goalColumn&&(O.left=A.goalColumn),h.push(O.left);var q=El(a,O,r,i);return"page"==i&&A==f.sel.primary()&&Eo(a,Ki(a,q,"div").top-O.top),q},Oe),h.length)for(var m=0;m<f.sel.ranges.length;m++)f.sel.ranges[m].goalColumn=h[m]}),findWordAt:function(r){var a=Ae(this.doc,r.line).text,f=r.ch,h=r.ch;if(a){var p=this.getHelper(r,"wordChars");"before"!=r.sticky&&h!=a.length||!f?++h:--f;for(var m=a.charAt(f),A=tr(m,p)?function(O){return tr(O,p)}:/\s/.test(m)?function(O){return/\s/.test(O)}:function(O){return!/\s/.test(O)&&!tr(O)};f>0&&A(a.charAt(f-1));)--f;for(;h<a.length&&A(a.charAt(h));)++h}return new dt(ke(r.line,f),ke(r.line,h))},toggleOverwrite:function(r){null!=r&&r==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?fe(this.display.cursorDiv,"CodeMirror-overwrite"):P(this.display.cursorDiv,"CodeMirror-overwrite"),xt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==le()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:pr(function(r,i){di(this,r,i)}),getScrollInfo:function(){var r=this.display.scroller;return{left:r.scrollLeft,top:r.scrollTop,height:r.scrollHeight-Yr(this)-this.display.barHeight,width:r.scrollWidth-Yr(this)-this.display.barWidth,clientHeight:go(this),clientWidth:Cn(this)}},scrollIntoView:pr(function(r,i){null==r?(r={from:this.doc.sel.primary().head,to:null},null==i&&(i=this.options.cursorScrollMargin)):"number"==typeof r?r={from:ke(r,0),to:null}:null==r.from&&(r={from:r,to:null}),r.to||(r.to=r.from),r.margin=i||0,null!=r.from.line?function(e,t){Ji(e),e.curOp.scrollToPos=t}(this,r):ba(this,r.from,r.to,r.margin)}),setSize:pr(function(r,i){var a=this,f=function(p){return"number"==typeof p||/^\d+$/.test(String(p))?p+"px":p};null!=r&&(this.display.wrapper.style.width=f(r)),null!=i&&(this.display.wrapper.style.height=f(i)),this.options.lineWrapping&&sa(this);var h=this.display.viewFrom;this.doc.iter(h,this.display.viewTo,function(p){if(p.widgets)for(var m=0;m<p.widgets.length;m++)if(p.widgets[m].noHScroll){fn(a,h,"widget");break}++h}),this.curOp.forceUpdate=!0,xt(this,"refresh",this)}),operation:function(r){return Tr(this,r)},startOperation:function(){return Mn(this)},endOperation:function(){return En(this)},refresh:pr(function(){var r=this.display.cachedTextHeight;br(this),this.curOp.forceUpdate=!0,ci(this),di(this,this.doc.scrollLeft,this.doc.scrollTop),Oo(this.display),(null==r||Math.abs(r-_n(this.display))>.5||this.options.lineWrapping)&&wo(this),xt(this,"refresh",this)}),swapDoc:pr(function(r){var i=this.doc;return i.cm=null,this.state.selectingText&&this.state.selectingText(),Ba(this,r),ci(this),this.display.input.reset(),di(this,r.scrollLeft,r.scrollTop),this.curOp.forceScroll=!0,ut(this,"swapDoc",this,i),i}),phrase:function(r){var i=this.options.phrases;return i&&Object.prototype.hasOwnProperty.call(i,r)?i[r]:r},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ft(e),e.registerHelper=function(r,i,a){n.hasOwnProperty(r)||(n[r]=e[r]={_global:[]}),n[r][i]=a},e.registerGlobalHelper=function(r,i,a,f){e.registerHelper(r,i,f),n[r]._global.push({pred:a,val:f})}}(Et);var nu="iter insert remove copy getEditor constructor".split(" ");for(var uo in Cr.prototype)Cr.prototype.hasOwnProperty(uo)&&Te(nu,uo)<0&&(Et.prototype[uo]=function(e){return function(){return e.apply(this.doc,arguments)}}(Cr.prototype[uo]));return Ft(Cr),Et.inputStyles={textarea:Wt,contenteditable:mt},Et.defineMode=function(e){!Et.defaults.mode&&"null"!=e&&(Et.defaults.mode=e),It.apply(this,arguments)},Et.defineMIME=function(e,t){lr[e]=t},Et.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Et.defineMIME("text/plain","null"),Et.defineExtension=function(e,t){Et.prototype[e]=t},Et.defineDocExtension=function(e,t){Cr.prototype[e]=t},Et.fromTextArea=function(e,t){if((t=t?je(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=le();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function r(){e.value=h.getValue()}var i;if(e.form&&(Ue(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var a=e.form;i=a.submit;try{var f=a.submit=function(){r(),a.submit=i,a.submit(),a.submit=f}}catch(p){}}t.finishInit=function(p){p.save=r,p.getTextArea=function(){return e},p.toTextArea=function(){p.toTextArea=isNaN,r(),e.parentNode.removeChild(p.getWrapperElement()),e.style.display="",e.form&&(Ut(e.form,"submit",r),!t.leaveSubmitMethodAlone&&"function"==typeof e.form.submit&&(e.form.submit=i))}},e.style.display="none";var h=Et(function(p){return e.parentNode.insertBefore(p,e.nextSibling)},t);return h},function(e){e.off=Ut,e.on=Ue,e.wheelEventPixels=us,e.Doc=Cr,e.splitLines=Vr,e.countColumn=D,e.findColumn=tt,e.isWordChar=gr,e.Pass=K,e.signal=xt,e.Line=E,e.changeEnd=dn,e.scrollbarModel=wa,e.Pos=ke,e.cmpPos=We,e.modes=$r,e.mimeModes=lr,e.resolveMode=Pr,e.getMode=dr,e.modeExtensions=ce,e.extendMode=Je,e.copyState=W,e.startState=Ce,e.innerMode=ie,e.commands=Mi,e.keyMap=nn,e.keyName=fl,e.isModifierKey=sl,e.lookupKey=Qn,e.normalizeKeyMap=Fs,e.StringStream=_e,e.SharedTextMarker=Li,e.TextMarker=vn,e.LineWidget=wi,e.e_preventDefault=vt,e.e_stopPropagation=Br,e.e_stop=xr,e.addClass=fe,e.contains=y,e.rmClass=P,e.keyNames=gn}(Et),Et.version="5.63.0",Et}()},7214:(At,nt,de)=>{!function(x){"use strict";var U=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/i;x.defineMode("gfm",function(H,V){var s=0;var N={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(Q){return{code:Q.code,codeBlock:Q.codeBlock,ateSpace:Q.ateSpace}},token:function(Q,z){if(z.combineTokens=null,z.codeBlock)return Q.match(/^```+/)?(z.codeBlock=!1,null):(Q.skipToEnd(),null);if(Q.sol()&&(z.code=!1),Q.sol()&&Q.match(/^```+/))return Q.skipToEnd(),z.codeBlock=!0,null;if("`"===Q.peek()){Q.next();var ae=Q.pos;Q.eatWhile("`");var se=1+Q.pos-ae;return z.code?se===s&&(z.code=!1):(s=se,z.code=!0),null}if(z.code)return Q.next(),null;if(Q.eatSpace())return z.ateSpace=!0,null;if((Q.sol()||z.ateSpace)&&(z.ateSpace=!1,!1!==V.gitHubSpice)){if(Q.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/))return z.combineTokens=!0,"link";if(Q.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return z.combineTokens=!0,"link"}return Q.match(U)&&"]("!=Q.string.slice(Q.start-2,Q.start)&&(0==Q.start||/\W/.test(Q.string.charAt(Q.start-1)))?(z.combineTokens=!0,"link"):(Q.next(),null)},blankLine:function(Q){return Q.code=!1,null}},oe={taskLists:!0,strikethrough:!0,emoji:!0};for(var X in V)oe[X]=V[X];return oe.name="markdown",x.overlayMode(x.getMode(H,oe),N)},"markdown"),x.defineMIME("text/x-gfm","gfm")}(de(9475),de(6864),de(7630))},2391:(At,nt,de)=>{!function(x){"use strict";x.defineMode("javascript",function(U,H){var ee,re,V=U.indentUnit,s=H.statementIndent,M=H.jsonld,N=H.json||M,oe=!1!==H.trackScope,X=H.typescript,Q=H.wordCharacters||/[\w$\xa1-\uffff]/,z=function(){function k(Bt){return{type:Bt,style:"keyword"}}var I=k("keyword a"),he=k("keyword b"),Se=k("keyword c"),Me=k("keyword d"),at=k("operator"),ct={type:"atom",style:"atom"};return{if:k("if"),while:I,with:I,else:he,do:he,try:he,finally:he,return:Me,break:Me,continue:Me,new:k("new"),delete:Se,void:Se,throw:Se,debugger:k("debugger"),var:k("var"),const:k("var"),let:k("var"),function:k("function"),catch:k("catch"),for:k("for"),switch:k("switch"),case:k("case"),default:k("default"),in:at,typeof:at,instanceof:at,true:ct,false:ct,null:ct,undefined:ct,NaN:ct,Infinity:ct,this:k("this"),class:k("class"),super:k("atom"),yield:Se,export:k("export"),import:k("import"),extends:Se,await:Se}}(),ae=/[+\-*&%=<>!?|~^@]/,se=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function L(k,I,he){return ee=k,re=he,I}function _(k,I){var he=k.next();if('"'==he||"'"==he)return I.tokenize=function(k){return function(I,he){var Me,Se=!1;if(M&&"@"==I.peek()&&I.match(se))return he.tokenize=_,L("jsonld-keyword","meta");for(;null!=(Me=I.next())&&(Me!=k||Se);)Se=!Se&&"\\"==Me;return Se||(he.tokenize=_),L("string","string")}}(he),I.tokenize(k,I);if("."==he&&k.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return L("number","number");if("."==he&&k.match(".."))return L("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(he))return L(he);if("="==he&&k.eat(">"))return L("=>","operator");if("0"==he&&k.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return L("number","number");if(/\d/.test(he))return k.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),L("number","number");if("/"==he)return k.eat("*")?(I.tokenize=S,S(k,I)):k.eat("/")?(k.skipToEnd(),L("comment","comment")):sr(k,I,1)?(function(k){for(var he,I=!1,Se=!1;null!=(he=k.next());){if(!I){if("/"==he&&!Se)return;"["==he?Se=!0:Se&&"]"==he&&(Se=!1)}I=!I&&"\\"==he}}(k),k.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),L("regexp","string-2")):(k.eat("="),L("operator","operator",k.current()));if("`"==he)return I.tokenize=T,T(k,I);if("#"==he&&"!"==k.peek())return k.skipToEnd(),L("meta","meta");if("#"==he&&k.eatWhile(Q))return L("variable","property");if("<"==he&&k.match("!--")||"-"==he&&k.match("->")&&!/\S/.test(k.string.slice(0,k.start)))return k.skipToEnd(),L("comment","comment");if(ae.test(he))return(">"!=he||!I.lexical||">"!=I.lexical.type)&&(k.eat("=")?("!"==he||"="==he)&&k.eat("="):/[<>*+\-|&?]/.test(he)&&(k.eat(he),">"==he&&k.eat(he))),"?"==he&&k.eat(".")?L("."):L("operator","operator",k.current());if(Q.test(he)){k.eatWhile(Q);var Se=k.current();if("."!=I.lastType){if(z.propertyIsEnumerable(Se)){var Me=z[Se];return L(Me.type,Me.style,Se)}if("async"==Se&&k.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return L("async","keyword",Se)}return L("variable","variable",Se)}}function S(k,I){for(var Se,he=!1;Se=k.next();){if("/"==Se&&he){I.tokenize=_;break}he="*"==Se}return L("comment","comment")}function T(k,I){for(var Se,he=!1;null!=(Se=k.next());){if(!he&&("`"==Se||"$"==Se&&k.eat("{"))){I.tokenize=_;break}he=!he&&"\\"==Se}return L("quasi","string-2",k.current())}function C(k,I){I.fatArrowAt&&(I.fatArrowAt=null);var he=k.string.indexOf("=>",k.start);if(!(he<0)){if(X){var Se=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(k.string.slice(k.start,he));Se&&(he=Se.index)}for(var Me=0,at=!1,ct=he-1;ct>=0;--ct){var Bt=k.string.charAt(ct),Rt="([{}])".indexOf(Bt);if(Rt>=0&&Rt<3){if(!Me){++ct;break}if(0==--Me){"("==Bt&&(at=!0);break}}else if(Rt>=3&&Rt<6)++Me;else if(Q.test(Bt))at=!0;else if(/["'\/`]/.test(Bt))for(;;--ct){if(0==ct)return;if(k.string.charAt(ct-1)==Bt&&"\\"!=k.string.charAt(ct-2)){ct--;break}}else if(at&&!Me){++ct;break}}at&&!Me&&(I.fatArrowAt=ct)}}var P={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function te(k,I,he,Se,Me,at){this.indented=k,this.column=I,this.type=he,this.prev=Me,this.info=at,null!=Se&&(this.align=Se)}function Z(k,I){if(!oe)return!1;for(var he=k.localVars;he;he=he.next)if(he.name==I)return!0;for(var Se=k.context;Se;Se=Se.prev)for(he=Se.vars;he;he=he.next)if(he.name==I)return!0}function $(k,I,he,Se,Me){var at=k.cc;for(j.state=k,j.stream=Me,j.marked=null,j.cc=at,j.style=I,k.lexical.hasOwnProperty("align")||(k.lexical.align=!0);;)if((at.length?at.pop():N?ve:Oe)(he,Se)){for(;at.length&&at[at.length-1].lex;)at.pop()();return j.marked?j.marked:"variable"==he&&Z(k,Se)?"variable-2":I}}var j={state:null,column:null,marked:null,cc:null};function pe(){for(var k=arguments.length-1;k>=0;k--)j.cc.push(arguments[k])}function y(){return pe.apply(null,arguments),!0}function le(k,I){for(var he=I;he;he=he.next)if(he.name==k)return!0;return!1}function fe(k){var I=j.state;if(j.marked="def",oe){if(I.context)if("var"==I.lexical.info&&I.context&&I.context.block){var he=Ee(k,I.context);if(null!=he)return void(I.context=he)}else if(!le(k,I.localVars))return void(I.localVars=new je(k,I.localVars));H.globalVars&&!le(k,I.globalVars)&&(I.globalVars=new je(k,I.globalVars))}}function Ee(k,I){if(I){if(I.block){var he=Ee(k,I.prev);return he?he==I.prev?I:new ze(he,I.vars,!0):null}return le(k,I.vars)?I:new ze(I.prev,new je(k,I.vars),!1)}return null}function He(k){return"public"==k||"private"==k||"protected"==k||"abstract"==k||"readonly"==k}function ze(k,I,he){this.prev=k,this.vars=I,this.block=he}function je(k,I){this.name=k,this.next=I}var D=new je("this",new je("arguments",null));function b(){j.state.context=new ze(j.state.context,j.state.localVars,!1),j.state.localVars=D}function Te(){j.state.context=new ze(j.state.context,j.state.localVars,!0),j.state.localVars=null}function B(){j.state.localVars=j.state.context.vars,j.state.context=j.state.context.prev}function K(k,I){var he=function(){var Se=j.state,Me=Se.indented;if("stat"==Se.lexical.type)Me=Se.lexical.indented;else for(var at=Se.lexical;at&&")"==at.type&&at.align;at=at.prev)Me=at.indented;Se.lexical=new te(Me,j.stream.column(),k,null,Se.lexical,I)};return he.lex=!0,he}function ne(){var k=j.state;k.lexical.prev&&(")"==k.lexical.type&&(k.indented=k.lexical.indented),k.lexical=k.lexical.prev)}function me(k){return function I(he){return he==k?y():";"==k||"}"==he||")"==he||"]"==he?pe():y(I)}}function Oe(k,I){return"var"==k?y(K("vardef",I),qr,me(";"),ne):"keyword a"==k?y(K("form"),Ke,Oe,ne):"keyword b"==k?y(K("form"),Oe,ne):"keyword d"==k?j.stream.match(/^\s*$/,!1)?y():y(K("stat"),nr,me(";"),ne):"debugger"==k?y(me(";")):"{"==k?y(K("}"),Te,Ue,ne,B):";"==k?y():"if"==k?("else"==j.state.lexical.info&&j.state.cc[j.state.cc.length-1]==ne&&j.state.cc.pop()(),y(K("form"),Ke,Oe,ne,jr)):"function"==k?y(It):"for"==k?y(K("form"),Te,ar,Oe,B,ne):"class"==k||X&&"interface"==I?(j.marked="keyword",y(K("form","class"==k?k:I),Je,ne)):"variable"==k?X&&"declare"==I?(j.marked="keyword",y(Oe)):X&&("module"==I||"enum"==I||"type"==I)&&j.stream.match(/^\s*\w/,!1)?(j.marked="keyword","enum"==I?y(ot):"type"==I?y(Pr,me("operator"),rt,me(";")):y(K("form"),Jt,me("{"),K("}"),Ue,ne,ne)):X&&"namespace"==I?(j.marked="keyword",y(K("form"),ve,Oe,ne)):X&&"abstract"==I?(j.marked="keyword",y(Oe)):y(K("stat"),Fr):"switch"==k?y(K("form"),Ke,me("{"),K("}","switch"),Te,Ue,ne,ne,B):"case"==k?y(ve,me(":")):"default"==k?y(me(":")):"catch"==k?y(K("form"),b,tt,Oe,ne,B):"export"==k?y(K("stat"),_e,ne):"import"==k?y(K("stat"),Nt,ne):"async"==k?y(Oe):"@"==I?y(ve,Oe):pe(K("stat"),ve,me(";"),ne)}function tt(k){if("("==k)return y(dr,me(")"))}function ve(k,I){return hr(k,I,!1)}function Qe(k,I){return hr(k,I,!0)}function Ke(k){return"("!=k?pe():y(K(")"),nr,me(")"),ne)}function hr(k,I,he){if(j.state.fatArrowAt==j.stream.start){var Se=he?Dt:tr;if("("==k)return y(b,K(")"),ft(dr,")"),ne,me("=>"),Se,B);if("variable"==k)return pe(b,Jt,me("=>"),Se,B)}var Me=he?yt:pt;return P.hasOwnProperty(k)?y(Me):"function"==k?y(It,Me):"class"==k||X&&"interface"==I?(j.marked="keyword",y(K("form"),ce,ne)):"keyword c"==k||"async"==k?y(he?Qe:ve):"("==k?y(K(")"),nr,me(")"),ne,Me):"operator"==k||"spread"==k?y(he?Qe:ve):"["==k?y(K("]"),Mt,ne,Me):"{"==k?St(Yt,"}",null,Me):"quasi"==k?pe(ir,Me):"new"==k?y(function(k){return function(I){return"."==I?y(k?Kr:Nr):"variable"==I&&X?y(an,k?yt:pt):pe(k?Qe:ve)}}(he)):y()}function nr(k){return k.match(/[;\}\)\],]/)?pe():pe(ve)}function pt(k,I){return","==k?y(nr):yt(k,I,!1)}function yt(k,I,he){var Se=0==he?pt:yt,Me=0==he?ve:Qe;if("=>"==k)return y(b,he?Dt:tr,B);if("operator"==k)return/\+\+|--/.test(I)||X&&"!"==I?y(Se):X&&"<"==I&&j.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?y(K(">"),ft(rt,">"),ne,Se):"?"==I?y(ve,me(":"),Me):y(Me);if("quasi"==k)return pe(ir,Se);if(";"!=k){if("("==k)return St(Qe,")","call",Se);if("."==k)return y(mr,Se);if("["==k)return y(K("]"),nr,me("]"),ne,Se);if(X&&"as"==I)return j.marked="keyword",y(rt,Se);if("regexp"==k)return j.state.lastType=j.marked="operator",j.stream.backUp(j.stream.pos-j.stream.start-1),y(Me)}}function ir(k,I){return"quasi"!=k?pe():"${"!=I.slice(I.length-2)?y(ir):y(nr,gr)}function gr(k){if("}"==k)return j.marked="string-2",j.state.tokenize=T,y(ir)}function tr(k){return C(j.stream,j.state),pe("{"==k?Oe:ve)}function Dt(k){return C(j.stream,j.state),pe("{"==k?Oe:Qe)}function Nr(k,I){if("target"==I)return j.marked="keyword",y(pt)}function Kr(k,I){if("target"==I)return j.marked="keyword",y(yt)}function Fr(k){return":"==k?y(ne,Oe):pe(pt,me(";"),ne)}function mr(k){if("variable"==k)return j.marked="property",y()}function Yt(k,I){return"async"==k?(j.marked="property",y(Yt)):"variable"==k||"keyword"==j.style?(j.marked="property","get"==I||"set"==I?y(Or):(X&&j.state.fatArrowAt==j.stream.start&&(he=j.stream.match(/^\s*:\s*/,!1))&&(j.state.fatArrowAt=j.stream.pos+he[0].length),y(Tt))):"number"==k||"string"==k?(j.marked=M?"property":j.style+" property",y(Tt)):"jsonld-keyword"==k?y(Tt):X&&He(I)?(j.marked="keyword",y(Yt)):"["==k?y(ve,yr,me("]"),Tt):"spread"==k?y(Qe,Tt):"*"==I?(j.marked="keyword",y(Yt)):":"==k?pe(Tt):void 0;var he}function Or(k){return"variable"!=k?pe(Tt):(j.marked="property",y(It))}function Tt(k){return":"==k?y(Qe):"("==k?pe(It):void 0}function ft(k,I,he){function Se(Me,at){if(he?he.indexOf(Me)>-1:","==Me){var ct=j.state.lexical;return"call"==ct.info&&(ct.pos=(ct.pos||0)+1),y(function(Bt,Rt){return Bt==I||Rt==I?pe():pe(k)},Se)}return Me==I||at==I?y():he&&he.indexOf(";")>-1?pe(k):y(me(I))}return function(Me,at){return Me==I||at==I?y():pe(k,Se)}}function St(k,I,he){for(var Se=3;Se<arguments.length;Se++)j.cc.push(arguments[Se]);return y(K(I,he),ft(k,I),ne)}function Ue(k){return"}"==k?y():pe(Oe,Ue)}function yr(k,I){if(X){if(":"==k)return y(rt);if("?"==I)return y(yr)}}function Ut(k,I){if(X&&(":"==k||"in"==I))return y(rt)}function xt(k){if(X&&":"==k)return j.stream.match(/^\s*\w+\s+is\b/,!1)?y(ve,$e,rt):y(rt)}function $e(k,I){if("is"==I)return j.marked="keyword",y()}function rt(k,I){return"keyof"==I||"typeof"==I||"infer"==I||"readonly"==I?(j.marked="keyword",y("typeof"==I?Qe:rt)):"variable"==k||"void"==I?(j.marked="type",y(or)):"|"==I||"&"==I?y(rt):"string"==k||"number"==k||"atom"==k?y(or):"["==k?y(K("]"),ft(rt,"]",","),ne,or):"{"==k?y(K("}"),Ft,ne,or):"("==k?y(ft(xr,")"),st,or):"<"==k?y(ft(rt,">"),rt):"quasi"==k?pe(Br,or):void 0}function st(k){if("=>"==k)return y(rt)}function Ft(k){return k.match(/[\}\)\]]/)?y():","==k||";"==k?y(Ft):pe(vt,Ft)}function vt(k,I){return"variable"==k||"keyword"==j.style?(j.marked="property",y(vt)):"?"==I||"number"==k||"string"==k?y(vt):":"==k?y(rt):"["==k?y(me("variable"),Ut,me("]"),vt):"("==k?pe(kr,vt):k.match(/[;\}\)\],]/)?void 0:y()}function Br(k,I){return"quasi"!=k?pe():"${"!=I.slice(I.length-2)?y(Br):y(rt,wt)}function wt(k){if("}"==k)return j.marked="string-2",j.state.tokenize=T,y(Br)}function xr(k,I){return"variable"==k&&j.stream.match(/^\s*[?:]/,!1)||"?"==I?y(xr):":"==k?y(rt):"spread"==k?y(xr):pe(rt)}function or(k,I){return"<"==I?y(K(">"),ft(rt,">"),ne,or):"|"==I||"."==k||"&"==I?y(rt):"["==k?y(rt,me("]"),or):"extends"==I||"implements"==I?(j.marked="keyword",y(rt)):"?"==I?y(rt,me(":"),rt):void 0}function an(k,I){if("<"==I)return y(K(">"),ft(rt,">"),ne,or)}function Rr(){return pe(rt,Zr)}function Zr(k,I){if("="==I)return y(rt)}function qr(k,I){return"enum"==I?(j.marked="keyword",y(ot)):pe(Jt,yr,Qt,Gr)}function Jt(k,I){return X&&He(I)?(j.marked="keyword",y(Jt)):"variable"==k?(fe(I),y()):"spread"==k?y(Jt):"["==k?St(Vr,"]"):"{"==k?St(Xr,"}"):void 0}function Xr(k,I){return"variable"!=k||j.stream.match(/^\s*:/,!1)?("variable"==k&&(j.marked="property"),"spread"==k?y(Jt):"}"==k?pe():"["==k?y(ve,me("]"),me(":"),Xr):y(me(":"),Jt,Qt)):(fe(I),y(Qt))}function Vr(){return pe(Jt,Qt)}function Qt(k,I){if("="==I)return y(Qe)}function Gr(k){if(","==k)return y(qr)}function jr(k,I){if("keyword b"==k&&"else"==I)return y(K("form","else"),Oe,ne)}function ar(k,I){return"await"==I?y(ar):"("==k?y(K(")"),$r,ne):void 0}function $r(k){return"var"==k?y(qr,lr):"variable"==k?y(lr):pe(lr)}function lr(k,I){return")"==k?y():";"==k?y(lr):"in"==I||"of"==I?(j.marked="keyword",y(ve,lr)):pe(ve,lr)}function It(k,I){return"*"==I?(j.marked="keyword",y(It)):"variable"==k?(fe(I),y(It)):"("==k?y(b,K(")"),ft(dr,")"),ne,xt,Oe,B):X&&"<"==I?y(K(">"),ft(Rr,">"),ne,It):void 0}function kr(k,I){return"*"==I?(j.marked="keyword",y(kr)):"variable"==k?(fe(I),y(kr)):"("==k?y(b,K(")"),ft(dr,")"),ne,xt,B):X&&"<"==I?y(K(">"),ft(Rr,">"),ne,kr):void 0}function Pr(k,I){return"keyword"==k||"variable"==k?(j.marked="type",y(Pr)):"<"==I?y(K(">"),ft(Rr,">"),ne):void 0}function dr(k,I){return"@"==I&&y(ve,dr),"spread"==k?y(dr):X&&He(I)?(j.marked="keyword",y(dr)):X&&"this"==k?y(yr,Qt):pe(Jt,yr,Qt)}function ce(k,I){return"variable"==k?Je(k,I):W(k,I)}function Je(k,I){if("variable"==k)return fe(I),y(W)}function W(k,I){return"<"==I?y(K(">"),ft(Rr,">"),ne,W):"extends"==I||"implements"==I||X&&","==k?("implements"==I&&(j.marked="keyword"),y(X?rt:ve,W)):"{"==k?y(K("}"),ie,ne):void 0}function ie(k,I){return"async"==k||"variable"==k&&("static"==I||"get"==I||"set"==I||X&&He(I))&&j.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(j.marked="keyword",y(ie)):"variable"==k||"keyword"==j.style?(j.marked="property",y(Ce,ie)):"number"==k||"string"==k?y(Ce,ie):"["==k?y(ve,yr,me("]"),Ce,ie):"*"==I?(j.marked="keyword",y(ie)):X&&"("==k?pe(kr,ie):";"==k||","==k?y(ie):"}"==k?y():"@"==I?y(ve,ie):void 0}function Ce(k,I){if("!"==I||"?"==I)return y(Ce);if(":"==k)return y(rt,Qt);if("="==I)return y(Qe);var he=j.state.lexical.prev;return pe(he&&"interface"==he.info?kr:It)}function _e(k,I){return"*"==I?(j.marked="keyword",y(kt,me(";"))):"default"==I?(j.marked="keyword",y(ve,me(";"))):"{"==k?y(ft(Ae,"}"),kt,me(";")):pe(Oe)}function Ae(k,I){return"as"==I?(j.marked="keyword",y(me("variable"))):"variable"==k?pe(Qe,Ae):void 0}function Nt(k){return"string"==k?y():"("==k?pe(ve):"."==k?pe(pt):pe(zt,Ve,kt)}function zt(k,I){return"{"==k?St(zt,"}"):("variable"==k&&fe(I),"*"==I&&(j.marked="keyword"),y(Ze))}function Ve(k){if(","==k)return y(zt,Ve)}function Ze(k,I){if("as"==I)return j.marked="keyword",y(zt)}function kt(k,I){if("from"==I)return j.marked="keyword",y(ve)}function Mt(k){return"]"==k?y():pe(ft(Qe,"]"))}function ot(){return pe(K("form"),Jt,me("{"),K("}"),ft(ke,"}"),ne,ne)}function ke(){return pe(Jt,Qt)}function sr(k,I,he){return I.tokenize==_&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(I.lastType)||"quasi"==I.lastType&&/\{\s*$/.test(k.string.slice(0,k.pos-(he||0)))}return B.lex=!0,ne.lex=!0,{startState:function(k){var I={tokenize:_,lastType:"sof",cc:[],lexical:new te((k||0)-V,0,"block",!1),localVars:H.localVars,context:H.localVars&&new ze(null,null,!1),indented:k||0};return H.globalVars&&"object"==typeof H.globalVars&&(I.globalVars=H.globalVars),I},token:function(k,I){if(k.sol()&&(I.lexical.hasOwnProperty("align")||(I.lexical.align=!1),I.indented=k.indentation(),C(k,I)),I.tokenize!=S&&k.eatSpace())return null;var he=I.tokenize(k,I);return"comment"==ee?he:(I.lastType="operator"!=ee||"++"!=re&&"--"!=re?ee:"incdec",$(I,he,ee,re,k))},indent:function(k,I){if(k.tokenize==S||k.tokenize==T)return x.Pass;if(k.tokenize!=_)return 0;var Me,he=I&&I.charAt(0),Se=k.lexical;if(!/^\s*else\b/.test(I))for(var at=k.cc.length-1;at>=0;--at){var ct=k.cc[at];if(ct==ne)Se=Se.prev;else if(ct!=jr&&ct!=B)break}for(;("stat"==Se.type||"form"==Se.type)&&("}"==he||(Me=k.cc[k.cc.length-1])&&(Me==pt||Me==yt)&&!/^[,\.=+\-*:?[\(]/.test(I));)Se=Se.prev;s&&")"==Se.type&&"stat"==Se.prev.type&&(Se=Se.prev);var Bt=Se.type,Rt=he==Bt;return"vardef"==Bt?Se.indented+("operator"==k.lastType||","==k.lastType?Se.info.length+1:0):"form"==Bt&&"{"==he?Se.indented:"form"==Bt?Se.indented+V:"stat"==Bt?Se.indented+(function(k,I){return"operator"==k.lastType||","==k.lastType||ae.test(I.charAt(0))||/[,.]/.test(I.charAt(0))}(k,I)?s||V:0):"switch"!=Se.info||Rt||0==H.doubleIndentSwitch?Se.align?Se.column+(Rt?0:1):Se.indented+(Rt?0:V):Se.indented+(/^(?:case|default)\b/.test(I)?V:2*V)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:N?null:"/*",blockCommentEnd:N?null:"*/",blockCommentContinue:N?null:" * ",lineComment:N?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:N?"json":"javascript",jsonldMode:M,jsonMode:N,expressionAllowed:sr,skipExpression:function(k){$(k,"atom","atom","true",new x.StringStream("",2,null))}}}),x.registerHelper("wordChars","javascript",/[\w$]/),x.defineMIME("text/javascript","javascript"),x.defineMIME("text/ecmascript","javascript"),x.defineMIME("application/javascript","javascript"),x.defineMIME("application/x-javascript","javascript"),x.defineMIME("application/ecmascript","javascript"),x.defineMIME("application/json",{name:"javascript",json:!0}),x.defineMIME("application/x-json",{name:"javascript",json:!0}),x.defineMIME("application/manifest+json",{name:"javascript",json:!0}),x.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),x.defineMIME("text/typescript",{name:"javascript",typescript:!0}),x.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(de(9475))},6864:(At,nt,de)=>{!function(x){"use strict";x.defineMode("markdown",function(U,H){var V=x.getMode(U,"text/html"),s="null"==V.name;void 0===H.highlightFormatting&&(H.highlightFormatting=!1),void 0===H.maxBlockquoteDepth&&(H.maxBlockquoteDepth=0),void 0===H.taskLists&&(H.taskLists=!1),void 0===H.strikethrough&&(H.strikethrough=!1),void 0===H.emoji&&(H.emoji=!1),void 0===H.fencedCodeBlockHighlighting&&(H.fencedCodeBlockHighlighting=!0),void 0===H.fencedCodeBlockDefaultMode&&(H.fencedCodeBlockDefaultMode="text/plain"),void 0===H.xml&&(H.xml=!0),void 0===H.tokenTypeOverrides&&(H.tokenTypeOverrides={});var N={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var oe in N)N.hasOwnProperty(oe)&&H.tokenTypeOverrides[oe]&&(N[oe]=H.tokenTypeOverrides[oe]);var X=/^([*\-_])(?:\s*\1){2,}\s*$/,Q=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,z=/^\[(x| )\](?=\s)/i,ae=H.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,se=/^ {0,3}(?:\={1,}|-{2,})\s*$/,Fe=/^[^#!\[\]*_\\<>` "'(~:]+/,ee=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,re=/^\s*\[[^\]]+?\]:.*$/,L=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function g(D,b,Te){return b.f=b.inline=Te,Te(D,b)}function S(D,b,Te){return b.f=b.block=Te,Te(D,b)}function R(D){if(D.linkTitle=!1,D.linkHref=!1,D.linkText=!1,D.em=!1,D.strong=!1,D.strikethrough=!1,D.quote=0,D.indentedCode=!1,D.f==P){var b=s;if(!b){var Te=x.innerMode(V,D.htmlState);b="xml"==Te.mode.name&&null===Te.state.tagStart&&!Te.state.context&&Te.state.tokenize.isInText}b&&(D.f=j,D.block=C,D.htmlState=null)}return D.trailingSpace=0,D.trailingSpaceNewLine=!1,D.prevLine=D.thisLine,D.thisLine={stream:null},null}function C(D,b){var Te=D.column()===b.indentation,B=function(D){return!D||!/\S/.test(D.string)}(b.prevLine.stream),K=b.indentedCode,ne=b.prevLine.hr,me=!1!==b.list,Oe=(b.listStack[b.listStack.length-1]||0)+3;b.indentedCode=!1;var tt=b.indentation;if(null===b.indentationDiff&&(b.indentationDiff=b.indentation,me)){for(b.list=null;tt<b.listStack[b.listStack.length-1];)b.listStack.pop(),b.listStack.length?b.indentation=b.listStack[b.listStack.length-1]:b.list=!1;!1!==b.list&&(b.indentationDiff=tt-b.listStack[b.listStack.length-1])}var ve=!(B||ne||b.prevLine.header||me&&K||b.prevLine.fencedCodeEnd),Qe=(!1===b.list||ne||B)&&b.indentation<=Oe&&D.match(X),Ke=null;if(b.indentationDiff>=4&&(K||b.prevLine.fencedCodeEnd||b.prevLine.header||B))return D.skipToEnd(),b.indentedCode=!0,N.code;if(D.eatSpace())return null;if(Te&&b.indentation<=Oe&&(Ke=D.match(ae))&&Ke[1].length<=6)return b.quote=0,b.header=Ke[1].length,b.thisLine.header=!0,H.highlightFormatting&&(b.formatting="header"),b.f=b.inline,Z(b);if(b.indentation<=Oe&&D.eat(">"))return b.quote=Te?1:b.quote+1,H.highlightFormatting&&(b.formatting="quote"),D.eatSpace(),Z(b);if(!Qe&&!b.setext&&Te&&b.indentation<=Oe&&(Ke=D.match(Q))){var hr=Ke[1]?"ol":"ul";return b.indentation=tt+D.current().length,b.list=!0,b.quote=0,b.listStack.push(b.indentation),b.em=!1,b.strong=!1,b.code=!1,b.strikethrough=!1,H.taskLists&&D.match(z,!1)&&(b.taskList=!0),b.f=b.inline,H.highlightFormatting&&(b.formatting=["list","list-"+hr]),Z(b)}return Te&&b.indentation<=Oe&&(Ke=D.match(ee,!0))?(b.quote=0,b.fencedEndRE=new RegExp(Ke[1]+"+ *$"),b.localMode=H.fencedCodeBlockHighlighting&&function(D){if(x.findModeByName){var b=x.findModeByName(D);b&&(D=b.mime||b.mimes[0])}var Te=x.getMode(U,D);return"null"==Te.name?null:Te}(Ke[2]||H.fencedCodeBlockDefaultMode),b.localMode&&(b.localState=x.startState(b.localMode)),b.f=b.block=te,H.highlightFormatting&&(b.formatting="code-block"),b.code=-1,Z(b)):b.setext||!(ve&&me||b.quote||!1!==b.list||b.code||Qe||re.test(D.string))&&(Ke=D.lookAhead(1))&&(Ke=Ke.match(se))?(b.setext?(b.header=b.setext,b.setext=0,D.skipToEnd(),H.highlightFormatting&&(b.formatting="header")):(b.header="="==Ke[0].charAt(0)?1:2,b.setext=b.header),b.thisLine.header=!0,b.f=b.inline,Z(b)):Qe?(D.skipToEnd(),b.hr=!0,b.thisLine.hr=!0,N.hr):"["===D.peek()?g(D,b,Ee):g(D,b,b.inline)}function P(D,b){var Te=V.token(D,b.htmlState);if(!s){var B=x.innerMode(V,b.htmlState);("xml"==B.mode.name&&null===B.state.tagStart&&!B.state.context&&B.state.tokenize.isInText||b.md_inside&&D.current().indexOf(">")>-1)&&(b.f=j,b.block=C,b.htmlState=null)}return Te}function te(D,b){var ne,Te=b.listStack[b.listStack.length-1]||0,B=b.indentation<Te;return b.fencedEndRE&&b.indentation<=Te+3&&(B||D.match(b.fencedEndRE))?(H.highlightFormatting&&(b.formatting="code-block"),B||(ne=Z(b)),b.localMode=b.localState=null,b.block=C,b.f=j,b.fencedEndRE=null,b.code=0,b.thisLine.fencedCodeEnd=!0,B?S(D,b,b.block):ne):b.localMode?b.localMode.token(D,b.localState):(D.skipToEnd(),N.code)}function Z(D){var b=[];if(D.formatting){b.push(N.formatting),"string"==typeof D.formatting&&(D.formatting=[D.formatting]);for(var Te=0;Te<D.formatting.length;Te++)b.push(N.formatting+"-"+D.formatting[Te]),"header"===D.formatting[Te]&&b.push(N.formatting+"-"+D.formatting[Te]+"-"+D.header),"quote"===D.formatting[Te]&&b.push(!H.maxBlockquoteDepth||H.maxBlockquoteDepth>=D.quote?N.formatting+"-"+D.formatting[Te]+"-"+D.quote:"error")}if(D.taskOpen)return b.push("meta"),b.length?b.join(" "):null;if(D.taskClosed)return b.push("property"),b.length?b.join(" "):null;if(D.linkHref?b.push(N.linkHref,"url"):(D.strong&&b.push(N.strong),D.em&&b.push(N.em),D.strikethrough&&b.push(N.strikethrough),D.emoji&&b.push(N.emoji),D.linkText&&b.push(N.linkText),D.code&&b.push(N.code),D.image&&b.push(N.image),D.imageAltText&&b.push(N.imageAltText,"link"),D.imageMarker&&b.push(N.imageMarker)),D.header&&b.push(N.header,N.header+"-"+D.header),D.quote&&(b.push(N.quote),b.push(!H.maxBlockquoteDepth||H.maxBlockquoteDepth>=D.quote?N.quote+"-"+D.quote:N.quote+"-"+H.maxBlockquoteDepth)),!1!==D.list){var B=(D.listStack.length-1)%3;b.push(B?1===B?N.list2:N.list3:N.list1)}return D.trailingSpaceNewLine?b.push("trailing-space-new-line"):D.trailingSpace&&b.push("trailing-space-"+(D.trailingSpace%2?"a":"b")),b.length?b.join(" "):null}function $(D,b){if(D.match(Fe,!0))return Z(b)}function j(D,b){var Te=b.text(D,b);if(void 0!==Te)return Te;if(b.list)return b.list=null,Z(b);if(b.taskList)return" "===D.match(z,!0)[1]?b.taskOpen=!0:b.taskClosed=!0,H.highlightFormatting&&(b.formatting="task"),b.taskList=!1,Z(b);if(b.taskOpen=!1,b.taskClosed=!1,b.header&&D.match(/^#+$/,!0))return H.highlightFormatting&&(b.formatting="header"),Z(b);var K=D.next();if(b.linkTitle){b.linkTitle=!1;var ne=K;if("("===K&&(ne=")"),ne=(ne+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"),D.match(new RegExp("^\\s*(?:[^"+ne+"\\\\]+|\\\\\\\\|\\\\.)"+ne),!0))return N.linkHref}if("`"===K){var Oe=b.formatting;H.highlightFormatting&&(b.formatting="code"),D.eatWhile("`");var tt=D.current().length;if(0==b.code&&(!b.quote||1==tt))return b.code=tt,Z(b);if(tt==b.code){var ve=Z(b);return b.code=0,ve}return b.formatting=Oe,Z(b)}if(b.code)return Z(b);if("\\"===K&&(D.next(),H.highlightFormatting)){var Qe=Z(b),Ke=N.formatting+"-escape";return Qe?Qe+" "+Ke:Ke}if("!"===K&&D.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return b.imageMarker=!0,b.image=!0,H.highlightFormatting&&(b.formatting="image"),Z(b);if("["===K&&b.imageMarker&&D.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return b.imageMarker=!1,b.imageAltText=!0,H.highlightFormatting&&(b.formatting="image"),Z(b);if("]"===K&&b.imageAltText){H.highlightFormatting&&(b.formatting="image");Qe=Z(b);return b.imageAltText=!1,b.image=!1,b.inline=b.f=y,Qe}if("["===K&&!b.image)return b.linkText&&D.match(/^.*?\]/)||(b.linkText=!0,H.highlightFormatting&&(b.formatting="link")),Z(b);if("]"===K&&b.linkText){H.highlightFormatting&&(b.formatting="link");Qe=Z(b);return b.linkText=!1,b.inline=b.f=D.match(/\(.*?\)| ?\[.*?\]/,!1)?y:j,Qe}if("<"===K&&D.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return b.f=b.inline=pe,H.highlightFormatting&&(b.formatting="link"),(Qe=Z(b))?Qe+=" ":Qe="",Qe+N.linkInline;if("<"===K&&D.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return b.f=b.inline=pe,H.highlightFormatting&&(b.formatting="link"),(Qe=Z(b))?Qe+=" ":Qe="",Qe+N.linkEmail;if(H.xml&&"<"===K&&D.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var hr=D.string.indexOf(">",D.pos);if(-1!=hr){var nr=D.string.substring(D.start,hr);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(nr)&&(b.md_inside=!0)}return D.backUp(1),b.htmlState=x.startState(V),S(D,b,P)}if(H.xml&&"<"===K&&D.match(/^\/\w*?>/))return b.md_inside=!1,"tag";if("*"===K||"_"===K){for(var pt=1,yt=1==D.pos?" ":D.string.charAt(D.pos-2);pt<3&&D.eat(K);)pt++;var ir=D.peek()||" ",gr=!/\s/.test(ir)&&(!L.test(ir)||/\s/.test(yt)||L.test(yt)),tr=!/\s/.test(yt)&&(!L.test(yt)||/\s/.test(ir)||L.test(ir)),Dt=null,Ht=null;if(pt%2&&(b.em||!gr||"*"!==K&&tr&&!L.test(yt)?b.em==K&&tr&&("*"===K||!gr||L.test(ir))&&(Dt=!1):Dt=!0),pt>1&&(b.strong||!gr||"*"!==K&&tr&&!L.test(yt)?b.strong==K&&tr&&("*"===K||!gr||L.test(ir))&&(Ht=!1):Ht=!0),null!=Ht||null!=Dt)return H.highlightFormatting&&(b.formatting=null==Dt?"strong":null==Ht?"em":"strong em"),!0===Dt&&(b.em=K),!0===Ht&&(b.strong=K),ve=Z(b),!1===Dt&&(b.em=!1),!1===Ht&&(b.strong=!1),ve}else if(" "===K&&(D.eat("*")||D.eat("_"))){if(" "===D.peek())return Z(b);D.backUp(1)}if(H.strikethrough)if("~"===K&&D.eatWhile(K)){if(b.strikethrough)return H.highlightFormatting&&(b.formatting="strikethrough"),ve=Z(b),b.strikethrough=!1,ve;if(D.match(/^[^\s]/,!1))return b.strikethrough=!0,H.highlightFormatting&&(b.formatting="strikethrough"),Z(b)}else if(" "===K&&D.match("~~",!0)){if(" "===D.peek())return Z(b);D.backUp(2)}if(H.emoji&&":"===K&&D.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){b.emoji=!0,H.highlightFormatting&&(b.formatting="emoji");var Nr=Z(b);return b.emoji=!1,Nr}return" "===K&&(D.match(/^ +$/,!1)?b.trailingSpace++:b.trailingSpace&&(b.trailingSpaceNewLine=!0)),Z(b)}function pe(D,b){if(">"===D.next()){b.f=b.inline=j,H.highlightFormatting&&(b.formatting="link");var B=Z(b);return B?B+=" ":B="",B+N.linkInline}return D.match(/^[^>]+/,!0),N.linkInline}function y(D,b){if(D.eatSpace())return null;var Te=D.next();return"("===Te||"["===Te?(b.f=b.inline=function(D){return function(b,Te){if(b.next()===D){Te.f=Te.inline=j,H.highlightFormatting&&(Te.formatting="link-string");var K=Z(Te);return Te.linkHref=!1,K}return b.match(le[D]),Te.linkHref=!0,Z(Te)}}("("===Te?")":"]"),H.highlightFormatting&&(b.formatting="link-string"),b.linkHref=!0,Z(b)):"error"}var le={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function Ee(D,b){return D.match(/^([^\]\\]|\\.)*\]:/,!1)?(b.f=He,D.next(),H.highlightFormatting&&(b.formatting="link"),b.linkText=!0,Z(b)):g(D,b,j)}function He(D,b){if(D.match("]:",!0)){b.f=b.inline=ze,H.highlightFormatting&&(b.formatting="link");var Te=Z(b);return b.linkText=!1,Te}return D.match(/^([^\]\\]|\\.)+/,!0),N.linkText}function ze(D,b){return D.eatSpace()?null:(D.match(/^[^\s]+/,!0),void 0===D.peek()?b.linkTitle=!0:D.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),b.f=b.inline=j,N.linkHref+" url")}var je={startState:function(){return{f:C,prevLine:{stream:null},thisLine:{stream:null},block:C,htmlState:null,indentation:0,inline:j,text:$,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(D){return{f:D.f,prevLine:D.prevLine,thisLine:D.thisLine,block:D.block,htmlState:D.htmlState&&x.copyState(V,D.htmlState),indentation:D.indentation,localMode:D.localMode,localState:D.localMode?x.copyState(D.localMode,D.localState):null,inline:D.inline,text:D.text,formatting:!1,linkText:D.linkText,linkTitle:D.linkTitle,linkHref:D.linkHref,code:D.code,em:D.em,strong:D.strong,strikethrough:D.strikethrough,emoji:D.emoji,header:D.header,setext:D.setext,hr:D.hr,taskList:D.taskList,list:D.list,listStack:D.listStack.slice(0),quote:D.quote,indentedCode:D.indentedCode,trailingSpace:D.trailingSpace,trailingSpaceNewLine:D.trailingSpaceNewLine,md_inside:D.md_inside,fencedEndRE:D.fencedEndRE}},token:function(D,b){if(b.formatting=!1,D!=b.thisLine.stream){if(b.header=0,b.hr=!1,D.match(/^\s*$/,!0))return R(b),null;if(b.prevLine=b.thisLine,b.thisLine={stream:D},b.taskList=!1,b.trailingSpace=0,b.trailingSpaceNewLine=!1,!b.localState&&(b.f=b.block,b.f!=P)){var Te=D.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(b.indentation=Te,b.indentationDiff=null,Te>0)return null}}return b.f(D,b)},innerMode:function(D){return D.block==P?{state:D.htmlState,mode:V}:D.localState?{state:D.localState,mode:D.localMode}:{state:D,mode:je}},indent:function(D,b,Te){return D.block==P&&V.indent?V.indent(D.htmlState,b,Te):D.localState&&D.localMode.indent?D.localMode.indent(D.localState,b,Te):x.Pass},blankLine:R,getType:Z,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return je},"xml"),x.defineMIME("text/markdown","markdown"),x.defineMIME("text/x-markdown","markdown")}(de(9475),de(6380),de(4816))},4816:(At,nt,de)=>{!function(x){"use strict";x.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var U=0;U<x.modeInfo.length;U++){var H=x.modeInfo[U];H.mimes&&(H.mime=H.mimes[0])}x.findModeByMIME=function(V){V=V.toLowerCase();for(var s=0;s<x.modeInfo.length;s++){var M=x.modeInfo[s];if(M.mime==V)return M;if(M.mimes)for(var N=0;N<M.mimes.length;N++)if(M.mimes[N]==V)return M}return/\+xml$/.test(V)?x.findModeByMIME("application/xml"):/\+json$/.test(V)?x.findModeByMIME("application/json"):void 0},x.findModeByExtension=function(V){V=V.toLowerCase();for(var s=0;s<x.modeInfo.length;s++){var M=x.modeInfo[s];if(M.ext)for(var N=0;N<M.ext.length;N++)if(M.ext[N]==V)return M}},x.findModeByFileName=function(V){for(var s=0;s<x.modeInfo.length;s++){var M=x.modeInfo[s];if(M.file&&M.file.test(V))return M}var N=V.lastIndexOf("."),oe=N>-1&&V.substring(N+1,V.length);if(oe)return x.findModeByExtension(oe)},x.findModeByName=function(V){V=V.toLowerCase();for(var s=0;s<x.modeInfo.length;s++){var M=x.modeInfo[s];if(M.name.toLowerCase()==V)return M;if(M.alias)for(var N=0;N<M.alias.length;N++)if(M.alias[N].toLowerCase()==V)return M}}}(de(9475))},6380:(At,nt,de)=>{!function(x){"use strict";var U={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},H={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};x.defineMode("xml",function(V,s){var Q,z,M=V.indentUnit,N={},oe=s.htmlMode?U:H;for(var X in oe)N[X]=oe[X];for(var X in s)N[X]=s[X];function ae(y,le){function fe(ze){return le.tokenize=ze,ze(y,le)}var Ee=y.next();return"<"==Ee?y.eat("!")?y.eat("[")?y.match("CDATA[")?fe(ee("atom","]]>")):null:y.match("--")?fe(ee("comment","--\x3e")):y.match("DOCTYPE",!0,!0)?(y.eatWhile(/[\w\._\-]/),fe(re(1))):null:y.eat("?")?(y.eatWhile(/[\w\._\-]/),le.tokenize=ee("meta","?>"),"meta"):(Q=y.eat("/")?"closeTag":"openTag",le.tokenize=se,"tag bracket"):"&"==Ee?(y.eat("#")?y.eat("x")?y.eatWhile(/[a-fA-F\d]/)&&y.eat(";"):y.eatWhile(/[\d]/)&&y.eat(";"):y.eatWhile(/[\w\.\-:]/)&&y.eat(";"))?"atom":"error":(y.eatWhile(/[^&<]/),null)}function se(y,le){var fe=y.next();if(">"==fe||"/"==fe&&y.eat(">"))return le.tokenize=ae,Q=">"==fe?"endTag":"selfcloseTag","tag bracket";if("="==fe)return Q="equals",null;if("<"==fe){le.tokenize=ae,le.state=T,le.tagName=le.tagStart=null;var Ee=le.tokenize(y,le);return Ee?Ee+" tag error":"tag error"}return/[\'\"]/.test(fe)?(le.tokenize=function(y){var le=function(fe,Ee){for(;!fe.eol();)if(fe.next()==y){Ee.tokenize=se;break}return"string"};return le.isInAttribute=!0,le}(fe),le.stringStartCol=y.column(),le.tokenize(y,le)):(y.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function ee(y,le){return function(fe,Ee){for(;!fe.eol();){if(fe.match(le)){Ee.tokenize=ae;break}fe.next()}return y}}function re(y){return function(le,fe){for(var Ee;null!=(Ee=le.next());){if("<"==Ee)return fe.tokenize=re(y+1),fe.tokenize(le,fe);if(">"==Ee){if(1==y){fe.tokenize=ae;break}return fe.tokenize=re(y-1),fe.tokenize(le,fe)}}return"meta"}}function L(y){return y&&y.toLowerCase()}function _(y,le,fe){this.prev=y.context,this.tagName=le||"",this.indent=y.indented,this.startOfLine=fe,(N.doNotIndent.hasOwnProperty(le)||y.context&&y.context.noIndent)&&(this.noIndent=!0)}function g(y){y.context&&(y.context=y.context.prev)}function S(y,le){for(var fe;;){if(!y.context||!N.contextGrabbers.hasOwnProperty(L(fe=y.context.tagName))||!N.contextGrabbers[L(fe)].hasOwnProperty(L(le)))return;g(y)}}function T(y,le,fe){return"openTag"==y?(fe.tagStart=le.column(),R):"closeTag"==y?C:T}function R(y,le,fe){return"word"==y?(fe.tagName=le.current(),z="tag",Z):N.allowMissingTagName&&"endTag"==y?(z="tag bracket",Z(y,0,fe)):(z="error",R)}function C(y,le,fe){if("word"==y){var Ee=le.current();return fe.context&&fe.context.tagName!=Ee&&N.implicitlyClosed.hasOwnProperty(L(fe.context.tagName))&&g(fe),fe.context&&fe.context.tagName==Ee||!1===N.matchClosing?(z="tag",P):(z="tag error",te)}return N.allowMissingTagName&&"endTag"==y?(z="tag bracket",P(y,0,fe)):(z="error",te)}function P(y,le,fe){return"endTag"!=y?(z="error",P):(g(fe),T)}function te(y,le,fe){return z="error",P(y,0,fe)}function Z(y,le,fe){if("word"==y)return z="attribute",$;if("endTag"==y||"selfcloseTag"==y){var Ee=fe.tagName,He=fe.tagStart;return fe.tagName=fe.tagStart=null,"selfcloseTag"==y||N.autoSelfClosers.hasOwnProperty(L(Ee))?S(fe,Ee):(S(fe,Ee),fe.context=new _(fe,Ee,He==fe.indented)),T}return z="error",Z}function $(y,le,fe){return"equals"==y?j:(N.allowMissing||(z="error"),Z(y,0,fe))}function j(y,le,fe){return"string"==y?pe:"word"==y&&N.allowUnquoted?(z="string",Z):(z="error",Z(y,0,fe))}function pe(y,le,fe){return"string"==y?pe:Z(y,0,fe)}return ae.isInText=!0,{startState:function(y){var le={tokenize:ae,state:T,indented:y||0,tagName:null,tagStart:null,context:null};return null!=y&&(le.baseIndent=y),le},token:function(y,le){if(!le.tagName&&y.sol()&&(le.indented=y.indentation()),y.eatSpace())return null;Q=null;var fe=le.tokenize(y,le);return(fe||Q)&&"comment"!=fe&&(z=null,le.state=le.state(Q||fe,y,le),z&&(fe="error"==z?fe+" error":z)),fe},indent:function(y,le,fe){var Ee=y.context;if(y.tokenize.isInAttribute)return y.tagStart==y.indented?y.stringStartCol+1:y.indented+M;if(Ee&&Ee.noIndent)return x.Pass;if(y.tokenize!=se&&y.tokenize!=ae)return fe?fe.match(/^(\s*)/)[0].length:0;if(y.tagName)return!1!==N.multilineTagIndentPastTag?y.tagStart+y.tagName.length+2:y.tagStart+M*(N.multilineTagIndentFactor||1);if(N.alignCDATA&&/<!\[CDATA\[/.test(le))return 0;var He=le&&/^<(\/)?([\w_:\.-]*)/.exec(le);if(He&&He[1])for(;Ee;){if(Ee.tagName==He[2]){Ee=Ee.prev;break}if(!N.implicitlyClosed.hasOwnProperty(L(Ee.tagName)))break;Ee=Ee.prev}else if(He)for(;Ee;){var ze=N.contextGrabbers[L(Ee.tagName)];if(!ze||!ze.hasOwnProperty(L(He[2])))break;Ee=Ee.prev}for(;Ee&&Ee.prev&&!Ee.startOfLine;)Ee=Ee.prev;return Ee?Ee.indent+M:y.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:N.htmlMode?"html":"xml",helperType:N.htmlMode?"html":"xml",skipAttribute:function(y){y.state==j&&(y.state=Z)},xmlCurrentTag:function(y){return y.tagName?{name:y.tagName,close:"closeTag"==y.type}:null},xmlCurrentContext:function(y){for(var le=[],fe=y.context;fe;fe=fe.prev)le.push(fe.tagName);return le.reverse()}}}),x.defineMIME("text/xml","xml"),x.defineMIME("application/xml","xml"),x.mimeModes.hasOwnProperty("text/html")||x.defineMIME("text/html",{name:"xml",htmlMode:!0})}(de(9475))},2289:(At,nt,de)=>{!function(x){var U={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}",mutiCharsPairs:[["*(",")*"]]},H=x.Pos;function V(ee,re){return"pairs"==re&&"string"==typeof ee?ee:"object"==typeof ee&&null!=ee[re]?ee[re]:U[re]}x.defineOption("autoCloseBrackets",!1,function(ee,re,L){L&&L!=x.Init&&(ee.removeKeyMap(s),ee.state.closeBrackets=null),re&&(M(V(re,"pairs")),ee.state.closeBrackets=re,ee.addKeyMap(s))});var s={Backspace:function(ee){var re=oe(ee);if(!re||ee.getOption("disableInput"))return x.Pass;for(var L=V(re,"pairs"),_=ee.listSelections(),g=0;g<_.length;g++){if(!_[g].empty())return x.Pass;var S=se(ee,_[g].head);if(!S||L.indexOf(S)%2!=0)return x.Pass}for(g=_.length-1;g>=0;g--){var T=_[g].head;ee.replaceRange("",H(T.line,T.ch-1),H(T.line,T.ch+1),"+delete")}},Enter:function(ee){var re=oe(ee),L=re&&V(re,"explode");if(!L||ee.getOption("disableInput"))return x.Pass;for(var _=ee.listSelections(),g=0;g<_.length;g++){if(!_[g].empty())return x.Pass;var S=se(ee,_[g].head);if(!S||L.indexOf(S)%2!=0)return x.Pass}ee.operation(function(){var T=ee.lineSeparator()||"\n";ee.replaceSelection(T+T,null),ee.execCommand("goCharLeft"),_=ee.listSelections();for(var R=0;R<_.length;R++){var C=_[R].head.line;ee.indentLine(C,null,!0),ee.indentLine(C+1,null,!0)}})}};function M(ee){for(var re=0;re<ee.length;re++){var L=ee.charAt(re),_="'"+L+"'";s[_]||(s[_]=N(L))}}function N(ee){return function(re){return function(ee,re){var L=oe(ee);if(!L||ee.getOption("disableInput"))return x.Pass;var _=V(L,"pairs"),g=_.indexOf(re);if(-1==g)return x.Pass;var S=V(L,"triples"),T=_.charAt(g+1)==re,R=ee.listSelections(),C=g%2==0;const P=V(L,"mutiCharsPairs");var te;let Z,$;for(var j=0;j<R.length;j++){var le,pe=R[j],y=pe.head,fe=ee.getRange(y,H(y.line,y.ch+1));for(const je of P){if(Z=je[0],Z[Z.length-1]===re)for(let D=1;D<Z.length;D++){const b=ee.getRange(H(y.line,y.ch-D),y);if(Z[Z.length-1-D]!==b){Z=void 0;break}}else Z=void 0;if(Z){$=je[1];break}}if(Z)le="mutiCharsPairs";else if(C&&!pe.empty())le="surround";else if(!T&&C||fe!=re)if(T&&y.ch>1&&S.indexOf(re)>=0&&ee.getRange(H(y.line,y.ch-2),y)==re+re){if(y.ch>2&&/\bstring/.test(ee.getTokenTypeAt(H(y.line,y.ch-2))))return x.Pass;le="addFour"}else if(T){var Ee=0==y.ch?" ":ee.getRange(H(y.line,y.ch-1),y);if(x.isWordChar(fe)||Ee==re||x.isWordChar(Ee))return x.Pass;le="both"}else{if(!C)return x.Pass;le="both"}else le=T&&Fe(ee,y)?"both":S.indexOf(re)>=0&&ee.getRange(y,H(y.line,y.ch+3))==re+re+re?"skipThree":"skip";if(te){if(te!=le)return x.Pass}else te=le}var He=g%2?_.charAt(g-1):re,ze=g%2?re:_.charAt(g+1);ee.operation(function(){if("skip"==te)ee.execCommand("goCharRight");else if("skipThree"==te)for(var je=0;je<3;je++)ee.execCommand("goCharRight");else if("surround"==te){var D=ee.getSelections();for(je=0;je<D.length;je++)D[je]=He+D[je]+ze;for(ee.replaceSelections(D,"around"),D=ee.listSelections().slice(),je=0;je<D.length;je++)D[je]=z(D[je]);ee.setSelections(D)}else if("both"==te)ee.replaceSelection(He+ze,null),ee.triggerElectric(He+ze),ee.execCommand("goCharLeft");else if("addFour"==te)ee.replaceSelection(He+He+He+He,"before"),ee.execCommand("goCharRight");else if("mutiCharsPairs"===te){ee.replaceSelection(Z[Z.length-1]+$,null),ee.triggerElectric(Z[Z.length-1]+$);for(let b=0;b<$.length;b++)ee.execCommand("goCharLeft")}})}(re,ee)}}function oe(ee){var re=ee.state.closeBrackets;return!re||re.override?re:ee.getModeAt(ee.getCursor()).closeBrackets||re}function z(ee){var re=x.cmpPos(ee.anchor,ee.head)>0;return{anchor:new H(ee.anchor.line,ee.anchor.ch+(re?-1:1)),head:new H(ee.head.line,ee.head.ch+(re?1:-1))}}function se(ee,re){var L=ee.getRange(H(re.line,re.ch-1),H(re.line,re.ch+1));return 2==L.length?L:null}function Fe(ee,re){var L=ee.getTokenAt(H(re.line,re.ch+1));return/\bstring/.test(L.type)&&L.start==re.ch&&(0==re.ch||!/\bstring/.test(ee.getTokenTypeAt(re)))}M(U.pairs+"`")}(de(9475))},7990:(At,nt,de)=>{"use strict";de.r(nt),de.d(nt,{MarkdownEditorModule:()=>dr});var x=de(6903),U=de(2950),H=de(3476),V=de(9475),s=de(8079),M=de(8513);let N=(()=>{class ce{constructor(W,ie){this.markdownService=W,this.commands=V.commands,this.docContentSet$=new U.x,this.docContentModified$=new U.x,this.docEditorLoaded$=new U.x,ie.currentEditor=this,this.docEditorLoaded$.subscribe(Ce=>this.editor=Ce)}gotoLine(W){this.editor.focus(),this.editor.setCursor(W),this.editor.execCommand("showInCenter")}selectRange(W,ie,Ce,_e){this.editor.focus(),this.editor.setSelection({line:W,ch:ie},{line:Ce,ch:_e}),this.editor.execCommand("showInCenter")}replaceRange(W,ie,Ce,_e,Ae){this.editor.replaceRange(W,{line:ie,ch:Ce},{line:_e,ch:Ae})}}return ce.\u0275fac=function(W){return new(W||ce)(s.LFG(H.A),s.LFG(M.d))},ce.\u0275prov=s.Yz7({token:ce,factory:ce.\u0275fac}),ce})();var oe=de(4060),X=de(2118),P=(de(8237),de(7214),de(6584),de(2391),de(7660),de(615),de(1252),de(102),de(2946),de(2289),de(6571),de(3613),de(8209),de(7838),de(858));const te=["host"];let Z=(()=>{class ce extends P.LF{constructor(W,ie){super(),this.editorService=W,this.utils=ie,this.change=new s.vpe,this.focus=new s.vpe,this.blur=new s.vpe,this._value="",super.addSub(this.utils.isWideScreen$.subscribe(Ce=>this.showLineNumber=Ce))}ngOnInit(){this.config=this.config||{mode:{name:"gfm",highlightFormatting:!0},lineNumbers:this.showLineNumber,lineWrapping:!0,autoCloseBrackets:!0,autoCloseTags:!0,matchBrackets:!0,matchTags:{bothTags:!0},extraKeys:{F11:function(W){W.setOption("fullScreen",!W.getOption("fullScreen"))},Esc:function(W){W.getOption("fullScreen")&&W.setOption("fullScreen",!1)}}}}get value(){return this._value}ngAfterViewInit(){this.codemirrorInit(this.config),this.editorService.docEditorLoaded$.next(this.codemirror)}codemirrorInit(W){this.codemirror=V.fromTextArea(this.host.nativeElement,W),this.codemirror.setValue(this._value),this.codemirror.on("change",()=>{const ie=this.codemirror.getValue();ie!==this._value&&(this._value=ie,this._onChange(ie),this.change.emit(ie),this.editorService.docContentModified$.next(ie))}),this.codemirror.on("cursorActivity",ie=>this.changeCursorStyle(ie)),this.codemirror.on("focus",()=>{this.focus.emit()}),this.codemirror.on("blur",()=>{this._onTouched(),this.blur.emit()})}changeCursorStyle(W){const ie=W.getCursor(),Ce=this.codemirror.cursorCoords(ie),_e=document.elementFromPoint(Ce.left,Ce.top+5),Ae=W.display.cursorDiv;_e&&_e.className.includes("cm-em")?Ae.classList.contains("cursor-italic")||Ae.classList.add("cursor-italic"):Ae.classList.remove("cursor-italic")}refresh(){this.codemirror.refresh()}_onChange(W){}_onTouched(){}writeValue(W){this.codemirror&&(this._value=W||"",this.codemirror.setValue(this._value),W&&this.editorService.docContentSet$.next(this.codemirror))}registerOnChange(W){this._onChange=W}registerOnTouched(W){this._onTouched=W}setDisabledState(W){this.host.nativeElement.disabled=!0}}return ce.\u0275fac=function(W){return new(W||ce)(s.Y36(N),s.Y36(P.dU))},ce.\u0275cmp=s.Xpm({type:ce,selectors:[["ms-codemirror"]],viewQuery:function(W,ie){if(1&W&&s.Gf(te,5),2&W){let Ce;s.iGM(Ce=s.CRH())&&(ie.host=Ce.first)}},inputs:{config:"config"},outputs:{change:"change",focus:"focus",blur:"blur"},features:[s._Bn([{provide:X.JU,useExisting:(0,s.Gpc)(()=>ce),multi:!0}]),s.qOj],decls:2,vars:0,consts:[["host",""]],template:function(W,ie){1&W&&s._UZ(0,"textarea",null,0)},encapsulation:2}),ce})();var $=de(2518),j=de(6681),pe=de(1935),y=de(3860);let le=(()=>{class ce{constructor(W){this.dialogRef=W}}return ce.\u0275fac=function(W){return new(W||ce)(s.Y36(pe.so))},ce.\u0275cmp=s.Xpm({type:ce,selectors:[["ng-component"]],decls:11,vars:2,consts:[[2,"z-index","1000"],["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(W,ie){1&W&&(s.TgZ(0,"div",0),s.TgZ(1,"h1",1),s._uU(2,"Save?"),s.qZA(),s.TgZ(3,"div",2),s.TgZ(4,"p"),s._uU(5," Document modified, are you want to save? "),s.qZA(),s.qZA(),s.TgZ(6,"div",3),s.TgZ(7,"button",4),s._uU(8,"No"),s.qZA(),s.TgZ(9,"button",5),s._uU(10,"Yes"),s.qZA(),s.qZA(),s.qZA()),2&W&&(s.xp6(7),s.Q6J("mat-dialog-close","No"),s.xp6(2),s.Q6J("mat-dialog-close","Yes"))},directives:[pe.uh,pe.xY,pe.H8,y.lW,pe.ZT],encapsulation:2}),ce})();var fe=de(1744),Ee=de(7992),He=de(8854),ze=de(7380),je=de(6251),D=de(2908),b=de(5649),Te=de(3550),B=de(925),K=de(3961);let ne=(()=>{class ce extends P.LF{constructor(W,ie,Ce){super(),this.editorService=W,this.store=ie,this.documentEffects=Ce,this.isSyncing$=new D.X(!1),this.editorLoaded$=this.editorService.docEditorLoaded$,super.addSub(this.store.currentDocStatus_IsEditorDirty$.pipe((0,b.V)(this.editorLoaded$),(0,Te.b)(P.pe),(0,$.b)(([_e,Ae])=>{_e&&this.documentEffects.saveDocument_.next({content:Ae.getValue(),format:P.cZ.md})}),(0,P.P0)(8,P.pe))).addSub(this.editorService.docContentSet$.subscribe(_e=>{this.docLoadedHandler(_e)})).addSub(this.editorService.docContentModified$.pipe((0,b.V)(this.editorLoaded$)).subscribe(([_e,Ae])=>this.checkDirty(Ae))).addSub(this.documentEffects.saveDocument_.operationStatus$.pipe((0,b.V)(this.editorLoaded$)).subscribe(([_e,Ae])=>{_e.step===B.m7.Start?(this.docSavedHandler(Ae),this.isSaving=!0):_e.isEndStatus()&&(this.isSaving=!1)}))}docLoadedHandler(W){const ie=W.getDoc();this.contentGeneration=ie.changeGeneration(),ie.clearHistory(),this.checkDirty(W)}docSavedHandler(W){W&&(this.contentGeneration=W.getDoc().changeGeneration(!1),this.checkDirty(W))}checkDirty(W){const ie=this.store.currentDocStatus$.state;if(!ie||!this.contentGeneration)return;const Ce=!W.getDoc().isClean(this.contentGeneration);ie.isEditorDirty!==Ce&&this.store.updateCurrentDocStatus({isEditorDirty:Ce})}}return ce.\u0275fac=function(W){return new(W||ce)(s.LFG(N),s.LFG(K.G),s.LFG(je.CL))},ce.\u0275prov=s.Yz7({token:ce,factory:ce.\u0275fac}),ce})();de(1900),de(8823),de(8543);var ve=de(7826),Qe=de(6527);const Ke=["imageUpload"],hr=["progress"];function nr(ce,Je){if(1&ce&&(s.TgZ(0,"span"),s._uU(1),s.qZA()),2&ce){const W=s.oxw();s.xp6(1),s.Oqu(W.data.message)}}function pt(ce,Je){if(1&ce&&s._UZ(0,"mat-progress-bar",6,7),2&ce){const W=s.oxw();s.Q6J("value",W.progressPercent)}}function yt(ce,Je){if(1&ce){const W=s.EpF();s.TgZ(0,"div",8),s.TgZ(1,"button",9),s.NdJ("click",function(){return s.CHM(W),s.oxw().action()}),s._uU(2),s.qZA(),s.qZA()}if(2&ce){const W=s.oxw();s.xp6(2),s.Oqu(W.data.action)}}let ir=(()=>{class ce{constructor(W,ie){this.data=W,this.snackBarRef=ie,this.progressPercent=0,this.showMessage=!0,this.accept="image/*",this.accept=W.accept}onFileChanged(W){this.selectedFile=W.target.files[0],this.showMessage=!1,this.data.action="cancel",this.data.takeAction(this.selectedFile,ie=>{this.progressPercent=ie})}get hasAction(){return!!this.data.action}action(){"cancel"!==this.data.action?(this.data.selectFile(),this.imageUpload.nativeElement.click()):this.data.cancelAction()}}return ce.\u0275fac=function(W){return new(W||ce)(s.Y36(ve.qD),s.Y36(ve.OX))},ce.\u0275cmp=s.Xpm({type:ce,selectors:[["ms-file-upload"]],viewQuery:function(W,ie){if(1&W&&(s.Gf(Ke,5),s.Gf(hr,5)),2&W){let Ce;s.iGM(Ce=s.CRH())&&(ie.imageUpload=Ce.first),s.iGM(Ce=s.CRH())&&(ie.progressBar=Ce.first)}},decls:7,vars:4,consts:[["type","file",2,"display","none",3,"accept","change"],["imageUpload",""],[1,"mat-simple-snackbar"],[4,"ngIf"],["mode","determinate",3,"value",4,"ngIf"],["class","mat-simple-snackbar-action",4,"ngIf"],["mode","determinate",3,"value"],["progress",""],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(W,ie){1&W&&(s.TgZ(0,"input",0,1),s.NdJ("change",function(_e){return ie.onFileChanged(_e)}),s.qZA(),s.TgZ(2,"div"),s.TgZ(3,"div",2),s.YNc(4,nr,2,1,"span",3),s.YNc(5,pt,2,1,"mat-progress-bar",4),s.YNc(6,yt,3,1,"div",5),s.qZA(),s.qZA()),2&W&&(s.Q6J("accept",ie.accept),s.xp6(4),s.Q6J("ngIf",ie.showMessage),s.xp6(1),s.Q6J("ngIf",!ie.showMessage),s.xp6(1),s.Q6J("ngIf",ie.hasAction))},directives:[x.O5,Qe.pW,y.lW],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2}),ce})();var gr=de(4992),tr=de(7737),Dt=de(3346),Ht=de(8453);let Nr=(()=>{class ce{constructor(W,ie,Ce){this._snackBar=W,this._github=ie,this._store=Ce}upload(W){let ie=null,Ce=null;const _e=this._snackBar.openFromComponent(ir,{data:{accept:`${W}/*`,message:`pick ${W} to upload?`,action:"Ok",selectFile:()=>clearTimeout(ie),cancelAction:()=>{Ce&&Ce.unsubscribe(),console.log(`${W} uploading canceled`),setTimeout(Ae=>_e.dismiss(),1e3)},takeAction:(Ae,Nt)=>{const zt=new FileReader;zt.onloadend=Ve=>{const Ze=zt.result,kt=Ze.substr(Ze.indexOf(",")+1);Ce=this._github.init().pipe((0,gr.w)(Mt=>{const ot=this._store.currentId_.state,ke=(new Date).toISOString().replace(/[-:.]/g,"");return Mt.newFileReportProgress(`${tr.IQ}/${ot}/${W}/${ke}-${Ae.name}`,kt,!0)})).subscribe({next(Mt){switch(Mt.type){case Dt.dt.UploadProgress:const ot=Math.round(100*Mt.loaded/Mt.total);Nt(ot);break;case Dt.dt.Response:this.fileUploaded(Mt.body.content.download_url),_e.dismiss()}},error(Mt){_e.dismiss(),this._snackBar.open(Mt.error.message,"ok",{duration:2e3}),console.error(Mt)}})},zt.readAsDataURL(Ae)}},duration:0});ie=setTimeout(Ae=>_e.dismiss(),6e3)}}return ce.\u0275fac=function(W){return new(W||ce)(s.LFG(ve.ux),s.LFG(Ht.SS),s.LFG(K.G))},ce.\u0275prov=s.Yz7({token:ce,factory:ce.\u0275fac,providedIn:"root"}),ce})(),Kr=(()=>{class ce{constructor(W,ie,Ce,_e){this._editorService=W,this._commandService=ie,this._uploadService=Ce,this.markdownStore=_e,this._commandService.commands.subscribe(Ae=>this.handleCommand(Ae)),this._editorService.docEditorLoaded$.subscribe(Ae=>{ce.COMMANDS_CONFIG||(ce.COMMANDS_CONFIG={Bold:{command:"Bold",func:(Ve,Ze)=>`**${Ve||Ze}**`,startSize:2,hotKey:"Ctrl-M B"},Italic:{command:"Italic",func:(Ve,Ze)=>`*${Ve||Ze}*`,startSize:1,hotKey:"Ctrl-M T"},Heading:{command:"Heading",func:(Ve,Ze)=>`# ${Ve||Ze}`,startSize:2,hotKey:"Ctrl-M H"},Reference:{command:"Reference",func:(Ve,Ze)=>`> ${Ve||Ze}`,startSize:2,hotKey:"Ctrl-M R"},Link:{command:"Link",func:(Ve,Ze)=>`[${Ve||Ze}]()`,endSize:1,hotKey:"Ctrl-M L"},Image:{command:"Image",func:(Ve,Ze)=>`![${Ve||Ze}]()`,endSize:1,hotKey:"Ctrl-M I"},Ul:{command:"Ul",func:(Ve,Ze)=>`- ${Ve||Ze}`,startSize:2,hotKey:"Ctrl-M U"},Ol:{command:"Ol",func:(Ve,Ze)=>`1 ${Ve||Ze}`,startSize:2,hotKey:"Ctrl-M O"},Code:{command:"Code",func:(Ve,Ze,kt)=>{const Mt=this.editor.getCursor(),ot=this.editor.getSearchCursor(/^\s*```[^\S\n\r]*(\S+)/,Mt);let We,ke=ot.findPrevious();return ke?We=ot.pos.match[1]:(ke=ot.findNext(),We=ke?ot.pos.match[1]:""),kt.startSize=We?We.length+4:3,"```"+We+"\r\n"+(Ve||Ze)+"\r\n```"},startSize:3,hotKey:"Ctrl-M C"}}),this.editor=Ae;const Nt=ce.COMMANDS_CONFIG,zt={};for(const Ve in Nt)if(Nt.hasOwnProperty(Ve)){const kt=this;zt[Nt[Ve].hotKey]=function(){kt.insertContent(Ve)}}this.codeMirrorMaps(zt)})}codeMirrorMaps(W){W["Ctrl-M Q"]=function(Ce){Ce.display.input.textarea.blur()},W["Ctrl-Alt-Up"]=()=>{this.markdownStore.scrollView_.next({isUp:!0})},W["Ctrl-Alt-Down"]=()=>{this.markdownStore.scrollView_.next({isUp:!1})},W["Ctrl-Up"]="scrollLineUp",W["Ctrl-G"]="jumpToLine",W["Ctrl-Down"]="scrollLineDown",W["Ctrl-F"]="findPersistent",W["Shift-Delete"]="killLine",W["Shift-Backspace"]="delLineLeft",W["Ctrl-Shift-K"]="deleteLine",W.Home="goLineStart",W.End="goLineEnd",W["Ctrl-Left"]="goWordLeft",W["Ctrl-Right"]="goWordRight",W["Ctrl-Alt-Left"]="goSubwordLeft",W["Ctrl-Alt-Right"]="goSubwordRight",W["Ctrl-Backspace"]="delWordBefore",W["Ctrl-Shift-Backspace"]="delWordAfter",W["Ctrl-Alt-Backspace"]="delGroupBefore",W["Ctrl-Alt-Shift-Backspace"]="delGroupAfter",W.Tab=Ce=>{Ce.somethingSelected()?Ce.indentSelection("add"):Ce.execCommand("insertSoftTab")},W["Shift-Tab"]=Ce=>{Ce.indentSelection("subtract")};const ie=this._commandService.commands;W["Alt-\\"]=ie.goToBracket,W["Alt-Shift-\\"]=ie.selectBetweenBrackets,W["Alt-Shift-Right"]=ie.selectScope,W["Ctrl-Enter"]=ie.insertLineAfter,W["Ctrl-Shift-Enter"]=ie.insertLineBefore,W["Alt-Up"]=ie.swapLineUp,W["Alt-Down"]=ie.swapLineDown,W["Ctrl-/"]=ie.toggleCommentIndented,W["Ctrl-I"]=ie.selectLine,W["Ctrl-D"]=ie.selectNextOccurrence,W["Ctrl-H"]=ie.replace,W.Esc=ie.singleSelectionTop,W["Alt-Shift+Down"]=ie.duplicateLine,W.Backspace=ie.smartBackspace,W["Alt-M"]="showInCenter",W["Ctrl-M M"]=this.insertMeta,this.editor.setOption("extraKeys",V.normalizeKeyMap(W))}insertMeta(W){W.setCursor({line:1,ch:0}),W.replaceSelection(Ee.B0,"start"),W.focus()}handleCommand(W){this.insertContent(W.name)}insertContent(W){if(!this.editor)return;let ie=this.editor.getSelection();if("Focus"===W)return void this.editor.focus();if("Meta"===W)return void this.insertMeta(this.editor);const Ce=ce.COMMANDS_CONFIG[W];ie=Ce.func(ie,"",Ce);const _e=this.editor.getCursor();if(Ce.startSize)this.editor.replaceSelection(ie,"start"),this.editor.focus(),this.editor.setCursor({line:_e.line,ch:_e.ch+Ce.startSize});else if(Ce.endSize){this.editor.replaceSelection(ie,"around");const Ae=this.editor.getCursor("to");this.editor.focus(),this.editor.setCursor({line:Ae.line,ch:Ae.ch-Ce.endSize})}"Image"===Ce.command&&(this._uploadService.fileUploaded=Ae=>this.editor.replaceSelection(Ae),this._uploadService.upload("image"))}}return ce.\u0275fac=function(W){return new(W||ce)(s.LFG(N),s.LFG(P.VD),s.LFG(Nr),s.LFG(H.A))},ce.\u0275prov=s.Yz7({token:ce,factory:ce.\u0275fac}),ce})();var Fr=de(4911),mr=de(5654),Yt=de(6923),Or=de(955),Tt=de(4478),ft=de(6590),St=de(3359),Ue=de(7945),yr=de(7394),Ut=de(9819),xt=de(9831);function $e(ce,Je){if(1&ce){const W=s.EpF();s.TgZ(0,"button",11),s.NdJ("click",function(){return s.CHM(W),s.oxw().insertContent("Bold")}),s.TgZ(1,"mat-icon"),s._uU(2,"format_bold"),s.qZA(),s.qZA()}}function rt(ce,Je){if(1&ce){const W=s.EpF();s.TgZ(0,"button",12),s.NdJ("click",function(){return s.CHM(W),s.oxw().insertContent("Italic")}),s.TgZ(1,"mat-icon"),s._uU(2,"format_italic"),s.qZA(),s.qZA()}}function st(ce,Je){if(1&ce){const W=s.EpF();s.TgZ(0,"button",13),s.NdJ("click",function(){return s.CHM(W),s.oxw().insertContent("Heading")}),s.TgZ(1,"mat-icon"),s._uU(2,"title"),s.qZA(),s.qZA()}}function Ft(ce,Je){if(1&ce){const W=s.EpF();s.TgZ(0,"button",14),s.NdJ("click",function(){return s.CHM(W),s.oxw().insertContent("Reference")}),s.TgZ(1,"mat-icon"),s._uU(2,"format_quote"),s.qZA(),s.qZA()}}function vt(ce,Je){if(1&ce){const W=s.EpF();s.TgZ(0,"button",15),s.NdJ("click",function(){return s.CHM(W),s.oxw().insertContent("Ul")}),s.TgZ(1,"mat-icon"),s._uU(2,"format_list_bulleted"),s.qZA(),s.qZA()}}function Br(ce,Je){if(1&ce){const W=s.EpF();s.TgZ(0,"button",16),s.NdJ("click",function(){return s.CHM(W),s.oxw().insertContent("Ol")}),s.TgZ(1,"mat-icon"),s._uU(2,"format_list_numbered"),s.qZA(),s.qZA()}}function wt(ce,Je){if(1&ce){const W=s.EpF();s.TgZ(0,"button",17),s.NdJ("click",function(){return s.CHM(W),s.oxw().insertContent("Code")}),s.TgZ(1,"mat-icon"),s._uU(2,"code"),s.qZA(),s.qZA()}}function xr(ce,Je){if(1&ce){const W=s.EpF();s.TgZ(0,"button",18),s.NdJ("click",function(){return s.CHM(W),s.oxw().insertContent("Link")}),s.TgZ(1,"mat-icon"),s._uU(2,"link"),s.qZA(),s.qZA()}}function or(ce,Je){if(1&ce){const W=s.EpF();s.TgZ(0,"button",19),s.NdJ("click",function(){return s.CHM(W),s.oxw().insertContent("Image")}),s.TgZ(1,"mat-icon"),s._uU(2,"image"),s.qZA(),s.qZA()}}const an=function(ce){return{"tool-bar--bottom":ce}};let Rr=(()=>{class ce{constructor(W,ie,Ce){this._verticalSplitPane=W,this._utils=ie,this._keyMapService=Ce,this._destroy$=new U.x,this.isScreenWide$=this._utils.isWideScreen$,this.more=()=>{},this._hideIcons={Ol:!1,Italic:!1,Link:!1},this._verticalSplitPane.notifySizeDidChange.pipe((0,xt.R)(this._destroy$)).subscribe(_e=>{this.width!==_e.primary&&(this.width=`${_e.primary}px`)})}get options(){return this._options}insertContent(W){this._keyMapService.insertContent(W)}set options(W){this._options=W||{hideIcons:[]},this._hideIcons={},(this._options.hideIcons||[]).forEach(ie=>{this._hideIcons[ie]=!0})}ngOnDestroy(){this._destroy$.next(null)}}return ce.\u0275fac=function(W){return new(W||ce)(s.Y36(Ee.Mi),s.Y36(P.dU),s.Y36(Kr))},ce.\u0275cmp=s.Xpm({type:ce,selectors:[["ms-codemirror-toolbar"]],hostVars:2,hostBindings:function(W,ie){2&W&&s.Udp("width",ie.width)},inputs:{options:"options"},decls:14,vars:14,consts:[[1,"tool-bar",2,"height","3.8rem",3,"ngClass"],["mat-icon-button","","title","Bold",3,"click",4,"ngIf"],["mat-icon-button","","title","Italic",3,"click",4,"ngIf"],["mat-icon-button","","title","Heading",3,"click",4,"ngIf"],["mat-icon-button","","title","Reference",3,"click",4,"ngIf"],["mat-icon-button","","title","Unordered List",3,"click",4,"ngIf"],["mat-icon-button","","title","Ordered List",3,"click",4,"ngIf"],["mat-icon-button","","title","Code Block",3,"click",4,"ngIf"],["mat-icon-button","","title","Link",3,"click",4,"ngIf"],["mat-icon-button","","title","Image",3,"click",4,"ngIf"],["mat-icon-button","","title","Meta Data",3,"click"],["mat-icon-button","","title","Bold",3,"click"],["mat-icon-button","","title","Italic",3,"click"],["mat-icon-button","","title","Heading",3,"click"],["mat-icon-button","","title","Reference",3,"click"],["mat-icon-button","","title","Unordered List",3,"click"],["mat-icon-button","","title","Ordered List",3,"click"],["mat-icon-button","","title","Code Block",3,"click"],["mat-icon-button","","title","Link",3,"click"],["mat-icon-button","","title","Image",3,"click"]],template:function(W,ie){1&W&&(s.TgZ(0,"mat-toolbar",0),s.ALo(1,"async"),s.YNc(2,$e,3,0,"button",1),s.YNc(3,rt,3,0,"button",2),s.YNc(4,st,3,0,"button",3),s.YNc(5,Ft,3,0,"button",4),s.YNc(6,vt,3,0,"button",5),s.YNc(7,Br,3,0,"button",6),s.YNc(8,wt,3,0,"button",7),s.YNc(9,xr,3,0,"button",8),s.YNc(10,or,3,0,"button",9),s.TgZ(11,"button",10),s.NdJ("click",function(){return ie.insertContent("Meta")}),s.TgZ(12,"mat-icon"),s._uU(13,"receipt"),s.qZA(),s.qZA(),s.qZA()),2&W&&(s.Q6J("ngClass",s.VKq(12,an,!1===s.lcZ(1,10,ie.isScreenWide$))),s.xp6(2),s.Q6J("ngIf",!ie._hideIcons.Bold),s.xp6(1),s.Q6J("ngIf",!ie._hideIcons.Italic),s.xp6(1),s.Q6J("ngIf",!ie._hideIcons.Heading),s.xp6(1),s.Q6J("ngIf",!ie._hideIcons.Refrence),s.xp6(1),s.Q6J("ngIf",!ie._hideIcons.Ul),s.xp6(1),s.Q6J("ngIf",!ie._hideIcons.Ol),s.xp6(1),s.Q6J("ngIf",!ie._hideIcons.Code),s.xp6(1),s.Q6J("ngIf",!ie._hideIcons.Link),s.xp6(1),s.Q6J("ngIf",!ie._hideIcons.Image))},directives:[Ue.Ye,x.mk,x.O5,y.lW,yr.Hw],pipes:[x.Ov],styles:[".tool-bar--bottom[_ngcontent-%COMP%]{position:fixed;bottom:0;padding:0;overflow-x:auto;overflow-y:hidden}.tool-bar[_ngcontent-%COMP%]{background:whitesmoke;z-index:8}[_nghost-%COMP%]{z-index:10;display:block}"]}),ce})();const Zr=["toolbar"];function qr(ce,Je){if(1&ce){const W=s.EpF();s.TgZ(0,"button",4),s.NdJ("click",function(){return s.CHM(W),s.oxw().togglePreview()}),s.TgZ(1,"mat-icon"),s._uU(2),s.ALo(3,"async"),s.qZA(),s.qZA()}if(2&ce){const W=s.oxw();s.xp6(2),s.Oqu((s.lcZ(3,1,W.showPreview$),"chrome_reader_mode"))}}function Jt(ce,Je){if(1&ce){const W=s.EpF();s.TgZ(0,"button",10),s.NdJ("click",function(Ce){return s.CHM(W),s.oxw().more(Ce)}),s._uU(1),s.qZA()}if(2&ce){const W=s.oxw();s.xp6(1),s.hij(" ",W.lockScrollWithView?"UnLock Scroll":"Lock Scroll"," ")}}let Xr=(()=>{class ce extends Or.LF{constructor(W,ie,Ce,_e,Ae,Nt,zt,Ve,Ze,kt){super(),this.router=W,this.utils=ie,this.markdown=Ce,this._editorService=_e,this.docService=Ae,this.store=Nt,this.docSaver=zt,this._breakpointObserver=Ve,this.documentEffects=Ze,this.markdownStore=kt,this.DocumentMode=H.U,this.isScreenWide$=this.utils.isWideScreen$,this.isEditorDirty$=this.store.currentDocStatus_IsEditorDirty$.pipe((0,Yt.O)(!1)),this.isDbDirty$=this.store.currentDocStatus_IsDbDirty$.pipe((0,Yt.O)(!1)),this.isSyncing$=this.store.currentDocStatus_IsSyncing$.pipe((0,Yt.O)(!1)),this.dirtyInfo$=(0,Fr.a)([this.isEditorDirty$,this.isDbDirty$,this.isSyncing$]).pipe((0,j.U)(([ot,ke,We])=>ot?"modification not saved":ke?"modification not sync with server":We?"syncing modification with server":"")),this.showPreview$=this.markdownStore.editWithPreview_,this.save=()=>{const ot=this.editor.getValue();this.documentEffects.saveDocument_.next({content:ot,format:P.cZ.md,forceUpdate:!0})},this.undo=()=>{!this.editor||this.editor.undo()},this.redo=()=>{!this.editor||this.editor.redo()},this.toViewMode=ot=>{this.markdownStore.documentMode_.next(H.U.View)},this.new=()=>{this.documentEffects.createDocument_.next({format:P.cZ.md})},this.lockScrollWithView=!1,super.addSub(this._breakpointObserver.observe(["(orientation: portrait)","(orientation: landscape)"])).addSub(this._editorService.docEditorLoaded$.subscribe(ot=>{this.editor=ot}));const Mt=this._editorService.commands;Mt.save=this.save,Mt.scrollLineUp=function(ot){const ke=ot.getScrollInfo();if(!ot.somethingSelected()){const We=ot.lineAtHeight(ke.top+ke.clientHeight,"local");ot.getCursor().line>=We&&ot.execCommand("goLineUp")}ot.scrollTo(null,ke.top-ot.defaultTextHeight())},Mt.scrollLineDown=function(ot){const ke=ot.getScrollInfo();if(!ot.somethingSelected()){const We=ot.lineAtHeight(ke.top,"local")+1;ot.getCursor().line<=We&&ot.execCommand("goLineDown")}ot.scrollTo(null,ke.top+ot.defaultTextHeight())}}back(W){this.router.navigateByUrl("/home")}togglePreview(){this.markdownStore.editWithPreview_.next(!this.markdownStore.editWithPreview_.state)}ngAfterViewInit(){this.hideHeight=this.toolbar.nativeElement.offsetHeight}previewPanelClick(W){W.preventDefault(),W.stopPropagation()}more(W){"0"===W.item.id&&(this.lockScrollWithView=!this.lockScrollWithView,this.markdownStore.isLockEditorScrollWithView_.next(this.lockScrollWithView))}}return ce.\u0275fac=function(W){return new(W||ce)(s.Y36(oe.F0),s.Y36(Or.dU),s.Y36(Tt.l),s.Y36(N),s.Y36(ft.R7),s.Y36(K.G),s.Y36(ne),s.Y36(St.Yg),s.Y36(je.CL),s.Y36(H.A))},ce.\u0275cmp=s.Xpm({type:ce,selectors:[["editor-toolbar"]],viewQuery:function(W,ie){if(1&W&&s.Gf(Zr,5,s.SBq),2&W){let Ce;s.iGM(Ce=s.CRH())&&(ie.toolbar=Ce.first)}},features:[s.qOj],decls:38,vars:22,consts:[["color","primary",2,"z-index","20","pointer-events","all"],["toolbar",""],["mat-icon-button","","routerLinkActive","",3,"click"],[2,"flex","1 1 auto","margin","2.4rem"],["mat-icon-button","",3,"click"],["mat-icon-button","",3,"title","click"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu",""],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-menu-item","","disabled","",3,"click"],[2,"pointer-events","all"]],template:function(W,ie){if(1&W&&(s.TgZ(0,"mat-toolbar",0,1),s.TgZ(2,"mat-toolbar-row"),s.TgZ(3,"button",2),s.NdJ("click",function(_e){return ie.back(_e)}),s.TgZ(4,"mat-icon"),s._uU(5," arrow_back "),s.qZA(),s.qZA(),s.TgZ(6,"span",3),s._uU(7,"Edit"),s.qZA(),s.TgZ(8,"button",4),s.NdJ("click",function(){return ie.undo()}),s.TgZ(9,"mat-icon"),s._uU(10," undo "),s.qZA(),s.qZA(),s.TgZ(11,"button",4),s.NdJ("click",function(){return ie.redo()}),s.TgZ(12,"mat-icon"),s._uU(13," redo "),s.qZA(),s.qZA(),s.TgZ(14,"button",5),s.NdJ("click",function(){return ie.save()}),s.ALo(15,"async"),s.ALo(16,"async"),s.ALo(17,"async"),s.ALo(18,"async"),s.TgZ(19,"mat-icon"),s._uU(20,"save"),s.qZA(),s.qZA(),s.YNc(21,qr,4,3,"button",6),s.ALo(22,"async"),s.TgZ(23,"button",4),s.NdJ("click",function(_e){return ie.toViewMode(_e)}),s.TgZ(24,"mat-icon"),s._uU(25," visibility "),s.qZA(),s.qZA(),s.TgZ(26,"button",7),s.TgZ(27,"mat-icon"),s._uU(28," more_vert "),s.qZA(),s.qZA(),s.TgZ(29,"mat-menu",null,8),s.YNc(31,Jt,2,1,"button",9),s.ALo(32,"async"),s.TgZ(33,"button",10),s.NdJ("click",function(_e){return ie.more(_e)}),s._uU(34,"Key Map"),s.qZA(),s.TgZ(35,"button",11),s.NdJ("click",function(_e){return ie.more(_e)}),s._uU(36,"Item 2"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s._UZ(37,"ms-codemirror-toolbar",12)),2&W){const Ce=s.MAs(30);s.xp6(14),s.ekj("mem-dirty",s.lcZ(15,10,ie.isEditorDirty$))("db-dirty",s.lcZ(16,12,ie.isDbDirty$))("net-syncing",s.lcZ(17,14,ie.isSyncing$)),s.Q6J("title",s.lcZ(18,16,ie.dirtyInfo$)),s.xp6(7),s.Q6J("ngIf",s.lcZ(22,18,ie.isScreenWide$)),s.xp6(5),s.Q6J("matMenuTriggerFor",Ce),s.xp6(5),s.Q6J("ngIf",s.lcZ(32,20,ie.isScreenWide$))}},directives:[Ue.Ye,Ue.rD,y.lW,oe.Od,yr.Hw,x.O5,Ut.p6,Ut.VK,Ut.OP,Rr],pipes:[x.Ov],styles:['@charset "UTF-8";[_nghost-%COMP%]{pointer-events:none}a[_ngcontent-%COMP%]:hover{color:#ffffffb3;text-decoration:none}.mem-dirty[_ngcontent-%COMP%]:before{content:" \\25cf";font-size:1.34rem;color:red;margin-top:.6rem;margin-left:.9rem;position:absolute}.db-dirty[_ngcontent-%COMP%]{color:#4169e1}.net-syncing[_ngcontent-%COMP%]:after{margin-top:-1em;margin-left:.4em;content:"";display:inherit;border:3px solid #f3f3f3;border-radius:50%;border-top:3px solid #3498db;width:13px;height:13px;animation:spin 1.8s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}'],data:{animation:[(0,mr.X$)("show",[(0,mr.SB)("true",(0,mr.oB)({opacity:1,transform:"translateY(0)"})),(0,mr.eR)("void => true",[(0,mr.oB)({opacity:0,transform:"translateY(-100%)"}),(0,mr.jt)("0.2s ease-in")]),(0,mr.eR)("true => void",[(0,mr.jt)("0.2s ease-out",(0,mr.oB)({opacity:0,transform:"translateY(-100%)"}))])])]}}),ce})();var Vr=de(692),Qt=de(9038);const Gr=function(ce){return{container$:ce}},jr=function(ce,Je){return[ce,Je]};let ar=(()=>{class ce extends ze.L{constructor(W,ie,Ce,_e,Ae,Nt,zt,Ve,Ze){super(),this.documentEffects=W,this._elementRef=ie,this.dialog=Ce,this.markdownStore=_e,this.gestureConfig=Ae,this.editorService=Nt,this.store=zt,this.ngZone=Ve,this.utils=Ze,this.editorLoaded=!1,this.DocumentMode=H.U,this.docMode$=this.markdownStore.documentMode_,this.markdown$=this.store.currentDocContentString$,this.toViewMode=kt=>{this.markdownStore.documentMode_.next(H.U.View)},super.addSub(this.editorService.docEditorLoaded$.subscribe(()=>{setTimeout(()=>this.editorLoaded=!0,0)})).addSub(this.markdownStore.editIt_.subscribe(({sourceLine:kt}={})=>{!kt||(this.markdownStore.documentMode_.next(H.U.Edit),setTimeout(()=>{this.editorService.gotoLine(kt[0])},0))})).addSub(this.editorService.docContentModified$.subscribe(this.markdownStore.editorContentChanged_)).addSub(this.docMode$.subscribe(kt=>{kt===H.U.Edit&&setTimeout(()=>this.codeMirrorComponent.refresh(),0)}))}ngAfterViewInit(){const W=this._elementRef.nativeElement.getElementsByClassName("CodeMirror-scroll")[0];this.markdownStore.editor_.next(new P.vR(W,void 0,void 0,this.ngZone));let ie=null;super.addSub(this.utils.isWideScreen$.pipe((0,$.b)(Ce=>{Ce?ie&&(ie.off("swiperight"),ie.off("swipeleft"),ie.destroy(),ie=null):null===ie&&(ie=this.gestureConfig.buildHammer(W),ie.on("swiperight",this.toViewMode),ie.on("swipeleft",this.toViewMode))})).subscribe())}canDeactivate(){const W=()=>{const Ce=this.store.currentId_.state;Ce===Ee.h2&&this.documentEffects.deleteDocument_.next({id:Ce})};return this.store.currentDocStatus$.state.isEditorDirty?this.dialog.open(le).afterClosed().pipe((0,j.U)(Ce=>"Yes"===Ce?(this.documentEffects.saveDocument_.next({content:this.codeMirrorComponent.value,forceUpdate:!0}),!1):(W(),!0))):(W(),(0,fe.of)(!0))}}return ce.\u0275fac=function(W){return new(W||ce)(s.Y36(je.CL),s.Y36(s.SBq),s.Y36(pe.uw),s.Y36(H.A),s.Y36(He.ok),s.Y36(N),s.Y36(K.G),s.Y36(s.R0b),s.Y36(P.dU))},ce.\u0275cmp=s.Xpm({type:ce,selectors:[["ms-markdown-editor"]],viewQuery:function(W,ie){if(1&W&&s.Gf(Z,5),2&W){let Ce;s.iGM(Ce=s.CRH())&&(ie.codeMirrorComponent=Ce.first)}},features:[s.qOj],decls:6,vars:16,consts:[[3,"scrollHide","hide","hideHeight"],["toolbar",""],[3,"ngModel"],[3,"isRunning"]],template:function(W,ie){if(1&W&&(s._UZ(0,"editor-toolbar",0,1),s.ALo(2,"async"),s._UZ(3,"ms-codemirror",2),s.ALo(4,"async"),s._UZ(5,"sk-cube-grid",3)),2&W){const Ce=s.MAs(1);s.Q6J("scrollHide",s.WLB(13,jr,s.VKq(9,Gr,ie.markdownStore.viewer_),s.VKq(11,Gr,ie.markdownStore.editor_)))("hide",s.lcZ(2,5,ie.docMode$)!==ie.DocumentMode.Edit)("hideHeight",Ce.hideHeight),s.xp6(3),s.Q6J("ngModel",s.lcZ(4,7,ie.markdown$)),s.xp6(2),s.Q6J("isRunning",!ie.editorLoaded)}},directives:[Xr,Vr.M,Z,X.JJ,X.On,Qt.r],pipes:[x.Ov],styles:["[_nghost-%COMP%]{display:block;height:100vh;overflow-y:auto}"]}),ce})();const $r=[{path:"",canDeactivate:[P.Ic],component:ar}];let lr=(()=>{class ce{}return ce.\u0275fac=function(W){return new(W||ce)},ce.\u0275mod=s.oAB({type:ce}),ce.\u0275inj=s.cJS({imports:[[oe.Bz.forChild($r)],oe.Bz]}),ce})();var It=de(7643),kr=de(5757),Pr=de(6599);let dr=(()=>{class ce{constructor(W){this.editor=W}}return ce.\u0275fac=function(W){return new(W||ce)(s.LFG(N))},ce.\u0275mod=s.oAB({type:ce}),ce.\u0275inj=s.cJS({providers:[Kr,N,ne,Pr.I],imports:[[Ee.m8,x.ez,X.u5,It.Fm,lr,kr.q]]}),ce})()}}]);