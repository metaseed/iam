!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("tslib"),require("rxjs"),require("mousetrap"),require("@angular/common")):"function"==typeof define&&define.amd?define("@metaseed/angular-hotkey",["exports","@angular/core","tslib","rxjs","mousetrap","@angular/common"],t):t((e.metaseed=e.metaseed||{},e.metaseed["angular-hotkey"]={}),e.ng.core,e.tslib,null,null,e.ng.common)}(this,function(e,t,d,n,r,o){"use strict";var i=new t.InjectionToken("HotkeyOptions"),h=function(){function n(e,t,n,r,o,i){this.combo=e,this.callback=t,this.allowIn=n,this.description=r,this.action=o,this.persistent=i,this.combo=Array.isArray(e)?e:[e],this.allowIn=n||[],this.description=r||""}return n.symbolize=function(e){for(var t={command:"⌘",shift:"⇧",left:"←",right:"→",up:"↑",down:"↓","return":"⏎",backspace:"⌫"},n=e.split("+"),r=0;r<n.length;r++)"mod"===n[r]&&(window.navigator&&0<=window.navigator.platform.indexOf("Mac")?n[r]="command":n[r]="ctrl"),n[r]=t[n[r]]||n[r];return n.join(" + ")},Object.defineProperty(n.prototype,"formatted",{get:function(){if(!this._formatted){for(var e=this.combo[0].split(/[\s]/),t=0;t<e.length;t++)e[t]=n.symbolize(e[t]);this._formatted=e}return this._formatted},enumerable:!0,configurable:!0}),n}(),s=function(){function e(e){this.options=e,this.hotkeys=[],this.pausedHotkeys=[],this.cheatSheetToggle=new n.Subject,this._preventIn=["INPUT","SELECT","TEXTAREA"],Mousetrap.prototype.stopCallback=function(e,t,n,r){return!(-1<(" "+t.className+" ").indexOf(" mousetrap "))&&(t.contentEditable&&"true"===t.contentEditable)},this.mousetrap=new Mousetrap,this.options.disableCheatSheet||this.add(new h(this.options.cheatSheetHotkey||"?",function(e){this.cheatSheetToggle.next()}.bind(this),[],this.options.cheatSheetDescription||"Show / hide this help menu")),this.options.cheatSheetCloseEsc&&this.add(new h("esc",function(e){this.cheatSheetToggle.next(!1)}.bind(this),["HOTKEYS-CHEATSHEET"],"Hide this help menu"))}return e.prototype.add=function(i,e){var t,n,s=this;if(Array.isArray(i)){var r=[];try{for(var o=d.__values(i),a=o.next();!a.done;a=o.next()){var l=a.value;r.push(this.add(l,e))}}catch(h){t={error:h}}finally{try{a&&!a.done&&(n=o["return"])&&n.call(o)}finally{if(t)throw t.error}}return r}return this.remove(i),this.hotkeys.push(i),this.mousetrap.bind(i.combo,function(e,t){var n=!0;if(e){var r=e.target||e.srcElement,o=r.nodeName.toUpperCase();-1<(" "+r.className+" ").indexOf(" mousetrap ")?n=!0:-1<s._preventIn.indexOf(o)&&-1===i.allowIn.map(function(e){return e.toUpperCase()}).indexOf(o)&&(n=!1)}if(n)return i.callback.apply(s,[e,t])},e),i},e.prototype.remove=function(e){var t=[];if(!e){try{for(var n=d.__values(this.hotkeys),r=n.next();!r.done;r=n.next()){var o=r.value;t.push(this.remove(o))}}catch(u){a={error:u}}finally{try{r&&!r.done&&(l=n["return"])&&l.call(n)}finally{if(a)throw a.error}}return t}if(Array.isArray(e)){try{for(var i=d.__values(e),s=i.next();!s.done;s=i.next()){o=s.value;t.push(this.remove(o))}}catch(y){h={error:y}}finally{try{s&&!s.done&&(c=i["return"])&&c.call(i)}finally{if(h)throw h.error}}return t}var a,l,h,c,p=this.findHotkey(e);return-1<p?(this.hotkeys.splice(p,1),this.mousetrap.unbind(e.combo),e):null},e.prototype.get=function(e){if(!e)return this.hotkeys;if(Array.isArray(e)){var t=[];try{for(var n=d.__values(e),r=n.next();!r.done;r=n.next()){var o=r.value;t.push(this.get(o))}}catch(l){s={error:l}}finally{try{r&&!r.done&&(a=n["return"])&&a.call(n)}finally{if(s)throw s.error}}return t}for(var i=0;i<this.hotkeys.length;i++)if(-1<this.hotkeys[i].combo.indexOf(e))return this.hotkeys[i];return null;var s,a},e.prototype.pause=function(e){if(!e)return this.pause(this.hotkeys);if(Array.isArray(e)){var t=[];try{for(var n=d.__values(e),r=n.next();!r.done;r=n.next()){var o=r.value;t.push(this.pause(o))}}catch(a){i={error:a}}finally{try{r&&!r.done&&(s=n["return"])&&s.call(n)}finally{if(i)throw i.error}}return t}return this.remove(e),this.pausedHotkeys.push(e),e;var i,s},e.prototype.unpause=function(e){if(!e)return this.unpause(this.pausedHotkeys);if(Array.isArray(e)){var t=[];try{for(var n=d.__values(e),r=n.next();!r.done;r=n.next()){var o=r.value;t.push(this.unpause(o))}}catch(l){i={error:l}}finally{try{r&&!r.done&&(s=n["return"])&&s.call(n)}finally{if(i)throw i.error}}return t}var i,s,a=this.pausedHotkeys.indexOf(e);return-1<a?(this.add(e),this.pausedHotkeys.splice(a,1)):null},e.prototype.reset=function(){this.mousetrap.reset()},e.prototype.findHotkey=function(e){return this.hotkeys.indexOf(e)},e}();s.decorators=[{type:t.Injectable}],s.ctorParameters=function(){return[{type:undefined,decorators:[{type:t.Inject,args:[i]}]}]};var a=function(){function e(e){this.hotkeysService=e,this.helpVisible=!1,this.title="Keyboard Shortcuts:"}return e.prototype.ngOnInit=function(){var t=this;this.subscription=this.hotkeysService.cheatSheetToggle.subscribe(function(e){!1!==e&&(t.hotkeys=t.hotkeysService.hotkeys.filter(function(e){return e.description})),!1===e?t.helpVisible=!1:t.toggleCheatSheet()})},e.prototype.ngOnDestroy=function(){this.subscription&&this.subscription.unsubscribe()},e.prototype.toggleCheatSheet=function(){this.helpVisible=!this.helpVisible},e}();a.decorators=[{type:t.Component,args:[{selector:"hotkeys-cheatsheet",styles:["\n.cfp-hotkeys-container {\n  display: table !important;\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  color: #333;\n  font-size: 1em;\n  background-color: rgba(255,255,255,0.9);\n}\n\n.cfp-hotkeys-container.fade {\n  z-index: -1024;\n  visibility: hidden;\n  opacity: 0;\n  -webkit-transition: opacity 0.15s linear;\n  -moz-transition: opacity 0.15s linear;\n  -o-transition: opacity 0.15s linear;\n  transition: opacity 0.15s linear;\n}\n\n.cfp-hotkeys-container.fade.in {\n  z-index: 10002;\n  visibility: visible;\n  opacity: 1;\n}\n\n.cfp-hotkeys-title {\n  font-weight: bold;\n  text-align: center;\n  font-size: 1.2em;\n}\n\n.cfp-hotkeys {\n  width: 100%;\n  height: 100%;\n  display: table-cell;\n  vertical-align: middle;\n}\n\n.cfp-hotkeys table {\n  margin: auto;\n  color: #333;\n}\n\n.cfp-content {\n  display: table-cell;\n  vertical-align: middle;\n}\n\n.cfp-hotkeys-keys {\n  padding: 5px;\n  text-align: right;\n}\n\n.cfp-hotkeys-key {\n  display: inline-block;\n  color: #fff;\n  background-color: #333;\n  border: 1px solid #333;\n  border-radius: 5px;\n  text-align: center;\n  margin-right: 5px;\n  box-shadow: inset 0 1px 0 #666, 0 1px 0 #bbb;\n  padding: 5px 9px;\n  font-size: 1em;\n}\n\n.cfp-hotkeys-text {\n  padding-left: 10px;\n  font-size: 1em;\n}\n\n.cfp-hotkeys-close {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  font-size: 2em;\n  font-weight: bold;\n  padding: 5px 10px;\n  border: 1px solid #ddd;\n  border-radius: 5px;\n  min-height: 45px;\n  min-width: 45px;\n  text-align: center;\n}\n\n.cfp-hotkeys-close:hover {\n  background-color: #fff;\n  cursor: pointer;\n}\n\n@media all and (max-width: 500px) {\n  .cfp-hotkeys {\n    font-size: 0.8em;\n  }\n}\n\n@media all and (min-width: 750px) {\n  .cfp-hotkeys {\n    font-size: 1.2em;\n  }\n}  "],template:'<div class="cfp-hotkeys-container fade" [ngClass]="{\'in\': helpVisible}" style="display:none"><div class="cfp-hotkeys">\n  <h4 class="cfp-hotkeys-title">{{ title }}</h4>\n  <table><tbody>\n    <tr *ngFor="let hotkey of hotkeys">\n      <td class="cfp-hotkeys-keys">\n        <span *ngFor="let key of hotkey.formatted" class="cfp-hotkeys-key">{{ key }}</span>\n      </td>\n      <td class="cfp-hotkeys-text">{{ hotkey.description }}</td>\n    </tr>\n  </tbody></table>\n  <div class="cfp-hotkeys-close" (click)="toggleCheatSheet()">&#215;</div>\n</div></div>'}]}],a.ctorParameters=function(){return[{type:s}]},a.propDecorators={title:[{type:t.Input}]};var l=function(){function e(e,t){this._hotkeysService=e,this._elementRef=t,this.hotkeysList=[],this.oldHotkeys=[],this.mousetrap=new Mousetrap(this._elementRef.nativeElement)}return e.prototype.ngOnInit=function(){try{for(var e=d.__values(this.hotkeys),t=e.next();!t.done;t=e.next()){var n=t.value,r=Object.keys(n)[0],o=new h(r,n[r]),i=this._hotkeysService.get(r);null!==i&&(this.oldHotkeys.push(i),this._hotkeysService.remove(i)),this.hotkeysList.push(o),this.mousetrap.bind(o.combo,o.callback)}}catch(l){s={error:l}}finally{try{t&&!t.done&&(a=e["return"])&&a.call(e)}finally{if(s)throw s.error}}var s,a},e.prototype.ngOnDestroy=function(){try{for(var e=d.__values(this.hotkeysList),t=e.next();!t.done;t=e.next()){var n=t.value;this.mousetrap.unbind(n.combo)}}catch(i){r={error:i}}finally{try{t&&!t.done&&(o=e["return"])&&o.call(e)}finally{if(r)throw r.error}}var r,o;this._hotkeysService.add(this.oldHotkeys)},e}();l.decorators=[{type:t.Directive,args:[{selector:"[hotkeys]",providers:[s]}]}],l.ctorParameters=function(){return[{type:s},{type:t.ElementRef}]},l.propDecorators={hotkeys:[{type:t.Input}]};var c=function(){function t(){}return t.forRoot=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[s,{provide:i,useValue:e}]}},t}();c.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule],exports:[l,a],declarations:[l,a]}]}],e.CheatSheetComponent=a,e.Hotkey=h,e.HotkeyOptions=i,e.HotkeysService=s,e.HotkeysDirective=l,e.HotkeyModule=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=metaseed-angular-hotkey.umd.min.js.map
