{
  "version": 3,
  "file": "hotkeys.service.js",
  "sources": [
    "ng://@metaseed/angular-hotkey/projects/angular-hotkey/src/lib/hotkeys.service.ts"
  ],
  "sourcesContent": [
    "import { HotkeyOptions, IHotkeyOptions } from './hotkey.options';\nimport { Subject } from 'rxjs';\nimport { Inject, Injectable } from '@angular/core';\nimport { Hotkey } from './hotkey.model';\nimport 'mousetrap';\n\n@Injectable()\nexport class HotkeysService {\n  hotkeys: Hotkey[] = [];\n  pausedHotkeys: Hotkey[] = [];\n  mousetrap: MousetrapInstance;\n  cheatSheetToggle: Subject<any> = new Subject();\n\n  private _preventIn = ['INPUT', 'SELECT', 'TEXTAREA'];\n\n  constructor(@Inject(HotkeyOptions) private options: IHotkeyOptions) {\n    Mousetrap.prototype.stopCallback = (\n      event: KeyboardEvent,\n      element: HTMLElement,\n      combo: string,\n      callback: Function\n    ) => {\n      // if the element has the class \"mousetrap\" then no need to stop\n      if ((' ' + element.className + ' ').indexOf(' mousetrap ') > -1) {\n        return false;\n      }\n      return element.contentEditable && element.contentEditable === 'true';\n    };\n    this.mousetrap = new (<any>Mousetrap)();\n    if (!this.options.disableCheatSheet) {\n      this.add(\n        new Hotkey(\n          this.options.cheatSheetHotkey || '?',\n          function(event: KeyboardEvent) {\n            this.cheatSheetToggle.next();\n          }.bind(this),\n          [],\n          this.options.cheatSheetDescription || 'Show / hide this help menu'\n        )\n      );\n    }\n\n    if (this.options.cheatSheetCloseEsc) {\n      this.add(\n        new Hotkey(\n          'esc',\n          function(event: KeyboardEvent) {\n            this.cheatSheetToggle.next(false);\n          }.bind(this),\n          ['HOTKEYS-CHEATSHEET'],\n          'Hide this help menu'\n        )\n      );\n    }\n  }\n\n  add(hotkey: Hotkey | Hotkey[], specificEvent?: string): Hotkey | Hotkey[] {\n    if (Array.isArray(hotkey)) {\n      let temp: Hotkey[] = [];\n      for (let key of hotkey) {\n        temp.push(<Hotkey>this.add(key, specificEvent));\n      }\n      return temp;\n    }\n    this.remove(hotkey);\n    this.hotkeys.push(<Hotkey>hotkey);\n    this.mousetrap.bind(\n      (<Hotkey>hotkey).combo,\n      (event: KeyboardEvent, combo: string) => {\n        let shouldExecute = true;\n\n        // if the callback is executed directly `hotkey.get('w').callback()`\n        // there will be no event, so just execute the callback.\n        if (event) {\n          let target: HTMLElement = <HTMLElement>(event.target || event.srcElement); // srcElement is IE only\n          let nodeName: string = target.nodeName.toUpperCase();\n\n          // check if the input has a mousetrap class, and skip checking preventIn if so\n          if ((' ' + target.className + ' ').indexOf(' mousetrap ') > -1) {\n            shouldExecute = true;\n          } else if (\n            this._preventIn.indexOf(nodeName) > -1 &&\n            (<Hotkey>hotkey).allowIn.map(allow => allow.toUpperCase()).indexOf(nodeName) === -1\n          ) {\n            // don't execute callback if the event was fired from inside an element listed in preventIn but not in allowIn\n            shouldExecute = false;\n          }\n        }\n\n        if (shouldExecute) {\n          return (<Hotkey>hotkey).callback.apply(this, [event, combo]);\n        }\n      },\n      specificEvent\n    );\n    return hotkey;\n  }\n\n  remove(hotkey?: Hotkey | Hotkey[]): Hotkey | Hotkey[] {\n    let temp: Hotkey[] = [];\n    if (!hotkey) {\n      for (let key of this.hotkeys) {\n        temp.push(<Hotkey>this.remove(key));\n      }\n      return temp;\n    }\n    if (Array.isArray(hotkey)) {\n      for (let key of hotkey) {\n        temp.push(<Hotkey>this.remove(key));\n      }\n      return temp;\n    }\n    let index = this.findHotkey(<Hotkey>hotkey);\n    if (index > -1) {\n      this.hotkeys.splice(index, 1);\n      this.mousetrap.unbind((<Hotkey>hotkey).combo);\n      return hotkey;\n    }\n    return null;\n  }\n\n  get(combo?: string | string[]): Hotkey | Hotkey[] {\n    if (!combo) {\n      return this.hotkeys;\n    }\n    if (Array.isArray(combo)) {\n      let temp: Hotkey[] = [];\n      for (let key of combo) {\n        temp.push(<Hotkey>this.get(key));\n      }\n      return temp;\n    }\n    for (let i = 0; i < this.hotkeys.length; i++) {\n      if (this.hotkeys[i].combo.indexOf(<string>combo) > -1) {\n        return this.hotkeys[i];\n      }\n    }\n    return null;\n  }\n\n  pause(hotkey?: Hotkey | Hotkey[]): Hotkey | Hotkey[] {\n    if (!hotkey) {\n      return this.pause(this.hotkeys);\n    }\n    if (Array.isArray(hotkey)) {\n      let temp: Hotkey[] = [];\n      for (let key of hotkey) {\n        temp.push(<Hotkey>this.pause(key));\n      }\n      return temp;\n    }\n    this.remove(hotkey);\n    this.pausedHotkeys.push(<Hotkey>hotkey);\n    return hotkey;\n  }\n\n  unpause(hotkey?: Hotkey | Hotkey[]): Hotkey | Hotkey[] {\n    if (!hotkey) {\n      return this.unpause(this.pausedHotkeys);\n    }\n    if (Array.isArray(hotkey)) {\n      let temp: Hotkey[] = [];\n      for (let key of hotkey) {\n        temp.push(<Hotkey>this.unpause(key));\n      }\n      return temp;\n    }\n    let index: number = this.pausedHotkeys.indexOf(<Hotkey>hotkey);\n    if (index > -1) {\n      this.add(hotkey);\n      return this.pausedHotkeys.splice(index, 1);\n    }\n    return null;\n  }\n\n  reset() {\n    this.mousetrap.reset();\n  }\n\n  private findHotkey(hotkey: Hotkey): number {\n    return this.hotkeys.indexOf(hotkey);\n  }\n}\n"
  ],
  "names": [],
  "mappings": "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"
}
