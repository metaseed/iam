(self.webpackChunkiam=self.webpackChunkiam||[]).push([["src_app_modules_markdown_editor_markdown-editor_module_ts"],{7838:(wt,tt,pe)=>{!function(k){"use strict";var U={},H=/[^\s\u00a0]/,V=k.Pos,s=k.cmpPos;function M(Q){var q=Q.search(H);return-1==q?0:q}function se(Q,q){var z=Q.getMode();return!1!==z.useInnerComments&&z.innerMode?Q.getModeAt(q):z}k.commands.toggleComment=function(Q){Q.toggleComment()},k.defineExtension("toggleComment",function(Q){Q||(Q=U);for(var q=this,z=1/0,le=this.listSelections(),fe=null,Fe=le.length-1;Fe>=0;Fe--){var ee=le[Fe].from(),re=le[Fe].to();ee.line>=z||(re.line>=z&&(re=V(z,0)),z=ee.line,null==fe?q.uncomment(ee,re,Q)?fe="un":(q.lineComment(ee,re,Q),fe="line"):"un"==fe?q.uncomment(ee,re,Q):q.lineComment(ee,re,Q))}}),k.defineExtension("lineComment",function(Q,q,z){z||(z=U);var le=this,fe=se(le,Q),Fe=le.getLine(Q.line);if(null!=Fe&&!function(Q,q,z){return/\bstring\b/.test(Q.getTokenTypeAt(V(q.line,0)))&&!/^[\'\"\`]/.test(z)}(le,Q,Fe)){var ee=z.lineComment||fe.lineComment;if(!ee)return void((z.blockCommentStart||fe.blockCommentStart)&&(z.fullLines=!0,le.blockComment(Q,q,z)));var re=Math.min(0!=q.ch||q.line==Q.line?q.line+1:q.line,le.lastLine()+1),L=null==z.padding?" ":z.padding,W=z.commentBlankLines||Q.line==q.line;le.operation(function(){if(z.indent){for(var g=null,S=Q.line;S<re;++S){var R=(T=le.getLine(S)).slice(0,M(T));(null==g||g.length>R.length)&&(g=R)}for(S=Q.line;S<re;++S){var T=le.getLine(S),C=g.length;!W&&!H.test(T)||(T.slice(0,C)!=g&&(C=M(T)),le.replaceRange(g+ee+L,V(S,0),V(S,C)))}}else for(S=Q.line;S<re;++S)(W||H.test(le.getLine(S)))&&le.replaceRange(ee+L,V(S,0))})}}),k.defineExtension("blockComment",function(Q,q,z){z||(z=U);var le=this,fe=se(le,Q),Fe=z.blockCommentStart||fe.blockCommentStart,ee=z.blockCommentEnd||fe.blockCommentEnd;if(Fe&&ee){if(!/\bcomment\b/.test(le.getTokenTypeAt(V(Q.line,0)))){var re=Math.min(q.line,le.lastLine());re!=Q.line&&0==q.ch&&H.test(le.getLine(re))&&--re;var L=null==z.padding?" ":z.padding;Q.line>re||le.operation(function(){if(0!=z.fullLines){var W=H.test(le.getLine(re));le.replaceRange(L+ee,V(re)),le.replaceRange(Fe+L,V(Q.line,0));var g=z.blockCommentLead||fe.blockCommentLead;if(null!=g)for(var S=Q.line+1;S<=re;++S)(S!=re||W)&&le.replaceRange(g+L,V(S,0))}else{var T=0==s(le.getCursor("to"),q),R=!le.somethingSelected();le.replaceRange(ee,q),T&&le.setSelection(R?q:le.getCursor("from"),q),le.replaceRange(Fe,Q)}})}}else(z.lineComment||fe.lineComment)&&0!=z.fullLines&&le.lineComment(Q,q,z)}),k.defineExtension("uncomment",function(Q,q,z){z||(z=U);var g,le=this,fe=se(le,Q),Fe=Math.min(0!=q.ch||q.line==Q.line?q.line:q.line-1,le.lastLine()),ee=Math.min(Q.line,Fe),re=z.lineComment||fe.lineComment,L=[],W=null==z.padding?" ":z.padding;e:if(re){for(var S=ee;S<=Fe;++S){var T=le.getLine(S),R=T.indexOf(re);if(R>-1&&!/comment/.test(le.getTokenTypeAt(V(S,R+1)))&&(R=-1),-1==R&&H.test(T)||R>-1&&H.test(T.slice(0,R)))break e;L.push(T)}if(le.operation(function(){for(var Ue=ee;Ue<=Fe;++Ue){var Ge=L[Ue-ee],F=Ge.indexOf(re),b=F+re.length;F<0||(Ge.slice(b,b+W.length)==W&&(b+=W.length),g=!0,le.replaceRange("",V(Ue,F),V(Ue,b)))}}),g)return!0}var C=z.blockCommentStart||fe.blockCommentStart,_=z.blockCommentEnd||fe.blockCommentEnd;if(!C||!_)return!1;var te=z.blockCommentLead||fe.blockCommentLead,Z=le.getLine(ee),$=Z.indexOf(C);if(-1==$)return!1;var j=Fe==ee?Z:le.getLine(Fe),ve=j.indexOf(_,Fe==ee?$+C.length:0),x=V(ee,$+1),ue=V(Fe,ve+1);if(-1==ve||!/comment/.test(le.getTokenTypeAt(x))||!/comment/.test(le.getTokenTypeAt(ue))||le.getRange(x,ue,"\n").indexOf(_)>-1)return!1;var he=Z.lastIndexOf(C,Q.ch),Ee=-1==he?-1:Z.slice(0,Q.ch).indexOf(_,he+C.length);if(-1!=he&&-1!=Ee&&Ee+_.length!=Q.ch)return!1;Ee=j.indexOf(_,q.ch);var We=j.slice(q.ch).lastIndexOf(C,Ee-q.ch);return he=-1==Ee||-1==We?-1:q.ch+We,(-1==Ee||-1==he||he==q.ch)&&(le.operation(function(){le.replaceRange("",V(Fe,ve-(W&&j.slice(ve-W.length,ve)==W?W.length:0)),V(Fe,ve+_.length));var Ue=$+C.length;if(W&&Z.slice(Ue,Ue+W.length)==W&&(Ue+=W.length),le.replaceRange("",V(ee,$),V(ee,Ue)),te)for(var Ge=ee+1;Ge<=Fe;++Ge){var F=le.getLine(Ge),b=F.indexOf(te);if(-1!=b&&!H.test(F.slice(0,b))){var Me=b+te.length;W&&F.slice(Me,Me+W.length)==W&&(Me+=W.length),le.replaceRange("",V(Ge,b),V(Ge,Me))}}}),!0)})}(pe(9475))},6584:(wt,tt,pe)=>{!function(k){function U(V,s,M){var se,N=V.getWrapperElement();return(se=N.appendChild(document.createElement("div"))).className=M?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof s?se.innerHTML=s:se.appendChild(s),k.addClass(N,"dialog-opened"),se}function H(V,s){V.state.currentNotificationClose&&V.state.currentNotificationClose(),V.state.currentNotificationClose=s}k.defineExtension("openDialog",function(V,s,M){M||(M={}),H(this,null);var N=U(this,V,M.bottom),se=!1,Q=this;function q(fe){if("string"==typeof fe)z.value=fe;else{if(se)return;se=!0,k.rmClass(N.parentNode,"dialog-opened"),N.parentNode.removeChild(N),Q.focus(),M.onClose&&M.onClose(N)}}var le,z=N.getElementsByTagName("input")[0];return z?(z.focus(),M.value&&(z.value=M.value,!1!==M.selectValueOnOpen&&z.select()),M.onInput&&k.on(z,"input",function(fe){M.onInput(fe,z.value,q)}),M.onKeyUp&&k.on(z,"keyup",function(fe){M.onKeyUp(fe,z.value,q)}),k.on(z,"keydown",function(fe){M&&M.onKeyDown&&M.onKeyDown(fe,z.value,q)||((27==fe.keyCode||!1!==M.closeOnEnter&&13==fe.keyCode)&&(z.blur(),k.e_stop(fe),q()),13==fe.keyCode&&s(z.value,fe))}),!1!==M.closeOnBlur&&k.on(N,"focusout",function(fe){null!==fe.relatedTarget&&q()})):(le=N.getElementsByTagName("button")[0])&&(k.on(le,"click",function(){q(),Q.focus()}),!1!==M.closeOnBlur&&k.on(le,"blur",q),le.focus()),q}),k.defineExtension("openConfirm",function(V,s,M){H(this,null);var N=U(this,V,M&&M.bottom),se=N.getElementsByTagName("button"),Q=!1,q=this,z=1;function le(){Q||(Q=!0,k.rmClass(N.parentNode,"dialog-opened"),N.parentNode.removeChild(N),q.focus())}se[0].focus();for(var fe=0;fe<se.length;++fe){var Fe=se[fe];(function(ee){k.on(Fe,"click",function(re){k.e_preventDefault(re),le(),ee&&ee(q)})})(s[fe]),k.on(Fe,"blur",function(){--z,setTimeout(function(){z<=0&&le()},200)}),k.on(Fe,"focus",function(){++z})}}),k.defineExtension("openNotification",function(V,s){H(this,q);var se,M=U(this,V,s&&s.bottom),N=!1,Q=s&&void 0!==s.duration?s.duration:5e3;function q(){N||(N=!0,clearTimeout(se),k.rmClass(M.parentNode,"dialog-opened"),M.parentNode.removeChild(M))}return k.on(M,"click",function(z){k.e_preventDefault(z),q()}),Q&&(se=setTimeout(q,Q)),q})}(pe(9475))},8237:(wt,tt,pe)=>{!function(k){"use strict";k.defineOption("fullScreen",!1,function(V,s,M){M==k.Init&&(M=!1),!M!=!s&&(s?function(V){var s=V.getWrapperElement();V.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:s.style.width,height:s.style.height},s.style.width="",s.style.height="auto",s.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",V.refresh()}(V):function(V){var s=V.getWrapperElement();s.className=s.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var M=V.state.fullScreenRestore;s.style.width=M.width,s.style.height=M.height,window.scrollTo(M.scrollLeft,M.scrollTop),V.refresh()}(V))})}(pe(9475))},2946:(wt,tt,pe)=>{!function(k){var U=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),H=k.Pos,V={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function s(z){return z&&z.bracketRegex||/[(){}[\]]/}function M(z,le,fe){var Fe=z.getLineHandle(le.line),ee=le.ch-1,re=fe&&fe.afterCursor;null==re&&(re=/(^| )cm-fat-cursor($| )/.test(z.getWrapperElement().className));var L=s(fe),W=!re&&ee>=0&&L.test(Fe.text.charAt(ee))&&V[Fe.text.charAt(ee)]||L.test(Fe.text.charAt(ee+1))&&V[Fe.text.charAt(++ee)];if(!W)return null;var g=">"==W.charAt(1)?1:-1;if(fe&&fe.strict&&g>0!=(ee==le.ch))return null;var S=z.getTokenTypeAt(H(le.line,ee+1)),T=N(z,H(le.line,ee+(g>0?1:0)),g,S,fe);return null==T?null:{from:H(le.line,ee),to:T&&T.pos,match:T&&T.ch==W.charAt(0),forward:g>0}}function N(z,le,fe,Fe,ee){for(var re=ee&&ee.maxScanLineLength||1e4,L=ee&&ee.maxScanLines||1e3,W=[],g=s(ee),S=fe>0?Math.min(le.line+L,z.lastLine()+1):Math.max(z.firstLine()-1,le.line-L),T=le.line;T!=S;T+=fe){var R=z.getLine(T);if(R){var C=fe>0?0:R.length-1,_=fe>0?R.length:-1;if(!(R.length>re))for(T==le.line&&(C=le.ch-(fe<0?1:0));C!=_;C+=fe){var te=R.charAt(C);if(g.test(te)&&(void 0===Fe||(z.getTokenTypeAt(H(T,C+1))||"")==(Fe||""))){var Z=V[te];if(Z&&">"==Z.charAt(1)==fe>0)W.push(te);else{if(!W.length)return{pos:H(T,C),ch:te};W.pop()}}}}}return T-fe!=(fe>0?z.lastLine():z.firstLine())&&null}function se(z,le,fe){for(var Fe=z.state.matchBrackets.maxHighlightLineLength||1e3,ee=fe&&fe.highlightNonMatching,re=[],L=z.listSelections(),W=0;W<L.length;W++){var g=L[W].empty()&&M(z,L[W].head,fe);if(g&&(g.match||!1!==ee)&&z.getLine(g.from.line).length<=Fe){var S=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";re.push(z.markText(g.from,H(g.from.line,g.from.ch+1),{className:S})),g.to&&z.getLine(g.to.line).length<=Fe&&re.push(z.markText(g.to,H(g.to.line,g.to.ch+1),{className:S}))}}if(re.length){U&&z.state.focused&&z.focus();var T=function(){z.operation(function(){for(var R=0;R<re.length;R++)re[R].clear()})};if(!le)return T;setTimeout(T,800)}}function Q(z){z.operation(function(){z.state.matchBrackets.currentlyHighlighted&&(z.state.matchBrackets.currentlyHighlighted(),z.state.matchBrackets.currentlyHighlighted=null),z.state.matchBrackets.currentlyHighlighted=se(z,!1,z.state.matchBrackets)})}function q(z){z.state.matchBrackets&&z.state.matchBrackets.currentlyHighlighted&&(z.state.matchBrackets.currentlyHighlighted(),z.state.matchBrackets.currentlyHighlighted=null)}k.defineOption("matchBrackets",!1,function(z,le,fe){fe&&fe!=k.Init&&(z.off("cursorActivity",Q),z.off("focus",Q),z.off("blur",q),q(z)),le&&(z.state.matchBrackets="object"==typeof le?le:{},z.on("cursorActivity",Q),z.on("focus",Q),z.on("blur",q))}),k.defineExtension("matchBrackets",function(){se(this,!0)}),k.defineExtension("findMatchingBracket",function(z,le,fe){return(fe||"boolean"==typeof le)&&(fe?(fe.strict=le,le=fe):le=le?{strict:!0}:null),M(this,z,le)}),k.defineExtension("scanForBracket",function(z,le,fe,Fe){return N(this,z,le,fe,Fe)})}(pe(9475))},8209:(wt,tt,pe)=>{!function(k){"use strict";function U(s){s.state.tagHit&&s.state.tagHit.clear(),s.state.tagOther&&s.state.tagOther.clear(),s.state.tagHit=s.state.tagOther=null}function H(s){s.state.failedTagMatch=!1,s.operation(function(){if(U(s),!s.somethingSelected()){var M=s.getCursor(),N=s.getViewport();N.from=Math.min(N.from,M.line),N.to=Math.max(M.line+1,N.to);var se=k.findMatchingTag(s,M,N);if(se){if(s.state.matchBothTags){var Q="open"==se.at?se.open:se.close;Q&&(s.state.tagHit=s.markText(Q.from,Q.to,{className:"CodeMirror-matchingtag"}))}var q="close"==se.at?se.open:se.close;q?s.state.tagOther=s.markText(q.from,q.to,{className:"CodeMirror-matchingtag"}):s.state.failedTagMatch=!0}}})}function V(s){s.state.failedTagMatch&&H(s)}k.defineOption("matchTags",!1,function(s,M,N){N&&N!=k.Init&&(s.off("cursorActivity",H),s.off("viewportChange",V),U(s)),M&&(s.state.matchBothTags="object"==typeof M&&M.bothTags,s.on("cursorActivity",H),s.on("viewportChange",V),H(s))}),k.commands.toMatchingTag=function(s){var M=k.findMatchingTag(s,s.getCursor());if(M){var N="close"==M.at?M.open:M.close;N&&s.extendSelection(N.to,N.from)}}}(pe(9475),pe(829))},3613:(wt,tt,pe)=>{!function(k){"use strict";k.registerHelper("fold","brace",function(U,H){var M,V=H.line,s=U.getLine(V);function N(R){for(var C=H.ch,_=0;;){var te=C<=0?-1:s.lastIndexOf(R,C-1);if(-1!=te){if(1==_&&te<H.ch)break;if(M=U.getTokenTypeAt(k.Pos(V,te+1)),!/^(comment|string)/.test(M))return te+1;C=te-1}else{if(1==_)break;_=1,C=s.length}}}var q,z,le,se=N("{"),Q=N("[");if(null!=se&&(null==Q||Q>se))le=se,q="{",z="}";else{if(null==Q)return;le=Q,q="[",z="]"}var ee,re,fe=1,Fe=U.lastLine();e:for(var L=V;L<=Fe;++L)for(var W=U.getLine(L),g=L==V?le:0;;){var S=W.indexOf(q,g),T=W.indexOf(z,g);if(S<0&&(S=W.length),T<0&&(T=W.length),(g=Math.min(S,T))==W.length)break;if(U.getTokenTypeAt(k.Pos(L,g+1))==M)if(g==S)++fe;else if(!--fe){ee=L,re=g;break e}++g}if(null!=ee&&V!=ee)return{from:k.Pos(V,le),to:k.Pos(ee,re)}}),k.registerHelper("fold","import",function(U,H){function V(q){if(q<U.firstLine()||q>U.lastLine())return null;var z=U.getTokenAt(k.Pos(q,1));if(/\S/.test(z.string)||(z=U.getTokenAt(k.Pos(q,z.end+1))),"keyword"!=z.type||"import"!=z.string)return null;for(var le=q,fe=Math.min(U.lastLine(),q+10);le<=fe;++le){var ee=U.getLine(le).indexOf(";");if(-1!=ee)return{startCh:z.end,end:k.Pos(le,ee)}}}var N,s=H.line,M=V(s);if(!M||V(s-1)||(N=V(s-2))&&N.end.line==s-1)return null;for(var se=M.end;;){var Q=V(se.line+1);if(null==Q)break;se=Q.end}return{from:U.clipPos(k.Pos(s,M.startCh+1)),to:se}}),k.registerHelper("fold","include",function(U,H){function V(Q){if(Q<U.firstLine()||Q>U.lastLine())return null;var q=U.getTokenAt(k.Pos(Q,1));return/\S/.test(q.string)||(q=U.getTokenAt(k.Pos(Q,q.end+1))),"meta"==q.type&&"#include"==q.string.slice(0,8)?q.start+8:void 0}var s=H.line,M=V(s);if(null==M||null!=V(s-1))return null;for(var N=s;null!=V(N+1);)++N;return{from:k.Pos(s,M+1),to:U.clipPos(k.Pos(N))}})}(pe(9475))},6571:(wt,tt,pe)=>{!function(k){"use strict";function U(M,N,se,Q){if(se&&se.call){var q=se;se=null}else q=s(M,se,"rangeFinder");"number"==typeof N&&(N=k.Pos(N,0));var z=s(M,se,"minFoldSize");function le(re){var L=q(M,N);if(!L||L.to.line-L.from.line<z)return null;if("fold"===Q)return L;for(var W=M.findMarksAt(L.from),g=0;g<W.length;++g)if(W[g].__isFold){if(!re)return null;L.cleared=!0,W[g].clear()}return L}var fe=le(!0);if(s(M,se,"scanUp"))for(;!fe&&N.line>M.firstLine();)N=k.Pos(N.line-1,0),fe=le(!1);if(fe&&!fe.cleared&&"unfold"!==Q){var Fe=function(M,N,se){var Q=s(M,N,"widget");if("function"==typeof Q&&(Q=Q(se.from,se.to)),"string"==typeof Q){var q=document.createTextNode(Q);(Q=document.createElement("span")).appendChild(q),Q.className="CodeMirror-foldmarker"}else Q&&(Q=Q.cloneNode(!0));return Q}(M,se,fe);k.on(Fe,"mousedown",function(re){ee.clear(),k.e_preventDefault(re)});var ee=M.markText(fe.from,fe.to,{replacedWith:Fe,clearOnEnter:s(M,se,"clearOnEnter"),__isFold:!0});ee.on("clear",function(re,L){k.signal(M,"unfold",M,re,L)}),k.signal(M,"fold",M,fe.from,fe.to)}}k.newFoldFunction=function(M,N){return function(se,Q){U(se,Q,{rangeFinder:M,widget:N})}},k.defineExtension("foldCode",function(M,N,se){U(this,M,N,se)}),k.defineExtension("isFolded",function(M){for(var N=this.findMarksAt(M),se=0;se<N.length;++se)if(N[se].__isFold)return!0}),k.commands.toggleFold=function(M){M.foldCode(M.getCursor())},k.commands.fold=function(M){M.foldCode(M.getCursor(),null,"fold")},k.commands.unfold=function(M){M.foldCode(M.getCursor(),{scanUp:!1},"unfold")},k.commands.foldAll=function(M){M.operation(function(){for(var N=M.firstLine(),se=M.lastLine();N<=se;N++)M.foldCode(k.Pos(N,0),{scanUp:!1},"fold")})},k.commands.unfoldAll=function(M){M.operation(function(){for(var N=M.firstLine(),se=M.lastLine();N<=se;N++)M.foldCode(k.Pos(N,0),{scanUp:!1},"unfold")})},k.registerHelper("fold","combine",function(){var M=Array.prototype.slice.call(arguments,0);return function(N,se){for(var Q=0;Q<M.length;++Q){var q=M[Q](N,se);if(q)return q}}}),k.registerHelper("fold","auto",function(M,N){for(var se=M.getHelpers(N,"fold"),Q=0;Q<se.length;Q++){var q=se[Q](M,N);if(q)return q}});var V={rangeFinder:k.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:!1,clearOnEnter:!0};function s(M,N,se){if(N&&void 0!==N[se])return N[se];var Q=M.options.foldOptions;return Q&&void 0!==Q[se]?Q[se]:V[se]}k.defineOption("foldOptions",null),k.defineExtension("foldOption",function(M,N){return s(this,M,N)})}(pe(9475))},829:(wt,tt,pe)=>{!function(k){"use strict";var U=k.Pos;function H(L,W){return L.line-W.line||L.ch-W.ch}var V="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",M=new RegExp("<(/?)(["+V+"]["+V+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");function N(L,W,g,S){this.line=W,this.ch=g,this.cm=L,this.text=L.getLine(W),this.min=S?Math.max(S.from,L.firstLine()):L.firstLine(),this.max=S?Math.min(S.to-1,L.lastLine()):L.lastLine()}function se(L,W){var g=L.cm.getTokenTypeAt(U(L.line,W));return g&&/\btag\b/.test(g)}function Q(L){if(!(L.line>=L.max))return L.ch=0,L.text=L.cm.getLine(++L.line),!0}function q(L){if(!(L.line<=L.min))return L.text=L.cm.getLine(--L.line),L.ch=L.text.length,!0}function z(L){for(;;){var W=L.text.indexOf(">",L.ch);if(-1==W){if(Q(L))continue;return}if(se(L,W+1)){var g=L.text.lastIndexOf("/",W),S=g>-1&&!/\S/.test(L.text.slice(g+1,W));return L.ch=W+1,S?"selfClose":"regular"}L.ch=W+1}}function le(L){for(;;){var W=L.ch?L.text.lastIndexOf("<",L.ch-1):-1;if(-1==W){if(q(L))continue;return}if(se(L,W+1)){M.lastIndex=W,L.ch=W;var g=M.exec(L.text);if(g&&g.index==W)return g}else L.ch=W}}function fe(L){for(;;){M.lastIndex=L.ch;var W=M.exec(L.text);if(!W){if(Q(L))continue;return}if(se(L,W.index+1))return L.ch=W.index+W[0].length,W;L.ch=W.index+1}}function Fe(L){for(;;){var W=L.ch?L.text.lastIndexOf(">",L.ch-1):-1;if(-1==W){if(q(L))continue;return}if(se(L,W+1)){var g=L.text.lastIndexOf("/",W),S=g>-1&&!/\S/.test(L.text.slice(g+1,W));return L.ch=W+1,S?"selfClose":"regular"}L.ch=W}}function ee(L,W){for(var g=[];;){var T,S=fe(L),R=L.line,C=L.ch-(S?S[0].length:0);if(!S||!(T=z(L)))return;if("selfClose"!=T)if(S[1]){for(var _=g.length-1;_>=0;--_)if(g[_]==S[2]){g.length=_;break}if(_<0&&(!W||W==S[2]))return{tag:S[2],from:U(R,C),to:U(L.line,L.ch)}}else g.push(S[2])}}function re(L,W){for(var g=[];;){var S=Fe(L);if(!S)return;if("selfClose"!=S){var T=L.line,R=L.ch,C=le(L);if(!C)return;if(C[1])g.push(C[2]);else{for(var _=g.length-1;_>=0;--_)if(g[_]==C[2]){g.length=_;break}if(_<0&&(!W||W==C[2]))return{tag:C[2],from:U(L.line,L.ch),to:U(T,R)}}}else le(L)}}k.registerHelper("fold","xml",function(L,W){for(var g=new N(L,W.line,0);;){var S=fe(g);if(!S||g.line!=W.line)return;var T=z(g);if(!T)return;if(!S[1]&&"selfClose"!=T){var R=U(g.line,g.ch),C=ee(g,S[2]);return C&&H(C.from,R)>0?{from:R,to:C.from}:null}}}),k.findMatchingTag=function(L,W,g){var S=new N(L,W.line,W.ch,g);if(-1!=S.text.indexOf(">")||-1!=S.text.indexOf("<")){var T=z(S),R=T&&U(S.line,S.ch),C=T&&le(S);if(T&&C&&!(H(S,W)>0)){var _={from:U(S.line,S.ch),to:R,tag:C[2]};return"selfClose"==T?{open:_,close:null,at:"open"}:C[1]?{open:re(S,C[2]),close:_,at:"close"}:{open:_,close:ee(S=new N(L,R.line,R.ch,g),C[2]),at:"open"}}}},k.findEnclosingTag=function(L,W,g,S){for(var T=new N(L,W.line,W.ch,g);;){var R=re(T,S);if(!R)break;var _=ee(new N(L,W.line,W.ch,g),R.tag);if(_)return{open:R,close:_}}},k.scanForClosingTag=function(L,W,g,S){return ee(new N(L,W.line,W.ch,S?{from:0,to:S}:null),g)}}(pe(9475))},7630:(wt,tt,pe)=>{!function(k){"use strict";k.overlayMode=function(U,H,V){return{startState:function(){return{base:k.startState(U),overlay:k.startState(H),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(s){return{base:k.copyState(U,s.base),overlay:k.copyState(H,s.overlay),basePos:s.basePos,baseCur:null,overlayPos:s.overlayPos,overlayCur:null}},token:function(s,M){return(s!=M.streamSeen||Math.min(M.basePos,M.overlayPos)<s.start)&&(M.streamSeen=s,M.basePos=M.overlayPos=s.start),s.start==M.basePos&&(M.baseCur=U.token(s,M.base),M.basePos=s.pos),s.start==M.overlayPos&&(s.pos=s.start,M.overlayCur=H.token(s,M.overlay),M.overlayPos=s.pos),s.pos=Math.min(M.basePos,M.overlayPos),null==M.overlayCur?M.baseCur:null!=M.baseCur&&M.overlay.combineTokens||V&&null==M.overlay.combineTokens?M.baseCur+" "+M.overlayCur:M.overlayCur},indent:U.indent&&function(s,M,N){return U.indent(s.base,M,N)},electricChars:U.electricChars,innerMode:function(s){return{state:s.base,mode:U}},blankLine:function(s){var M,N;return U.blankLine&&(M=U.blankLine(s.base)),H.blankLine&&(N=H.blankLine(s.overlay)),null==N?M:V&&null!=M?M+" "+N:N}}}}(pe(9475))},8744:(wt,tt,pe)=>{!function(k){"use strict";function U(H,V){function s(N){clearTimeout(M.doRedraw),M.doRedraw=setTimeout(function(){M.redraw()},N)}this.cm=H,this.options=V,this.buttonHeight=V.scrollButtonHeight||H.getOption("scrollButtonHeight"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=H.getWrapperElement().appendChild(document.createElement("div")),this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none",this.computeScale();var M=this;H.on("refresh",this.resizeHandler=function(){clearTimeout(M.doUpdate),M.doUpdate=setTimeout(function(){M.computeScale()&&s(20)},100)}),H.on("markerAdded",this.resizeHandler),H.on("markerCleared",this.resizeHandler),!1!==V.listenForChanges&&H.on("changes",this.changeHandler=function(){s(250)})}k.defineExtension("annotateScrollbar",function(H){return"string"==typeof H&&(H={className:H}),new U(this,H)}),k.defineOption("scrollButtonHeight",0),U.prototype.computeScale=function(){var H=this.cm,V=(H.getWrapperElement().clientHeight-H.display.barHeight-2*this.buttonHeight)/H.getScrollerElement().scrollHeight;if(V!=this.hScale)return this.hScale=V,!0},U.prototype.update=function(H){this.annotations=H,this.redraw()},U.prototype.redraw=function(H){!1!==H&&this.computeScale();var V=this.cm,s=this.hScale,M=document.createDocumentFragment(),N=this.annotations,se=V.getOption("lineWrapping"),Q=se&&1.5*V.defaultTextHeight(),q=null,z=null;function le(T,R){if(q!=T.line){q=T.line,z=V.getLineHandle(T.line);var C=V.getLineHandleVisualStart(z);C!=z&&(q=V.getLineNumber(C),z=C)}return z.widgets&&z.widgets.length||se&&z.height>Q?V.charCoords(T,"local")[R?"top":"bottom"]:V.heightAtLine(z,"local")+(R?0:z.height)}var fe=V.lastLine();if(V.display.barWidth)for(var ee,Fe=0;Fe<N.length;Fe++){var re=N[Fe];if(!(re.to.line>fe)){for(var L=ee||le(re.from,!0)*s,W=le(re.to,!1)*s;Fe<N.length-1&&!(N[Fe+1].to.line>fe||(ee=le(N[Fe+1].from,!0)*s,ee>W+.9));)W=le((re=N[++Fe]).to,!1)*s;if(W!=L){var g=Math.max(W-L,3),S=M.appendChild(document.createElement("div"));S.style.cssText="position: absolute; right: 0px; width: "+Math.max(V.display.barWidth-1,2)+"px; top: "+(L+this.buttonHeight)+"px; height: "+g+"px",S.className=this.options.className,re.id&&S.setAttribute("annotation-id",re.id)}}}this.div.textContent="",this.div.appendChild(M)},U.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler),this.cm.off("markerAdded",this.resizeHandler),this.cm.off("markerCleared",this.resizeHandler),this.changeHandler&&this.cm.off("changes",this.changeHandler),this.div.parentNode.removeChild(this.div)}}(pe(9475))},102:(wt,tt,pe)=>{!function(k){"use strict";function V(s,M){var N=Number(M);return/^[-+]/.test(M)?s.getCursor().line+N:N-1}k.defineOption("search",{bottom:!1}),k.commands.jumpToLine=function(s){var M=s.getCursor();!function(s,M,N,se,Q){s.openDialog?s.openDialog(M,Q,{value:se,selectValueOnOpen:!0,bottom:s.options.search.bottom}):Q(prompt(N,se))}(s,function(s){return s.phrase("Jump to line:")+' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+s.phrase("(Use line:column or scroll% syntax)")+"</span>"}(s),s.phrase("Jump to line:"),M.line+1+":"+M.ch,function(N){var se;if(N)if(se=/^\s*([\+\-]?\d+)\s*\:\s*(\d+)\s*$/.exec(N))s.setCursor(V(s,se[1]),Number(se[2]));else if(se=/^\s*([\+\-]?\d+(\.\d+)?)\%\s*/.exec(N)){var Q=Math.round(s.lineCount()*Number(se[1])/100);/^[-+]/.test(se[1])&&(Q=M.line+Q+1),s.setCursor(Q-1,M.ch)}else(se=/^\s*\:?\s*([\+\-]?\d+)\s*/.exec(N))&&s.setCursor(V(s,se[1]),M.ch)})},k.keyMap.default["Alt-G"]="jumpToLine"}(pe(9475),pe(6584))},1252:(wt,tt,pe)=>{!function(k){"use strict";function U(s,M,N,se){this.cm=s,this.options=se;var Q={listenForChanges:!1};for(var q in se)Q[q]=se[q];Q.className||(Q.className="CodeMirror-search-match"),this.annotation=s.annotateScrollbar(Q),this.query=M,this.caseFold=N,this.gap={from:s.firstLine(),to:s.lastLine()+1},this.matches=[],this.update=null,this.findMatches(),this.annotation.update(this.matches);var z=this;s.on("change",this.changeHandler=function(le,fe){z.onChange(fe)})}k.defineExtension("showMatchesOnScrollbar",function(s,M,N){return"string"==typeof N&&(N={className:N}),N||(N={}),new U(this,s,M,N)});function V(s,M,N){return s<=M?s:Math.max(M,s+N)}U.prototype.findMatches=function(){if(this.gap){for(var s=0;s<this.matches.length&&!((M=this.matches[s]).from.line>=this.gap.to);s++)M.to.line>=this.gap.from&&this.matches.splice(s--,1);for(var N=this.cm.getSearchCursor(this.query,k.Pos(this.gap.from,0),{caseFold:this.caseFold,multiline:this.options.multiline}),se=this.options&&this.options.maxMatches||1e3;N.findNext();){var M;if((M={from:N.from(),to:N.to()}).from.line>=this.gap.to||(this.matches.splice(s++,0,M),this.matches.length>se))break}this.gap=null}},U.prototype.onChange=function(s){var M=s.from.line,N=k.changeEnd(s).line,se=N-s.to.line;if(this.gap?(this.gap.from=Math.min(V(this.gap.from,M,se),s.from.line),this.gap.to=Math.max(V(this.gap.to,M,se),s.from.line)):this.gap={from:s.from.line,to:N+1},se)for(var Q=0;Q<this.matches.length;Q++){var q=this.matches[Q],z=V(q.from.line,M,se);z!=q.from.line&&(q.from=k.Pos(z,q.from.ch));var le=V(q.to.line,M,se);le!=q.to.line&&(q.to=k.Pos(le,q.to.ch))}clearTimeout(this.update);var fe=this;this.update=setTimeout(function(){fe.updateAfterChange()},250)},U.prototype.updateAfterChange=function(){this.findMatches(),this.annotation.update(this.matches)},U.prototype.clear=function(){this.cm.off("change",this.changeHandler),this.annotation.clear()}}(pe(9475),pe(7660),pe(8744))},615:(wt,tt,pe)=>{!function(k){"use strict";function H(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function V(C){return C.state.search||(C.state.search=new H)}function s(C){return"string"==typeof C&&C==C.toLowerCase()}function M(C,_,te){return C.getSearchCursor(_,te,{caseFold:s(_),multiline:!0})}function se(C,_,te,Z,$){C.openDialog?C.openDialog(_,$,{value:Z,selectValueOnOpen:!0,bottom:C.options.search.bottom}):$(prompt(te,Z))}function q(C){return C.replace(/\\([nrt\\])/g,function(_,te){return"n"==te?"\n":"r"==te?"\r":"t"==te?"\t":"\\"==te?"\\":_})}function z(C){var _=C.match(/^\/(.*)\/([a-z]*)$/);if(_)try{C=new RegExp(_[1],-1==_[2].indexOf("i")?"":"i")}catch(te){}else C=q(C);return("string"==typeof C?""==C:C.test(""))&&(C=/x^/),C}function le(C,_,te){_.queryText=te,_.query=z(te),C.removeOverlay(_.overlay,s(_.query)),_.overlay=function(C,_){return"string"==typeof C?C=new RegExp(C.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),_?"gi":"g"):C.global||(C=new RegExp(C.source,C.ignoreCase?"gi":"g")),{token:function(te){C.lastIndex=te.pos;var Z=C.exec(te.string);if(Z&&Z.index==te.pos)return te.pos+=Z[0].length||1,"searching";Z?te.pos=Z.index:te.skipToEnd()}}}(_.query,s(_.query)),C.addOverlay(_.overlay),C.showMatchesOnScrollbar&&(_.annotate&&(_.annotate.clear(),_.annotate=null),_.annotate=C.showMatchesOnScrollbar(_.query,s(_.query)))}function fe(C,_,te,Z){var $=V(C);if($.query)return Fe(C,_);var j=C.getSelection()||$.lastQuery;if(j instanceof RegExp&&"x^"==j.source&&(j=null),te&&C.openDialog){var ve=null,x=function(ue,he){k.e_stop(he),ue&&(ue!=$.queryText&&(le(C,$,ue),$.posFrom=$.posTo=C.getCursor()),ve&&(ve.style.opacity=1),Fe(C,he.shiftKey,function(Ee,We){var Ue;We.line<3&&document.querySelector&&(Ue=C.display.wrapper.querySelector(".CodeMirror-dialog"))&&Ue.getBoundingClientRect().bottom-4>C.cursorCoords(We,"window").top&&((ve=Ue).style.opacity=.4)}))};(function(C,_,te,Z,$){C.openDialog(_,Z,{value:te,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){ee(C)},onKeyDown:$,bottom:C.options.search.bottom})})(C,L(C),j,x,function(ue,he){var Ee=k.keyName(ue),We=C.getOption("extraKeys"),Ue=We&&We[Ee]||k.keyMap[C.getOption("keyMap")][Ee];"findNext"==Ue||"findPrev"==Ue||"findPersistentNext"==Ue||"findPersistentPrev"==Ue?(k.e_stop(ue),le(C,V(C),he),C.execCommand(Ue)):("find"==Ue||"findPersistent"==Ue)&&(k.e_stop(ue),x(he,ue))}),Z&&j&&(le(C,$,j),Fe(C,_))}else se(C,L(C),"Search for:",j,function(ue){ue&&!$.query&&C.operation(function(){le(C,$,ue),$.posFrom=$.posTo=C.getCursor(),Fe(C,_)})})}function Fe(C,_,te){C.operation(function(){var Z=V(C),$=M(C,Z.query,_?Z.posFrom:Z.posTo);!$.find(_)&&!($=M(C,Z.query,_?k.Pos(C.lastLine()):k.Pos(C.firstLine(),0))).find(_)||(C.setSelection($.from(),$.to()),C.scrollIntoView({from:$.from(),to:$.to()},20),Z.posFrom=$.from(),Z.posTo=$.to(),te&&te($.from(),$.to()))})}function ee(C){C.operation(function(){var _=V(C);_.lastQuery=_.query,_.query&&(_.query=_.queryText=null,C.removeOverlay(_.overlay),_.annotate&&(_.annotate.clear(),_.annotate=null))})}function re(C,_){var te=C?document.createElement(C):document.createDocumentFragment();for(var Z in _)te[Z]=_[Z];for(var $=2;$<arguments.length;$++){var j=arguments[$];te.appendChild("string"==typeof j?document.createTextNode(j):j)}return te}function L(C){return re("",null,re("span",{className:"CodeMirror-search-label"},C.phrase("Search:"))," ",re("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"})," ",re("span",{style:"color: #888",className:"CodeMirror-search-hint"},C.phrase("(Use /re/ syntax for regexp search)")))}function T(C,_,te){C.operation(function(){for(var Z=M(C,_);Z.findNext();)if("string"!=typeof _){var $=C.getRange(Z.from(),Z.to()).match(_);Z.replace(te.replace(/\$(\d)/g,function(j,ve){return $[ve]}))}else Z.replace(te)})}function R(C,_){if(!C.getOption("readOnly")){var te=C.getSelection()||V(C).lastQuery,Z=C.phrase(_?"Replace all:":"Replace:"),$=re("",null,re("span",{className:"CodeMirror-search-label"},Z),function(C){return re("",null," ",re("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"})," ",re("span",{style:"color: #888",className:"CodeMirror-search-hint"},C.phrase("(Use /re/ syntax for regexp search)")))}(C));se(C,$,Z,te,function(j){!j||(j=z(j),se(C,function(C){return re("",null,re("span",{className:"CodeMirror-search-label"},C.phrase("With:"))," ",re("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"}))}(C),C.phrase("Replace with:"),"",function(ve){if(ve=q(ve),_)T(C,j,ve);else{ee(C);var x=M(C,j,C.getCursor("from")),ue=function(){var We,Ee=x.from();!(We=x.findNext())&&(x=M(C,j),!(We=x.findNext())||Ee&&x.from().line==Ee.line&&x.from().ch==Ee.ch)||(C.setSelection(x.from(),x.to()),C.scrollIntoView({from:x.from(),to:x.to()}),function(C,_,te,Z){C.openConfirm?C.openConfirm(_,Z):confirm(te)&&Z[0]()}(C,function(C){return re("",null,re("span",{className:"CodeMirror-search-label"},C.phrase("Replace?"))," ",re("button",{},C.phrase("Yes"))," ",re("button",{},C.phrase("No"))," ",re("button",{},C.phrase("All"))," ",re("button",{},C.phrase("Stop")))}(C),C.phrase("Replace?"),[function(){he(We)},ue,function(){T(C,j,ve)}]))},he=function(Ee){x.replace("string"==typeof j?ve:ve.replace(/\$(\d)/g,function(We,Ue){return Ee[Ue]})),ue()};ue()}}))})}}k.defineOption("search",{bottom:!1}),k.commands.find=function(C){ee(C),fe(C)},k.commands.findPersistent=function(C){ee(C),fe(C,!1,!0)},k.commands.findPersistentNext=function(C){fe(C,!1,!0,!0)},k.commands.findPersistentPrev=function(C){fe(C,!0,!0,!0)},k.commands.findNext=fe,k.commands.findPrev=function(C){fe(C,!0)},k.commands.clearSearch=ee,k.commands.replace=R,k.commands.replaceAll=function(C){R(C,!0)}}(pe(9475),pe(7660),pe(6584))},7660:(wt,tt,pe)=>{!function(k){"use strict";var z,le,U=k.Pos;function V(L,W){for(var g=function(L){var W=L.flags;return null!=W?W:(L.ignoreCase?"i":"")+(L.global?"g":"")+(L.multiline?"m":"")}(L),S=g,T=0;T<W.length;T++)-1==S.indexOf(W.charAt(T))&&(S+=W.charAt(T));return g==S?L:new RegExp(L.source,S)}function s(L){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(L.source)}function M(L,W,g){W=V(W,"g");for(var S=g.line,T=g.ch,R=L.lastLine();S<=R;S++,T=0){W.lastIndex=T;var C=L.getLine(S),_=W.exec(C);if(_)return{from:U(S,_.index),to:U(S,_.index+_[0].length),match:_}}}function N(L,W,g){if(!s(W))return M(L,W,g);W=V(W,"gm");for(var S,T=1,R=g.line,C=L.lastLine();R<=C;){for(var _=0;_<T&&!(R>C);_++){var te=L.getLine(R++);S=null==S?te:S+"\n"+te}T*=2,W.lastIndex=g.ch;var Z=W.exec(S);if(Z){var $=S.slice(0,Z.index).split("\n"),j=Z[0].split("\n"),ve=g.line+$.length-1,x=$[$.length-1].length;return{from:U(ve,x),to:U(ve+j.length-1,1==j.length?x+j[0].length:j[j.length-1].length),match:Z}}}}function se(L,W,g){for(var S,T=0;T<=L.length;){W.lastIndex=T;var R=W.exec(L);if(!R)break;var C=R.index+R[0].length;if(C>L.length-g)break;(!S||C>S.index+S[0].length)&&(S=R),T=R.index+1}return S}function Q(L,W,g){W=V(W,"g");for(var S=g.line,T=g.ch,R=L.firstLine();S>=R;S--,T=-1){var C=L.getLine(S),_=se(C,W,T<0?0:C.length-T);if(_)return{from:U(S,_.index),to:U(S,_.index+_[0].length),match:_}}}function q(L,W,g){if(!s(W))return Q(L,W,g);W=V(W,"gm");for(var S,T=1,R=L.getLine(g.line).length-g.ch,C=g.line,_=L.firstLine();C>=_;){for(var te=0;te<T&&C>=_;te++){var Z=L.getLine(C--);S=null==S?Z:Z+"\n"+S}T*=2;var $=se(S,W,R);if($){var j=S.slice(0,$.index).split("\n"),ve=$[0].split("\n"),x=C+j.length,ue=j[j.length-1].length;return{from:U(x,ue),to:U(x+ve.length-1,1==ve.length?ue+ve[0].length:ve[ve.length-1].length),match:$}}}}function fe(L,W,g,S){if(L.length==W.length)return g;for(var T=0,R=g+Math.max(0,L.length-W.length);;){if(T==R)return T;var C=T+R>>1,_=S(L.slice(0,C)).length;if(_==g)return C;_>g?R=C:T=C+1}}function Fe(L,W,g,S){if(!W.length)return null;var T=S?z:le,R=T(W).split(/\r|\n\r?/);e:for(var C=g.line,_=g.ch,te=L.lastLine()+1-R.length;C<=te;C++,_=0){var Z=L.getLine(C).slice(_),$=T(Z);if(1==R.length){var j=$.indexOf(R[0]);if(-1==j)continue e;return g=fe(Z,$,j,T)+_,{from:U(C,fe(Z,$,j,T)+_),to:U(C,fe(Z,$,j+R[0].length,T)+_)}}var ve=$.length-R[0].length;if($.slice(ve)==R[0]){for(var x=1;x<R.length-1;x++)if(T(L.getLine(C+x))!=R[x])continue e;var ue=L.getLine(C+R.length-1),he=T(ue),Ee=R[R.length-1];if(he.slice(0,Ee.length)==Ee)return{from:U(C,fe(Z,$,ve,T)+_),to:U(C+R.length-1,fe(ue,he,Ee.length,T))}}}}function ee(L,W,g,S){if(!W.length)return null;var T=S?z:le,R=T(W).split(/\r|\n\r?/);e:for(var C=g.line,_=g.ch,te=L.firstLine()-1+R.length;C>=te;C--,_=-1){var Z=L.getLine(C);_>-1&&(Z=Z.slice(0,_));var $=T(Z);if(1==R.length){var j=$.lastIndexOf(R[0]);if(-1==j)continue e;return{from:U(C,fe(Z,$,j,T)),to:U(C,fe(Z,$,j+R[0].length,T))}}var ve=R[R.length-1];if($.slice(0,ve.length)==ve){var x=1;for(g=C-R.length+1;x<R.length-1;x++)if(T(L.getLine(g+x))!=R[x])continue e;var ue=L.getLine(C+1-R.length),he=T(ue);if(he.slice(he.length-R[0].length)==R[0])return{from:U(C+1-R.length,fe(ue,he,ue.length-R[0].length,T)),to:U(C,fe(Z,$,ve.length,T))}}}}function re(L,W,g,S){var T;this.atOccurrence=!1,this.doc=L,g=g?L.clipPos(g):U(0,0),this.pos={from:g,to:g},"object"==typeof S?T=S.caseFold:(T=S,S=null),"string"==typeof W?(null==T&&(T=!1),this.matches=function(R,C){return(R?ee:Fe)(L,W,C,T)}):(W=V(W,"gm"),this.matches=S&&!1===S.multiline?function(R,C){return(R?Q:M)(L,W,C)}:function(R,C){return(R?q:N)(L,W,C)})}String.prototype.normalize?(z=function(L){return L.normalize("NFD").toLowerCase()},le=function(L){return L.normalize("NFD")}):(z=function(L){return L.toLowerCase()},le=function(L){return L}),re.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(L){for(var W=this.matches(L,this.doc.clipPos(L?this.pos.from:this.pos.to));W&&0==k.cmpPos(W.from,W.to);)L?W.from.ch?W.from=U(W.from.line,W.from.ch-1):W=W.from.line==this.doc.firstLine()?null:this.matches(L,this.doc.clipPos(U(W.from.line-1))):W.to.ch<this.doc.getLine(W.to.line).length?W.to=U(W.to.line,W.to.ch+1):W=W.to.line==this.doc.lastLine()?null:this.matches(L,U(W.to.line+1,0));if(W)return this.pos=W,this.atOccurrence=!0,this.pos.match||!0;var g=U(L?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:g,to:g},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(L,W){if(this.atOccurrence){var g=k.splitLines(L);this.doc.replaceRange(g,this.pos.from,this.pos.to,W),this.pos.to=U(this.pos.from.line+g.length-1,g[g.length-1].length+(1==g.length?this.pos.from.ch:0))}}},k.defineExtension("getSearchCursor",function(L,W,g){return new re(this.doc,L,W,g)}),k.defineDocExtension("getSearchCursor",function(L,W,g){return new re(this,L,W,g)}),k.defineExtension("selectMatches",function(L,W){for(var g=[],S=this.getSearchCursor(L,this.getCursor("from"),W);S.findNext()&&!(k.cmpPos(S.to(),this.getCursor("to"))>0);)g.push({anchor:S.from(),head:S.to()});g.length&&this.setSelections(g,0)})}(pe(9475))},8543:(wt,tt,pe)=>{!function(k){"use strict";var U=k.commands,H=k.Pos;function V(B,K){return B.line==K.line&&B.ch==K.ch}var s=[];function M(B){s.push(B),s.length>50&&s.shift()}function se(B){return s[s.length-(B?Math.min(B,1):1)]||""}var q=null;function z(B,K,ne,ye,Oe){null==Oe&&(Oe=B.getRange(K,ne)),"grow"==ye&&q&&q.cm==B&&V(K,q.pos)&&B.isClean(q.gen)?function(B){if(!s.length)return M(B);s[s.length-1]+=B}(Oe):!1!==ye&&M(Oe),B.replaceRange("",K,ne,"+delete"),q="grow"==ye?{cm:B,pos:K,gen:B.changeGeneration()}:null}function le(B,K,ne){return B.findPosH(K,ne,"char",!0)}function fe(B,K,ne){return B.findPosH(K,ne,"word",!0)}function Fe(B,K,ne){return B.findPosV(K,ne,"line",B.doc.sel.goalColumn)}function ee(B,K,ne){return B.findPosV(K,ne,"page",B.doc.sel.goalColumn)}function re(B,K,ne){for(var ye=K.line,Oe=B.getLine(ye),$e=/\S/.test(ne<0?Oe.slice(0,K.ch):Oe.slice(K.ch)),ge=B.firstLine(),Ye=B.lastLine();;){if((ye+=ne)<ge||ye>Ye)return B.clipPos(H(ye-ne,ne<0?0:null));if(Oe=B.getLine(ye),/\S/.test(Oe))$e=!0;else if($e)return H(ye,0)}}function L(B,K,ne){for(var ye=K.line,Oe=K.ch,$e=B.getLine(K.line),ge=!1;;){var Ye=$e.charAt(Oe+(ne<0?-1:0));if(Ye){if(ge&&/[!?.]/.test(Ye))return H(ye,Oe+(ne>0?1:0));ge||(ge=/\w/.test(Ye)),Oe+=ne}else{if(ye==(ne<0?B.firstLine():B.lastLine())||($e=B.getLine(ye+ne),!/\S/.test($e)))return H(ye,Oe);ye+=ne,Oe=ne<0?$e.length:0}}}function W(B,K,ne){var ye;if(B.findMatchingBracket&&(ye=B.findMatchingBracket(K,{strict:!0}))&&ye.match&&(ye.forward?1:-1)==ne)return ne>0?H(ye.to.line,ye.to.ch+1):ye.to;for(var Oe=!0;;Oe=!1){var $e=B.getTokenAt(K),ge=H(K.line,ne<0?$e.start:$e.end);if(!(Oe&&ne>0&&$e.end==K.ch)&&/\w/.test($e.string))return ge;var Ye=B.findPosH(ge,ne,"char");if(V(ge,Ye))return K;K=Ye}}function g(B,K){var ne=B.state.emacsPrefix;return ne?(j(B),"-"==ne?-1:Number(ne)):K?null:1}function S(B){var K="string"==typeof B?function(ne){ne.execCommand(B)}:B;return function(ne){var ye=g(ne);K(ne);for(var Oe=1;Oe<ye;++Oe)K(ne)}}function T(B,K,ne,ye){var Oe=g(B);Oe<0&&(ye=-ye,Oe=-Oe);for(var $e=0;$e<Oe;++$e){var ge=ne(B,K,ye);if(V(ge,K))break;K=ge}return K}function R(B,K){var ne=function(ye){ye.extendSelection(T(ye,ye.getCursor(),B,K))};return ne.motion=!0,ne}function C(B,K,ne,ye){for(var $e,Oe=B.listSelections(),ge=Oe.length;ge--;)z(B,$e=Oe[ge].head,T(B,$e,K,ne),ye)}function _(B,K){if(B.somethingSelected()){for(var ye,ne=B.listSelections(),Oe=ne.length;Oe--;)z(B,(ye=ne[Oe]).anchor,ye.head,K);return!0}}function te(B,K){B.state.emacsPrefix?"-"!=K&&(B.state.emacsPrefix+=K):(B.state.emacsPrefix=K,B.on("keyHandled",$),B.on("inputRead",ve))}var Z={"Alt-G":!0,"Ctrl-X":!0,"Ctrl-Q":!0,"Ctrl-U":!0};function $(B,K){!B.state.emacsPrefixMap&&!Z.hasOwnProperty(K)&&j(B)}function j(B){B.state.emacsPrefix=null,B.off("keyHandled",$),B.off("inputRead",ve)}function ve(B,K){var ne=g(B);if(ne>1&&"+input"==K.origin){for(var ye=K.text.join("\n"),Oe="",$e=1;$e<ne;++$e)Oe+=ye;B.replaceSelection(Oe)}}function x(B,K){"string"==typeof K&&(/^\d$/.test(K)||"Ctrl-U"==K)||(B.removeKeyMap(F),B.state.emacsPrefixMap=!1,B.off("keyHandled",x),B.off("inputRead",x))}function ue(B){B.setExtending(!1),B.setCursor(B.getCursor())}function Ee(B,K,ne){B.openDialog?B.openDialog(function(B){var K=document.createDocumentFragment(),ne=document.createElement("input");return ne.setAttribute("type","text"),ne.style.width="10em",K.appendChild(document.createTextNode(B+": ")),K.appendChild(ne),K}(K),ne,{bottom:!0}):ne(prompt(K,""))}function We(B,K){var ne=B.getCursor(),ye=B.findPosH(ne,1,"word");B.replaceRange(K(B.getRange(ne,ye)),ne,ye),B.setCursor(ye)}U.setMark=function(B){B.setCursor(B.getCursor()),B.setExtending(!B.getExtending()),B.on("change",function(){B.setExtending(!1)})},U.killRegion=function(B){z(B,B.getCursor("start"),B.getCursor("end"),!0)},U.killLineEmacs=S(function(B){var K=B.getCursor(),ne=B.clipPos(H(K.line)),ye=B.getRange(K,ne);/\S/.test(ye)||(ye+="\n",ne=H(K.line+1,0)),z(B,K,ne,"grow",ye)}),U.killRingSave=function(B){M(B.getSelection()),ue(B)},U.yank=function(B){var K=B.getCursor();B.replaceRange(se(g(B)),K,K,"paste"),B.setSelection(K,B.getCursor())},U.yankPop=function(B){B.replaceSelection((s.length>1&&s.pop(),se()),"around","paste")},U.forwardChar=R(le,1),U.backwardChar=R(le,-1),U.deleteChar=function(B){C(B,le,1,!1)},U.deleteForwardChar=function(B){_(B,!1)||C(B,le,1,!1)},U.deleteBackwardChar=function(B){_(B,!1)||C(B,le,-1,!1)},U.forwardWord=R(fe,1),U.backwardWord=R(fe,-1),U.killWord=function(B){C(B,fe,1,"grow")},U.backwardKillWord=function(B){C(B,fe,-1,"grow")},U.nextLine=R(Fe,1),U.previousLine=R(Fe,-1),U.scrollDownCommand=R(ee,-1),U.scrollUpCommand=R(ee,1),U.backwardParagraph=R(re,-1),U.forwardParagraph=R(re,1),U.backwardSentence=R(L,-1),U.forwardSentence=R(L,1),U.killSentence=function(B){C(B,L,1,"grow")},U.backwardKillSentence=function(B){z(B,B.getCursor(),L(B,B.getCursor(),1),"grow")},U.killSexp=function(B){C(B,W,1,"grow")},U.backwardKillSexp=function(B){C(B,W,-1,"grow")},U.forwardSexp=R(W,1),U.backwardSexp=R(W,-1),U.markSexp=function(B){var K=B.getCursor();B.setSelection(T(B,K,W,1),K)},U.transposeSexps=function(B){var K=W(B,B.getCursor(),-1),ne=W(B,K,1),ye=W(B,ne,1),Oe=W(B,ye,-1);B.replaceRange(B.getRange(Oe,ye)+B.getRange(ne,Oe)+B.getRange(K,ne),K,ye)},U.backwardUpList=S(function(B){for(var K=B.getCursor(),ne=K.line,ye=K.ch,Oe=[];ne>=B.firstLine();){for(var $e=B.getLine(ne),ge=null==ye?$e.length:ye;ge>0;)if(")"==(ye=$e.charAt(--ge)))Oe.push("(");else if("]"==ye)Oe.push("[");else if("}"==ye)Oe.push("{");else if(/[\(\{\[]/.test(ye)&&(!Oe.length||Oe.pop()!=ye))return B.extendSelection(H(ne,ge));--ne,ye=null}}),U.justOneSpace=function(B){for(var K=B.getCursor(),ne=K.ch,ye=K.ch,Oe=B.getLine(K.line);ne&&/\s/.test(Oe.charAt(ne-1));)--ne;for(;ye<Oe.length&&/\s/.test(Oe.charAt(ye));)++ye;B.replaceRange(" ",H(K.line,ne),H(K.line,ye))},U.openLine=S(function(B){B.replaceSelection("\n","start")}),U.transposeCharsRepeatable=S(function(B){B.execCommand("transposeChars")}),U.capitalizeWord=S(function(B){We(B,function(K){var ne=K.search(/\w/);return-1==ne?K:K.slice(0,ne)+K.charAt(ne).toUpperCase()+K.slice(ne+1).toLowerCase()})}),U.upcaseWord=S(function(B){We(B,function(K){return K.toUpperCase()})}),U.downcaseWord=S(function(B){We(B,function(K){return K.toLowerCase()})}),U.undoRepeatable=S("undo"),U.keyboardQuit=function(B){B.execCommand("clearSearch"),ue(B)},U.newline=S(function(B){B.replaceSelection("\n","end")}),U.gotoLine=function(B){var K=g(B,!0);if(null!=K&&K>0)return B.setCursor(K-1);Ee(B,"Goto line",function(ne){var ye;ne&&!isNaN(ye=Number(ne))&&ye==(0|ye)&&ye>0&&B.setCursor(ye-1)})},U.indentRigidly=function(B){B.indentSelection(g(B,!0)||B.getOption("indentUnit"))},U.exchangePointAndMark=function(B){B.setSelection(B.getCursor("head"),B.getCursor("anchor"))},U.quotedInsertTab=S("insertTab"),U.universalArgument=function(K){K.state.emacsPrefixMap=!0,K.addKeyMap(F),K.on("keyHandled",x),K.on("inputRead",x)},k.emacs={kill:z,killRegion:_,repeated:S};var Ge=k.keyMap.emacs=k.normalizeKeyMap({"Ctrl-W":"killRegion","Ctrl-K":"killLineEmacs","Alt-W":"killRingSave","Ctrl-Y":"yank","Alt-Y":"yankPop","Ctrl-Space":"setMark","Ctrl-Shift-2":"setMark","Ctrl-F":"forwardChar","Ctrl-B":"backwardChar",Right:"forwardChar",Left:"backwardChar","Ctrl-D":"deleteChar",Delete:"deleteForwardChar","Ctrl-H":"deleteBackwardChar",Backspace:"deleteBackwardChar","Alt-F":"forwardWord","Alt-B":"backwardWord","Alt-Right":"forwardWord","Alt-Left":"backwardWord","Alt-D":"killWord","Alt-Backspace":"backwardKillWord","Ctrl-N":"nextLine","Ctrl-P":"previousLine",Down:"nextLine",Up:"previousLine","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd",End:"goLineEnd",Home:"goLineStart","Alt-V":"scrollDownCommand","Ctrl-V":"scrollUpCommand",PageUp:"scrollDownCommand",PageDown:"scrollUpCommand","Ctrl-Up":"backwardParagraph","Ctrl-Down":"forwardParagraph","Alt-{":"backwardParagraph","Alt-}":"forwardParagraph","Alt-A":"backwardSentence","Alt-E":"forwardSentence","Alt-K":"killSentence","Ctrl-X Delete":"backwardKillSentence","Ctrl-Alt-K":"killSexp","Ctrl-Alt-Backspace":"backwardKillSexp","Ctrl-Alt-F":"forwardSexp","Ctrl-Alt-B":"backwardSexp","Shift-Ctrl-Alt-2":"markSexp","Ctrl-Alt-T":"transposeSexps","Ctrl-Alt-U":"backwardUpList","Alt-Space":"justOneSpace","Ctrl-O":"openLine","Ctrl-T":"transposeCharsRepeatable","Alt-C":"capitalizeWord","Alt-U":"upcaseWord","Alt-L":"downcaseWord","Alt-;":"toggleComment","Ctrl-/":"undoRepeatable","Shift-Ctrl--":"undoRepeatable","Ctrl-Z":"undoRepeatable","Cmd-Z":"undoRepeatable","Ctrl-X U":"undoRepeatable","Shift-Ctrl-Z":"redo","Shift-Alt-,":"goDocStart","Shift-Alt-.":"goDocEnd","Ctrl-S":"findPersistentNext","Ctrl-R":"findPersistentPrev","Ctrl-G":"keyboardQuit","Shift-Alt-5":"replace","Alt-/":"autocomplete",Enter:"newlineAndIndent","Ctrl-J":"newline",Tab:"indentAuto","Alt-G G":"gotoLine","Ctrl-X Tab":"indentRigidly","Ctrl-X Ctrl-X":"exchangePointAndMark","Ctrl-X Ctrl-S":"save","Ctrl-X Ctrl-W":"save","Ctrl-X S":"saveAll","Ctrl-X F":"open","Ctrl-X K":"close","Ctrl-X H":"selectAll","Ctrl-Q Tab":"quotedInsertTab","Ctrl-U":"universalArgument",fallthrough:"default"}),F={"Ctrl-G":j};function b(B){F[B]=function(K){te(K,B)},Ge["Ctrl-"+B]=function(K){te(K,B)},Z["Ctrl-"+B]=!0}for(var Me=0;Me<10;++Me)b(String(Me));b("-")}(pe(9475))},8823:(wt,tt,pe)=>{!function(k){"use strict";var U=k.commands,H=k.Pos;function s(g,S){g.extendSelectionsBy(function(T){return g.display.shift||g.doc.extend||T.empty()?function(g,S,T){if(T<0&&0==S.ch)return g.clipPos(H(S.line-1));var R=g.getLine(S.line);if(T>0&&S.ch>=R.length)return g.clipPos(H(S.line+1,0));for(var _,C="start",te=S.ch,Z=te,$=T<0?0:R.length,j=0;Z!=$;Z+=T,j++){var ve=R.charAt(T<0?Z-1:Z),x="_"!=ve&&k.isWordChar(ve)?"w":"o";if("w"==x&&ve.toUpperCase()==ve&&(x="W"),"start"==C)"o"!=x?(C="in",_=x):te=Z+T;else if("in"==C&&_!=x){if("w"==_&&"W"==x&&T<0&&Z--,"W"==_&&"w"==x&&T>0){if(Z==te+1){_="w";continue}Z--}break}}return H(S.line,Z)}(g.doc,T.head,S):S<0?T.from():T.to()})}function M(g,S){if(g.isReadOnly())return k.Pass;g.operation(function(){for(var T=g.listSelections().length,R=[],C=-1,_=0;_<T;_++){var te=g.listSelections()[_].head;if(!(te.line<=C)){var Z=H(te.line+(S?0:1),0);g.replaceRange("\n",Z,null,"+insertLine"),g.indentLine(Z.line,null,!0),R.push({head:Z,anchor:Z}),C=te.line+1}}g.setSelections(R)}),g.execCommand("indentAuto")}function N(g,S){for(var T=S.ch,R=T,C=g.getLine(S.line);T&&k.isWordChar(C.charAt(T-1));)--T;for(;R<C.length&&k.isWordChar(C.charAt(R));)++R;return{from:H(S.line,T),to:H(S.line,R),word:C.slice(T,R)}}function se(g,S){for(var T=g.listSelections(),R=[],C=0;C<T.length;C++){var _=T[C],te=g.findPosV(_.anchor,S,"line",_.anchor.goalColumn),Z=g.findPosV(_.head,S,"line",_.head.goalColumn);te.goalColumn=null!=_.anchor.goalColumn?_.anchor.goalColumn:g.cursorCoords(_.anchor,"div").left,Z.goalColumn=null!=_.head.goalColumn?_.head.goalColumn:g.cursorCoords(_.head,"div").left;var $={anchor:te,head:Z};R.push(_),R.push($)}g.setSelections(R)}U.goSubwordLeft=function(g){s(g,-1)},U.goSubwordRight=function(g){s(g,1)},U.scrollLineUp=function(g){var S=g.getScrollInfo();if(!g.somethingSelected()){var T=g.lineAtHeight(S.top+S.clientHeight,"local");g.getCursor().line>=T&&g.execCommand("goLineUp")}g.scrollTo(null,S.top-g.defaultTextHeight())},U.scrollLineDown=function(g){var S=g.getScrollInfo();if(!g.somethingSelected()){var T=g.lineAtHeight(S.top,"local")+1;g.getCursor().line<=T&&g.execCommand("goLineDown")}g.scrollTo(null,S.top+g.defaultTextHeight())},U.splitSelectionByLine=function(g){for(var S=g.listSelections(),T=[],R=0;R<S.length;R++)for(var C=S[R].from(),_=S[R].to(),te=C.line;te<=_.line;++te)_.line>C.line&&te==_.line&&0==_.ch||T.push({anchor:te==C.line?C:H(te,0),head:te==_.line?_:H(te)});g.setSelections(T,0)},U.singleSelectionTop=function(g){var S=g.listSelections()[0];g.setSelection(S.anchor,S.head,{scroll:!1})},U.selectLine=function(g){for(var S=g.listSelections(),T=[],R=0;R<S.length;R++){var C=S[R];T.push({anchor:H(C.from().line,0),head:H(C.to().line+1,0)})}g.setSelections(T)},U.insertLineAfter=function(g){return M(g,!1)},U.insertLineBefore=function(g){return M(g,!0)},U.selectNextOccurrence=function(g){var S=g.getCursor("from"),T=g.getCursor("to"),R=g.state.sublimeFindFullWord==g.doc.sel;if(0==k.cmpPos(S,T)){var C=N(g,S);if(!C.word)return;g.setSelection(C.from,C.to),R=!0}else{var _=g.getRange(S,T),te=R?new RegExp("\\b"+_+"\\b"):_,Z=g.getSearchCursor(te,T),$=Z.findNext();if($||($=(Z=g.getSearchCursor(te,H(g.firstLine(),0))).findNext()),!$||function(g,S,T){for(var R=0;R<g.length;R++)if(0==k.cmpPos(g[R].from(),S)&&0==k.cmpPos(g[R].to(),T))return!0;return!1}(g.listSelections(),Z.from(),Z.to()))return;g.addSelection(Z.from(),Z.to())}R&&(g.state.sublimeFindFullWord=g.doc.sel)},U.skipAndSelectNextOccurrence=function(g){var S=g.getCursor("anchor"),T=g.getCursor("head");U.selectNextOccurrence(g),0!=k.cmpPos(S,T)&&g.doc.setSelections(g.doc.listSelections().filter(function(R){return R.anchor!=S||R.head!=T}))},U.addCursorToPrevLine=function(g){se(g,-1)},U.addCursorToNextLine=function(g){se(g,1)};var q="(){}[]";function z(g){for(var S=g.listSelections(),T=[],R=0;R<S.length;R++){var C=S[R],_=C.head,te=g.scanForBracket(_,-1);if(!te)return!1;for(;;){var Z=g.scanForBracket(_,1);if(!Z)return!1;if(Z.ch==q.charAt(q.indexOf(te.ch)+1)){var $=H(te.pos.line,te.pos.ch+1);if(0!=k.cmpPos($,C.from())||0!=k.cmpPos(Z.pos,C.to())){T.push({anchor:$,head:Z.pos});break}if(!(te=g.scanForBracket(te.pos,-1)))return!1}_=H(Z.pos.line,Z.pos.ch+1)}}return g.setSelections(T),!0}function le(g){return g?/\bpunctuation\b/.test(g)?g:void 0:null}function fe(g,S,T){if(g.isReadOnly())return k.Pass;for(var _,R=g.listSelections(),C=[],te=0;te<R.length;te++){var Z=R[te];if(!Z.empty()){for(var $=Z.from().line,j=Z.to().line;te<R.length-1&&R[te+1].from().line==j;)j=R[++te].to().line;R[te].to().ch||j--,C.push($,j)}}C.length?_=!0:C.push(g.firstLine(),g.lastLine()),g.operation(function(){for(var ve=[],x=0;x<C.length;x+=2){var he=C[x+1],Ee=H(C[x],0),We=H(he),Ue=g.getRange(Ee,We,!1);Ue.sort(S?function(Ge,F){return Ge<F?-T:Ge==F?0:T}:function(Ge,F){var b=Ge.toUpperCase(),Me=F.toUpperCase();return b!=Me&&(Ge=b,F=Me),Ge<F?-T:Ge==F?0:T}),g.replaceRange(Ue,Ee,We),_&&ve.push({anchor:Ee,head:H(he+1,0)})}_&&g.setSelections(ve,0)})}function Fe(g,S){g.operation(function(){for(var T=g.listSelections(),R=[],C=[],_=0;_<T.length;_++)(te=T[_]).empty()?(R.push(_),C.push("")):C.push(S(g.getRange(te.from(),te.to())));var Z;for(g.replaceSelections(C,"around","case"),_=R.length-1;_>=0;_--){var te=T[R[_]];if(!(Z&&k.cmpPos(te.head,Z)>0)){var $=N(g,te.head);Z=$.from,g.replaceRange(S($.word),$.from,$.to)}}})}function ee(g){var S=g.getCursor("from"),T=g.getCursor("to");if(0==k.cmpPos(S,T)){var R=N(g,S);if(!R.word)return;S=R.from,T=R.to}return{from:S,to:T,query:g.getRange(S,T),word:R}}function re(g,S){var T=ee(g);if(T){var R=T.query,C=g.getSearchCursor(R,S?T.to:T.from);(S?C.findNext():C.findPrevious())?g.setSelection(C.from(),C.to()):(C=g.getSearchCursor(R,S?H(g.firstLine(),0):g.clipPos(H(g.lastLine()))),(S?C.findNext():C.findPrevious())?g.setSelection(C.from(),C.to()):T.word&&g.setSelection(T.from,T.to))}}U.selectScope=function(g){z(g)||g.execCommand("selectAll")},U.selectBetweenBrackets=function(g){if(!z(g))return k.Pass},U.goToBracket=function(g){g.extendSelectionsBy(function(S){var T=g.scanForBracket(S.head,1,le(g.getTokenTypeAt(S.head)));if(T&&0!=k.cmpPos(T.pos,S.head))return T.pos;var R=g.scanForBracket(S.head,-1,le(g.getTokenTypeAt(H(S.head.line,S.head.ch+1))));return R&&H(R.pos.line,R.pos.ch+1)||S.head})},U.swapLineUp=function(g){if(g.isReadOnly())return k.Pass;for(var S=g.listSelections(),T=[],R=g.firstLine()-1,C=[],_=0;_<S.length;_++){var te=S[_],Z=te.from().line-1,$=te.to().line;C.push({anchor:H(te.anchor.line-1,te.anchor.ch),head:H(te.head.line-1,te.head.ch)}),0==te.to().ch&&!te.empty()&&--$,Z>R?T.push(Z,$):T.length&&(T[T.length-1]=$),R=$}g.operation(function(){for(var j=0;j<T.length;j+=2){var ve=T[j],x=T[j+1],ue=g.getLine(ve);g.replaceRange("",H(ve,0),H(ve+1,0),"+swapLine"),x>g.lastLine()?g.replaceRange("\n"+ue,H(g.lastLine()),null,"+swapLine"):g.replaceRange(ue+"\n",H(x,0),null,"+swapLine")}g.setSelections(C),g.scrollIntoView()})},U.swapLineDown=function(g){if(g.isReadOnly())return k.Pass;for(var S=g.listSelections(),T=[],R=g.lastLine()+1,C=S.length-1;C>=0;C--){var _=S[C],te=_.to().line+1,Z=_.from().line;0==_.to().ch&&!_.empty()&&te--,te<R?T.push(te,Z):T.length&&(T[T.length-1]=Z),R=Z}g.operation(function(){for(var $=T.length-2;$>=0;$-=2){var j=T[$],ve=T[$+1],x=g.getLine(j);j==g.lastLine()?g.replaceRange("",H(j-1),H(j),"+swapLine"):g.replaceRange("",H(j,0),H(j+1,0),"+swapLine"),g.replaceRange(x+"\n",H(ve,0),null,"+swapLine")}g.scrollIntoView()})},U.toggleCommentIndented=function(g){g.toggleComment({indent:!0})},U.joinLines=function(g){for(var S=g.listSelections(),T=[],R=0;R<S.length;R++){for(var C=S[R],_=C.from(),te=_.line,Z=C.to().line;R<S.length-1&&S[R+1].from().line==Z;)Z=S[++R].to().line;T.push({start:te,end:Z,anchor:!C.empty()&&_})}g.operation(function(){for(var $=0,j=[],ve=0;ve<T.length;ve++){for(var he,x=T[ve],ue=x.anchor&&H(x.anchor.line-$,x.anchor.ch),Ee=x.start;Ee<=x.end;Ee++){var We=Ee-$;Ee==x.end&&(he=H(We,g.getLine(We).length+1)),We<g.lastLine()&&(g.replaceRange(" ",H(We),H(We+1,/^\s*/.exec(g.getLine(We+1))[0].length)),++$)}j.push({anchor:ue||he,head:he})}g.setSelections(j,0)})},U.duplicateLine=function(g){g.operation(function(){for(var S=g.listSelections().length,T=0;T<S;T++){var R=g.listSelections()[T];R.empty()?g.replaceRange(g.getLine(R.head.line)+"\n",H(R.head.line,0)):g.replaceRange(g.getRange(R.from(),R.to()),R.from())}g.scrollIntoView()})},U.sortLines=function(g){fe(g,!0,1)},U.reverseSortLines=function(g){fe(g,!0,-1)},U.sortLinesInsensitive=function(g){fe(g,!1,1)},U.reverseSortLinesInsensitive=function(g){fe(g,!1,-1)},U.nextBookmark=function(g){var S=g.state.sublimeBookmarks;if(S)for(;S.length;){var T=S.shift(),R=T.find();if(R)return S.push(T),g.setSelection(R.from,R.to)}},U.prevBookmark=function(g){var S=g.state.sublimeBookmarks;if(S)for(;S.length;){S.unshift(S.pop());var T=S[S.length-1].find();if(T)return g.setSelection(T.from,T.to);S.pop()}},U.toggleBookmark=function(g){for(var S=g.listSelections(),T=g.state.sublimeBookmarks||(g.state.sublimeBookmarks=[]),R=0;R<S.length;R++){for(var C=S[R].from(),_=S[R].to(),te=S[R].empty()?g.findMarksAt(C):g.findMarks(C,_),Z=0;Z<te.length;Z++)if(te[Z].sublimeBookmark){te[Z].clear();for(var $=0;$<T.length;$++)T[$]==te[Z]&&T.splice($--,1);break}Z==te.length&&T.push(g.markText(C,_,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},U.clearBookmarks=function(g){var S=g.state.sublimeBookmarks;if(S)for(var T=0;T<S.length;T++)S[T].clear();S.length=0},U.selectBookmarks=function(g){var S=g.state.sublimeBookmarks,T=[];if(S)for(var R=0;R<S.length;R++){var C=S[R].find();C?T.push({anchor:C.from,head:C.to}):S.splice(R--,0)}T.length&&g.setSelections(T,0)},U.smartBackspace=function(g){if(g.somethingSelected())return k.Pass;g.operation(function(){for(var S=g.listSelections(),T=g.getOption("indentUnit"),R=S.length-1;R>=0;R--){var C=S[R].head,_=g.getRange({line:C.line,ch:0},C),te=k.countColumn(_,null,g.getOption("tabSize")),Z=g.findPosH(C,-1,"char",!1);if(_&&!/\S/.test(_)&&te%T==0){var $=new H(C.line,k.findColumn(_,te-T,T));$.ch!=C.ch&&(Z=$)}g.replaceRange("",Z,C,"+delete")}})},U.delLineRight=function(g){g.operation(function(){for(var S=g.listSelections(),T=S.length-1;T>=0;T--)g.replaceRange("",S[T].anchor,H(S[T].to().line),"+delete");g.scrollIntoView()})},U.upcaseAtCursor=function(g){Fe(g,function(S){return S.toUpperCase()})},U.downcaseAtCursor=function(g){Fe(g,function(S){return S.toLowerCase()})},U.setSublimeMark=function(g){g.state.sublimeMark&&g.state.sublimeMark.clear(),g.state.sublimeMark=g.setBookmark(g.getCursor())},U.selectToSublimeMark=function(g){var S=g.state.sublimeMark&&g.state.sublimeMark.find();S&&g.setSelection(g.getCursor(),S)},U.deleteToSublimeMark=function(g){var S=g.state.sublimeMark&&g.state.sublimeMark.find();if(S){var T=g.getCursor(),R=S;if(k.cmpPos(T,R)>0){var C=R;R=T,T=C}g.state.sublimeKilled=g.getRange(T,R),g.replaceRange("",T,R)}},U.swapWithSublimeMark=function(g){var S=g.state.sublimeMark&&g.state.sublimeMark.find();S&&(g.state.sublimeMark.clear(),g.state.sublimeMark=g.setBookmark(g.getCursor()),g.setCursor(S))},U.sublimeYank=function(g){null!=g.state.sublimeKilled&&g.replaceSelection(g.state.sublimeKilled,null,"paste")},U.showInCenter=function(g){var S=g.cursorCoords(null,"local");g.scrollTo(null,(S.top+S.bottom)/2-g.getScrollInfo().clientHeight/2)},U.findUnder=function(g){re(g,!0)},U.findUnderPrevious=function(g){re(g,!1)},U.findAllUnder=function(g){var S=ee(g);if(S){for(var T=g.getSearchCursor(S.query),R=[],C=-1;T.findNext();)R.push({anchor:T.from(),head:T.to()}),T.from().line<=S.from.line&&T.from().ch<=S.from.ch&&C++;g.setSelections(R,C)}};var L=k.keyMap;L.macSublime={"Cmd-Left":"goLineStartSmart","Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-Left":"goSubwordLeft","Ctrl-Right":"goSubwordRight","Ctrl-Alt-Up":"scrollLineUp","Ctrl-Alt-Down":"scrollLineDown","Cmd-L":"selectLine","Shift-Cmd-L":"splitSelectionByLine",Esc:"singleSelectionTop","Cmd-Enter":"insertLineAfter","Shift-Cmd-Enter":"insertLineBefore","Cmd-D":"selectNextOccurrence","Shift-Cmd-Space":"selectScope","Shift-Cmd-M":"selectBetweenBrackets","Cmd-M":"goToBracket","Cmd-Ctrl-Up":"swapLineUp","Cmd-Ctrl-Down":"swapLineDown","Cmd-/":"toggleCommentIndented","Cmd-J":"joinLines","Shift-Cmd-D":"duplicateLine",F5:"sortLines","Shift-F5":"reverseSortLines","Cmd-F5":"sortLinesInsensitive","Shift-Cmd-F5":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Cmd-F2":"toggleBookmark","Shift-Cmd-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Cmd-K Cmd-D":"skipAndSelectNextOccurrence","Cmd-K Cmd-K":"delLineRight","Cmd-K Cmd-U":"upcaseAtCursor","Cmd-K Cmd-L":"downcaseAtCursor","Cmd-K Cmd-Space":"setSublimeMark","Cmd-K Cmd-A":"selectToSublimeMark","Cmd-K Cmd-W":"deleteToSublimeMark","Cmd-K Cmd-X":"swapWithSublimeMark","Cmd-K Cmd-Y":"sublimeYank","Cmd-K Cmd-C":"showInCenter","Cmd-K Cmd-G":"clearBookmarks","Cmd-K Cmd-Backspace":"delLineLeft","Cmd-K Cmd-1":"foldAll","Cmd-K Cmd-0":"unfoldAll","Cmd-K Cmd-J":"unfoldAll","Ctrl-Shift-Up":"addCursorToPrevLine","Ctrl-Shift-Down":"addCursorToNextLine","Cmd-F3":"findUnder","Shift-Cmd-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Cmd-[":"fold","Shift-Cmd-]":"unfold","Cmd-I":"findIncremental","Shift-Cmd-I":"findIncrementalReverse","Cmd-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"macDefault"},k.normalizeKeyMap(L.macSublime),L.pcSublime={"Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-T":"transposeChars","Alt-Left":"goSubwordLeft","Alt-Right":"goSubwordRight","Ctrl-Up":"scrollLineUp","Ctrl-Down":"scrollLineDown","Ctrl-L":"selectLine","Shift-Ctrl-L":"splitSelectionByLine",Esc:"singleSelectionTop","Ctrl-Enter":"insertLineAfter","Shift-Ctrl-Enter":"insertLineBefore","Ctrl-D":"selectNextOccurrence","Shift-Ctrl-Space":"selectScope","Shift-Ctrl-M":"selectBetweenBrackets","Ctrl-M":"goToBracket","Shift-Ctrl-Up":"swapLineUp","Shift-Ctrl-Down":"swapLineDown","Ctrl-/":"toggleCommentIndented","Ctrl-J":"joinLines","Shift-Ctrl-D":"duplicateLine",F9:"sortLines","Shift-F9":"reverseSortLines","Ctrl-F9":"sortLinesInsensitive","Shift-Ctrl-F9":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Ctrl-F2":"toggleBookmark","Shift-Ctrl-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Ctrl-K Ctrl-D":"skipAndSelectNextOccurrence","Ctrl-K Ctrl-K":"delLineRight","Ctrl-K Ctrl-U":"upcaseAtCursor","Ctrl-K Ctrl-L":"downcaseAtCursor","Ctrl-K Ctrl-Space":"setSublimeMark","Ctrl-K Ctrl-A":"selectToSublimeMark","Ctrl-K Ctrl-W":"deleteToSublimeMark","Ctrl-K Ctrl-X":"swapWithSublimeMark","Ctrl-K Ctrl-Y":"sublimeYank","Ctrl-K Ctrl-C":"showInCenter","Ctrl-K Ctrl-G":"clearBookmarks","Ctrl-K Ctrl-Backspace":"delLineLeft","Ctrl-K Ctrl-1":"foldAll","Ctrl-K Ctrl-0":"unfoldAll","Ctrl-K Ctrl-J":"unfoldAll","Ctrl-Alt-Up":"addCursorToPrevLine","Ctrl-Alt-Down":"addCursorToNextLine","Ctrl-F3":"findUnder","Shift-Ctrl-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Ctrl-[":"fold","Shift-Ctrl-]":"unfold","Ctrl-I":"findIncremental","Shift-Ctrl-I":"findIncrementalReverse","Ctrl-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"pcDefault"},k.normalizeKeyMap(L.pcSublime),L.sublime=L.default==L.macDefault?L.macSublime:L.pcSublime}(pe(9475),pe(7660),pe(2946))},1900:(wt,tt,pe)=>{!function(k){"use strict";var U=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<Del>",type:"keyToKey",toKeys:"x",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"gn",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!0}},{keys:"gN",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!1}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],H=U.length,V=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"vglobal",shortName:"v"},{name:"global",shortName:"g"}],s=k.Pos;k.Vim=function(){function Q(o,l){this==k.keyMap.vim&&(k.rmClass(o.getWrapperElement(),"cm-fat-cursor"),"contenteditable"==o.getOption("inputStyle")&&null!=document.body.style.caretColor&&(function(o){le(o),o.off("cursorActivity",z),o.state.fatCursorMarks=null}(o),o.getInputField().style.caretColor="")),(!l||l.attach!=q)&&function(o){o.setOption("disableInput",!1),o.off("cursorActivity",Rn),k.off(o.getInputField(),"paste",g(o)),o.state.vim=null}(o)}function q(o,l){this==k.keyMap.vim&&(k.addClass(o.getWrapperElement(),"cm-fat-cursor"),"contenteditable"==o.getOption("inputStyle")&&null!=document.body.style.caretColor&&(function(o){o.state.fatCursorMarks=[],z(o),o.on("cursorActivity",z)}(o),o.getInputField().style.caretColor="transparent")),(!l||l.attach!=q)&&function(o){o.setOption("disableInput",!0),o.setOption("showCursorWhenSelecting",!1),k.signal(o,"vim-mode-change",{mode:"normal"}),o.on("cursorActivity",Rn),$e(o),k.on(o.getInputField(),"paste",g(o))}(o)}function z(o){if(o.state.fatCursorMarks){le(o);for(var l=o.listSelections(),u=[],c=0;c<l.length;c++){var d=l[c];if(d.empty()){var v=o.getLine(d.anchor.line).length;u.push(d.anchor.ch<v?o.markText(d.anchor,s(d.anchor.line,d.anchor.ch+1),{className:"cm-fat-cursor-mark"}):o.markText(s(d.anchor.line,v-1),s(d.anchor.line,v),{className:"cm-fat-cursor-mark"}))}}o.state.fatCursorMarks=u}}function le(o){var l=o.state.fatCursorMarks;if(l)for(var u=0;u<l.length;u++)l[u].clear()}function ee(o,l){if(l){if(this[o])return this[o];var u=function(o){if("'"==o.charAt(0))return o.charAt(1);var l=o.split(/-(?!$)/),u=l[l.length-1];if(1==l.length&&1==l[0].length)return!1;if(2==l.length&&"Shift"==l[0]&&1==u.length)return!1;for(var c=!1,d=0;d<l.length;d++){var v=l[d];v in re?l[d]=re[v]:c=!0,v in L&&(l[d]=L[v])}return!!c&&(We(u)&&(l[l.length-1]=u.toLowerCase()),"<"+l.join("-")+">")}(o);if(!u)return!1;var c=k.Vim.findKey(l,u);return"function"==typeof c&&k.signal(l,"vim-keypress",u),c}}k.defineOption("vimMode",!1,function(o,l,u){l&&"vim"!=o.getOption("keyMap")?o.setOption("keyMap","vim"):!l&&u!=k.Init&&/^vim/.test(o.getOption("keyMap"))&&o.setOption("keyMap","default")});var re={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A",CapsLock:""},L={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"};function g(o){var l=o.state.vim;return l.onPasteFn||(l.onPasteFn=function(){l.insertMode||(o.setCursor(xt(o.getCursor(),0,1)),Wt.enterInsertMode(o,{},l))}),l.onPasteFn}var S=/[\d]/,T=[k.isWordChar,function(o){return o&&!k.isWordChar(o)&&!/\s/.test(o)}],R=[function(o){return/\S/.test(o)}];function C(o,l){for(var u=[],c=o;c<o+l;c++)u.push(String.fromCharCode(c));return u}var ve,_=C(65,26),te=C(97,26),Z=C(48,10),$=[].concat(_,te,Z,["<",">"]),j=[].concat(_,te,Z,["-",'"',".",":","_","/"]);try{ve=new RegExp("^[\\p{Lu}]$","u")}catch(o){ve=/^[A-Z]$/}function x(o,l){return l>=o.firstLine()&&l<=o.lastLine()}function ue(o){return/^[a-z]$/.test(o)}function he(o){return-1!="()[]{}".indexOf(o)}function Ee(o){return S.test(o)}function We(o){return ve.test(o)}function Ue(o){return/^\s*$/.test(o)}function Ge(o){return-1!=".?!".indexOf(o)}function F(o,l){for(var u=0;u<l.length;u++)if(l[u]==o)return!0;return!1}var b={};function Me(o,l,u,c,d){if(void 0===l&&!d)throw Error("defaultValue is required unless callback is provided");if(u||(u="string"),b[o]={type:u,defaultValue:l,callback:d},c)for(var v=0;v<c.length;v++)b[c[v]]=b[o];l&&B(o,l)}function B(o,l,u,c){var d=b[o],v=(c=c||{}).scope;if(!d)return new Error("Unknown option: "+o);if("boolean"==d.type){if(l&&!0!==l)return new Error("Invalid argument: "+o+"="+l);!1!==l&&(l=!0)}d.callback?("local"!==v&&d.callback(l,void 0),"global"!==v&&u&&d.callback(l,u)):("local"!==v&&(d.value="boolean"==d.type?!!l:l),"global"!==v&&u&&(u.state.vim.options[o]={value:l}))}function K(o,l,u){var c=b[o],d=(u=u||{}).scope;if(!c)return new Error("Unknown option: "+o);if(c.callback){var v=l&&c.callback(void 0,l);return"global"!==d&&void 0!==v?v:"local"!==d?c.callback():void 0}return((v="global"!==d&&l&&l.state.vim.options[o])||"local"!==d&&c||{}).value}Me("filetype",void 0,"string",["ft"],function(o,l){if(void 0!==l){var u;if(void 0===o)return"null"==(u=l.getOption("mode"))?"":u;l.setOption("mode",u=""==o?"null":o)}});var ge,ne=function(){var o=100,l=-1,u=0,c=0,d=new Array(o);function w(E,G){(l+=G)>u?l=u:l<c&&(l=c);var J=d[(o+l)%o];if(J&&!J.find()){var Te,me=G>0?1:-1,xe=E.getCursor();do{if((J=d[(o+(l+=me))%o])&&(Te=J.find())&&!Ve(xe,Te))break}while(l<u&&l>c)}return J}return{cachedCursor:void 0,add:function(E,G,J){var Te=d[l%o];function xe(Pe){var De=++l%o,Je=d[De];Je&&Je.clear(),d[De]=E.setBookmark(Pe)}if(Te){var ke=Te.find();ke&&!Ve(ke,G)&&xe(G)}else xe(G);xe(J),u=l,(c=l-o+1)<0&&(c=0)},find:function(E,G){var J=l,me=w(E,G);return l=J,me&&me.find()},move:w}},ye=function(o){return o?{changes:o.changes,expectCursorActivityForChange:o.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function Oe(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=ye()}function $e(o){return o.state.vim||(o.state.vim={inputState:new er,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},fakeCursor:null,insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),o.state.vim}function Ye(){for(var o in ge={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:ne(),macroModeState:new Oe,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new dr({}),searchHistoryController:new Xt,exCommandHistoryController:new Xt},b){var l=b[o];l.value=l.defaultValue}}Oe.prototype={exitMacroRecordMode:function(){var o=ge.macroModeState;o.onRecordingDone&&o.onRecordingDone(),o.onRecordingDone=void 0,o.isRecording=!1},enterMacroRecordMode:function(o,l){var u=ge.registerController.getRegister(l);u&&(u.clear(),this.latestRegister=l,o.openDialog&&(this.onRecordingDone=o.openDialog(document.createTextNode("(recording)["+l+"]"),null,{bottom:!0})),this.isRecording=!0)}};var Ke,ur={buildKeyMap:function(){},getRegisterController:function(){return ge.registerController},resetVimGlobalState_:Ye,getVimGlobalState_:function(){return ge},maybeInitVimState_:$e,suppressErrorLogging:!1,InsertModeKey:si,map:function(o,l,u){Or.map(o,l,u)},unmap:function(o,l){Or.unmap(o,l)},noremap:function(o,l,u){function c(Te){return Te?[Te]:["normal","insert","visual"]}for(var d=c(u),v=U.length,O=v-H;O<v&&d.length;O++){var E=U[O];if(!(E.keys!=l||u&&E.context&&E.context!==u||"ex"===E.type.substr(0,2)||"key"===E.type.substr(0,3))){var G={};for(var J in E)G[J]=E[J];G.keys=o,u&&!G.context&&(G.context=u),this._mapCommand(G);var me=c(E.context);d=d.filter(function(Te){return-1===me.indexOf(Te)})}}},mapclear:function(o){var l=U.length,u=H,c=U.slice(0,l-u);if(U=U.slice(l-u),o)for(var d=c.length-1;d>=0;d--){var v=c[d];if(o!==v.context)if(v.context)this._mapCommand(v);else{var w=["normal","insert","visual"];for(var O in w)if(w[O]!==o){var E={};for(var G in v)E[G]=v[G];E.context=w[O],this._mapCommand(E)}}}},setOption:B,getOption:K,defineOption:Me,defineEx:function(o,l,u){if(l){if(0!==o.indexOf(l))throw new Error('(Vim.defineEx) "'+l+'" is not a prefix of "'+o+'", command not registered')}else l=o;Ri[o]=u,Or.commandMap_[l]={name:o,shortName:l,type:"api"}},handleKey:function(o,l,u){var c=this.findKey(o,l,u);if("function"==typeof c)return c()},findKey:function(o,l,u){var G,c=$e(o);function d(){var J=ge.macroModeState;if(J.isRecording){if("q"==l)return J.exitMacroRecordMode(),ct(o),!0;"mapping"!=u&&function(o,l){if(!o.isPlaying){var c=ge.registerController.getRegister(o.latestRegister);c&&c.pushText(l)}}(J,l)}}function v(){if("<Esc>"==l)return ct(o),c.visualMode?nr(o):c.insertMode&&kn(o),!0}return!1===(G=c.insertMode?function(){if(v())return!0;for(var J=c.inputState.keyBuffer=c.inputState.keyBuffer+l,me=1==l.length,Te=Tt.matchCommand(J,U,c.inputState,"insert");J.length>1&&"full"!=Te.type;){J=c.inputState.keyBuffer=J.slice(1);var xe=Tt.matchCommand(J,U,c.inputState,"insert");"none"!=xe.type&&(Te=xe)}if("none"==Te.type)return ct(o),!1;if("partial"==Te.type)return Ke&&window.clearTimeout(Ke),Ke=window.setTimeout(function(){c.insertMode&&c.inputState.keyBuffer&&ct(o)},K("insertModeEscKeysTimeout")),!me;if(Ke&&window.clearTimeout(Ke),me){for(var ke=o.listSelections(),Pe=0;Pe<ke.length;Pe++){var De=ke[Pe].head;o.replaceRange("",xt(De,0,-(J.length-1)),De,"+input")}ge.macroModeState.lastInsertModeChanges.changes.pop()}return ct(o),Te.command}():function(){if(d()||v())return!0;var J=c.inputState.keyBuffer=c.inputState.keyBuffer+l;if(/^[1-9]\d*$/.test(J))return!0;if(!(me=/^(\d*)(.*)$/.exec(J)))return ct(o),!1;var Te=c.visualMode?"visual":"normal",xe=me[2]||me[1];c.inputState.operatorShortcut&&c.inputState.operatorShortcut.slice(-1)==xe&&(xe=c.inputState.operatorShortcut);var me,ke=Tt.matchCommand(xe,U,c.inputState,Te);return"none"==ke.type?(ct(o),!1):"partial"==ke.type||(c.inputState.keyBuffer="",(me=/^(\d*)(.*)$/.exec(J))[1]&&"0"!=me[1]&&c.inputState.pushRepeatDigit(me[1]),ke.command)}())?c.insertMode||1!==l.length?void 0:function(){return!0}:!0===G?function(){return!0}:function(){return o.operation(function(){o.curOp.isVimOp=!0;try{"keyToKey"==G.type?function(J){for(var me;J;)me=/<\w+-.+?>|<\w+>|./.exec(J),J=J.substring(me.index+(l=me[0]).length),k.Vim.handleKey(o,l,"mapping")}(G.toKeys):Tt.processCommand(o,c,G)}catch(J){throw o.state.vim=void 0,$e(o),k.Vim.suppressErrorLogging||console.log(J),J}return!0})}},handleEx:function(o,l){Or.processCommand(o,l)},defineMotion:function(o,l){It[o]=l},defineAction:function(o,l){Wt[o]=l},defineOperator:function(o,l){Er[o]=l},mapCommand:function(o,l,u,c,d){var v={keys:o,type:l};for(var w in v[l]=u,v[l+"Args"]=c,d)v[w]=d[w];Nn(v)},_mapCommand:Nn,defineRegister:function(o,l){var u=ge.registerController.registers;if(!o||1!=o.length)throw Error("Register name must be 1 character");if(u[o])throw Error("Register already defined "+o);u[o]=l,j.push(o)},exitVisualMode:nr,exitInsertMode:kn};function er(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}function ct(o,l){o.state.vim.inputState=new er,k.signal(o,"vim-command-done",l)}function gt(o,l,u){this.clear(),this.keyBuffer=[o||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!l,this.blockwise=!!u}function dr(o){this.registers=o,this.unnamedRegister=o['"']=new gt,o["."]=new gt,o[":"]=new gt,o["/"]=new gt}function Xt(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}er.prototype.pushRepeatDigit=function(o){this.operator?this.motionRepeat=this.motionRepeat.concat(o):this.prefixRepeat=this.prefixRepeat.concat(o)},er.prototype.getRepeat=function(){var o=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(o=1,this.prefixRepeat.length>0&&(o*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(o*=parseInt(this.motionRepeat.join(""),10))),o},gt.prototype={setText:function(o,l,u){this.keyBuffer=[o||""],this.linewise=!!l,this.blockwise=!!u},pushText:function(o,l){l&&(this.linewise||this.keyBuffer.push("\n"),this.linewise=!0),this.keyBuffer.push(o)},pushInsertModeChanges:function(o){this.insertModeChanges.push(ye(o))},pushSearchQuery:function(o){this.searchQueries.push(o)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}},dr.prototype={pushText:function(o,l,u,c,d){if("_"!==o){c&&"\n"!==u.charAt(u.length-1)&&(u+="\n");var v=this.isValidRegister(o)?this.getRegister(o):null;if(!v){switch(l){case"yank":this.registers[0]=new gt(u,c,d);break;case"delete":case"change":-1==u.indexOf("\n")?this.registers["-"]=new gt(u,c):(this.shiftNumericRegisters_(),this.registers[1]=new gt(u,c))}return void this.unnamedRegister.setText(u,c,d)}We(o)?v.pushText(u,c):v.setText(u,c,d),this.unnamedRegister.setText(v.toString(),c)}},getRegister:function(o){return this.isValidRegister(o)?(o=o.toLowerCase(),this.registers[o]||(this.registers[o]=new gt),this.registers[o]):this.unnamedRegister},isValidRegister:function(o){return o&&F(o,j)},shiftNumericRegisters_:function(){for(var o=9;o>=2;o--)this.registers[o]=this.getRegister(""+(o-1))}},Xt.prototype={nextMatch:function(o,l){var u=this.historyBuffer,c=l?-1:1;null===this.initialPrefix&&(this.initialPrefix=o);for(var d=this.iterator+c;l?d>=0:d<u.length;d+=c)for(var v=u[d],w=0;w<=v.length;w++)if(this.initialPrefix==v.substring(0,w))return this.iterator=d,v;return d>=u.length?(this.iterator=u.length,this.initialPrefix):d<0?o:void 0},pushInput:function(o){var l=this.historyBuffer.indexOf(o);l>-1&&this.historyBuffer.splice(l,1),o.length&&this.historyBuffer.push(o)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var Tt={matchCommand:function(o,l,u,c){var d=function(o,l,u,c){for(var d,v=[],w=[],O=0;O<l.length;O++){var E=l[O];"insert"==u&&"insert"!=E.context||E.context&&E.context!=u||c.operator&&"action"==E.type||!(d=Cr(o,E.keys))||("partial"==d&&v.push(E),"full"==d&&w.push(E))}return{partial:v.length&&v,full:w.length&&w}}(o,l,c,u);if(!d.full&&!d.partial)return{type:"none"};if(!d.full&&d.partial)return{type:"partial"};for(var v,w=0;w<d.full.length;w++)v||(v=d.full[w]);if("<character>"==v.keys.slice(-11)){var E=function(o){var l=/^.*(<[^>]+>)$/.exec(o),u=l?l[1]:o.slice(-1);if(u.length>1)switch(u){case"<CR>":u="\n";break;case"<Space>":u=" ";break;default:u=""}return u}(o);if(!E)return{type:"none"};u.selectedCharacter=E}return{type:"full",command:v}},processCommand:function(o,l,u){switch(l.inputState.repeatOverride=u.repeatOverride,u.type){case"motion":this.processMotion(o,l,u);break;case"operator":this.processOperator(o,l,u);break;case"operatorMotion":this.processOperatorMotion(o,l,u);break;case"action":this.processAction(o,l,u);break;case"search":this.processSearch(o,l,u);break;case"ex":case"keyToEx":this.processEx(o,l,u)}},processMotion:function(o,l,u){l.inputState.motion=u.motion,l.inputState.motionArgs=lt(u.motionArgs),this.evalInput(o,l)},processOperator:function(o,l,u){var c=l.inputState;if(c.operator){if(c.operator==u.operator)return c.motion="expandToLine",c.motionArgs={linewise:!0},void this.evalInput(o,l);ct(o)}c.operator=u.operator,c.operatorArgs=lt(u.operatorArgs),u.keys.length>1&&(c.operatorShortcut=u.keys),u.exitVisualBlock&&(l.visualBlock=!1,Kt(o)),l.visualMode&&this.evalInput(o,l)},processOperatorMotion:function(o,l,u){var c=l.visualMode,d=lt(u.operatorMotionArgs);d&&c&&d.visualLine&&(l.visualLine=!0),this.processOperator(o,l,u),c||this.processMotion(o,l,u)},processAction:function(o,l,u){var c=l.inputState,d=c.getRepeat(),v=!!d,w=lt(u.actionArgs)||{};c.selectedCharacter&&(w.selectedCharacter=c.selectedCharacter),u.operator&&this.processOperator(o,l,u),u.motion&&this.processMotion(o,l,u),(u.motion||u.operator)&&this.evalInput(o,l),w.repeat=d||1,w.repeatIsExplicit=v,w.registerName=c.registerName,ct(o),l.lastMotion=null,u.isEdit&&this.recordLastEdit(l,c,u),Wt[u.action](o,w,l)},processSearch:function(o,l,u){if(o.getSearchCursor){var c=u.searchArgs.forward,d=u.searchArgs.wholeWordOnly;dt(o).setReversed(!c);var v=c?"/":"?",w=dt(o).getQuery(),O=o.getScrollInfo();switch(u.searchArgs.querySrc){case"prompt":var Te=ge.macroModeState;Te.isPlaying?E(Pe=Te.replaySearchQueries.shift(),!0,!1):yn(o,{onClose:function(De){o.scrollTo(O.left,O.top),E(De,!0,!0);var Je=ge.macroModeState;Je.isRecording&&function(o,l){if(!o.isPlaying){var c=ge.registerController.getRegister(o.latestRegister);c&&c.pushSearchQuery&&c.pushSearchQuery(l)}}(Je,De)},prefix:v,desc:"(JavaScript regexp)",onKeyUp:function(De,Je,Qe){var ar,St,Xe=k.keyName(De);"Up"==Xe||"Down"==Xe?(ar=De.target?De.target.selectionEnd:0,Qe(Je=ge.searchHistoryController.nextMatch(Je,"Up"==Xe)||""),ar&&De.target&&(De.target.selectionEnd=De.target.selectionStart=Math.min(ar,De.target.value.length))):"Left"!=Xe&&"Right"!=Xe&&"Ctrl"!=Xe&&"Alt"!=Xe&&"Shift"!=Xe&&ge.searchHistoryController.reset();try{St=ln(o,Je,!0,!0)}catch(Nt){}St?o.scrollIntoView(Ni(o,!c,St),30):(In(o),o.scrollTo(O.left,O.top))},onKeyDown:function(De,Je,Qe){var Xe=k.keyName(De);"Esc"==Xe||"Ctrl-C"==Xe||"Ctrl-["==Xe||"Backspace"==Xe&&""==Je?(ge.searchHistoryController.pushInput(Je),ge.searchHistoryController.reset(),ln(o,w),In(o),o.scrollTo(O.left,O.top),k.e_stop(De),ct(o),Qe(),o.focus()):"Up"==Xe||"Down"==Xe?k.e_stop(De):"Ctrl-U"==Xe&&(k.e_stop(De),Qe(""))}});break;case"wordUnderCursor":var xe=gr(o,!1,0,!1,!0),ke=!0;if(xe||(xe=gr(o,!1,0,!1,!1),ke=!1),!xe)return;var Pe=o.getLine(xe.start.line).substring(xe.start.ch,xe.end.ch);Pe=ke&&d?"\\b"+Pe+"\\b":function(o){return o.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}(Pe),ge.jumpList.cachedCursor=o.getCursor(),o.setCursor(xe.start),E(Pe,!0,!1)}}function E(De,Je,Qe){ge.searchHistoryController.pushInput(De),ge.searchHistoryController.reset();try{ln(o,De,Je,Qe)}catch(Xe){return ut(o,"Invalid regex: "+De),void ct(o)}Tt.processMotion(o,l,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:u.searchArgs.toJumplist}})}},processEx:function(o,l,u){function c(v){ge.exCommandHistoryController.pushInput(v),ge.exCommandHistoryController.reset(),Or.processCommand(o,v)}function d(v,w,O){var J,E=k.keyName(v);("Esc"==E||"Ctrl-C"==E||"Ctrl-["==E||"Backspace"==E&&""==w)&&(ge.exCommandHistoryController.pushInput(w),ge.exCommandHistoryController.reset(),k.e_stop(v),ct(o),O(),o.focus()),"Up"==E||"Down"==E?(k.e_stop(v),J=v.target?v.target.selectionEnd:0,O(w=ge.exCommandHistoryController.nextMatch(w,"Up"==E)||""),J&&v.target&&(v.target.selectionEnd=v.target.selectionStart=Math.min(J,v.target.value.length))):"Ctrl-U"==E?(k.e_stop(v),O("")):"Left"!=E&&"Right"!=E&&"Ctrl"!=E&&"Alt"!=E&&"Shift"!=E&&ge.exCommandHistoryController.reset()}"keyToEx"==u.type?Or.processCommand(o,u.exArgs.input):yn(o,l.visualMode?{onClose:c,prefix:":",value:"'<,'>",onKeyDown:d,selectValueOnOpen:!1}:{onClose:c,prefix:":",onKeyDown:d})},evalInput:function(o,l){var xe,ke,Pe,u=l.inputState,c=u.motion,d=u.motionArgs||{},v=u.operator,w=u.operatorArgs||{},O=u.registerName,E=l.sel,G=qe(l.visualMode?yt(o,E.head):o.getCursor("head")),J=qe(l.visualMode?yt(o,E.anchor):o.getCursor("anchor")),me=qe(G),Te=qe(J);if(v&&this.recordLastEdit(l,u),(Pe=void 0!==u.repeatOverride?u.repeatOverride:u.getRepeat())>0&&d.explicitRepeat?d.repeatIsExplicit=!0:(d.noRepeat||!d.explicitRepeat&&0===Pe)&&(Pe=1,d.repeatIsExplicit=!1),u.selectedCharacter&&(d.selectedCharacter=w.selectedCharacter=u.selectedCharacter),d.repeat=Pe,ct(o),c){var De=It[c](o,G,d,l,u);if(l.lastMotion=It[c],!De)return;if(d.toJumplist){var Je=ge.jumpList,Qe=Je.cachedCursor;Qe?(fr(o,Qe,De),delete Je.cachedCursor):fr(o,G,De)}De instanceof Array?(ke=De[0],xe=De[1]):xe=De,xe||(xe=qe(G)),l.visualMode?(l.visualBlock&&xe.ch===1/0||(xe=yt(o,xe)),ke&&(ke=yt(o,ke)),E.anchor=ke=ke||Te,E.head=xe,Kt(o),Se(o,l,"<",nt(ke,xe)?ke:xe),Se(o,l,">",nt(ke,xe)?xe:ke)):v||(xe=yt(o,xe),o.setCursor(xe.line,xe.ch))}if(v){if(w.lastSel){ke=Te;var Xe=w.lastSel,kt=Math.abs(Xe.head.line-Xe.anchor.line),ar=Math.abs(Xe.head.ch-Xe.anchor.ch);xe=Xe.visualLine?s(Te.line+kt,Te.ch):Xe.visualBlock?s(Te.line+kt,Te.ch+ar):Xe.head.line==Xe.anchor.line?s(Te.line,Te.ch+ar):s(Te.line+kt,Te.ch),l.visualMode=!0,l.visualLine=Xe.visualLine,l.visualBlock=Xe.visualBlock,E=l.sel={anchor:ke,head:xe},Kt(o)}else l.visualMode&&(w.lastSel={anchor:qe(E.anchor),head:qe(E.head),visualBlock:l.visualBlock,visualLine:l.visualLine});var St,Nt,pt,ot,jt;if(l.visualMode){if(St=At(E.head,E.anchor),Nt=ht(E.head,E.anchor),pt=l.visualLine||w.linewise,jt=Xr(o,{anchor:St,head:Nt},ot=l.visualBlock?"block":pt?"line":"char"),pt){var _t=jt.ranges;if("block"==ot)for(var at=0;at<_t.length;at++)_t[at].head.ch=Ct(o,_t[at].head.line);else"line"==ot&&(_t[0].head=s(_t[0].head.line+1,0))}}else{if(St=qe(ke||Te),nt(Nt=qe(xe||me),St)){var $r=St;St=Nt,Nt=$r}(pt=d.linewise||w.linewise)?function(o,l,u){l.ch=0,u.ch=0,u.line++}(0,St,Nt):d.forward&&function(o,l,u){var c=o.getRange(l,u);if(/\n\s*$/.test(c)){var d=c.split("\n");d.pop();for(var v=d.pop();d.length>0&&v&&Ue(v);v=d.pop())u.line--,u.ch=0;v?(u.line--,u.ch=Ct(o,u.line)):u.ch=0}}(o,St,Nt),jt=Xr(o,{anchor:St,head:Nt},ot="char",!d.inclusive||pt)}o.setSelections(jt.ranges,jt.primary),l.lastMotion=null,w.repeat=Pe,w.registerName=O,w.linewise=pt;var en=Er[v](o,w,jt.ranges,Te,xe);l.visualMode&&nr(o,null!=en),en&&o.setCursor(en)}},recordLastEdit:function(o,l,u){var c=ge.macroModeState;c.isPlaying||(o.lastEditInputState=l,o.lastEditActionCommand=u,c.lastInsertModeChanges.changes=[],c.lastInsertModeChanges.expectCursorActivityForChange=!1,c.lastInsertModeChanges.visualBlock=o.visualBlock?o.sel.head.line-o.sel.anchor.line:0)}},It={moveToTopLine:function(o,l,u){var c=oi(o).top+u.repeat-1;return s(c,Et(o.getLine(c)))},moveToMiddleLine:function(o){var l=oi(o),u=Math.floor(.5*(l.top+l.bottom));return s(u,Et(o.getLine(u)))},moveToBottomLine:function(o,l,u){var c=oi(o).bottom-u.repeat+1;return s(c,Et(o.getLine(c)))},expandToLine:function(o,l,u){return s(l.line+u.repeat-1,1/0)},findNext:function(o,l,u){var c=dt(o),d=c.getQuery();if(d){var v=!u.forward;return v=c.isReversed()?!v:v,ii(o,d),Ni(o,v,d,u.repeat)}},findAndSelectNextInclusive:function(o,l,u,c,d){var v=dt(o),w=v.getQuery();if(w){var O=!u.forward,E=function(o,l,u,c,d){return void 0===c&&(c=1),o.operation(function(){var v=o.getCursor(),w=o.getSearchCursor(u,v),O=w.find(!l);!d.visualMode&&O&&Ve(w.from(),v)&&w.find(!l);for(var E=0;E<c;E++)if(!(O=w.find(l))&&!(w=o.getSearchCursor(u,l?s(o.lastLine()):s(o.firstLine(),0))).find(l))return;return[w.from(),w.to()]})}(o,O=v.isReversed()?!O:O,w,u.repeat,c);if(E){if(d.operator)return E;var G=E[0],J=s(E[1].line,E[1].ch-1);if(c.visualMode){(c.visualLine||c.visualBlock)&&(c.visualLine=!1,c.visualBlock=!1,k.signal(o,"vim-mode-change",{mode:"visual",subMode:""}));var me=c.sel.anchor;if(me)return v.isReversed()?u.forward?[me,G]:[me,J]:u.forward?[me,J]:[me,G]}else c.visualMode=!0,c.visualLine=!1,c.visualBlock=!1,k.signal(o,"vim-mode-change",{mode:"visual",subMode:""});return O?[J,G]:[G,J]}}},goToMark:function(o,l,u,c){var d=Bi(o,c,u.selectedCharacter);return d?u.linewise?{line:d.line,ch:Et(o.getLine(d.line))}:d:null},moveToOtherHighlightedEnd:function(o,l,u,c){if(c.visualBlock&&u.sameLine){var d=c.sel;return[yt(o,s(d.anchor.line,d.head.ch)),yt(o,s(d.head.line,d.anchor.ch))]}return[c.sel.head,c.sel.anchor]},jumpToMark:function(o,l,u,c){for(var d=l,v=0;v<u.repeat;v++){var w=d;for(var O in c.marks)if(ue(O)){var E=c.marks[O].find();if(!((u.forward?nt(E,w):nt(w,E))||u.linewise&&E.line==w.line)){var J=Ve(w,d),me=u.forward?Nr(w,E,d):Nr(d,E,w);(J||me)&&(d=E)}}}return u.linewise&&(d=s(d.line,Et(o.getLine(d.line)))),d},moveByCharacters:function(o,l,u){var d=u.repeat;return s(l.line,u.forward?l.ch+d:l.ch-d)},moveByLines:function(o,l,u,c){var d=l,v=d.ch;switch(c.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:v=c.lastHPos;break;default:c.lastHPos=v}var w=u.repeat+(u.repeatOffset||0),O=u.forward?d.line+w:d.line-w,E=o.firstLine(),G=o.lastLine(),J=o.findPosV(d,u.forward?w:-w,"line",c.lastHSPos);return(u.forward?J.line>O:J.line<O)&&(O=J.line,v=J.ch),O<E&&d.line==E?this.moveToStartOfLine(o,l,u,c):O>G&&d.line==G?be(o,l,u,c,!0):(u.toFirstChar&&(v=Et(o.getLine(O)),c.lastHPos=v),c.lastHSPos=o.charCoords(s(O,v),"div").left,s(O,v))},moveByDisplayLines:function(o,l,u,c){var d=l;switch(c.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:c.lastHSPos=o.charCoords(d,"div").left}var v=u.repeat;if((w=o.findPosV(d,u.forward?v:-v,"line",c.lastHSPos)).hitSide)if(u.forward)var O=o.charCoords(w,"div"),w=o.coordsChar({top:O.top+8,left:c.lastHSPos},"div");else{var G=o.charCoords(s(o.firstLine(),0),"div");G.left=c.lastHSPos,w=o.coordsChar(G,"div")}return c.lastHPos=w.ch,w},moveByPage:function(o,l,u){var d=u.repeat;return o.findPosV(l,u.forward?d:-d,"page")},moveByParagraph:function(o,l,u){return et(o,l,u.repeat,u.forward?1:-1)},moveBySentence:function(o,l,u){return function(o,l,u,c){function d(E,G){if(G.pos+G.dir<0||G.pos+G.dir>=G.line.length){if(G.ln+=G.dir,!x(E,G.ln))return G.line=null,G.ln=null,void(G.pos=null);G.line=E.getLine(G.ln),G.pos=G.dir>0?0:G.line.length-1}else G.pos+=G.dir}function v(E,G,J,me){var xe=""===(Te=E.getLine(G)),ke={line:Te,ln:G,pos:J,dir:me},Pe={ln:ke.ln,pos:ke.pos},De=""===ke.line;for(d(E,ke);null!==ke.line;){if(Pe.ln=ke.ln,Pe.pos=ke.pos,""===ke.line&&!De)return{ln:ke.ln,pos:ke.pos};if(xe&&""!==ke.line&&!Ue(ke.line[ke.pos]))return{ln:ke.ln,pos:ke.pos};Ge(ke.line[ke.pos])&&!xe&&(ke.pos===ke.line.length-1||Ue(ke.line[ke.pos+1]))&&(xe=!0),d(E,ke)}var Te=E.getLine(Pe.ln);Pe.pos=0;for(var Je=Te.length-1;Je>=0;--Je)if(!Ue(Te[Je])){Pe.pos=Je;break}return Pe}function w(E,G,J,me){var xe={line:Te=E.getLine(G),ln:G,pos:J,dir:me},ke={ln:xe.ln,pos:null},Pe=""===xe.line;for(d(E,xe);null!==xe.line;){if(""===xe.line&&!Pe)return null!==ke.pos?ke:{ln:xe.ln,pos:xe.pos};if(Ge(xe.line[xe.pos])&&null!==ke.pos&&(xe.ln!==ke.ln||xe.pos+1!==ke.pos))return ke;""!==xe.line&&!Ue(xe.line[xe.pos])&&(Pe=!1,ke={ln:xe.ln,pos:xe.pos}),d(E,xe)}var Te=E.getLine(ke.ln);ke.pos=0;for(var De=0;De<Te.length;++De)if(!Ue(Te[De])){ke.pos=De;break}return ke}for(var O={ln:l.line,pos:l.ch};u>0;)O=c<0?w(o,O.ln,O.pos,c):v(o,O.ln,O.pos,c),u--;return s(O.ln,O.pos)}(o,l,u.repeat,u.forward?1:-1)},moveByScroll:function(o,l,u,c){var v,d=o.getScrollInfo(),w=u.repeat;w||(w=d.clientHeight/(2*o.defaultTextHeight()));var O=o.charCoords(l,"local");if(u.repeat=w,!(v=It.moveByDisplayLines(o,l,u,c)))return null;var E=o.charCoords(v,"local");return o.scrollTo(null,d.top+E.top-O.top),v},moveByWords:function(o,l,u){return function(o,l,u,c,d,v){var w=qe(l),O=[];(c&&!d||!c&&d)&&u++;for(var E=!(c&&d),G=0;G<u;G++){var J=Fr(o,l,c,v,E);if(!J){var me=Ct(o,o.lastLine());O.push(c?{line:o.lastLine(),from:me,to:me}:{line:0,from:0,to:0});break}O.push(J),l=s(J.line,c?J.to-1:J.from)}var Te=O.length!=u,xe=O[0],ke=O.pop();return c&&!d?(!Te&&(xe.from!=w.ch||xe.line!=w.line)&&(ke=O.pop()),s(ke.line,ke.from)):c&&d?s(ke.line,ke.to-1):!c&&d?(!Te&&(xe.to!=w.ch||xe.line!=w.line)&&(ke=O.pop()),s(ke.line,ke.to)):s(ke.line,ke.from)}(o,l,u.repeat,!!u.forward,!!u.wordEnd,!!u.bigWord)},moveTillCharacter:function(o,l,u){var d=P(o,u.repeat,u.forward,u.selectedCharacter),v=u.forward?-1:1;return Lr(v,u),d?(d.ch+=v,d):null},moveToCharacter:function(o,l,u){var c=u.repeat;return Lr(0,u),P(o,c,u.forward,u.selectedCharacter)||l},moveToSymbol:function(o,l,u){return function(o,l,u,c){var d=qe(o.getCursor()),v=u?1:-1,w=u?o.lineCount():-1,O=d.ch,E=d.line,G=o.getLine(E),J={lineText:G,nextCh:G.charAt(O),lastCh:null,index:O,symb:c,reverseSymb:(u?{")":"(","}":"{"}:{"(":")","{":"}"})[c],forward:u,depth:0,curMoveThrough:!1},me=an[c];if(!me)return d;var Te=ir[me].init,xe=ir[me].isComplete;for(Te&&Te(J);E!==w&&l;){if(J.index+=v,J.nextCh=J.lineText.charAt(J.index),!J.nextCh){if(J.lineText=o.getLine(E+=v)||"",v>0)J.index=0;else{var ke=J.lineText.length;J.index=ke>0?ke-1:0}J.nextCh=J.lineText.charAt(J.index)}xe(J)&&(d.line=E,d.ch=J.index,l--)}return J.nextCh||J.curMoveThrough?s(E,J.index):d}(o,u.repeat,u.forward,u.selectedCharacter)||l},moveToColumn:function(o,l,u,c){var d=u.repeat;return c.lastHPos=d-1,c.lastHSPos=o.charCoords(l,"div").left,function(o,l){var u=o.getCursor().line;return yt(o,s(u,l-1))}(o,d)},moveToEol:function(o,l,u,c){return be(o,l,u,c,!1)},moveToFirstNonWhiteSpaceCharacter:function(o,l){return s(l.line,Et(o.getLine(l.line)))},moveToMatchedSymbol:function(o,l){for(var w,u=l,c=u.line,d=u.ch,v=o.getLine(c);d<v.length;d++)if((w=v.charAt(d))&&he(w)){var O=o.getTokenTypeAt(s(c,d+1));if("string"!==O&&"comment"!==O)break}if(d<v.length){var E="<"===d||">"===d?/[(){}[\]<>]/:/[(){}[\]]/;return o.findMatchingBracket(s(c,d),{bracketRegex:E}).to}return u},moveToStartOfLine:function(o,l){return s(l.line,0)},moveToLineOrEdgeOfDocument:function(o,l,u){var c=u.forward?o.lastLine():o.firstLine();return u.repeatIsExplicit&&(c=u.repeat-o.getOption("firstLineNumber")),s(c,Et(o.getLine(c)))},textObjectManipulation:function(o,l,u,c){var w=u.selectedCharacter;"b"==w?w="(":"B"==w&&(w="{");var E,O=!u.textObjectInner;if({"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"}[w])E=function(o,l,u,c){var v,w,d=l,O={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[u],E={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[u],J=o.getLine(d.line).charAt(d.ch)===E?1:0;if(v=o.scanForBracket(s(d.line,d.ch+J),-1,void 0,{bracketRegex:O}),w=o.scanForBracket(s(d.line,d.ch+J),1,void 0,{bracketRegex:O}),!v||!w)return{start:d,end:d};if((v=v.pos).line==(w=w.pos).line&&v.ch>w.ch||v.line>w.line){var me=v;v=w,w=me}return c?w.ch+=1:v.ch+=1,{start:v,end:w}}(o,l,w,O);else if({"'":!0,'"':!0,"`":!0}[w])E=function(o,l,u,c){var O,E,G,J,d=qe(l),w=o.getLine(d.line).split(""),me=w.indexOf(u);if(d.ch<me?d.ch=me:me<d.ch&&w[d.ch]==u&&(E=d.ch,--d.ch),w[d.ch]!=u||E)for(G=d.ch;G>-1&&!O;G--)w[G]==u&&(O=G+1);else O=d.ch+1;if(O&&!E)for(G=O,J=w.length;G<J&&!E;G++)w[G]==u&&(E=G);return O&&E?(c&&(--O,++E),{start:s(d.line,O),end:s(d.line,E)}):{start:d,end:d}}(o,l,w,O);else if("W"===w)E=gr(o,O,0,!0);else if("w"===w)E=gr(o,O,0,!1);else if("p"===w)if(E=et(o,l,u.repeat,0,O),u.linewise=!0,c.visualMode)c.visualLine||(c.visualLine=!0);else{var G=c.inputState.operatorArgs;G&&(G.linewise=!0),E.end.line--}else{if("t"!==w)return null;E=function(o,l,u){var c=l;if(!k.findMatchingTag||!k.findEnclosingTag)return{start:c,end:c};var d=k.findMatchingTag(o,l)||k.findEnclosingTag(o,l);return d&&d.open&&d.close?u?{start:d.open.from,end:d.close.to}:{start:d.open.to,end:d.close.from}:{start:c,end:c}}(o,l,O)}return o.state.vim.visualMode?function(o,l,u){var w,c=o.state.vim.sel,d=c.head,v=c.anchor;return nt(u,l)&&(w=u,u=l,l=w),nt(d,v)?(d=At(l,d),v=ht(v,u)):(v=At(l,v),-1==(d=xt(d=ht(d,u),0,-1)).ch&&d.line!=o.firstLine()&&(d=s(d.line-1,Ct(o,d.line-1)))),[v,d]}(o,E.start,E.end):[E.start,E.end]},repeatLastCharacterSearch:function(o,l,u){var c=ge.lastCharacterSearch,d=u.repeat,v=u.forward===c.forward,w=(c.increment?1:0)*(v?-1:1);o.moveH(-w,"char"),u.inclusive=!!v;var O=P(o,d,v,c.selectedCharacter);return O?(O.ch+=w,O):(o.moveH(w,"char"),l)}};function zr(o,l){for(var u=[],c=0;c<l;c++)u.push(o);return u}var Er={change:function(o,l,u){var c,d,v=o.state.vim,w=u[0].anchor,O=u[0].head;if(v.visualMode)if(l.fullLine)O.ch=Number.MAX_VALUE,O.line--,o.setSelection(w,O),d=o.getSelection(),o.replaceSelection(""),c=w;else{d=o.getSelection();var Te=zr("",u.length);o.replaceSelections(Te),c=At(u[0].head,u[0].anchor)}else{d=o.getRange(w,O);var E=v.lastEditInputState||{};if("moveByWords"==E.motion&&!Ue(d)){var G=/\s+$/.exec(d);G&&E.motionArgs&&E.motionArgs.forward&&(O=xt(O,0,-G[0].length),d=d.slice(0,-G[0].length))}var J=new s(w.line-1,Number.MAX_VALUE),me=o.firstLine()==o.lastLine();O.line>o.lastLine()&&l.linewise&&!me?o.replaceRange("",J,O):o.replaceRange("",w,O),l.linewise&&(me||(o.setCursor(J),k.commands.newlineAndIndent(o)),w.ch=Number.MAX_VALUE),c=w}ge.registerController.pushText(l.registerName,"change",d,l.linewise,u.length>1),Wt.enterInsertMode(o,{head:c},o.state.vim)},delete:function(o,l,u){var c,d,v=o.state.vim;if(v.visualBlock){d=o.getSelection();var E=zr("",u.length);o.replaceSelections(E),c=u[0].anchor}else{var w=u[0].anchor,O=u[0].head;l.linewise&&O.line!=o.firstLine()&&w.line==o.lastLine()&&w.line==O.line-1&&(w.line==o.firstLine()?w.ch=0:w=s(w.line-1,Ct(o,w.line-1))),d=o.getRange(w,O),o.replaceRange("",w,O),c=w,l.linewise&&(c=It.moveToFirstNonWhiteSpaceCharacter(o,w))}return ge.registerController.pushText(l.registerName,"delete",d,l.linewise,v.visualBlock),yt(o,c)},indent:function(o,l,u){var c=o.state.vim,v=c.visualBlock?u[u.length-1].anchor.line:u[0].head.line,w=c.visualMode?l.repeat:1;l.linewise&&v--;for(var O=u[0].anchor.line;O<=v;O++)for(var E=0;E<w;E++)o.indentLine(O,l.indentRight);return It.moveToFirstNonWhiteSpaceCharacter(o,u[0].anchor)},indentAuto:function(o,l,u){return o.execCommand("indentAuto"),It.moveToFirstNonWhiteSpaceCharacter(o,u[0].anchor)},changeCase:function(o,l,u,c,d){for(var v=o.getSelections(),w=[],O=l.toLower,E=0;E<v.length;E++){var G=v[E],J="";if(!0===O)J=G.toLowerCase();else if(!1===O)J=G.toUpperCase();else for(var me=0;me<G.length;me++){var Te=G.charAt(me);J+=We(Te)?Te.toLowerCase():Te.toUpperCase()}w.push(J)}return o.replaceSelections(w),l.shouldMoveCursor?d:!o.state.vim.visualMode&&l.linewise&&u[0].anchor.line+1==u[0].head.line?It.moveToFirstNonWhiteSpaceCharacter(o,c):l.linewise?c:At(u[0].anchor,u[0].head)},yank:function(o,l,u,c){var d=o.state.vim,v=o.getSelection(),w=d.visualMode?At(d.sel.anchor,d.sel.head,u[0].head,u[0].anchor):c;return ge.registerController.pushText(l.registerName,"yank",v,l.linewise,d.visualBlock),w}};var Wt={jumpListWalk:function(o,l,u){if(!u.visualMode){var c=l.repeat,w=ge.jumpList.move(o,l.forward?c:-c),O=w?w.find():void 0;O=O||o.getCursor(),o.setCursor(O)}},scroll:function(o,l,u){if(!u.visualMode){var c=l.repeat||1,d=o.defaultTextHeight(),v=o.getScrollInfo().top,w=d*c,O=l.forward?v+w:v-w,E=qe(o.getCursor()),G=o.charCoords(E,"local");if(l.forward)O>G.top?(E.line+=(O-G.top)/d,E.line=Math.ceil(E.line),o.setCursor(E),G=o.charCoords(E,"local"),o.scrollTo(null,G.top)):o.scrollTo(null,O);else{var J=O+o.getScrollInfo().clientHeight;J<G.bottom?(E.line-=(G.bottom-J)/d,E.line=Math.floor(E.line),o.setCursor(E),G=o.charCoords(E,"local"),o.scrollTo(null,G.bottom-o.getScrollInfo().clientHeight)):o.scrollTo(null,O)}}},scrollToCursor:function(o,l){var u=o.getCursor().line,c=o.charCoords(s(u,0),"local"),d=o.getScrollInfo().clientHeight,v=c.top,w=c.bottom-v;switch(l.position){case"center":v=v-d/2+w;break;case"bottom":v=v-d+w}o.scrollTo(null,v)},replayMacro:function(o,l,u){var c=l.selectedCharacter,d=l.repeat,v=ge.macroModeState;for("@"==c?c=v.latestRegister:v.latestRegister=c;d--;)ho(o,u,v,c)},enterMacroRecordMode:function(o,l){var u=ge.macroModeState,c=l.selectedCharacter;ge.registerController.isValidRegister(c)&&u.enterMacroRecordMode(o,c)},toggleOverwrite:function(o){o.state.overwrite?(o.toggleOverwrite(!1),o.setOption("keyMap","vim-insert"),k.signal(o,"vim-mode-change",{mode:"insert"})):(o.toggleOverwrite(!0),o.setOption("keyMap","vim-replace"),k.signal(o,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(o,l,u){if(!o.getOption("readOnly")){u.insertMode=!0,u.insertModeRepeat=l&&l.repeat||1;var c=l?l.insertAt:null,d=u.sel,v=l.head||o.getCursor("head"),w=o.listSelections().length;if("eol"==c)v=s(v.line,Ct(o,v.line));else if("bol"==c)v=s(v.line,0);else if("charAfter"==c)v=xt(v,0,1);else if("firstNonBlank"==c)v=It.moveToFirstNonWhiteSpaceCharacter(o,v);else if("startOfSelectedArea"==c){if(!u.visualMode)return;u.visualBlock?(v=s(Math.min(d.head.line,d.anchor.line),Math.min(d.head.ch,d.anchor.ch)),w=Math.abs(d.head.line-d.anchor.line)+1):v=d.head.line<d.anchor.line?d.head:s(d.anchor.line,0)}else if("endOfSelectedArea"==c){if(!u.visualMode)return;u.visualBlock?(v=s(Math.min(d.head.line,d.anchor.line),Math.max(d.head.ch+1,d.anchor.ch)),w=Math.abs(d.head.line-d.anchor.line)+1):v=d.head.line>=d.anchor.line?xt(d.head,0,1):s(d.anchor.line,0)}else if("inplace"==c){if(u.visualMode)return}else"lastEdit"==c&&(v=xn(o)||v);o.setOption("disableInput",!1),l&&l.replace?(o.toggleOverwrite(!0),o.setOption("keyMap","vim-replace"),k.signal(o,"vim-mode-change",{mode:"replace"})):(o.toggleOverwrite(!1),o.setOption("keyMap","vim-insert"),k.signal(o,"vim-mode-change",{mode:"insert"})),ge.macroModeState.isPlaying||(o.on("change",bn),k.on(o.getInputField(),"keydown",ui)),u.visualMode&&nr(o),Kr(o,v,w)}},toggleVisualMode:function(o,l,u){var v,c=l.repeat,d=o.getCursor();u.visualMode?u.visualLine^l.linewise||u.visualBlock^l.blockwise?(u.visualLine=!!l.linewise,u.visualBlock=!!l.blockwise,k.signal(o,"vim-mode-change",{mode:"visual",subMode:u.visualLine?"linewise":u.visualBlock?"blockwise":""}),Kt(o)):nr(o):(u.visualMode=!0,u.visualLine=!!l.linewise,u.visualBlock=!!l.blockwise,v=yt(o,s(d.line,d.ch+c-1)),u.sel={anchor:d,head:v},k.signal(o,"vim-mode-change",{mode:"visual",subMode:u.visualLine?"linewise":u.visualBlock?"blockwise":""}),Kt(o),Se(o,u,"<",At(d,v)),Se(o,u,">",ht(d,v)))},reselectLastSelection:function(o,l,u){var c=u.lastSelection;if(u.visualMode&&Qr(o,u),c){var d=c.anchorMark.find(),v=c.headMark.find();if(!d||!v)return;u.sel={anchor:d,head:v},u.visualMode=!0,u.visualLine=c.visualLine,u.visualBlock=c.visualBlock,Kt(o),Se(o,u,"<",At(d,v)),Se(o,u,">",ht(d,v)),k.signal(o,"vim-mode-change",{mode:"visual",subMode:u.visualLine?"linewise":u.visualBlock?"blockwise":""})}},joinLines:function(o,l,u){var c,d;if(u.visualMode){if(c=o.getCursor("anchor"),nt(d=o.getCursor("head"),c)){var v=d;d=c,c=v}d.ch=Ct(o,d.line)-1}else{var w=Math.max(l.repeat,2);c=o.getCursor(),d=yt(o,s(c.line+w-1,1/0))}for(var O=0,E=c.line;E<d.line;E++){O=Ct(o,c.line),v=s(c.line+1,Ct(o,c.line+1));var G=o.getRange(c,v);G=l.keepSpaces?G.replace(/\n\r?/g,""):G.replace(/\n\s*/g," "),o.replaceRange(G,c,v)}var J=s(c.line,O);u.visualMode&&nr(o,!1),o.setCursor(J)},newLineAndEnterInsertMode:function(o,l,u){u.insertMode=!0;var c=qe(o.getCursor());c.line!==o.firstLine()||l.after?(c.line=l.after?c.line:c.line-1,c.ch=Ct(o,c.line),o.setCursor(c),(k.commands.newlineAndIndentContinueComment||k.commands.newlineAndIndent)(o)):(o.replaceRange("\n",s(o.firstLine(),0)),o.setCursor(o.firstLine(),0)),this.enterInsertMode(o,{repeat:l.repeat},u)},paste:function(o,l,u){var c=qe(o.getCursor()),d=ge.registerController.getRegister(l.registerName);if(v=d.toString()){if(l.matchIndent){var w=o.getOption("tabSize"),O=function(at){var $r=at.split("\t").length-1,un=at.split(" ").length-1;return $r*w+1*un},E=o.getLine(o.getCursor().line),G=O(E.match(/^\s*/)[0]),J=v.replace(/\n$/,""),me=v!==J,Te=O(v.match(/^\s*/)[0]),v=J.replace(/^\s*/gm,function(at){var $r=G+(O(at)-Te);if($r<0)return"";if(o.getOption("indentWithTabs")){var un=Math.floor($r/w);return Array(un+1).join("\t")}return Array($r+1).join(" ")});v+=me?"\n":""}l.repeat>1&&(v=Array(l.repeat+1).join(v));var De,Je,xe=d.linewise,ke=d.blockwise;if(ke){v=v.split("\n"),xe&&v.pop();for(var Pe=0;Pe<v.length;Pe++)v[Pe]=""==v[Pe]?" ":v[Pe];c.ch+=l.after?1:0,c.ch=Math.min(Ct(o,c.line),c.ch)}else xe?u.visualMode?v=u.visualLine?v.slice(0,-1):"\n"+v.slice(0,v.length-1)+"\n":l.after?(v="\n"+v.slice(0,v.length-1),c.ch=Ct(o,c.line)):c.ch=0:c.ch+=l.after?1:0;if(u.visualMode){u.lastPastedText=v;var Qe,Xe=function(o,l){var v,w,O,u=l.lastSelection,d=function(){var v=o.getCursor(),w=o.getCursor(),O=u.visualBlock;if(O){w=s(v.line+O.height,v.ch+O.width);for(var J=[],me=v.line;me<w.line;me++){var Te=s(me,v.ch),xe=s(me,w.ch);J.push({anchor:Te,head:xe})}o.setSelections(J)}else{var Pe=u.anchorMark.find(),De=u.headMark.find(),Je=De.line-Pe.line;w={line:w.line+Je,ch:Je?w.ch:De.ch-Pe.ch+w.ch},u.visualLine&&(v=s(v.line,0),w=s(w.line,Ct(o,w.line))),o.setSelection(v,w)}return[v,w]};return l.visualMode?(v=o.listSelections(),O=v[v.length-1],[nt((w=v[0]).anchor,w.head)?w.anchor:w.head,nt(O.anchor,O.head)?O.head:O.anchor]):d()}(o,u),kt=Xe[0],ar=Xe[1],St=o.getSelection(),Nt=o.listSelections(),pt=new Array(Nt.length).join("1").split("1");u.lastSelection&&(Qe=u.lastSelection.headMark.find()),ge.registerController.unnamedRegister.setText(St),ke?(o.replaceSelections(pt),ar=s(kt.line+v.length-1,kt.ch),o.setCursor(kt),Br(o,ar),o.replaceSelections(v),De=kt):u.visualBlock?(o.replaceSelections(pt),o.setCursor(kt),o.replaceRange(v,kt,kt),De=kt):(o.replaceRange(v,kt,ar),De=o.posFromIndex(o.indexFromPos(kt)+v.length-1)),Qe&&(u.lastSelection.headMark=o.setBookmark(Qe)),xe&&(De.ch=0)}else if(ke){for(o.setCursor(c),Pe=0;Pe<v.length;Pe++){var ot=c.line+Pe;ot>o.lastLine()&&o.replaceRange("\n",s(ot,0)),Ct(o,ot)<c.ch&&on(o,ot,c.ch)}o.setCursor(c),Br(o,s(c.line+v.length-1,c.ch)),o.replaceSelections(v),De=c}else o.replaceRange(v,c),xe&&l.after?De=s(c.line+1,Et(o.getLine(c.line+1))):xe&&!l.after?De=s(c.line,Et(o.getLine(c.line))):!xe&&l.after?(Je=o.indexFromPos(c),De=o.posFromIndex(Je+v.length-1)):(Je=o.indexFromPos(c),De=o.posFromIndex(Je+v.length));u.visualMode&&nr(o,!1),o.setCursor(De)}},undo:function(o,l){o.operation(function(){mt(o,k.commands.undo,l.repeat)(),o.setCursor(o.getCursor("anchor"))})},redo:function(o,l){mt(o,k.commands.redo,l.repeat)()},setRegister:function(o,l,u){u.inputState.registerName=l.selectedCharacter},setMark:function(o,l,u){Se(o,u,l.selectedCharacter,o.getCursor())},replace:function(o,l,u){var v,w,c=l.selectedCharacter,d=o.getCursor(),O=o.listSelections();if(u.visualMode)d=o.getCursor("start"),w=o.getCursor("end");else{var E=o.getLine(d.line);(v=d.ch+l.repeat)>E.length&&(v=E.length),w=s(d.line,v)}if("\n"==c)u.visualMode||o.replaceRange("",d,w),(k.commands.newlineAndIndentContinueComment||k.commands.newlineAndIndent)(o);else{var G=o.getRange(d,w);if(G=G.replace(/[^\n]/g,c),u.visualBlock){var J=new Array(o.getOption("tabSize")+1).join(" ");G=(G=o.getSelection()).replace(/\t/g,J).replace(/[^\n]/g,c).split("\n"),o.replaceSelections(G)}else o.replaceRange(G,d,w);u.visualMode?(d=nt(O[0].anchor,O[0].head)?O[0].anchor:O[0].head,o.setCursor(d),nr(o,!1)):o.setCursor(xt(w,0,-1))}},incrementNumberToken:function(o,l){for(var v,w,O,E,u=o.getCursor(),c=o.getLine(u.line),d=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi;null!==(v=d.exec(c))&&!(u.ch<(O=(w=v.index)+v[0].length)););if(l.backtrack||!(O<=u.ch)){if(!v)return;var G=v[2]||v[4],J=v[3]||v[5],me=l.increase?1:-1,Te={"0b":2,0:8,"":10,"0x":16}[G.toLowerCase()];E=(parseInt(v[1]+J,Te)+me*l.repeat).toString(Te);var ke=G?new Array(J.length-E.length+1+v[1].length).join("0"):"";E="-"===E.charAt(0)?"-"+G+ke+E.substr(1):G+ke+E;var Pe=s(u.line,w),De=s(u.line,O);o.replaceRange(E,Pe,De),o.setCursor(s(u.line,w+E.length-1))}},repeatLastEdit:function(o,l,u){if(u.lastEditInputState){var d=l.repeat;d&&l.repeatIsExplicit?u.lastEditInputState.repeatOverride=d:d=u.lastEditInputState.repeatOverride||d,Tr(o,u,d,!1)}},indent:function(o,l){o.indentLine(o.getCursor().line,l.indentRight)},exitInsertMode:kn};function yt(o,l){var u=o.state.vim,c=u.insertMode||u.visualMode,d=Math.min(Math.max(o.firstLine(),l.line),o.lastLine()),v=Ct(o,d)-1+!!c,w=Math.min(Math.max(0,l.ch),v);return s(d,w)}function lt(o){var l={};for(var u in o)o.hasOwnProperty(u)&&(l[u]=o[u]);return l}function xt(o,l,u){return"object"==typeof l&&(u=l.ch,l=l.line),s(o.line+l,o.ch+u)}function Cr(o,l){if("<character>"==l.slice(-11)){var u=l.length-11,c=o.slice(0,u),d=l.slice(0,u);return c==d&&o.length>u?"full":0==d.indexOf(c)&&"partial"}return o==l?"full":0==l.indexOf(o)&&"partial"}function mt(o,l,u){return function(){for(var c=0;c<u;c++)l(o)}}function qe(o){return s(o.line,o.ch)}function Ve(o,l){return o.ch==l.ch&&o.line==l.line}function nt(o,l){return o.line<l.line||o.line==l.line&&o.ch<l.ch}function At(o,l){return arguments.length>2&&(l=At.apply(void 0,Array.prototype.slice.call(arguments,1))),nt(o,l)?o:l}function ht(o,l){return arguments.length>2&&(l=ht.apply(void 0,Array.prototype.slice.call(arguments,1))),nt(o,l)?l:o}function Nr(o,l,u){var c=nt(o,l),d=nt(l,u);return c&&d}function Ct(o,l){return o.getLine(l).length}function vr(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function on(o,l,u){var c=Ct(o,l),d=new Array(u-c+1).join(" ");o.setCursor(s(l,c)),o.replaceRange(d,o.getCursor())}function Br(o,l){var u=[],c=o.listSelections(),d=qe(o.clipPos(l)),v=!Ve(l,d),O=function(o,l,u){for(var c=0;c<o.length;c++){var d="head"!=u&&Ve(o[c].anchor,l),v="anchor"!=u&&Ve(o[c].head,l);if(d||v)return c}return-1}(c,o.getCursor("head")),E=Ve(c[O].head,c[O].anchor),G=c.length-1,J=G-O>O?G:0,me=c[J].anchor,Te=Math.min(me.line,d.line),xe=Math.max(me.line,d.line),ke=me.ch,Pe=d.ch,De=c[J].head.ch-ke,Je=Pe-ke;De>0&&Je<=0?(ke++,v||Pe--):De<0&&Je>=0?(ke--,E||Pe++):De<0&&-1==Je&&(ke--,Pe++);for(var Qe=Te;Qe<=xe;Qe++){var Xe={anchor:new s(Qe,ke),head:new s(Qe,Pe)};u.push(Xe)}return o.setSelections(u),l.ch=Pe,me.ch=ke,me}function Kr(o,l,u){for(var c=[],d=0;d<u;d++){var v=xt(l,d,0);c.push({anchor:v,head:v})}o.setSelections(c,0)}function Qr(o,l){var u=l.sel.anchor,c=l.sel.head;l.lastPastedText&&(c=o.posFromIndex(o.indexFromPos(u)+l.lastPastedText.length),l.lastPastedText=null),l.lastSelection={anchorMark:o.setBookmark(u),headMark:o.setBookmark(c),anchor:qe(u),head:qe(c),visualMode:l.visualMode,visualLine:l.visualLine,visualBlock:l.visualBlock}}function Kt(o,l,u){var c=o.state.vim,d=Xr(o,l=l||c.sel,u=u||c.visualLine?"line":c.visualBlock?"block":"char");o.setSelections(d.ranges,d.primary),ai(o)}function Xr(o,l,u,c){var d=qe(l.head),v=qe(l.anchor);if("char"==u){var w=c||nt(l.head,l.anchor)?0:1,O=nt(l.head,l.anchor)?1:0;return d=xt(l.head,0,w),{ranges:[{anchor:v=xt(l.anchor,0,O),head:d}],primary:0}}if("line"==u){if(nt(l.head,l.anchor))d.ch=0,v.ch=Ct(o,v.line);else{v.ch=0;var E=o.lastLine();d.line>E&&(d.line=E),d.ch=Ct(o,d.line)}return{ranges:[{anchor:v,head:d}],primary:0}}if("block"==u){for(var G=Math.min(v.line,d.line),J=Math.min(v.ch,d.ch),me=Math.max(v.line,d.line),Te=Math.max(v.ch,d.ch)+1,xe=me-G+1,ke=d.line==G?0:xe-1,Pe=[],De=0;De<xe;De++)Pe.push({anchor:s(G+De,J),head:s(G+De,Te)});return{ranges:Pe,primary:ke}}}function nr(o,l){var u=o.state.vim;!1!==l&&o.setCursor(yt(o,u.sel.head)),Qr(o,u),u.visualMode=!1,u.visualLine=!1,u.visualBlock=!1,u.insertMode||k.signal(o,"vim-mode-change",{mode:"normal"}),li(u)}function Et(o){if(!o)return 0;var l=o.search(/\S/);return-1==l?o.length:l}function gr(o,l,u,c,d){for(var v=function(o){var l=o.getCursor("head");return 1==o.getSelection().length&&(l=At(l,o.getCursor("anchor"))),l}(o),w=o.getLine(v.line),O=v.ch,E=d?T[0]:R[0];!E(w.charAt(O));)if(++O>=w.length)return null;c?E=R[0]:(E=T[0])(w.charAt(O))||(E=T[1]);for(var G=O,J=O;E(w.charAt(G))&&G<w.length;)G++;for(;E(w.charAt(J))&&J>=0;)J--;if(J++,l){for(var me=G;/\s/.test(w.charAt(G))&&G<w.length;)G++;if(me==G){for(var Te=J;/\s/.test(w.charAt(J-1))&&J>0;)J--;J||(J=Te)}}return{start:s(v.line,J),end:s(v.line,G)}}function fr(o,l,u){Ve(l,u)||ge.jumpList.add(o,l,u)}function Lr(o,l){ge.lastCharacterSearch.increment=o,ge.lastCharacterSearch.forward=l.forward,ge.lastCharacterSearch.selectedCharacter=l.selectedCharacter}var an={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},ir={bracket:{isComplete:function(o){if(o.nextCh===o.symb){if(o.depth++,o.depth>=1)return!0}else o.nextCh===o.reverseSymb&&o.depth--;return!1}},section:{init:function(o){o.curMoveThrough=!0,o.symb=(o.forward?"]":"[")===o.symb?"{":"}"},isComplete:function(o){return 0===o.index&&o.nextCh===o.symb}},comment:{isComplete:function(o){var l="*"===o.lastCh&&"/"===o.nextCh;return o.lastCh=o.nextCh,l}},method:{init:function(o){o.symb="m"===o.symb?"{":"}",o.reverseSymb="{"===o.symb?"}":"{"},isComplete:function(o){return o.nextCh===o.symb}},preprocess:{init:function(o){o.index=0},isComplete:function(o){if("#"===o.nextCh){var l=o.lineText.match(/^#(\w+)/)[1];if("endif"===l){if(o.forward&&0===o.depth)return!0;o.depth++}else if("if"===l){if(!o.forward&&0===o.depth)return!0;o.depth--}if("else"===l&&0===o.depth)return!0}return!1}}};function Fr(o,l,u,c,d){var v=l.line,w=l.ch,O=o.getLine(v),E=u?1:-1,G=c?R:T;if(d&&""==O){if(O=o.getLine(v+=E),!x(o,v))return null;w=u?0:O.length}for(;;){if(d&&""==O)return{from:0,to:0,line:v};for(var J=E>0?O.length:-1,me=J,Te=J;w!=J;){for(var xe=!1,ke=0;ke<G.length&&!xe;++ke)if(G[ke](O.charAt(w))){for(me=w;w!=J&&G[ke](O.charAt(w));)w+=E;if(xe=me!=(Te=w),me==l.ch&&v==l.line&&Te==me+E)continue;return{from:Math.min(me,Te+1),to:Math.max(me,Te),line:v}}xe||(w+=E)}if(!x(o,v+=E))return null;O=o.getLine(v),w=E>0?0:O.length}}function be(o,l,u,c,d){var w=s(l.line+u.repeat-1,1/0),O=o.clipPos(w);return O.ch--,d||(c.lastHPos=1/0,c.lastHSPos=o.charCoords(O,"div").left),w}function P(o,l,u,c){for(var w,d=o.getCursor(),v=d.ch,O=0;O<l;O++){if(-1==(w=Be(v,o.getLine(d.line),c,u,!0)))return null;v=w}return s(o.getCursor().line,w)}function Se(o,l,u,c){!F(u,$)||(l.marks[u]&&l.marks[u].clear(),l.marks[u]=o.setBookmark(c))}function Be(o,l,u,c,d){var v;return c?-1!=(v=l.indexOf(u,o+1))&&!d&&(v-=1):-1!=(v=l.lastIndexOf(u,o-1))&&!d&&(v+=1),v}function et(o,l,u,c,d){var G,v=l.line,w=o.firstLine(),O=o.lastLine(),J=v;function me(De){return!o.getLine(De)}function Te(De,Je,Qe){return Qe?me(De)!=me(De+Je):!me(De)&&me(De+Je)}if(c){for(;w<=J&&J<=O&&u>0;)Te(J,c)&&u--,J+=c;return new s(J,0)}var xe=o.state.vim;if(xe.visualLine&&Te(v,1,!0)){var ke=xe.sel.anchor;Te(ke.line,-1,!0)&&(!d||ke.line!=v)&&(v+=1)}var Pe=me(v);for(J=v;J<=O&&u;J++)Te(J,1,!0)&&(!d||me(J)!=Pe)&&u--;for(G=new s(J,0),J>O&&!Pe?Pe=!0:d=!1,J=v;J>w&&(d&&me(J)!=Pe&&J!=v||!Te(J,-1,!0));J--);return{start:new s(J,0),end:G}}function Re(){}function dt(o){var l=o.state.vim;return l.searchState_||(l.searchState_=new Re)}function ie(o,l){var u=Ce(o,l)||[];if(!u.length)return[];var c=[];if(0===u[0]){for(var d=0;d<u.length;d++)"number"==typeof u[d]&&c.push(o.substring(u[d]+1,u[d+1]));return c}}function Ce(o,l){l||(l="/");for(var u=!1,c=[],d=0;d<o.length;d++){var v=o.charAt(d);!u&&v==l&&c.push(d),u=!u&&"\\"==v}return c}Me("pcre",!0,"boolean"),Re.prototype={getQuery:function(){return ge.query},setQuery:function(o){ge.query=o},getOverlay:function(){return this.searchOverlay},setOverlay:function(o){this.searchOverlay=o},isReversed:function(){return ge.isReversed},setReversed:function(o){ge.isReversed=o},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(o){this.annotate=o}};var it={"\\n":"\n","\\r":"\r","\\t":"\t"};var Dt={"\\/":"/","\\\\":"\\","\\n":"\n","\\r":"\r","\\t":"\t","\\&":"&"};function On(o,l,u){if(ge.registerController.getRegister("/").setText(o),o instanceof RegExp)return o;var v,w,d=function(o){return Ce(o,"/")}(o);return d.length?(v=o.substring(0,d[0]),w=-1!=o.substring(d[0]).indexOf("i")):v=o,v?(K("pcre")||(v=function(o){for(var c=!1,d=[],v=-1;v<o.length;v++){var w=o.charAt(v)||"",O=o.charAt(v+1)||"",E=O&&-1!="|(){".indexOf(O);c?(("\\"!==w||!E)&&d.push(w),c=!1):"\\"===w?(c=!0,O&&-1!="}".indexOf(O)&&(E=!0),(!E||"\\"===O)&&d.push(w)):(d.push(w),E&&"\\"!==O&&d.push("\\"))}return d.join("")}(v)),u&&(l=/^[^A-Z]*$/.test(v)),new RegExp(v,l||w?"i":void 0)):null}function Pr(o){"string"==typeof o&&(o=document.createElement(o));for(var l,u=1;u<arguments.length;u++)if(l=arguments[u])if("object"!=typeof l&&(l=document.createTextNode(l)),l.nodeType)o.appendChild(l);else for(var c in l)!Object.prototype.hasOwnProperty.call(l,c)||("$"===c[0]?o.style[c.slice(1)]=l[c]:o.setAttribute(c,l[c]));return o}function ut(o,l){var u=Pr("pre",{$color:"red"},l);o.openNotification?o.openNotification(u,{bottom:!0,duration:5e3}):alert(u.innerText)}function yn(o,l){var u=(l.prefix||"")+" "+(l.desc||""),c=function(o,l){return Pr(document.createDocumentFragment(),Pr("span",{$fontFamily:"monospace",$whiteSpace:"pre"},o,Pr("input",{type:"text",autocorrect:"off",autocapitalize:"off",spellcheck:"false"})),l&&Pr("span",{$color:"#888"},l))}(l.prefix,l.desc);o.openDialog?o.openDialog(c,l.onClose,{onKeyDown:l.onKeyDown,onKeyUp:l.onKeyUp,bottom:!0,selectValueOnOpen:!1,value:l.value}):l.onClose(prompt(u,""))}function ln(o,l,u,c){if(l){var d=dt(o),v=On(l,!!u,!!c);if(v)return ii(o,v),function(o,l){if(o instanceof RegExp&&l instanceof RegExp){for(var u=["global","multiline","ignoreCase","source"],c=0;c<u.length;c++){var d=u[c];if(o[d]!==l[d])return!1}return!0}return!1}(v,d.getQuery())||d.setQuery(v),v}}var ni=0;function ii(o,l){clearTimeout(ni),ni=setTimeout(function(){var u=dt(o),c=u.getOverlay();(!c||l!=c.query)&&(c&&o.removeOverlay(c),c=function(o){if("^"==o.source.charAt(0))var l=!0;return{token:function(u){if(!l||u.sol()){var c=u.match(o,!1);if(c)return 0==c[0].length?(u.next(),"searching"):u.sol()||(u.backUp(1),o.exec(u.next()+c[0]))?(u.match(o),"searching"):(u.next(),null);for(;!u.eol()&&(u.next(),!u.match(o,!1)););}else u.skipToEnd()},query:o}}(l),o.addOverlay(c),o.showMatchesOnScrollbar&&(u.getScrollbarAnnotate()&&u.getScrollbarAnnotate().clear(),u.setScrollbarAnnotate(o.showMatchesOnScrollbar(l))),u.setOverlay(c))},50)}function Ni(o,l,u,c){return void 0===c&&(c=1),o.operation(function(){for(var d=o.getCursor(),v=o.getSearchCursor(u,d),w=0;w<c;w++){var O=v.find(l);if(0==w&&O&&Ve(v.from(),d)&&(O=v.find(l)),!O&&!(v=o.getSearchCursor(u,l?s(o.lastLine()):s(o.firstLine(),0))).find(l))return}return v.from()})}function In(o){var l=dt(o);o.removeOverlay(dt(o).getOverlay()),l.setOverlay(null),l.getScrollbarAnnotate()&&(l.getScrollbarAnnotate().clear(),l.setScrollbarAnnotate(null))}function _r(o,l,u){return"number"!=typeof o&&(o=o.line),l instanceof Array?F(o,l):"number"==typeof u?o>=l&&o<=u:o==l}function oi(o){var l=o.getScrollInfo(),d=o.coordsChar({left:0,top:6+l.top},"local"),w=o.coordsChar({left:0,top:l.clientHeight-10+l.top},"local");return{top:d.line,bottom:w.line}}function Bi(o,l,u){if("'"==u||"`"==u)return ge.jumpList.find(o,-1)||s(0,0);if("."==u)return xn(o);var c=l.marks[u];return c&&c.find()}function xn(o){for(var l=o.doc.history.done,u=l.length;u--;)if(l[u].changes)return qe(l[u].changes[0].to)}var sn=function(){this.buildCommandMap_()};sn.prototype={processCommand:function(o,l,u){var c=this;o.operation(function(){o.curOp.isVimOp=!0,c._processCommand(o,l,u)})},_processCommand:function(o,l,u){var c=o.state.vim,d=ge.registerController.getRegister(":"),v=d.toString();c.visualMode&&nr(o);var w=new k.StringStream(l);d.setText(l);var E,G,O=u||{};O.input=l;try{this.parseInput_(o,w,O)}catch(me){throw ut(o,me.toString()),me}if(O.commandName){if(E=this.matchCommand_(O.commandName)){if(G=E.name,E.excludeFromCommandHistory&&d.setText(v),this.parseCommandArgs_(w,O,E),"exToKey"==E.type){for(var J=0;J<E.toKeys.length;J++)k.Vim.handleKey(o,E.toKeys[J],"mapping");return}if("exToEx"==E.type)return void this.processCommand(o,E.toInput)}}else void 0!==O.line&&(G="move");if(G)try{Ri[G](o,O),(!E||!E.possiblyAsync)&&O.callback&&O.callback()}catch(me){throw ut(o,me.toString()),me}else ut(o,'Not an editor command ":'+l+'"')},parseInput_:function(o,l,u){l.eatWhile(":"),l.eat("%")?(u.line=o.firstLine(),u.lineEnd=o.lastLine()):(u.line=this.parseLineSpec_(o,l),void 0!==u.line&&l.eat(",")&&(u.lineEnd=this.parseLineSpec_(o,l)));var c=l.match(/^(\w+|!!|@@|[!#&*<=>@~])/);return u.commandName=c?c[1]:l.match(/.*/)[0],u},parseLineSpec_:function(o,l){var u=l.match(/^(\d+)/);if(u)return parseInt(u[1],10)-1;switch(l.next()){case".":return this.parseLineSpecOffset_(l,o.getCursor().line);case"$":return this.parseLineSpecOffset_(l,o.lastLine());case"'":var c=l.next(),d=Bi(o,o.state.vim,c);if(!d)throw new Error("Mark not set");return this.parseLineSpecOffset_(l,d.line);case"-":case"+":return l.backUp(1),this.parseLineSpecOffset_(l,o.getCursor().line);default:return void l.backUp(1)}},parseLineSpecOffset_:function(o,l){var u=o.match(/^([+-])?(\d+)/);if(u){var c=parseInt(u[2],10);"-"==u[1]?l-=c:l+=c}return l},parseCommandArgs_:function(o,l,u){if(!o.eol()){l.argString=o.match(/.*/)[0];var c=u.argDelimiter||/\s+/,d=vr(l.argString).split(c);d.length&&d[0]&&(l.args=d)}},matchCommand_:function(o){for(var l=o.length;l>0;l--){var u=o.substring(0,l);if(this.commandMap_[u]){var c=this.commandMap_[u];if(0===c.name.indexOf(o))return c}}return null},buildCommandMap_:function(){this.commandMap_={};for(var o=0;o<V.length;o++){var l=V[o];this.commandMap_[l.shortName||l.name]=l}},map:function(o,l,u){if(":"!=o&&":"==o.charAt(0)){if(u)throw Error("Mode not supported for ex mappings");var c=o.substring(1);this.commandMap_[c]=":"!=l&&":"==l.charAt(0)?{name:c,type:"exToEx",toInput:l.substring(1),user:!0}:{name:c,type:"exToKey",toKeys:l,user:!0}}else if(":"!=l&&":"==l.charAt(0)){var d={keys:o,type:"keyToEx",exArgs:{input:l.substring(1)}};u&&(d.context=u),U.unshift(d)}else d={keys:o,type:"keyToKey",toKeys:l},u&&(d.context=u),U.unshift(d)},unmap:function(o,l){if(":"!=o&&":"==o.charAt(0)){if(l)throw Error("Mode not supported for ex mappings");var u=o.substring(1);if(this.commandMap_[u]&&this.commandMap_[u].user)return void delete this.commandMap_[u]}else for(var c=o,d=0;d<U.length;d++)if(c==U[d].keys&&U[d].context===l)return void U.splice(d,1);throw Error("No such mapping.")}};var Ri={colorscheme:function(o,l){!l.args||l.args.length<1?ut(o,o.getOption("theme")):o.setOption("theme",l.args[0])},map:function(o,l,u){var c=l.args;!c||c.length<2?o&&ut(o,"Invalid mapping: "+l.input):Or.map(c[0],c[1],u)},imap:function(o,l){this.map(o,l,"insert")},nmap:function(o,l){this.map(o,l,"normal")},vmap:function(o,l){this.map(o,l,"visual")},unmap:function(o,l,u){var c=l.args;!c||c.length<1?o&&ut(o,"No such mapping: "+l.input):Or.unmap(c[0],u)},move:function(o,l){Tt.processCommand(o,o.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:l.line+1})},set:function(o,l){var u=l.args,c=l.setCfg||{};if(!u||u.length<1)o&&ut(o,"Invalid mapping: "+l.input);else{var d=u[0].split("="),v=d[0],w=d[1],O=!1;if("?"==v.charAt(v.length-1)){if(w)throw Error("Trailing characters: "+l.argString);v=v.substring(0,v.length-1),O=!0}void 0===w&&"no"==v.substring(0,2)&&(v=v.substring(2),w=!1);var E=b[v]&&"boolean"==b[v].type;if(E&&null==w&&(w=!0),!E&&void 0===w||O){var G=K(v,o,c);G instanceof Error?ut(o,G.message):ut(o,!0===G||!1===G?" "+(G?"":"no")+v:"  "+v+"="+G)}else{var J=B(v,w,o,c);J instanceof Error&&ut(o,J.message)}}},setlocal:function(o,l){l.setCfg={scope:"local"},this.set(o,l)},setglobal:function(o,l){l.setCfg={scope:"global"},this.set(o,l)},registers:function(o,l){var u=l.args,c=ge.registerController.registers,d="----------Registers----------\n\n";if(u){u=u.join("");for(var O=0;O<u.length;O++)v=u.charAt(O),ge.registerController.isValidRegister(v)&&(d+='"'+v+"    "+(c[v]||new gt).toString()+"\n")}else for(var v in c){var w=c[v].toString();w.length&&(d+='"'+v+"    "+w+"\n")}ut(o,d)},sort:function(o,l){var u,c,d,v,w;var E=function(){if(l.argString){var pt=new k.StringStream(l.argString);if(pt.eat("!")&&(u=!0),pt.eol())return;if(!pt.eatSpace())return"Invalid arguments";var ot=pt.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!ot&&!pt.eol())return"Invalid arguments";if(ot[1]){c=-1!=ot[1].indexOf("i"),d=-1!=ot[1].indexOf("u");var jt=-1!=ot[1].indexOf("d")||-1!=ot[1].indexOf("n")&&1,_t=-1!=ot[1].indexOf("x")&&1,at=-1!=ot[1].indexOf("o")&&1;if(jt+_t+at>1)return"Invalid arguments";v=(jt?"decimal":_t&&"hex")||at&&"octal"}ot[2]&&(w=new RegExp(ot[2].substr(1,ot[2].length-2),c?"i":""))}}();if(E)ut(o,E+": "+l.argString);else{var G=l.line||o.firstLine(),J=l.lineEnd||l.line||o.lastLine();if(G!=J){var me=s(G,0),Te=s(J,Ct(o,J)),xe=o.getRange(me,Te).split("\n"),ke=w||("decimal"==v?/(-?)([\d]+)/:"hex"==v?/(-?)(?:0x)?([0-9a-f]+)/i:"octal"==v?/([0-7]+)/:null),Pe="decimal"==v?10:"hex"==v?16:"octal"==v?8:null,De=[],Je=[];if(v||w)for(var Qe=0;Qe<xe.length;Qe++){var Xe=w?xe[Qe].match(w):null;Xe&&""!=Xe[0]?De.push(Xe):!w&&ke.exec(xe[Qe])?De.push(xe[Qe]):Je.push(xe[Qe])}else Je=xe;if(De.sort(w?function(pt,ot){var jt;return u&&(jt=pt,pt=ot,ot=jt),c&&(pt[0]=pt[0].toLowerCase(),ot[0]=ot[0].toLowerCase()),pt[0]<ot[0]?-1:1}:kt),w)for(Qe=0;Qe<De.length;Qe++)De[Qe]=De[Qe].input;else v||Je.sort(kt);if(xe=u?De.concat(Je):Je.concat(De),d){var Nt,St=xe;for(xe=[],Qe=0;Qe<St.length;Qe++)St[Qe]!=Nt&&xe.push(St[Qe]),Nt=St[Qe]}o.replaceRange(xe.join("\n"),me,Te)}}function kt(pt,ot){var jt;u&&(jt=pt,pt=ot,ot=jt),c&&(pt=pt.toLowerCase(),ot=ot.toLowerCase());var _t=v&&ke.exec(pt),at=v&&ke.exec(ot);return _t?(_t=parseInt((_t[1]+_t[2]).toLowerCase(),Pe))-(at=parseInt((at[1]+at[2]).toLowerCase(),Pe)):pt<ot?-1:1}},vglobal:function(o,l){this.global(o,l)},global:function(o,l){var u=l.argString;if(u){var E,c="v"===l.commandName[0],d=void 0!==l.line?l.line:o.firstLine(),v=l.lineEnd||l.line||o.lastLine(),w=function(o){return ie(o,"/")}(u),O=u;if(w.length&&(O=w[0],E=w.slice(1,w.length).join("/")),O)try{ln(o,O,!0,!0)}catch(De){return void ut(o,"Invalid regex: "+O)}for(var G=dt(o).getQuery(),J=[],me=d;me<=v;me++){var Te=o.getLineHandle(me);G.test(Te.text)!==c&&J.push(E?Te:Te.text)}if(E){var ke=0,Pe=function(){if(ke<J.length){var De=J[ke++],Je=o.getLineNumber(De);if(null==Je)return void Pe();Or.processCommand(o,Je+1+E,{callback:Pe})}};Pe()}else ut(o,J.join("\n"))}else ut(o,"Regular Expression missing from global")},substitute:function(o,l){if(!o.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var d,w,O,E,u=l.argString,c=u?ie(u,u[0]):[],v="",G=!1,J=!1;if(c.length)d=c[0],K("pcre")&&""!==d&&(d=new RegExp(d).source),v=c[1],/(^|[^\\])(\\\\)*\$$/.test(d)&&(d=d.slice(0,-1)+"\\n",v=(v||"")+"\n"),void 0!==v&&(v=K("pcre")?function(o){for(var l=new k.StringStream(o),u=[];!l.eol();){for(;l.peek()&&"\\"!=l.peek();)u.push(l.next());var c=!1;for(var d in Dt)if(l.match(d,!0)){c=!0,u.push(Dt[d]);break}c||u.push(l.next())}return u.join("")}(v.replace(/([^\\])&/g,"$1$$&")):function(o){for(var l=!1,u=[],c=-1;c<o.length;c++){var d=o.charAt(c)||"",v=o.charAt(c+1)||"";it[d+v]?(u.push(it[d+v]),c++):l?(u.push(d),l=!1):"\\"===d?(l=!0,Ee(v)||"$"===v?u.push("$"):"/"!==v&&"\\"!==v&&u.push("\\")):("$"===d&&u.push("$"),u.push(d),"/"===v&&u.push("\\"))}return u.join("")}(v),ge.lastSubstituteReplacePart=v),w=c[2]?c[2].split(" "):[];else if(u&&u.length)return void ut(o,"Substitutions should be of the form :s/pattern/replace/");if(w&&(O=w[0],E=parseInt(w[1]),O&&(-1!=O.indexOf("c")&&(G=!0),-1!=O.indexOf("g")&&(J=!0),d=K("pcre")?d+"/"+O:d.replace(/\//g,"\\/")+"/"+O)),d)try{ln(o,d,!0,!0)}catch(Je){return void ut(o,"Invalid regex: "+d)}if(void 0!==(v=v||ge.lastSubstituteReplacePart)){var Te=dt(o).getQuery(),xe=void 0!==l.line?l.line:o.getCursor().line,ke=l.lineEnd||xe;xe==o.firstLine()&&ke==o.lastLine()&&(ke=1/0),E&&(ke=(xe=ke)+E-1);var Pe=yt(o,s(xe,0)),De=o.getSearchCursor(Te,Pe);!function(o,l,u,c,d,v,w,O,E){o.state.vim.exMode=!0;var J,me,Te,G=!1;function xe(){o.operation(function(){for(;!G;)ke(),Pe();De()})}function ke(){var Xe=o.getRange(v.from(),v.to()).replace(w,O),kt=v.to().line;v.replace(Xe),me=v.to().line,d+=me-kt,Te=me<kt}function Pe(){for(;v.findNext()&&_r(v.from(),c,d);)if(u||v.from().line!=me||Te)return o.scrollIntoView(v.from(),30),o.setSelection(v.from(),v.to()),J=v.from(),void(G=!1);G=!0}function De(Qe){if(Qe&&Qe(),o.focus(),J){o.setCursor(J);var Xe=o.state.vim;Xe.exMode=!1,Xe.lastHPos=Xe.lastHSPos=J.ch}E&&E()}function Je(Qe,Xe,kt){switch(k.e_stop(Qe),k.keyName(Qe)){case"Y":ke(),Pe();break;case"N":Pe();break;case"A":var St=E;E=void 0,o.operation(xe),E=St;break;case"L":ke();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":De(kt)}return G&&De(kt),!0}if(Pe(),!G)return l?void yn(o,{prefix:Pr("span","replace with ",Pr("strong",O)," (y/n/a/q/l)"),onKeyDown:Je}):(xe(),void(E&&E()));ut(o,"No matches for "+w.source)}(o,G,J,xe,ke,De,Te,v,l.callback)}else ut(o,"No previous substitute regular expression")},redo:k.commands.redo,undo:k.commands.undo,write:function(o){k.commands.save?k.commands.save(o):o.save&&o.save()},nohlsearch:function(o){In(o)},yank:function(o){var l=qe(o.getCursor()),c=o.getLine(l.line);ge.registerController.pushText("0","yank",c,!0,!0)},delmarks:function(o,l){if(l.argString&&vr(l.argString))for(var u=o.state.vim,c=new k.StringStream(vr(l.argString));!c.eol();){c.eatSpace();var d=c.pos;if(!c.match(/[a-zA-Z]/,!1))return void ut(o,"Invalid argument: "+l.argString.substring(d));var v=c.next();if(c.match("-",!0)){if(!c.match(/[a-zA-Z]/,!1))return void ut(o,"Invalid argument: "+l.argString.substring(d));var w=v,O=c.next();if(!(ue(w)&&ue(O)||We(w)&&We(O)))return void ut(o,"Invalid argument: "+w+"-");var E=w.charCodeAt(0),G=O.charCodeAt(0);if(E>=G)return void ut(o,"Invalid argument: "+l.argString.substring(d));for(var J=0;J<=G-E;J++){var me=String.fromCharCode(E+J);delete u.marks[me]}}else delete u.marks[v]}else ut(o,"Argument required")}},Or=new sn;function kn(o){var l=o.state.vim,u=ge.macroModeState,c=ge.registerController.getRegister("."),d=u.isPlaying,v=u.lastInsertModeChanges;d||(o.off("change",bn),k.off(o.getInputField(),"keydown",ui)),!d&&l.insertModeRepeat>1&&(Tr(o,l,l.insertModeRepeat-1,!0),l.lastEditInputState.repeatOverride=l.insertModeRepeat),delete l.insertModeRepeat,l.insertMode=!1,o.setCursor(o.getCursor().line,o.getCursor().ch-1),o.setOption("keyMap","vim"),o.setOption("disableInput",!0),o.toggleOverwrite(!1),c.setText(v.changes.join("")),k.signal(o,"vim-mode-change",{mode:"normal"}),u.isRecording&&function(o){if(!o.isPlaying){var u=ge.registerController.getRegister(o.latestRegister);u&&u.pushInsertModeChanges&&u.pushInsertModeChanges(o.lastInsertModeChanges)}}(u)}function Nn(o){U.unshift(o)}function ho(o,l,u,c){var d=ge.registerController.getRegister(c);if(":"==c)return d.keyBuffer[0]&&Or.processCommand(o,d.keyBuffer[0]),void(u.isPlaying=!1);var v=d.keyBuffer,w=0;u.isPlaying=!0,u.replaySearchQueries=d.searchQueries.slice(0);for(var O=0;O<v.length;O++)for(var G,J,E=v[O];E;)if(G=/<\w+-.+?>|<\w+>|./.exec(E),E=E.substring(G.index+(J=G[0]).length),k.Vim.handleKey(o,J,"macro"),l.insertMode){var me=d.insertModeChanges[w++].changes;ge.macroModeState.lastInsertModeChanges.changes=me,Wi(o,me,1),kn(o)}u.isPlaying=!1}function bn(o,l){var u=ge.macroModeState,c=u.lastInsertModeChanges;if(!u.isPlaying)for(;l;){if(c.expectCursorActivityForChange=!0,c.ignoreCount>1)c.ignoreCount--;else if("+input"==l.origin||"paste"==l.origin||void 0===l.origin){var d=o.listSelections().length;d>1&&(c.ignoreCount=d);var v=l.text.join("\n");c.maybeReset&&(c.changes=[],c.maybeReset=!1),v&&(o.state.overwrite&&!/\n/.test(v)?c.changes.push([v]):c.changes.push(v))}l=l.next}}function Rn(o){var l=o.state.vim;if(l.insertMode){var u=ge.macroModeState;if(u.isPlaying)return;var c=u.lastInsertModeChanges;c.expectCursorActivityForChange?c.expectCursorActivityForChange=!1:c.maybeReset=!0}else o.curOp.isVimOp||function(o,l){var u=o.getCursor("anchor"),c=o.getCursor("head");if(l.visualMode&&!o.somethingSelected()?nr(o,!1):!l.visualMode&&!l.insertMode&&o.somethingSelected()&&(l.visualMode=!0,l.visualLine=!1,k.signal(o,"vim-mode-change",{mode:"visual"})),l.visualMode){var d=nt(c,u)?0:-1,v=nt(c,u)?-1:0;c=xt(c,0,d),u=xt(u,0,v),l.sel={anchor:u,head:c},Se(o,l,"<",At(c,u)),Se(o,l,">",ht(c,u))}else l.insertMode||(l.lastHPos=o.getCursor().ch)}(o,l);l.visualMode&&ai(o)}function ai(o){var l="cm-animate-fat-cursor",u=o.state.vim,c=yt(o,qe(u.sel.head)),d=xt(c,0,1);if(li(u),c.ch==o.getLine(c.line).length){var v=Pr("span",{class:l},"\xa0");u.fakeCursorBookmark=o.setBookmark(c,{widget:v})}else u.fakeCursor=o.markText(c,d,{className:l})}function li(o){o.fakeCursor&&(o.fakeCursor.clear(),o.fakeCursor=null),o.fakeCursorBookmark&&(o.fakeCursorBookmark.clear(),o.fakeCursorBookmark=null)}function si(o){this.keyName=o}function ui(o){var u=ge.macroModeState.lastInsertModeChanges,c=k.keyName(o);c&&(-1!=c.indexOf("Delete")||-1!=c.indexOf("Backspace"))&&k.lookupKey(c,"vim-insert",function(){return u.maybeReset&&(u.changes=[],u.maybeReset=!1),u.changes.push(new si(c)),!0})}function Tr(o,l,u,c){var d=ge.macroModeState;d.isPlaying=!0;var v=!!l.lastEditActionCommand,w=l.inputState;function O(){v?Tt.processAction(o,l,l.lastEditActionCommand):Tt.evalInput(o,l)}function E(J){d.lastInsertModeChanges.changes.length>0&&Wi(o,d.lastInsertModeChanges.changes,J=l.lastEditActionCommand?J:1)}if(l.inputState=l.lastEditInputState,v&&l.lastEditActionCommand.interlaceInsertRepeat)for(var G=0;G<u;G++)O(),E(1);else c||O(),E(u);l.inputState=w,l.insertMode&&!c&&kn(o),d.isPlaying=!1}function Wi(o,l,u){function c(Te){return"string"==typeof Te?k.commands[Te](o):Te(o),!0}var d=o.getCursor("head"),v=ge.macroModeState.lastInsertModeChanges.visualBlock;v&&(Kr(o,d,v+1),u=o.listSelections().length,o.setCursor(d));for(var w=0;w<u;w++){v&&o.setCursor(xt(d,w,0));for(var O=0;O<l.length;O++){var E=l[O];if(E instanceof si)k.lookupKey(E.keyName,"vim-insert",c);else if("string"==typeof E){var G=o.getCursor();o.replaceRange(E,G,G)}else{var J=o.getCursor(),me=xt(J,0,E[0].length);o.replaceRange(E[0],J,me)}}}v&&o.setCursor(xt(d,0,1))}return k.keyMap.vim={attach:q,detach:Q,call:ee},Me("insertModeEscKeysTimeout",200,"number"),k.keyMap["vim-insert"]={fallthrough:["default"],attach:q,detach:Q,call:ee},k.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:q,detach:Q,call:ee},Ye(),ur}()}(pe(9475),pe(7660),pe(6584),pe(2946))},9475:function(wt){wt.exports=function(){"use strict";var tt=navigator.userAgent,pe=navigator.platform,k=/gecko\/\d/i.test(tt),U=/MSIE \d/.test(tt),H=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(tt),V=/Edge\/(\d+)/.exec(tt),s=U||H||V,M=s&&(U?document.documentMode||6:+(V||H)[1]),N=!V&&/WebKit\//.test(tt),se=N&&/Qt\/\d+\.\d+/.test(tt),Q=!V&&/Chrome\//.test(tt),q=/Opera\//.test(tt),z=/Apple Computer/.test(navigator.vendor),le=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(tt),fe=/PhantomJS/.test(tt),Fe=z&&(/Mobile\/\w+/.test(tt)||navigator.maxTouchPoints>2),ee=/Android/.test(tt),re=Fe||ee||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(tt),L=Fe||/Mac/.test(pe),W=/\bCrOS\b/.test(tt),g=/win/i.test(pe),S=q&&tt.match(/Version\/(\d*\.\d*)/);S&&(S=Number(S[1])),S&&S>=15&&(q=!1,N=!0);var T=L&&(se||q&&(null==S||S<12.11)),R=k||s&&M>=9;function C(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var ve,_=function(e,t){var n=e.className,r=C(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function te(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function Z(e,t){return te(e).appendChild(t)}function $(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var a=0;a<t.length;++a)i.appendChild(t[a]);return i}function j(e,t,n,r){var i=$(e,t,n,r);return i.setAttribute("role","presentation"),i}function x(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function ue(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function he(e,t){var n=e.className;C(t).test(n)||(e.className+=(n?" ":"")+t)}function Ee(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!C(n[r]).test(t)&&(t+=" "+n[r]);return t}ve=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(i){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var We=function(e){e.select()};function Ue(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Ge(e,t,n){for(var r in t||(t={}),e)e.hasOwnProperty(r)&&(!1!==n||!t.hasOwnProperty(r))&&(t[r]=e[r]);return t}function F(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var a=r||0,f=i||0;;){var h=e.indexOf("\t",a);if(h<0||h>=t)return f+(t-a);f+=h-a,f+=n-f%n,a=h+1}}Fe?We=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:s&&(We=function(e){try{e.select()}catch(t){}});var b=function(){this.id=null,this.f=null,this.time=0,this.handler=Ue(this.onTimeout,this)};function Me(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}b.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},b.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var K={toString:function(){return"CodeMirror.Pass"}},ne={scroll:!1},ye={origin:"*mouse"},Oe={origin:"+move"};function $e(e,t,n){for(var r=0,i=0;;){var a=e.indexOf("\t",r);-1==a&&(a=e.length);var f=a-r;if(a==e.length||i+f>=t)return r+Math.min(f,t-i);if(i+=a-r,r=a+1,(i+=n-i%n)>=t)return r}}var ge=[""];function Ye(e){for(;ge.length<=e;)ge.push(Ke(ge)+" ");return ge[e]}function Ke(e){return e[e.length-1]}function ur(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function ct(){}function gt(e,t){var n;return Object.create?n=Object.create(e):(ct.prototype=e,n=new ct),t&&Ge(t,n),n}var tr=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function dr(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||tr.test(e))}function Xt(e,t){return t?!!(t.source.indexOf("\\w")>-1&&dr(e))||t.test(e):dr(e)}function Tt(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var It=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Ir(e){return e.charCodeAt(0)>=768&&It.test(e)}function zr(e,t,n){for(;(n<0?t>0:t<e.length)&&Ir(e.charAt(t));)t+=n;return t}function Er(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,a=r<0?Math.ceil(i):Math.floor(i);if(a==t)return e(a)?t:n;e(a)?n=a:t=a+r}}var Wt=null;function Dr(e,t,n){var r;Wt=null;for(var i=0;i<e.length;++i){var a=e[i];if(a.from<t&&a.to>t)return i;a.to==t&&(a.from!=a.to&&"before"==n?r=i:Wt=i),a.from==t&&(a.from!=a.to&&"before"!=n?r=i:Wt=i)}return null!=r?r:Wt}var yt=function(){function n(m){return m<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(m):1424<=m&&m<=1524?"R":1536<=m&&m<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(m-1536):1774<=m&&m<=2220?"r":8192<=m&&m<=8203?"w":8204==m?"b":"L"}var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,a=/[LRr]/,f=/[Lb1n]/,h=/[1n]/;function p(m,A,I){this.level=m,this.from=A,this.to=I}return function(m,A){var I="ltr"==A?"L":"R";if(0==m.length||"ltr"==A&&!r.test(m))return!1;for(var X=m.length,Y=[],ce=0;ce<X;++ce)Y.push(n(m.charCodeAt(ce)));for(var we=0,Ae=I;we<X;++we){var Ie=Y[we];"m"==Ie?Y[we]=Ae:Ae=Ie}for(var _e=0,Ne=I;_e<X;++_e){var He=Y[_e];"1"==He&&"r"==Ne?Y[_e]="n":a.test(He)&&(Ne=He,"r"==He&&(Y[_e]="R"))}for(var je=1,Ze=Y[0];je<X-1;++je){var rt=Y[je];"+"==rt&&"1"==Ze&&"1"==Y[je+1]?Y[je]="1":","==rt&&Ze==Y[je+1]&&("1"==Ze||"n"==Ze)&&(Y[je]=Ze),Ze=rt}for(var bt=0;bt<X;++bt){var Qt=Y[bt];if(","==Qt)Y[bt]="N";else if("%"==Qt){var Mt=void 0;for(Mt=bt+1;Mt<X&&"%"==Y[Mt];++Mt);for(var wr=bt&&"!"==Y[bt-1]||Mt<X&&"1"==Y[Mt]?"1":"N",xr=bt;xr<Mt;++xr)Y[xr]=wr;bt=Mt-1}}for(var Rt=0,kr=I;Rt<X;++Rt){var $t=Y[Rt];"L"==kr&&"1"==$t?Y[Rt]="L":a.test($t)&&(kr=$t)}for(var Ht=0;Ht<X;++Ht)if(i.test(Y[Ht])){var Pt=void 0;for(Pt=Ht+1;Pt<X&&i.test(Y[Pt]);++Pt);for(var Ot="L"==(Ht?Y[Ht-1]:I),$n=Ot==("L"==(Pt<X?Y[Pt]:I))?Ot?"L":"R":I,mn=Ht;mn<Pt;++mn)Y[mn]=$n;Ht=Pt-1}for(var Yr,sr=[],qt=0;qt<X;)if(f.test(Y[qt])){var qo=qt;for(++qt;qt<X&&f.test(Y[qt]);++qt);sr.push(new p(0,qo,qt))}else{var nn=qt,Dn=sr.length,Fn="rtl"==A?1:0;for(++qt;qt<X&&"L"!=Y[qt];++qt);for(var hr=nn;hr<qt;)if(h.test(Y[hr])){nn<hr&&(sr.splice(Dn,0,new p(1,nn,hr)),Dn+=Fn);var ei=hr;for(++hr;hr<qt&&h.test(Y[hr]);++hr);sr.splice(Dn,0,new p(2,ei,hr)),Dn+=Fn,nn=hr}else++hr;nn<qt&&sr.splice(Dn,0,new p(1,nn,qt))}return"ltr"==A&&(1==sr[0].level&&(Yr=m.match(/^\s+/))&&(sr[0].from=Yr[0].length,sr.unshift(new p(0,0,Yr[0].length))),1==Ke(sr).level&&(Yr=m.match(/\s+$/))&&(Ke(sr).to-=Yr[0].length,sr.push(new p(0,X-Yr[0].length,X)))),"rtl"==A?sr.reverse():sr}}();function lt(e,t){var n=e.order;return null==n&&(n=e.order=yt(e.text,t)),n}var xt=[],ze=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||xt).concat(n)}};function Cr(e,t){return e._handlers&&e._handlers[t]||xt}function Ut(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var a=Me(i,n);a>-1&&(r[t]=i.slice(0,a).concat(i.slice(a+1)))}}}function mt(e,t){var n=Cr(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function qe(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),mt(e,n||t.type,e,t),Ct(t)||t.codemirrorIgnore}function Ve(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==Me(n,t[r])&&n.push(t[r])}function nt(e,t){return Cr(e,t).length>0}function At(e){e.prototype.on=function(t,n){ze(this,t,n)},e.prototype.off=function(t,n){Ut(this,t,n)}}function ht(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Nr(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Ct(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function vr(e){ht(e),Nr(e)}function rr(e){return e.target||e.srcElement}function on(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),L&&e.ctrlKey&&1==t&&(t=3),t}var Kr,zt,Br=function(){if(s&&M<9)return!1;var e=$("div");return"draggable"in e||"dragDrop"in e}();function Jr(e){if(null==Kr){var t=$("span","\u200b");Z(e,$("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Kr=t.offsetWidth<=1&&t.offsetHeight>2&&!(s&&M<8))}var n=Kr?$("span","\u200b"):$("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Qr(e){if(null!=zt)return zt;var t=Z(e,document.createTextNode("A\u062eA")),n=ve(t,0,1).getBoundingClientRect(),r=ve(t,1,2).getBoundingClientRect();return te(e),!(!n||n.left==n.right)&&(zt=r.right-n.right<3)}var e,qr=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var a=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),f=a.indexOf("\r");-1!=f?(n.push(a.slice(0,f)),t+=f+1):(n.push(a),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Kt=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(n){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Xr="oncopy"in(e=$("div"))||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy),Zr=null;var Vr={},Vt={};function Et(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Vr[e]=t}function Rr(e){if("string"==typeof e&&Vt.hasOwnProperty(e))e=Vt[e];else if(e&&"string"==typeof e.name&&Vt.hasOwnProperty(e.name)){var t=Vt[e.name];"string"==typeof t&&(t={name:t}),(e=gt(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Rr("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Rr("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function fr(e,t){t=Rr(t);var n=Vr[t.name];if(!n)return fr(e,"text/plain");var r=n(e,t);if(Lr.hasOwnProperty(t.name)){var i=Lr[t.name];for(var a in i)!i.hasOwnProperty(a)||(r.hasOwnProperty(a)&&(r["_"+a]=r[a]),r[a]=i[a])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var f in t.modeProps)r[f]=t.modeProps[f];return r}var Lr={};function an(e,t){Ge(t,Lr.hasOwnProperty(e)?Lr[e]:Lr[e]={})}function ir(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function or(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Fr(e,t,n){return!e.startState||e.startState(t,n)}var oe=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function be(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],a=i.chunkSize();if(t<a){n=i;break}t-=a}return n.lines[t]}function P(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(a){var f=a.text;i==n.line&&(f=f.slice(0,n.ch)),i==t.line&&(f=f.slice(t.ch)),r.push(f),++i}),r}function ae(e,t,n){var r=[];return e.iter(t,n,function(i){r.push(i.text)}),r}function Se(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function Be(e){if(null==e.parent)return null;for(var t=e.parent,n=Me(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function et(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],a=i.height;if(t<a){e=i;continue e}t-=a,n+=i.chunkSize()}return n}while(!e.lines);for(var f=0;f<e.lines.length;++f){var p=e.lines[f].height;if(t<p)break;t-=p}return n+f}function Zt(e,t){return t>=e.first&&t<e.first+e.size}function Gt(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function de(e,t,n){if(void 0===n&&(n=null),!(this instanceof de))return new de(e,t,n);this.line=e,this.ch=t,this.sticky=n}function Re(e,t){return e.line-t.line||e.ch-t.ch}function dt(e,t){return e.sticky==t.sticky&&0==Re(e,t)}function y(e){return de(e.line,e.ch)}function D(e,t){return Re(e,t)<0?t:e}function ie(e,t){return Re(e,t)<0?e:t}function Ce(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Le(e,t){if(t.line<e.first)return de(e.first,0);var n=e.first+e.size-1;return t.line>n?de(n,be(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?de(e.line,t):n<0?de(e.line,0):e}(t,be(e,t.line).text.length)}function st(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=Le(e,t[r]);return n}oe.prototype.eol=function(){return this.pos>=this.string.length},oe.prototype.sol=function(){return this.pos==this.lineStart},oe.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},oe.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},oe.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},oe.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},oe.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},oe.prototype.skipToEnd=function(){this.pos=this.string.length},oe.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},oe.prototype.backUp=function(e){this.pos-=e},oe.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=F(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},oe.prototype.indentation=function(){return F(this.string,null,this.tabSize)-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},oe.prototype.match=function(e,t,n){if("string"!=typeof e){var a=this.string.slice(this.pos).match(e);return a&&a.index>0?null:(a&&!1!==t&&(this.pos+=a[0].length),a)}var r=function(f){return n?f.toLowerCase():f};if(r(this.string.substr(this.pos,e.length))==r(e))return!1!==t&&(this.pos+=e.length),!0},oe.prototype.current=function(){return this.string.slice(this.start,this.pos)},oe.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},oe.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},oe.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Dt=function(e,t){this.state=e,this.lookAhead=t},Ft=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function On(e,t,n,r){var i=[e.state.modeGen],a={};ii(e,t.text,e.doc.mode,n,function(m,A){return i.push(m,A)},a,r);for(var f=n.state,h=function(m){n.baseTokens=i;var A=e.state.overlays[m],I=1,X=0;n.state=!0,ii(e,t.text,A.mode,n,function(Y,ce){for(var we=I;X<Y;){var Ae=i[I];Ae>Y&&i.splice(I,1,Y,i[I+1],Ae),I+=2,X=Math.min(Y,Ae)}if(ce)if(A.opaque)i.splice(we,I-we,Y,"overlay "+ce),I=we+2;else for(;we<I;we+=2){var Ie=i[we+1];i[we+1]=(Ie?Ie+" ":"")+"overlay "+ce}},a),n.state=f,n.baseTokens=null,n.baseTokenPos=1},p=0;p<e.state.overlays.length;++p)h(p);return{styles:i,classes:a.bgClass||a.textClass?a:null}}function Pr(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=ut(e,Be(t)),i=t.text.length>e.options.maxHighlightLength&&ir(e.doc.mode,r.state),a=On(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=a.styles,a.classes?t.styleClasses=a.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function ut(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new Ft(r,!0,t);var a=function(e,t,n){for(var r,i,a=e.doc,f=n?-1:t-(e.doc.mode.innerMode?1e3:100),h=t;h>f;--h){if(h<=a.first)return a.first;var p=be(a,h-1),m=p.stateAfter;if(m&&(!n||h+(m instanceof Dt?m.lookAhead:0)<=a.modeFrontier))return h;var A=F(p.text,null,e.options.tabSize);(null==i||r>A)&&(i=h-1,r=A)}return i}(e,t,n),f=a>r.first&&be(r,a-1).stateAfter,h=f?Ft.fromSaved(r,f,a):new Ft(r,Fr(r.mode),a);return r.iter(a,t,function(p){ti(e,p.text,h);var m=h.line;p.stateAfter=m==t-1||m%5==0||m>=i.viewFrom&&m<i.viewTo?h.save():null,h.nextLine()}),n&&(r.modeFrontier=h.line),h}function ti(e,t,n,r){var i=e.doc.mode,a=new oe(t,e.options.tabSize,n);for(a.start=a.pos=r||0,""==t&&yn(i,n.state);!a.eol();)ri(i,a,n.state),a.start=a.pos}function yn(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=or(e,t);if(n.mode.blankLine)return n.mode.blankLine(n.state)}}function ri(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=or(e,n).mode);var a=e.token(t,n);if(t.pos>t.start)return a}throw new Error("Mode "+e.name+" failed to advance stream.")}Ft.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Ft.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Ft.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Ft.fromSaved=function(e,t,n){return t instanceof Dt?new Ft(e,ir(e.mode,t.state),n,t.lookAhead):new Ft(e,ir(e.mode,t),n)},Ft.prototype.save=function(e){var t=!1!==e?ir(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Dt(t,this.maxLookAhead):t};var ln=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function Ii(e,t,n,r){var f,A,i=e.doc,a=i.mode,h=be(i,(t=Le(i,t)).line),p=ut(e,t.line,n),m=new oe(h.text,e.options.tabSize,p);for(r&&(A=[]);(r||m.pos<t.ch)&&!m.eol();)m.start=m.pos,f=ri(a,m,p.state),r&&A.push(new ln(m,f,ir(i.mode,p.state)));return r?A:new ln(m,f,p.state)}function ni(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+n[2])}return e}function ii(e,t,n,r,i,a,f){var h=n.flattenSpans;null==h&&(h=e.options.flattenSpans);var I,p=0,m=null,A=new oe(t,e.options.tabSize,r),X=e.options.addModeClass&&[null];for(""==t&&ni(yn(n,r.state),a);!A.eol();){if(A.pos>e.options.maxHighlightLength?(h=!1,f&&ti(e,t,r,A.pos),A.pos=t.length,I=null):I=ni(ri(n,A,r.state,X),a),X){var Y=X[0].name;Y&&(I="m-"+(I?Y+" "+I:Y))}if(!h||m!=I){for(;p<A.start;)i(p=Math.min(A.start,p+5e3),m);m=I}A.start=A.pos}for(;p<A.pos;){var ce=Math.min(A.pos,p+5e3);i(ce,m),p=ce}}var In=!1,_r=!1;function xn(e,t,n){this.marker=e,this.from=t,this.to=n}function sn(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Ri(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Nn(e,t){if(t.full)return null;var n=Zt(e,t.from.line)&&be(e,t.from.line).markedSpans,r=Zt(e,t.to.line)&&be(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,a=t.to.ch,f=0==Re(t.from,t.to),h=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var a=e[i],f=a.marker;null!=a.from&&!(f.inclusiveLeft?a.from<=t:a.from<t)&&(a.from!=t||"bookmark"!=f.type||n&&a.marker.insertLeft)||(r||(r=[])).push(new xn(f,a.from,null==a.to||(f.inclusiveRight?a.to>=t:a.to>t)?null:a.to))}return r}(n,i,f),p=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var a=e[i],f=a.marker;(null==a.to||(f.inclusiveRight?a.to>=t:a.to>t)||a.from==t&&"bookmark"==f.type&&(!n||a.marker.insertLeft))&&(r||(r=[])).push(new xn(f,null==a.from||(f.inclusiveLeft?a.from<=t:a.from<t)?null:a.from-t,null==a.to?null:a.to-t))}return r}(r,a,f),m=1==t.text.length,A=Ke(t.text).length+(m?i:0);if(h)for(var I=0;I<h.length;++I){var X=h[I];if(null==X.to){var Y=sn(p,X.marker);Y?m&&(X.to=null==Y.to?null:Y.to+A):X.to=i}}if(p)for(var ce=0;ce<p.length;++ce){var we=p[ce];null!=we.to&&(we.to+=A),null==we.from?sn(h,we.marker)||(we.from=A,m&&(h||(h=[])).push(we)):(we.from+=A,m&&(h||(h=[])).push(we))}h&&(h=Pi(h)),p&&p!=h&&(p=Pi(p));var Ie=[h];if(!m){var Ne,_e=t.text.length-2;if(_e>0&&h)for(var He=0;He<h.length;++He)null==h[He].to&&(Ne||(Ne=[])).push(new xn(h[He].marker,null,null));for(var je=0;je<_e;++je)Ie.push(Ne);Ie.push(p)}return Ie}function Pi(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function _i(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Hi(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Bn(e){return e.inclusiveLeft?-1:0}function bn(e){return e.inclusiveRight?1:0}function Rn(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),a=Re(r.from,i.from)||Bn(e)-Bn(t);return a?-a:Re(r.to,i.to)||bn(e)-bn(t)||t.id-e.id}function ai(e,t){var r,n=_r&&e.markedSpans;if(n)for(var i=void 0,a=0;a<n.length;++a)(i=n[a]).marker.collapsed&&null==(t?i.from:i.to)&&(!r||Rn(r,i.marker)<0)&&(r=i.marker);return r}function li(e){return ai(e,!0)}function Pn(e){return ai(e,!1)}function si(e,t){var r,n=_r&&e.markedSpans;if(n)for(var i=0;i<n.length;++i){var a=n[i];a.marker.collapsed&&(null==a.from||a.from<t)&&(null==a.to||a.to>t)&&(!r||Rn(r,a.marker)<0)&&(r=a.marker)}return r}function ui(e,t,n,r,i){var a=be(e,t),f=_r&&a.markedSpans;if(f)for(var h=0;h<f.length;++h){var p=f[h];if(p.marker.collapsed){var m=p.marker.find(0),A=Re(m.from,n)||Bn(p.marker)-Bn(i),I=Re(m.to,r)||bn(p.marker)-bn(i);if(!(A>=0&&I<=0||A<=0&&I>=0)&&(A<=0&&(p.marker.inclusiveRight&&i.inclusiveLeft?Re(m.to,n)>=0:Re(m.to,n)>0)||A>=0&&(p.marker.inclusiveRight&&i.inclusiveLeft?Re(m.from,r)<=0:Re(m.from,r)<0)))return!0}}}function Tr(e){for(var t;t=li(e);)e=t.find(-1,!0).line;return e}function l(e,t){var n=be(e,t),r=Tr(n);return n==r?t:Be(r)}function u(e,t){if(t>e.lastLine())return t;var r,n=be(e,t);if(!c(e,n))return t;for(;r=Pn(n);)n=r.find(1,!0).line;return Be(n)+1}function c(e,t){var n=_r&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&d(e,t,r))return!0}}function d(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return d(e,r.line,sn(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,a=0;a<t.markedSpans.length;++a)if((i=t.markedSpans[a]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&d(e,t,i))return!0}function v(e){for(var t=0,n=(e=Tr(e)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var a=n.parent;a;a=(n=a).parent)for(var f=0;f<a.children.length;++f){var h=a.children[f];if(h==n)break;t+=h.height}return t}function w(e){if(0==e.height)return 0;for(var n,t=e.text.length,r=e;n=li(r);){var i=n.find(0,!0);r=i.from.line,t+=i.from.ch-i.to.ch}for(r=e;n=Pn(r);){var a=n.find(0,!0);t-=r.text.length-a.from.ch,t+=(r=a.to.line).text.length-a.to.ch}return t}function O(e){var t=e.display,n=e.doc;t.maxLine=be(n,n.first),t.maxLineLength=w(t.maxLine),t.maxLineChanged=!0,n.iter(function(r){var i=w(r);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=r)})}var E=function(e,t,n){this.text=e,Hi(this,t),this.height=n?n(this):1};function J(e){e.parent=null,_i(e)}E.prototype.lineNo=function(){return Be(this)},At(E);var me={},Te={};function xe(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Te:me;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function ke(e,t){var n=j("span",null,null,N?"padding-right: .1px":null),r={pre:j("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var a=i?t.rest[i-1]:t.line,f=void 0;r.pos=0,r.addToken=De,Qr(e.display.measure)&&(f=lt(a,e.doc.direction))&&(r.addToken=Qe(r.addToken,f)),r.map=[],kt(a,r,Pr(e,a,t!=e.display.externalMeasured&&Be(a))),a.styleClasses&&(a.styleClasses.bgClass&&(r.bgClass=Ee(a.styleClasses.bgClass,r.bgClass||"")),a.styleClasses.textClass&&(r.textClass=Ee(a.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(Jr(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(N){var p=r.content.lastChild;(/\bcm-tab\b/.test(p.className)||p.querySelector&&p.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return mt(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=Ee(r.pre.className,r.textClass||"")),r}function Pe(e){var t=$("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function De(e,t,n,r,i,a,f){if(t){var A,h=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var a=e.charAt(i);" "==a&&n&&(i==e.length-1||32==e.charCodeAt(i+1))&&(a="\xa0"),r+=a,n=" "==a}return r}(t,e.trailingSpace):t,p=e.cm.state.specialChars,m=!1;if(p.test(t)){A=document.createDocumentFragment();for(var I=0;;){p.lastIndex=I;var X=p.exec(t),Y=X?X.index-I:t.length-I;if(Y){var ce=document.createTextNode(h.slice(I,I+Y));A.appendChild(s&&M<9?$("span",[ce]):ce),e.map.push(e.pos,e.pos+Y,ce),e.col+=Y,e.pos+=Y}if(!X)break;I+=Y+1;var we=void 0;if("\t"==X[0]){var Ae=e.cm.options.tabSize,Ie=Ae-e.col%Ae;(we=A.appendChild($("span",Ye(Ie),"cm-tab"))).setAttribute("role","presentation"),we.setAttribute("cm-text","\t"),e.col+=Ie}else"\r"==X[0]||"\n"==X[0]?((we=A.appendChild($("span","\r"==X[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",X[0]),e.col+=1):((we=e.cm.options.specialCharPlaceholder(X[0])).setAttribute("cm-text",X[0]),A.appendChild(s&&M<9?$("span",[we]):we),e.col+=1);e.map.push(e.pos,e.pos+1,we),e.pos++}}else e.col+=t.length,A=document.createTextNode(h),e.map.push(e.pos,e.pos+t.length,A),s&&M<9&&(m=!0),e.pos+=t.length;if(e.trailingSpace=32==h.charCodeAt(t.length-1),n||r||i||m||a||f){var _e=n||"";r&&(_e+=r),i&&(_e+=i);var Ne=$("span",[A],_e,a);if(f)for(var He in f)f.hasOwnProperty(He)&&"style"!=He&&"class"!=He&&Ne.setAttribute(He,f[He]);return e.content.appendChild(Ne)}e.content.appendChild(A)}}function Qe(e,t){return function(n,r,i,a,f,h,p){i=i?i+" cm-force-border":"cm-force-border";for(var m=n.pos,A=m+r.length;;){for(var I=void 0,X=0;X<t.length&&!((I=t[X]).to>m&&I.from<=m);X++);if(I.to>=A)return e(n,r,i,a,f,h,p);e(n,r.slice(0,I.to-m),i,a,null,h,p),a=null,r=r.slice(I.to-m),m=I.to}}}function Xe(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function kt(e,t,n){var r=e.markedSpans,i=e.text,a=0;if(r)for(var I,X,ce,we,Ae,Ie,_e,h=i.length,p=0,m=1,A="",Y=0;;){if(Y==p){ce=we=Ae=X="",_e=null,Ie=null,Y=1/0;for(var Ne=[],He=void 0,je=0;je<r.length;++je){var Ze=r[je],rt=Ze.marker;if("bookmark"==rt.type&&Ze.from==p&&rt.widgetNode)Ne.push(rt);else if(Ze.from<=p&&(null==Ze.to||Ze.to>p||rt.collapsed&&Ze.to==p&&Ze.from==p)){if(null!=Ze.to&&Ze.to!=p&&Y>Ze.to&&(Y=Ze.to,we=""),rt.className&&(ce+=" "+rt.className),rt.css&&(X=(X?X+";":"")+rt.css),rt.startStyle&&Ze.from==p&&(Ae+=" "+rt.startStyle),rt.endStyle&&Ze.to==Y&&(He||(He=[])).push(rt.endStyle,Ze.to),rt.title&&((_e||(_e={})).title=rt.title),rt.attributes)for(var bt in rt.attributes)(_e||(_e={}))[bt]=rt.attributes[bt];rt.collapsed&&(!Ie||Rn(Ie.marker,rt)<0)&&(Ie=Ze)}else Ze.from>p&&Y>Ze.from&&(Y=Ze.from)}if(He)for(var Qt=0;Qt<He.length;Qt+=2)He[Qt+1]==Y&&(we+=" "+He[Qt]);if(!Ie||Ie.from==p)for(var Mt=0;Mt<Ne.length;++Mt)Xe(t,0,Ne[Mt]);if(Ie&&(Ie.from||0)==p){if(Xe(t,(null==Ie.to?h+1:Ie.to)-p,Ie.marker,null==Ie.from),null==Ie.to)return;Ie.to==p&&(Ie=!1)}}if(p>=h)break;for(var wr=Math.min(h,Y);;){if(A){var xr=p+A.length;if(!Ie){var Rt=xr>wr?A.slice(0,wr-p):A;t.addToken(t,Rt,I?I+ce:ce,Ae,p+Rt.length==Y?we:"",X,_e)}if(xr>=wr){A=A.slice(wr-p),p=wr;break}p=xr,Ae=""}A=i.slice(a,a=n[m++]),I=xe(n[m++],t.cm.options)}}else for(var f=1;f<n.length;f+=2)t.addToken(t,i.slice(a,a=n[f]),xe(n[f+1],t.cm.options))}function ar(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=Pn(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?Be(Ke(this.rest))-n+1:1,this.node=this.text=null,this.hidden=c(e,t)}function St(e,t,n){for(var i,r=[],a=t;a<n;a=i){var f=new ar(e.doc,be(e.doc,a),a);i=a+f.size,r.push(f)}return r}var Nt=null;var _t=null;function at(e,t){var n=Cr(e,t);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);Nt?i=Nt.delayedCallbacks:_t?i=_t:(i=_t=[],setTimeout($r,0));for(var a=function(h){i.push(function(){return n[h].apply(null,r)})},f=0;f<n.length;++f)a(f)}}function $r(){var e=_t;_t=null;for(var t=0;t<e.length;++t)e[t]()}function un(e,t,n,r){for(var i=0;i<t.changes.length;i++){var a=t.changes[i];"text"==a?Ol(e,t):"gutter"==a?$o(e,t,n,r):"class"==a?po(e,t):"widget"==a&&Il(e,t,r)}t.changes=null}function en(e){return e.node==e.text&&(e.node=$("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),s&&M<8&&(e.node.style.zIndex=2)),e.node}function Vo(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):ke(e,t)}function Ol(e,t){var n=t.text.className,r=Vo(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,po(e,t)):n&&(t.text.className=n)}function po(e,t){(function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=en(t);t.background=r.insertBefore($("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}})(e,t),t.line.wrapClass?en(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className=""),t.text.className=(t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass)||""}function $o(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=en(t);t.gutterBackground=$("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var a=t.line.gutterMarkers;if(e.options.lineNumbers||a){var f=en(t),h=t.gutter=$("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(h.setAttribute("aria-hidden","true"),e.display.input.setUneditable(h),f.insertBefore(h,t.text),t.line.gutterClass&&(h.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!a||!a["CodeMirror-linenumbers"])&&(t.lineNumber=h.appendChild($("div",Gt(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),a)for(var p=0;p<e.display.gutterSpecs.length;++p){var m=e.display.gutterSpecs[p].className,A=a.hasOwnProperty(m)&&a[m];A&&h.appendChild($("div",[A],"CodeMirror-gutter-elt","left: "+r.gutterLeft[m]+"px; width: "+r.gutterWidth[m]+"px"))}}}function Il(e,t,n){t.alignable&&(t.alignable=null);for(var r=C("CodeMirror-linewidget"),i=t.node.firstChild,a=void 0;i;i=a)a=i.nextSibling,r.test(i.className)&&t.node.removeChild(i);ea(e,t,n)}function Nl(e,t,n,r){var i=Vo(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),po(e,t),$o(e,t,n,r),ea(e,t,r),t.node}function ea(e,t,n){if(ta(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)ta(e,t.rest[r],t,n,!1)}function ta(e,t,n,r,i){if(t.widgets)for(var a=en(n),f=0,h=t.widgets;f<h.length;++f){var p=h[f],m=$("div",[p.node],"CodeMirror-linewidget"+(p.className?" "+p.className:""));p.handleMouseEvents||m.setAttribute("cm-ignore-events","true"),Bl(p,m,n,r),e.display.input.setUneditable(m),i&&p.above?a.insertBefore(m,n.gutter||n.text):a.appendChild(m),at(p,"redraw")}}function Bl(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function fi(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!x(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),Z(t.display.measure,$("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function tn(e,t){for(var n=rr(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Ui(e){return e.lineSpace.offsetTop}function vo(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function ra(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=Z(e.measure,$("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return!isNaN(r.left)&&!isNaN(r.right)&&(e.cachedPaddingH=r),r}function Gr(e){return 50-e.display.nativeBarWidth}function Cn(e){return e.display.scroller.clientWidth-Gr(e)-e.display.barWidth}function go(e){return e.display.scroller.clientHeight-Gr(e)-e.display.barHeight}function na(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(Be(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function ia(e,t,n,r){return jr(e,_n(e,t),n,r)}function mo(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Ln(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function _n(e,t){var n=Be(t),r=mo(e,n);r&&!r.text?r=null:r&&r.changes&&(un(e,r,n,Co(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var n=Be(t=Tr(t)),r=e.display.externalMeasured=new ar(e.doc,t,n);r.lineN=n;var i=r.built=ke(e,r);return r.text=i.pre,Z(e.display.lineMeasure,i.pre),r}(e,t));var i=na(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function jr(e,t,n,r,i){t.before&&(n=-1);var f,a=n+(r||"");return t.cache.hasOwnProperty(a)?f=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var r=e.options.lineWrapping,i=r&&Cn(e);if(!t.measure.heights||r&&t.measure.width!=i){var a=t.measure.heights=[];if(r){t.measure.width=i;for(var f=t.text.firstChild.getClientRects(),h=0;h<f.length-1;h++){var p=f[h],m=f[h+1];Math.abs(p.bottom-m.bottom)>2&&a.push((p.bottom+m.top)/2-n.top)}}a.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(f=function(e,t,n,r){var m,i=aa(t.map,n,r),a=i.node,f=i.start,h=i.end,p=i.collapse;if(3==a.nodeType){for(var A=0;A<4;A++){for(;f&&Ir(t.line.text.charAt(i.coverStart+f));)--f;for(;i.coverStart+h<i.coverEnd&&Ir(t.line.text.charAt(i.coverStart+h));)++h;if((m=s&&M<9&&0==f&&h==i.coverEnd-i.coverStart?a.parentNode.getBoundingClientRect():_l(ve(a,f,h).getClientRects(),r)).left||m.right||0==f)break;h=f,f-=1,p="right"}s&&M<11&&(m=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Zr)return Zr;var t=Z(e,$("span","x")),n=t.getBoundingClientRect(),r=ve(t,0,1).getBoundingClientRect();return Zr=Math.abs(n.left-r.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,m))}else{var I;f>0&&(p=r="right"),m=e.options.lineWrapping&&(I=a.getClientRects()).length>1?I["right"==r?I.length-1:0]:a.getBoundingClientRect()}if(s&&M<9&&!f&&(!m||!m.left&&!m.right)){var X=a.parentNode.getClientRects()[0];m=X?{left:X.left,right:X.left+Wn(e.display),top:X.top,bottom:X.bottom}:oa}for(var Y=m.top-t.rect.top,ce=m.bottom-t.rect.top,we=(Y+ce)/2,Ae=t.view.measure.heights,Ie=0;Ie<Ae.length-1&&!(we<Ae[Ie]);Ie++);var He={left:("right"==p?m.right:m.left)-t.rect.left,right:("left"==p?m.left:m.right)-t.rect.left,top:Ie?Ae[Ie-1]:0,bottom:Ae[Ie]};return!m.left&&!m.right&&(He.bogus=!0),e.options.singleCursorHeightPerLine||(He.rtop=Y,He.rbottom=ce),He}(e,t,n,r)).bogus||(t.cache[a]=f)),{left:f.left,right:f.right,top:i?f.rtop:f.top,bottom:i?f.rbottom:f.bottom}}var Sn,oa={left:0,right:0,top:0,bottom:0};function aa(e,t,n){for(var r,i,a,f,h,p,m=0;m<e.length;m+=3)if(p=e[m+1],t<(h=e[m])?(i=0,a=1,f="left"):t<p?a=1+(i=t-h):(m==e.length-3||t==p&&e[m+3]>t)&&(i=(a=p-h)-1,t>=p&&(f="right")),null!=i){if(r=e[m+2],h==p&&n==(r.insertLeft?"left":"right")&&(f=n),"left"==n&&0==i)for(;m&&e[m-2]==e[m-3]&&e[m-1].insertLeft;)r=e[2+(m-=3)],f="left";if("right"==n&&i==p-h)for(;m<e.length-3&&e[m+3]==e[m+4]&&!e[m+5].insertLeft;)r=e[(m+=3)+2],f="right";break}return{node:r,start:i,end:a,collapse:f,coverStart:h,coverEnd:p}}function _l(e,t){var n=oa;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function la(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function sa(e){e.display.externalMeasure=null,te(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)la(e.display.view[t])}function ci(e){sa(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function ua(){return Q&&ee?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function fa(){return Q&&ee?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function yo(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=fi(e.widgets[n]));return t}function zi(e,t,n,r,i){if(!i){var a=yo(t);n.top+=a,n.bottom+=a}if("line"==r)return n;r||(r="local");var f=v(t);if("local"==r?f+=Ui(e.display):f-=e.display.viewOffset,"page"==r||"window"==r){var h=e.display.lineSpace.getBoundingClientRect();f+=h.top+("window"==r?0:fa());var p=h.left+("window"==r?0:ua());n.left+=p,n.right+=p}return n.top+=f,n.bottom+=f,n}function ca(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=ua(),i-=fa();else if("local"==n||!n){var a=e.display.sizer.getBoundingClientRect();r+=a.left,i+=a.top}var f=e.display.lineSpace.getBoundingClientRect();return{left:r-f.left,top:i-f.top}}function Ki(e,t,n,r,i){return r||(r=be(e.doc,t.line)),zi(e,r,ia(e,r,t.ch,i),n)}function Hr(e,t,n,r,i,a){function f(ce,we){var Ae=jr(e,i,ce,we?"right":"left",a);return we?Ae.left=Ae.right:Ae.right=Ae.left,zi(e,r,Ae,n)}r=r||be(e.doc,t.line),i||(i=_n(e,r));var h=lt(r,e.doc.direction),p=t.ch,m=t.sticky;if(p>=r.text.length?(p=r.text.length,m="before"):p<=0&&(p=0,m="after"),!h)return f("before"==m?p-1:p,"before"==m);function A(ce,we,Ae){return f(Ae?ce-1:ce,1==h[we].level!=Ae)}var I=Dr(h,p,m),X=Wt,Y=A(p,I,"before"==m);return null!=X&&(Y.other=A(p,X,"before"!=m)),Y}function ha(e,t){var n=0;t=Le(e.doc,t),e.options.lineWrapping||(n=Wn(e.display)*t.ch);var r=be(e.doc,t.line),i=v(r)+Ui(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function xo(e,t,n,r,i){var a=de(e,t,n);return a.xRel=i,r&&(a.outside=r),a}function ko(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return xo(r.first,0,null,-1,-1);var i=et(r,n),a=r.first+r.size-1;if(i>a)return xo(r.first+r.size-1,be(r,a).text.length,null,1,1);t<0&&(t=0);for(var f=be(r,i);;){var h=Ul(e,f,i,t,n),p=si(f,h.ch+(h.xRel>0||h.outside>0?1:0));if(!p)return h;var m=p.find(1);if(m.line==i)return m;f=be(r,i=m.line)}}function da(e,t,n,r){r-=yo(t);var i=t.text.length,a=Er(function(f){return jr(e,n,f-1).bottom<=r},i,0);return{begin:a,end:i=Er(function(f){return jr(e,n,f).top>r},a,i)}}function pa(e,t,n,r){return n||(n=_n(e,t)),da(e,t,n,zi(e,t,jr(e,n,r),"line").top)}function bo(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function Ul(e,t,n,r,i){i-=v(t);var a=_n(e,t),f=yo(t),h=0,p=t.text.length,m=!0,A=lt(t,e.doc.direction);if(A){var I=(e.options.lineWrapping?Kl:zl)(e,t,n,a,A,r,i);h=(m=1!=I.level)?I.from:I.to-1,p=m?I.to:I.from-1}var we,Ae,X=null,Y=null,ce=Er(function(je){var Ze=jr(e,a,je);return Ze.top+=f,Ze.bottom+=f,!!bo(Ze,r,i,!1)&&(Ze.top<=i&&Ze.left<=r&&(X=je,Y=Ze),!0)},h,p),Ie=!1;if(Y){var _e=r-Y.left<Y.right-r,Ne=_e==m;ce=X+(Ne?0:1),Ae=Ne?"after":"before",we=_e?Y.left:Y.right}else{!m&&(ce==p||ce==h)&&ce++,Ae=0==ce?"after":ce==t.text.length?"before":jr(e,a,ce-(m?1:0)).bottom+f<=i==m?"after":"before";var He=Hr(e,de(n,ce,Ae),"line",t,a);we=He.left,Ie=i<He.top?-1:i>=He.bottom?1:0}return xo(n,ce=zr(t.text,ce,1),Ae,Ie,r-we)}function zl(e,t,n,r,i,a,f){var h=Er(function(I){var X=i[I],Y=1!=X.level;return bo(Hr(e,de(n,Y?X.to:X.from,Y?"before":"after"),"line",t,r),a,f,!0)},0,i.length-1),p=i[h];if(h>0){var m=1!=p.level,A=Hr(e,de(n,m?p.from:p.to,m?"after":"before"),"line",t,r);bo(A,a,f,!0)&&A.top>f&&(p=i[h-1])}return p}function Kl(e,t,n,r,i,a,f){var h=da(e,t,r,f),p=h.begin,m=h.end;/\s/.test(t.text.charAt(m-1))&&m--;for(var A=null,I=null,X=0;X<i.length;X++){var Y=i[X];if(!(Y.from>=m||Y.to<=p)){var we=jr(e,r,1!=Y.level?Math.min(m,Y.to)-1:Math.max(p,Y.from)).right,Ae=we<a?a-we+1e9:we-a;(!A||I>Ae)&&(A=Y,I=Ae)}}return A||(A=i[i.length-1]),A.from<p&&(A={from:p,to:A.to,level:A.level}),A.to>m&&(A={from:A.from,to:m,level:A.level}),A}function Hn(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Sn){Sn=$("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)Sn.appendChild(document.createTextNode("x")),Sn.appendChild($("br"));Sn.appendChild(document.createTextNode("x"))}Z(e.measure,Sn);var n=Sn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),te(e.measure),n||1}function Wn(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=$("span","xxxxxxxxxx"),n=$("pre",[t],"CodeMirror-line-like");Z(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function Co(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,a=t.gutters.firstChild,f=0;a;a=a.nextSibling,++f){var h=e.display.gutterSpecs[f].className;n[h]=a.offsetLeft+a.clientLeft+i,r[h]=a.clientWidth}return{fixedPos:So(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function So(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function va(e){var t=Hn(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/Wn(e.display)-3);return function(i){if(c(e.doc,i))return 0;var a=0;if(i.widgets)for(var f=0;f<i.widgets.length;f++)i.widgets[f].height&&(a+=i.widgets[f].height);return n?a+(Math.ceil(i.text.length/r)||1)*t:a+t}}function wo(e){var t=e.doc,n=va(e);t.iter(function(r){var i=n(r);i!=r.height&&Se(r,i)})}function wn(e,t,n,r){var i=e.display;if(!n&&"true"==rr(t).getAttribute("cm-not-content"))return null;var a,f,h=i.lineSpace.getBoundingClientRect();try{a=t.clientX-h.left,f=t.clientY-h.top}catch(I){return null}var m,p=ko(e,a,f);if(r&&p.xRel>0&&(m=be(e.doc,p.line).text).length==p.ch){var A=F(m,m.length,e.options.tabSize)-m.length;p=de(p.line,Math.max(0,Math.round((a-ra(e.display).left)/Wn(e.display))-A))}return p}function Ln(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function mr(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)_r&&l(e.doc,t)<i.viewTo&&cn(e);else if(n<=i.viewFrom)_r&&u(e.doc,n+r)>i.viewFrom?cn(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)cn(e);else if(t<=i.viewFrom){var a=Zi(e,n,n+r,1);a?(i.view=i.view.slice(a.index),i.viewFrom=a.lineN,i.viewTo+=r):cn(e)}else if(n>=i.viewTo){var f=Zi(e,t,t,-1);f?(i.view=i.view.slice(0,f.index),i.viewTo=f.lineN):cn(e)}else{var h=Zi(e,t,t,-1),p=Zi(e,n,n+r,1);h&&p?(i.view=i.view.slice(0,h.index).concat(St(e,h.lineN,p.lineN)).concat(i.view.slice(p.index)),i.viewTo+=r):cn(e)}var m=i.externalMeasured;m&&(n<m.lineN?m.lineN+=r:t<m.lineN+m.size&&(i.externalMeasured=null))}function fn(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var a=r.view[Ln(e,t)];if(null!=a.node){var f=a.changes||(a.changes=[]);-1==Me(f,n)&&f.push(n)}}}function cn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Zi(e,t,n,r){var a,i=Ln(e,t),f=e.display.view;if(!_r||n==e.doc.first+e.doc.size)return{index:i,lineN:n};for(var h=e.display.viewFrom,p=0;p<i;p++)h+=f[p].size;if(h!=t){if(r>0){if(i==f.length-1)return null;a=h+f[i].size-t,i++}else a=h-t;t+=a,n+=a}for(;l(e.doc,n)!=n;){if(i==(r<0?0:f.length-1))return null;n+=r*f[i-(r<0?1:0)].size,i+=r}return{index:i,lineN:n}}function ga(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];!i.hidden&&(!i.node||i.changes)&&++n}return n}function hi(e){e.display.input.showSelection(e.display.input.prepareSelection())}function ma(e,t){void 0===t&&(t=!0);for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),a=r.selection=document.createDocumentFragment(),f=0;f<n.sel.ranges.length;f++)if(t||f!=n.sel.primIndex){var h=n.sel.ranges[f];if(!(h.from().line>=e.display.viewTo||h.to().line<e.display.viewFrom)){var p=h.empty();(p||e.options.showCursorWhenSelecting)&&ya(e,h.head,i),p||Gl(e,h,a)}}return r}function ya(e,t,n){var r=Hr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild($("div","\xa0","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var a=Ki(e,t,"div",null,null);a.right-a.left>0&&(i.style.width=a.right-a.left+"px")}if(r.other){var f=n.appendChild($("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));f.style.display="",f.style.left=r.other.left+"px",f.style.top=r.other.top+"px",f.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function Gi(e,t){return e.top-t.top||e.left-t.left}function Gl(e,t,n){var r=e.display,i=e.doc,a=document.createDocumentFragment(),f=ra(e.display),h=f.left,p=Math.max(r.sizerWidth,Cn(e)-r.sizer.offsetLeft)-f.right,m="ltr"==i.direction;function A(Ne,He,je,Ze){He<0&&(He=0),He=Math.round(He),Ze=Math.round(Ze),a.appendChild($("div",null,"CodeMirror-selected","position: absolute; left: "+Ne+"px;\n                             top: "+He+"px; width: "+(null==je?p-Ne:je)+"px;\n                             height: "+(Ze-He)+"px"))}function I(Ne,He,je){var bt,Qt,Ze=be(i,Ne),rt=Ze.text.length;function Mt(Rt,kr){return Ki(e,de(Ne,Rt),"div",Ze,kr)}function wr(Rt,kr,$t){var Ht=pa(e,Ze,null,Rt),Pt="ltr"==kr==("after"==$t)?"left":"right";return Mt("after"==$t?Ht.begin:Ht.end-(/\s/.test(Ze.text.charAt(Ht.end-1))?2:1),Pt)[Pt]}var xr=lt(Ze,i.direction);return function(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,a=0;a<e.length;++a){var f=e[a];(f.from<n&&f.to>t||t==n&&f.to==t)&&(r(Math.max(f.from,t),Math.min(f.to,n),1==f.level?"rtl":"ltr",a),i=!0)}i||r(t,n,"ltr")}(xr,He||0,null==je?rt:je,function(Rt,kr,$t,Ht){var Pt="ltr"==$t,Ot=Mt(Rt,Pt?"left":"right"),br=Mt(kr-1,Pt?"right":"left"),$n=null==He&&0==Rt,mn=null==je&&kr==rt,sr=0==Ht,Yr=!xr||Ht==xr.length-1;if(br.top-Ot.top<=3){var nn=(m?$n:mn)&&sr?h:(Pt?Ot:br).left;A(nn,Ot.top,((m?mn:$n)&&Yr?p:(Pt?br:Ot).right)-nn,Ot.bottom)}else{var Fn,hr,ei,Xo;Pt?(Fn=m&&$n&&sr?h:Ot.left,hr=m?p:wr(Rt,$t,"before"),ei=m?h:wr(kr,$t,"after"),Xo=m&&mn&&Yr?p:br.right):(Fn=m?wr(Rt,$t,"before"):h,hr=!m&&$n&&sr?p:Ot.right,ei=!m&&mn&&Yr?h:br.left,Xo=m?wr(kr,$t,"after"):p),A(Fn,Ot.top,hr-Fn,Ot.bottom),Ot.bottom<br.top&&A(h,Ot.bottom,null,br.top),A(ei,br.top,Xo-ei,br.bottom)}(!bt||Gi(Ot,bt)<0)&&(bt=Ot),Gi(br,bt)<0&&(bt=br),(!Qt||Gi(Ot,Qt)<0)&&(Qt=Ot),Gi(br,Qt)<0&&(Qt=br)}),{start:bt,end:Qt}}var X=t.from(),Y=t.to();if(X.line==Y.line)I(X.line,X.ch,Y.ch);else{var ce=be(i,X.line),we=be(i,Y.line),Ae=Tr(ce)==Tr(we),Ie=I(X.line,X.ch,Ae?ce.text.length+1:null).end,_e=I(Y.line,Ae?0:null,Y.ch).start;Ae&&(Ie.top<_e.top-2?(A(Ie.right,Ie.top,null,Ie.bottom),A(h,_e.top,_e.left,_e.bottom)):A(Ie.right,Ie.top,_e.left-Ie.right,Ie.bottom)),Ie.bottom<_e.top&&A(h,Ie.bottom,null,_e.top)}n.appendChild(a)}function Lo(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||Un(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function xa(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Ao(e))}function To(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Un(e))},100)}function Ao(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(mt(e,"focus",e,t),e.state.focused=!0,he(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),N&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Lo(e))}function Un(e,t){e.state.delayingBlurEvent||(e.state.focused&&(mt(e,"blur",e,t),e.state.focused=!1,_(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function ji(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=Math.max(0,t.scroller.getBoundingClientRect().top),i=t.lineDiv.getBoundingClientRect().top,a=0,f=0;f<t.view.length;f++){var h=t.view[f],p=e.options.lineWrapping,m=void 0,A=0;if(!h.hidden){if(i+=h.line.height,s&&M<8){var I=h.node.offsetTop+h.node.offsetHeight;m=I-n,n=I}else{var X=h.node.getBoundingClientRect();m=X.bottom-X.top,!p&&h.text.firstChild&&(A=h.text.firstChild.getBoundingClientRect().right-X.left-1)}var Y=h.line.height-m;if((Y>.005||Y<-.005)&&(i<r&&(a-=Y),Se(h.line,m),ka(h.line),h.rest))for(var ce=0;ce<h.rest.length;ce++)ka(h.rest[ce]);if(A>e.display.sizerWidth){var we=Math.ceil(A/Wn(e.display));we>e.display.maxLineLength&&(e.display.maxLineLength=we,e.display.maxLine=h.line,e.display.maxLineChanged=!0)}}}Math.abs(a)>2&&(t.scroller.scrollTop+=a)}function ka(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function Yi(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Ui(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,a=et(t,r),f=et(t,i);if(n&&n.ensure){var h=n.ensure.from.line,p=n.ensure.to.line;h<a?(a=h,f=et(t,v(be(t,h))+e.wrapper.clientHeight)):Math.min(p,t.lastLine())>=f&&(a=et(t,v(be(t,p))-e.wrapper.clientHeight),f=p)}return{from:a,to:Math.max(f,a+1)}}function Mo(e,t){var n=e.display,r=Hn(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,a=go(e),f={};t.bottom-t.top>a&&(t.bottom=t.top+a);var h=e.doc.height+vo(n),m=t.bottom>h-r;if(t.top<i)f.scrollTop=t.top<r?0:t.top;else if(t.bottom>i+a){var A=Math.min(t.top,(m?h:t.bottom)-a);A!=i&&(f.scrollTop=A)}var I=e.options.fixedGutter?0:n.gutters.offsetWidth,X=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-I,Y=Cn(e)-n.gutters.offsetWidth,ce=t.right-t.left>Y;return ce&&(t.right=t.left+Y),t.left<10?f.scrollLeft=0:t.left<X?f.scrollLeft=Math.max(0,t.left+I-(ce?0:10)):t.right>Y+X-3&&(f.scrollLeft=t.right+(ce?0:10)-Y),f}function Eo(e,t){null!=t&&(Ji(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function zn(e){Ji(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function di(e,t,n){(null!=t||null!=n)&&Ji(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Ji(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,ba(e,ha(e,t.from),ha(e,t.to),t.margin))}function ba(e,t,n,r){var i=Mo(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});di(e,i.scrollLeft,i.scrollTop)}function pi(e,t){Math.abs(e.doc.scrollTop-t)<2||(k||Fo(e,{top:t}),Ca(e,t,!0),k&&Fo(e),mi(e,100))}function Ca(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Tn(e,t,n,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(!(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||r)&&(e.doc.scrollLeft=t,Aa(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function vi(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+vo(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Gr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var An=function(e,t,n){this.cm=n;var r=this.vert=$("div",[$("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=$("div",[$("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),ze(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),ze(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,s&&M<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};An.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;return n?(this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0",this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+(e.viewHeight-(t?r:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0"),t?(this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+(e.viewWidth-e.barLeft-(n?r:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},An.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},An.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},An.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=L&&!le?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new b,this.disableVert=new b},An.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,function r(){var i=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,r)})},An.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var gi=function(){};function Kn(e,t){t||(t=vi(e));var n=e.display.barWidth,r=e.display.barHeight;Sa(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&ji(e),Sa(e,vi(e)),n=e.display.barWidth,r=e.display.barHeight}function Sa(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}gi.prototype.update=function(){return{bottom:0,right:0}},gi.prototype.setScrollLeft=function(){},gi.prototype.setScrollTop=function(){},gi.prototype.clear=function(){};var wa={native:An,null:gi};function La(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&_(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new wa[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),ze(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?Tn(e,t):pi(e,t)},e),e.display.scrollbars.addClass&&he(e.display.wrapper,e.display.scrollbars.addClass)}var ql=0;function Mn(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ql,markArrays:null},function(e){Nt?Nt.ops.push(e):e.ownsGroup=Nt={ops:[e],delayedCallbacks:[]}}(e.curOp)}function En(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{Nt=null,t(n)}}(t,function(n){for(var r=0;r<n.ops.length;r++)n.ops[r].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)Vl(t[n]);for(var r=0;r<t.length;r++)$l(t[r]);for(var i=0;i<t.length;i++)es(t[i]);for(var a=0;a<t.length;a++)ts(t[a]);for(var f=0;f<t.length;f++)rs(t[f])}(n)})}function Vl(e){var t=e.cm,n=t.display;(function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Gr(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Gr(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&O(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Qi(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function $l(e){e.updatedDisplay=e.mustUpdate&&Do(e.cm,e.update)}function es(e){var t=e.cm,n=t.display;e.updatedDisplay&&ji(t),e.barMeasure=vi(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=ia(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Gr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Cn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function ts(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Tn(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==ue();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Kn(t,e.barMeasure),e.updatedDisplay&&Io(t,e.barMeasure),e.selectionChanged&&Lo(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&xa(e.cm)}function rs(e){var t=e.cm,n=t.display,r=t.doc;e.updatedDisplay&&Ta(t,e.update),null!=n.wheelStartX&&(null!=e.scrollTop||null!=e.scrollLeft||e.scrollToPos)&&(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Ca(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Tn(t,e.scrollLeft,!0,!0),e.scrollToPos&&function(e,t){if(!qe(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!fe){var a=$("div","\u200b",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-Ui(e.display))+"px;\n                         height: "+(t.bottom-t.top+Gr(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(a),a.scrollIntoView(i),e.display.lineSpace.removeChild(a)}}}(t,function(e,t,n,r){var i;null==r&&(r=0),!e.options.lineWrapping&&t==n&&(n="before"==t.sticky?de(t.line,t.ch+1,"before"):t,t=t.ch?de(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t);for(var a=0;a<5;a++){var f=!1,h=Hr(e,t),p=n&&n!=t?Hr(e,n):h,m=Mo(e,i={left:Math.min(h.left,p.left),top:Math.min(h.top,p.top)-r,right:Math.max(h.left,p.left),bottom:Math.max(h.bottom,p.bottom)+r}),A=e.doc.scrollTop,I=e.doc.scrollLeft;if(null!=m.scrollTop&&(pi(e,m.scrollTop),Math.abs(e.doc.scrollTop-A)>1&&(f=!0)),null!=m.scrollLeft&&(Tn(e,m.scrollLeft),Math.abs(e.doc.scrollLeft-I)>1&&(f=!0)),!f)break}return i}(t,Le(r,e.scrollToPos.from),Le(r,e.scrollToPos.to),e.scrollToPos.margin));var a=e.maybeHiddenMarkers,f=e.maybeUnhiddenMarkers;if(a)for(var h=0;h<a.length;++h)a[h].lines.length||mt(a[h],"hide");if(f)for(var p=0;p<f.length;++p)f[p].lines.length&&mt(f[p],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&mt(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Sr(e,t){if(e.curOp)return t();Mn(e);try{return t()}finally{En(e)}}function Yt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Mn(e);try{return t.apply(e,arguments)}finally{En(e)}}}function cr(e){return function(){if(this.curOp)return e.apply(this,arguments);Mn(this);try{return e.apply(this,arguments)}finally{En(this)}}}function Jt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Mn(t);try{return e.apply(this,arguments)}finally{En(t)}}}function mi(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,Ue(ns,e))}function ns(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=ut(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(a){if(r.line>=e.display.viewFrom){var f=a.styles,h=a.text.length>e.options.maxHighlightLength?ir(t.mode,r.state):null,p=On(e,a,r,!0);h&&(r.state=h),a.styles=p.styles;var m=a.styleClasses,A=p.classes;A?a.styleClasses=A:m&&(a.styleClasses=null);for(var I=!f||f.length!=a.styles.length||m!=A&&(!m||!A||m.bgClass!=A.bgClass||m.textClass!=A.textClass),X=0;!I&&X<f.length;++X)I=f[X]!=a.styles[X];I&&i.push(r.line),a.stateAfter=r.save(),r.nextLine()}else a.text.length<=e.options.maxHighlightLength&&ti(e,a.text,r),a.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return mi(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&Sr(e,function(){for(var a=0;a<i.length;a++)fn(e,i[a],"text")})}}var Qi=function(e,t,n){var r=e.display;this.viewport=t,this.visible=Yi(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Cn(e),this.force=n,this.dims=Co(e),this.events=[]};function Do(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return cn(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==ga(e))return!1;Ma(e)&&(cn(e),t.dims=Co(e));var i=r.first+r.size,a=Math.max(t.visible.from-e.options.viewportMargin,r.first),f=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<a&&a-n.viewFrom<20&&(a=Math.max(r.first,n.viewFrom)),n.viewTo>f&&n.viewTo-f<20&&(f=Math.min(i,n.viewTo)),_r&&(a=l(e.doc,a),f=u(e.doc,f));var h=a!=n.viewFrom||f!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;(function(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=St(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=St(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(Ln(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(St(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,Ln(e,n)))),r.viewTo=n})(e,a,f),n.viewOffset=v(be(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var p=ga(e);if(!h&&0==p&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var m=function(e){if(e.hasFocus())return null;var t=ue();if(!t||!x(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&x(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(e);return p>4&&(n.lineDiv.style.display="none"),function(e,t,n){var r=e.display,i=e.options.lineNumbers,a=r.lineDiv,f=a.firstChild;function h(ce){var we=ce.nextSibling;return N&&L&&e.display.currentWheelTarget==ce?ce.style.display="none":ce.parentNode.removeChild(ce),we}for(var p=r.view,m=r.viewFrom,A=0;A<p.length;A++){var I=p[A];if(!I.hidden)if(I.node&&I.node.parentNode==a){for(;f!=I.node;)f=h(f);var Y=i&&null!=t&&t<=m&&I.lineNumber;I.changes&&(Me(I.changes,"gutter")>-1&&(Y=!1),un(e,I,m,n)),Y&&(te(I.lineNumber),I.lineNumber.appendChild(document.createTextNode(Gt(e.options,m)))),f=I.node.nextSibling}else{var X=Nl(e,I,m,n);a.insertBefore(X,f)}m+=I.size}for(;f;)f=h(f)}(e,n.updateLineNumbers,t.dims),p>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=ue()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&x(document.body,e.anchorNode)&&x(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(m),te(n.cursorDiv),te(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,h&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,mi(e,400)),n.updateLineNumbers=null,!0}function Ta(e,t){for(var n=t.viewport,r=!0;;r=!1){if(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Cn(e))r&&(t.visible=Yi(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+vo(e.display)-go(e),n.top)}),t.visible=Yi(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!Do(e,t))break;ji(e);var i=vi(e);hi(e),Kn(e,i),Io(e,i),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Fo(e,t){var n=new Qi(e,t);if(Do(e,n)){ji(e),Ta(e,n);var r=vi(e);hi(e),Kn(e,r),Io(e,r),n.finish()}}function Oo(e){e.sizer.style.marginLeft=e.gutters.offsetWidth+"px",at(e,"gutterChanged",e)}function Io(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Gr(e)+"px"}function Aa(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=So(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,a=r+"px",f=0;f<n.length;f++)if(!n[f].hidden){e.options.fixedGutter&&(n[f].gutter&&(n[f].gutter.style.left=a),n[f].gutterBackground&&(n[f].gutterBackground.style.left=a));var h=n[f].alignable;if(h)for(var p=0;p<h.length;p++)h[p].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function Ma(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=Gt(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild($("div",[$("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=i.firstChild.offsetWidth,f=i.offsetWidth-a;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(a,r.lineGutter.offsetWidth-f)+1,r.lineNumWidth=r.lineNumInnerWidth+f,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",Oo(e.display),!0}return!1}function No(e,t){for(var n=[],r=!1,i=0;i<e.length;i++){var a=e[i],f=null;if("string"!=typeof a&&(f=a.style,a=a.className),"CodeMirror-linenumbers"==a){if(!t)continue;r=!0}n.push({className:a,style:f})}return t&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function Ea(e){var t=e.gutters,n=e.gutterSpecs;te(t),e.lineGutter=null;for(var r=0;r<n.length;++r){var i=n[r],a=i.className,f=i.style,h=t.appendChild($("div",null,"CodeMirror-gutter "+a));f&&(h.style.cssText=f),"CodeMirror-linenumbers"==a&&(e.lineGutter=h,h.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",Oo(e)}function yi(e){Ea(e.display),mr(e),Aa(e)}function ss(e,t,n,r){var i=this;this.input=n,i.scrollbarFiller=$("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=$("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=j("div",null,"CodeMirror-code"),i.selectionDiv=$("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=$("div",null,"CodeMirror-cursors"),i.measure=$("div",null,"CodeMirror-measure"),i.lineMeasure=$("div",null,"CodeMirror-measure"),i.lineSpace=j("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var a=j("div",[i.lineSpace],"CodeMirror-lines");i.mover=$("div",[a],null,"position: relative"),i.sizer=$("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=$("div",null,null,"position: absolute; height: 50px; width: 1px;"),i.gutters=$("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=$("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=$("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),i.wrapper.setAttribute("translate","no"),s&&M<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),!N&&!(k&&re)&&(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,i.gutterSpecs=No(r.gutters,r.lineNumbers),Ea(i),n.init(i)}Qi.prototype.signal=function(e,t){nt(e,t)&&this.events.push(arguments)},Qi.prototype.finish=function(){for(var e=0;e<this.events.length;e++)mt.apply(null,this.events[e])};var qi=0,Ar=null;function Da(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function us(e){var t=Da(e);return t.x*=Ar,t.y*=Ar,t}function Fa(e,t){var n=Da(t),r=n.x,i=n.y,a=e.display,f=a.scroller,p=f.scrollHeight>f.clientHeight;if(r&&f.scrollWidth>f.clientWidth||i&&p){if(i&&L&&N)e:for(var m=t.target,A=a.view;m!=f;m=m.parentNode)for(var I=0;I<A.length;I++)if(A[I].node==m){e.display.currentWheelTarget=m;break e}if(r&&!k&&!q&&null!=Ar)return i&&p&&pi(e,Math.max(0,f.scrollTop+i*Ar)),Tn(e,Math.max(0,f.scrollLeft+r*Ar)),(!i||i&&p)&&ht(t),void(a.wheelStartX=null);if(i&&null!=Ar){var X=i*Ar,Y=e.doc.scrollTop,ce=Y+a.wrapper.clientHeight;X<0?Y=Math.max(0,Y+X-50):ce=Math.min(e.doc.height,ce+X+50),Fo(e,{top:Y,bottom:ce})}qi<20&&(null==a.wheelStartX?(a.wheelStartX=f.scrollLeft,a.wheelStartY=f.scrollTop,a.wheelDX=r,a.wheelDY=i,setTimeout(function(){if(null!=a.wheelStartX){var we=f.scrollLeft-a.wheelStartX,Ae=f.scrollTop-a.wheelStartY,Ie=Ae&&a.wheelDY&&Ae/a.wheelDY||we&&a.wheelDX&&we/a.wheelDX;a.wheelStartX=a.wheelStartY=null,Ie&&(Ar=(Ar*qi+Ie)/(qi+1),++qi)}},200)):(a.wheelDX+=r,a.wheelDY+=i))}}s?Ar=-.53:k?Ar=15:Q?Ar=-.7:z&&(Ar=-1/3);var Mr=function(e,t){this.ranges=e,this.primIndex=t};Mr.prototype.primary=function(){return this.ranges[this.primIndex]},Mr.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!dt(n.anchor,r.anchor)||!dt(n.head,r.head))return!1}return!0},Mr.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new ft(y(this.ranges[t].anchor),y(this.ranges[t].head));return new Mr(e,this.primIndex)},Mr.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},Mr.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(Re(t,r.from())>=0&&Re(e,r.to())<=0)return n}return-1};var ft=function(e,t){this.anchor=e,this.head=t};function Wr(e,t,n){var r=e&&e.options.selectionsMayTouch,i=t[n];t.sort(function(X,Y){return Re(X.from(),Y.from())}),n=Me(t,i);for(var a=1;a<t.length;a++){var f=t[a],h=t[a-1],p=Re(h.to(),f.from());if(r&&!f.empty()?p>0:p>=0){var m=ie(h.from(),f.from()),A=D(h.to(),f.to()),I=h.empty()?f.from()==f.head:h.from()==h.head;a<=n&&--n,t.splice(--a,2,new ft(I?A:m,I?m:A))}}return new Mr(t,n)}function hn(e,t){return new Mr([new ft(e,t||e)],0)}function dn(e){return e.text?de(e.from.line+e.text.length-1,Ke(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Oa(e,t){if(Re(e,t.from)<0)return e;if(Re(e,t.to)<=0)return dn(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=dn(t).ch-t.to.ch),de(n,r)}function Bo(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new ft(Oa(i.anchor,t),Oa(i.head,t)))}return Wr(e.cm,n,e.sel.primIndex)}function Ia(e,t,n){return e.line==t.line?de(n.line,e.ch-t.ch+n.ch):de(n.line+(e.line-t.line),e.ch)}function Ro(e){e.doc.mode=fr(e.options,e.doc.modeOption),xi(e)}function xi(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,mi(e,100),e.state.modeGen++,e.curOp&&mr(e)}function Na(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Ke(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Po(e,t,n,r){function i(_e){return n?n[_e]:null}function a(_e,Ne,He){(function(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),_i(e),Hi(e,n);var i=r?r(e):1;i!=e.height&&Se(e,i)})(_e,Ne,He,r),at(_e,"change",_e,t)}function f(_e,Ne){for(var He=[],je=_e;je<Ne;++je)He.push(new E(m[je],i(je),r));return He}var h=t.from,p=t.to,m=t.text,A=be(e,h.line),I=be(e,p.line),X=Ke(m),Y=i(m.length-1),ce=p.line-h.line;if(t.full)e.insert(0,f(0,m.length)),e.remove(m.length,e.size-m.length);else if(Na(e,t)){var we=f(0,m.length-1);a(I,I.text,Y),ce&&e.remove(h.line,ce),we.length&&e.insert(h.line,we)}else if(A==I)if(1==m.length)a(A,A.text.slice(0,h.ch)+X+A.text.slice(p.ch),Y);else{var Ae=f(1,m.length-1);Ae.push(new E(X+A.text.slice(p.ch),Y,r)),a(A,A.text.slice(0,h.ch)+m[0],i(0)),e.insert(h.line+1,Ae)}else if(1==m.length)a(A,A.text.slice(0,h.ch)+m[0]+I.text.slice(p.ch),i(0)),e.remove(h.line+1,ce);else{a(A,A.text.slice(0,h.ch)+m[0],i(0)),a(I,X+I.text.slice(p.ch),Y);var Ie=f(1,m.length-1);ce>1&&e.remove(h.line+1,ce-1),e.insert(h.line+1,Ie)}at(e,"change",e,t)}function pn(e,t,n){!function r(i,a,f){if(i.linked)for(var h=0;h<i.linked.length;++h){var p=i.linked[h];if(p.doc!=a){var m=f&&p.sharedHist;n&&!m||(t(p.doc,m),r(p.doc,i,m))}}}(e,null,!0)}function Ba(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,wo(e),Ro(e),Ra(e),e.options.direction=t.direction,e.options.lineWrapping||O(e),e.options.mode=t.modeOption,mr(e)}function Ra(e){("rtl"==e.doc.direction?he:_)(e.display.lineDiv,"CodeMirror-rtl")}function Xi(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function _o(e,t){var n={from:y(t.from),to:dn(t),text:P(e,t.from,t.to)};return Ha(e,n,t.from.line,t.to.line+1),pn(e,function(r){return Ha(r,n,t.from.line,t.to.line+1)},!0),n}function Pa(e){for(;e.length&&Ke(e).ranges;)e.pop()}function _a(e,t,n,r){var i=e.history;i.undone.length=0;var f,h,a=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(f=function(e,t){return t?(Pa(e.done),Ke(e.done)):e.done.length&&!Ke(e.done).ranges?Ke(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Ke(e.done)):void 0}(i,i.lastOp==r)))h=Ke(f.changes),0==Re(t.from,t.to)&&0==Re(t.from,h.to)?h.to=dn(t):f.changes.push(_o(e,t));else{var p=Ke(i.done);for((!p||!p.ranges)&&Vi(e.sel,i.done),f={changes:[_o(e,t)],generation:i.generation},i.done.push(f);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,h||mt(e,"historyAdded")}function ps(e,t,n,r){var i=e.history,a=r&&r.origin;n==i.lastSelOp||a&&i.lastSelOrigin==a&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==a||function(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,a,Ke(i.done),t))?i.done[i.done.length-1]=t:Vi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=a,i.lastSelOp=n,r&&!1!==r.clearRedo&&Pa(i.undone)}function Vi(e,t){var n=Ke(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Ha(e,t,n,r){var i=t["spans_"+e.id],a=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(f){f.markedSpans&&((i||(i=t["spans_"+e.id]={}))[a]=f.markedSpans),++a})}function vs(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Wa(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(vs(n[i]));return r}(e,t),r=Nn(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var a=n[i],f=r[i];if(a&&f)e:for(var h=0;h<f.length;++h){for(var p=f[h],m=0;m<a.length;++m)if(a[m].marker==p.marker)continue e;a.push(p)}else f&&(n[i]=f)}return n}function Zn(e,t,n){for(var r=[],i=0;i<e.length;++i){var a=e[i];if(a.ranges)r.push(n?Mr.prototype.deepCopy.call(a):a);else{var f=a.changes,h=[];r.push({changes:h});for(var p=0;p<f.length;++p){var m=f[p],A=void 0;if(h.push({from:m.from,to:m.to,text:m.text}),t)for(var I in m)(A=I.match(/^spans_(\d+)$/))&&Me(t,Number(A[1]))>-1&&(Ke(h)[I]=m[I],delete m[I])}}}return r}function Ho(e,t,n,r){if(r){var i=e.anchor;if(n){var a=Re(t,i)<0;a!=Re(n,i)<0?(i=t,t=n):a!=Re(t,n)<0&&(t=n)}return new ft(i,t)}return new ft(n||t,t)}function $i(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),lr(e,new Mr([Ho(e.sel.primary(),t,n,i)],0),r)}function Ua(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),a=0;a<e.sel.ranges.length;a++)r[a]=Ho(e.sel.ranges[a],t[a],null,i);lr(e,Wr(e.cm,r,e.sel.primIndex),n)}function Wo(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,lr(e,Wr(e.cm,i,e.sel.primIndex),r)}function za(e,t,n,r){lr(e,hn(t,n),r)}function Ka(e,t,n){var r=e.history.done,i=Ke(r);i&&i.ranges?(r[r.length-1]=t,eo(e,t,n)):lr(e,t,n)}function lr(e,t,n){eo(e,t,n),ps(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function eo(e,t,n){(nt(e,"beforeSelectionChange")||e.cm&&nt(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var r={ranges:t.ranges,update:function(i){this.ranges=[];for(var a=0;a<i.length;a++)this.ranges[a]=new ft(Le(e,i[a].anchor),Le(e,i[a].head))},origin:n&&n.origin};return mt(e,"beforeSelectionChange",e,r),e.cm&&mt(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?Wr(e.cm,r.ranges,r.ranges.length-1):t}(e,t,n));var r=n&&n.bias||(Re(t.primary().head,e.sel.primary().head)<0?-1:1);Za(e,ja(e,t,r,!0)),(!n||!1!==n.scroll)&&e.cm&&"nocursor"!=e.cm.getOption("readOnly")&&zn(e.cm)}function Za(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,Ve(e.cm)),at(e,"cursorActivity",e))}function Ga(e){Za(e,ja(e,e.sel,null,!1))}function ja(e,t,n,r){for(var i,a=0;a<t.ranges.length;a++){var f=t.ranges[a],h=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[a],p=to(e,f.anchor,h&&h.anchor,n,r),m=to(e,f.head,h&&h.head,n,r);(i||p!=f.anchor||m!=f.head)&&(i||(i=t.ranges.slice(0,a)),i[a]=new ft(p,m))}return i?Wr(e.cm,i,t.primIndex):t}function Gn(e,t,n,r,i){var a=be(e,t.line);if(a.markedSpans)for(var f=0;f<a.markedSpans.length;++f){var h=a.markedSpans[f],p=h.marker,m="selectLeft"in p?!p.selectLeft:p.inclusiveLeft,A="selectRight"in p?!p.selectRight:p.inclusiveRight;if((null==h.from||(m?h.from<=t.ch:h.from<t.ch))&&(null==h.to||(A?h.to>=t.ch:h.to>t.ch))){if(i&&(mt(p,"beforeCursorEnter"),p.explicitlyCleared)){if(a.markedSpans){--f;continue}break}if(!p.atomic)continue;if(n){var I=p.find(r<0?1:-1),X=void 0;if((r<0?A:m)&&(I=Ya(e,I,-r,I&&I.line==t.line?a:null)),I&&I.line==t.line&&(X=Re(I,n))&&(r<0?X<0:X>0))return Gn(e,I,t,r,i)}var Y=p.find(r<0?-1:1);return(r<0?m:A)&&(Y=Ya(e,Y,r,Y.line==t.line?a:null)),Y?Gn(e,Y,t,r,i):null}}return t}function to(e,t,n,r,i){var a=r||1;return Gn(e,t,n,a,i)||!i&&Gn(e,t,n,a,!0)||Gn(e,t,n,-a,i)||!i&&Gn(e,t,n,-a,!0)||(e.cantEdit=!0,de(e.first,0))}function Ya(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?Le(e,de(t.line-1)):null:n>0&&t.ch==(r||be(e,t.line)).text.length?t.line<e.first+e.size-1?de(t.line+1,0):null:new de(t.line,t.ch+n)}function Ja(e){e.setSelection(de(e.firstLine(),0),de(e.lastLine()),ne)}function Qa(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(i,a,f,h){i&&(r.from=Le(e,i)),a&&(r.to=Le(e,a)),f&&(r.text=f),void 0!==h&&(r.origin=h)}),mt(e,"beforeChange",e,r),e.cm&&mt(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function jn(e,t,n){if(e.cm){if(!e.cm.curOp)return Yt(e.cm,jn)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(nt(e,"beforeChange")||e.cm&&nt(e.cm,"beforeChange"))||(t=Qa(e,t,!0))){var r=In&&!n&&function(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(Y){if(Y.markedSpans)for(var ce=0;ce<Y.markedSpans.length;++ce){var we=Y.markedSpans[ce].marker;we.readOnly&&(!r||-1==Me(r,we))&&(r||(r=[])).push(we)}}),!r)return null;for(var i=[{from:t,to:n}],a=0;a<r.length;++a)for(var f=r[a],h=f.find(0),p=0;p<i.length;++p){var m=i[p];if(!(Re(m.to,h.from)<0||Re(m.from,h.to)>0)){var A=[p,1],I=Re(m.from,h.from),X=Re(m.to,h.to);(I<0||!f.inclusiveLeft&&!I)&&A.push({from:m.from,to:h.from}),(X>0||!f.inclusiveRight&&!X)&&A.push({from:h.to,to:m.to}),i.splice.apply(i,A),p+=A.length-3}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)qa(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else qa(e,t)}}function qa(e,t){if(1!=t.text.length||""!=t.text[0]||0!=Re(t.from,t.to)){var n=Bo(e,t);_a(e,t,n,e.cm?e.cm.curOp.id:NaN),ki(e,t,n,Nn(e,t));var r=[];pn(e,function(i,a){!a&&-1==Me(r,i.history)&&(el(i.history,t),r.push(i.history)),ki(i,t,null,Nn(i,t))})}}function ro(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!r||n){for(var a,i=e.history,f=e.sel,h="undo"==t?i.done:i.undone,p="undo"==t?i.undone:i.done,m=0;m<h.length&&(a=h[m],!(n?a.ranges&&!a.equals(e.sel):!a.ranges));m++);if(m!=h.length){for(i.lastOrigin=i.lastSelOrigin=null;;){if(!(a=h.pop()).ranges){if(r)return void h.push(a);break}if(Vi(a,p),n&&!a.equals(e.sel))return void lr(e,a,{clearRedo:!1});f=a}var A=[];Vi(f,p),p.push({changes:A,generation:i.generation}),i.generation=a.generation||++i.maxGeneration;for(var I=nt(e,"beforeChange")||e.cm&&nt(e.cm,"beforeChange"),X=function(we){var Ae=a.changes[we];if(Ae.origin=t,I&&!Qa(e,Ae,!1))return h.length=0,{};A.push(_o(e,Ae));var Ie=we?Bo(e,Ae):Ke(h);ki(e,Ae,Ie,Wa(e,Ae)),!we&&e.cm&&e.cm.scrollIntoView({from:Ae.from,to:dn(Ae)});var _e=[];pn(e,function(Ne,He){!He&&-1==Me(_e,Ne.history)&&(el(Ne.history,Ae),_e.push(Ne.history)),ki(Ne,Ae,null,Wa(Ne,Ae))})},Y=a.changes.length-1;Y>=0;--Y){var ce=X(Y);if(ce)return ce.v}}}}function Xa(e,t){if(0!=t&&(e.first+=t,e.sel=new Mr(ur(e.sel.ranges,function(i){return new ft(de(i.anchor.line+t,i.anchor.ch),de(i.head.line+t,i.head.ch))}),e.sel.primIndex),e.cm)){mr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)fn(e.cm,r,"gutter")}}function ki(e,t,n,r){if(e.cm&&!e.cm.curOp)return Yt(e.cm,ki)(e,t,n,r);if(t.to.line<e.first)Xa(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Xa(e,i),t={from:de(e.first,0),to:de(t.to.line+i,t.to.ch),text:[Ke(t.text)],origin:t.origin}}var a=e.lastLine();t.to.line>a&&(t={from:t.from,to:de(a,be(e,a).text.length),text:[t.text[0]],origin:t.origin}),t.removed=P(e,t.from,t.to),n||(n=Bo(e,t)),e.cm?function(e,t,n){var r=e.doc,i=e.display,a=t.from,f=t.to,h=!1,p=a.line;e.options.lineWrapping||(p=Be(Tr(be(r,a.line))),r.iter(p,f.line+1,function(Y){if(Y==i.maxLine)return h=!0,!0})),r.sel.contains(t.from,t.to)>-1&&Ve(e),Po(r,t,n,va(e)),e.options.lineWrapping||(r.iter(p,a.line+t.text.length,function(Y){var ce=w(Y);ce>i.maxLineLength&&(i.maxLine=Y,i.maxLineLength=ce,i.maxLineChanged=!0,h=!1)}),h&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=be(e,r).stateAfter;if(i&&(!(i instanceof Dt)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(r,a.line),mi(e,400);var m=t.text.length-(f.line-a.line)-1;t.full?mr(e):a.line!=f.line||1!=t.text.length||Na(e.doc,t)?mr(e,a.line,f.line+1,m):fn(e,a.line,"text");var A=nt(e,"changes"),I=nt(e,"change");if(I||A){var X={from:a,to:f,text:t.text,removed:t.removed,origin:t.origin};I&&at(e,"change",e,X),A&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(X)}e.display.selForContextMenu=null}(e.cm,t,r):Po(e,t,r),eo(e,n,ne),e.cantEdit&&to(e,de(e.firstLine(),0))&&(e.cantEdit=!1)}}function Yn(e,t,n,r,i){var a;r||(r=n),Re(r,n)<0&&(n=(a=[r,n])[0],r=a[1]),"string"==typeof t&&(t=e.splitLines(t)),jn(e,{from:n,to:r,text:t,origin:i})}function Va(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function $a(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i],f=!0;if(a.ranges){a.copied||((a=e[i]=a.deepCopy()).copied=!0);for(var h=0;h<a.ranges.length;h++)Va(a.ranges[h].anchor,t,n,r),Va(a.ranges[h].head,t,n,r)}else{for(var p=0;p<a.changes.length;++p){var m=a.changes[p];if(n<m.from.line)m.from=de(m.from.line+r,m.from.ch),m.to=de(m.to.line+r,m.to.ch);else if(t<=m.to.line){f=!1;break}}f||(e.splice(0,i+1),i=0)}}}function el(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;$a(e.done,n,r,i),$a(e.undone,n,r,i)}function bi(e,t,n,r){var i=t,a=t;return"number"==typeof t?a=be(e,Ce(e,t)):i=Be(t),null==i?null:(r(a,i)&&e.cm&&fn(e.cm,i,n),a)}function Ci(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function Si(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}ft.prototype.from=function(){return ie(this.anchor,this.head)},ft.prototype.to=function(){return D(this.anchor,this.head)},ft.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Ci.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,J(i),at(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},Si.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var a=Math.min(t,i-e),f=r.height;if(r.removeInner(e,a),this.height-=f-r.height,i==a&&(this.children.splice(n--,1),r.parent=null),0==(t-=a))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Ci))){var h=[];this.collapse(h),this.children=[new Ci(h)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],a=i.chunkSize();if(e<=a){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var f=i.lines.length%25+25,h=f;h<i.lines.length;){var p=new Ci(i.lines.slice(h,h+=25));i.height-=p.height,this.children.splice(++r,0,p),p.parent=this}i.lines=i.lines.slice(0,f),this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var n=new Si(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=n.size,e.height-=n.height;var i=Me(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var r=new Si(e.children);r.parent=e,e.children=[r,n],e=r}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],a=i.chunkSize();if(e<a){var f=Math.min(t,a-e);if(i.iterN(e,f,n))return!0;if(0==(t-=f))break;e=0}else e-=a}}};var wi=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function tl(e,t,n){v(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Eo(e,n)}wi.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=Be(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var a=fi(this);Se(n,Math.max(0,n.height-a)),e&&(Sr(e,function(){tl(e,n,-a),fn(e,r,"widget")}),at(e,"lineWidgetCleared",e,this,r))}},wi.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=fi(this)-t;!i||(c(this.doc,r)||Se(r,r.height+i),n&&Sr(n,function(){n.curOp.forceUpdate=!0,tl(n,r,i),at(n,"lineWidgetChanged",n,e,Be(r))}))},At(wi);var rl=0,vn=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++rl};function Jn(e,t,n,r,i){if(r&&r.shared)return function(e,t,n,r,i){(r=Ge(r)).shared=!1;var a=[Jn(e,t,n,r,i)],f=a[0],h=r.widgetNode;return pn(e,function(p){h&&(r.widgetNode=h.cloneNode(!0)),a.push(Jn(p,Le(p,t),Le(p,n),r,i));for(var m=0;m<p.linked.length;++m)if(p.linked[m].isParent)return;f=Ke(a)}),new Li(a,f)}(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Yt(e.cm,Jn)(e,t,n,r,i);var a=new vn(e,i),f=Re(t,n);if(r&&Ge(r,a,!1),f>0||0==f&&!1!==a.clearWhenEmpty)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=j("span",[a.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(ui(e,t.line,t,n,a)||t.line!=n.line&&ui(e,n.line,t,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");_r=!0}a.addToHistory&&_a(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var m,h=t.line,p=e.cm;if(e.iter(h,n.line+1,function(I){p&&a.collapsed&&!p.options.lineWrapping&&Tr(I)==p.display.maxLine&&(m=!0),a.collapsed&&h!=t.line&&Se(I,0),function(e,t,n){var r=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));r&&r.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],r&&r.add(e.markedSpans)),t.marker.attachLine(e)}(I,new xn(a,h==t.line?t.ch:null,h==n.line?n.ch:null),e.cm&&e.cm.curOp),++h}),a.collapsed&&e.iter(t.line,n.line+1,function(I){c(e,I)&&Se(I,0)}),a.clearOnEnter&&ze(a,"beforeCursorEnter",function(){return a.clear()}),a.readOnly&&(In=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++rl,a.atomic=!0),p){if(m&&(p.curOp.updateMaxLine=!0),a.collapsed)mr(p,t.line,n.line+1);else if(a.className||a.startStyle||a.endStyle||a.css||a.attributes||a.title)for(var A=t.line;A<=n.line;A++)fn(p,A,"text");a.atomic&&Ga(p.doc),at(p,"markerAdded",p,a)}return a}vn.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Mn(e),nt(this,"clear")){var n=this.find();n&&at(this,"clear",n.from,n.to)}for(var r=null,i=null,a=0;a<this.lines.length;++a){var f=this.lines[a],h=sn(f.markedSpans,this);e&&!this.collapsed?fn(e,Be(f),"text"):e&&(null!=h.to&&(i=Be(f)),null!=h.from&&(r=Be(f))),f.markedSpans=Ri(f.markedSpans,h),null==h.from&&this.collapsed&&!c(this.doc,f)&&e&&Se(f,Hn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var p=0;p<this.lines.length;++p){var m=Tr(this.lines[p]),A=w(m);A>e.display.maxLineLength&&(e.display.maxLine=m,e.display.maxLineLength=A,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&mr(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Ga(e.doc)),e&&at(e,"markerCleared",e,this,r,i),t&&En(e),this.parent&&this.parent.clear()}},vn.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,r,i=0;i<this.lines.length;++i){var a=this.lines[i],f=sn(a.markedSpans,this);if(null!=f.from&&(n=de(t?a:Be(a),f.from),-1==e))return n;if(null!=f.to&&(r=de(t?a:Be(a),f.to),1==e))return r}return n&&{from:n,to:r}},vn.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;!t||!r||Sr(r,function(){var i=t.line,a=Be(t.line),f=mo(r,a);if(f&&(la(f),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!c(n.doc,i)&&null!=n.height){var h=n.height;n.height=null;var p=fi(n)-h;p&&Se(i,i.height+p)}at(r,"markerChanged",r,e)})},vn.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||-1==Me(t.maybeHiddenMarkers,this))&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},vn.prototype.detachLine=function(e){if(this.lines.splice(Me(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},At(vn);var Li=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function nl(e){return e.findMarks(de(e.first,0),e.clipPos(de(e.lastLine())),function(t){return t.parent})}function Cs(e){for(var t=function(r){var i=e[r],a=[i.primary.doc];pn(i.primary.doc,function(p){return a.push(p)});for(var f=0;f<i.markers.length;f++){var h=i.markers[f];-1==Me(a,h.doc)&&(h.parent=null,i.markers.splice(f--,1))}},n=0;n<e.length;n++)t(n)}Li.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();at(this,"clear")}},Li.prototype.find=function(e,t){return this.primary.find(e,t)},At(Li);var Ss=0,yr=function(e,t,n,r,i){if(!(this instanceof yr))return new yr(e,t,n,r,i);null==n&&(n=0),Si.call(this,[new Ci([new E("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var a=de(n,0);this.sel=hn(a),this.history=new Xi(null),this.id=++Ss,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Po(this,{from:a,to:a,text:e}),lr(this,hn(a),ne)};yr.prototype=gt(Si.prototype,{constructor:yr,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ae(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Jt(function(e){var t=de(this.first,0),n=this.first+this.size-1;jn(this,{from:t,to:de(n,be(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&di(this.cm,0,0),lr(this,hn(t),ne)}),replaceRange:function(e,t,n,r){Yn(this,e,t=Le(this,t),n=n?Le(this,n):t,r)},getRange:function(e,t,n){var r=P(this,Le(this,e),Le(this,t));return!1===n?r:r.join(""===n?"":n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Zt(this,e))return be(this,e)},getLineNumber:function(e){return Be(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=be(this,e)),Tr(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Le(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Jt(function(e,t,n){za(this,Le(this,"number"==typeof e?de(e,t||0):e),null,n)}),setSelection:Jt(function(e,t,n){za(this,Le(this,e),Le(this,t||e),n)}),extendSelection:Jt(function(e,t,n){$i(this,Le(this,e),t&&Le(this,t),n)}),extendSelections:Jt(function(e,t){Ua(this,st(this,e),t)}),extendSelectionsBy:Jt(function(e,t){Ua(this,st(this,ur(this.sel.ranges,e)),t)}),setSelections:Jt(function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new ft(Le(this,e[i].anchor),Le(this,e[i].head||e[i].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),lr(this,Wr(this.cm,r,t),n)}}),addSelection:Jt(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new ft(Le(this,e),Le(this,t||e))),lr(this,Wr(this.cm,r,r.length-1),n)}),getSelection:function(e){for(var n,t=this.sel.ranges,r=0;r<t.length;r++){var i=P(this,t[r].from(),t[r].to());n=n?n.concat(i):i}return!1===e?n:n.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=P(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Jt(function(e,t,n){for(var r=[],i=this.sel,a=0;a<i.ranges.length;a++){var f=i.ranges[a];r[a]={from:f.from(),to:f.to(),text:this.splitLines(e[a]),origin:n}}for(var h=t&&"end"!=t&&function(e,t,n){for(var r=[],i=de(e.first,0),a=i,f=0;f<t.length;f++){var h=t[f],p=Ia(h.from,i,a),m=Ia(dn(h),i,a);if(i=h.to,a=m,"around"==n){var A=e.sel.ranges[f],I=Re(A.head,A.anchor)<0;r[f]=new ft(I?m:p,I?p:m)}else r[f]=new ft(p,p)}return new Mr(r,e.sel.primIndex)}(this,r,t),p=r.length-1;p>=0;p--)jn(this,r[p]);h?Ka(this,h):this.cm&&zn(this.cm)}),undo:Jt(function(){ro(this,"undo")}),redo:Jt(function(){ro(this,"redo")}),undoSelection:Jt(function(){ro(this,"undo",!0)}),redoSelection:Jt(function(){ro(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new Xi(this.history),pn(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Zn(this.history.done),undone:Zn(this.history.undone)}},setHistory:function(e){var t=this.history=new Xi(this.history);t.done=Zn(e.done.slice(0),null,!0),t.undone=Zn(e.undone.slice(0),null,!0)},setGutterMarker:Jt(function(e,t,n){return bi(this,e,"gutter",function(r){var i=r.gutterMarkers||(r.gutterMarkers={});return i[t]=n,!n&&Tt(i)&&(r.gutterMarkers=null),!0})}),clearGutter:Jt(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&bi(t,n,"gutter",function(){return n.gutterMarkers[e]=null,Tt(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!(Zt(this,e)&&(t=e,e=be(this,e))))return null}else if(null==(t=Be(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Jt(function(e,t,n){return bi(this,e,"gutter"==t?"gutter":"class",function(r){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(r[i]){if(C(n).test(r[i]))return!1;r[i]+=" "+n}else r[i]=n;return!0})}),removeLineClass:Jt(function(e,t,n){return bi(this,e,"gutter"==t?"gutter":"class",function(r){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",a=r[i];if(!a)return!1;if(null==n)r[i]=null;else{var f=a.match(C(n));if(!f)return!1;var h=f.index+f[0].length;r[i]=a.slice(0,f.index)+(f.index&&h!=a.length?" ":"")+a.slice(h)||null}return!0})}),addLineWidget:Jt(function(e,t,n){return function(e,t,n,r){var i=new wi(e,n,r),a=e.cm;return a&&i.noHScroll&&(a.display.alignWidgets=!0),bi(e,t,"widget",function(f){var h=f.widgets||(f.widgets=[]);if(null==i.insertAt?h.push(i):h.splice(Math.min(h.length,Math.max(0,i.insertAt)),0,i),i.line=f,a&&!c(e,f)){var p=v(f)<e.scrollTop;Se(f,f.height+fi(i)),p&&Eo(a,i.height),a.curOp.forceUpdate=!0}return!0}),a&&at(a,"lineWidgetAdded",a,i,"number"==typeof t?t:Be(t)),i}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Jn(this,Le(this,e),Le(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Jn(this,e=Le(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=be(this,(e=Le(this,e)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=Le(this,e),t=Le(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(a){var f=a.markedSpans;if(f)for(var h=0;h<f.length;h++){var p=f[h];!(null!=p.to&&i==e.line&&e.ch>=p.to||null==p.from&&i!=e.line||null!=p.from&&i==t.line&&p.from>=t.ch)&&(!n||n(p.marker))&&r.push(p.marker.parent||p.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var a=i.text.length+r;if(a>e)return t=e,!0;e-=a,++n}),Le(this,de(n,t))},indexFromPos:function(e){var t=(e=Le(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(r){t+=r.text.length+n}),t},copy:function(e){var t=new yr(ae(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new yr(ae(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),a=e.clipPos(i.from),f=e.clipPos(i.to);if(Re(a,f)){var h=Jn(e,a,f,r.primary,r.primary.type);r.markers.push(h),h.parent=r}}}(r,nl(this)),r},unlinkDoc:function(e){if(e instanceof Lt&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Cs(nl(this));break}if(e.history==this.history){var r=[e.id];pn(e,function(i){return r.push(i.id)},!0),e.history=new Xi(null),e.history.done=Zn(this.history.done,r),e.history.undone=Zn(this.history.undone,r)}},iterLinkedDocs:function(e){pn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):qr(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Jt(function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&function(e){Sr(e,function(){Ra(e),mr(e)})}(this.cm))})}),yr.prototype.eachLine=yr.prototype.iter;var il=0;function ws(e){var t=this;if(ol(t),!qe(t,e)&&!tn(t.display,e)){ht(e),s&&(il=+new Date);var n=wn(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,a=Array(i),f=0,h=function(){++f==i&&Yt(t,function(){var Y={from:n=Le(t.doc,n),to:n,text:t.doc.splitLines(a.filter(function(ce){return null!=ce}).join(t.doc.lineSeparator())),origin:"paste"};jn(t.doc,Y),Ka(t.doc,hn(Le(t.doc,n),Le(t.doc,dn(Y))))})()},p=function(Y,ce){if(t.options.allowDropFileTypes&&-1==Me(t.options.allowDropFileTypes,Y.type))h();else{var we=new FileReader;we.onerror=function(){return h()},we.onload=function(){var Ae=we.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Ae)||(a[ce]=Ae),h()},we.readAsText(Y)}},m=0;m<r.length;m++)p(r[m],m);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var A=e.dataTransfer.getData("Text");if(A){var I;if(t.state.draggingText&&!t.state.draggingText.copy&&(I=t.listSelections()),eo(t.doc,hn(n,n)),I)for(var X=0;X<I.length;++X)Yn(t.doc,"",I[X].anchor,I[X].head,"drag");t.replaceSelection(A,"around","paste"),t.display.input.focus()}}catch(Y){}}}}function ol(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function al(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<t.length;r++){var i=t[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation(function(){for(var a=0;a<n.length;a++)e(n[a])})}}var ll=!1;function As(){ll||(function(){var e;ze(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,al(Es)},100))}),ze(window,"blur",function(){return al(Un)})}(),ll=!0)}function Es(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var gn={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ti=0;Ti<10;Ti++)gn[Ti+48]=gn[Ti+96]=String(Ti);for(var no=65;no<=90;no++)gn[no]=String.fromCharCode(no);for(var Ai=1;Ai<=12;Ai++)gn[Ai+111]=gn[Ai+63235]="F"+Ai;var rn={};function Ds(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var n,r,i,a,f=0;f<t.length-1;f++){var h=t[f];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))n=!0;else if(/^(c|ctrl|control)$/i.test(h))r=!0;else{if(!/^s(hift)?$/i.test(h))throw new Error("Unrecognized modifier name: "+h);i=!0}}return n&&(e="Alt-"+e),r&&(e="Ctrl-"+e),a&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function Fs(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=ur(n.split(" "),Ds),a=0;a<i.length;a++){var f=void 0,h=void 0;a==i.length-1?(h=i.join(" "),f=r):(h=i.slice(0,a+1).join(" "),f="...");var p=t[h];if(p){if(p!=f)throw new Error("Inconsistent bindings for "+h)}else t[h]=f}delete e[n]}for(var m in t)e[m]=t[m];return e}function Qn(e,t,n,r){var i=(t=io(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Qn(e,t.fallthrough,n,r);for(var a=0;a<t.fallthrough.length;a++){var f=Qn(e,t.fallthrough[a],n,r);if(f)return f}}}function sl(e){var t="string"==typeof e?e:gn[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function ul(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(T?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(T?t.ctrlKey:t.metaKey)&&"Mod"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function fl(e,t){if(q&&34==e.keyCode&&e.char)return!1;var n=gn[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),ul(n,e,t))}function io(e){return"string"==typeof e?rn[e]:e}function qn(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var a=t(n[i]);r.length&&Re(a.from,Ke(r).to)<=0;){var f=r.pop();if(Re(f.from,a.from)<0){a.from=f.from;break}}r.push(a)}Sr(e,function(){for(var h=r.length-1;h>=0;h--)Yn(e.doc,"",r[h].from,r[h].to,"+delete");zn(e)})}function Uo(e,t,n){var r=zr(e.text,t+n,n);return r<0||r>e.text.length?null:r}function zo(e,t,n){var r=Uo(e,t.ch,n);return null==r?null:new de(t.line,r,n<0?"after":"before")}function Ko(e,t,n,r,i){if(e){"rtl"==t.doc.direction&&(i=-i);var a=lt(n,t.doc.direction);if(a){var m,f=i<0?Ke(a):a[0],p=i<0==(1==f.level)?"after":"before";if(f.level>0||"rtl"==t.doc.direction){var A=_n(t,n),I=jr(t,A,m=i<0?n.text.length-1:0).top;m=Er(function(X){return jr(t,A,X).top==I},i<0==(1==f.level)?f.from:f.to-1,m),"before"==p&&(m=Uo(n,m,1))}else m=i<0?f.to:f.from;return new de(r,m,p)}}return new de(r,i<0?n.text.length:0,i<0?"before":"after")}rn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},rn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},rn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},rn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},rn.default=L?rn.macDefault:rn.pcDefault;var Mi={selectAll:Ja,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),ne)},killLine:function(e){return qn(e,function(t){if(t.empty()){var n=be(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:de(t.head.line+1,0)}:{from:t.head,to:de(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return qn(e,function(t){return{from:de(t.from().line,0),to:Le(e.doc,de(t.to().line+1,0))}})},delLineLeft:function(e){return qn(e,function(t){return{from:de(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return qn(e,function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}})},delWrappedLineRight:function(e){return qn(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(de(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(de(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return cl(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return hl(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function(e,t){var n=be(e.doc,t),r=function(e){for(var t;t=Pn(e);)e=t.find(1,!0).line;return e}(n);return r!=n&&(t=Be(r)),Ko(!0,e,n,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},Oe)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},Oe)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?hl(e,t.head):r},Oe)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var a=n[i].from(),f=F(e.getLine(a.line),a.ch,r);t.push(Ye(r-f%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Sr(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,a=be(e.doc,i.line).text;if(a)if(i.ch==a.length&&(i=new de(i.line,i.ch-1)),i.ch>0)i=new de(i.line,i.ch+1),e.replaceRange(a.charAt(i.ch-1)+a.charAt(i.ch-2),de(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var f=be(e.doc,i.line-1).text;f&&(i=new de(i.line,1),e.replaceRange(a.charAt(0)+e.doc.lineSeparator()+f.charAt(f.length-1),de(i.line-1,f.length-1),i,"+transpose"))}n.push(new ft(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){return Sr(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);zn(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function cl(e,t){var n=be(e.doc,t),r=Tr(n);return r!=n&&(t=Be(r)),Ko(!0,e,r,t,1)}function hl(e,t){var n=cl(e,t.line),r=be(e.doc,n.line),i=lt(r,e.doc.direction);if(!i||0==i[0].level){var a=Math.max(n.ch,r.text.search(/\S/));return de(n.line,t.line==n.line&&t.ch<=a&&t.ch?0:a,n.sticky)}return n}function oo(e,t,n){if("string"==typeof t&&!(t=Mi[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=K}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}var Bs=new b;function Ei(e,t,n,r){var i=e.state.keySeq;if(i){if(sl(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Bs.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),dl(e,i+" "+t,n,r))return!0}return dl(e,t,n,r)}function dl(e,t,n,r){var i=function(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Qn(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Qn(t,e.options.extraKeys,n,e)||Qn(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&at(e,"keyHandled",e,t,n),("handled"==i||"multi"==i)&&(ht(n),Lo(e)),!!i}function pl(e,t){var n=fl(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?Ei(e,"Shift-"+n,t,function(r){return oo(e,r,!0)})||Ei(e,n,t,function(r){if("string"==typeof r?/^go[A-Z]/.test(r):r.motion)return oo(e,r)}):Ei(e,n,t,function(r){return oo(e,r)}))}var Zo=null;function vl(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=ue(),qe(t,e)))){s&&M<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=pl(t,e);q&&(Zo=r?n:null,!r&&88==n&&!Xr&&(L?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),k&&!L&&!r&&46==n&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==n&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&function(e){var t=e.display.lineDiv;function n(r){(18==r.keyCode||!r.altKey)&&(_(t,"CodeMirror-crosshair"),Ut(document,"keyup",n),Ut(document,"mouseover",n))}he(t,"CodeMirror-crosshair"),ze(document,"keyup",n),ze(document,"mouseover",n)}(t)}}function gl(e){16==e.keyCode&&(this.doc.sel.shift=!1),qe(this,e)}function ml(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||tn(t.display,e)||qe(t,e)||e.ctrlKey&&!e.altKey||L&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(q&&n==Zo)return Zo=null,void ht(e);if(!q||e.which&&!(e.which<10)||!pl(t,e)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(e,t,n){return Ei(e,"'"+n+"'",t,function(r){return oo(e,r,!0)})}(t,e,i)||t.display.input.onKeyPress(e))}}}var Di,Fi,Go=function(e,t,n){this.time=e,this.pos=t,this.button=n};function yl(e){var t=this,n=t.display;if(!(qe(t,e)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=e.shiftKey,tn(n,e))return void(N||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100)));if(!jo(t,e)){var r=wn(t,e),i=on(e),a=r?function(e,t){var n=+new Date;return Fi&&Fi.compare(n,e,t)?(Di=Fi=null,"triple"):Di&&Di.compare(n,e,t)?(Fi=new Go(n,e,t),Di=null,"double"):(Di=new Go(n,e,t),Fi=null,"single")}(r,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),(!r||!function(e,t,n,r,i){var a="Click";return"double"==r?a="Double"+a:"triple"==r&&(a="Triple"+a),Ei(e,ul(a=(1==t?"Left":2==t?"Middle":"Right")+a,i),i,function(f){if("string"==typeof f&&(f=Mi[f]),!f)return!1;var h=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),h=f(e,n)!=K}finally{e.state.suppressEdits=!1}return h})}(t,i,r,a,e))&&(1==i?r?function(e,t,n,r){s?setTimeout(Ue(xa,e),0):e.curOp.focus=ue();var f,i=function(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};return null==i.unit&&(i.unit=(W?n.shiftKey&&n.metaKey:n.altKey)?"rectangle":"single"==t?"char":"double"==t?"word":"line"),(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=L?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(L?n.altKey:n.ctrlKey)),i}(e,n,r),a=e.doc.sel;e.options.dragDrop&&Br&&!e.isReadOnly()&&"single"==n&&(f=a.contains(t))>-1&&(Re((f=a.ranges[f]).from(),t)<0||t.xRel>0)&&(Re(f.to(),t)>0||t.xRel<0)?function(e,t,n,r){var i=e.display,a=!1,f=Yt(e,function(m){N&&(i.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:To(e)),Ut(i.wrapper.ownerDocument,"mouseup",f),Ut(i.wrapper.ownerDocument,"mousemove",h),Ut(i.scroller,"dragstart",p),Ut(i.scroller,"drop",f),a||(ht(m),r.addNew||$i(e.doc,n,null,null,r.extend),N&&!z||s&&9==M?setTimeout(function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()},20):i.input.focus())}),h=function(m){a=a||Math.abs(t.clientX-m.clientX)+Math.abs(t.clientY-m.clientY)>=10},p=function(){return a=!0};N&&(i.scroller.draggable=!0),e.state.draggingText=f,f.copy=!r.moveOnDrag,ze(i.wrapper.ownerDocument,"mouseup",f),ze(i.wrapper.ownerDocument,"mousemove",h),ze(i.scroller,"dragstart",p),ze(i.scroller,"drop",f),e.state.delayingBlurEvent=!0,setTimeout(function(){return i.input.focus()},20),i.scroller.dragDrop&&i.scroller.dragDrop()}(e,r,t,i):function(e,t,n,r){s&&To(e);var i=e.display,a=e.doc;ht(t);var f,h,p=a.sel,m=p.ranges;if(r.addNew&&!r.extend?(h=a.sel.contains(n),f=h>-1?m[h]:new ft(n,n)):(f=a.sel.primary(),h=a.sel.primIndex),"rectangle"==r.unit)r.addNew||(f=new ft(n,n)),n=wn(e,t,!0,!0),h=-1;else{var A=xl(e,n,r.unit);f=r.extend?Ho(f,A.anchor,A.head,r.extend):A}r.addNew?-1==h?(h=m.length,lr(a,Wr(e,m.concat([f]),h),{scroll:!1,origin:"*mouse"})):m.length>1&&m[h].empty()&&"char"==r.unit&&!r.extend?(lr(a,Wr(e,m.slice(0,h).concat(m.slice(h+1)),0),{scroll:!1,origin:"*mouse"}),p=a.sel):Wo(a,h,f,ye):(h=0,lr(a,new Mr([f],0),ye),p=a.sel);var I=n;function X(Ne){if(0!=Re(I,Ne))if(I=Ne,"rectangle"==r.unit){for(var He=[],je=e.options.tabSize,Ze=F(be(a,n.line).text,n.ch,je),rt=F(be(a,Ne.line).text,Ne.ch,je),bt=Math.min(Ze,rt),Qt=Math.max(Ze,rt),Mt=Math.min(n.line,Ne.line),wr=Math.min(e.lastLine(),Math.max(n.line,Ne.line));Mt<=wr;Mt++){var xr=be(a,Mt).text,Rt=$e(xr,bt,je);bt==Qt?He.push(new ft(de(Mt,Rt),de(Mt,Rt))):xr.length>Rt&&He.push(new ft(de(Mt,Rt),de(Mt,$e(xr,Qt,je))))}He.length||He.push(new ft(n,n)),lr(a,Wr(e,p.ranges.slice(0,h).concat(He),h),{origin:"*mouse",scroll:!1}),e.scrollIntoView(Ne)}else{var Pt,kr=f,$t=xl(e,Ne,r.unit),Ht=kr.anchor;Re($t.anchor,Ht)>0?(Pt=$t.head,Ht=ie(kr.from(),$t.anchor)):(Pt=$t.anchor,Ht=D(kr.to(),$t.head));var Ot=p.ranges.slice(0);Ot[h]=function(e,t){var n=t.anchor,r=t.head,i=be(e.doc,n.line);if(0==Re(n,r)&&n.sticky==r.sticky)return t;var a=lt(i);if(!a)return t;var f=Dr(a,n.ch,n.sticky),h=a[f];if(h.from!=n.ch&&h.to!=n.ch)return t;var m,p=f+(h.from==n.ch==(1!=h.level)?0:1);if(0==p||p==a.length)return t;if(r.line!=n.line)m=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var A=Dr(a,r.ch,r.sticky),I=A-f||(r.ch-n.ch)*(1==h.level?-1:1);m=A==p-1||A==p?I<0:I>0}var X=a[p+(m?-1:0)],Y=m==(1==X.level),ce=Y?X.from:X.to,we=Y?"after":"before";return n.ch==ce&&n.sticky==we?t:new ft(new de(n.line,ce,we),r)}(e,new ft(Le(a,Ht),Pt)),lr(a,Wr(e,Ot,h),ye)}}var Y=i.wrapper.getBoundingClientRect(),ce=0;function we(Ne){var He=++ce,je=wn(e,Ne,!0,"rectangle"==r.unit);if(je)if(0!=Re(je,I)){e.curOp.focus=ue(),X(je);var Ze=Yi(i,a);(je.line>=Ze.to||je.line<Ze.from)&&setTimeout(Yt(e,function(){ce==He&&we(Ne)}),150)}else{var rt=Ne.clientY<Y.top?-20:Ne.clientY>Y.bottom?20:0;rt&&setTimeout(Yt(e,function(){ce==He&&(i.scroller.scrollTop+=rt,we(Ne))}),50)}}function Ae(Ne){e.state.selectingText=!1,ce=1/0,Ne&&(ht(Ne),i.input.focus()),Ut(i.wrapper.ownerDocument,"mousemove",Ie),Ut(i.wrapper.ownerDocument,"mouseup",_e),a.history.lastSelOrigin=null}var Ie=Yt(e,function(Ne){0!==Ne.buttons&&on(Ne)?we(Ne):Ae(Ne)}),_e=Yt(e,Ae);e.state.selectingText=_e,ze(i.wrapper.ownerDocument,"mousemove",Ie),ze(i.wrapper.ownerDocument,"mouseup",_e)}(e,r,t,i)}(t,r,a,e):rr(e)==n.scroller&&ht(e):2==i?(r&&$i(t.doc,r),setTimeout(function(){return n.input.focus()},20)):3==i&&(R?t.display.input.onContextMenu(e):To(t)))}}}function xl(e,t,n){if("char"==n)return new ft(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new ft(de(t.line,0),Le(e.doc,de(t.line+1,0)));var r=n(e,t);return new ft(r.from,r.to)}function kl(e,t,n,r){var i,a;if(t.touches)i=t.touches[0].clientX,a=t.touches[0].clientY;else try{i=t.clientX,a=t.clientY}catch(X){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&ht(t);var f=e.display,h=f.lineDiv.getBoundingClientRect();if(a>h.bottom||!nt(e,n))return Ct(t);a-=h.top-f.viewOffset;for(var p=0;p<e.display.gutterSpecs.length;++p){var m=f.gutters.childNodes[p];if(m&&m.getBoundingClientRect().right>=i)return mt(e,n,e,et(e.doc,a),e.display.gutterSpecs[p].className,t),Ct(t)}}function jo(e,t){return kl(e,t,"gutterClick",!0)}function bl(e,t){tn(e.display,t)||function(e,t){return!!nt(e,"gutterContextMenu")&&kl(e,t,"gutterContextMenu",!1)}(e,t)||qe(e,t,"contextmenu")||R||e.display.input.onContextMenu(t)}function Cl(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ci(e)}Go.prototype.compare=function(e,t,n){return this.time+400>e&&0==Re(t,this.pos)&&n==this.button};var Xn={toString:function(){return"CodeMirror.Init"}},Sl={},ao={};function Js(e,t,n){if(!t!=!(n&&n!=Xn)){var i=e.display.dragFunctions,a=t?ze:Ut;a(e.display.scroller,"dragstart",i.start),a(e.display.scroller,"dragenter",i.enter),a(e.display.scroller,"dragover",i.over),a(e.display.scroller,"dragleave",i.leave),a(e.display.scroller,"drop",i.drop)}}function Qs(e){e.options.lineWrapping?(he(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(_(e.display.wrapper,"CodeMirror-wrap"),O(e)),wo(e),mr(e),ci(e),setTimeout(function(){return Kn(e)},100)}function Lt(e,t){var n=this;if(!(this instanceof Lt))return new Lt(e,t);this.options=t=t?Ge(t):{},Ge(Sl,t,!1);var r=t.value;"string"==typeof r?r=new yr(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var i=new Lt.inputStyles[t.inputStyle](this),a=this.display=new ss(e,r,i,t);for(var f in a.wrapper.CodeMirror=this,Cl(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),La(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new b,keySeq:null,specialChars:null},t.autofocus&&!re&&a.input.focus(),s&&M<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function(e){var t=e.display;ze(t.scroller,"mousedown",Yt(e,yl)),ze(t.scroller,"dblclick",s&&M<11?Yt(e,function(p){if(!qe(e,p)){var m=wn(e,p);if(m&&!jo(e,p)&&!tn(e.display,p)){ht(p);var A=e.findWordAt(m);$i(e.doc,A.anchor,A.head)}}}):function(p){return qe(e,p)||ht(p)}),ze(t.scroller,"contextmenu",function(p){return bl(e,p)}),ze(t.input.getField(),"contextmenu",function(p){t.scroller.contains(p.target)||bl(e,p)});var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),(r=t.activeTouch).end=+new Date)}function a(p){if(1!=p.touches.length)return!1;var m=p.touches[0];return m.radiusX<=1&&m.radiusY<=1}function f(p,m){if(null==m.left)return!0;var A=m.left-p.left,I=m.top-p.top;return A*A+I*I>400}ze(t.scroller,"touchstart",function(p){if(!qe(e,p)&&!a(p)&&!jo(e,p)){t.input.ensurePolled(),clearTimeout(n);var m=+new Date;t.activeTouch={start:m,moved:!1,prev:m-r.end<=300?r:null},1==p.touches.length&&(t.activeTouch.left=p.touches[0].pageX,t.activeTouch.top=p.touches[0].pageY)}}),ze(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),ze(t.scroller,"touchend",function(p){var m=t.activeTouch;if(m&&!tn(t,p)&&null!=m.left&&!m.moved&&new Date-m.start<300){var I,A=e.coordsChar(t.activeTouch,"page");I=!m.prev||f(m,m.prev)?new ft(A,A):!m.prev.prev||f(m,m.prev.prev)?e.findWordAt(A):new ft(de(A.line,0),Le(e.doc,de(A.line+1,0))),e.setSelection(I.anchor,I.head),e.focus(),ht(p)}i()}),ze(t.scroller,"touchcancel",i),ze(t.scroller,"scroll",function(){t.scroller.clientHeight&&(pi(e,t.scroller.scrollTop),Tn(e,t.scroller.scrollLeft,!0),mt(e,"scroll",e))}),ze(t.scroller,"mousewheel",function(p){return Fa(e,p)}),ze(t.scroller,"DOMMouseScroll",function(p){return Fa(e,p)}),ze(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(p){qe(e,p)||vr(p)},over:function(p){qe(e,p)||(function(e,t){var n=wn(e,t);if(n){var r=document.createDocumentFragment();ya(e,n,r),e.display.dragCursor||(e.display.dragCursor=$("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),Z(e.display.dragCursor,r)}}(e,p),vr(p))},start:function(p){return function(e,t){if(s&&(!e.state.draggingText||+new Date-il<100))vr(t);else if(!qe(e,t)&&!tn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!z)){var n=$("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",q&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),q&&n.parentNode.removeChild(n)}}(e,p)},drop:Yt(e,ws),leave:function(p){qe(e,p)||ol(e)}};var h=t.input.getField();ze(h,"keyup",function(p){return gl.call(e,p)}),ze(h,"keydown",Yt(e,vl)),ze(h,"keypress",Yt(e,ml)),ze(h,"focus",function(p){return Ao(e,p)}),ze(h,"blur",function(p){return Un(e,p)})}(this),As(),Mn(this),this.curOp.forceUpdate=!0,Ba(this,r),t.autofocus&&!re||this.hasFocus()?setTimeout(function(){n.hasFocus()&&!n.state.focused&&Ao(n)},20):Un(this),ao)ao.hasOwnProperty(f)&&ao[f](this,t[f],Xn);Ma(this),t.finishInit&&t.finishInit(this);for(var h=0;h<Yo.length;++h)Yo[h](this);En(this),N&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}Lt.defaults=Sl,Lt.optionHandlers=ao;var Yo=[];function Oi(e,t,n,r){var a,i=e.doc;null==n&&(n="add"),"smart"==n&&(i.mode.indent?a=ut(e,t).state:n="prev");var f=e.options.tabSize,h=be(i,t),p=F(h.text,null,f);h.stateAfter&&(h.stateAfter=null);var A,m=h.text.match(/^\s*/)[0];if(r||/\S/.test(h.text)){if("smart"==n&&((A=i.mode.indent(a,h.text.slice(m.length),h.text))==K||A>150)){if(!r)return;n="prev"}}else A=0,n="not";"prev"==n?A=t>i.first?F(be(i,t-1).text,null,f):0:"add"==n?A=p+e.options.indentUnit:"subtract"==n?A=p-e.options.indentUnit:"number"==typeof n&&(A=p+n),A=Math.max(0,A);var I="",X=0;if(e.options.indentWithTabs)for(var Y=Math.floor(A/f);Y;--Y)X+=f,I+="\t";if(X<A&&(I+=Ye(A-X)),I!=m)return Yn(i,I,de(t,0),de(t,m.length),"+input"),h.stateAfter=null,!0;for(var ce=0;ce<i.sel.ranges.length;ce++){var we=i.sel.ranges[ce];if(we.head.line==t&&we.head.ch<m.length){var Ae=de(t,m.length);Wo(i,ce,new ft(Ae,Ae));break}}}Lt.defineInitHook=function(e){return Yo.push(e)};var Ur=null;function lo(e){Ur=e}function Jo(e,t,n,r,i){var a=e.doc;e.display.shift=!1,r||(r=a.sel);var f=+new Date-200,h="paste"==i||e.state.pasteIncoming>f,p=qr(t),m=null;if(h&&r.ranges.length>1)if(Ur&&Ur.text.join("\n")==t){if(r.ranges.length%Ur.text.length==0){m=[];for(var A=0;A<Ur.text.length;A++)m.push(a.splitLines(Ur.text[A]))}}else p.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(m=ur(p,function(Ie){return[Ie]}));for(var I=e.curOp.updateInput,X=r.ranges.length-1;X>=0;X--){var Y=r.ranges[X],ce=Y.from(),we=Y.to();Y.empty()&&(n&&n>0?ce=de(ce.line,ce.ch-n):e.state.overwrite&&!h?we=de(we.line,Math.min(be(a,we.line).text.length,we.ch+Ke(p).length)):h&&Ur&&Ur.lineWise&&Ur.text.join("\n")==p.join("\n")&&(ce=we=de(ce.line,0)));var Ae={from:ce,to:we,text:m?m[X%m.length]:p,origin:i||(h?"paste":e.state.cutIncoming>f?"cut":"+input")};jn(e.doc,Ae),at(e,"inputRead",e,Ae)}t&&!h&&Ll(e,t),zn(e),e.curOp.updateInput<2&&(e.curOp.updateInput=I),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function wl(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&Sr(t,function(){return Jo(t,n,0,null,"paste")}),!0}function Ll(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var a=e.getModeAt(i.head),f=!1;if(a.electricChars){for(var h=0;h<a.electricChars.length;h++)if(t.indexOf(a.electricChars.charAt(h))>-1){f=Oi(e,i.head.line,"smart");break}}else a.electricInput&&a.electricInput.test(be(e.doc,i.head.line).text.slice(0,i.head.ch))&&(f=Oi(e,i.head.line,"smart"));f&&at(e,"electricInput",e,i.head.line)}}}function Tl(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,a={anchor:de(i,0),head:de(i+1,0)};n.push(a),t.push(e.getRange(a.anchor,a.head))}return{text:t,ranges:n}}function Al(e,t,n,r){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",r?"":"off"),e.setAttribute("spellcheck",!!t)}function Ml(){var e=$("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=$("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return N?e.style.width="1000px":e.setAttribute("wrap","off"),Fe&&(e.style.border="1px solid black"),Al(e),t}function Qo(e,t,n,r,i){var a=t,f=n,h=be(e,t.line),p=i&&"rtl"==e.direction?-n:n;function A(_e){var Ne;if("codepoint"==r){var He=h.text.charCodeAt(t.ch+(n>0?0:-1));Ne=isNaN(He)?null:new de(t.line,Math.max(0,Math.min(h.text.length,t.ch+n*((n>0?He>=55296&&He<56320:He>=56320&&He<57343)?2:1))),-n)}else Ne=i?function(e,t,n,r){var i=lt(t,e.doc.direction);if(!i)return zo(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var a=Dr(i,n.ch,n.sticky),f=i[a];if("ltr"==e.doc.direction&&f.level%2==0&&(r>0?f.to>n.ch:f.from<n.ch))return zo(t,n,r);var p,h=function(Ie,_e){return Uo(t,Ie instanceof de?Ie.ch:Ie,_e)},m=function(Ie){return e.options.lineWrapping?(p=p||_n(e,t),pa(e,t,p,Ie)):{begin:0,end:t.text.length}},A=m("before"==n.sticky?h(n,-1):n.ch);if("rtl"==e.doc.direction||1==f.level){var I=1==f.level==r<0,X=h(n,I?1:-1);if(null!=X&&(I?X<=f.to&&X<=A.end:X>=f.from&&X>=A.begin))return new de(n.line,X,I?"before":"after")}var ce=function(Ie,_e,Ne){for(;Ie>=0&&Ie<i.length;Ie+=_e){var je=i[Ie],Ze=_e>0==(1!=je.level),rt=Ze?Ne.begin:h(Ne.end,-1);if(je.from<=rt&&rt<je.to||(rt=Ze?je.from:h(je.to,-1),Ne.begin<=rt&&rt<Ne.end))return bt=rt,Ze?new de(n.line,h(bt,1),"before"):new de(n.line,bt,"after")}var bt},we=ce(a+r,r,A);if(we)return we;var Ae=r>0?A.end:h(A.begin,-1);return null==Ae||r>0&&Ae==t.text.length||!(we=ce(r>0?0:i.length-1,r,m(Ae)))?null:we}(e.cm,h,t,n):zo(h,t,n);if(null==Ne){if(_e||!function(){var _e=t.line+p;return!(_e<e.first||_e>=e.first+e.size)&&(t=new de(_e,t.ch,t.sticky),h=be(e,_e))}())return!1;t=Ko(i,e.cm,h,t.line,p)}else t=Ne;return!0}if("char"==r||"codepoint"==r)A();else if("column"==r)A(!0);else if("word"==r||"group"==r)for(var I=null,X="group"==r,Y=e.cm&&e.cm.getHelper(t,"wordChars"),ce=!0;!(n<0)||A(!ce);ce=!1){var we=h.text.charAt(t.ch)||"\n",Ae=Xt(we,Y)?"w":X&&"\n"==we?"n":!X||/\s/.test(we)?null:"p";if(X&&!ce&&!Ae&&(Ae="s"),I&&I!=Ae){n<0&&(n=1,A(),t.sticky="after");break}if(Ae&&(I=Ae),n>0&&!A(!ce))break}var Ie=to(e,t,a,f,!0);return dt(a,Ie)&&(Ie.hitSide=!0),Ie}function El(e,t,n,r){var f,m,i=e.doc,a=t.left;if("page"==r){var h=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),p=Math.max(h-.5*Hn(e.display),3);f=(n>0?t.bottom:t.top)+n*p}else"line"==r&&(f=n>0?t.bottom+3:t.top-3);for(;(m=ko(e,a,f)).outside;){if(n<0?f<=0:f>=i.height){m.hitSide=!0;break}f+=5*n}return m}var vt=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new b,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Dl(e,t){var n=mo(e,t.line);if(!n||n.hidden)return null;var r=be(e.doc,t.line),i=na(n,r,t.line),a=lt(r,e.doc.direction),f="left";a&&(f=Dr(a,t.ch)%2?"right":"left");var p=aa(i.map,t.ch,f);return p.offset="right"==p.collapse?p.end:p.start,p}function Vn(e,t){return t&&(e.bad=!0),e}function so(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return Vn(e.clipPos(de(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var a=e.display.view[i];if(a.node==r)return eu(a,t,n)}}function eu(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!x(r,t))return Vn(de(Be(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var a=e.rest?Ke(e.rest):e.line;return Vn(de(Be(a),a.text.length),i)}var f=3==t.nodeType?t:null,h=t;for(!f&&1==t.childNodes.length&&3==t.firstChild.nodeType&&(f=t.firstChild,n&&(n=f.nodeValue.length));h.parentNode!=r;)h=h.parentNode;var p=e.measure,m=p.maps;function A(Ae,Ie,_e){for(var Ne=-1;Ne<(m?m.length:0);Ne++)for(var He=Ne<0?p.map:m[Ne],je=0;je<He.length;je+=3){var Ze=He[je+2];if(Ze==Ae||Ze==Ie){var rt=Be(Ne<0?e.line:e.rest[Ne]),bt=He[je]+_e;return(_e<0||Ze!=Ae)&&(bt=He[je+(_e?1:0)]),de(rt,bt)}}}var I=A(f,h,n);if(I)return Vn(I,i);for(var X=h.nextSibling,Y=f?f.nodeValue.length-n:0;X;X=X.nextSibling){if(I=A(X,X.firstChild,0))return Vn(de(I.line,I.ch-Y),i);Y+=X.textContent.length}for(var ce=h.previousSibling,we=n;ce;ce=ce.previousSibling){if(I=A(ce,ce.firstChild,-1))return Vn(de(I.line,I.ch+we),i);we+=ce.textContent.length}}vt.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;function a(h){for(var p=h.target;p;p=p.parentNode){if(p==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(p.className))break}return!1}function f(h){if(a(h)&&!qe(r,h)){if(r.somethingSelected())lo({lineWise:!1,text:r.getSelections()}),"cut"==h.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var p=Tl(r);lo({lineWise:!0,text:p.text}),"cut"==h.type&&r.operation(function(){r.setSelections(p.ranges,0,ne),r.replaceSelection("",null,"cut")})}if(h.clipboardData){h.clipboardData.clearData();var m=Ur.text.join("\n");if(h.clipboardData.setData("Text",m),h.clipboardData.getData("Text")==m)return void h.preventDefault()}var A=Ml(),I=A.firstChild;r.display.lineSpace.insertBefore(A,r.display.lineSpace.firstChild),I.value=Ur.text.join("\n");var X=ue();We(I),setTimeout(function(){r.display.lineSpace.removeChild(A),X.focus(),X==i&&n.showPrimarySelection()},50)}}i.contentEditable=!0,Al(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize),ze(i,"paste",function(h){!a(h)||qe(r,h)||wl(h,r)||M<=11&&setTimeout(Yt(r,function(){return t.updateFromDOM()}),20)}),ze(i,"compositionstart",function(h){t.composing={data:h.data,done:!1}}),ze(i,"compositionupdate",function(h){t.composing||(t.composing={data:h.data,done:!1})}),ze(i,"compositionend",function(h){t.composing&&(h.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),ze(i,"touchstart",function(){return n.forceCompositionEnd()}),ze(i,"input",function(){t.composing||t.readFromDOMSoon()}),ze(i,"copy",f),ze(i,"cut",f)},vt.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},vt.prototype.prepareSelection=function(){var e=ma(this.cm,!1);return e.focus=ue()==this.div,e},vt.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},vt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},vt.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),r=n.from(),i=n.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||i.line<t.display.viewFrom)e.removeAllRanges();else{var a=so(t,e.anchorNode,e.anchorOffset),f=so(t,e.focusNode,e.focusOffset);if(!a||a.bad||!f||f.bad||0!=Re(ie(a,f),r)||0!=Re(D(a,f),i)){var h=t.display.view,p=r.line>=t.display.viewFrom&&Dl(t,r)||{node:h[0].measure.map[2],offset:0},m=i.line<t.display.viewTo&&Dl(t,i);if(!m){var A=h[h.length-1].measure,I=A.maps?A.maps[A.maps.length-1]:A.map;m={node:I[I.length-1],offset:I[I.length-2]-I[I.length-3]}}if(!p||!m)return void e.removeAllRanges();var Y,X=e.rangeCount&&e.getRangeAt(0);try{Y=ve(p.node,p.offset,m.offset,m.node)}catch(ce){}Y&&(!k&&t.state.focused?(e.collapse(p.node,p.offset),Y.collapsed||(e.removeAllRanges(),e.addRange(Y))):(e.removeAllRanges(),e.addRange(Y)),X&&null==e.anchorNode?e.addRange(X):k&&this.startGracePeriod()),this.rememberSelection()}}},vt.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},vt.prototype.showMultipleSelections=function(e){Z(this.cm.display.cursorDiv,e.cursors),Z(this.cm.display.selectionDiv,e.selection)},vt.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},vt.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return x(this.div,t)},vt.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||ue()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},vt.prototype.blur=function(){this.div.blur()},vt.prototype.getField=function(){return this.div},vt.prototype.supportsTouch=function(){return!0},vt.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):Sr(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function n(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,n))})},vt.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},vt.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(ee&&Q&&this.cm.display.gutterSpecs.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=so(t,e.anchorNode,e.anchorOffset),r=so(t,e.focusNode,e.focusOffset);n&&r&&Sr(t,function(){lr(t.doc,hn(n,r),ne),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},vt.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a,f,h,e=this.cm,t=e.display,n=e.doc.sel.primary(),r=n.from(),i=n.to();if(0==r.ch&&r.line>e.firstLine()&&(r=de(r.line-1,be(e.doc,r.line-1).length)),i.ch==be(e.doc,i.line).text.length&&i.line<e.lastLine()&&(i=de(i.line+1,0)),r.line<t.viewFrom||i.line>t.viewTo-1)return!1;r.line==t.viewFrom||0==(a=Ln(e,r.line))?(f=Be(t.view[0].line),h=t.view[0].node):(f=Be(t.view[a].line),h=t.view[a-1].node.nextSibling);var m,A,p=Ln(e,i.line);if(p==t.view.length-1?(m=t.viewTo-1,A=t.lineDiv.lastChild):(m=Be(t.view[p+1].line)-1,A=t.view[p+1].node.previousSibling),!h)return!1;for(var I=e.doc.splitLines(function(e,t,n,r,i){var a="",f=!1,h=e.doc.lineSeparator(),p=!1;function A(){f&&(a+=h,p&&(a+=h),f=p=!1)}function I(Y){Y&&(A(),a+=Y)}function X(Y){if(1==Y.nodeType){var ce=Y.getAttribute("cm-text");if(ce)return void I(ce);var Ae,we=Y.getAttribute("cm-marker");if(we){var Ie=e.findMarks(de(r,0),de(i+1,0),function(Y){return function(ce){return ce.id==Y}}(+we));return void(Ie.length&&(Ae=Ie[0].find(0))&&I(P(e.doc,Ae.from,Ae.to).join(h)))}if("false"==Y.getAttribute("contenteditable"))return;var _e=/^(pre|div|p|li|table|br)$/i.test(Y.nodeName);if(!/^br$/i.test(Y.nodeName)&&0==Y.textContent.length)return;_e&&A();for(var Ne=0;Ne<Y.childNodes.length;Ne++)X(Y.childNodes[Ne]);/^(pre|p)$/i.test(Y.nodeName)&&(p=!0),_e&&(f=!0)}else 3==Y.nodeType&&I(Y.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;X(t),t!=n;)t=t.nextSibling,p=!1;return a}(e,h,A,f,m)),X=P(e.doc,de(f,0),de(m,be(e.doc,m).text.length));I.length>1&&X.length>1;)if(Ke(I)==Ke(X))I.pop(),X.pop(),m--;else{if(I[0]!=X[0])break;I.shift(),X.shift(),f++}for(var Y=0,ce=0,we=I[0],Ae=X[0],Ie=Math.min(we.length,Ae.length);Y<Ie&&we.charCodeAt(Y)==Ae.charCodeAt(Y);)++Y;for(var _e=Ke(I),Ne=Ke(X),He=Math.min(_e.length-(1==I.length?Y:0),Ne.length-(1==X.length?Y:0));ce<He&&_e.charCodeAt(_e.length-ce-1)==Ne.charCodeAt(Ne.length-ce-1);)++ce;if(1==I.length&&1==X.length&&f==r.line)for(;Y&&Y>r.ch&&_e.charCodeAt(_e.length-ce-1)==Ne.charCodeAt(Ne.length-ce-1);)Y--,ce++;I[I.length-1]=_e.slice(0,_e.length-ce).replace(/^\u200b+/,""),I[0]=I[0].slice(Y).replace(/\u200b+$/,"");var je=de(f,Y),Ze=de(m,X.length?Ke(X).length-ce:0);return I.length>1||I[0]||Re(je,Ze)?(Yn(e.doc,I,je,Ze,"+input"),!0):void 0},vt.prototype.ensurePolled=function(){this.forceCompositionEnd()},vt.prototype.reset=function(){this.forceCompositionEnd()},vt.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},vt.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},vt.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&Sr(this.cm,function(){return mr(e.cm)})},vt.prototype.setUneditable=function(e){e.contentEditable="false"},vt.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Yt(this.cm,Jo)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},vt.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},vt.prototype.onContextMenu=function(){},vt.prototype.resetPosition=function(){},vt.prototype.needsContentAttribute=!0;var Bt=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new b,this.hasSelection=!1,this.composing=null};Bt.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var i=this.textarea;function a(f){if(!qe(r,f)){if(r.somethingSelected())lo({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var h=Tl(r);lo({lineWise:!0,text:h.text}),"cut"==f.type?r.setSelections(h.ranges,null,ne):(n.prevInput="",i.value=h.text.join("\n"),We(i))}"cut"==f.type&&(r.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),Fe&&(i.style.width="0px"),ze(i,"input",function(){s&&M>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),ze(i,"paste",function(f){qe(r,f)||wl(f,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())}),ze(i,"cut",a),ze(i,"copy",a),ze(e.scroller,"paste",function(f){if(!tn(e,f)&&!qe(r,f)){if(!i.dispatchEvent)return r.state.pasteIncoming=+new Date,void n.focus();var h=new Event("paste");h.clipboardData=f.clipboardData,i.dispatchEvent(h)}}),ze(e.lineSpace,"selectstart",function(f){tn(e,f)||ht(f)}),ze(i,"compositionstart",function(){var f=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:f,range:r.markText(f,r.getCursor("to"),{className:"CodeMirror-composing"})}}),ze(i,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},Bt.prototype.createField=function(e){this.wrapper=Ml(),this.textarea=this.wrapper.firstChild},Bt.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Bt.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=ma(e);if(e.options.moveInputWithCursor){var i=Hr(e,n.sel.primary().head,"div"),a=t.wrapper.getBoundingClientRect(),f=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+f.top-a.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+f.left-a.left))}return r},Bt.prototype.showSelection=function(e){var n=this.cm.display;Z(n.cursorDiv,e.cursors),Z(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Bt.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&We(this.textarea),s&&M>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",s&&M>=9&&(this.hasSelection=null))}},Bt.prototype.getField=function(){return this.textarea},Bt.prototype.supportsTouch=function(){return!1},Bt.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!re||ue()!=this.textarea))try{this.textarea.focus()}catch(e){}},Bt.prototype.blur=function(){this.textarea.blur()},Bt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Bt.prototype.receivedFocus=function(){this.slowPoll()},Bt.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Bt.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))})},Bt.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||Kt(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(s&&M>=9&&this.hasSelection===i||L&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var a=i.charCodeAt(0);if(8203==a&&!r&&(r="\u200b"),8666==a)return this.reset(),this.cm.execCommand("undo")}for(var f=0,h=Math.min(r.length,i.length);f<h&&r.charCodeAt(f)==i.charCodeAt(f);)++f;return Sr(t,function(){Jo(t,i.slice(f),r.length-f,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Bt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Bt.prototype.onKeyPress=function(){s&&M>=9&&(this.hasSelection=null),this.fastPoll()},Bt.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var a=wn(n,e),f=r.scroller.scrollTop;if(a&&!q){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(a)&&Yt(n,lr)(n.doc,hn(a),ne);var I,p=i.style.cssText,m=t.wrapper.style.cssText,A=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-A.top-5)+"px; left: "+(e.clientX-A.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",N&&(I=window.scrollY),r.input.focus(),N&&window.scrollTo(null,I),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=Y,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),s&&M>=9&&X(),R){vr(e);var ce=function(){Ut(window,"mouseup",ce),setTimeout(Y,20)};ze(window,"mouseup",ce)}else setTimeout(Y,50)}function X(){if(null!=i.selectionStart){var we=n.somethingSelected(),Ae="\u200b"+(we?i.value:"");i.value="\u21da",i.value=Ae,t.prevInput=we?"":"\u200b",i.selectionStart=1,i.selectionEnd=Ae.length,r.selForContextMenu=n.doc.sel}}function Y(){if(t.contextMenuPending==Y&&(t.contextMenuPending=!1,t.wrapper.style.cssText=m,i.style.cssText=p,s&&M<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=f),null!=i.selectionStart)){(!s||s&&M<9)&&X();var we=0,Ae=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"\u200b"==t.prevInput?Yt(n,Ja)(n):we++<10?r.detectingSelectAll=setTimeout(Ae,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(Ae,200)}}},Bt.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},Bt.prototype.setUneditable=function(){},Bt.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(r,i,a,f){e.defaults[r]=i,a&&(t[r]=f?function(h,p,m){m!=Xn&&a(h,p,m)}:a)}e.defineOption=n,e.Init=Xn,n("value","",function(r,i){return r.setValue(i)},!0),n("mode",null,function(r,i){r.doc.modeOption=i,Ro(r)},!0),n("indentUnit",2,Ro,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(r){xi(r),ci(r),mr(r)},!0),n("lineSeparator",null,function(r,i){if(r.doc.lineSep=i,i){var a=[],f=r.doc.first;r.doc.iter(function(p){for(var m=0;;){var A=p.text.indexOf(i,m);if(-1==A)break;m=A+i.length,a.push(de(f,A))}f++});for(var h=a.length-1;h>=0;h--)Yn(r.doc,i,a[h],de(a[h].line,a[h].ch+i.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(r,i,a){r.state.specialChars=new RegExp(i.source+(i.test("\t")?"":"|\t"),"g"),a!=Xn&&r.refresh()}),n("specialCharPlaceholder",Pe,function(r){return r.refresh()},!0),n("electricChars",!0),n("inputStyle",re?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(r,i){return r.getInputField().spellcheck=i},!0),n("autocorrect",!1,function(r,i){return r.getInputField().autocorrect=i},!0),n("autocapitalize",!1,function(r,i){return r.getInputField().autocapitalize=i},!0),n("rtlMoveVisually",!g),n("wholeLineUpdateBefore",!0),n("theme","default",function(r){Cl(r),yi(r)},!0),n("keyMap","default",function(r,i,a){var f=io(i),h=a!=Xn&&io(a);h&&h.detach&&h.detach(r,f),f.attach&&f.attach(r,h||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Qs,!0),n("gutters",[],function(r,i){r.display.gutterSpecs=No(i,r.options.lineNumbers),yi(r)},!0),n("fixedGutter",!0,function(r,i){r.display.gutters.style.left=i?So(r.display)+"px":"0",r.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(r){return Kn(r)},!0),n("scrollbarStyle","native",function(r){La(r),Kn(r),r.display.scrollbars.setScrollTop(r.doc.scrollTop),r.display.scrollbars.setScrollLeft(r.doc.scrollLeft)},!0),n("lineNumbers",!1,function(r,i){r.display.gutterSpecs=No(r.options.gutters,i),yi(r)},!0),n("firstLineNumber",1,yi,!0),n("lineNumberFormatter",function(r){return r},yi,!0),n("showCursorWhenSelecting",!1,hi,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(r,i){"nocursor"==i&&(Un(r),r.display.input.blur()),r.display.input.readOnlyChanged(i)}),n("screenReaderLabel",null,function(r,i){r.display.input.screenReaderLabelChanged(i=""===i?null:i)}),n("disableInput",!1,function(r,i){i||r.display.input.reset()},!0),n("dragDrop",!0,Js),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,hi,!0),n("singleCursorHeightPerLine",!0,hi,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,xi,!0),n("addModeClass",!1,xi,!0),n("pollInterval",100),n("undoDepth",200,function(r,i){return r.doc.history.undoDepth=i}),n("historyEventDelay",1250),n("viewportMargin",10,function(r){return r.refresh()},!0),n("maxHighlightLength",1e4,xi,!0),n("moveInputWithCursor",!0,function(r,i){i||r.display.input.resetPosition()}),n("tabindex",null,function(r,i){return r.display.input.getField().tabIndex=i||""}),n("autofocus",null),n("direction","ltr",function(r,i){return r.doc.setDirection(i)},!0),n("phrases",null)}(Lt),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(r,i){var a=this.options,f=a[r];a[r]==i&&"mode"!=r||(a[r]=i,t.hasOwnProperty(r)&&Yt(this,t[r])(this,i,f),mt(this,"optionChange",this,r))},getOption:function(r){return this.options[r]},getDoc:function(){return this.doc},addKeyMap:function(r,i){this.state.keyMaps[i?"push":"unshift"](io(r))},removeKeyMap:function(r){for(var i=this.state.keyMaps,a=0;a<i.length;++a)if(i[a]==r||i[a].name==r)return i.splice(a,1),!0},addOverlay:cr(function(r,i){var a=r.token?r:e.getMode(this.options,r);if(a.startState)throw new Error("Overlays may not be stateful.");(function(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)})(this.state.overlays,{mode:a,modeSpec:r,opaque:i&&i.opaque,priority:i&&i.priority||0},function(f){return f.priority}),this.state.modeGen++,mr(this)}),removeOverlay:cr(function(r){for(var i=this.state.overlays,a=0;a<i.length;++a){var f=i[a].modeSpec;if(f==r||"string"==typeof r&&f.name==r)return i.splice(a,1),this.state.modeGen++,void mr(this)}}),indentLine:cr(function(r,i,a){"string"!=typeof i&&"number"!=typeof i&&(i=null==i?this.options.smartIndent?"smart":"prev":i?"add":"subtract"),Zt(this.doc,r)&&Oi(this,r,i,a)}),indentSelection:cr(function(r){for(var i=this.doc.sel.ranges,a=-1,f=0;f<i.length;f++){var h=i[f];if(h.empty())h.head.line>a&&(Oi(this,h.head.line,r,!0),a=h.head.line,f==this.doc.sel.primIndex&&zn(this));else{var p=h.from(),m=h.to(),A=Math.max(a,p.line);a=Math.min(this.lastLine(),m.line-(m.ch?0:1))+1;for(var I=A;I<a;++I)Oi(this,I,r);var X=this.doc.sel.ranges;0==p.ch&&i.length==X.length&&X[f].from().ch>0&&Wo(this.doc,f,new ft(p,X[f].to()),ne)}}}),getTokenAt:function(r,i){return Ii(this,r,i)},getLineTokens:function(r,i){return Ii(this,de(r),i,!0)},getTokenTypeAt:function(r){r=Le(this.doc,r);var p,i=Pr(this,be(this.doc,r.line)),a=0,f=(i.length-1)/2,h=r.ch;if(0==h)p=i[2];else for(;;){var m=a+f>>1;if((m?i[2*m-1]:0)>=h)f=m;else{if(!(i[2*m+1]<h)){p=i[2*m+2];break}a=m+1}}var A=p?p.indexOf("overlay "):-1;return A<0?p:0==A?null:p.slice(0,A-1)},getModeAt:function(r){var i=this.doc.mode;return i.innerMode?e.innerMode(i,this.getTokenAt(r).state).mode:i},getHelper:function(r,i){return this.getHelpers(r,i)[0]},getHelpers:function(r,i){var a=[];if(!n.hasOwnProperty(i))return a;var f=n[i],h=this.getModeAt(r);if("string"==typeof h[i])f[h[i]]&&a.push(f[h[i]]);else if(h[i])for(var p=0;p<h[i].length;p++){var m=f[h[i][p]];m&&a.push(m)}else h.helperType&&f[h.helperType]?a.push(f[h.helperType]):f[h.name]&&a.push(f[h.name]);for(var A=0;A<f._global.length;A++){var I=f._global[A];I.pred(h,this)&&-1==Me(a,I.val)&&a.push(I.val)}return a},getStateAfter:function(r,i){var a=this.doc;return ut(this,(r=Ce(a,null==r?a.first+a.size-1:r))+1,i).state},cursorCoords:function(r,i){var f=this.doc.sel.primary();return Hr(this,null==r?f.head:"object"==typeof r?Le(this.doc,r):r?f.from():f.to(),i||"page")},charCoords:function(r,i){return Ki(this,Le(this.doc,r),i||"page")},coordsChar:function(r,i){return ko(this,(r=ca(this,r,i||"page")).left,r.top)},lineAtHeight:function(r,i){return r=ca(this,{top:r,left:0},i||"page").top,et(this.doc,r+this.display.viewOffset)},heightAtLine:function(r,i,a){var h,f=!1;if("number"==typeof r){var p=this.doc.first+this.doc.size-1;r<this.doc.first?r=this.doc.first:r>p&&(r=p,f=!0),h=be(this.doc,r)}else h=r;return zi(this,h,{top:0,left:0},i||"page",a||f).top+(f?this.doc.height-v(h):0)},defaultTextHeight:function(){return Hn(this.display)},defaultCharWidth:function(){return Wn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(r,i,a,f,h){var p=this.display,m=(r=Hr(this,Le(this.doc,r))).bottom,A=r.left;if(i.style.position="absolute",i.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(i),p.sizer.appendChild(i),"over"==f)m=r.top;else if("above"==f||"near"==f){var I=Math.max(p.wrapper.clientHeight,this.doc.height),X=Math.max(p.sizer.clientWidth,p.lineSpace.clientWidth);("above"==f||r.bottom+i.offsetHeight>I)&&r.top>i.offsetHeight?m=r.top-i.offsetHeight:r.bottom+i.offsetHeight<=I&&(m=r.bottom),A+i.offsetWidth>X&&(A=X-i.offsetWidth)}i.style.top=m+"px",i.style.left=i.style.right="","right"==h?(A=p.sizer.clientWidth-i.offsetWidth,i.style.right="0px"):("left"==h?A=0:"middle"==h&&(A=(p.sizer.clientWidth-i.offsetWidth)/2),i.style.left=A+"px"),a&&function(e,t){var n=Mo(e,t);null!=n.scrollTop&&pi(e,n.scrollTop),null!=n.scrollLeft&&Tn(e,n.scrollLeft)}(this,{left:A,top:m,right:A+i.offsetWidth,bottom:m+i.offsetHeight})},triggerOnKeyDown:cr(vl),triggerOnKeyPress:cr(ml),triggerOnKeyUp:gl,triggerOnMouseDown:cr(yl),execCommand:function(r){if(Mi.hasOwnProperty(r))return Mi[r].call(null,this)},triggerElectric:cr(function(r){Ll(this,r)}),findPosH:function(r,i,a,f){var h=1;i<0&&(h=-1,i=-i);for(var p=Le(this.doc,r),m=0;m<i&&!(p=Qo(this.doc,p,h,a,f)).hitSide;++m);return p},moveH:cr(function(r,i){var a=this;this.extendSelectionsBy(function(f){return a.display.shift||a.doc.extend||f.empty()?Qo(a.doc,f.head,r,i,a.options.rtlMoveVisually):r<0?f.from():f.to()},Oe)}),deleteH:cr(function(r,i){var f=this.doc;this.doc.sel.somethingSelected()?f.replaceSelection("",null,"+delete"):qn(this,function(h){var p=Qo(f,h.head,r,i,!1);return r<0?{from:p,to:h.head}:{from:h.head,to:p}})}),findPosV:function(r,i,a,f){var h=1,p=f;i<0&&(h=-1,i=-i);for(var m=Le(this.doc,r),A=0;A<i;++A){var I=Hr(this,m,"div");if(null==p?p=I.left:I.left=p,(m=El(this,I,h,a)).hitSide)break}return m},moveV:cr(function(r,i){var a=this,f=this.doc,h=[],p=!this.display.shift&&!f.extend&&f.sel.somethingSelected();if(f.extendSelectionsBy(function(A){if(p)return r<0?A.from():A.to();var I=Hr(a,A.head,"div");null!=A.goalColumn&&(I.left=A.goalColumn),h.push(I.left);var X=El(a,I,r,i);return"page"==i&&A==f.sel.primary()&&Eo(a,Ki(a,X,"div").top-I.top),X},Oe),h.length)for(var m=0;m<f.sel.ranges.length;m++)f.sel.ranges[m].goalColumn=h[m]}),findWordAt:function(r){var a=be(this.doc,r.line).text,f=r.ch,h=r.ch;if(a){var p=this.getHelper(r,"wordChars");"before"!=r.sticky&&h!=a.length||!f?++h:--f;for(var m=a.charAt(f),A=Xt(m,p)?function(I){return Xt(I,p)}:/\s/.test(m)?function(I){return/\s/.test(I)}:function(I){return!/\s/.test(I)&&!Xt(I)};f>0&&A(a.charAt(f-1));)--f;for(;h<a.length&&A(a.charAt(h));)++h}return new ft(de(r.line,f),de(r.line,h))},toggleOverwrite:function(r){null!=r&&r==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?he(this.display.cursorDiv,"CodeMirror-overwrite"):_(this.display.cursorDiv,"CodeMirror-overwrite"),mt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ue()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:cr(function(r,i){di(this,r,i)}),getScrollInfo:function(){var r=this.display.scroller;return{left:r.scrollLeft,top:r.scrollTop,height:r.scrollHeight-Gr(this)-this.display.barHeight,width:r.scrollWidth-Gr(this)-this.display.barWidth,clientHeight:go(this),clientWidth:Cn(this)}},scrollIntoView:cr(function(r,i){null==r?(r={from:this.doc.sel.primary().head,to:null},null==i&&(i=this.options.cursorScrollMargin)):"number"==typeof r?r={from:de(r,0),to:null}:null==r.from&&(r={from:r,to:null}),r.to||(r.to=r.from),r.margin=i||0,null!=r.from.line?function(e,t){Ji(e),e.curOp.scrollToPos=t}(this,r):ba(this,r.from,r.to,r.margin)}),setSize:cr(function(r,i){var a=this,f=function(p){return"number"==typeof p||/^\d+$/.test(String(p))?p+"px":p};null!=r&&(this.display.wrapper.style.width=f(r)),null!=i&&(this.display.wrapper.style.height=f(i)),this.options.lineWrapping&&sa(this);var h=this.display.viewFrom;this.doc.iter(h,this.display.viewTo,function(p){if(p.widgets)for(var m=0;m<p.widgets.length;m++)if(p.widgets[m].noHScroll){fn(a,h,"widget");break}++h}),this.curOp.forceUpdate=!0,mt(this,"refresh",this)}),operation:function(r){return Sr(this,r)},startOperation:function(){return Mn(this)},endOperation:function(){return En(this)},refresh:cr(function(){var r=this.display.cachedTextHeight;mr(this),this.curOp.forceUpdate=!0,ci(this),di(this,this.doc.scrollLeft,this.doc.scrollTop),Oo(this.display),(null==r||Math.abs(r-Hn(this.display))>.5||this.options.lineWrapping)&&wo(this),mt(this,"refresh",this)}),swapDoc:cr(function(r){var i=this.doc;return i.cm=null,this.state.selectingText&&this.state.selectingText(),Ba(this,r),ci(this),this.display.input.reset(),di(this,r.scrollLeft,r.scrollTop),this.curOp.forceScroll=!0,at(this,"swapDoc",this,i),i}),phrase:function(r){var i=this.options.phrases;return i&&Object.prototype.hasOwnProperty.call(i,r)?i[r]:r},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},At(e),e.registerHelper=function(r,i,a){n.hasOwnProperty(r)||(n[r]=e[r]={_global:[]}),n[r][i]=a},e.registerGlobalHelper=function(r,i,a,f){e.registerHelper(r,i,f),n[r]._global.push({pred:a,val:f})}}(Lt);var nu="iter insert remove copy getEditor constructor".split(" ");for(var uo in yr.prototype)yr.prototype.hasOwnProperty(uo)&&Me(nu,uo)<0&&(Lt.prototype[uo]=function(e){return function(){return e.apply(this.doc,arguments)}}(yr.prototype[uo]));return At(yr),Lt.inputStyles={textarea:Bt,contenteditable:vt},Lt.defineMode=function(e){!Lt.defaults.mode&&"null"!=e&&(Lt.defaults.mode=e),Et.apply(this,arguments)},Lt.defineMIME=function(e,t){Vt[e]=t},Lt.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Lt.defineMIME("text/plain","null"),Lt.defineExtension=function(e,t){Lt.prototype[e]=t},Lt.defineDocExtension=function(e,t){yr.prototype[e]=t},Lt.fromTextArea=function(e,t){if((t=t?Ge(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=ue();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function r(){e.value=h.getValue()}var i;if(e.form&&(ze(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var a=e.form;i=a.submit;try{var f=a.submit=function(){r(),a.submit=i,a.submit(),a.submit=f}}catch(p){}}t.finishInit=function(p){p.save=r,p.getTextArea=function(){return e},p.toTextArea=function(){p.toTextArea=isNaN,r(),e.parentNode.removeChild(p.getWrapperElement()),e.style.display="",e.form&&(Ut(e.form,"submit",r),!t.leaveSubmitMethodAlone&&"function"==typeof e.form.submit&&(e.form.submit=i))}},e.style.display="none";var h=Lt(function(p){return e.parentNode.insertBefore(p,e.nextSibling)},t);return h},function(e){e.off=Ut,e.on=ze,e.wheelEventPixels=us,e.Doc=yr,e.splitLines=qr,e.countColumn=F,e.findColumn=$e,e.isWordChar=dr,e.Pass=K,e.signal=mt,e.Line=E,e.changeEnd=dn,e.scrollbarModel=wa,e.Pos=de,e.cmpPos=Re,e.modes=Vr,e.mimeModes=Vt,e.resolveMode=Rr,e.getMode=fr,e.modeExtensions=Lr,e.extendMode=an,e.copyState=ir,e.startState=Fr,e.innerMode=or,e.commands=Mi,e.keyMap=rn,e.keyName=fl,e.isModifierKey=sl,e.lookupKey=Qn,e.normalizeKeyMap=Fs,e.StringStream=oe,e.SharedTextMarker=Li,e.TextMarker=vn,e.LineWidget=wi,e.e_preventDefault=ht,e.e_stopPropagation=Nr,e.e_stop=vr,e.addClass=he,e.contains=x,e.rmClass=_,e.keyNames=gn}(Lt),Lt.version="5.63.0",Lt}()},7214:(wt,tt,pe)=>{!function(k){"use strict";var U=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/i;k.defineMode("gfm",function(H,V){var s=0;var N={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(q){return{code:q.code,codeBlock:q.codeBlock,ateSpace:q.ateSpace}},token:function(q,z){if(z.combineTokens=null,z.codeBlock)return q.match(/^```+/)?(z.codeBlock=!1,null):(q.skipToEnd(),null);if(q.sol()&&(z.code=!1),q.sol()&&q.match(/^```+/))return q.skipToEnd(),z.codeBlock=!0,null;if("`"===q.peek()){q.next();var le=q.pos;q.eatWhile("`");var fe=1+q.pos-le;return z.code?fe===s&&(z.code=!1):(s=fe,z.code=!0),null}if(z.code)return q.next(),null;if(q.eatSpace())return z.ateSpace=!0,null;if((q.sol()||z.ateSpace)&&(z.ateSpace=!1,!1!==V.gitHubSpice)){if(q.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/))return z.combineTokens=!0,"link";if(q.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return z.combineTokens=!0,"link"}return q.match(U)&&"]("!=q.string.slice(q.start-2,q.start)&&(0==q.start||/\W/.test(q.string.charAt(q.start-1)))?(z.combineTokens=!0,"link"):(q.next(),null)},blankLine:function(q){return q.code=!1,null}},se={taskLists:!0,strikethrough:!0,emoji:!0};for(var Q in V)se[Q]=V[Q];return se.name="markdown",k.overlayMode(k.getMode(H,se),N)},"markdown"),k.defineMIME("text/x-gfm","gfm")}(pe(9475),pe(6864),pe(7630))},2391:(wt,tt,pe)=>{!function(k){"use strict";k.defineMode("javascript",function(U,H){var ee,re,V=U.indentUnit,s=H.statementIndent,M=H.jsonld,N=H.json||M,se=!1!==H.trackScope,Q=H.typescript,q=H.wordCharacters||/[\w$\xa1-\uffff]/,z=function(){function y(Dt){return{type:Dt,style:"keyword"}}var D=y("keyword a"),ie=y("keyword b"),Ce=y("keyword c"),Le=y("keyword d"),it=y("operator"),st={type:"atom",style:"atom"};return{if:y("if"),while:D,with:D,else:ie,do:ie,try:ie,finally:ie,return:Le,break:Le,continue:Le,new:y("new"),delete:Ce,void:Ce,throw:Ce,debugger:y("debugger"),var:y("var"),const:y("var"),let:y("var"),function:y("function"),catch:y("catch"),for:y("for"),switch:y("switch"),case:y("case"),default:y("default"),in:it,typeof:it,instanceof:it,true:st,false:st,null:st,undefined:st,NaN:st,Infinity:st,this:y("this"),class:y("class"),super:y("atom"),yield:Ce,export:y("export"),import:y("import"),extends:Ce,await:Ce}}(),le=/[+\-*&%=<>!?|~^@]/,fe=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function L(y,D,ie){return ee=y,re=ie,D}function W(y,D){var ie=y.next();if('"'==ie||"'"==ie)return D.tokenize=function(y){return function(D,ie){var Le,Ce=!1;if(M&&"@"==D.peek()&&D.match(fe))return ie.tokenize=W,L("jsonld-keyword","meta");for(;null!=(Le=D.next())&&(Le!=y||Ce);)Ce=!Ce&&"\\"==Le;return Ce||(ie.tokenize=W),L("string","string")}}(ie),D.tokenize(y,D);if("."==ie&&y.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return L("number","number");if("."==ie&&y.match(".."))return L("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(ie))return L(ie);if("="==ie&&y.eat(">"))return L("=>","operator");if("0"==ie&&y.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return L("number","number");if(/\d/.test(ie))return y.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),L("number","number");if("/"==ie)return y.eat("*")?(D.tokenize=S,S(y,D)):y.eat("/")?(y.skipToEnd(),L("comment","comment")):dt(y,D,1)?(function(y){for(var ie,D=!1,Ce=!1;null!=(ie=y.next());){if(!D){if("/"==ie&&!Ce)return;"["==ie?Ce=!0:Ce&&"]"==ie&&(Ce=!1)}D=!D&&"\\"==ie}}(y),y.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),L("regexp","string-2")):(y.eat("="),L("operator","operator",y.current()));if("`"==ie)return D.tokenize=T,T(y,D);if("#"==ie&&"!"==y.peek())return y.skipToEnd(),L("meta","meta");if("#"==ie&&y.eatWhile(q))return L("variable","property");if("<"==ie&&y.match("!--")||"-"==ie&&y.match("->")&&!/\S/.test(y.string.slice(0,y.start)))return y.skipToEnd(),L("comment","comment");if(le.test(ie))return(">"!=ie||!D.lexical||">"!=D.lexical.type)&&(y.eat("=")?("!"==ie||"="==ie)&&y.eat("="):/[<>*+\-|&?]/.test(ie)&&(y.eat(ie),">"==ie&&y.eat(ie))),"?"==ie&&y.eat(".")?L("."):L("operator","operator",y.current());if(q.test(ie)){y.eatWhile(q);var Ce=y.current();if("."!=D.lastType){if(z.propertyIsEnumerable(Ce)){var Le=z[Ce];return L(Le.type,Le.style,Ce)}if("async"==Ce&&y.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return L("async","keyword",Ce)}return L("variable","variable",Ce)}}function S(y,D){for(var Ce,ie=!1;Ce=y.next();){if("/"==Ce&&ie){D.tokenize=W;break}ie="*"==Ce}return L("comment","comment")}function T(y,D){for(var Ce,ie=!1;null!=(Ce=y.next());){if(!ie&&("`"==Ce||"$"==Ce&&y.eat("{"))){D.tokenize=W;break}ie=!ie&&"\\"==Ce}return L("quasi","string-2",y.current())}function C(y,D){D.fatArrowAt&&(D.fatArrowAt=null);var ie=y.string.indexOf("=>",y.start);if(!(ie<0)){if(Q){var Ce=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(y.string.slice(y.start,ie));Ce&&(ie=Ce.index)}for(var Le=0,it=!1,st=ie-1;st>=0;--st){var Dt=y.string.charAt(st),Ft="([{}])".indexOf(Dt);if(Ft>=0&&Ft<3){if(!Le){++st;break}if(0==--Le){"("==Dt&&(it=!0);break}}else if(Ft>=3&&Ft<6)++Le;else if(q.test(Dt))it=!0;else if(/["'\/`]/.test(Dt))for(;;--st){if(0==st)return;if(y.string.charAt(st-1)==Dt&&"\\"!=y.string.charAt(st-2)){st--;break}}else if(it&&!Le){++st;break}}it&&!Le&&(D.fatArrowAt=st)}}var _={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function te(y,D,ie,Ce,Le,it){this.indented=y,this.column=D,this.type=ie,this.prev=Le,this.info=it,null!=Ce&&(this.align=Ce)}function Z(y,D){if(!se)return!1;for(var ie=y.localVars;ie;ie=ie.next)if(ie.name==D)return!0;for(var Ce=y.context;Ce;Ce=Ce.prev)for(ie=Ce.vars;ie;ie=ie.next)if(ie.name==D)return!0}function $(y,D,ie,Ce,Le){var it=y.cc;for(j.state=y,j.stream=Le,j.marked=null,j.cc=it,j.style=D,y.lexical.hasOwnProperty("align")||(y.lexical.align=!0);;)if((it.length?it.pop():N?ge:Oe)(ie,Ce)){for(;it.length&&it[it.length-1].lex;)it.pop()();return j.marked?j.marked:"variable"==ie&&Z(y,Ce)?"variable-2":D}}var j={state:null,column:null,marked:null,cc:null};function ve(){for(var y=arguments.length-1;y>=0;y--)j.cc.push(arguments[y])}function x(){return ve.apply(null,arguments),!0}function ue(y,D){for(var ie=D;ie;ie=ie.next)if(ie.name==y)return!0;return!1}function he(y){var D=j.state;if(j.marked="def",se){if(D.context)if("var"==D.lexical.info&&D.context&&D.context.block){var ie=Ee(y,D.context);if(null!=ie)return void(D.context=ie)}else if(!ue(y,D.localVars))return void(D.localVars=new Ge(y,D.localVars));H.globalVars&&!ue(y,D.globalVars)&&(D.globalVars=new Ge(y,D.globalVars))}}function Ee(y,D){if(D){if(D.block){var ie=Ee(y,D.prev);return ie?ie==D.prev?D:new Ue(ie,D.vars,!0):null}return ue(y,D.vars)?D:new Ue(D.prev,new Ge(y,D.vars),!1)}return null}function We(y){return"public"==y||"private"==y||"protected"==y||"abstract"==y||"readonly"==y}function Ue(y,D,ie){this.prev=y,this.vars=D,this.block=ie}function Ge(y,D){this.name=y,this.next=D}var F=new Ge("this",new Ge("arguments",null));function b(){j.state.context=new Ue(j.state.context,j.state.localVars,!1),j.state.localVars=F}function Me(){j.state.context=new Ue(j.state.context,j.state.localVars,!0),j.state.localVars=null}function B(){j.state.localVars=j.state.context.vars,j.state.context=j.state.context.prev}function K(y,D){var ie=function(){var Ce=j.state,Le=Ce.indented;if("stat"==Ce.lexical.type)Le=Ce.lexical.indented;else for(var it=Ce.lexical;it&&")"==it.type&&it.align;it=it.prev)Le=it.indented;Ce.lexical=new te(Le,j.stream.column(),y,null,Ce.lexical,D)};return ie.lex=!0,ie}function ne(){var y=j.state;y.lexical.prev&&(")"==y.lexical.type&&(y.indented=y.lexical.indented),y.lexical=y.lexical.prev)}function ye(y){return function D(ie){return ie==y?x():";"==y||"}"==ie||")"==ie||"]"==ie?ve():x(D)}}function Oe(y,D){return"var"==y?x(K("vardef",D),Jr,ye(";"),ne):"keyword a"==y?x(K("form"),Ke,Oe,ne):"keyword b"==y?x(K("form"),Oe,ne):"keyword d"==y?j.stream.match(/^\s*$/,!1)?x():x(K("stat"),er,ye(";"),ne):"debugger"==y?x(ye(";")):"{"==y?x(K("}"),Me,ze,ne,B):";"==y?x():"if"==y?("else"==j.state.lexical.info&&j.state.cc[j.state.cc.length-1]==ne&&j.state.cc.pop()(),x(K("form"),Ke,Oe,ne,Zr)):"function"==y?x(Et):"for"==y?x(K("form"),Me,nr,Oe,B,ne):"class"==y||Q&&"interface"==D?(j.marked="keyword",x(K("form","class"==y?y:D),an,ne)):"variable"==y?Q&&"declare"==D?(j.marked="keyword",x(Oe)):Q&&("module"==D||"enum"==D||"type"==D)&&j.stream.match(/^\s*\w/,!1)?(j.marked="keyword","enum"==D?x(Gt):"type"==D?x(Rr,ye("operator"),Ve,ye(";")):x(K("form"),zt,ye("{"),K("}"),ze,ne,ne)):Q&&"namespace"==D?(j.marked="keyword",x(K("form"),ge,Oe,ne)):Q&&"abstract"==D?(j.marked="keyword",x(Oe)):x(K("stat"),Er):"switch"==y?x(K("form"),Ke,ye("{"),K("}","switch"),Me,ze,ne,ne,B):"case"==y?x(ge,ye(":")):"default"==y?x(ye(":")):"catch"==y?x(K("form"),b,$e,Oe,ne,B):"export"==y?x(K("stat"),oe,ne):"import"==y?x(K("stat"),P,ne):"async"==y?x(Oe):"@"==D?x(ge,Oe):ve(K("stat"),ge,ye(";"),ne)}function $e(y){if("("==y)return x(fr,ye(")"))}function ge(y,D){return ur(y,D,!1)}function Ye(y,D){return ur(y,D,!0)}function Ke(y){return"("!=y?ve():x(K(")"),er,ye(")"),ne)}function ur(y,D,ie){if(j.state.fatArrowAt==j.stream.start){var Ce=ie?Tt:Xt;if("("==y)return x(b,K(")"),lt(fr,")"),ne,ye("=>"),Ce,B);if("variable"==y)return ve(b,zt,ye("=>"),Ce,B)}var Le=ie?gt:ct;return _.hasOwnProperty(y)?x(Le):"function"==y?x(Et,Le):"class"==y||Q&&"interface"==D?(j.marked="keyword",x(K("form"),Lr,ne)):"keyword c"==y||"async"==y?x(ie?Ye:ge):"("==y?x(K(")"),er,ye(")"),ne,Le):"operator"==y||"spread"==y?x(ie?Ye:ge):"["==y?x(K("]"),Zt,ne,Le):"{"==y?xt(Wt,"}",null,Le):"quasi"==y?ve(tr,Le):"new"==y?x(function(y){return function(D){return"."==D?x(y?zr:Ir):"variable"==D&&Q?x(on,y?gt:ct):ve(y?Ye:ge)}}(ie)):x()}function er(y){return y.match(/[;\}\)\],]/)?ve():ve(ge)}function ct(y,D){return","==y?x(er):gt(y,D,!1)}function gt(y,D,ie){var Ce=0==ie?ct:gt,Le=0==ie?ge:Ye;if("=>"==y)return x(b,ie?Tt:Xt,B);if("operator"==y)return/\+\+|--/.test(D)||Q&&"!"==D?x(Ce):Q&&"<"==D&&j.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?x(K(">"),lt(Ve,">"),ne,Ce):"?"==D?x(ge,ye(":"),Le):x(Le);if("quasi"==y)return ve(tr,Ce);if(";"!=y){if("("==y)return xt(Ye,")","call",Ce);if("."==y)return x(pr,Ce);if("["==y)return x(K("]"),er,ye("]"),ne,Ce);if(Q&&"as"==D)return j.marked="keyword",x(Ve,Ce);if("regexp"==y)return j.state.lastType=j.marked="operator",j.stream.backUp(j.stream.pos-j.stream.start-1),x(Le)}}function tr(y,D){return"quasi"!=y?ve():"${"!=D.slice(D.length-2)?x(tr):x(er,dr)}function dr(y){if("}"==y)return j.marked="string-2",j.state.tokenize=T,x(tr)}function Xt(y){return C(j.stream,j.state),ve("{"==y?Oe:ge)}function Tt(y){return C(j.stream,j.state),ve("{"==y?Oe:Ye)}function Ir(y,D){if("target"==D)return j.marked="keyword",x(ct)}function zr(y,D){if("target"==D)return j.marked="keyword",x(gt)}function Er(y){return":"==y?x(ne,Oe):ve(ct,ye(";"),ne)}function pr(y){if("variable"==y)return j.marked="property",x()}function Wt(y,D){return"async"==y?(j.marked="property",x(Wt)):"variable"==y||"keyword"==j.style?(j.marked="property","get"==D||"set"==D?x(Dr):(Q&&j.state.fatArrowAt==j.stream.start&&(ie=j.stream.match(/^\s*:\s*/,!1))&&(j.state.fatArrowAt=j.stream.pos+ie[0].length),x(yt))):"number"==y||"string"==y?(j.marked=M?"property":j.style+" property",x(yt)):"jsonld-keyword"==y?x(yt):Q&&We(D)?(j.marked="keyword",x(Wt)):"["==y?x(ge,Cr,ye("]"),yt):"spread"==y?x(Ye,yt):"*"==D?(j.marked="keyword",x(Wt)):":"==y?ve(yt):void 0;var ie}function Dr(y){return"variable"!=y?ve(yt):(j.marked="property",x(Et))}function yt(y){return":"==y?x(Ye):"("==y?ve(Et):void 0}function lt(y,D,ie){function Ce(Le,it){if(ie?ie.indexOf(Le)>-1:","==Le){var st=j.state.lexical;return"call"==st.info&&(st.pos=(st.pos||0)+1),x(function(Dt,Ft){return Dt==D||Ft==D?ve():ve(y)},Ce)}return Le==D||it==D?x():ie&&ie.indexOf(";")>-1?ve(y):x(ye(D))}return function(Le,it){return Le==D||it==D?x():ve(y,Ce)}}function xt(y,D,ie){for(var Ce=3;Ce<arguments.length;Ce++)j.cc.push(arguments[Ce]);return x(K(D,ie),lt(y,D),ne)}function ze(y){return"}"==y?x():ve(Oe,ze)}function Cr(y,D){if(Q){if(":"==y)return x(Ve);if("?"==D)return x(Cr)}}function Ut(y,D){if(Q&&(":"==y||"in"==D))return x(Ve)}function mt(y){if(Q&&":"==y)return j.stream.match(/^\s*\w+\s+is\b/,!1)?x(ge,qe,Ve):x(Ve)}function qe(y,D){if("is"==D)return j.marked="keyword",x()}function Ve(y,D){return"keyof"==D||"typeof"==D||"infer"==D||"readonly"==D?(j.marked="keyword",x("typeof"==D?Ye:Ve)):"variable"==y||"void"==D?(j.marked="type",x(rr)):"|"==D||"&"==D?x(Ve):"string"==y||"number"==y||"atom"==y?x(rr):"["==y?x(K("]"),lt(Ve,"]",","),ne,rr):"{"==y?x(K("}"),At,ne,rr):"("==y?x(lt(vr,")"),nt,rr):"<"==y?x(lt(Ve,">"),Ve):"quasi"==y?ve(Nr,rr):void 0}function nt(y){if("=>"==y)return x(Ve)}function At(y){return y.match(/[\}\)\]]/)?x():","==y||";"==y?x(At):ve(ht,At)}function ht(y,D){return"variable"==y||"keyword"==j.style?(j.marked="property",x(ht)):"?"==D||"number"==y||"string"==y?x(ht):":"==y?x(Ve):"["==y?x(ye("variable"),Ut,ye("]"),ht):"("==y?ve(gr,ht):y.match(/[;\}\)\],]/)?void 0:x()}function Nr(y,D){return"quasi"!=y?ve():"${"!=D.slice(D.length-2)?x(Nr):x(Ve,Ct)}function Ct(y){if("}"==y)return j.marked="string-2",j.state.tokenize=T,x(Nr)}function vr(y,D){return"variable"==y&&j.stream.match(/^\s*[?:]/,!1)||"?"==D?x(vr):":"==y?x(Ve):"spread"==y?x(vr):ve(Ve)}function rr(y,D){return"<"==D?x(K(">"),lt(Ve,">"),ne,rr):"|"==D||"."==y||"&"==D?x(Ve):"["==y?x(Ve,ye("]"),rr):"extends"==D||"implements"==D?(j.marked="keyword",x(Ve)):"?"==D?x(Ve,ye(":"),Ve):void 0}function on(y,D){if("<"==D)return x(K(">"),lt(Ve,">"),ne,rr)}function Br(){return ve(Ve,Kr)}function Kr(y,D){if("="==D)return x(Ve)}function Jr(y,D){return"enum"==D?(j.marked="keyword",x(Gt)):ve(zt,Cr,Kt,Xr)}function zt(y,D){return Q&&We(D)?(j.marked="keyword",x(zt)):"variable"==y?(he(D),x()):"spread"==y?x(zt):"["==y?xt(qr,"]"):"{"==y?xt(Qr,"}"):void 0}function Qr(y,D){return"variable"!=y||j.stream.match(/^\s*:/,!1)?("variable"==y&&(j.marked="property"),"spread"==y?x(zt):"}"==y?ve():"["==y?x(ge,ye("]"),ye(":"),Qr):x(ye(":"),zt,Kt)):(he(D),x(Kt))}function qr(){return ve(zt,Kt)}function Kt(y,D){if("="==D)return x(Ye)}function Xr(y){if(","==y)return x(Jr)}function Zr(y,D){if("keyword b"==y&&"else"==D)return x(K("form","else"),Oe,ne)}function nr(y,D){return"await"==D?x(nr):"("==y?x(K(")"),Vr,ne):void 0}function Vr(y){return"var"==y?x(Jr,Vt):"variable"==y?x(Vt):ve(Vt)}function Vt(y,D){return")"==y?x():";"==y?x(Vt):"in"==D||"of"==D?(j.marked="keyword",x(ge,Vt)):ve(ge,Vt)}function Et(y,D){return"*"==D?(j.marked="keyword",x(Et)):"variable"==y?(he(D),x(Et)):"("==y?x(b,K(")"),lt(fr,")"),ne,mt,Oe,B):Q&&"<"==D?x(K(">"),lt(Br,">"),ne,Et):void 0}function gr(y,D){return"*"==D?(j.marked="keyword",x(gr)):"variable"==y?(he(D),x(gr)):"("==y?x(b,K(")"),lt(fr,")"),ne,mt,B):Q&&"<"==D?x(K(">"),lt(Br,">"),ne,gr):void 0}function Rr(y,D){return"keyword"==y||"variable"==y?(j.marked="type",x(Rr)):"<"==D?x(K(">"),lt(Br,">"),ne):void 0}function fr(y,D){return"@"==D&&x(ge,fr),"spread"==y?x(fr):Q&&We(D)?(j.marked="keyword",x(fr)):Q&&"this"==y?x(Cr,Kt):ve(zt,Cr,Kt)}function Lr(y,D){return"variable"==y?an(y,D):ir(y,D)}function an(y,D){if("variable"==y)return he(D),x(ir)}function ir(y,D){return"<"==D?x(K(">"),lt(Br,">"),ne,ir):"extends"==D||"implements"==D||Q&&","==y?("implements"==D&&(j.marked="keyword"),x(Q?Ve:ge,ir)):"{"==y?x(K("}"),or,ne):void 0}function or(y,D){return"async"==y||"variable"==y&&("static"==D||"get"==D||"set"==D||Q&&We(D))&&j.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(j.marked="keyword",x(or)):"variable"==y||"keyword"==j.style?(j.marked="property",x(Fr,or)):"number"==y||"string"==y?x(Fr,or):"["==y?x(ge,Cr,ye("]"),Fr,or):"*"==D?(j.marked="keyword",x(or)):Q&&"("==y?ve(gr,or):";"==y||","==y?x(or):"}"==y?x():"@"==D?x(ge,or):void 0}function Fr(y,D){if("!"==D||"?"==D)return x(Fr);if(":"==y)return x(Ve,Kt);if("="==D)return x(Ye);var ie=j.state.lexical.prev;return ve(ie&&"interface"==ie.info?gr:Et)}function oe(y,D){return"*"==D?(j.marked="keyword",x(et,ye(";"))):"default"==D?(j.marked="keyword",x(ge,ye(";"))):"{"==y?x(lt(be,"}"),et,ye(";")):ve(Oe)}function be(y,D){return"as"==D?(j.marked="keyword",x(ye("variable"))):"variable"==y?ve(Ye,be):void 0}function P(y){return"string"==y?x():"("==y?ve(ge):"."==y?ve(ct):ve(ae,Se,et)}function ae(y,D){return"{"==y?xt(ae,"}"):("variable"==y&&he(D),"*"==D&&(j.marked="keyword"),x(Be))}function Se(y){if(","==y)return x(ae,Se)}function Be(y,D){if("as"==D)return j.marked="keyword",x(ae)}function et(y,D){if("from"==D)return j.marked="keyword",x(ge)}function Zt(y){return"]"==y?x():ve(lt(Ye,"]"))}function Gt(){return ve(K("form"),zt,ye("{"),K("}"),lt(de,"}"),ne,ne)}function de(){return ve(zt,Kt)}function dt(y,D,ie){return D.tokenize==W&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(D.lastType)||"quasi"==D.lastType&&/\{\s*$/.test(y.string.slice(0,y.pos-(ie||0)))}return B.lex=!0,ne.lex=!0,{startState:function(y){var D={tokenize:W,lastType:"sof",cc:[],lexical:new te((y||0)-V,0,"block",!1),localVars:H.localVars,context:H.localVars&&new Ue(null,null,!1),indented:y||0};return H.globalVars&&"object"==typeof H.globalVars&&(D.globalVars=H.globalVars),D},token:function(y,D){if(y.sol()&&(D.lexical.hasOwnProperty("align")||(D.lexical.align=!1),D.indented=y.indentation(),C(y,D)),D.tokenize!=S&&y.eatSpace())return null;var ie=D.tokenize(y,D);return"comment"==ee?ie:(D.lastType="operator"!=ee||"++"!=re&&"--"!=re?ee:"incdec",$(D,ie,ee,re,y))},indent:function(y,D){if(y.tokenize==S||y.tokenize==T)return k.Pass;if(y.tokenize!=W)return 0;var Le,ie=D&&D.charAt(0),Ce=y.lexical;if(!/^\s*else\b/.test(D))for(var it=y.cc.length-1;it>=0;--it){var st=y.cc[it];if(st==ne)Ce=Ce.prev;else if(st!=Zr&&st!=B)break}for(;("stat"==Ce.type||"form"==Ce.type)&&("}"==ie||(Le=y.cc[y.cc.length-1])&&(Le==ct||Le==gt)&&!/^[,\.=+\-*:?[\(]/.test(D));)Ce=Ce.prev;s&&")"==Ce.type&&"stat"==Ce.prev.type&&(Ce=Ce.prev);var Dt=Ce.type,Ft=ie==Dt;return"vardef"==Dt?Ce.indented+("operator"==y.lastType||","==y.lastType?Ce.info.length+1:0):"form"==Dt&&"{"==ie?Ce.indented:"form"==Dt?Ce.indented+V:"stat"==Dt?Ce.indented+(function(y,D){return"operator"==y.lastType||","==y.lastType||le.test(D.charAt(0))||/[,.]/.test(D.charAt(0))}(y,D)?s||V:0):"switch"!=Ce.info||Ft||0==H.doubleIndentSwitch?Ce.align?Ce.column+(Ft?0:1):Ce.indented+(Ft?0:V):Ce.indented+(/^(?:case|default)\b/.test(D)?V:2*V)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:N?null:"/*",blockCommentEnd:N?null:"*/",blockCommentContinue:N?null:" * ",lineComment:N?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:N?"json":"javascript",jsonldMode:M,jsonMode:N,expressionAllowed:dt,skipExpression:function(y){$(y,"atom","atom","true",new k.StringStream("",2,null))}}}),k.registerHelper("wordChars","javascript",/[\w$]/),k.defineMIME("text/javascript","javascript"),k.defineMIME("text/ecmascript","javascript"),k.defineMIME("application/javascript","javascript"),k.defineMIME("application/x-javascript","javascript"),k.defineMIME("application/ecmascript","javascript"),k.defineMIME("application/json",{name:"javascript",json:!0}),k.defineMIME("application/x-json",{name:"javascript",json:!0}),k.defineMIME("application/manifest+json",{name:"javascript",json:!0}),k.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),k.defineMIME("text/typescript",{name:"javascript",typescript:!0}),k.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(pe(9475))},6864:(wt,tt,pe)=>{!function(k){"use strict";k.defineMode("markdown",function(U,H){var V=k.getMode(U,"text/html"),s="null"==V.name;void 0===H.highlightFormatting&&(H.highlightFormatting=!1),void 0===H.maxBlockquoteDepth&&(H.maxBlockquoteDepth=0),void 0===H.taskLists&&(H.taskLists=!1),void 0===H.strikethrough&&(H.strikethrough=!1),void 0===H.emoji&&(H.emoji=!1),void 0===H.fencedCodeBlockHighlighting&&(H.fencedCodeBlockHighlighting=!0),void 0===H.fencedCodeBlockDefaultMode&&(H.fencedCodeBlockDefaultMode="text/plain"),void 0===H.xml&&(H.xml=!0),void 0===H.tokenTypeOverrides&&(H.tokenTypeOverrides={});var N={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var se in N)N.hasOwnProperty(se)&&H.tokenTypeOverrides[se]&&(N[se]=H.tokenTypeOverrides[se]);var Q=/^([*\-_])(?:\s*\1){2,}\s*$/,q=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,z=/^\[(x| )\](?=\s)/i,le=H.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,fe=/^ {0,3}(?:\={1,}|-{2,})\s*$/,Fe=/^[^#!\[\]*_\\<>` "'(~:]+/,ee=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,re=/^\s*\[[^\]]+?\]:.*$/,L=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function g(F,b,Me){return b.f=b.inline=Me,Me(F,b)}function S(F,b,Me){return b.f=b.block=Me,Me(F,b)}function R(F){if(F.linkTitle=!1,F.linkHref=!1,F.linkText=!1,F.em=!1,F.strong=!1,F.strikethrough=!1,F.quote=0,F.indentedCode=!1,F.f==_){var b=s;if(!b){var Me=k.innerMode(V,F.htmlState);b="xml"==Me.mode.name&&null===Me.state.tagStart&&!Me.state.context&&Me.state.tokenize.isInText}b&&(F.f=j,F.block=C,F.htmlState=null)}return F.trailingSpace=0,F.trailingSpaceNewLine=!1,F.prevLine=F.thisLine,F.thisLine={stream:null},null}function C(F,b){var Me=F.column()===b.indentation,B=function(F){return!F||!/\S/.test(F.string)}(b.prevLine.stream),K=b.indentedCode,ne=b.prevLine.hr,ye=!1!==b.list,Oe=(b.listStack[b.listStack.length-1]||0)+3;b.indentedCode=!1;var $e=b.indentation;if(null===b.indentationDiff&&(b.indentationDiff=b.indentation,ye)){for(b.list=null;$e<b.listStack[b.listStack.length-1];)b.listStack.pop(),b.listStack.length?b.indentation=b.listStack[b.listStack.length-1]:b.list=!1;!1!==b.list&&(b.indentationDiff=$e-b.listStack[b.listStack.length-1])}var ge=!(B||ne||b.prevLine.header||ye&&K||b.prevLine.fencedCodeEnd),Ye=(!1===b.list||ne||B)&&b.indentation<=Oe&&F.match(Q),Ke=null;if(b.indentationDiff>=4&&(K||b.prevLine.fencedCodeEnd||b.prevLine.header||B))return F.skipToEnd(),b.indentedCode=!0,N.code;if(F.eatSpace())return null;if(Me&&b.indentation<=Oe&&(Ke=F.match(le))&&Ke[1].length<=6)return b.quote=0,b.header=Ke[1].length,b.thisLine.header=!0,H.highlightFormatting&&(b.formatting="header"),b.f=b.inline,Z(b);if(b.indentation<=Oe&&F.eat(">"))return b.quote=Me?1:b.quote+1,H.highlightFormatting&&(b.formatting="quote"),F.eatSpace(),Z(b);if(!Ye&&!b.setext&&Me&&b.indentation<=Oe&&(Ke=F.match(q))){var ur=Ke[1]?"ol":"ul";return b.indentation=$e+F.current().length,b.list=!0,b.quote=0,b.listStack.push(b.indentation),b.em=!1,b.strong=!1,b.code=!1,b.strikethrough=!1,H.taskLists&&F.match(z,!1)&&(b.taskList=!0),b.f=b.inline,H.highlightFormatting&&(b.formatting=["list","list-"+ur]),Z(b)}return Me&&b.indentation<=Oe&&(Ke=F.match(ee,!0))?(b.quote=0,b.fencedEndRE=new RegExp(Ke[1]+"+ *$"),b.localMode=H.fencedCodeBlockHighlighting&&function(F){if(k.findModeByName){var b=k.findModeByName(F);b&&(F=b.mime||b.mimes[0])}var Me=k.getMode(U,F);return"null"==Me.name?null:Me}(Ke[2]||H.fencedCodeBlockDefaultMode),b.localMode&&(b.localState=k.startState(b.localMode)),b.f=b.block=te,H.highlightFormatting&&(b.formatting="code-block"),b.code=-1,Z(b)):b.setext||!(ge&&ye||b.quote||!1!==b.list||b.code||Ye||re.test(F.string))&&(Ke=F.lookAhead(1))&&(Ke=Ke.match(fe))?(b.setext?(b.header=b.setext,b.setext=0,F.skipToEnd(),H.highlightFormatting&&(b.formatting="header")):(b.header="="==Ke[0].charAt(0)?1:2,b.setext=b.header),b.thisLine.header=!0,b.f=b.inline,Z(b)):Ye?(F.skipToEnd(),b.hr=!0,b.thisLine.hr=!0,N.hr):"["===F.peek()?g(F,b,Ee):g(F,b,b.inline)}function _(F,b){var Me=V.token(F,b.htmlState);if(!s){var B=k.innerMode(V,b.htmlState);("xml"==B.mode.name&&null===B.state.tagStart&&!B.state.context&&B.state.tokenize.isInText||b.md_inside&&F.current().indexOf(">")>-1)&&(b.f=j,b.block=C,b.htmlState=null)}return Me}function te(F,b){var ne,Me=b.listStack[b.listStack.length-1]||0,B=b.indentation<Me;return b.fencedEndRE&&b.indentation<=Me+3&&(B||F.match(b.fencedEndRE))?(H.highlightFormatting&&(b.formatting="code-block"),B||(ne=Z(b)),b.localMode=b.localState=null,b.block=C,b.f=j,b.fencedEndRE=null,b.code=0,b.thisLine.fencedCodeEnd=!0,B?S(F,b,b.block):ne):b.localMode?b.localMode.token(F,b.localState):(F.skipToEnd(),N.code)}function Z(F){var b=[];if(F.formatting){b.push(N.formatting),"string"==typeof F.formatting&&(F.formatting=[F.formatting]);for(var Me=0;Me<F.formatting.length;Me++)b.push(N.formatting+"-"+F.formatting[Me]),"header"===F.formatting[Me]&&b.push(N.formatting+"-"+F.formatting[Me]+"-"+F.header),"quote"===F.formatting[Me]&&b.push(!H.maxBlockquoteDepth||H.maxBlockquoteDepth>=F.quote?N.formatting+"-"+F.formatting[Me]+"-"+F.quote:"error")}if(F.taskOpen)return b.push("meta"),b.length?b.join(" "):null;if(F.taskClosed)return b.push("property"),b.length?b.join(" "):null;if(F.linkHref?b.push(N.linkHref,"url"):(F.strong&&b.push(N.strong),F.em&&b.push(N.em),F.strikethrough&&b.push(N.strikethrough),F.emoji&&b.push(N.emoji),F.linkText&&b.push(N.linkText),F.code&&b.push(N.code),F.image&&b.push(N.image),F.imageAltText&&b.push(N.imageAltText,"link"),F.imageMarker&&b.push(N.imageMarker)),F.header&&b.push(N.header,N.header+"-"+F.header),F.quote&&(b.push(N.quote),b.push(!H.maxBlockquoteDepth||H.maxBlockquoteDepth>=F.quote?N.quote+"-"+F.quote:N.quote+"-"+H.maxBlockquoteDepth)),!1!==F.list){var B=(F.listStack.length-1)%3;b.push(B?1===B?N.list2:N.list3:N.list1)}return F.trailingSpaceNewLine?b.push("trailing-space-new-line"):F.trailingSpace&&b.push("trailing-space-"+(F.trailingSpace%2?"a":"b")),b.length?b.join(" "):null}function $(F,b){if(F.match(Fe,!0))return Z(b)}function j(F,b){var Me=b.text(F,b);if(void 0!==Me)return Me;if(b.list)return b.list=null,Z(b);if(b.taskList)return" "===F.match(z,!0)[1]?b.taskOpen=!0:b.taskClosed=!0,H.highlightFormatting&&(b.formatting="task"),b.taskList=!1,Z(b);if(b.taskOpen=!1,b.taskClosed=!1,b.header&&F.match(/^#+$/,!0))return H.highlightFormatting&&(b.formatting="header"),Z(b);var K=F.next();if(b.linkTitle){b.linkTitle=!1;var ne=K;if("("===K&&(ne=")"),ne=(ne+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"),F.match(new RegExp("^\\s*(?:[^"+ne+"\\\\]+|\\\\\\\\|\\\\.)"+ne),!0))return N.linkHref}if("`"===K){var Oe=b.formatting;H.highlightFormatting&&(b.formatting="code"),F.eatWhile("`");var $e=F.current().length;if(0==b.code&&(!b.quote||1==$e))return b.code=$e,Z(b);if($e==b.code){var ge=Z(b);return b.code=0,ge}return b.formatting=Oe,Z(b)}if(b.code)return Z(b);if("\\"===K&&(F.next(),H.highlightFormatting)){var Ye=Z(b),Ke=N.formatting+"-escape";return Ye?Ye+" "+Ke:Ke}if("!"===K&&F.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return b.imageMarker=!0,b.image=!0,H.highlightFormatting&&(b.formatting="image"),Z(b);if("["===K&&b.imageMarker&&F.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return b.imageMarker=!1,b.imageAltText=!0,H.highlightFormatting&&(b.formatting="image"),Z(b);if("]"===K&&b.imageAltText){H.highlightFormatting&&(b.formatting="image");Ye=Z(b);return b.imageAltText=!1,b.image=!1,b.inline=b.f=x,Ye}if("["===K&&!b.image)return b.linkText&&F.match(/^.*?\]/)||(b.linkText=!0,H.highlightFormatting&&(b.formatting="link")),Z(b);if("]"===K&&b.linkText){H.highlightFormatting&&(b.formatting="link");Ye=Z(b);return b.linkText=!1,b.inline=b.f=F.match(/\(.*?\)| ?\[.*?\]/,!1)?x:j,Ye}if("<"===K&&F.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return b.f=b.inline=ve,H.highlightFormatting&&(b.formatting="link"),(Ye=Z(b))?Ye+=" ":Ye="",Ye+N.linkInline;if("<"===K&&F.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return b.f=b.inline=ve,H.highlightFormatting&&(b.formatting="link"),(Ye=Z(b))?Ye+=" ":Ye="",Ye+N.linkEmail;if(H.xml&&"<"===K&&F.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var ur=F.string.indexOf(">",F.pos);if(-1!=ur){var er=F.string.substring(F.start,ur);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(er)&&(b.md_inside=!0)}return F.backUp(1),b.htmlState=k.startState(V),S(F,b,_)}if(H.xml&&"<"===K&&F.match(/^\/\w*?>/))return b.md_inside=!1,"tag";if("*"===K||"_"===K){for(var ct=1,gt=1==F.pos?" ":F.string.charAt(F.pos-2);ct<3&&F.eat(K);)ct++;var tr=F.peek()||" ",dr=!/\s/.test(tr)&&(!L.test(tr)||/\s/.test(gt)||L.test(gt)),Xt=!/\s/.test(gt)&&(!L.test(gt)||/\s/.test(tr)||L.test(tr)),Tt=null,It=null;if(ct%2&&(b.em||!dr||"*"!==K&&Xt&&!L.test(gt)?b.em==K&&Xt&&("*"===K||!dr||L.test(tr))&&(Tt=!1):Tt=!0),ct>1&&(b.strong||!dr||"*"!==K&&Xt&&!L.test(gt)?b.strong==K&&Xt&&("*"===K||!dr||L.test(tr))&&(It=!1):It=!0),null!=It||null!=Tt)return H.highlightFormatting&&(b.formatting=null==Tt?"strong":null==It?"em":"strong em"),!0===Tt&&(b.em=K),!0===It&&(b.strong=K),ge=Z(b),!1===Tt&&(b.em=!1),!1===It&&(b.strong=!1),ge}else if(" "===K&&(F.eat("*")||F.eat("_"))){if(" "===F.peek())return Z(b);F.backUp(1)}if(H.strikethrough)if("~"===K&&F.eatWhile(K)){if(b.strikethrough)return H.highlightFormatting&&(b.formatting="strikethrough"),ge=Z(b),b.strikethrough=!1,ge;if(F.match(/^[^\s]/,!1))return b.strikethrough=!0,H.highlightFormatting&&(b.formatting="strikethrough"),Z(b)}else if(" "===K&&F.match("~~",!0)){if(" "===F.peek())return Z(b);F.backUp(2)}if(H.emoji&&":"===K&&F.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){b.emoji=!0,H.highlightFormatting&&(b.formatting="emoji");var Ir=Z(b);return b.emoji=!1,Ir}return" "===K&&(F.match(/^ +$/,!1)?b.trailingSpace++:b.trailingSpace&&(b.trailingSpaceNewLine=!0)),Z(b)}function ve(F,b){if(">"===F.next()){b.f=b.inline=j,H.highlightFormatting&&(b.formatting="link");var B=Z(b);return B?B+=" ":B="",B+N.linkInline}return F.match(/^[^>]+/,!0),N.linkInline}function x(F,b){if(F.eatSpace())return null;var Me=F.next();return"("===Me||"["===Me?(b.f=b.inline=function(F){return function(b,Me){if(b.next()===F){Me.f=Me.inline=j,H.highlightFormatting&&(Me.formatting="link-string");var K=Z(Me);return Me.linkHref=!1,K}return b.match(ue[F]),Me.linkHref=!0,Z(Me)}}("("===Me?")":"]"),H.highlightFormatting&&(b.formatting="link-string"),b.linkHref=!0,Z(b)):"error"}var ue={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function Ee(F,b){return F.match(/^([^\]\\]|\\.)*\]:/,!1)?(b.f=We,F.next(),H.highlightFormatting&&(b.formatting="link"),b.linkText=!0,Z(b)):g(F,b,j)}function We(F,b){if(F.match("]:",!0)){b.f=b.inline=Ue,H.highlightFormatting&&(b.formatting="link");var Me=Z(b);return b.linkText=!1,Me}return F.match(/^([^\]\\]|\\.)+/,!0),N.linkText}function Ue(F,b){return F.eatSpace()?null:(F.match(/^[^\s]+/,!0),void 0===F.peek()?b.linkTitle=!0:F.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),b.f=b.inline=j,N.linkHref+" url")}var Ge={startState:function(){return{f:C,prevLine:{stream:null},thisLine:{stream:null},block:C,htmlState:null,indentation:0,inline:j,text:$,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(F){return{f:F.f,prevLine:F.prevLine,thisLine:F.thisLine,block:F.block,htmlState:F.htmlState&&k.copyState(V,F.htmlState),indentation:F.indentation,localMode:F.localMode,localState:F.localMode?k.copyState(F.localMode,F.localState):null,inline:F.inline,text:F.text,formatting:!1,linkText:F.linkText,linkTitle:F.linkTitle,linkHref:F.linkHref,code:F.code,em:F.em,strong:F.strong,strikethrough:F.strikethrough,emoji:F.emoji,header:F.header,setext:F.setext,hr:F.hr,taskList:F.taskList,list:F.list,listStack:F.listStack.slice(0),quote:F.quote,indentedCode:F.indentedCode,trailingSpace:F.trailingSpace,trailingSpaceNewLine:F.trailingSpaceNewLine,md_inside:F.md_inside,fencedEndRE:F.fencedEndRE}},token:function(F,b){if(b.formatting=!1,F!=b.thisLine.stream){if(b.header=0,b.hr=!1,F.match(/^\s*$/,!0))return R(b),null;if(b.prevLine=b.thisLine,b.thisLine={stream:F},b.taskList=!1,b.trailingSpace=0,b.trailingSpaceNewLine=!1,!b.localState&&(b.f=b.block,b.f!=_)){var Me=F.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(b.indentation=Me,b.indentationDiff=null,Me>0)return null}}return b.f(F,b)},innerMode:function(F){return F.block==_?{state:F.htmlState,mode:V}:F.localState?{state:F.localState,mode:F.localMode}:{state:F,mode:Ge}},indent:function(F,b,Me){return F.block==_&&V.indent?V.indent(F.htmlState,b,Me):F.localState&&F.localMode.indent?F.localMode.indent(F.localState,b,Me):k.Pass},blankLine:R,getType:Z,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return Ge},"xml"),k.defineMIME("text/markdown","markdown"),k.defineMIME("text/x-markdown","markdown")}(pe(9475),pe(6380),pe(4816))},4816:(wt,tt,pe)=>{!function(k){"use strict";k.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var U=0;U<k.modeInfo.length;U++){var H=k.modeInfo[U];H.mimes&&(H.mime=H.mimes[0])}k.findModeByMIME=function(V){V=V.toLowerCase();for(var s=0;s<k.modeInfo.length;s++){var M=k.modeInfo[s];if(M.mime==V)return M;if(M.mimes)for(var N=0;N<M.mimes.length;N++)if(M.mimes[N]==V)return M}return/\+xml$/.test(V)?k.findModeByMIME("application/xml"):/\+json$/.test(V)?k.findModeByMIME("application/json"):void 0},k.findModeByExtension=function(V){V=V.toLowerCase();for(var s=0;s<k.modeInfo.length;s++){var M=k.modeInfo[s];if(M.ext)for(var N=0;N<M.ext.length;N++)if(M.ext[N]==V)return M}},k.findModeByFileName=function(V){for(var s=0;s<k.modeInfo.length;s++){var M=k.modeInfo[s];if(M.file&&M.file.test(V))return M}var N=V.lastIndexOf("."),se=N>-1&&V.substring(N+1,V.length);if(se)return k.findModeByExtension(se)},k.findModeByName=function(V){V=V.toLowerCase();for(var s=0;s<k.modeInfo.length;s++){var M=k.modeInfo[s];if(M.name.toLowerCase()==V)return M;if(M.alias)for(var N=0;N<M.alias.length;N++)if(M.alias[N].toLowerCase()==V)return M}}}(pe(9475))},6380:(wt,tt,pe)=>{!function(k){"use strict";var U={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},H={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};k.defineMode("xml",function(V,s){var q,z,M=V.indentUnit,N={},se=s.htmlMode?U:H;for(var Q in se)N[Q]=se[Q];for(var Q in s)N[Q]=s[Q];function le(x,ue){function he(Ue){return ue.tokenize=Ue,Ue(x,ue)}var Ee=x.next();return"<"==Ee?x.eat("!")?x.eat("[")?x.match("CDATA[")?he(ee("atom","]]>")):null:x.match("--")?he(ee("comment","--\x3e")):x.match("DOCTYPE",!0,!0)?(x.eatWhile(/[\w\._\-]/),he(re(1))):null:x.eat("?")?(x.eatWhile(/[\w\._\-]/),ue.tokenize=ee("meta","?>"),"meta"):(q=x.eat("/")?"closeTag":"openTag",ue.tokenize=fe,"tag bracket"):"&"==Ee?(x.eat("#")?x.eat("x")?x.eatWhile(/[a-fA-F\d]/)&&x.eat(";"):x.eatWhile(/[\d]/)&&x.eat(";"):x.eatWhile(/[\w\.\-:]/)&&x.eat(";"))?"atom":"error":(x.eatWhile(/[^&<]/),null)}function fe(x,ue){var he=x.next();if(">"==he||"/"==he&&x.eat(">"))return ue.tokenize=le,q=">"==he?"endTag":"selfcloseTag","tag bracket";if("="==he)return q="equals",null;if("<"==he){ue.tokenize=le,ue.state=T,ue.tagName=ue.tagStart=null;var Ee=ue.tokenize(x,ue);return Ee?Ee+" tag error":"tag error"}return/[\'\"]/.test(he)?(ue.tokenize=function(x){var ue=function(he,Ee){for(;!he.eol();)if(he.next()==x){Ee.tokenize=fe;break}return"string"};return ue.isInAttribute=!0,ue}(he),ue.stringStartCol=x.column(),ue.tokenize(x,ue)):(x.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function ee(x,ue){return function(he,Ee){for(;!he.eol();){if(he.match(ue)){Ee.tokenize=le;break}he.next()}return x}}function re(x){return function(ue,he){for(var Ee;null!=(Ee=ue.next());){if("<"==Ee)return he.tokenize=re(x+1),he.tokenize(ue,he);if(">"==Ee){if(1==x){he.tokenize=le;break}return he.tokenize=re(x-1),he.tokenize(ue,he)}}return"meta"}}function L(x){return x&&x.toLowerCase()}function W(x,ue,he){this.prev=x.context,this.tagName=ue||"",this.indent=x.indented,this.startOfLine=he,(N.doNotIndent.hasOwnProperty(ue)||x.context&&x.context.noIndent)&&(this.noIndent=!0)}function g(x){x.context&&(x.context=x.context.prev)}function S(x,ue){for(var he;;){if(!x.context||!N.contextGrabbers.hasOwnProperty(L(he=x.context.tagName))||!N.contextGrabbers[L(he)].hasOwnProperty(L(ue)))return;g(x)}}function T(x,ue,he){return"openTag"==x?(he.tagStart=ue.column(),R):"closeTag"==x?C:T}function R(x,ue,he){return"word"==x?(he.tagName=ue.current(),z="tag",Z):N.allowMissingTagName&&"endTag"==x?(z="tag bracket",Z(x,0,he)):(z="error",R)}function C(x,ue,he){if("word"==x){var Ee=ue.current();return he.context&&he.context.tagName!=Ee&&N.implicitlyClosed.hasOwnProperty(L(he.context.tagName))&&g(he),he.context&&he.context.tagName==Ee||!1===N.matchClosing?(z="tag",_):(z="tag error",te)}return N.allowMissingTagName&&"endTag"==x?(z="tag bracket",_(x,0,he)):(z="error",te)}function _(x,ue,he){return"endTag"!=x?(z="error",_):(g(he),T)}function te(x,ue,he){return z="error",_(x,0,he)}function Z(x,ue,he){if("word"==x)return z="attribute",$;if("endTag"==x||"selfcloseTag"==x){var Ee=he.tagName,We=he.tagStart;return he.tagName=he.tagStart=null,"selfcloseTag"==x||N.autoSelfClosers.hasOwnProperty(L(Ee))?S(he,Ee):(S(he,Ee),he.context=new W(he,Ee,We==he.indented)),T}return z="error",Z}function $(x,ue,he){return"equals"==x?j:(N.allowMissing||(z="error"),Z(x,0,he))}function j(x,ue,he){return"string"==x?ve:"word"==x&&N.allowUnquoted?(z="string",Z):(z="error",Z(x,0,he))}function ve(x,ue,he){return"string"==x?ve:Z(x,0,he)}return le.isInText=!0,{startState:function(x){var ue={tokenize:le,state:T,indented:x||0,tagName:null,tagStart:null,context:null};return null!=x&&(ue.baseIndent=x),ue},token:function(x,ue){if(!ue.tagName&&x.sol()&&(ue.indented=x.indentation()),x.eatSpace())return null;q=null;var he=ue.tokenize(x,ue);return(he||q)&&"comment"!=he&&(z=null,ue.state=ue.state(q||he,x,ue),z&&(he="error"==z?he+" error":z)),he},indent:function(x,ue,he){var Ee=x.context;if(x.tokenize.isInAttribute)return x.tagStart==x.indented?x.stringStartCol+1:x.indented+M;if(Ee&&Ee.noIndent)return k.Pass;if(x.tokenize!=fe&&x.tokenize!=le)return he?he.match(/^(\s*)/)[0].length:0;if(x.tagName)return!1!==N.multilineTagIndentPastTag?x.tagStart+x.tagName.length+2:x.tagStart+M*(N.multilineTagIndentFactor||1);if(N.alignCDATA&&/<!\[CDATA\[/.test(ue))return 0;var We=ue&&/^<(\/)?([\w_:\.-]*)/.exec(ue);if(We&&We[1])for(;Ee;){if(Ee.tagName==We[2]){Ee=Ee.prev;break}if(!N.implicitlyClosed.hasOwnProperty(L(Ee.tagName)))break;Ee=Ee.prev}else if(We)for(;Ee;){var Ue=N.contextGrabbers[L(Ee.tagName)];if(!Ue||!Ue.hasOwnProperty(L(We[2])))break;Ee=Ee.prev}for(;Ee&&Ee.prev&&!Ee.startOfLine;)Ee=Ee.prev;return Ee?Ee.indent+M:x.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:N.htmlMode?"html":"xml",helperType:N.htmlMode?"html":"xml",skipAttribute:function(x){x.state==j&&(x.state=Z)},xmlCurrentTag:function(x){return x.tagName?{name:x.tagName,close:"closeTag"==x.type}:null},xmlCurrentContext:function(x){for(var ue=[],he=x.context;he;he=he.prev)ue.push(he.tagName);return ue.reverse()}}}),k.defineMIME("text/xml","xml"),k.defineMIME("application/xml","xml"),k.mimeModes.hasOwnProperty("text/html")||k.defineMIME("text/html",{name:"xml",htmlMode:!0})}(pe(9475))},2289:(wt,tt,pe)=>{!function(k){var U={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}",mutiCharsPairs:[["*(",")*"]]},H=k.Pos;function V(ee,re){return"pairs"==re&&"string"==typeof ee?ee:"object"==typeof ee&&null!=ee[re]?ee[re]:U[re]}k.defineOption("autoCloseBrackets",!1,function(ee,re,L){L&&L!=k.Init&&(ee.removeKeyMap(s),ee.state.closeBrackets=null),re&&(M(V(re,"pairs")),ee.state.closeBrackets=re,ee.addKeyMap(s))});var s={Backspace:function(ee){var re=se(ee);if(!re||ee.getOption("disableInput"))return k.Pass;for(var L=V(re,"pairs"),W=ee.listSelections(),g=0;g<W.length;g++){if(!W[g].empty())return k.Pass;var S=fe(ee,W[g].head);if(!S||L.indexOf(S)%2!=0)return k.Pass}for(g=W.length-1;g>=0;g--){var T=W[g].head;ee.replaceRange("",H(T.line,T.ch-1),H(T.line,T.ch+1),"+delete")}},Enter:function(ee){var re=se(ee),L=re&&V(re,"explode");if(!L||ee.getOption("disableInput"))return k.Pass;for(var W=ee.listSelections(),g=0;g<W.length;g++){if(!W[g].empty())return k.Pass;var S=fe(ee,W[g].head);if(!S||L.indexOf(S)%2!=0)return k.Pass}ee.operation(function(){var T=ee.lineSeparator()||"\n";ee.replaceSelection(T+T,null),ee.execCommand("goCharLeft"),W=ee.listSelections();for(var R=0;R<W.length;R++){var C=W[R].head.line;ee.indentLine(C,null,!0),ee.indentLine(C+1,null,!0)}})}};function M(ee){for(var re=0;re<ee.length;re++){var L=ee.charAt(re),W="'"+L+"'";s[W]||(s[W]=N(L))}}function N(ee){return function(re){return function(ee,re){var L=se(ee);if(!L||ee.getOption("disableInput"))return k.Pass;var W=V(L,"pairs"),g=W.indexOf(re);if(-1==g)return k.Pass;var S=V(L,"triples"),T=W.charAt(g+1)==re,R=ee.listSelections(),C=g%2==0;const _=V(L,"mutiCharsPairs");var te;let Z,$;for(var j=0;j<R.length;j++){var ue,ve=R[j],x=ve.head,he=ee.getRange(x,H(x.line,x.ch+1));for(const Ge of _){if(Z=Ge[0],Z[Z.length-1]===re)for(let F=1;F<Z.length;F++){const b=ee.getRange(H(x.line,x.ch-F),x);if(Z[Z.length-1-F]!==b){Z=void 0;break}}else Z=void 0;if(Z){$=Ge[1];break}}if(Z)ue="mutiCharsPairs";else if(C&&!ve.empty())ue="surround";else if(!T&&C||he!=re)if(T&&x.ch>1&&S.indexOf(re)>=0&&ee.getRange(H(x.line,x.ch-2),x)==re+re){if(x.ch>2&&/\bstring/.test(ee.getTokenTypeAt(H(x.line,x.ch-2))))return k.Pass;ue="addFour"}else if(T){var Ee=0==x.ch?" ":ee.getRange(H(x.line,x.ch-1),x);if(k.isWordChar(he)||Ee==re||k.isWordChar(Ee))return k.Pass;ue="both"}else{if(!C)return k.Pass;ue="both"}else ue=T&&Fe(ee,x)?"both":S.indexOf(re)>=0&&ee.getRange(x,H(x.line,x.ch+3))==re+re+re?"skipThree":"skip";if(te){if(te!=ue)return k.Pass}else te=ue}var We=g%2?W.charAt(g-1):re,Ue=g%2?re:W.charAt(g+1);ee.operation(function(){if("skip"==te)ee.execCommand("goCharRight");else if("skipThree"==te)for(var Ge=0;Ge<3;Ge++)ee.execCommand("goCharRight");else if("surround"==te){var F=ee.getSelections();for(Ge=0;Ge<F.length;Ge++)F[Ge]=We+F[Ge]+Ue;for(ee.replaceSelections(F,"around"),F=ee.listSelections().slice(),Ge=0;Ge<F.length;Ge++)F[Ge]=z(F[Ge]);ee.setSelections(F)}else if("both"==te)ee.replaceSelection(We+Ue,null),ee.triggerElectric(We+Ue),ee.execCommand("goCharLeft");else if("addFour"==te)ee.replaceSelection(We+We+We+We,"before"),ee.execCommand("goCharRight");else if("mutiCharsPairs"===te){ee.replaceSelection(Z[Z.length-1]+$,null),ee.triggerElectric(Z[Z.length-1]+$);for(let b=0;b<$.length;b++)ee.execCommand("goCharLeft")}})}(re,ee)}}function se(ee){var re=ee.state.closeBrackets;return!re||re.override?re:ee.getModeAt(ee.getCursor()).closeBrackets||re}function z(ee){var re=k.cmpPos(ee.anchor,ee.head)>0;return{anchor:new H(ee.anchor.line,ee.anchor.ch+(re?-1:1)),head:new H(ee.head.line,ee.head.ch+(re?1:-1))}}function fe(ee,re){var L=ee.getRange(H(re.line,re.ch-1),H(re.line,re.ch+1));return 2==L.length?L:null}function Fe(ee,re){var L=ee.getTokenAt(H(re.line,re.ch+1));return/\bstring/.test(L.type)&&L.start==re.ch&&(0==re.ch||!/\bstring/.test(ee.getTokenTypeAt(re)))}M(U.pairs+"`")}(pe(9475))},2408:(wt,tt,pe)=>{"use strict";pe.r(tt),pe.d(tt,{MarkdownEditorModule:()=>Fr});var k=pe(6903),U=pe(2950),H=pe(3476),V=pe(9475),s=pe(8079),M=pe(8513);let N=(()=>{class oe{constructor(P,ae){this.markdownService=P,this.commands=V.commands,this.docContentSet$=new U.x,this.docContentModified$=new U.x,this.docEditorLoaded$=new U.x,ae.currentEditor=this,this.docEditorLoaded$.subscribe(Se=>this.editor=Se)}gotoLine(P){this.editor.focus(),this.editor.setCursor(P),this.editor.execCommand("showInCenter")}selectRange(P,ae,Se,Be){this.editor.focus(),this.editor.setSelection({line:P,ch:ae},{line:Se,ch:Be}),this.editor.execCommand("showInCenter")}replaceRange(P,ae,Se,Be,et){this.editor.replaceRange(P,{line:ae,ch:Se},{line:Be,ch:et})}}return oe.\u0275fac=function(P){return new(P||oe)(s.LFG(H.A),s.LFG(M.d))},oe.\u0275prov=s.Yz7({token:oe,factory:oe.\u0275fac}),oe})();var se=pe(4060),Q=pe(2118),_=(pe(8237),pe(7214),pe(6584),pe(2391),pe(7660),pe(615),pe(1252),pe(102),pe(2946),pe(2289),pe(6571),pe(3613),pe(8209),pe(7838),pe(2265));const te=["host"];let Z=(()=>{class oe extends _.LF{constructor(P,ae){super(),this.editorService=P,this.utils=ae,this.change=new s.vpe,this.focus=new s.vpe,this.blur=new s.vpe,this._value="",super.addSub(this.utils.isWideScreen$.subscribe(Se=>this.showLineNumber=Se))}ngOnInit(){this.config=this.config||{mode:{name:"gfm",highlightFormatting:!0},lineNumbers:this.showLineNumber,lineWrapping:!0,autoCloseBrackets:!0,autoCloseTags:!0,matchBrackets:!0,matchTags:{bothTags:!0},extraKeys:{F11:function(P){P.setOption("fullScreen",!P.getOption("fullScreen"))},Esc:function(P){P.getOption("fullScreen")&&P.setOption("fullScreen",!1)}}}}get value(){return this._value}ngAfterViewInit(){this.codemirrorInit(this.config),this.editorService.docEditorLoaded$.next(this.codemirror)}codemirrorInit(P){this.codemirror=V.fromTextArea(this.host.nativeElement,P),this.codemirror.setValue(this._value),this.codemirror.on("change",()=>{const ae=this.codemirror.getValue();ae!==this._value&&(this._value=ae,this._onChange(ae),this.change.emit(ae),this.editorService.docContentModified$.next(ae))}),this.codemirror.on("cursorActivity",ae=>this.changeCursorStyle(ae)),this.codemirror.on("focus",()=>{this.focus.emit()}),this.codemirror.on("blur",()=>{this._onTouched(),this.blur.emit()})}changeCursorStyle(P){const ae=P.getCursor(),Se=this.codemirror.cursorCoords(ae),Be=document.elementFromPoint(Se.left,Se.top+5),et=P.display.cursorDiv;Be&&Be.className.includes("cm-em")?et.classList.contains("cursor-italic")||et.classList.add("cursor-italic"):et.classList.remove("cursor-italic")}refresh(){this.codemirror.refresh()}_onChange(P){}_onTouched(){}writeValue(P){this.codemirror&&(this._value=P||"",this.codemirror.setValue(this._value),P&&this.editorService.docContentSet$.next(this.codemirror))}registerOnChange(P){this._onChange=P}registerOnTouched(P){this._onTouched=P}setDisabledState(P){this.host.nativeElement.disabled=!0}}return oe.\u0275fac=function(P){return new(P||oe)(s.Y36(N),s.Y36(_.dU))},oe.\u0275cmp=s.Xpm({type:oe,selectors:[["ms-codemirror"]],viewQuery:function(P,ae){if(1&P&&s.Gf(te,5),2&P){let Se;s.iGM(Se=s.CRH())&&(ae.host=Se.first)}},inputs:{config:"config"},outputs:{change:"change",focus:"focus",blur:"blur"},features:[s._Bn([{provide:Q.JU,useExisting:(0,s.Gpc)(()=>oe),multi:!0}]),s.qOj],decls:2,vars:0,consts:[["host",""]],template:function(P,ae){1&P&&s._UZ(0,"textarea",null,0)},encapsulation:2}),oe})();var $=pe(2518),j=pe(6681),ve=pe(1935),x=pe(3860);let ue=(()=>{class oe{constructor(P){this.dialogRef=P}}return oe.\u0275fac=function(P){return new(P||oe)(s.Y36(ve.so))},oe.\u0275cmp=s.Xpm({type:oe,selectors:[["ng-component"]],decls:11,vars:2,consts:[[2,"z-index","1000"],["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(P,ae){1&P&&(s.TgZ(0,"div",0),s.TgZ(1,"h1",1),s._uU(2,"Save?"),s.qZA(),s.TgZ(3,"div",2),s.TgZ(4,"p"),s._uU(5," Document modified, are you want to save? "),s.qZA(),s.qZA(),s.TgZ(6,"div",3),s.TgZ(7,"button",4),s._uU(8,"No"),s.qZA(),s.TgZ(9,"button",5),s._uU(10,"Yes"),s.qZA(),s.qZA(),s.qZA()),2&P&&(s.xp6(7),s.Q6J("mat-dialog-close","No"),s.xp6(2),s.Q6J("mat-dialog-close","Yes"))},directives:[ve.uh,ve.xY,ve.H8,x.lW,ve.ZT],encapsulation:2}),oe})();var he=pe(1744),Ee=pe(7992),We=pe(8854),Ue=pe(7380),Ge=pe(6251),F=pe(2908),b=pe(5649),Me=pe(3550),B=pe(9597),K=pe(3863);let ne=(()=>{class oe extends _.LF{constructor(P,ae,Se){super(),this.editorService=P,this.store=ae,this.documentEffects=Se,this.isSyncing$=new F.X(!1),this.editorLoaded$=this.editorService.docEditorLoaded$,super.addSub(this.store.currentDocStatus_IsEditorDirty$.pipe((0,b.V)(this.editorLoaded$),(0,Me.b)(_.pe),(0,$.b)(([Be,et])=>{Be&&this.documentEffects.saveDocument_.next({content:et.getValue(),format:_.cZ.md})}),(0,_.P0)(8,_.pe))).addSub(this.editorService.docContentSet$.subscribe(Be=>{this.docLoadedHandler(Be)})).addSub(this.editorService.docContentModified$.pipe((0,b.V)(this.editorLoaded$)).subscribe(([Be,et])=>this.checkDirty(et))).addSub(this.documentEffects.saveDocument_.operationStatus$.pipe((0,b.V)(this.editorLoaded$)).subscribe(([Be,et])=>{Be.step===B.m7.Start?(this.docSavedHandler(et),this.isSaving=!0):Be.isEndStatus()&&(this.isSaving=!1)}))}docLoadedHandler(P){const ae=P.getDoc();this.contentGeneration=ae.changeGeneration(),ae.clearHistory(),this.checkDirty(P)}docSavedHandler(P){P&&(this.contentGeneration=P.getDoc().changeGeneration(!1),this.checkDirty(P))}checkDirty(P){let ae=this.store.currentDocStatus$.state;if(ae||(ae={id:this.store.docStatus.currentId_.state,isEditable:!0},this.store.docStatus.set(ae)),!this.contentGeneration)return;const Se=!P.getDoc().isClean(this.contentGeneration);ae.isEditorDirty!==Se&&this.store.updateCurrentDocStatus({isEditorDirty:Se})}}return oe.\u0275fac=function(P){return new(P||oe)(s.LFG(N),s.LFG(K.G),s.LFG(Ge.CL))},oe.\u0275prov=s.Yz7({token:oe,factory:oe.\u0275fac}),oe})();pe(1900),pe(8823),pe(8543);var ge=pe(7826),Ye=pe(6527);const Ke=["imageUpload"],ur=["progress"];function er(oe,be){if(1&oe&&(s.TgZ(0,"span"),s._uU(1),s.qZA()),2&oe){const P=s.oxw();s.xp6(1),s.Oqu(P.data.message)}}function ct(oe,be){if(1&oe&&s._UZ(0,"mat-progress-bar",6,7),2&oe){const P=s.oxw();s.Q6J("value",P.progressPercent)}}function gt(oe,be){if(1&oe){const P=s.EpF();s.TgZ(0,"div",8),s.TgZ(1,"button",9),s.NdJ("click",function(){return s.CHM(P),s.oxw().action()}),s._uU(2),s.qZA(),s.qZA()}if(2&oe){const P=s.oxw();s.xp6(2),s.Oqu(P.data.action)}}let tr=(()=>{class oe{constructor(P,ae){this.data=P,this.snackBarRef=ae,this.progressPercent=0,this.showMessage=!0,this.accept="image/*",this.accept=P.accept}onFileChanged(P){this.selectedFile=P.target.files[0],this.showMessage=!1,this.data.action="cancel",this.data.takeAction(this.selectedFile,ae=>{this.progressPercent=ae})}get hasAction(){return!!this.data.action}action(){"cancel"!==this.data.action?(this.imageUpload.nativeElement.click(),this.data.selectFile(),this.data.action="cancel"):this.data.cancelAction()}}return oe.\u0275fac=function(P){return new(P||oe)(s.Y36(ge.qD),s.Y36(ge.OX))},oe.\u0275cmp=s.Xpm({type:oe,selectors:[["ms-file-upload"]],viewQuery:function(P,ae){if(1&P&&(s.Gf(Ke,5),s.Gf(ur,5)),2&P){let Se;s.iGM(Se=s.CRH())&&(ae.imageUpload=Se.first),s.iGM(Se=s.CRH())&&(ae.progressBar=Se.first)}},decls:7,vars:4,consts:[["type","file",2,"display","none",3,"accept","change"],["imageUpload",""],[1,"mat-simple-snackbar"],[4,"ngIf"],["mode","determinate",3,"value",4,"ngIf"],["class","mat-simple-snackbar-action",4,"ngIf"],["mode","determinate",3,"value"],["progress",""],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(P,ae){1&P&&(s.TgZ(0,"input",0,1),s.NdJ("change",function(Be){return ae.onFileChanged(Be)}),s.qZA(),s.TgZ(2,"div"),s.TgZ(3,"div",2),s.YNc(4,er,2,1,"span",3),s.YNc(5,ct,2,1,"mat-progress-bar",4),s.YNc(6,gt,3,1,"div",5),s.qZA(),s.qZA()),2&P&&(s.Q6J("accept",ae.accept),s.xp6(4),s.Q6J("ngIf",ae.showMessage),s.xp6(1),s.Q6J("ngIf",!ae.showMessage),s.xp6(1),s.Q6J("ngIf",ae.hasAction))},directives:[k.O5,Ye.pW,x.lW],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2}),oe})();var dr=pe(4992),Xt=pe(7737),Tt=pe(3346),It=pe(8453);let Ir=(()=>{class oe{constructor(P,ae,Se){this._snackBar=P,this._github=ae,this._store=Se}upload(P){let ae=null,Se=null;const Be=this._snackBar.openFromComponent(tr,{data:{accept:`${P}/*`,message:`pick ${P} to upload?`,action:"Ok",selectFile:()=>clearTimeout(ae),cancelAction:()=>{Se&&Se.unsubscribe(),console.log(`${P} uploading canceled`),setTimeout(et=>Be.dismiss(),1e3)},takeAction:(et,Zt)=>{const Gt=new FileReader;Gt.onloadend=de=>{const Re=Gt.result,dt=Re.substr(Re.indexOf(",")+1);Se=this._github.init().pipe((0,dr.w)(y=>{const D=this._store.currentId_.state,ie=(new Date).toISOString().replace(/[-:.]/g,"");return y.newFileReportProgress(`${Xt.IQ}/${D}/${P}/${ie}-${et.name}`,dt,!0)})).subscribe({next:y=>{switch(y.type){case Tt.dt.UploadProgress:const D=Math.round(100*y.loaded/y.total);Zt(D);break;case Tt.dt.Response:this.fileUploaded(y.body.content.download_url),Be.dismiss()}},error:y=>{Be.dismiss(),this._snackBar.open(y.error.message,"ok",{duration:2e3}),console.error(y)}})},Gt.readAsDataURL(et)}},duration:0});ae=setTimeout(et=>Be.dismiss(),6e3)}}return oe.\u0275fac=function(P){return new(P||oe)(s.LFG(ge.ux),s.LFG(It.SS),s.LFG(K.G))},oe.\u0275prov=s.Yz7({token:oe,factory:oe.\u0275fac,providedIn:"root"}),oe})(),zr=(()=>{class oe{constructor(P,ae,Se,Be){this._editorService=P,this._commandService=ae,this._uploadService=Se,this.markdownStore=Be,this._commandService.commands.subscribe(et=>this.handleCommand(et)),this._editorService.docEditorLoaded$.subscribe(et=>{oe.COMMANDS_CONFIG||(oe.COMMANDS_CONFIG={Bold:{command:"Bold",func:(de,Re)=>`**${de||Re}**`,startSize:2,hotKey:"Ctrl-M B"},Italic:{command:"Italic",func:(de,Re)=>`*${de||Re}*`,startSize:1,hotKey:"Ctrl-M T"},Heading:{command:"Heading",func:(de,Re)=>`# ${de||Re}`,startSize:2,hotKey:"Ctrl-M H"},Reference:{command:"Reference",func:(de,Re)=>`> ${de||Re}`,startSize:2,hotKey:"Ctrl-M R"},Link:{command:"Link",func:(de,Re)=>`[${de||Re}]()`,endSize:1,hotKey:"Ctrl-M L"},Image:{command:"Image",func:(de,Re)=>`![${de||Re}]()`,endSize:1,hotKey:"Ctrl-M I"},Ul:{command:"Ul",func:(de,Re)=>`- ${de||Re}`,startSize:2,hotKey:"Ctrl-M U"},Ol:{command:"Ol",func:(de,Re)=>`1 ${de||Re}`,startSize:2,hotKey:"Ctrl-M O"},Code:{command:"Code",func:(de,Re,dt)=>{const y=this.editor.getCursor(),D=this.editor.getSearchCursor(/^\s*```[^\S\n\r]*(\S+)/,y);let Ce,ie=D.findPrevious();return ie?Ce=D.pos.match[1]:(ie=D.findNext(),Ce=ie?D.pos.match[1]:""),dt.startSize=Ce?Ce.length+4:3,"```"+Ce+"\r\n"+(de||Re)+"\r\n```"},startSize:3,hotKey:"Ctrl-M C"}}),this.editor=et;const Zt=oe.COMMANDS_CONFIG,Gt={};for(const de in Zt)if(Zt.hasOwnProperty(de)){const dt=this;Gt[Zt[de].hotKey]=function(){dt.insertContent(de)}}this.codeMirrorMaps(Gt)})}codeMirrorMaps(P){P["Ctrl-M Q"]=function(Se){Se.display.input.textarea.blur()},P["Ctrl-Alt-Up"]=()=>{this.markdownStore.scrollView_.next({isUp:!0})},P["Ctrl-Alt-Down"]=()=>{this.markdownStore.scrollView_.next({isUp:!1})},P["Ctrl-Up"]="scrollLineUp",P["Ctrl-G"]="jumpToLine",P["Ctrl-Down"]="scrollLineDown",P["Ctrl-F"]="findPersistent",P["Shift-Delete"]="killLine",P["Shift-Backspace"]="delLineLeft",P["Ctrl-Shift-K"]="deleteLine",P.Home="goLineStart",P.End="goLineEnd",P["Ctrl-Left"]="goWordLeft",P["Ctrl-Right"]="goWordRight",P["Ctrl-Alt-Left"]="goSubwordLeft",P["Ctrl-Alt-Right"]="goSubwordRight",P["Ctrl-Backspace"]="delWordBefore",P["Ctrl-Shift-Backspace"]="delWordAfter",P["Ctrl-Alt-Backspace"]="delGroupBefore",P["Ctrl-Alt-Shift-Backspace"]="delGroupAfter",P.Tab=Se=>{Se.somethingSelected()?Se.indentSelection("add"):Se.execCommand("insertSoftTab")},P["Shift-Tab"]=Se=>{Se.indentSelection("subtract")};const ae=this._commandService.commands;P["Alt-\\"]=ae.goToBracket,P["Alt-Shift-\\"]=ae.selectBetweenBrackets,P["Alt-Shift-Right"]=ae.selectScope,P["Ctrl-Enter"]=ae.insertLineAfter,P["Ctrl-Shift-Enter"]=ae.insertLineBefore,P["Alt-Up"]=ae.swapLineUp,P["Alt-Down"]=ae.swapLineDown,P["Ctrl-/"]=ae.toggleCommentIndented,P["Ctrl-I"]=ae.selectLine,P["Ctrl-D"]=ae.selectNextOccurrence,P["Ctrl-H"]=ae.replace,P.Esc=ae.singleSelectionTop,P["Alt-Shift+Down"]=ae.duplicateLine,P.Backspace=ae.smartBackspace,P["Alt-M"]="showInCenter",P["Ctrl-M M"]=this.insertMeta,this.editor.setOption("extraKeys",V.normalizeKeyMap(P))}insertMeta(P){P.setCursor({line:1,ch:0}),P.replaceSelection(Ee.B0,"start"),P.focus()}handleCommand(P){this.insertContent(P.name)}insertContent(P){if(!this.editor)return;let ae=this.editor.getSelection();if("Focus"===P)return void this.editor.focus();if("Meta"===P)return void this.insertMeta(this.editor);const Se=oe.COMMANDS_CONFIG[P];ae=Se.func(ae,"",Se);const Be=this.editor.getCursor();if(Se.startSize)this.editor.replaceSelection(ae,"start"),this.editor.focus(),this.editor.setCursor({line:Be.line,ch:Be.ch+Se.startSize});else if(Se.endSize){this.editor.replaceSelection(ae,"around");const et=this.editor.getCursor("to");this.editor.focus(),this.editor.setCursor({line:et.line,ch:et.ch-Se.endSize})}"Image"===Se.command&&(this._uploadService.fileUploaded=et=>this.editor.replaceSelection(et),this._uploadService.upload("image"))}}return oe.\u0275fac=function(P){return new(P||oe)(s.LFG(N),s.LFG(_.VD),s.LFG(Ir),s.LFG(H.A))},oe.\u0275prov=s.Yz7({token:oe,factory:oe.\u0275fac}),oe})();var Er=pe(4911),pr=pe(5654),Wt=pe(6923),Dr=pe(955),yt=pe(3196),lt=pe(7733),xt=pe(6134);let ze=(()=>{class oe{constructor(P){this._bottomSheetRef=P,this.changeNote=""}onOk(P){this._bottomSheetRef.dismiss(),P.preventDefault()}}return oe.\u0275fac=function(P){return new(P||oe)(s.Y36(yt.oL))},oe.\u0275cmp=s.Xpm({type:oe,selectors:[["change-note-input"]],decls:7,vars:1,consts:[[1,"input-form"],["appearance","fill",1,"input-field"],["matInput","","placeholder","showed document history",3,"ngModel","ngModelChange","keyup.Enter"],["mat-flat-button","","color","primary",3,"click"]],template:function(P,ae){1&P&&(s.TgZ(0,"div",0),s.TgZ(1,"mat-form-field",1),s.TgZ(2,"mat-label"),s._uU(3,"document change note"),s.qZA(),s.TgZ(4,"input",2),s.NdJ("ngModelChange",function(Be){return ae.changeNote=Be})("keyup.Enter",function(Be){return ae.onOk(Be)}),s.qZA(),s.qZA(),s.TgZ(5,"button",3),s.NdJ("click",function(Be){return ae.onOk(Be)}),s._uU(6,"OK"),s.qZA(),s.qZA()),2&P&&(s.xp6(4),s.Q6J("ngModel",ae.changeNote))},directives:[lt.KE,lt.hX,xt.Nt,Q.Fj,Q.JJ,Q.On,x.lW],styles:[".input-form[_ngcontent-%COMP%]{width:100%;max-width:80rem;display:flex;align-items:center;flex-direction:column}.input-field[_ngcontent-%COMP%]{width:100%}"]}),oe})();var Cr=pe(4478),Ut=pe(6590),mt=pe(3359),qe=pe(7945),Ve=pe(7394),nt=pe(9819),At=pe(9831);function ht(oe,be){if(1&oe){const P=s.EpF();s.TgZ(0,"button",11),s.NdJ("click",function(){return s.CHM(P),s.oxw().insertContent("Bold")}),s.TgZ(1,"mat-icon"),s._uU(2,"format_bold"),s.qZA(),s.qZA()}}function Nr(oe,be){if(1&oe){const P=s.EpF();s.TgZ(0,"button",12),s.NdJ("click",function(){return s.CHM(P),s.oxw().insertContent("Italic")}),s.TgZ(1,"mat-icon"),s._uU(2,"format_italic"),s.qZA(),s.qZA()}}function Ct(oe,be){if(1&oe){const P=s.EpF();s.TgZ(0,"button",13),s.NdJ("click",function(){return s.CHM(P),s.oxw().insertContent("Heading")}),s.TgZ(1,"mat-icon"),s._uU(2,"title"),s.qZA(),s.qZA()}}function vr(oe,be){if(1&oe){const P=s.EpF();s.TgZ(0,"button",14),s.NdJ("click",function(){return s.CHM(P),s.oxw().insertContent("Reference")}),s.TgZ(1,"mat-icon"),s._uU(2,"format_quote"),s.qZA(),s.qZA()}}function rr(oe,be){if(1&oe){const P=s.EpF();s.TgZ(0,"button",15),s.NdJ("click",function(){return s.CHM(P),s.oxw().insertContent("Ul")}),s.TgZ(1,"mat-icon"),s._uU(2,"format_list_bulleted"),s.qZA(),s.qZA()}}function on(oe,be){if(1&oe){const P=s.EpF();s.TgZ(0,"button",16),s.NdJ("click",function(){return s.CHM(P),s.oxw().insertContent("Ol")}),s.TgZ(1,"mat-icon"),s._uU(2,"format_list_numbered"),s.qZA(),s.qZA()}}function Br(oe,be){if(1&oe){const P=s.EpF();s.TgZ(0,"button",17),s.NdJ("click",function(){return s.CHM(P),s.oxw().insertContent("Code")}),s.TgZ(1,"mat-icon"),s._uU(2,"code"),s.qZA(),s.qZA()}}function Kr(oe,be){if(1&oe){const P=s.EpF();s.TgZ(0,"button",18),s.NdJ("click",function(){return s.CHM(P),s.oxw().insertContent("Link")}),s.TgZ(1,"mat-icon"),s._uU(2,"link"),s.qZA(),s.qZA()}}function Jr(oe,be){if(1&oe){const P=s.EpF();s.TgZ(0,"button",19),s.NdJ("click",function(){return s.CHM(P),s.oxw().insertContent("Image")}),s.TgZ(1,"mat-icon"),s._uU(2,"image"),s.qZA(),s.qZA()}}const zt=function(oe){return{"tool-bar--bottom":oe}};let Qr=(()=>{class oe{constructor(P,ae,Se){this._verticalSplitPane=P,this._utils=ae,this._keyMapService=Se,this._destroy$=new U.x,this.isScreenWide$=this._utils.isWideScreen$,this.more=()=>{},this._hideIcons={Ol:!1,Italic:!1,Link:!1},this._verticalSplitPane.notifySizeDidChange.pipe((0,At.R)(this._destroy$)).subscribe(Be=>{this.width!==Be.primary&&(this.width=`${Be.primary}px`)})}get options(){return this._options}insertContent(P){this._keyMapService.insertContent(P)}set options(P){this._options=P||{hideIcons:[]},this._hideIcons={},(this._options.hideIcons||[]).forEach(ae=>{this._hideIcons[ae]=!0})}ngOnDestroy(){this._destroy$.next(null)}}return oe.\u0275fac=function(P){return new(P||oe)(s.Y36(Ee.Mi),s.Y36(_.dU),s.Y36(zr))},oe.\u0275cmp=s.Xpm({type:oe,selectors:[["ms-codemirror-toolbar"]],hostVars:2,hostBindings:function(P,ae){2&P&&s.Udp("width",ae.width)},inputs:{options:"options"},decls:14,vars:14,consts:[[1,"tool-bar",2,"height","3.8rem",3,"ngClass"],["mat-icon-button","","title","Bold",3,"click",4,"ngIf"],["mat-icon-button","","title","Italic",3,"click",4,"ngIf"],["mat-icon-button","","title","Heading",3,"click",4,"ngIf"],["mat-icon-button","","title","Reference",3,"click",4,"ngIf"],["mat-icon-button","","title","Unordered List",3,"click",4,"ngIf"],["mat-icon-button","","title","Ordered List",3,"click",4,"ngIf"],["mat-icon-button","","title","Code Block",3,"click",4,"ngIf"],["mat-icon-button","","title","Link",3,"click",4,"ngIf"],["mat-icon-button","","title","Image",3,"click",4,"ngIf"],["mat-icon-button","","title","Meta Data",3,"click"],["mat-icon-button","","title","Bold",3,"click"],["mat-icon-button","","title","Italic",3,"click"],["mat-icon-button","","title","Heading",3,"click"],["mat-icon-button","","title","Reference",3,"click"],["mat-icon-button","","title","Unordered List",3,"click"],["mat-icon-button","","title","Ordered List",3,"click"],["mat-icon-button","","title","Code Block",3,"click"],["mat-icon-button","","title","Link",3,"click"],["mat-icon-button","","title","Image",3,"click"]],template:function(P,ae){1&P&&(s.TgZ(0,"mat-toolbar",0),s.ALo(1,"async"),s.YNc(2,ht,3,0,"button",1),s.YNc(3,Nr,3,0,"button",2),s.YNc(4,Ct,3,0,"button",3),s.YNc(5,vr,3,0,"button",4),s.YNc(6,rr,3,0,"button",5),s.YNc(7,on,3,0,"button",6),s.YNc(8,Br,3,0,"button",7),s.YNc(9,Kr,3,0,"button",8),s.YNc(10,Jr,3,0,"button",9),s.TgZ(11,"button",10),s.NdJ("click",function(){return ae.insertContent("Meta")}),s.TgZ(12,"mat-icon"),s._uU(13,"receipt"),s.qZA(),s.qZA(),s.qZA()),2&P&&(s.Q6J("ngClass",s.VKq(12,zt,!1===s.lcZ(1,10,ae.isScreenWide$))),s.xp6(2),s.Q6J("ngIf",!ae._hideIcons.Bold),s.xp6(1),s.Q6J("ngIf",!ae._hideIcons.Italic),s.xp6(1),s.Q6J("ngIf",!ae._hideIcons.Heading),s.xp6(1),s.Q6J("ngIf",!ae._hideIcons.Refrence),s.xp6(1),s.Q6J("ngIf",!ae._hideIcons.Ul),s.xp6(1),s.Q6J("ngIf",!ae._hideIcons.Ol),s.xp6(1),s.Q6J("ngIf",!ae._hideIcons.Code),s.xp6(1),s.Q6J("ngIf",!ae._hideIcons.Link),s.xp6(1),s.Q6J("ngIf",!ae._hideIcons.Image))},directives:[qe.Ye,k.mk,k.O5,x.lW,Ve.Hw],pipes:[k.Ov],styles:[".tool-bar--bottom[_ngcontent-%COMP%]{position:fixed;bottom:0;padding:0;overflow-x:auto;overflow-y:hidden}.tool-bar[_ngcontent-%COMP%]{background:whitesmoke;z-index:8}[_nghost-%COMP%]{z-index:10;display:block}"]}),oe})();const qr=["toolbar"];function Kt(oe,be){if(1&oe){const P=s.EpF();s.TgZ(0,"button",4),s.NdJ("click",function(){return s.CHM(P),s.oxw().togglePreview()}),s.TgZ(1,"mat-icon"),s._uU(2),s.ALo(3,"async"),s.qZA(),s.qZA()}if(2&oe){const P=s.oxw();s.xp6(2),s.Oqu((s.lcZ(3,1,P.showPreview$),"chrome_reader_mode"))}}function Xr(oe,be){if(1&oe){const P=s.EpF();s.TgZ(0,"button",10),s.NdJ("click",function(Se){return s.CHM(P),s.oxw().more(Se)}),s._uU(1),s.qZA()}if(2&oe){const P=s.oxw();s.xp6(1),s.hij(" ",P.lockScrollWithView?"UnLock Scroll":"Lock Scroll"," ")}}let Zr=(()=>{class oe extends Dr.LF{constructor(P,ae,Se,Be,et,Zt,Gt,de,Re,dt,y){super(),this.router=P,this.utils=ae,this.markdown=Se,this._editorService=Be,this.docService=et,this.store=Zt,this.bottomSheet=Gt,this.docSaver=de,this._breakpointObserver=Re,this.documentEffects=dt,this.markdownStore=y,this.DocumentMode=H.U,this.isScreenWide$=this.utils.isWideScreen$,this.isEditorDirty$=this.store.currentDocStatus_IsEditorDirty$.pipe((0,Wt.O)(!1)),this.isDbDirty$=this.store.currentDocStatus_IsDbDirty$.pipe((0,Wt.O)(!1)),this.isSyncing$=this.store.currentDocStatus_IsSyncing$.pipe((0,Wt.O)(!1)),this.dirtyInfo$=(0,Er.a)([this.isEditorDirty$,this.isDbDirty$,this.isSyncing$]).pipe((0,j.U)(([ie,Ce,Le])=>ie?"modification not saved":Ce?"modification not sync with server":Le?"syncing modification with server":"")),this.showPreview$=this.markdownStore.editWithPreview_,this.logger=(0,_.eI)(console,"@MarkdownEditorToolbar"),this.onSave=()=>{const ie=this.editor.getValue();if(this.store.currentDocStatus_IsEditorDirty$.state){const Ce=this.bottomSheet.open(ze);Ce.afterDismissed().subscribe(Le=>{this.documentEffects.saveDocument_.next({content:ie,format:_.cZ.md,forceUpdate:!0,changeLog:Ce.instance.changeNote})})}else this.logger.debug("it seems the document is not dirty."),this.documentEffects.saveDocument_.next({content:ie,format:_.cZ.md,forceUpdate:!0,changeLog:""})},this.undo=()=>{!this.editor||this.editor.undo()},this.redo=()=>{!this.editor||this.editor.redo()},this.toViewMode=()=>{this.markdownStore.documentMode_.next(H.U.View)},this.new=()=>{this.documentEffects.createDocument_.next({format:_.cZ.md})},this.lockScrollWithView=!1,super.addSub(this._breakpointObserver.observe(["(orientation: portrait)","(orientation: landscape)"])).addSub(this._editorService.docEditorLoaded$.subscribe(ie=>{this.editor=ie})).addSub(this.store.currentDocStatus_IsEditable$.pipe((0,$.b)(ie=>{ie||this.toViewMode()})));const D=this._editorService.commands;D.save=this.onSave,D.scrollLineUp=function(ie){const Ce=ie.getScrollInfo();if(!ie.somethingSelected()){const Le=ie.lineAtHeight(Ce.top+Ce.clientHeight,"local");ie.getCursor().line>=Le&&ie.execCommand("goLineUp")}ie.scrollTo(null,Ce.top-ie.defaultTextHeight())},D.scrollLineDown=function(ie){const Ce=ie.getScrollInfo();if(!ie.somethingSelected()){const Le=ie.lineAtHeight(Ce.top,"local")+1;ie.getCursor().line<=Le&&ie.execCommand("goLineDown")}ie.scrollTo(null,Ce.top+ie.defaultTextHeight())}}back(P){this.router.navigateByUrl("/home")}togglePreview(){this.markdownStore.editWithPreview_.next(!this.markdownStore.editWithPreview_.state)}ngAfterViewInit(){this.hideHeight=this.toolbar.nativeElement.offsetHeight}previewPanelClick(P){P.preventDefault(),P.stopPropagation()}more(P){"0"===P.item.id&&(this.lockScrollWithView=!this.lockScrollWithView,this.markdownStore.isLockEditorScrollWithView_.next(this.lockScrollWithView))}}return oe.\u0275fac=function(P){return new(P||oe)(s.Y36(se.F0),s.Y36(Dr.dU),s.Y36(Cr.l),s.Y36(N),s.Y36(Ut.R7),s.Y36(K.G),s.Y36(yt.ch),s.Y36(ne),s.Y36(mt.Yg),s.Y36(Ge.CL),s.Y36(H.A))},oe.\u0275cmp=s.Xpm({type:oe,selectors:[["editor-toolbar"]],viewQuery:function(P,ae){if(1&P&&s.Gf(qr,5,s.SBq),2&P){let Se;s.iGM(Se=s.CRH())&&(ae.toolbar=Se.first)}},features:[s.qOj],decls:38,vars:22,consts:[["color","primary",2,"z-index","20","pointer-events","all"],["toolbar",""],["mat-icon-button","","routerLinkActive","",3,"click"],[2,"flex","1 1 auto","margin","2.4rem"],["mat-icon-button","",3,"click"],["mat-icon-button","",3,"title","click"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu",""],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-menu-item","","disabled","",3,"click"],[2,"pointer-events","all"]],template:function(P,ae){if(1&P&&(s.TgZ(0,"mat-toolbar",0,1),s.TgZ(2,"mat-toolbar-row"),s.TgZ(3,"button",2),s.NdJ("click",function(Be){return ae.back(Be)}),s.TgZ(4,"mat-icon"),s._uU(5," arrow_back "),s.qZA(),s.qZA(),s.TgZ(6,"span",3),s._uU(7,"Edit"),s.qZA(),s.TgZ(8,"button",4),s.NdJ("click",function(){return ae.undo()}),s.TgZ(9,"mat-icon"),s._uU(10," undo "),s.qZA(),s.qZA(),s.TgZ(11,"button",4),s.NdJ("click",function(){return ae.redo()}),s.TgZ(12,"mat-icon"),s._uU(13," redo "),s.qZA(),s.qZA(),s.TgZ(14,"button",5),s.NdJ("click",function(){return ae.onSave()}),s.ALo(15,"async"),s.ALo(16,"async"),s.ALo(17,"async"),s.ALo(18,"async"),s.TgZ(19,"mat-icon"),s._uU(20,"save"),s.qZA(),s.qZA(),s.YNc(21,Kt,4,3,"button",6),s.ALo(22,"async"),s.TgZ(23,"button",4),s.NdJ("click",function(){return ae.toViewMode()}),s.TgZ(24,"mat-icon"),s._uU(25," visibility "),s.qZA(),s.qZA(),s.TgZ(26,"button",7),s.TgZ(27,"mat-icon"),s._uU(28," more_vert "),s.qZA(),s.qZA(),s.TgZ(29,"mat-menu",null,8),s.YNc(31,Xr,2,1,"button",9),s.ALo(32,"async"),s.TgZ(33,"button",10),s.NdJ("click",function(Be){return ae.more(Be)}),s._uU(34,"Key Map"),s.qZA(),s.TgZ(35,"button",11),s.NdJ("click",function(Be){return ae.more(Be)}),s._uU(36,"Item 2"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s._UZ(37,"ms-codemirror-toolbar",12)),2&P){const Se=s.MAs(30);s.xp6(14),s.ekj("mem-dirty",s.lcZ(15,10,ae.isEditorDirty$))("db-dirty",s.lcZ(16,12,ae.isDbDirty$))("net-syncing",s.lcZ(17,14,ae.isSyncing$)),s.Q6J("title",s.lcZ(18,16,ae.dirtyInfo$)),s.xp6(7),s.Q6J("ngIf",s.lcZ(22,18,ae.isScreenWide$)),s.xp6(5),s.Q6J("matMenuTriggerFor",Se),s.xp6(5),s.Q6J("ngIf",s.lcZ(32,20,ae.isScreenWide$))}},directives:[qe.Ye,qe.rD,x.lW,Ve.Hw,k.O5,nt.p6,nt.VK,nt.OP,Qr],pipes:[k.Ov],styles:['@charset "UTF-8";[_nghost-%COMP%]{pointer-events:none}a[_ngcontent-%COMP%]:hover{color:#ffffffb3;text-decoration:none}.mem-dirty[_ngcontent-%COMP%]:before{content:" \\25cf";font-size:1.34rem;color:red;margin-top:.6rem;margin-left:.9rem;position:absolute}.db-dirty[_ngcontent-%COMP%]{color:#4169e1}.net-syncing[_ngcontent-%COMP%]:after{margin-top:-1em;margin-left:.4em;content:"";display:inherit;border:3px solid #f3f3f3;border-radius:50%;border-top:3px solid #3498db;width:13px;height:13px;animation:spin 1.8s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}'],data:{animation:[(0,pr.X$)("show",[(0,pr.SB)("true",(0,pr.oB)({opacity:1,transform:"translateY(0)"})),(0,pr.eR)("void => true",[(0,pr.oB)({opacity:0,transform:"translateY(-100%)"}),(0,pr.jt)("0.2s ease-in")]),(0,pr.eR)("true => void",[(0,pr.jt)("0.2s ease-out",(0,pr.oB)({opacity:0,transform:"translateY(-100%)"}))])])]}}),oe})();var nr=pe(692),Vr=pe(9038);const Vt=function(oe){return{container$:oe}},Et=function(oe,be){return[oe,be]};let gr=(()=>{class oe extends Ue.L{constructor(P,ae,Se,Be,et,Zt,Gt,de,Re){super(),this.documentEffects=P,this._elementRef=ae,this.dialog=Se,this.markdownStore=Be,this.gestureConfig=et,this.editorService=Zt,this.store=Gt,this.ngZone=de,this.utils=Re,this.editorLoaded=!1,this.DocumentMode=H.U,this.docMode$=this.markdownStore.documentMode_,this.markdown$=this.store.currentDocContentString$,this.toViewMode=dt=>{this.markdownStore.documentMode_.next(H.U.View)},super.addSub(this.editorService.docEditorLoaded$.subscribe(()=>{setTimeout(()=>this.editorLoaded=!0,0)})).addSub(this.markdownStore.editIt_.subscribe(({sourceLine:dt}={})=>{!dt||(this.markdownStore.documentMode_.next(H.U.Edit),setTimeout(()=>{this.editorService.gotoLine(dt[0])},0))})).addSub(this.editorService.docContentModified$.subscribe(this.markdownStore.editorContentChanged_)).addSub(this.docMode$.subscribe(dt=>{dt===H.U.Edit&&setTimeout(()=>this.codeMirrorComponent.refresh(),0)}))}ngAfterViewInit(){const P=this._elementRef.nativeElement.getElementsByClassName("CodeMirror-scroll")[0];this.markdownStore.editor_.next(new _.vR(P,void 0,void 0,this.ngZone));let ae=null;super.addSub(this.utils.isWideScreen$.pipe((0,$.b)(Se=>{Se?ae&&(ae.off("swiperight"),ae.off("swipeleft"),ae.destroy(),ae=null):null===ae&&(ae=this.gestureConfig.buildHammer(P),ae.on("swiperight",this.toViewMode),ae.on("swipeleft",this.toViewMode))})).subscribe())}canDeactivate(){const P=()=>{const Se=this.store.currentId_.state;Se===Ee.h2&&this.documentEffects.deleteDocument_.next({id:Se})},ae=this.store.currentDocStatus$.state;return(null==ae?void 0:ae.isEditorDirty)?this.dialog.open(ue).afterClosed().pipe((0,j.U)(Se=>"Yes"===Se?(this.documentEffects.saveDocument_.next({content:this.codeMirrorComponent.value,forceUpdate:!0}),!1):(P(),!0))):(P(),(0,he.of)(!0))}}return oe.\u0275fac=function(P){return new(P||oe)(s.Y36(Ge.CL),s.Y36(s.SBq),s.Y36(ve.uw),s.Y36(H.A),s.Y36(We.ok),s.Y36(N),s.Y36(K.G),s.Y36(s.R0b),s.Y36(_.dU))},oe.\u0275cmp=s.Xpm({type:oe,selectors:[["ms-markdown-editor"]],viewQuery:function(P,ae){if(1&P&&s.Gf(Z,5),2&P){let Se;s.iGM(Se=s.CRH())&&(ae.codeMirrorComponent=Se.first)}},features:[s.qOj],decls:6,vars:16,consts:[[2,"z-index","1002",3,"scrollHide","hide","hideHeight"],["toolbar",""],[3,"ngModel"],[3,"isRunning"]],template:function(P,ae){if(1&P&&(s._UZ(0,"editor-toolbar",0,1),s.ALo(2,"async"),s._UZ(3,"ms-codemirror",2),s.ALo(4,"async"),s._UZ(5,"sk-cube-grid",3)),2&P){const Se=s.MAs(1);s.Q6J("scrollHide",s.WLB(13,Et,s.VKq(9,Vt,ae.markdownStore.viewer_),s.VKq(11,Vt,ae.markdownStore.editor_)))("hide",s.lcZ(2,5,ae.docMode$)!==ae.DocumentMode.Edit)("hideHeight",Se.hideHeight),s.xp6(3),s.Q6J("ngModel",s.lcZ(4,7,ae.markdown$)),s.xp6(2),s.Q6J("isRunning",!ae.editorLoaded)}},directives:[Zr,nr.M,Z,Q.JJ,Q.On,Vr.r],pipes:[k.Ov],styles:["[_nghost-%COMP%]{display:block;height:100vh;overflow-y:auto}"]}),oe})();const Rr=[{path:"",canDeactivate:[_.Ic],component:gr}];let fr=(()=>{class oe{}return oe.\u0275fac=function(P){return new(P||oe)},oe.\u0275mod=s.oAB({type:oe}),oe.\u0275inj=s.cJS({imports:[[se.Bz.forChild(Rr)],se.Bz]}),oe})();var Lr=pe(7643),an=pe(5757),ir=pe(6599);let or=(()=>{class oe{}return oe.\u0275fac=function(P){return new(P||oe)},oe.\u0275mod=s.oAB({type:oe}),oe.\u0275inj=s.cJS({providers:[],imports:[[k.ez,yt._r,qe.g0,Ve.Ps,lt.lN,xt.c,x.ot,nt.Tx,Q.UX,Q.u5]]}),oe})(),Fr=(()=>{class oe{constructor(P){this.editor=P}}return oe.\u0275fac=function(P){return new(P||oe)(s.LFG(N))},oe.\u0275mod=s.oAB({type:oe}),oe.\u0275inj=s.cJS({providers:[zr,N,ne,ir.I],imports:[[Ee.m8,k.ez,Q.u5,Lr.Fm,or,fr,an.q]]}),oe})()}}]);