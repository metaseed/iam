(self.webpackChunkiam=self.webpackChunkiam||[]).push([["src_app_modules_markdown_editor_markdown-editor_module_ts"],{7838:(bt,rt,pe)=>{!function(k){"use strict";var L={},_=/[^\s\u00a0]/,Q=k.Pos,f=k.cmpPos;function E(X){var q=X.search(_);return-1==q?0:q}function se(X,q){var z=X.getMode();return!1!==z.useInnerComments&&z.innerMode?X.getModeAt(q):z}k.commands.toggleComment=function(X){X.toggleComment()},k.defineExtension("toggleComment",function(X){X||(X=L);for(var q=this,z=1/0,ue=this.listSelections(),ce=null,Fe=ue.length-1;Fe>=0;Fe--){var te=ue[Fe].from(),ie=ue[Fe].to();te.line>=z||(ie.line>=z&&(ie=Q(z,0)),z=te.line,null==ce?q.uncomment(te,ie,X)?ce="un":(q.lineComment(te,ie,X),ce="line"):"un"==ce?q.uncomment(te,ie,X):q.lineComment(te,ie,X))}}),k.defineExtension("lineComment",function(X,q,z){z||(z=L);var ue=this,ce=se(ue,X),Fe=ue.getLine(X.line);if(null!=Fe&&!function(X,q,z){return/\bstring\b/.test(X.getTokenTypeAt(Q(q.line,0)))&&!/^[\'\"\`]/.test(z)}(ue,X,Fe)){var te=z.lineComment||ce.lineComment;if(!te)return void((z.blockCommentStart||ce.blockCommentStart)&&(z.fullLines=!0,ue.blockComment(X,q,z)));var ie=Math.min(0!=q.ch||q.line==X.line?q.line+1:q.line,ue.lastLine()+1),T=null==z.padding?" ":z.padding,W=z.commentBlankLines||X.line==q.line;ue.operation(function(){if(z.indent){for(var g=null,w=X.line;w<ie;++w){var P=(M=ue.getLine(w)).slice(0,E(M));(null==g||g.length>P.length)&&(g=P)}for(w=X.line;w<ie;++w){var M=ue.getLine(w),b=g.length;!W&&!_.test(M)||(M.slice(0,b)!=g&&(b=E(M)),ue.replaceRange(g+te+T,Q(w,0),Q(w,b)))}}else for(w=X.line;w<ie;++w)(W||_.test(ue.getLine(w)))&&ue.replaceRange(te+T,Q(w,0))})}}),k.defineExtension("blockComment",function(X,q,z){z||(z=L);var ue=this,ce=se(ue,X),Fe=z.blockCommentStart||ce.blockCommentStart,te=z.blockCommentEnd||ce.blockCommentEnd;if(Fe&&te){if(!/\bcomment\b/.test(ue.getTokenTypeAt(Q(X.line,0)))){var ie=Math.min(q.line,ue.lastLine());ie!=X.line&&0==q.ch&&_.test(ue.getLine(ie))&&--ie;var T=null==z.padding?" ":z.padding;X.line>ie||ue.operation(function(){if(0!=z.fullLines){var W=_.test(ue.getLine(ie));ue.replaceRange(T+te,Q(ie)),ue.replaceRange(Fe+T,Q(X.line,0));var g=z.blockCommentLead||ce.blockCommentLead;if(null!=g)for(var w=X.line+1;w<=ie;++w)(w!=ie||W)&&ue.replaceRange(g+T,Q(w,0))}else{var M=0==f(ue.getCursor("to"),q),P=!ue.somethingSelected();ue.replaceRange(te,q),M&&ue.setSelection(P?q:ue.getCursor("from"),q),ue.replaceRange(Fe,X)}})}}else(z.lineComment||ce.lineComment)&&0!=z.fullLines&&ue.lineComment(X,q,z)}),k.defineExtension("uncomment",function(X,q,z){z||(z=L);var g,ue=this,ce=se(ue,X),Fe=Math.min(0!=q.ch||q.line==X.line?q.line:q.line-1,ue.lastLine()),te=Math.min(X.line,Fe),ie=z.lineComment||ce.lineComment,T=[],W=null==z.padding?" ":z.padding;e:if(ie){for(var w=te;w<=Fe;++w){var M=ue.getLine(w),P=M.indexOf(ie);if(P>-1&&!/comment/.test(ue.getTokenTypeAt(Q(w,P+1)))&&(P=-1),-1==P&&_.test(M)||P>-1&&_.test(M.slice(0,P)))break e;T.push(M)}if(ue.operation(function(){for(var ze=te;ze<=Fe;++ze){var Ge=T[ze-te],O=Ge.indexOf(ie),C=O+ie.length;O<0||(Ge.slice(C,C+W.length)==W&&(C+=W.length),g=!0,ue.replaceRange("",Q(ze,O),Q(ze,C)))}}),g)return!0}var b=z.blockCommentStart||ce.blockCommentStart,U=z.blockCommentEnd||ce.blockCommentEnd;if(!b||!U)return!1;var re=z.blockCommentLead||ce.blockCommentLead,K=ue.getLine(te),ee=K.indexOf(b);if(-1==ee)return!1;var G=Fe==te?K:ue.getLine(Fe),xe=G.indexOf(U,Fe==te?ee+b.length:0),x=Q(te,ee+1),fe=Q(Fe,xe+1);if(-1==xe||!/comment/.test(ue.getTokenTypeAt(x))||!/comment/.test(ue.getTokenTypeAt(fe))||ue.getRange(x,fe,"\n").indexOf(U)>-1)return!1;var he=K.lastIndexOf(b,X.ch),Ee=-1==he?-1:K.slice(0,X.ch).indexOf(U,he+b.length);if(-1!=he&&-1!=Ee&&Ee+U.length!=X.ch)return!1;Ee=G.indexOf(U,q.ch);var We=G.slice(q.ch).lastIndexOf(b,Ee-q.ch);return he=-1==Ee||-1==We?-1:q.ch+We,(-1==Ee||-1==he||he==q.ch)&&(ue.operation(function(){ue.replaceRange("",Q(Fe,xe-(W&&G.slice(xe-W.length,xe)==W?W.length:0)),Q(Fe,xe+U.length));var ze=ee+b.length;if(W&&K.slice(ze,ze+W.length)==W&&(ze+=W.length),ue.replaceRange("",Q(te,ee),Q(te,ze)),re)for(var Ge=te+1;Ge<=Fe;++Ge){var O=ue.getLine(Ge),C=O.indexOf(re);if(-1!=C&&!_.test(O.slice(0,C))){var Ae=C+re.length;W&&O.slice(Ae,Ae+W.length)==W&&(Ae+=W.length),ue.replaceRange("",Q(Ge,C),Q(Ge,Ae))}}}),!0)})}(pe(9475))},6584:(bt,rt,pe)=>{!function(k){function L(Q,f,E){var se,B=Q.getWrapperElement();return(se=B.appendChild(document.createElement("div"))).className=E?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof f?se.innerHTML=f:se.appendChild(f),k.addClass(B,"dialog-opened"),se}function _(Q,f){Q.state.currentNotificationClose&&Q.state.currentNotificationClose(),Q.state.currentNotificationClose=f}k.defineExtension("openDialog",function(Q,f,E){E||(E={}),_(this,null);var B=L(this,Q,E.bottom),se=!1,X=this;function q(ce){if("string"==typeof ce)z.value=ce;else{if(se)return;se=!0,k.rmClass(B.parentNode,"dialog-opened"),B.parentNode.removeChild(B),X.focus(),E.onClose&&E.onClose(B)}}var ue,z=B.getElementsByTagName("input")[0];return z?(z.focus(),E.value&&(z.value=E.value,!1!==E.selectValueOnOpen&&z.select()),E.onInput&&k.on(z,"input",function(ce){E.onInput(ce,z.value,q)}),E.onKeyUp&&k.on(z,"keyup",function(ce){E.onKeyUp(ce,z.value,q)}),k.on(z,"keydown",function(ce){E&&E.onKeyDown&&E.onKeyDown(ce,z.value,q)||((27==ce.keyCode||!1!==E.closeOnEnter&&13==ce.keyCode)&&(z.blur(),k.e_stop(ce),q()),13==ce.keyCode&&f(z.value,ce))}),!1!==E.closeOnBlur&&k.on(B,"focusout",function(ce){null!==ce.relatedTarget&&q()})):(ue=B.getElementsByTagName("button")[0])&&(k.on(ue,"click",function(){q(),X.focus()}),!1!==E.closeOnBlur&&k.on(ue,"blur",q),ue.focus()),q}),k.defineExtension("openConfirm",function(Q,f,E){_(this,null);var B=L(this,Q,E&&E.bottom),se=B.getElementsByTagName("button"),X=!1,q=this,z=1;function ue(){X||(X=!0,k.rmClass(B.parentNode,"dialog-opened"),B.parentNode.removeChild(B),q.focus())}se[0].focus();for(var ce=0;ce<se.length;++ce){var Fe=se[ce];(function(te){k.on(Fe,"click",function(ie){k.e_preventDefault(ie),ue(),te&&te(q)})})(f[ce]),k.on(Fe,"blur",function(){--z,setTimeout(function(){z<=0&&ue()},200)}),k.on(Fe,"focus",function(){++z})}}),k.defineExtension("openNotification",function(Q,f){_(this,q);var se,E=L(this,Q,f&&f.bottom),B=!1,X=f&&void 0!==f.duration?f.duration:5e3;function q(){B||(B=!0,clearTimeout(se),k.rmClass(E.parentNode,"dialog-opened"),E.parentNode.removeChild(E))}return k.on(E,"click",function(z){k.e_preventDefault(z),q()}),X&&(se=setTimeout(q,X)),q})}(pe(9475))},8237:(bt,rt,pe)=>{!function(k){"use strict";k.defineOption("fullScreen",!1,function(Q,f,E){E==k.Init&&(E=!1),!E!=!f&&(f?function(Q){var f=Q.getWrapperElement();Q.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:f.style.width,height:f.style.height},f.style.width="",f.style.height="auto",f.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",Q.refresh()}(Q):function(Q){var f=Q.getWrapperElement();f.className=f.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var E=Q.state.fullScreenRestore;f.style.width=E.width,f.style.height=E.height,window.scrollTo(E.scrollLeft,E.scrollTop),Q.refresh()}(Q))})}(pe(9475))},2946:(bt,rt,pe)=>{!function(k){var L=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),_=k.Pos,Q={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function f(z){return z&&z.bracketRegex||/[(){}[\]]/}function E(z,ue,ce){var Fe=z.getLineHandle(ue.line),te=ue.ch-1,ie=ce&&ce.afterCursor;null==ie&&(ie=/(^| )cm-fat-cursor($| )/.test(z.getWrapperElement().className));var T=f(ce),W=!ie&&te>=0&&T.test(Fe.text.charAt(te))&&Q[Fe.text.charAt(te)]||T.test(Fe.text.charAt(te+1))&&Q[Fe.text.charAt(++te)];if(!W)return null;var g=">"==W.charAt(1)?1:-1;if(ce&&ce.strict&&g>0!=(te==ue.ch))return null;var w=z.getTokenTypeAt(_(ue.line,te+1)),M=B(z,_(ue.line,te+(g>0?1:0)),g,w,ce);return null==M?null:{from:_(ue.line,te),to:M&&M.pos,match:M&&M.ch==W.charAt(0),forward:g>0}}function B(z,ue,ce,Fe,te){for(var ie=te&&te.maxScanLineLength||1e4,T=te&&te.maxScanLines||1e3,W=[],g=f(te),w=ce>0?Math.min(ue.line+T,z.lastLine()+1):Math.max(z.firstLine()-1,ue.line-T),M=ue.line;M!=w;M+=ce){var P=z.getLine(M);if(P){var b=ce>0?0:P.length-1,U=ce>0?P.length:-1;if(!(P.length>ie))for(M==ue.line&&(b=ue.ch-(ce<0?1:0));b!=U;b+=ce){var re=P.charAt(b);if(g.test(re)&&(void 0===Fe||(z.getTokenTypeAt(_(M,b+1))||"")==(Fe||""))){var K=Q[re];if(K&&">"==K.charAt(1)==ce>0)W.push(re);else{if(!W.length)return{pos:_(M,b),ch:re};W.pop()}}}}}return M-ce!=(ce>0?z.lastLine():z.firstLine())&&null}function se(z,ue,ce){for(var Fe=z.state.matchBrackets.maxHighlightLineLength||1e3,te=ce&&ce.highlightNonMatching,ie=[],T=z.listSelections(),W=0;W<T.length;W++){var g=T[W].empty()&&E(z,T[W].head,ce);if(g&&(g.match||!1!==te)&&z.getLine(g.from.line).length<=Fe){var w=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";ie.push(z.markText(g.from,_(g.from.line,g.from.ch+1),{className:w})),g.to&&z.getLine(g.to.line).length<=Fe&&ie.push(z.markText(g.to,_(g.to.line,g.to.ch+1),{className:w}))}}if(ie.length){L&&z.state.focused&&z.focus();var M=function(){z.operation(function(){for(var P=0;P<ie.length;P++)ie[P].clear()})};if(!ue)return M;setTimeout(M,800)}}function X(z){z.operation(function(){z.state.matchBrackets.currentlyHighlighted&&(z.state.matchBrackets.currentlyHighlighted(),z.state.matchBrackets.currentlyHighlighted=null),z.state.matchBrackets.currentlyHighlighted=se(z,!1,z.state.matchBrackets)})}function q(z){z.state.matchBrackets&&z.state.matchBrackets.currentlyHighlighted&&(z.state.matchBrackets.currentlyHighlighted(),z.state.matchBrackets.currentlyHighlighted=null)}k.defineOption("matchBrackets",!1,function(z,ue,ce){ce&&ce!=k.Init&&(z.off("cursorActivity",X),z.off("focus",X),z.off("blur",q),q(z)),ue&&(z.state.matchBrackets="object"==typeof ue?ue:{},z.on("cursorActivity",X),z.on("focus",X),z.on("blur",q))}),k.defineExtension("matchBrackets",function(){se(this,!0)}),k.defineExtension("findMatchingBracket",function(z,ue,ce){return(ce||"boolean"==typeof ue)&&(ce?(ce.strict=ue,ue=ce):ue=ue?{strict:!0}:null),E(this,z,ue)}),k.defineExtension("scanForBracket",function(z,ue,ce,Fe){return B(this,z,ue,ce,Fe)})}(pe(9475))},8209:(bt,rt,pe)=>{!function(k){"use strict";function L(f){f.state.tagHit&&f.state.tagHit.clear(),f.state.tagOther&&f.state.tagOther.clear(),f.state.tagHit=f.state.tagOther=null}function _(f){f.state.failedTagMatch=!1,f.operation(function(){if(L(f),!f.somethingSelected()){var E=f.getCursor(),B=f.getViewport();B.from=Math.min(B.from,E.line),B.to=Math.max(E.line+1,B.to);var se=k.findMatchingTag(f,E,B);if(se){if(f.state.matchBothTags){var X="open"==se.at?se.open:se.close;X&&(f.state.tagHit=f.markText(X.from,X.to,{className:"CodeMirror-matchingtag"}))}var q="close"==se.at?se.open:se.close;q?f.state.tagOther=f.markText(q.from,q.to,{className:"CodeMirror-matchingtag"}):f.state.failedTagMatch=!0}}})}function Q(f){f.state.failedTagMatch&&_(f)}k.defineOption("matchTags",!1,function(f,E,B){B&&B!=k.Init&&(f.off("cursorActivity",_),f.off("viewportChange",Q),L(f)),E&&(f.state.matchBothTags="object"==typeof E&&E.bothTags,f.on("cursorActivity",_),f.on("viewportChange",Q),_(f))}),k.commands.toMatchingTag=function(f){var E=k.findMatchingTag(f,f.getCursor());if(E){var B="close"==E.at?E.open:E.close;B&&f.extendSelection(B.to,B.from)}}}(pe(9475),pe(829))},3613:(bt,rt,pe)=>{!function(k){"use strict";k.registerHelper("fold","brace",function(L,_){var E,Q=_.line,f=L.getLine(Q);function B(P){for(var b=_.ch,U=0;;){var re=b<=0?-1:f.lastIndexOf(P,b-1);if(-1!=re){if(1==U&&re<_.ch)break;if(E=L.getTokenTypeAt(k.Pos(Q,re+1)),!/^(comment|string)/.test(E))return re+1;b=re-1}else{if(1==U)break;U=1,b=f.length}}}var q,z,ue,se=B("{"),X=B("[");if(null!=se&&(null==X||X>se))ue=se,q="{",z="}";else{if(null==X)return;ue=X,q="[",z="]"}var te,ie,ce=1,Fe=L.lastLine();e:for(var T=Q;T<=Fe;++T)for(var W=L.getLine(T),g=T==Q?ue:0;;){var w=W.indexOf(q,g),M=W.indexOf(z,g);if(w<0&&(w=W.length),M<0&&(M=W.length),(g=Math.min(w,M))==W.length)break;if(L.getTokenTypeAt(k.Pos(T,g+1))==E)if(g==w)++ce;else if(!--ce){te=T,ie=g;break e}++g}if(null!=te&&Q!=te)return{from:k.Pos(Q,ue),to:k.Pos(te,ie)}}),k.registerHelper("fold","import",function(L,_){function Q(q){if(q<L.firstLine()||q>L.lastLine())return null;var z=L.getTokenAt(k.Pos(q,1));if(/\S/.test(z.string)||(z=L.getTokenAt(k.Pos(q,z.end+1))),"keyword"!=z.type||"import"!=z.string)return null;for(var ue=q,ce=Math.min(L.lastLine(),q+10);ue<=ce;++ue){var te=L.getLine(ue).indexOf(";");if(-1!=te)return{startCh:z.end,end:k.Pos(ue,te)}}}var B,f=_.line,E=Q(f);if(!E||Q(f-1)||(B=Q(f-2))&&B.end.line==f-1)return null;for(var se=E.end;;){var X=Q(se.line+1);if(null==X)break;se=X.end}return{from:L.clipPos(k.Pos(f,E.startCh+1)),to:se}}),k.registerHelper("fold","include",function(L,_){function Q(X){if(X<L.firstLine()||X>L.lastLine())return null;var q=L.getTokenAt(k.Pos(X,1));return/\S/.test(q.string)||(q=L.getTokenAt(k.Pos(X,q.end+1))),"meta"==q.type&&"#include"==q.string.slice(0,8)?q.start+8:void 0}var f=_.line,E=Q(f);if(null==E||null!=Q(f-1))return null;for(var B=f;null!=Q(B+1);)++B;return{from:k.Pos(f,E+1),to:L.clipPos(k.Pos(B))}})}(pe(9475))},6571:(bt,rt,pe)=>{!function(k){"use strict";function L(E,B,se,X){if(se&&se.call){var q=se;se=null}else q=f(E,se,"rangeFinder");"number"==typeof B&&(B=k.Pos(B,0));var z=f(E,se,"minFoldSize");function ue(ie){var T=q(E,B);if(!T||T.to.line-T.from.line<z)return null;if("fold"===X)return T;for(var W=E.findMarksAt(T.from),g=0;g<W.length;++g)if(W[g].__isFold){if(!ie)return null;T.cleared=!0,W[g].clear()}return T}var ce=ue(!0);if(f(E,se,"scanUp"))for(;!ce&&B.line>E.firstLine();)B=k.Pos(B.line-1,0),ce=ue(!1);if(ce&&!ce.cleared&&"unfold"!==X){var Fe=function(E,B,se){var X=f(E,B,"widget");if("function"==typeof X&&(X=X(se.from,se.to)),"string"==typeof X){var q=document.createTextNode(X);(X=document.createElement("span")).appendChild(q),X.className="CodeMirror-foldmarker"}else X&&(X=X.cloneNode(!0));return X}(E,se,ce);k.on(Fe,"mousedown",function(ie){te.clear(),k.e_preventDefault(ie)});var te=E.markText(ce.from,ce.to,{replacedWith:Fe,clearOnEnter:f(E,se,"clearOnEnter"),__isFold:!0});te.on("clear",function(ie,T){k.signal(E,"unfold",E,ie,T)}),k.signal(E,"fold",E,ce.from,ce.to)}}k.newFoldFunction=function(E,B){return function(se,X){L(se,X,{rangeFinder:E,widget:B})}},k.defineExtension("foldCode",function(E,B,se){L(this,E,B,se)}),k.defineExtension("isFolded",function(E){for(var B=this.findMarksAt(E),se=0;se<B.length;++se)if(B[se].__isFold)return!0}),k.commands.toggleFold=function(E){E.foldCode(E.getCursor())},k.commands.fold=function(E){E.foldCode(E.getCursor(),null,"fold")},k.commands.unfold=function(E){E.foldCode(E.getCursor(),{scanUp:!1},"unfold")},k.commands.foldAll=function(E){E.operation(function(){for(var B=E.firstLine(),se=E.lastLine();B<=se;B++)E.foldCode(k.Pos(B,0),{scanUp:!1},"fold")})},k.commands.unfoldAll=function(E){E.operation(function(){for(var B=E.firstLine(),se=E.lastLine();B<=se;B++)E.foldCode(k.Pos(B,0),{scanUp:!1},"unfold")})},k.registerHelper("fold","combine",function(){var E=Array.prototype.slice.call(arguments,0);return function(B,se){for(var X=0;X<E.length;++X){var q=E[X](B,se);if(q)return q}}}),k.registerHelper("fold","auto",function(E,B){for(var se=E.getHelpers(B,"fold"),X=0;X<se.length;X++){var q=se[X](E,B);if(q)return q}});var Q={rangeFinder:k.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:!1,clearOnEnter:!0};function f(E,B,se){if(B&&void 0!==B[se])return B[se];var X=E.options.foldOptions;return X&&void 0!==X[se]?X[se]:Q[se]}k.defineOption("foldOptions",null),k.defineExtension("foldOption",function(E,B){return f(this,E,B)})}(pe(9475))},829:(bt,rt,pe)=>{!function(k){"use strict";var L=k.Pos;function _(T,W){return T.line-W.line||T.ch-W.ch}var Q="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",E=new RegExp("<(/?)(["+Q+"]["+Q+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");function B(T,W,g,w){this.line=W,this.ch=g,this.cm=T,this.text=T.getLine(W),this.min=w?Math.max(w.from,T.firstLine()):T.firstLine(),this.max=w?Math.min(w.to-1,T.lastLine()):T.lastLine()}function se(T,W){var g=T.cm.getTokenTypeAt(L(T.line,W));return g&&/\btag\b/.test(g)}function X(T){if(!(T.line>=T.max))return T.ch=0,T.text=T.cm.getLine(++T.line),!0}function q(T){if(!(T.line<=T.min))return T.text=T.cm.getLine(--T.line),T.ch=T.text.length,!0}function z(T){for(;;){var W=T.text.indexOf(">",T.ch);if(-1==W){if(X(T))continue;return}if(se(T,W+1)){var g=T.text.lastIndexOf("/",W),w=g>-1&&!/\S/.test(T.text.slice(g+1,W));return T.ch=W+1,w?"selfClose":"regular"}T.ch=W+1}}function ue(T){for(;;){var W=T.ch?T.text.lastIndexOf("<",T.ch-1):-1;if(-1==W){if(q(T))continue;return}if(se(T,W+1)){E.lastIndex=W,T.ch=W;var g=E.exec(T.text);if(g&&g.index==W)return g}else T.ch=W}}function ce(T){for(;;){E.lastIndex=T.ch;var W=E.exec(T.text);if(!W){if(X(T))continue;return}if(se(T,W.index+1))return T.ch=W.index+W[0].length,W;T.ch=W.index+1}}function Fe(T){for(;;){var W=T.ch?T.text.lastIndexOf(">",T.ch-1):-1;if(-1==W){if(q(T))continue;return}if(se(T,W+1)){var g=T.text.lastIndexOf("/",W),w=g>-1&&!/\S/.test(T.text.slice(g+1,W));return T.ch=W+1,w?"selfClose":"regular"}T.ch=W}}function te(T,W){for(var g=[];;){var M,w=ce(T),P=T.line,b=T.ch-(w?w[0].length:0);if(!w||!(M=z(T)))return;if("selfClose"!=M)if(w[1]){for(var U=g.length-1;U>=0;--U)if(g[U]==w[2]){g.length=U;break}if(U<0&&(!W||W==w[2]))return{tag:w[2],from:L(P,b),to:L(T.line,T.ch)}}else g.push(w[2])}}function ie(T,W){for(var g=[];;){var w=Fe(T);if(!w)return;if("selfClose"!=w){var M=T.line,P=T.ch,b=ue(T);if(!b)return;if(b[1])g.push(b[2]);else{for(var U=g.length-1;U>=0;--U)if(g[U]==b[2]){g.length=U;break}if(U<0&&(!W||W==b[2]))return{tag:b[2],from:L(T.line,T.ch),to:L(M,P)}}}else ue(T)}}k.registerHelper("fold","xml",function(T,W){for(var g=new B(T,W.line,0);;){var w=ce(g);if(!w||g.line!=W.line)return;var M=z(g);if(!M)return;if(!w[1]&&"selfClose"!=M){var P=L(g.line,g.ch),b=te(g,w[2]);return b&&_(b.from,P)>0?{from:P,to:b.from}:null}}}),k.findMatchingTag=function(T,W,g){var w=new B(T,W.line,W.ch,g);if(-1!=w.text.indexOf(">")||-1!=w.text.indexOf("<")){var M=z(w),P=M&&L(w.line,w.ch),b=M&&ue(w);if(M&&b&&!(_(w,W)>0)){var U={from:L(w.line,w.ch),to:P,tag:b[2]};return"selfClose"==M?{open:U,close:null,at:"open"}:b[1]?{open:ie(w,b[2]),close:U,at:"close"}:{open:U,close:te(w=new B(T,P.line,P.ch,g),b[2]),at:"open"}}}},k.findEnclosingTag=function(T,W,g,w){for(var M=new B(T,W.line,W.ch,g);;){var P=ie(M,w);if(!P)break;var U=te(new B(T,W.line,W.ch,g),P.tag);if(U)return{open:P,close:U}}},k.scanForClosingTag=function(T,W,g,w){return te(new B(T,W.line,W.ch,w?{from:0,to:w}:null),g)}}(pe(9475))},7630:(bt,rt,pe)=>{!function(k){"use strict";k.overlayMode=function(L,_,Q){return{startState:function(){return{base:k.startState(L),overlay:k.startState(_),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(f){return{base:k.copyState(L,f.base),overlay:k.copyState(_,f.overlay),basePos:f.basePos,baseCur:null,overlayPos:f.overlayPos,overlayCur:null}},token:function(f,E){return(f!=E.streamSeen||Math.min(E.basePos,E.overlayPos)<f.start)&&(E.streamSeen=f,E.basePos=E.overlayPos=f.start),f.start==E.basePos&&(E.baseCur=L.token(f,E.base),E.basePos=f.pos),f.start==E.overlayPos&&(f.pos=f.start,E.overlayCur=_.token(f,E.overlay),E.overlayPos=f.pos),f.pos=Math.min(E.basePos,E.overlayPos),null==E.overlayCur?E.baseCur:null!=E.baseCur&&E.overlay.combineTokens||Q&&null==E.overlay.combineTokens?E.baseCur+" "+E.overlayCur:E.overlayCur},indent:L.indent&&function(f,E,B){return L.indent(f.base,E,B)},electricChars:L.electricChars,innerMode:function(f){return{state:f.base,mode:L}},blankLine:function(f){var E,B;return L.blankLine&&(E=L.blankLine(f.base)),_.blankLine&&(B=_.blankLine(f.overlay)),null==B?E:Q&&null!=E?E+" "+B:B}}}}(pe(9475))},8744:(bt,rt,pe)=>{!function(k){"use strict";function L(_,Q){function f(B){clearTimeout(E.doRedraw),E.doRedraw=setTimeout(function(){E.redraw()},B)}this.cm=_,this.options=Q,this.buttonHeight=Q.scrollButtonHeight||_.getOption("scrollButtonHeight"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=_.getWrapperElement().appendChild(document.createElement("div")),this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none",this.computeScale();var E=this;_.on("refresh",this.resizeHandler=function(){clearTimeout(E.doUpdate),E.doUpdate=setTimeout(function(){E.computeScale()&&f(20)},100)}),_.on("markerAdded",this.resizeHandler),_.on("markerCleared",this.resizeHandler),!1!==Q.listenForChanges&&_.on("changes",this.changeHandler=function(){f(250)})}k.defineExtension("annotateScrollbar",function(_){return"string"==typeof _&&(_={className:_}),new L(this,_)}),k.defineOption("scrollButtonHeight",0),L.prototype.computeScale=function(){var _=this.cm,Q=(_.getWrapperElement().clientHeight-_.display.barHeight-2*this.buttonHeight)/_.getScrollerElement().scrollHeight;if(Q!=this.hScale)return this.hScale=Q,!0},L.prototype.update=function(_){this.annotations=_,this.redraw()},L.prototype.redraw=function(_){!1!==_&&this.computeScale();var Q=this.cm,f=this.hScale,E=document.createDocumentFragment(),B=this.annotations,se=Q.getOption("lineWrapping"),X=se&&1.5*Q.defaultTextHeight(),q=null,z=null;function ue(M,P){if(q!=M.line){q=M.line,z=Q.getLineHandle(M.line);var b=Q.getLineHandleVisualStart(z);b!=z&&(q=Q.getLineNumber(b),z=b)}return z.widgets&&z.widgets.length||se&&z.height>X?Q.charCoords(M,"local")[P?"top":"bottom"]:Q.heightAtLine(z,"local")+(P?0:z.height)}var ce=Q.lastLine();if(Q.display.barWidth)for(var te,Fe=0;Fe<B.length;Fe++){var ie=B[Fe];if(!(ie.to.line>ce)){for(var T=te||ue(ie.from,!0)*f,W=ue(ie.to,!1)*f;Fe<B.length-1&&!(B[Fe+1].to.line>ce||(te=ue(B[Fe+1].from,!0)*f,te>W+.9));)W=ue((ie=B[++Fe]).to,!1)*f;if(W!=T){var g=Math.max(W-T,3),w=E.appendChild(document.createElement("div"));w.style.cssText="position: absolute; right: 0px; width: "+Math.max(Q.display.barWidth-1,2)+"px; top: "+(T+this.buttonHeight)+"px; height: "+g+"px",w.className=this.options.className,ie.id&&w.setAttribute("annotation-id",ie.id)}}}this.div.textContent="",this.div.appendChild(E)},L.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler),this.cm.off("markerAdded",this.resizeHandler),this.cm.off("markerCleared",this.resizeHandler),this.changeHandler&&this.cm.off("changes",this.changeHandler),this.div.parentNode.removeChild(this.div)}}(pe(9475))},102:(bt,rt,pe)=>{!function(k){"use strict";function Q(f,E){var B=Number(E);return/^[-+]/.test(E)?f.getCursor().line+B:B-1}k.defineOption("search",{bottom:!1}),k.commands.jumpToLine=function(f){var E=f.getCursor();!function(f,E,B,se,X){f.openDialog?f.openDialog(E,X,{value:se,selectValueOnOpen:!0,bottom:f.options.search.bottom}):X(prompt(B,se))}(f,function(f){return f.phrase("Jump to line:")+' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+f.phrase("(Use line:column or scroll% syntax)")+"</span>"}(f),f.phrase("Jump to line:"),E.line+1+":"+E.ch,function(B){var se;if(B)if(se=/^\s*([\+\-]?\d+)\s*\:\s*(\d+)\s*$/.exec(B))f.setCursor(Q(f,se[1]),Number(se[2]));else if(se=/^\s*([\+\-]?\d+(\.\d+)?)\%\s*/.exec(B)){var X=Math.round(f.lineCount()*Number(se[1])/100);/^[-+]/.test(se[1])&&(X=E.line+X+1),f.setCursor(X-1,E.ch)}else(se=/^\s*\:?\s*([\+\-]?\d+)\s*/.exec(B))&&f.setCursor(Q(f,se[1]),E.ch)})},k.keyMap.default["Alt-G"]="jumpToLine"}(pe(9475),pe(6584))},1252:(bt,rt,pe)=>{!function(k){"use strict";function L(f,E,B,se){this.cm=f,this.options=se;var X={listenForChanges:!1};for(var q in se)X[q]=se[q];X.className||(X.className="CodeMirror-search-match"),this.annotation=f.annotateScrollbar(X),this.query=E,this.caseFold=B,this.gap={from:f.firstLine(),to:f.lastLine()+1},this.matches=[],this.update=null,this.findMatches(),this.annotation.update(this.matches);var z=this;f.on("change",this.changeHandler=function(ue,ce){z.onChange(ce)})}k.defineExtension("showMatchesOnScrollbar",function(f,E,B){return"string"==typeof B&&(B={className:B}),B||(B={}),new L(this,f,E,B)});function Q(f,E,B){return f<=E?f:Math.max(E,f+B)}L.prototype.findMatches=function(){if(this.gap){for(var f=0;f<this.matches.length&&!((E=this.matches[f]).from.line>=this.gap.to);f++)E.to.line>=this.gap.from&&this.matches.splice(f--,1);for(var B=this.cm.getSearchCursor(this.query,k.Pos(this.gap.from,0),{caseFold:this.caseFold,multiline:this.options.multiline}),se=this.options&&this.options.maxMatches||1e3;B.findNext();){var E;if((E={from:B.from(),to:B.to()}).from.line>=this.gap.to||(this.matches.splice(f++,0,E),this.matches.length>se))break}this.gap=null}},L.prototype.onChange=function(f){var E=f.from.line,B=k.changeEnd(f).line,se=B-f.to.line;if(this.gap?(this.gap.from=Math.min(Q(this.gap.from,E,se),f.from.line),this.gap.to=Math.max(Q(this.gap.to,E,se),f.from.line)):this.gap={from:f.from.line,to:B+1},se)for(var X=0;X<this.matches.length;X++){var q=this.matches[X],z=Q(q.from.line,E,se);z!=q.from.line&&(q.from=k.Pos(z,q.from.ch));var ue=Q(q.to.line,E,se);ue!=q.to.line&&(q.to=k.Pos(ue,q.to.ch))}clearTimeout(this.update);var ce=this;this.update=setTimeout(function(){ce.updateAfterChange()},250)},L.prototype.updateAfterChange=function(){this.findMatches(),this.annotation.update(this.matches)},L.prototype.clear=function(){this.cm.off("change",this.changeHandler),this.annotation.clear()}}(pe(9475),pe(7660),pe(8744))},615:(bt,rt,pe)=>{!function(k){"use strict";function _(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function Q(b){return b.state.search||(b.state.search=new _)}function f(b){return"string"==typeof b&&b==b.toLowerCase()}function E(b,U,re){return b.getSearchCursor(U,re,{caseFold:f(U),multiline:!0})}function se(b,U,re,K,ee){b.openDialog?b.openDialog(U,ee,{value:K,selectValueOnOpen:!0,bottom:b.options.search.bottom}):ee(prompt(re,K))}function q(b){return b.replace(/\\([nrt\\])/g,function(U,re){return"n"==re?"\n":"r"==re?"\r":"t"==re?"\t":"\\"==re?"\\":U})}function z(b){var U=b.match(/^\/(.*)\/([a-z]*)$/);if(U)try{b=new RegExp(U[1],-1==U[2].indexOf("i")?"":"i")}catch(re){}else b=q(b);return("string"==typeof b?""==b:b.test(""))&&(b=/x^/),b}function ue(b,U,re){U.queryText=re,U.query=z(re),b.removeOverlay(U.overlay,f(U.query)),U.overlay=function(b,U){return"string"==typeof b?b=new RegExp(b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),U?"gi":"g"):b.global||(b=new RegExp(b.source,b.ignoreCase?"gi":"g")),{token:function(re){b.lastIndex=re.pos;var K=b.exec(re.string);if(K&&K.index==re.pos)return re.pos+=K[0].length||1,"searching";K?re.pos=K.index:re.skipToEnd()}}}(U.query,f(U.query)),b.addOverlay(U.overlay),b.showMatchesOnScrollbar&&(U.annotate&&(U.annotate.clear(),U.annotate=null),U.annotate=b.showMatchesOnScrollbar(U.query,f(U.query)))}function ce(b,U,re,K){var ee=Q(b);if(ee.query)return Fe(b,U);var G=b.getSelection()||ee.lastQuery;if(G instanceof RegExp&&"x^"==G.source&&(G=null),re&&b.openDialog){var xe=null,x=function(fe,he){k.e_stop(he),fe&&(fe!=ee.queryText&&(ue(b,ee,fe),ee.posFrom=ee.posTo=b.getCursor()),xe&&(xe.style.opacity=1),Fe(b,he.shiftKey,function(Ee,We){var ze;We.line<3&&document.querySelector&&(ze=b.display.wrapper.querySelector(".CodeMirror-dialog"))&&ze.getBoundingClientRect().bottom-4>b.cursorCoords(We,"window").top&&((xe=ze).style.opacity=.4)}))};(function(b,U,re,K,ee){b.openDialog(U,K,{value:re,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){te(b)},onKeyDown:ee,bottom:b.options.search.bottom})})(b,T(b),G,x,function(fe,he){var Ee=k.keyName(fe),We=b.getOption("extraKeys"),ze=We&&We[Ee]||k.keyMap[b.getOption("keyMap")][Ee];"findNext"==ze||"findPrev"==ze||"findPersistentNext"==ze||"findPersistentPrev"==ze?(k.e_stop(fe),ue(b,Q(b),he),b.execCommand(ze)):("find"==ze||"findPersistent"==ze)&&(k.e_stop(fe),x(he,fe))}),K&&G&&(ue(b,ee,G),Fe(b,U))}else se(b,T(b),"Search for:",G,function(fe){fe&&!ee.query&&b.operation(function(){ue(b,ee,fe),ee.posFrom=ee.posTo=b.getCursor(),Fe(b,U)})})}function Fe(b,U,re){b.operation(function(){var K=Q(b),ee=E(b,K.query,U?K.posFrom:K.posTo);!ee.find(U)&&!(ee=E(b,K.query,U?k.Pos(b.lastLine()):k.Pos(b.firstLine(),0))).find(U)||(b.setSelection(ee.from(),ee.to()),b.scrollIntoView({from:ee.from(),to:ee.to()},20),K.posFrom=ee.from(),K.posTo=ee.to(),re&&re(ee.from(),ee.to()))})}function te(b){b.operation(function(){var U=Q(b);U.lastQuery=U.query,U.query&&(U.query=U.queryText=null,b.removeOverlay(U.overlay),U.annotate&&(U.annotate.clear(),U.annotate=null))})}function ie(b,U){var re=b?document.createElement(b):document.createDocumentFragment();for(var K in U)re[K]=U[K];for(var ee=2;ee<arguments.length;ee++){var G=arguments[ee];re.appendChild("string"==typeof G?document.createTextNode(G):G)}return re}function T(b){return ie("",null,ie("span",{className:"CodeMirror-search-label"},b.phrase("Search:"))," ",ie("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"})," ",ie("span",{style:"color: #888",className:"CodeMirror-search-hint"},b.phrase("(Use /re/ syntax for regexp search)")))}function M(b,U,re){b.operation(function(){for(var K=E(b,U);K.findNext();)if("string"!=typeof U){var ee=b.getRange(K.from(),K.to()).match(U);K.replace(re.replace(/\$(\d)/g,function(G,xe){return ee[xe]}))}else K.replace(re)})}function P(b,U){if(!b.getOption("readOnly")){var re=b.getSelection()||Q(b).lastQuery,K=b.phrase(U?"Replace all:":"Replace:"),ee=ie("",null,ie("span",{className:"CodeMirror-search-label"},K),function(b){return ie("",null," ",ie("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"})," ",ie("span",{style:"color: #888",className:"CodeMirror-search-hint"},b.phrase("(Use /re/ syntax for regexp search)")))}(b));se(b,ee,K,re,function(G){!G||(G=z(G),se(b,function(b){return ie("",null,ie("span",{className:"CodeMirror-search-label"},b.phrase("With:"))," ",ie("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"}))}(b),b.phrase("Replace with:"),"",function(xe){if(xe=q(xe),U)M(b,G,xe);else{te(b);var x=E(b,G,b.getCursor("from")),fe=function(){var We,Ee=x.from();!(We=x.findNext())&&(x=E(b,G),!(We=x.findNext())||Ee&&x.from().line==Ee.line&&x.from().ch==Ee.ch)||(b.setSelection(x.from(),x.to()),b.scrollIntoView({from:x.from(),to:x.to()}),function(b,U,re,K){b.openConfirm?b.openConfirm(U,K):confirm(re)&&K[0]()}(b,function(b){return ie("",null,ie("span",{className:"CodeMirror-search-label"},b.phrase("Replace?"))," ",ie("button",{},b.phrase("Yes"))," ",ie("button",{},b.phrase("No"))," ",ie("button",{},b.phrase("All"))," ",ie("button",{},b.phrase("Stop")))}(b),b.phrase("Replace?"),[function(){he(We)},fe,function(){M(b,G,xe)}]))},he=function(Ee){x.replace("string"==typeof G?xe:xe.replace(/\$(\d)/g,function(We,ze){return Ee[ze]})),fe()};fe()}}))})}}k.defineOption("search",{bottom:!1}),k.commands.find=function(b){te(b),ce(b)},k.commands.findPersistent=function(b){te(b),ce(b,!1,!0)},k.commands.findPersistentNext=function(b){ce(b,!1,!0,!0)},k.commands.findPersistentPrev=function(b){ce(b,!0,!0,!0)},k.commands.findNext=ce,k.commands.findPrev=function(b){ce(b,!0)},k.commands.clearSearch=te,k.commands.replace=P,k.commands.replaceAll=function(b){P(b,!0)}}(pe(9475),pe(7660),pe(6584))},7660:(bt,rt,pe)=>{!function(k){"use strict";var z,ue,L=k.Pos;function Q(T,W){for(var g=function(T){var W=T.flags;return null!=W?W:(T.ignoreCase?"i":"")+(T.global?"g":"")+(T.multiline?"m":"")}(T),w=g,M=0;M<W.length;M++)-1==w.indexOf(W.charAt(M))&&(w+=W.charAt(M));return g==w?T:new RegExp(T.source,w)}function f(T){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(T.source)}function E(T,W,g){W=Q(W,"g");for(var w=g.line,M=g.ch,P=T.lastLine();w<=P;w++,M=0){W.lastIndex=M;var b=T.getLine(w),U=W.exec(b);if(U)return{from:L(w,U.index),to:L(w,U.index+U[0].length),match:U}}}function B(T,W,g){if(!f(W))return E(T,W,g);W=Q(W,"gm");for(var w,M=1,P=g.line,b=T.lastLine();P<=b;){for(var U=0;U<M&&!(P>b);U++){var re=T.getLine(P++);w=null==w?re:w+"\n"+re}M*=2,W.lastIndex=g.ch;var K=W.exec(w);if(K){var ee=w.slice(0,K.index).split("\n"),G=K[0].split("\n"),xe=g.line+ee.length-1,x=ee[ee.length-1].length;return{from:L(xe,x),to:L(xe+G.length-1,1==G.length?x+G[0].length:G[G.length-1].length),match:K}}}}function se(T,W,g){for(var w,M=0;M<=T.length;){W.lastIndex=M;var P=W.exec(T);if(!P)break;var b=P.index+P[0].length;if(b>T.length-g)break;(!w||b>w.index+w[0].length)&&(w=P),M=P.index+1}return w}function X(T,W,g){W=Q(W,"g");for(var w=g.line,M=g.ch,P=T.firstLine();w>=P;w--,M=-1){var b=T.getLine(w),U=se(b,W,M<0?0:b.length-M);if(U)return{from:L(w,U.index),to:L(w,U.index+U[0].length),match:U}}}function q(T,W,g){if(!f(W))return X(T,W,g);W=Q(W,"gm");for(var w,M=1,P=T.getLine(g.line).length-g.ch,b=g.line,U=T.firstLine();b>=U;){for(var re=0;re<M&&b>=U;re++){var K=T.getLine(b--);w=null==w?K:K+"\n"+w}M*=2;var ee=se(w,W,P);if(ee){var G=w.slice(0,ee.index).split("\n"),xe=ee[0].split("\n"),x=b+G.length,fe=G[G.length-1].length;return{from:L(x,fe),to:L(x+xe.length-1,1==xe.length?fe+xe[0].length:xe[xe.length-1].length),match:ee}}}}function ce(T,W,g,w){if(T.length==W.length)return g;for(var M=0,P=g+Math.max(0,T.length-W.length);;){if(M==P)return M;var b=M+P>>1,U=w(T.slice(0,b)).length;if(U==g)return b;U>g?P=b:M=b+1}}function Fe(T,W,g,w){if(!W.length)return null;var M=w?z:ue,P=M(W).split(/\r|\n\r?/);e:for(var b=g.line,U=g.ch,re=T.lastLine()+1-P.length;b<=re;b++,U=0){var K=T.getLine(b).slice(U),ee=M(K);if(1==P.length){var G=ee.indexOf(P[0]);if(-1==G)continue e;return g=ce(K,ee,G,M)+U,{from:L(b,ce(K,ee,G,M)+U),to:L(b,ce(K,ee,G+P[0].length,M)+U)}}var xe=ee.length-P[0].length;if(ee.slice(xe)==P[0]){for(var x=1;x<P.length-1;x++)if(M(T.getLine(b+x))!=P[x])continue e;var fe=T.getLine(b+P.length-1),he=M(fe),Ee=P[P.length-1];if(he.slice(0,Ee.length)==Ee)return{from:L(b,ce(K,ee,xe,M)+U),to:L(b+P.length-1,ce(fe,he,Ee.length,M))}}}}function te(T,W,g,w){if(!W.length)return null;var M=w?z:ue,P=M(W).split(/\r|\n\r?/);e:for(var b=g.line,U=g.ch,re=T.firstLine()-1+P.length;b>=re;b--,U=-1){var K=T.getLine(b);U>-1&&(K=K.slice(0,U));var ee=M(K);if(1==P.length){var G=ee.lastIndexOf(P[0]);if(-1==G)continue e;return{from:L(b,ce(K,ee,G,M)),to:L(b,ce(K,ee,G+P[0].length,M))}}var xe=P[P.length-1];if(ee.slice(0,xe.length)==xe){var x=1;for(g=b-P.length+1;x<P.length-1;x++)if(M(T.getLine(g+x))!=P[x])continue e;var fe=T.getLine(b+1-P.length),he=M(fe);if(he.slice(he.length-P[0].length)==P[0])return{from:L(b+1-P.length,ce(fe,he,fe.length-P[0].length,M)),to:L(b,ce(K,ee,xe.length,M))}}}}function ie(T,W,g,w){var M;this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=T,g=g?T.clipPos(g):L(0,0),this.pos={from:g,to:g},"object"==typeof w?M=w.caseFold:(M=w,w=null),"string"==typeof W?(null==M&&(M=!1),this.matches=function(P,b){return(P?te:Fe)(T,W,b,M)}):(W=Q(W,"gm"),this.matches=w&&!1===w.multiline?function(P,b){return(P?X:E)(T,W,b)}:function(P,b){return(P?q:B)(T,W,b)})}String.prototype.normalize?(z=function(T){return T.normalize("NFD").toLowerCase()},ue=function(T){return T.normalize("NFD")}):(z=function(T){return T.toLowerCase()},ue=function(T){return T}),ie.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(T){var W=this.doc.clipPos(T?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(W=L(W.line,W.ch),T?(W.ch--,W.ch<0&&(W.line--,W.ch=(this.doc.getLine(W.line)||"").length)):(W.ch++,W.ch>(this.doc.getLine(W.line)||"").length&&(W.ch=0,W.line++)),0!=k.cmpPos(W,this.doc.clipPos(W))))return this.atOccurrence=!1;var g=this.matches(T,W);if(this.afterEmptyMatch=g&&0==k.cmpPos(g.from,g.to),g)return this.pos=g,this.atOccurrence=!0,this.pos.match||!0;var w=L(T?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:w,to:w},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(T,W){if(this.atOccurrence){var g=k.splitLines(T);this.doc.replaceRange(g,this.pos.from,this.pos.to,W),this.pos.to=L(this.pos.from.line+g.length-1,g[g.length-1].length+(1==g.length?this.pos.from.ch:0))}}},k.defineExtension("getSearchCursor",function(T,W,g){return new ie(this.doc,T,W,g)}),k.defineDocExtension("getSearchCursor",function(T,W,g){return new ie(this,T,W,g)}),k.defineExtension("selectMatches",function(T,W){for(var g=[],w=this.getSearchCursor(T,this.getCursor("from"),W);w.findNext()&&!(k.cmpPos(w.to(),this.getCursor("to"))>0);)g.push({anchor:w.from(),head:w.to()});g.length&&this.setSelections(g,0)})}(pe(9475))},8543:(bt,rt,pe)=>{!function(k){"use strict";var L=k.commands,_=k.Pos;function Q(R,Y){return R.line==Y.line&&R.ch==Y.ch}var f=[];function E(R){f.push(R),f.length>50&&f.shift()}function se(R){return f[f.length-(R?Math.min(R,1):1)]||""}var q=null;function z(R,Y,ne,V,Oe){null==Oe&&(Oe=R.getRange(Y,ne)),"grow"==V&&q&&q.cm==R&&Q(Y,q.pos)&&R.isClean(q.gen)?function(R){if(!f.length)return E(R);f[f.length-1]+=R}(Oe):!1!==V&&E(Oe),R.replaceRange("",Y,ne,"+delete"),q="grow"==V?{cm:R,pos:Y,gen:R.changeGeneration()}:null}function ue(R,Y,ne){return R.findPosH(Y,ne,"char",!0)}function ce(R,Y,ne){return R.findPosH(Y,ne,"word",!0)}function Fe(R,Y,ne){return R.findPosV(Y,ne,"line",R.doc.sel.goalColumn)}function te(R,Y,ne){return R.findPosV(Y,ne,"page",R.doc.sel.goalColumn)}function ie(R,Y,ne){for(var V=Y.line,Oe=R.getLine(V),Qe=/\S/.test(ne<0?Oe.slice(0,Y.ch):Oe.slice(Y.ch)),Ue=R.firstLine(),Ye=R.lastLine();;){if((V+=ne)<Ue||V>Ye)return R.clipPos(_(V-ne,ne<0?0:null));if(Oe=R.getLine(V),/\S/.test(Oe))Qe=!0;else if(Qe)return _(V,0)}}function T(R,Y,ne){for(var V=Y.line,Oe=Y.ch,Qe=R.getLine(Y.line),Ue=!1;;){var Ye=Qe.charAt(Oe+(ne<0?-1:0));if(Ye){if(Ue&&/[!?.]/.test(Ye))return _(V,Oe+(ne>0?1:0));Ue||(Ue=/\w/.test(Ye)),Oe+=ne}else{if(V==(ne<0?R.firstLine():R.lastLine())||(Qe=R.getLine(V+ne),!/\S/.test(Qe)))return _(V,Oe);V+=ne,Oe=ne<0?Qe.length:0}}}function W(R,Y,ne){var V;if(R.findMatchingBracket&&(V=R.findMatchingBracket(Y,{strict:!0}))&&V.match&&(V.forward?1:-1)==ne)return ne>0?_(V.to.line,V.to.ch+1):V.to;for(var Oe=!0;;Oe=!1){var Qe=R.getTokenAt(Y),Ue=_(Y.line,ne<0?Qe.start:Qe.end);if(!(Oe&&ne>0&&Qe.end==Y.ch)&&/\w/.test(Qe.string))return Ue;var Ye=R.findPosH(Ue,ne,"char");if(Q(Ue,Ye))return Y;Y=Ye}}function g(R,Y){var ne=R.state.emacsPrefix;return ne?(G(R),"-"==ne?-1:Number(ne)):Y?null:1}function w(R){var Y="string"==typeof R?function(ne){ne.execCommand(R)}:R;return function(ne){var V=g(ne);Y(ne);for(var Oe=1;Oe<V;++Oe)Y(ne)}}function M(R,Y,ne,V){var Oe=g(R);Oe<0&&(V=-V,Oe=-Oe);for(var Qe=0;Qe<Oe;++Qe){var Ue=ne(R,Y,V);if(Q(Ue,Y))break;Y=Ue}return Y}function P(R,Y){var ne=function(V){V.extendSelection(M(V,V.getCursor(),R,Y))};return ne.motion=!0,ne}function b(R,Y,ne,V){for(var Qe,Oe=R.listSelections(),Ue=Oe.length;Ue--;)z(R,Qe=Oe[Ue].head,M(R,Qe,Y,ne),V)}function U(R,Y){if(R.somethingSelected()){for(var V,ne=R.listSelections(),Oe=ne.length;Oe--;)z(R,(V=ne[Oe]).anchor,V.head,Y);return!0}}function re(R,Y){R.state.emacsPrefix?"-"!=Y&&(R.state.emacsPrefix+=Y):(R.state.emacsPrefix=Y,R.on("keyHandled",ee),R.on("inputRead",xe))}var K={"Alt-G":!0,"Ctrl-X":!0,"Ctrl-Q":!0,"Ctrl-U":!0};function ee(R,Y){!R.state.emacsPrefixMap&&!K.hasOwnProperty(Y)&&G(R)}function G(R){R.state.emacsPrefix=null,R.off("keyHandled",ee),R.off("inputRead",xe)}function xe(R,Y){var ne=g(R);if(ne>1&&"+input"==Y.origin){for(var V=Y.text.join("\n"),Oe="",Qe=1;Qe<ne;++Qe)Oe+=V;R.replaceSelection(Oe)}}function x(R,Y){"string"==typeof Y&&(/^\d$/.test(Y)||"Ctrl-U"==Y)||(R.removeKeyMap(O),R.state.emacsPrefixMap=!1,R.off("keyHandled",x),R.off("inputRead",x))}function fe(R){R.setExtending(!1),R.setCursor(R.getCursor())}function Ee(R,Y,ne){R.openDialog?R.openDialog(function(R){var Y=document.createDocumentFragment(),ne=document.createElement("input");return ne.setAttribute("type","text"),ne.style.width="10em",Y.appendChild(document.createTextNode(R+": ")),Y.appendChild(ne),Y}(Y),ne,{bottom:!0}):ne(prompt(Y,""))}function We(R,Y){var ne=R.getCursor(),V=R.findPosH(ne,1,"word");R.replaceRange(Y(R.getRange(ne,V)),ne,V),R.setCursor(V)}L.setMark=function(R){R.setCursor(R.getCursor()),R.setExtending(!R.getExtending()),R.on("change",function(){R.setExtending(!1)})},L.killRegion=function(R){z(R,R.getCursor("start"),R.getCursor("end"),!0)},L.killLineEmacs=w(function(R){var Y=R.getCursor(),ne=R.clipPos(_(Y.line)),V=R.getRange(Y,ne);/\S/.test(V)||(V+="\n",ne=_(Y.line+1,0)),z(R,Y,ne,"grow",V)}),L.killRingSave=function(R){E(R.getSelection()),fe(R)},L.yank=function(R){var Y=R.getCursor();R.replaceRange(se(g(R)),Y,Y,"paste"),R.setSelection(Y,R.getCursor())},L.yankPop=function(R){R.replaceSelection((f.length>1&&f.pop(),se()),"around","paste")},L.forwardChar=P(ue,1),L.backwardChar=P(ue,-1),L.deleteChar=function(R){b(R,ue,1,!1)},L.deleteForwardChar=function(R){U(R,!1)||b(R,ue,1,!1)},L.deleteBackwardChar=function(R){U(R,!1)||b(R,ue,-1,!1)},L.forwardWord=P(ce,1),L.backwardWord=P(ce,-1),L.killWord=function(R){b(R,ce,1,"grow")},L.backwardKillWord=function(R){b(R,ce,-1,"grow")},L.nextLine=P(Fe,1),L.previousLine=P(Fe,-1),L.scrollDownCommand=P(te,-1),L.scrollUpCommand=P(te,1),L.backwardParagraph=P(ie,-1),L.forwardParagraph=P(ie,1),L.backwardSentence=P(T,-1),L.forwardSentence=P(T,1),L.killSentence=function(R){b(R,T,1,"grow")},L.backwardKillSentence=function(R){z(R,R.getCursor(),T(R,R.getCursor(),1),"grow")},L.killSexp=function(R){b(R,W,1,"grow")},L.backwardKillSexp=function(R){b(R,W,-1,"grow")},L.forwardSexp=P(W,1),L.backwardSexp=P(W,-1),L.markSexp=function(R){var Y=R.getCursor();R.setSelection(M(R,Y,W,1),Y)},L.transposeSexps=function(R){var Y=W(R,R.getCursor(),-1),ne=W(R,Y,1),V=W(R,ne,1),Oe=W(R,V,-1);R.replaceRange(R.getRange(Oe,V)+R.getRange(ne,Oe)+R.getRange(Y,ne),Y,V)},L.backwardUpList=w(function(R){for(var Y=R.getCursor(),ne=Y.line,V=Y.ch,Oe=[];ne>=R.firstLine();){for(var Qe=R.getLine(ne),Ue=null==V?Qe.length:V;Ue>0;)if(")"==(V=Qe.charAt(--Ue)))Oe.push("(");else if("]"==V)Oe.push("[");else if("}"==V)Oe.push("{");else if(/[\(\{\[]/.test(V)&&(!Oe.length||Oe.pop()!=V))return R.extendSelection(_(ne,Ue));--ne,V=null}}),L.justOneSpace=function(R){for(var Y=R.getCursor(),ne=Y.ch,V=Y.ch,Oe=R.getLine(Y.line);ne&&/\s/.test(Oe.charAt(ne-1));)--ne;for(;V<Oe.length&&/\s/.test(Oe.charAt(V));)++V;R.replaceRange(" ",_(Y.line,ne),_(Y.line,V))},L.openLine=w(function(R){R.replaceSelection("\n","start")}),L.transposeCharsRepeatable=w(function(R){R.execCommand("transposeChars")}),L.capitalizeWord=w(function(R){We(R,function(Y){var ne=Y.search(/\w/);return-1==ne?Y:Y.slice(0,ne)+Y.charAt(ne).toUpperCase()+Y.slice(ne+1).toLowerCase()})}),L.upcaseWord=w(function(R){We(R,function(Y){return Y.toUpperCase()})}),L.downcaseWord=w(function(R){We(R,function(Y){return Y.toLowerCase()})}),L.undoRepeatable=w("undo"),L.keyboardQuit=function(R){R.execCommand("clearSearch"),fe(R)},L.newline=w(function(R){R.replaceSelection("\n","end")}),L.gotoLine=function(R){var Y=g(R,!0);if(null!=Y&&Y>0)return R.setCursor(Y-1);Ee(R,"Goto line",function(ne){var V;ne&&!isNaN(V=Number(ne))&&V==(0|V)&&V>0&&R.setCursor(V-1)})},L.indentRigidly=function(R){R.indentSelection(g(R,!0)||R.getOption("indentUnit"))},L.exchangePointAndMark=function(R){R.setSelection(R.getCursor("head"),R.getCursor("anchor"))},L.quotedInsertTab=w("insertTab"),L.universalArgument=function(Y){Y.state.emacsPrefixMap=!0,Y.addKeyMap(O),Y.on("keyHandled",x),Y.on("inputRead",x)},k.emacs={kill:z,killRegion:U,repeated:w};var Ge=k.keyMap.emacs=k.normalizeKeyMap({"Ctrl-W":"killRegion","Ctrl-K":"killLineEmacs","Alt-W":"killRingSave","Ctrl-Y":"yank","Alt-Y":"yankPop","Ctrl-Space":"setMark","Ctrl-Shift-2":"setMark","Ctrl-F":"forwardChar","Ctrl-B":"backwardChar",Right:"forwardChar",Left:"backwardChar","Ctrl-D":"deleteChar",Delete:"deleteForwardChar","Ctrl-H":"deleteBackwardChar",Backspace:"deleteBackwardChar","Alt-F":"forwardWord","Alt-B":"backwardWord","Alt-Right":"forwardWord","Alt-Left":"backwardWord","Alt-D":"killWord","Alt-Backspace":"backwardKillWord","Ctrl-N":"nextLine","Ctrl-P":"previousLine",Down:"nextLine",Up:"previousLine","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd",End:"goLineEnd",Home:"goLineStart","Alt-V":"scrollDownCommand","Ctrl-V":"scrollUpCommand",PageUp:"scrollDownCommand",PageDown:"scrollUpCommand","Ctrl-Up":"backwardParagraph","Ctrl-Down":"forwardParagraph","Alt-{":"backwardParagraph","Alt-}":"forwardParagraph","Alt-A":"backwardSentence","Alt-E":"forwardSentence","Alt-K":"killSentence","Ctrl-X Delete":"backwardKillSentence","Ctrl-Alt-K":"killSexp","Ctrl-Alt-Backspace":"backwardKillSexp","Ctrl-Alt-F":"forwardSexp","Ctrl-Alt-B":"backwardSexp","Shift-Ctrl-Alt-2":"markSexp","Ctrl-Alt-T":"transposeSexps","Ctrl-Alt-U":"backwardUpList","Alt-Space":"justOneSpace","Ctrl-O":"openLine","Ctrl-T":"transposeCharsRepeatable","Alt-C":"capitalizeWord","Alt-U":"upcaseWord","Alt-L":"downcaseWord","Alt-;":"toggleComment","Ctrl-/":"undoRepeatable","Shift-Ctrl--":"undoRepeatable","Ctrl-Z":"undoRepeatable","Cmd-Z":"undoRepeatable","Ctrl-X U":"undoRepeatable","Shift-Ctrl-Z":"redo","Shift-Alt-,":"goDocStart","Shift-Alt-.":"goDocEnd","Ctrl-S":"findPersistentNext","Ctrl-R":"findPersistentPrev","Ctrl-G":"keyboardQuit","Shift-Alt-5":"replace","Alt-/":"autocomplete",Enter:"newlineAndIndent","Ctrl-J":"newline",Tab:"indentAuto","Alt-G G":"gotoLine","Ctrl-X Tab":"indentRigidly","Ctrl-X Ctrl-X":"exchangePointAndMark","Ctrl-X Ctrl-S":"save","Ctrl-X Ctrl-W":"save","Ctrl-X S":"saveAll","Ctrl-X F":"open","Ctrl-X K":"close","Ctrl-X H":"selectAll","Ctrl-Q Tab":"quotedInsertTab","Ctrl-U":"universalArgument",fallthrough:"default"}),O={"Ctrl-G":G};function C(R){O[R]=function(Y){re(Y,R)},Ge["Ctrl-"+R]=function(Y){re(Y,R)},K["Ctrl-"+R]=!0}for(var Ae=0;Ae<10;++Ae)C(String(Ae));C("-")}(pe(9475))},8823:(bt,rt,pe)=>{!function(k){"use strict";var L=k.commands,_=k.Pos;function f(g,w){g.extendSelectionsBy(function(M){return g.display.shift||g.doc.extend||M.empty()?function(g,w,M){if(M<0&&0==w.ch)return g.clipPos(_(w.line-1));var P=g.getLine(w.line);if(M>0&&w.ch>=P.length)return g.clipPos(_(w.line+1,0));for(var U,b="start",re=w.ch,K=re,ee=M<0?0:P.length,G=0;K!=ee;K+=M,G++){var xe=P.charAt(M<0?K-1:K),x="_"!=xe&&k.isWordChar(xe)?"w":"o";if("w"==x&&xe.toUpperCase()==xe&&(x="W"),"start"==b)"o"!=x?(b="in",U=x):re=K+M;else if("in"==b&&U!=x){if("w"==U&&"W"==x&&M<0&&K--,"W"==U&&"w"==x&&M>0){if(K==re+1){U="w";continue}K--}break}}return _(w.line,K)}(g.doc,M.head,w):w<0?M.from():M.to()})}function E(g,w){if(g.isReadOnly())return k.Pass;g.operation(function(){for(var M=g.listSelections().length,P=[],b=-1,U=0;U<M;U++){var re=g.listSelections()[U].head;if(!(re.line<=b)){var K=_(re.line+(w?0:1),0);g.replaceRange("\n",K,null,"+insertLine"),g.indentLine(K.line,null,!0),P.push({head:K,anchor:K}),b=re.line+1}}g.setSelections(P)}),g.execCommand("indentAuto")}function B(g,w){for(var M=w.ch,P=M,b=g.getLine(w.line);M&&k.isWordChar(b.charAt(M-1));)--M;for(;P<b.length&&k.isWordChar(b.charAt(P));)++P;return{from:_(w.line,M),to:_(w.line,P),word:b.slice(M,P)}}function se(g,w){for(var M=g.listSelections(),P=[],b=0;b<M.length;b++){var U=M[b],re=g.findPosV(U.anchor,w,"line",U.anchor.goalColumn),K=g.findPosV(U.head,w,"line",U.head.goalColumn);re.goalColumn=null!=U.anchor.goalColumn?U.anchor.goalColumn:g.cursorCoords(U.anchor,"div").left,K.goalColumn=null!=U.head.goalColumn?U.head.goalColumn:g.cursorCoords(U.head,"div").left;var ee={anchor:re,head:K};P.push(U),P.push(ee)}g.setSelections(P)}L.goSubwordLeft=function(g){f(g,-1)},L.goSubwordRight=function(g){f(g,1)},L.scrollLineUp=function(g){var w=g.getScrollInfo();if(!g.somethingSelected()){var M=g.lineAtHeight(w.top+w.clientHeight,"local");g.getCursor().line>=M&&g.execCommand("goLineUp")}g.scrollTo(null,w.top-g.defaultTextHeight())},L.scrollLineDown=function(g){var w=g.getScrollInfo();if(!g.somethingSelected()){var M=g.lineAtHeight(w.top,"local")+1;g.getCursor().line<=M&&g.execCommand("goLineDown")}g.scrollTo(null,w.top+g.defaultTextHeight())},L.splitSelectionByLine=function(g){for(var w=g.listSelections(),M=[],P=0;P<w.length;P++)for(var b=w[P].from(),U=w[P].to(),re=b.line;re<=U.line;++re)U.line>b.line&&re==U.line&&0==U.ch||M.push({anchor:re==b.line?b:_(re,0),head:re==U.line?U:_(re)});g.setSelections(M,0)},L.singleSelectionTop=function(g){var w=g.listSelections()[0];g.setSelection(w.anchor,w.head,{scroll:!1})},L.selectLine=function(g){for(var w=g.listSelections(),M=[],P=0;P<w.length;P++){var b=w[P];M.push({anchor:_(b.from().line,0),head:_(b.to().line+1,0)})}g.setSelections(M)},L.insertLineAfter=function(g){return E(g,!1)},L.insertLineBefore=function(g){return E(g,!0)},L.selectNextOccurrence=function(g){var w=g.getCursor("from"),M=g.getCursor("to"),P=g.state.sublimeFindFullWord==g.doc.sel;if(0==k.cmpPos(w,M)){var b=B(g,w);if(!b.word)return;g.setSelection(b.from,b.to),P=!0}else{var U=g.getRange(w,M),re=P?new RegExp("\\b"+U+"\\b"):U,K=g.getSearchCursor(re,M),ee=K.findNext();if(ee||(ee=(K=g.getSearchCursor(re,_(g.firstLine(),0))).findNext()),!ee||function(g,w,M){for(var P=0;P<g.length;P++)if(0==k.cmpPos(g[P].from(),w)&&0==k.cmpPos(g[P].to(),M))return!0;return!1}(g.listSelections(),K.from(),K.to()))return;g.addSelection(K.from(),K.to())}P&&(g.state.sublimeFindFullWord=g.doc.sel)},L.skipAndSelectNextOccurrence=function(g){var w=g.getCursor("anchor"),M=g.getCursor("head");L.selectNextOccurrence(g),0!=k.cmpPos(w,M)&&g.doc.setSelections(g.doc.listSelections().filter(function(P){return P.anchor!=w||P.head!=M}))},L.addCursorToPrevLine=function(g){se(g,-1)},L.addCursorToNextLine=function(g){se(g,1)};var q="(){}[]";function z(g){for(var w=g.listSelections(),M=[],P=0;P<w.length;P++){var b=w[P],U=b.head,re=g.scanForBracket(U,-1);if(!re)return!1;for(;;){var K=g.scanForBracket(U,1);if(!K)return!1;if(K.ch==q.charAt(q.indexOf(re.ch)+1)){var ee=_(re.pos.line,re.pos.ch+1);if(0!=k.cmpPos(ee,b.from())||0!=k.cmpPos(K.pos,b.to())){M.push({anchor:ee,head:K.pos});break}if(!(re=g.scanForBracket(re.pos,-1)))return!1}U=_(K.pos.line,K.pos.ch+1)}}return g.setSelections(M),!0}function ue(g){return g?/\bpunctuation\b/.test(g)?g:void 0:null}function ce(g,w,M){if(g.isReadOnly())return k.Pass;for(var U,P=g.listSelections(),b=[],re=0;re<P.length;re++){var K=P[re];if(!K.empty()){for(var ee=K.from().line,G=K.to().line;re<P.length-1&&P[re+1].from().line==G;)G=P[++re].to().line;P[re].to().ch||G--,b.push(ee,G)}}b.length?U=!0:b.push(g.firstLine(),g.lastLine()),g.operation(function(){for(var xe=[],x=0;x<b.length;x+=2){var he=b[x+1],Ee=_(b[x],0),We=_(he),ze=g.getRange(Ee,We,!1);ze.sort(w?function(Ge,O){return Ge<O?-M:Ge==O?0:M}:function(Ge,O){var C=Ge.toUpperCase(),Ae=O.toUpperCase();return C!=Ae&&(Ge=C,O=Ae),Ge<O?-M:Ge==O?0:M}),g.replaceRange(ze,Ee,We),U&&xe.push({anchor:Ee,head:_(he+1,0)})}U&&g.setSelections(xe,0)})}function Fe(g,w){g.operation(function(){for(var M=g.listSelections(),P=[],b=[],U=0;U<M.length;U++)(re=M[U]).empty()?(P.push(U),b.push("")):b.push(w(g.getRange(re.from(),re.to())));var K;for(g.replaceSelections(b,"around","case"),U=P.length-1;U>=0;U--){var re=M[P[U]];if(!(K&&k.cmpPos(re.head,K)>0)){var ee=B(g,re.head);K=ee.from,g.replaceRange(w(ee.word),ee.from,ee.to)}}})}function te(g){var w=g.getCursor("from"),M=g.getCursor("to");if(0==k.cmpPos(w,M)){var P=B(g,w);if(!P.word)return;w=P.from,M=P.to}return{from:w,to:M,query:g.getRange(w,M),word:P}}function ie(g,w){var M=te(g);if(M){var P=M.query,b=g.getSearchCursor(P,w?M.to:M.from);(w?b.findNext():b.findPrevious())?g.setSelection(b.from(),b.to()):(b=g.getSearchCursor(P,w?_(g.firstLine(),0):g.clipPos(_(g.lastLine()))),(w?b.findNext():b.findPrevious())?g.setSelection(b.from(),b.to()):M.word&&g.setSelection(M.from,M.to))}}L.selectScope=function(g){z(g)||g.execCommand("selectAll")},L.selectBetweenBrackets=function(g){if(!z(g))return k.Pass},L.goToBracket=function(g){g.extendSelectionsBy(function(w){var M=g.scanForBracket(w.head,1,ue(g.getTokenTypeAt(w.head)));if(M&&0!=k.cmpPos(M.pos,w.head))return M.pos;var P=g.scanForBracket(w.head,-1,ue(g.getTokenTypeAt(_(w.head.line,w.head.ch+1))));return P&&_(P.pos.line,P.pos.ch+1)||w.head})},L.swapLineUp=function(g){if(g.isReadOnly())return k.Pass;for(var w=g.listSelections(),M=[],P=g.firstLine()-1,b=[],U=0;U<w.length;U++){var re=w[U],K=re.from().line-1,ee=re.to().line;b.push({anchor:_(re.anchor.line-1,re.anchor.ch),head:_(re.head.line-1,re.head.ch)}),0==re.to().ch&&!re.empty()&&--ee,K>P?M.push(K,ee):M.length&&(M[M.length-1]=ee),P=ee}g.operation(function(){for(var G=0;G<M.length;G+=2){var xe=M[G],x=M[G+1],fe=g.getLine(xe);g.replaceRange("",_(xe,0),_(xe+1,0),"+swapLine"),x>g.lastLine()?g.replaceRange("\n"+fe,_(g.lastLine()),null,"+swapLine"):g.replaceRange(fe+"\n",_(x,0),null,"+swapLine")}g.setSelections(b),g.scrollIntoView()})},L.swapLineDown=function(g){if(g.isReadOnly())return k.Pass;for(var w=g.listSelections(),M=[],P=g.lastLine()+1,b=w.length-1;b>=0;b--){var U=w[b],re=U.to().line+1,K=U.from().line;0==U.to().ch&&!U.empty()&&re--,re<P?M.push(re,K):M.length&&(M[M.length-1]=K),P=K}g.operation(function(){for(var ee=M.length-2;ee>=0;ee-=2){var G=M[ee],xe=M[ee+1],x=g.getLine(G);G==g.lastLine()?g.replaceRange("",_(G-1),_(G),"+swapLine"):g.replaceRange("",_(G,0),_(G+1,0),"+swapLine"),g.replaceRange(x+"\n",_(xe,0),null,"+swapLine")}g.scrollIntoView()})},L.toggleCommentIndented=function(g){g.toggleComment({indent:!0})},L.joinLines=function(g){for(var w=g.listSelections(),M=[],P=0;P<w.length;P++){for(var b=w[P],U=b.from(),re=U.line,K=b.to().line;P<w.length-1&&w[P+1].from().line==K;)K=w[++P].to().line;M.push({start:re,end:K,anchor:!b.empty()&&U})}g.operation(function(){for(var ee=0,G=[],xe=0;xe<M.length;xe++){for(var he,x=M[xe],fe=x.anchor&&_(x.anchor.line-ee,x.anchor.ch),Ee=x.start;Ee<=x.end;Ee++){var We=Ee-ee;Ee==x.end&&(he=_(We,g.getLine(We).length+1)),We<g.lastLine()&&(g.replaceRange(" ",_(We),_(We+1,/^\s*/.exec(g.getLine(We+1))[0].length)),++ee)}G.push({anchor:fe||he,head:he})}g.setSelections(G,0)})},L.duplicateLine=function(g){g.operation(function(){for(var w=g.listSelections().length,M=0;M<w;M++){var P=g.listSelections()[M];P.empty()?g.replaceRange(g.getLine(P.head.line)+"\n",_(P.head.line,0)):g.replaceRange(g.getRange(P.from(),P.to()),P.from())}g.scrollIntoView()})},L.sortLines=function(g){ce(g,!0,1)},L.reverseSortLines=function(g){ce(g,!0,-1)},L.sortLinesInsensitive=function(g){ce(g,!1,1)},L.reverseSortLinesInsensitive=function(g){ce(g,!1,-1)},L.nextBookmark=function(g){var w=g.state.sublimeBookmarks;if(w)for(;w.length;){var M=w.shift(),P=M.find();if(P)return w.push(M),g.setSelection(P.from,P.to)}},L.prevBookmark=function(g){var w=g.state.sublimeBookmarks;if(w)for(;w.length;){w.unshift(w.pop());var M=w[w.length-1].find();if(M)return g.setSelection(M.from,M.to);w.pop()}},L.toggleBookmark=function(g){for(var w=g.listSelections(),M=g.state.sublimeBookmarks||(g.state.sublimeBookmarks=[]),P=0;P<w.length;P++){for(var b=w[P].from(),U=w[P].to(),re=w[P].empty()?g.findMarksAt(b):g.findMarks(b,U),K=0;K<re.length;K++)if(re[K].sublimeBookmark){re[K].clear();for(var ee=0;ee<M.length;ee++)M[ee]==re[K]&&M.splice(ee--,1);break}K==re.length&&M.push(g.markText(b,U,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},L.clearBookmarks=function(g){var w=g.state.sublimeBookmarks;if(w)for(var M=0;M<w.length;M++)w[M].clear();w.length=0},L.selectBookmarks=function(g){var w=g.state.sublimeBookmarks,M=[];if(w)for(var P=0;P<w.length;P++){var b=w[P].find();b?M.push({anchor:b.from,head:b.to}):w.splice(P--,0)}M.length&&g.setSelections(M,0)},L.smartBackspace=function(g){if(g.somethingSelected())return k.Pass;g.operation(function(){for(var w=g.listSelections(),M=g.getOption("indentUnit"),P=w.length-1;P>=0;P--){var b=w[P].head,U=g.getRange({line:b.line,ch:0},b),re=k.countColumn(U,null,g.getOption("tabSize")),K=g.findPosH(b,-1,"char",!1);if(U&&!/\S/.test(U)&&re%M==0){var ee=new _(b.line,k.findColumn(U,re-M,M));ee.ch!=b.ch&&(K=ee)}g.replaceRange("",K,b,"+delete")}})},L.delLineRight=function(g){g.operation(function(){for(var w=g.listSelections(),M=w.length-1;M>=0;M--)g.replaceRange("",w[M].anchor,_(w[M].to().line),"+delete");g.scrollIntoView()})},L.upcaseAtCursor=function(g){Fe(g,function(w){return w.toUpperCase()})},L.downcaseAtCursor=function(g){Fe(g,function(w){return w.toLowerCase()})},L.setSublimeMark=function(g){g.state.sublimeMark&&g.state.sublimeMark.clear(),g.state.sublimeMark=g.setBookmark(g.getCursor())},L.selectToSublimeMark=function(g){var w=g.state.sublimeMark&&g.state.sublimeMark.find();w&&g.setSelection(g.getCursor(),w)},L.deleteToSublimeMark=function(g){var w=g.state.sublimeMark&&g.state.sublimeMark.find();if(w){var M=g.getCursor(),P=w;if(k.cmpPos(M,P)>0){var b=P;P=M,M=b}g.state.sublimeKilled=g.getRange(M,P),g.replaceRange("",M,P)}},L.swapWithSublimeMark=function(g){var w=g.state.sublimeMark&&g.state.sublimeMark.find();w&&(g.state.sublimeMark.clear(),g.state.sublimeMark=g.setBookmark(g.getCursor()),g.setCursor(w))},L.sublimeYank=function(g){null!=g.state.sublimeKilled&&g.replaceSelection(g.state.sublimeKilled,null,"paste")},L.showInCenter=function(g){var w=g.cursorCoords(null,"local");g.scrollTo(null,(w.top+w.bottom)/2-g.getScrollInfo().clientHeight/2)},L.findUnder=function(g){ie(g,!0)},L.findUnderPrevious=function(g){ie(g,!1)},L.findAllUnder=function(g){var w=te(g);if(w){for(var M=g.getSearchCursor(w.query),P=[],b=-1;M.findNext();)P.push({anchor:M.from(),head:M.to()}),M.from().line<=w.from.line&&M.from().ch<=w.from.ch&&b++;g.setSelections(P,b)}};var T=k.keyMap;T.macSublime={"Cmd-Left":"goLineStartSmart","Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-Left":"goSubwordLeft","Ctrl-Right":"goSubwordRight","Ctrl-Alt-Up":"scrollLineUp","Ctrl-Alt-Down":"scrollLineDown","Cmd-L":"selectLine","Shift-Cmd-L":"splitSelectionByLine",Esc:"singleSelectionTop","Cmd-Enter":"insertLineAfter","Shift-Cmd-Enter":"insertLineBefore","Cmd-D":"selectNextOccurrence","Shift-Cmd-Space":"selectScope","Shift-Cmd-M":"selectBetweenBrackets","Cmd-M":"goToBracket","Cmd-Ctrl-Up":"swapLineUp","Cmd-Ctrl-Down":"swapLineDown","Cmd-/":"toggleCommentIndented","Cmd-J":"joinLines","Shift-Cmd-D":"duplicateLine",F5:"sortLines","Shift-F5":"reverseSortLines","Cmd-F5":"sortLinesInsensitive","Shift-Cmd-F5":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Cmd-F2":"toggleBookmark","Shift-Cmd-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Cmd-K Cmd-D":"skipAndSelectNextOccurrence","Cmd-K Cmd-K":"delLineRight","Cmd-K Cmd-U":"upcaseAtCursor","Cmd-K Cmd-L":"downcaseAtCursor","Cmd-K Cmd-Space":"setSublimeMark","Cmd-K Cmd-A":"selectToSublimeMark","Cmd-K Cmd-W":"deleteToSublimeMark","Cmd-K Cmd-X":"swapWithSublimeMark","Cmd-K Cmd-Y":"sublimeYank","Cmd-K Cmd-C":"showInCenter","Cmd-K Cmd-G":"clearBookmarks","Cmd-K Cmd-Backspace":"delLineLeft","Cmd-K Cmd-1":"foldAll","Cmd-K Cmd-0":"unfoldAll","Cmd-K Cmd-J":"unfoldAll","Ctrl-Shift-Up":"addCursorToPrevLine","Ctrl-Shift-Down":"addCursorToNextLine","Cmd-F3":"findUnder","Shift-Cmd-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Cmd-[":"fold","Shift-Cmd-]":"unfold","Cmd-I":"findIncremental","Shift-Cmd-I":"findIncrementalReverse","Cmd-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"macDefault"},k.normalizeKeyMap(T.macSublime),T.pcSublime={"Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-T":"transposeChars","Alt-Left":"goSubwordLeft","Alt-Right":"goSubwordRight","Ctrl-Up":"scrollLineUp","Ctrl-Down":"scrollLineDown","Ctrl-L":"selectLine","Shift-Ctrl-L":"splitSelectionByLine",Esc:"singleSelectionTop","Ctrl-Enter":"insertLineAfter","Shift-Ctrl-Enter":"insertLineBefore","Ctrl-D":"selectNextOccurrence","Shift-Ctrl-Space":"selectScope","Shift-Ctrl-M":"selectBetweenBrackets","Ctrl-M":"goToBracket","Shift-Ctrl-Up":"swapLineUp","Shift-Ctrl-Down":"swapLineDown","Ctrl-/":"toggleCommentIndented","Ctrl-J":"joinLines","Shift-Ctrl-D":"duplicateLine",F9:"sortLines","Shift-F9":"reverseSortLines","Ctrl-F9":"sortLinesInsensitive","Shift-Ctrl-F9":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Ctrl-F2":"toggleBookmark","Shift-Ctrl-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Ctrl-K Ctrl-D":"skipAndSelectNextOccurrence","Ctrl-K Ctrl-K":"delLineRight","Ctrl-K Ctrl-U":"upcaseAtCursor","Ctrl-K Ctrl-L":"downcaseAtCursor","Ctrl-K Ctrl-Space":"setSublimeMark","Ctrl-K Ctrl-A":"selectToSublimeMark","Ctrl-K Ctrl-W":"deleteToSublimeMark","Ctrl-K Ctrl-X":"swapWithSublimeMark","Ctrl-K Ctrl-Y":"sublimeYank","Ctrl-K Ctrl-C":"showInCenter","Ctrl-K Ctrl-G":"clearBookmarks","Ctrl-K Ctrl-Backspace":"delLineLeft","Ctrl-K Ctrl-1":"foldAll","Ctrl-K Ctrl-0":"unfoldAll","Ctrl-K Ctrl-J":"unfoldAll","Ctrl-Alt-Up":"addCursorToPrevLine","Ctrl-Alt-Down":"addCursorToNextLine","Ctrl-F3":"findUnder","Shift-Ctrl-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Ctrl-[":"fold","Shift-Ctrl-]":"unfold","Ctrl-I":"findIncremental","Shift-Ctrl-I":"findIncrementalReverse","Ctrl-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"pcDefault"},k.normalizeKeyMap(T.pcSublime),T.sublime=T.default==T.macDefault?T.macSublime:T.pcSublime}(pe(9475),pe(7660),pe(2946))},1900:(bt,rt,pe)=>{!function(k){"use strict";var L=k.Pos;function _(se,X){var q=se.state.vim;if(!q||q.insertMode)return X.head;var z=q.sel.head;return z?q.visualBlock&&X.head.line!=z.line?void 0:X.from()!=X.anchor||X.empty()||X.head.line!=z.line||X.head.ch==z.ch?X.head:new L(X.head.line,X.head.ch-1):X.head}var Q=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<Del>",type:"keyToKey",toKeys:"x",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"gn",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!0}},{keys:"gN",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!1}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-u>",type:"operatorMotion",operator:"delete",motion:"moveToStartOfLine",context:"insert"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],f=Q.length,E=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"vglobal",shortName:"v"},{name:"global",shortName:"g"}];k.Vim=function(){function q(o,l){this==k.keyMap.vim&&(o.options.$customCursor=null,k.rmClass(o.getWrapperElement(),"cm-fat-cursor")),(!l||l.attach!=z)&&function(o){o.setOption("disableInput",!1),o.off("cursorActivity",ni),k.off(o.getInputField(),"paste",ie(o)),o.state.vim=null,nn&&clearTimeout(nn)}(o)}function z(o,l){this==k.keyMap.vim&&(o.curOp&&(o.curOp.selectionChanged=!0),o.options.$customCursor=_,k.addClass(o.getWrapperElement(),"cm-fat-cursor")),(!l||l.attach!=z)&&function(o){o.setOption("disableInput",!0),o.setOption("showCursorWhenSelecting",!1),k.signal(o,"vim-mode-change",{mode:"normal"}),o.on("cursorActivity",ni),ne(o),k.on(o.getInputField(),"paste",ie(o))}(o)}function ue(o,l){if(l){if(this[o])return this[o];var s=function(o){if("'"==o.charAt(0))return o.charAt(1);var l=o.split(/-(?!$)/),s=l[l.length-1];if(1==l.length&&1==l[0].length)return!1;if(2==l.length&&"Shift"==l[0]&&1==s.length)return!1;for(var c=!1,p=0;p<l.length;p++){var v=l[p];v in ce?l[p]=ce[v]:c=!0,v in Fe&&(l[p]=Fe[v])}return!!c&&(fe(s)&&(l[l.length-1]=s.toLowerCase()),"<"+l.join("-")+">")}(o);if(!s)return!1;var c=Ue.findKey(l,s);return"function"==typeof c&&k.signal(l,"vim-keypress",s),c}}k.defineOption("vimMode",!1,function(o,l,s){l&&"vim"!=o.getOption("keyMap")?o.setOption("keyMap","vim"):!l&&s!=k.Init&&/^vim/.test(o.getOption("keyMap"))&&o.setOption("keyMap","default")});var ce={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A",CapsLock:""},Fe={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"};function ie(o){var l=o.state.vim;return l.onPasteFn||(l.onPasteFn=function(){l.insertMode||(o.setCursor(xt(o.getCursor(),0,1)),Kt.enterInsertMode(o,{},l))}),l.onPasteFn}var T=/[\d]/,W=[k.isWordChar,function(o){return o&&!k.isWordChar(o)&&!/\s/.test(o)}],g=[function(o){return/\S/.test(o)}];function w(o,l){for(var s=[],c=o;c<o+l;c++)s.push(String.fromCharCode(c));return s}var K,M=w(65,26),P=w(97,26),b=w(48,10),U=[].concat(M,P,b,["<",">"]),re=[].concat(M,P,b,["-",'"',".",":","_","/"]);try{K=new RegExp("^[\\p{Lu}]$","u")}catch(o){K=/^[A-Z]$/}function ee(o,l){return l>=o.firstLine()&&l<=o.lastLine()}function G(o){return/^[a-z]$/.test(o)}function xe(o){return-1!="()[]{}".indexOf(o)}function x(o){return T.test(o)}function fe(o){return K.test(o)}function he(o){return/^\s*$/.test(o)}function Ee(o){return-1!=".?!".indexOf(o)}function We(o,l){for(var s=0;s<l.length;s++)if(l[s]==o)return!0;return!1}var ze={};function Ge(o,l,s,c,p){if(void 0===l&&!p)throw Error("defaultValue is required unless callback is provided");if(s||(s="string"),ze[o]={type:s,defaultValue:l,callback:p},c)for(var v=0;v<c.length;v++)ze[c[v]]=ze[o];l&&O(o,l)}function O(o,l,s,c){var p=ze[o],v=(c=c||{}).scope;if(!p)return new Error("Unknown option: "+o);if("boolean"==p.type){if(l&&!0!==l)return new Error("Invalid argument: "+o+"="+l);!1!==l&&(l=!0)}p.callback?("local"!==v&&p.callback(l,void 0),"global"!==v&&s&&p.callback(l,s)):("local"!==v&&(p.value="boolean"==p.type?!!l:l),"global"!==v&&s&&(s.state.vim.options[o]={value:l}))}function C(o,l,s){var c=ze[o],p=(s=s||{}).scope;if(!c)return new Error("Unknown option: "+o);if(c.callback){var v=l&&c.callback(void 0,l);return"global"!==p&&void 0!==v?v:"local"!==p?c.callback():void 0}return((v="global"!==p&&l&&l.state.vim.options[o])||"local"!==p&&c||{}).value}Ge("filetype",void 0,"string",["ft"],function(o,l){if(void 0!==l){var s;if(void 0===o)return"null"==(s=l.getOption("mode"))?"":s;l.setOption("mode",s=""==o?"null":o)}});var V,Ae=function(){var o=100,l=-1,s=0,c=0,p=new Array(o);function S(D,j){(l+=j)>s?l=s:l<c&&(l=c);var Z=p[(o+l)%o];if(Z&&!Z.find()){var Le,ge=j>0?1:-1,ye=D.getCursor();do{if((Z=p[(o+(l+=ge))%o])&&(Le=Z.find())&&!pt(ye,Le))break}while(l<s&&l>c)}return Z}return{cachedCursor:void 0,add:function(D,j,Z){var Le=p[l%o];function ye(Pe){var Me=++l%o,Je=p[Me];Je&&Je.clear(),p[Me]=D.setBookmark(Pe)}if(Le){var ke=Le.find();ke&&!pt(ke,j)&&ye(j)}else ye(j);ye(Z),s=l,(c=l-o+1)<0&&(c=0)},find:function(D,j){var Z=l,ge=S(D,j);return l=Z,ge&&ge.find()},move:S}},R=function(o){return o?{changes:o.changes,expectCursorActivityForChange:o.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function Y(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=R()}function ne(o){return o.state.vim||(o.state.vim={inputState:new Ye,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),o.state.vim}function Oe(){for(var o in V={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:Ae(),macroModeState:new Y,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new Pt({}),searchHistoryController:new It,exCommandHistoryController:new It},ze){var l=ze[o];l.value=l.defaultValue}}Y.prototype={exitMacroRecordMode:function(){var o=V.macroModeState;o.onRecordingDone&&o.onRecordingDone(),o.onRecordingDone=void 0,o.isRecording=!1},enterMacroRecordMode:function(o,l){var s=V.registerController.getRegister(l);s&&(s.clear(),this.latestRegister=l,o.openDialog&&(this.onRecordingDone=o.openDialog(document.createTextNode("(recording)["+l+"]"),null,{bottom:!0})),this.isRecording=!0)}};var Qe,Ue={buildKeyMap:function(){},getRegisterController:function(){return V.registerController},resetVimGlobalState_:Oe,getVimGlobalState_:function(){return V},maybeInitVimState_:ne,suppressErrorLogging:!1,InsertModeKey:on,map:function(o,l,s){pr.map(o,l,s)},unmap:function(o,l){return pr.unmap(o,l)},noremap:function(o,l,s){function c(Le){return Le?[Le]:["normal","insert","visual"]}for(var p=c(s),v=Q.length,I=v-f;I<v&&p.length;I++){var D=Q[I];if(!(D.keys!=l||s&&D.context&&D.context!==s||"ex"===D.type.substr(0,2)||"key"===D.type.substr(0,3))){var j={};for(var Z in D)j[Z]=D[Z];j.keys=o,s&&!j.context&&(j.context=s),this._mapCommand(j);var ge=c(D.context);p=p.filter(function(Le){return-1===ge.indexOf(Le)})}}},mapclear:function(o){var l=Q.length,s=f,c=Q.slice(0,l-s);if(Q=Q.slice(l-s),o)for(var p=c.length-1;p>=0;p--){var v=c[p];if(o!==v.context)if(v.context)this._mapCommand(v);else{var S=["normal","insert","visual"];for(var I in S)if(S[I]!==o){var D={};for(var j in v)D[j]=v[j];D.context=S[I],this._mapCommand(D)}}}},setOption:O,getOption:C,defineOption:Ge,defineEx:function(o,l,s){if(l){if(0!==o.indexOf(l))throw new Error('(Vim.defineEx) "'+l+'" is not a prefix of "'+o+'", command not registered')}else l=o;Bi[o]=s,pr.commandMap_[l]={name:o,shortName:l,type:"api"}},handleKey:function(o,l,s){var c=this.findKey(o,l,s);if("function"==typeof c)return c()},findKey:function(o,l,s){var j,c=ne(o);function p(){var Z=V.macroModeState;if(Z.isRecording){if("q"==l)return Z.exitMacroRecordMode(),_e(o),!0;"mapping"!=s&&function(o,l){if(!o.isPlaying){var c=V.registerController.getRegister(o.latestRegister);c&&c.pushText(l)}}(Z,l)}}function v(){if("<Esc>"==l)return _e(o),c.visualMode?Ft(o):c.insertMode&&yn(o),!0}return!1===(j=c.insertMode?function(){if(v())return!0;for(var Z=c.inputState.keyBuffer=c.inputState.keyBuffer+l,ge=1==l.length,Le=Lt.matchCommand(Z,Q,c.inputState,"insert");Z.length>1&&"full"!=Le.type;){Z=c.inputState.keyBuffer=Z.slice(1);var ye=Lt.matchCommand(Z,Q,c.inputState,"insert");"none"!=ye.type&&(Le=ye)}if("none"==Le.type)return _e(o),!1;if("partial"==Le.type)return Qe&&window.clearTimeout(Qe),Qe=window.setTimeout(function(){c.insertMode&&c.inputState.keyBuffer&&_e(o)},C("insertModeEscKeysTimeout")),!ge;if(Qe&&window.clearTimeout(Qe),ge){for(var ke=o.listSelections(),Pe=0;Pe<ke.length;Pe++){var Me=ke[Pe].head;o.replaceRange("",xt(Me,0,-(Z.length-1)),Me,"+input")}V.macroModeState.lastInsertModeChanges.changes.pop()}return _e(o),Le.command}():function(){if(p()||v())return!0;var Z=c.inputState.keyBuffer=c.inputState.keyBuffer+l;if(/^[1-9]\d*$/.test(Z))return!0;if(!(ge=/^(\d*)(.*)$/.exec(Z)))return _e(o),!1;var Le=c.visualMode?"visual":"normal",ye=ge[2]||ge[1];c.inputState.operatorShortcut&&c.inputState.operatorShortcut.slice(-1)==ye&&(ye=c.inputState.operatorShortcut);var ge,ke=Lt.matchCommand(ye,Q,c.inputState,Le);return"none"==ke.type?(_e(o),!1):"partial"==ke.type||(c.inputState.keyBuffer="",(ge=/^(\d*)(.*)$/.exec(Z))[1]&&"0"!=ge[1]&&c.inputState.pushRepeatDigit(ge[1]),ke.command)}())?c.insertMode||1!==l.length?void 0:function(){return!0}:!0===j?function(){return!0}:function(){return o.operation(function(){o.curOp.isVimOp=!0;try{"keyToKey"==j.type?function(Z){for(var ge;Z;)ge=/<\w+-.+?>|<\w+>|./.exec(Z),Z=Z.substring(ge.index+(l=ge[0]).length),Ue.handleKey(o,l,"mapping")}(j.toKeys):Lt.processCommand(o,c,j)}catch(Z){throw o.state.vim=void 0,ne(o),Ue.suppressErrorLogging||console.log(Z),Z}return!0})}},handleEx:function(o,l){pr.processCommand(o,l)},defineMotion:function(o,l){Dt[o]=l},defineAction:function(o,l){Kt[o]=l},defineOperator:function(o,l){sr[o]=l},mapCommand:function(o,l,s,c,p){var v={keys:o,type:l};for(var S in v[l]=s,v[l+"Args"]=c,p)v[S]=p[S];Ri(v)},_mapCommand:Ri,defineRegister:function(o,l){var s=V.registerController.registers;if(!o||1!=o.length)throw Error("Register name must be 1 character");if(s[o])throw Error("Register already defined "+o);s[o]=l,re.push(o)},exitVisualMode:Ft,exitInsertMode:yn};function Ye(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}function _e(o,l){o.state.vim.inputState=new Ye,k.signal(o,"vim-command-done",l)}function Ct(o,l,s){this.clear(),this.keyBuffer=[o||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!l,this.blockwise=!!s}function Pt(o){this.registers=o,this.unnamedRegister=o['"']=new Ct,o["."]=new Ct,o[":"]=new Ct,o["/"]=new Ct}function It(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}Ye.prototype.pushRepeatDigit=function(o){this.operator?this.motionRepeat=this.motionRepeat.concat(o):this.prefixRepeat=this.prefixRepeat.concat(o)},Ye.prototype.getRepeat=function(){var o=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(o=1,this.prefixRepeat.length>0&&(o*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(o*=parseInt(this.motionRepeat.join(""),10))),o},Ct.prototype={setText:function(o,l,s){this.keyBuffer=[o||""],this.linewise=!!l,this.blockwise=!!s},pushText:function(o,l){l&&(this.linewise||this.keyBuffer.push("\n"),this.linewise=!0),this.keyBuffer.push(o)},pushInsertModeChanges:function(o){this.insertModeChanges.push(R(o))},pushSearchQuery:function(o){this.searchQueries.push(o)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}},Pt.prototype={pushText:function(o,l,s,c,p){if("_"!==o){c&&"\n"!==s.charAt(s.length-1)&&(s+="\n");var v=this.isValidRegister(o)?this.getRegister(o):null;if(!v){switch(l){case"yank":this.registers[0]=new Ct(s,c,p);break;case"delete":case"change":-1==s.indexOf("\n")?this.registers["-"]=new Ct(s,c):(this.shiftNumericRegisters_(),this.registers[1]=new Ct(s,c))}return void this.unnamedRegister.setText(s,c,p)}fe(o)?v.pushText(s,c):v.setText(s,c,p),this.unnamedRegister.setText(v.toString(),c)}},getRegister:function(o){return this.isValidRegister(o)?(o=o.toLowerCase(),this.registers[o]||(this.registers[o]=new Ct),this.registers[o]):this.unnamedRegister},isValidRegister:function(o){return o&&We(o,re)},shiftNumericRegisters_:function(){for(var o=9;o>=2;o--)this.registers[o]=this.getRegister(""+(o-1))}},It.prototype={nextMatch:function(o,l){var s=this.historyBuffer,c=l?-1:1;null===this.initialPrefix&&(this.initialPrefix=o);for(var p=this.iterator+c;l?p>=0:p<s.length;p+=c)for(var v=s[p],S=0;S<=v.length;S++)if(this.initialPrefix==v.substring(0,S))return this.iterator=p,v;return p>=s.length?(this.iterator=s.length,this.initialPrefix):p<0?o:void 0},pushInput:function(o){var l=this.historyBuffer.indexOf(o);l>-1&&this.historyBuffer.splice(l,1),o.length&&this.historyBuffer.push(o)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var Lt={matchCommand:function(o,l,s,c){var p=function(o,l,s,c){for(var p,v=[],S=[],I=0;I<l.length;I++){var D=l[I];"insert"==s&&"insert"!=D.context||D.context&&D.context!=s||c.operator&&"action"==D.type||!(p=it(o,D.keys))||("partial"==p&&v.push(D),"full"==p&&S.push(D))}return{partial:v.length&&v,full:S.length&&S}}(o,l,c,s);if(!p.full&&!p.partial)return{type:"none"};if(!p.full&&p.partial)return{type:"partial"};for(var v,S=0;S<p.full.length;S++)v||(v=p.full[S]);if("<character>"==v.keys.slice(-11)){var D=function(o){var l=/^.*(<[^>]+>)$/.exec(o),s=l?l[1]:o.slice(-1);if(s.length>1)switch(s){case"<CR>":s="\n";break;case"<Space>":s=" ";break;default:s=""}return s}(o);if(!D)return{type:"none"};s.selectedCharacter=D}return{type:"full",command:v}},processCommand:function(o,l,s){switch(l.inputState.repeatOverride=s.repeatOverride,s.type){case"motion":this.processMotion(o,l,s);break;case"operator":this.processOperator(o,l,s);break;case"operatorMotion":this.processOperatorMotion(o,l,s);break;case"action":this.processAction(o,l,s);break;case"search":this.processSearch(o,l,s);break;case"ex":case"keyToEx":this.processEx(o,l,s)}},processMotion:function(o,l,s){l.inputState.motion=s.motion,l.inputState.motionArgs=Zt(s.motionArgs),this.evalInput(o,l)},processOperator:function(o,l,s){var c=l.inputState;if(c.operator){if(c.operator==s.operator)return c.motion="expandToLine",c.motionArgs={linewise:!0},void this.evalInput(o,l);_e(o)}c.operator=s.operator,c.operatorArgs=Zt(s.operatorArgs),s.keys.length>1&&(c.operatorShortcut=s.keys),s.exitVisualBlock&&(l.visualBlock=!1,Tt(o)),l.visualMode&&this.evalInput(o,l)},processOperatorMotion:function(o,l,s){var c=l.visualMode,p=Zt(s.operatorMotionArgs);p&&c&&p.visualLine&&(l.visualLine=!0),this.processOperator(o,l,s),c||this.processMotion(o,l,s)},processAction:function(o,l,s){var c=l.inputState,p=c.getRepeat(),v=!!p,S=Zt(s.actionArgs)||{};c.selectedCharacter&&(S.selectedCharacter=c.selectedCharacter),s.operator&&this.processOperator(o,l,s),s.motion&&this.processMotion(o,l,s),(s.motion||s.operator)&&this.evalInput(o,l),S.repeat=p||1,S.repeatIsExplicit=v,S.registerName=c.registerName,_e(o),l.lastMotion=null,s.isEdit&&this.recordLastEdit(l,c,s),Kt[s.action](o,S,l)},processSearch:function(o,l,s){if(o.getSearchCursor){var c=s.searchArgs.forward,p=s.searchArgs.wholeWordOnly;gt(o).setReversed(!c);var v=c?"/":"?",S=gt(o).getQuery(),I=o.getScrollInfo();switch(s.searchArgs.querySrc){case"prompt":var Le=V.macroModeState;Le.isPlaying?D(Pe=Le.replaySearchQueries.shift(),!0,!1):vn(o,{onClose:function(Me){o.scrollTo(I.left,I.top),D(Me,!0,!0);var Je=V.macroModeState;Je.isRecording&&function(o,l){if(!o.isPlaying){var c=V.registerController.getRegister(o.latestRegister);c&&c.pushSearchQuery&&c.pushSearchQuery(l)}}(Je,Me)},prefix:v,desc:"(JavaScript regexp)",onKeyUp:function(Me,Je,$e){var Wt,At,qe=k.keyName(Me);"Up"==qe||"Down"==qe?(Wt=Me.target?Me.target.selectionEnd:0,$e(Je=V.searchHistoryController.nextMatch(Je,"Up"==qe)||""),Wt&&Me.target&&(Me.target.selectionEnd=Me.target.selectionStart=Math.min(Wt,Me.target.value.length))):"Left"!=qe&&"Right"!=qe&&"Ctrl"!=qe&&"Alt"!=qe&&"Shift"!=qe&&V.searchHistoryController.reset();try{At=Qr(o,Je,!0,!0)}catch(jt){}At?o.scrollIntoView(Vn(o,!c,At),30):(Fn(o),o.scrollTo(I.left,I.top))},onKeyDown:function(Me,Je,$e){var qe=k.keyName(Me);"Esc"==qe||"Ctrl-C"==qe||"Ctrl-["==qe||"Backspace"==qe&&""==Je?(V.searchHistoryController.pushInput(Je),V.searchHistoryController.reset(),Qr(o,S),Fn(o),o.scrollTo(I.left,I.top),k.e_stop(Me),_e(o),$e(),o.focus()):"Up"==qe||"Down"==qe?k.e_stop(Me):"Ctrl-U"==qe&&(k.e_stop(Me),$e(""))}});break;case"wordUnderCursor":var ye=Dr(o,!1,0,!1,!0),ke=!0;if(ye||(ye=Dr(o,!1,0,!1,!1),ke=!1),!ye)return;var Pe=o.getLine(ye.start.line).substring(ye.start.ch,ye.end.ch);Pe=ke&&p?"\\b"+Pe+"\\b":function(o){return o.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}(Pe),V.jumpList.cachedCursor=o.getCursor(),o.setCursor(ye.start),D(Pe,!0,!1)}}function D(Me,Je,$e){V.searchHistoryController.pushInput(Me),V.searchHistoryController.reset();try{Qr(o,Me,Je,$e)}catch(qe){return Ve(o,"Invalid regex: "+Me),void _e(o)}Lt.processMotion(o,l,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:s.searchArgs.toJumplist}})}},processEx:function(o,l,s){function c(v){V.exCommandHistoryController.pushInput(v),V.exCommandHistoryController.reset(),pr.processCommand(o,v)}function p(v,S,I){var Z,D=k.keyName(v);("Esc"==D||"Ctrl-C"==D||"Ctrl-["==D||"Backspace"==D&&""==S)&&(V.exCommandHistoryController.pushInput(S),V.exCommandHistoryController.reset(),k.e_stop(v),_e(o),I(),o.focus()),"Up"==D||"Down"==D?(k.e_stop(v),Z=v.target?v.target.selectionEnd:0,I(S=V.exCommandHistoryController.nextMatch(S,"Up"==D)||""),Z&&v.target&&(v.target.selectionEnd=v.target.selectionStart=Math.min(Z,v.target.value.length))):"Ctrl-U"==D?(k.e_stop(v),I("")):"Left"!=D&&"Right"!=D&&"Ctrl"!=D&&"Alt"!=D&&"Shift"!=D&&V.exCommandHistoryController.reset()}"keyToEx"==s.type?pr.processCommand(o,s.exArgs.input):vn(o,l.visualMode?{onClose:c,prefix:":",value:"'<,'>",onKeyDown:p,selectValueOnOpen:!1}:{onClose:c,prefix:":",onKeyDown:p})},evalInput:function(o,l){var ye,ke,Pe,s=l.inputState,c=s.motion,p=s.motionArgs||{},v=s.operator,S=s.operatorArgs||{},I=s.registerName,D=l.sel,j=st(l.visualMode?Ht(o,D.head):o.getCursor("head")),Z=st(l.visualMode?Ht(o,D.anchor):o.getCursor("anchor")),ge=st(j),Le=st(Z);if(v&&this.recordLastEdit(l,s),(Pe=void 0!==s.repeatOverride?s.repeatOverride:s.getRepeat())>0&&p.explicitRepeat?p.repeatIsExplicit=!0:(p.noRepeat||!p.explicitRepeat&&0===Pe)&&(Pe=1,p.repeatIsExplicit=!1),s.selectedCharacter&&(p.selectedCharacter=S.selectedCharacter=s.selectedCharacter),p.repeat=Pe,_e(o),c){var Me=Dt[c](o,j,p,l,s);if(l.lastMotion=Dt[c],!Me)return;if(p.toJumplist){var Je=V.jumpList,$e=Je.cachedCursor;$e?(dr(o,$e,Me),delete Je.cachedCursor):dr(o,j,Me)}Me instanceof Array?(ke=Me[0],ye=Me[1]):ye=Me,ye||(ye=st(j)),l.visualMode?(l.visualBlock&&ye.ch===1/0||(ye=Ht(o,ye)),ke&&(ke=Ht(o,ke)),D.anchor=ke=ke||Le,D.head=ye,Tt(o),me(o,l,"<",Xe(ke,ye)?ke:ye),me(o,l,">",Xe(ke,ye)?ye:ke)):v||(ye=Ht(o,ye),o.setCursor(ye.line,ye.ch))}if(v){if(S.lastSel){ke=Le;var qe=S.lastSel,ut=Math.abs(qe.head.line-qe.anchor.line),Wt=Math.abs(qe.head.ch-qe.anchor.ch);ye=qe.visualLine?new L(Le.line+ut,Le.ch):qe.visualBlock?new L(Le.line+ut,Le.ch+Wt):qe.head.line==qe.anchor.line?new L(Le.line,Le.ch+Wt):new L(Le.line+ut,Le.ch),l.visualMode=!0,l.visualLine=qe.visualLine,l.visualBlock=qe.visualBlock,D=l.sel={anchor:ke,head:ye},Tt(o)}else l.visualMode&&(S.lastSel={anchor:st(D.anchor),head:st(D.head),visualBlock:l.visualBlock,visualLine:l.visualLine});var At,jt,ht,lt,Ut;if(l.visualMode){if(At=at(D.head,D.anchor),jt=et(D.head,D.anchor),ht=l.visualLine||S.linewise,Ut=Ur(o,{anchor:At,head:jt},lt=l.visualBlock?"block":ht?"line":"char"),ht){var Yt=Ut.ranges;if("block"==lt)for(var Mt=0;Mt<Yt.length;Mt++)Yt[Mt].head.ch=ct(o,Yt[Mt].head.line);else"line"==lt&&(Yt[0].head=new L(Yt[0].head.line+1,0))}}else{if(At=st(ke||Le),Xe(jt=st(ye||ge),At)){var qr=At;At=jt,jt=qr}(ht=p.linewise||S.linewise)?function(o,l,s){l.ch=0,s.ch=0,s.line++}(0,At,jt):p.forward&&function(o,l,s){var c=o.getRange(l,s);if(/\n\s*$/.test(c)){var p=c.split("\n");p.pop();for(var v=p.pop();p.length>0&&v&&he(v);v=p.pop())s.line--,s.ch=0;v?(s.line--,s.ch=ct(o,s.line)):s.ch=0}}(o,At,jt),Ut=Ur(o,{anchor:At,head:jt},lt="char",!p.inclusive||ht)}o.setSelections(Ut.ranges,Ut.primary),l.lastMotion=null,S.repeat=Pe,S.registerName=I,S.linewise=ht;var ai=sr[v](o,S,Ut.ranges,Le,ye);l.visualMode&&Ft(o,null!=ai),ai&&o.setCursor(ai)}},recordLastEdit:function(o,l,s){var c=V.macroModeState;c.isPlaying||(o.lastEditInputState=l,o.lastEditActionCommand=s,c.lastInsertModeChanges.changes=[],c.lastInsertModeChanges.expectCursorActivityForChange=!1,c.lastInsertModeChanges.visualBlock=o.visualBlock?o.sel.head.line-o.sel.anchor.line:0)}},Dt={moveToTopLine:function(o,l,s){var c=$n(o).top+s.repeat-1;return new L(c,ir(o.getLine(c)))},moveToMiddleLine:function(o){var l=$n(o),s=Math.floor(.5*(l.top+l.bottom));return new L(s,ir(o.getLine(s)))},moveToBottomLine:function(o,l,s){var c=$n(o).bottom-s.repeat+1;return new L(c,ir(o.getLine(c)))},expandToLine:function(o,l,s){return new L(l.line+s.repeat-1,1/0)},findNext:function(o,l,s){var c=gt(o),p=c.getQuery();if(p){var v=!s.forward;return v=c.isReversed()?!v:v,Xn(o,p),Vn(o,v,p,s.repeat)}},findAndSelectNextInclusive:function(o,l,s,c,p){var v=gt(o),S=v.getQuery();if(S){var I=!s.forward,D=function(o,l,s,c,p){return void 0===c&&(c=1),o.operation(function(){var v=o.getCursor(),S=o.getSearchCursor(s,v),I=S.find(!l);!p.visualMode&&I&&pt(S.from(),v)&&S.find(!l);for(var D=0;D<c;D++)if(!(I=S.find(l))&&!(S=o.getSearchCursor(s,l?new L(o.lastLine()):new L(o.firstLine(),0))).find(l))return;return[S.from(),S.to()]})}(o,I=v.isReversed()?!I:I,S,s.repeat,c);if(D){if(p.operator)return D;var j=D[0],Z=new L(D[1].line,D[1].ch-1);if(c.visualMode){(c.visualLine||c.visualBlock)&&(c.visualLine=!1,c.visualBlock=!1,k.signal(o,"vim-mode-change",{mode:"visual",subMode:""}));var ge=c.sel.anchor;if(ge)return v.isReversed()?s.forward?[ge,j]:[ge,Z]:s.forward?[ge,Z]:[ge,j]}else c.visualMode=!0,c.visualLine=!1,c.visualBlock=!1,k.signal(o,"vim-mode-change",{mode:"visual",subMode:""});return I?[Z,j]:[j,Z]}}},goToMark:function(o,l,s,c){var p=ei(o,c,s.selectedCharacter);return p?s.linewise?{line:p.line,ch:ir(o.getLine(p.line))}:p:null},moveToOtherHighlightedEnd:function(o,l,s,c){if(c.visualBlock&&s.sameLine){var p=c.sel;return[Ht(o,new L(p.anchor.line,p.head.ch)),Ht(o,new L(p.head.line,p.anchor.ch))]}return[c.sel.head,c.sel.anchor]},jumpToMark:function(o,l,s,c){for(var p=l,v=0;v<s.repeat;v++){var S=p;for(var I in c.marks)if(G(I)){var D=c.marks[I].find();if(!((s.forward?Xe(D,S):Xe(S,D))||s.linewise&&D.line==S.line)){var Z=pt(S,p),ge=s.forward?Gt(S,D,p):Gt(p,D,S);(Z||ge)&&(p=D)}}}return s.linewise&&(p=new L(p.line,ir(o.getLine(p.line)))),p},moveByCharacters:function(o,l,s){var p=s.repeat;return new L(l.line,s.forward?l.ch+p:l.ch-p)},moveByLines:function(o,l,s,c){var p=l,v=p.ch;switch(c.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:v=c.lastHPos;break;default:c.lastHPos=v}var S=s.repeat+(s.repeatOffset||0),I=s.forward?p.line+S:p.line-S,D=o.firstLine(),j=o.lastLine(),Z=o.findPosV(p,s.forward?S:-S,"line",c.lastHSPos);return(s.forward?Z.line>I:Z.line<I)&&(I=Z.line,v=Z.ch),I<D&&p.line==D?this.moveToStartOfLine(o,l,s,c):I>j&&p.line==j?tr(o,l,s,c,!0):(s.toFirstChar&&(v=ir(o.getLine(I)),c.lastHPos=v),c.lastHSPos=o.charCoords(new L(I,v),"div").left,new L(I,v))},moveByDisplayLines:function(o,l,s,c){var p=l;switch(c.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:c.lastHSPos=o.charCoords(p,"div").left}var v=s.repeat;if((S=o.findPosV(p,s.forward?v:-v,"line",c.lastHSPos)).hitSide)if(s.forward)var I=o.charCoords(S,"div"),S=o.coordsChar({top:I.top+8,left:c.lastHSPos},"div");else{var j=o.charCoords(new L(o.firstLine(),0),"div");j.left=c.lastHSPos,S=o.coordsChar(j,"div")}return c.lastHPos=S.ch,S},moveByPage:function(o,l,s){var p=s.repeat;return o.findPosV(l,s.forward?p:-p,"page")},moveByParagraph:function(o,l,s){return le(o,l,s.repeat,s.forward?1:-1)},moveBySentence:function(o,l,s){return function(o,l,s,c){function p(D,j){if(j.pos+j.dir<0||j.pos+j.dir>=j.line.length){if(j.ln+=j.dir,!ee(D,j.ln))return j.line=null,j.ln=null,void(j.pos=null);j.line=D.getLine(j.ln),j.pos=j.dir>0?0:j.line.length-1}else j.pos+=j.dir}function v(D,j,Z,ge){var ye=""===(Le=D.getLine(j)),ke={line:Le,ln:j,pos:Z,dir:ge},Pe={ln:ke.ln,pos:ke.pos},Me=""===ke.line;for(p(D,ke);null!==ke.line;){if(Pe.ln=ke.ln,Pe.pos=ke.pos,""===ke.line&&!Me)return{ln:ke.ln,pos:ke.pos};if(ye&&""!==ke.line&&!he(ke.line[ke.pos]))return{ln:ke.ln,pos:ke.pos};Ee(ke.line[ke.pos])&&!ye&&(ke.pos===ke.line.length-1||he(ke.line[ke.pos+1]))&&(ye=!0),p(D,ke)}var Le=D.getLine(Pe.ln);Pe.pos=0;for(var Je=Le.length-1;Je>=0;--Je)if(!he(Le[Je])){Pe.pos=Je;break}return Pe}function S(D,j,Z,ge){var ye={line:Le=D.getLine(j),ln:j,pos:Z,dir:ge},ke={ln:ye.ln,pos:null},Pe=""===ye.line;for(p(D,ye);null!==ye.line;){if(""===ye.line&&!Pe)return null!==ke.pos?ke:{ln:ye.ln,pos:ye.pos};if(Ee(ye.line[ye.pos])&&null!==ke.pos&&(ye.ln!==ke.ln||ye.pos+1!==ke.pos))return ke;""!==ye.line&&!he(ye.line[ye.pos])&&(Pe=!1,ke={ln:ye.ln,pos:ye.pos}),p(D,ye)}var Le=D.getLine(ke.ln);ke.pos=0;for(var Me=0;Me<Le.length;++Me)if(!he(Le[Me])){ke.pos=Me;break}return ke}for(var I={ln:l.line,pos:l.ch};s>0;)I=c<0?S(o,I.ln,I.pos,c):v(o,I.ln,I.pos,c),s--;return new L(I.ln,I.pos)}(o,l,s.repeat,s.forward?1:-1)},moveByScroll:function(o,l,s,c){var v,p=o.getScrollInfo(),S=s.repeat;S||(S=p.clientHeight/(2*o.defaultTextHeight()));var I=o.charCoords(l,"local");if(s.repeat=S,!(v=Dt.moveByDisplayLines(o,l,s,c)))return null;var D=o.charCoords(v,"local");return o.scrollTo(null,p.top+D.top-I.top),v},moveByWords:function(o,l,s){return function(o,l,s,c,p,v){var S=st(l),I=[];(c&&!p||!c&&p)&&s++;for(var D=!(c&&p),j=0;j<s;j++){var Z=rn(o,l,c,v,D);if(!Z){var ge=ct(o,o.lastLine());I.push(c?{line:o.lastLine(),from:ge,to:ge}:{line:0,from:0,to:0});break}I.push(Z),l=new L(Z.line,c?Z.to-1:Z.from)}var Le=I.length!=s,ye=I[0],ke=I.pop();return c&&!p?(!Le&&(ye.from!=S.ch||ye.line!=S.line)&&(ke=I.pop()),new L(ke.line,ke.from)):c&&p?new L(ke.line,ke.to-1):!c&&p?(!Le&&(ye.to!=S.ch||ye.line!=S.line)&&(ke=I.pop()),new L(ke.line,ke.to)):new L(ke.line,ke.from)}(o,l,s.repeat,!!s.forward,!!s.wordEnd,!!s.bigWord)},moveTillCharacter:function(o,l,s){var p=Sr(o,s.repeat,s.forward,s.selectedCharacter),v=s.forward?-1:1;return wr(v,s),p?(p.ch+=v,p):null},moveToCharacter:function(o,l,s){var c=s.repeat;return wr(0,s),Sr(o,c,s.forward,s.selectedCharacter)||l},moveToSymbol:function(o,l,s){return function(o,l,s,c){var p=st(o.getCursor()),v=s?1:-1,S=s?o.lineCount():-1,I=p.ch,D=p.line,j=o.getLine(D),Z={lineText:j,nextCh:j.charAt(I),lastCh:null,index:I,symb:c,reverseSymb:(s?{")":"(","}":"{"}:{"(":")","{":"}"})[c],forward:s,depth:0,curMoveThrough:!1},ge=Nr[c];if(!ge)return p;var Le=ur[ge].init,ye=ur[ge].isComplete;for(Le&&Le(Z);D!==S&&l;){if(Z.index+=v,Z.nextCh=Z.lineText.charAt(Z.index),!Z.nextCh){if(Z.lineText=o.getLine(D+=v)||"",v>0)Z.index=0;else{var ke=Z.lineText.length;Z.index=ke>0?ke-1:0}Z.nextCh=Z.lineText.charAt(Z.index)}ye(Z)&&(p.line=D,p.ch=Z.index,l--)}return Z.nextCh||Z.curMoveThrough?new L(D,Z.index):p}(o,s.repeat,s.forward,s.selectedCharacter)||l},moveToColumn:function(o,l,s,c){var p=s.repeat;return c.lastHPos=p-1,c.lastHSPos=o.charCoords(l,"div").left,function(o,l){var s=o.getCursor().line;return Ht(o,new L(s,l-1))}(o,p)},moveToEol:function(o,l,s,c){return tr(o,l,s,c,!1)},moveToFirstNonWhiteSpaceCharacter:function(o,l){return new L(l.line,ir(o.getLine(l.line)))},moveToMatchedSymbol:function(o,l){for(var S,s=l,c=s.line,p=s.ch,v=o.getLine(c);p<v.length;p++)if((S=v.charAt(p))&&xe(S)){var I=o.getTokenTypeAt(new L(c,p+1));if("string"!==I&&"comment"!==I)break}if(p<v.length){var D="<"===p||">"===p?/[(){}[\]<>]/:/[(){}[\]]/;return o.findMatchingBracket(new L(c,p),{bracketRegex:D}).to}return s},moveToStartOfLine:function(o,l){return new L(l.line,0)},moveToLineOrEdgeOfDocument:function(o,l,s){var c=s.forward?o.lastLine():o.firstLine();return s.repeatIsExplicit&&(c=s.repeat-o.getOption("firstLineNumber")),new L(c,ir(o.getLine(c)))},textObjectManipulation:function(o,l,s,c){var S=s.selectedCharacter;"b"==S?S="(":"B"==S&&(S="{");var D,I=!s.textObjectInner;if({"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"}[S])D=function(o,l,s,c){var v,S,p=l,I={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[s],D={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[s],Z=o.getLine(p.line).charAt(p.ch)===D?1:0;if(v=o.scanForBracket(new L(p.line,p.ch+Z),-1,void 0,{bracketRegex:I}),S=o.scanForBracket(new L(p.line,p.ch+Z),1,void 0,{bracketRegex:I}),!v||!S)return{start:p,end:p};if((v=v.pos).line==(S=S.pos).line&&v.ch>S.ch||v.line>S.line){var ge=v;v=S,S=ge}return c?S.ch+=1:v.ch+=1,{start:v,end:S}}(o,l,S,I);else if({"'":!0,'"':!0,"`":!0}[S])D=function(o,l,s,c){var I,D,j,Z,p=st(l),S=o.getLine(p.line).split(""),ge=S.indexOf(s);if(p.ch<ge?p.ch=ge:ge<p.ch&&S[p.ch]==s&&(D=p.ch,--p.ch),S[p.ch]!=s||D)for(j=p.ch;j>-1&&!I;j--)S[j]==s&&(I=j+1);else I=p.ch+1;if(I&&!D)for(j=I,Z=S.length;j<Z&&!D;j++)S[j]==s&&(D=j);return I&&D?(c&&(--I,++D),{start:new L(p.line,I),end:new L(p.line,D)}):{start:p,end:p}}(o,l,S,I);else if("W"===S)D=Dr(o,I,0,!0);else if("w"===S)D=Dr(o,I,0,!1);else if("p"===S)if(D=le(o,l,s.repeat,0,I),s.linewise=!0,c.visualMode)c.visualLine||(c.visualLine=!0);else{var j=c.inputState.operatorArgs;j&&(j.linewise=!0),D.end.line--}else{if("t"!==S)return null;D=function(o,l,s){var c=l;if(!k.findMatchingTag||!k.findEnclosingTag)return{start:c,end:c};var p=k.findMatchingTag(o,l)||k.findEnclosingTag(o,l);return p&&p.open&&p.close?s?{start:p.open.from,end:p.close.to}:{start:p.open.to,end:p.close.from}:{start:c,end:c}}(o,l,I)}return o.state.vim.visualMode?function(o,l,s){var S,c=o.state.vim.sel,p=c.head,v=c.anchor;return Xe(s,l)&&(S=s,s=l,l=S),Xe(p,v)?(p=at(l,p),v=et(v,s)):(v=at(l,v),-1==(p=xt(p=et(p,s),0,-1)).ch&&p.line!=o.firstLine()&&(p=new L(p.line-1,ct(o,p.line-1)))),[v,p]}(o,D.start,D.end):[D.start,D.end]},repeatLastCharacterSearch:function(o,l,s){var c=V.lastCharacterSearch,p=s.repeat,v=s.forward===c.forward,S=(c.increment?1:0)*(v?-1:1);o.moveH(-S,"char"),s.inclusive=!!v;var I=Sr(o,p,v,c.selectedCharacter);return I?(I.ch+=S,I):(o.moveH(S,"char"),l)}};function nr(o,l){for(var s=[],c=0;c<l;c++)s.push(o);return s}var sr={change:function(o,l,s){var c,p,v=o.state.vim,S=s[0].anchor,I=s[0].head;if(v.visualMode)if(l.fullLine)I.ch=Number.MAX_VALUE,I.line--,o.setSelection(S,I),p=o.getSelection(),o.replaceSelection(""),c=S;else{p=o.getSelection();var Le=nr("",s.length);o.replaceSelections(Le),c=at(s[0].head,s[0].anchor)}else{p=o.getRange(S,I);var D=v.lastEditInputState||{};if("moveByWords"==D.motion&&!he(p)){var j=/\s+$/.exec(p);j&&D.motionArgs&&D.motionArgs.forward&&(I=xt(I,0,-j[0].length),p=p.slice(0,-j[0].length))}var Z=new L(S.line-1,Number.MAX_VALUE),ge=o.firstLine()==o.lastLine();I.line>o.lastLine()&&l.linewise&&!ge?o.replaceRange("",Z,I):o.replaceRange("",S,I),l.linewise&&(ge||(o.setCursor(Z),k.commands.newlineAndIndent(o)),S.ch=Number.MAX_VALUE),c=S}V.registerController.pushText(l.registerName,"change",p,l.linewise,s.length>1),Kt.enterInsertMode(o,{head:c},o.state.vim)},delete:function(o,l,s){var c,p,v=o.state.vim;if(v.visualBlock){p=o.getSelection();var D=nr("",s.length);o.replaceSelections(D),c=at(s[0].head,s[0].anchor)}else{var S=s[0].anchor,I=s[0].head;l.linewise&&I.line!=o.firstLine()&&S.line==o.lastLine()&&S.line==I.line-1&&(S.line==o.firstLine()?S.ch=0:S=new L(S.line-1,ct(o,S.line-1))),p=o.getRange(S,I),o.replaceRange("",S,I),c=S,l.linewise&&(c=Dt.moveToFirstNonWhiteSpaceCharacter(o,S))}return V.registerController.pushText(l.registerName,"delete",p,l.linewise,v.visualBlock),Ht(o,c)},indent:function(o,l,s){var c=o.state.vim,v=c.visualBlock?s[s.length-1].anchor.line:s[0].head.line,S=c.visualMode?l.repeat:1;l.linewise&&v--;for(var I=s[0].anchor.line;I<=v;I++)for(var D=0;D<S;D++)o.indentLine(I,l.indentRight);return Dt.moveToFirstNonWhiteSpaceCharacter(o,s[0].anchor)},indentAuto:function(o,l,s){return o.execCommand("indentAuto"),Dt.moveToFirstNonWhiteSpaceCharacter(o,s[0].anchor)},changeCase:function(o,l,s,c,p){for(var v=o.getSelections(),S=[],I=l.toLower,D=0;D<v.length;D++){var j=v[D],Z="";if(!0===I)Z=j.toLowerCase();else if(!1===I)Z=j.toUpperCase();else for(var ge=0;ge<j.length;ge++){var Le=j.charAt(ge);Z+=fe(Le)?Le.toLowerCase():Le.toUpperCase()}S.push(Z)}return o.replaceSelections(S),l.shouldMoveCursor?p:!o.state.vim.visualMode&&l.linewise&&s[0].anchor.line+1==s[0].head.line?Dt.moveToFirstNonWhiteSpaceCharacter(o,c):l.linewise?c:at(s[0].anchor,s[0].head)},yank:function(o,l,s,c){var p=o.state.vim,v=o.getSelection(),S=p.visualMode?at(p.sel.anchor,p.sel.head,s[0].head,s[0].anchor):c;return V.registerController.pushText(l.registerName,"yank",v,l.linewise,p.visualBlock),S}};var Kt={jumpListWalk:function(o,l,s){if(!s.visualMode){var c=l.repeat,S=V.jumpList.move(o,l.forward?c:-c),I=S?S.find():void 0;I=I||o.getCursor(),o.setCursor(I)}},scroll:function(o,l,s){if(!s.visualMode){var c=l.repeat||1,p=o.defaultTextHeight(),v=o.getScrollInfo().top,S=p*c,I=l.forward?v+S:v-S,D=st(o.getCursor()),j=o.charCoords(D,"local");if(l.forward)I>j.top?(D.line+=(I-j.top)/p,D.line=Math.ceil(D.line),o.setCursor(D),j=o.charCoords(D,"local"),o.scrollTo(null,j.top)):o.scrollTo(null,I);else{var Z=I+o.getScrollInfo().clientHeight;Z<j.bottom?(D.line-=(j.bottom-Z)/p,D.line=Math.floor(D.line),o.setCursor(D),j=o.charCoords(D,"local"),o.scrollTo(null,j.bottom-o.getScrollInfo().clientHeight)):o.scrollTo(null,I)}}},scrollToCursor:function(o,l){var s=o.getCursor().line,c=o.charCoords(new L(s,0),"local"),p=o.getScrollInfo().clientHeight,v=c.top,S=c.bottom-v;switch(l.position){case"center":v=v-p/2+S;break;case"bottom":v=v-p+S}o.scrollTo(null,v)},replayMacro:function(o,l,s){var c=l.selectedCharacter,p=l.repeat,v=V.macroModeState;for("@"==c?c=v.latestRegister:v.latestRegister=c;p--;)uo(o,s,v,c)},enterMacroRecordMode:function(o,l){var s=V.macroModeState,c=l.selectedCharacter;V.registerController.isValidRegister(c)&&s.enterMacroRecordMode(o,c)},toggleOverwrite:function(o){o.state.overwrite?(o.toggleOverwrite(!1),o.setOption("keyMap","vim-insert"),k.signal(o,"vim-mode-change",{mode:"insert"})):(o.toggleOverwrite(!0),o.setOption("keyMap","vim-replace"),k.signal(o,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(o,l,s){if(!o.getOption("readOnly")){s.insertMode=!0,s.insertModeRepeat=l&&l.repeat||1;var c=l?l.insertAt:null,p=s.sel,v=l.head||o.getCursor("head"),S=o.listSelections().length;if("eol"==c)v=new L(v.line,ct(o,v.line));else if("bol"==c)v=new L(v.line,0);else if("charAfter"==c)v=xt(v,0,1);else if("firstNonBlank"==c)v=Dt.moveToFirstNonWhiteSpaceCharacter(o,v);else if("startOfSelectedArea"==c){if(!s.visualMode)return;s.visualBlock?(v=new L(Math.min(p.head.line,p.anchor.line),Math.min(p.head.ch,p.anchor.ch)),S=Math.abs(p.head.line-p.anchor.line)+1):v=p.head.line<p.anchor.line?p.head:new L(p.anchor.line,0)}else if("endOfSelectedArea"==c){if(!s.visualMode)return;s.visualBlock?(v=new L(Math.min(p.head.line,p.anchor.line),Math.max(p.head.ch,p.anchor.ch)+1),S=Math.abs(p.head.line-p.anchor.line)+1):v=p.head.line>=p.anchor.line?xt(p.head,0,1):new L(p.anchor.line,0)}else if("inplace"==c){if(s.visualMode)return}else"lastEdit"==c&&(v=Or(o)||v);o.setOption("disableInput",!1),l&&l.replace?(o.toggleOverwrite(!0),o.setOption("keyMap","vim-replace"),k.signal(o,"vim-mode-change",{mode:"replace"})):(o.toggleOverwrite(!1),o.setOption("keyMap","vim-insert"),k.signal(o,"vim-mode-change",{mode:"insert"})),V.macroModeState.isPlaying||(o.on("change",ri),k.on(o.getInputField(),"keydown",In)),s.visualMode&&Ft(o),$t(o,v,S)}},toggleVisualMode:function(o,l,s){var v,c=l.repeat,p=o.getCursor();s.visualMode?s.visualLine^l.linewise||s.visualBlock^l.blockwise?(s.visualLine=!!l.linewise,s.visualBlock=!!l.blockwise,k.signal(o,"vim-mode-change",{mode:"visual",subMode:s.visualLine?"linewise":s.visualBlock?"blockwise":""}),Tt(o)):Ft(o):(s.visualMode=!0,s.visualLine=!!l.linewise,s.visualBlock=!!l.blockwise,v=Ht(o,new L(p.line,p.ch+c-1)),s.sel={anchor:p,head:v},k.signal(o,"vim-mode-change",{mode:"visual",subMode:s.visualLine?"linewise":s.visualBlock?"blockwise":""}),Tt(o),me(o,s,"<",at(p,v)),me(o,s,">",et(p,v)))},reselectLastSelection:function(o,l,s){var c=s.lastSelection;if(s.visualMode&&Wr(o,s),c){var p=c.anchorMark.find(),v=c.headMark.find();if(!p||!v)return;s.sel={anchor:p,head:v},s.visualMode=!0,s.visualLine=c.visualLine,s.visualBlock=c.visualBlock,Tt(o),me(o,s,"<",at(p,v)),me(o,s,">",et(p,v)),k.signal(o,"vim-mode-change",{mode:"visual",subMode:s.visualLine?"linewise":s.visualBlock?"blockwise":""})}},joinLines:function(o,l,s){var c,p;if(s.visualMode){if(c=o.getCursor("anchor"),Xe(p=o.getCursor("head"),c)){var v=p;p=c,c=v}p.ch=ct(o,p.line)-1}else{var S=Math.max(l.repeat,2);c=o.getCursor(),p=Ht(o,new L(c.line+S-1,1/0))}for(var I=0,D=c.line;D<p.line;D++){I=ct(o,c.line),v=new L(c.line+1,ct(o,c.line+1));var j=o.getRange(c,v);j=l.keepSpaces?j.replace(/\n\r?/g,""):j.replace(/\n\s*/g," "),o.replaceRange(j,c,v)}var Z=new L(c.line,I);s.visualMode&&Ft(o,!1),o.setCursor(Z)},newLineAndEnterInsertMode:function(o,l,s){s.insertMode=!0;var c=st(o.getCursor());c.line!==o.firstLine()||l.after?(c.line=l.after?c.line:c.line-1,c.ch=ct(o,c.line),o.setCursor(c),(k.commands.newlineAndIndentContinueComment||k.commands.newlineAndIndent)(o)):(o.replaceRange("\n",new L(o.firstLine(),0)),o.setCursor(o.firstLine(),0)),this.enterInsertMode(o,{repeat:l.repeat},s)},paste:function(o,l,s){var c=st(o.getCursor()),p=V.registerController.getRegister(l.registerName);if(v=p.toString()){if(l.matchIndent){var S=o.getOption("tabSize"),I=function(Mt){var qr=Mt.split("\t").length-1,xn=Mt.split(" ").length-1;return qr*S+1*xn},D=o.getLine(o.getCursor().line),j=I(D.match(/^\s*/)[0]),Z=v.replace(/\n$/,""),ge=v!==Z,Le=I(v.match(/^\s*/)[0]),v=Z.replace(/^\s*/gm,function(Mt){var qr=j+(I(Mt)-Le);if(qr<0)return"";if(o.getOption("indentWithTabs")){var xn=Math.floor(qr/S);return Array(xn+1).join("\t")}return Array(qr+1).join(" ")});v+=ge?"\n":""}l.repeat>1&&(v=Array(l.repeat+1).join(v));var Me,Je,ye=p.linewise,ke=p.blockwise;if(ke){v=v.split("\n"),ye&&v.pop();for(var Pe=0;Pe<v.length;Pe++)v[Pe]=""==v[Pe]?" ":v[Pe];c.ch+=l.after?1:0,c.ch=Math.min(ct(o,c.line),c.ch)}else ye?s.visualMode?v=s.visualLine?v.slice(0,-1):"\n"+v.slice(0,v.length-1)+"\n":l.after?(v="\n"+v.slice(0,v.length-1),c.ch=ct(o,c.line)):c.ch=0:c.ch+=l.after?1:0;if(s.visualMode){s.lastPastedText=v;var $e,qe=function(o,l){var v,S,I,s=l.lastSelection,p=function(){var v=o.getCursor(),S=o.getCursor(),I=s.visualBlock;if(I){S=new L(v.line+I.height,v.ch+I.width);for(var Z=[],ge=v.line;ge<S.line;ge++){var Le=new L(ge,v.ch),ye=new L(ge,S.ch);Z.push({anchor:Le,head:ye})}o.setSelections(Z)}else{var Pe=s.anchorMark.find(),Me=s.headMark.find(),Je=Me.line-Pe.line;S={line:S.line+Je,ch:Je?S.ch:Me.ch-Pe.ch+S.ch},s.visualLine&&(v=new L(v.line,0),S=new L(S.line,ct(o,S.line))),o.setSelection(v,S)}return[v,S]};return l.visualMode?(v=o.listSelections(),I=v[v.length-1],[Xe((S=v[0]).anchor,S.head)?S.anchor:S.head,Xe(I.anchor,I.head)?I.head:I.anchor]):p()}(o,s),ut=qe[0],Wt=qe[1],At=o.getSelection(),jt=o.listSelections(),ht=new Array(jt.length).join("1").split("1");s.lastSelection&&($e=s.lastSelection.headMark.find()),V.registerController.unnamedRegister.setText(At),ke?(o.replaceSelections(ht),Wt=new L(ut.line+v.length-1,ut.ch),o.setCursor(ut),Cr(o,Wt),o.replaceSelections(v),Me=ut):s.visualBlock?(o.replaceSelections(ht),o.setCursor(ut),o.replaceRange(v,ut,ut),Me=ut):(o.replaceRange(v,ut,Wt),Me=o.posFromIndex(o.indexFromPos(ut)+v.length-1)),$e&&(s.lastSelection.headMark=o.setBookmark($e)),ye&&(Me.ch=0)}else if(ke){for(o.setCursor(c),Pe=0;Pe<v.length;Pe++){var lt=c.line+Pe;lt>o.lastLine()&&o.replaceRange("\n",new L(lt,0)),ct(o,lt)<c.ch&&jr(o,lt,c.ch)}o.setCursor(c),Cr(o,new L(c.line+v.length-1,c.ch)),o.replaceSelections(v),Me=c}else o.replaceRange(v,c),ye&&l.after?Me=new L(c.line+1,ir(o.getLine(c.line+1))):ye&&!l.after?Me=new L(c.line,ir(o.getLine(c.line))):!ye&&l.after?(Je=o.indexFromPos(c),Me=o.posFromIndex(Je+v.length-1)):(Je=o.indexFromPos(c),Me=o.posFromIndex(Je+v.length));s.visualMode&&Ft(o,!1),o.setCursor(Me)}},undo:function(o,l){o.operation(function(){Ke(o,k.commands.undo,l.repeat)(),o.setCursor(o.getCursor("anchor"))})},redo:function(o,l){Ke(o,k.commands.redo,l.repeat)()},setRegister:function(o,l,s){s.inputState.registerName=l.selectedCharacter},setMark:function(o,l,s){me(o,s,l.selectedCharacter,o.getCursor())},replace:function(o,l,s){var v,S,c=l.selectedCharacter,p=o.getCursor(),I=o.listSelections();if(s.visualMode)p=o.getCursor("start"),S=o.getCursor("end");else{var D=o.getLine(p.line);(v=p.ch+l.repeat)>D.length&&(v=D.length),S=new L(p.line,v)}if("\n"==c)s.visualMode||o.replaceRange("",p,S),(k.commands.newlineAndIndentContinueComment||k.commands.newlineAndIndent)(o);else{var j=o.getRange(p,S);if(j=j.replace(/[^\n]/g,c),s.visualBlock){var Z=new Array(o.getOption("tabSize")+1).join(" ");j=(j=o.getSelection()).replace(/\t/g,Z).replace(/[^\n]/g,c).split("\n"),o.replaceSelections(j)}else o.replaceRange(j,p,S);s.visualMode?(p=Xe(I[0].anchor,I[0].head)?I[0].anchor:I[0].head,o.setCursor(p),Ft(o,!1)):o.setCursor(xt(S,0,-1))}},incrementNumberToken:function(o,l){for(var v,S,I,D,s=o.getCursor(),c=o.getLine(s.line),p=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi;null!==(v=p.exec(c))&&!(s.ch<(I=(S=v.index)+v[0].length)););if(l.backtrack||!(I<=s.ch)){if(!v)return;var j=v[2]||v[4],Z=v[3]||v[5],ge=l.increase?1:-1,Le={"0b":2,0:8,"":10,"0x":16}[j.toLowerCase()];D=(parseInt(v[1]+Z,Le)+ge*l.repeat).toString(Le);var ke=j?new Array(Z.length-D.length+1+v[1].length).join("0"):"";D="-"===D.charAt(0)?"-"+j+ke+D.substr(1):j+ke+D;var Pe=new L(s.line,S),Me=new L(s.line,I);o.replaceRange(D,Pe,Me),o.setCursor(new L(s.line,S+D.length-1))}},repeatLastEdit:function(o,l,s){if(s.lastEditInputState){var p=l.repeat;p&&l.repeatIsExplicit?s.lastEditInputState.repeatOverride=p:p=s.lastEditInputState.repeatOverride||p,ii(o,s,p,!1)}},indent:function(o,l){o.indentLine(o.getCursor().line,l.indentRight)},exitInsertMode:yn};function Ht(o,l){var s=o.state.vim,c=s.insertMode||s.visualMode,p=Math.min(Math.max(o.firstLine(),l.line),o.lastLine()),v=ct(o,p)-1+!!c,S=Math.min(Math.max(0,l.ch),v);return new L(p,S)}function Zt(o){var l={};for(var s in o)o.hasOwnProperty(s)&&(l[s]=o[s]);return l}function xt(o,l,s){return"object"==typeof l&&(s=l.ch,l=l.line),new L(o.line+l,o.ch+s)}function it(o,l){if("<character>"==l.slice(-11)){var s=l.length-11,c=o.slice(0,s),p=l.slice(0,s);return c==p&&o.length>s?"full":0==p.indexOf(c)&&"partial"}return o==l?"full":0==l.indexOf(o)&&"partial"}function Ke(o,l,s){return function(){for(var c=0;c<s;c++)l(o)}}function st(o){return new L(o.line,o.ch)}function pt(o,l){return o.ch==l.ch&&o.line==l.line}function Xe(o,l){return o.line<l.line||o.line==l.line&&o.ch<l.ch}function at(o,l){return arguments.length>2&&(l=at.apply(void 0,Array.prototype.slice.call(arguments,1))),Xe(o,l)?o:l}function et(o,l){return arguments.length>2&&(l=et.apply(void 0,Array.prototype.slice.call(arguments,1))),Xe(o,l)?l:o}function Gt(o,l,s){var c=Xe(o,l),p=Xe(l,s);return c&&p}function ct(o,l){return o.getLine(l).length}function kt(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function jr(o,l,s){var c=ct(o,l),p=new Array(s-c+1).join(" ");o.setCursor(new L(l,c)),o.replaceRange(p,o.getCursor())}function Cr(o,l){var s=[],c=o.listSelections(),p=st(o.clipPos(l)),v=!pt(l,p),I=function(o,l,s){for(var c=0;c<o.length;c++){var p="head"!=s&&pt(o[c].anchor,l),v="anchor"!=s&&pt(o[c].head,l);if(p||v)return c}return-1}(c,o.getCursor("head")),D=pt(c[I].head,c[I].anchor),j=c.length-1,Z=j-I>I?j:0,ge=c[Z].anchor,Le=Math.min(ge.line,p.line),ye=Math.max(ge.line,p.line),ke=ge.ch,Pe=p.ch,Me=c[Z].head.ch-ke,Je=Pe-ke;Me>0&&Je<=0?(ke++,v||Pe--):Me<0&&Je>=0?(ke--,D||Pe++):Me<0&&-1==Je&&(ke--,Pe++);for(var $e=Le;$e<=ye;$e++){var qe={anchor:new L($e,ke),head:new L($e,Pe)};s.push(qe)}return o.setSelections(s),l.ch=Pe,ge.ch=ke,ge}function $t(o,l,s){for(var c=[],p=0;p<s;p++){var v=xt(l,p,0);c.push({anchor:v,head:v})}o.setSelections(c,0)}function Wr(o,l){var s=l.sel.anchor,c=l.sel.head;l.lastPastedText&&(c=o.posFromIndex(o.indexFromPos(s)+l.lastPastedText.length),l.lastPastedText=null),l.lastSelection={anchorMark:o.setBookmark(s),headMark:o.setBookmark(c),anchor:st(s),head:st(c),visualMode:l.visualMode,visualLine:l.visualLine,visualBlock:l.visualBlock}}function Tt(o,l,s){var c=o.state.vim,p=Ur(o,l=l||c.sel,s=s||c.visualLine?"line":c.visualBlock?"block":"char");o.setSelections(p.ranges,p.primary)}function Ur(o,l,s,c){var p=st(l.head),v=st(l.anchor);if("char"==s){var S=c||Xe(l.head,l.anchor)?0:1,I=Xe(l.head,l.anchor)?1:0;return p=xt(l.head,0,S),{ranges:[{anchor:v=xt(l.anchor,0,I),head:p}],primary:0}}if("line"==s){if(Xe(l.head,l.anchor))p.ch=0,v.ch=ct(o,v.line);else{v.ch=0;var D=o.lastLine();p.line>D&&(p.line=D),p.ch=ct(o,p.line)}return{ranges:[{anchor:v,head:p}],primary:0}}if("block"==s){var j=Math.min(v.line,p.line),Z=v.ch,ge=Math.max(v.line,p.line),Le=p.ch;Z<Le?Le+=1:Z+=1;for(var ye=ge-j+1,ke=p.line==j?0:ye-1,Pe=[],Me=0;Me<ye;Me++)Pe.push({anchor:new L(j+Me,Z),head:new L(j+Me,Le)});return{ranges:Pe,primary:ke}}}function Ft(o,l){var s=o.state.vim;!1!==l&&o.setCursor(Ht(o,s.sel.head)),Wr(o,s),s.visualMode=!1,s.visualLine=!1,s.visualBlock=!1,s.insertMode||k.signal(o,"vim-mode-change",{mode:"normal"})}function ir(o){if(!o)return 0;var l=o.search(/\S/);return-1==l?o.length:l}function Dr(o,l,s,c,p){for(var v=function(o){var l=o.getCursor("head");return 1==o.getSelection().length&&(l=at(l,o.getCursor("anchor"))),l}(o),S=o.getLine(v.line),I=v.ch,D=p?W[0]:g[0];!D(S.charAt(I));)if(++I>=S.length)return null;c?D=g[0]:(D=W[0])(S.charAt(I))||(D=W[1]);for(var j=I,Z=I;D(S.charAt(j))&&j<S.length;)j++;for(;D(S.charAt(Z))&&Z>=0;)Z--;if(Z++,l){for(var ge=j;/\s/.test(S.charAt(j))&&j<S.length;)j++;if(ge==j){for(var Le=Z;/\s/.test(S.charAt(Z-1))&&Z>0;)Z--;Z||(Z=Le)}}return{start:new L(v.line,Z),end:new L(v.line,j)}}function dr(o,l,s){pt(l,s)||V.jumpList.add(o,l,s)}function wr(o,l){V.lastCharacterSearch.increment=o,V.lastCharacterSearch.forward=l.forward,V.lastCharacterSearch.selectedCharacter=l.selectedCharacter}var Nr={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},ur={bracket:{isComplete:function(o){if(o.nextCh===o.symb){if(o.depth++,o.depth>=1)return!0}else o.nextCh===o.reverseSymb&&o.depth--;return!1}},section:{init:function(o){o.curMoveThrough=!0,o.symb=(o.forward?"]":"[")===o.symb?"{":"}"},isComplete:function(o){return 0===o.index&&o.nextCh===o.symb}},comment:{isComplete:function(o){var l="*"===o.lastCh&&"/"===o.nextCh;return o.lastCh=o.nextCh,l}},method:{init:function(o){o.symb="m"===o.symb?"{":"}",o.reverseSymb="{"===o.symb?"}":"{"},isComplete:function(o){return o.nextCh===o.symb}},preprocess:{init:function(o){o.index=0},isComplete:function(o){if("#"===o.nextCh){var l=o.lineText.match(/^#(\w+)/)[1];if("endif"===l){if(o.forward&&0===o.depth)return!0;o.depth++}else if("if"===l){if(!o.forward&&0===o.depth)return!0;o.depth--}if("else"===l&&0===o.depth)return!0}return!1}}};function rn(o,l,s,c,p){var v=l.line,S=l.ch,I=o.getLine(v),D=s?1:-1,j=c?g:W;if(p&&""==I){if(I=o.getLine(v+=D),!ee(o,v))return null;S=s?0:I.length}for(;;){if(p&&""==I)return{from:0,to:0,line:v};for(var Z=D>0?I.length:-1,ge=Z,Le=Z;S!=Z;){for(var ye=!1,ke=0;ke<j.length&&!ye;++ke)if(j[ke](I.charAt(S))){for(ge=S;S!=Z&&j[ke](I.charAt(S));)S+=D;if(ye=ge!=(Le=S),ge==l.ch&&v==l.line&&Le==ge+D)continue;return{from:Math.min(ge,Le+1),to:Math.max(ge,Le),line:v}}ye||(S+=D)}if(!ee(o,v+=D))return null;I=o.getLine(v),S=D>0?0:I.length}}function tr(o,l,s,c,p){var S=new L(l.line+s.repeat-1,1/0),I=o.clipPos(S);return I.ch--,p||(c.lastHPos=1/0,c.lastHSPos=o.charCoords(I,"div").left),S}function Sr(o,l,s,c){for(var S,p=o.getCursor(),v=p.ch,I=0;I<l;I++){if(-1==(S=H(v,o.getLine(p.line),c,s,!0)))return null;v=S}return new L(o.getCursor().line,S)}function me(o,l,s,c){!We(s,U)||(l.marks[s]&&l.marks[s].clear(),l.marks[s]=o.setBookmark(c))}function H(o,l,s,c,p){var v;return c?-1!=(v=l.indexOf(s,o+1))&&!p&&(v-=1):-1!=(v=l.lastIndexOf(s,o-1))&&!p&&(v+=1),v}function le(o,l,s,c,p){var j,v=l.line,S=o.firstLine(),I=o.lastLine(),Z=v;function ge(Me){return!o.getLine(Me)}function Le(Me,Je,$e){return $e?ge(Me)!=ge(Me+Je):!ge(Me)&&ge(Me+Je)}if(c){for(;S<=Z&&Z<=I&&s>0;)Le(Z,c)&&s--,Z+=c;return new L(Z,0)}var ye=o.state.vim;if(ye.visualLine&&Le(v,1,!0)){var ke=ye.sel.anchor;Le(ke.line,-1,!0)&&(!p||ke.line!=v)&&(v+=1)}var Pe=ge(v);for(Z=v;Z<=I&&s;Z++)Le(Z,1,!0)&&(!p||ge(Z)!=Pe)&&s--;for(j=new L(Z,0),Z>I&&!Pe?Pe=!0:p=!1,Z=v;Z>S&&(p&&ge(Z)!=Pe&&Z!=v||!Le(Z,-1,!0));Z--);return{start:new L(Z,0),end:j}}function _t(){}function gt(o){var l=o.state.vim;return l.searchState_||(l.searchState_=new _t)}function wt(o,l){var s=y(o,l)||[];if(!s.length)return[];var c=[];if(0===s[0]){for(var p=0;p<s.length;p++)"number"==typeof s[p]&&c.push(o.substring(s[p]+1,s[p+1]));return c}}function y(o,l){l||(l="/");for(var s=!1,c=[],p=0;p<o.length;p++){var v=o.charAt(p);!s&&v==l&&c.push(p),s=!s&&"\\"==v}return c}Ge("pcre",!0,"boolean"),_t.prototype={getQuery:function(){return V.query},setQuery:function(o){V.query=o},getOverlay:function(){return this.searchOverlay},setOverlay:function(o){this.searchOverlay=o},isReversed:function(){return V.isReversed},setReversed:function(o){V.isReversed=o},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(o){this.annotate=o}};var oe={"\\n":"\n","\\r":"\r","\\t":"\t"};var Se={"\\/":"/","\\\\":"\\","\\n":"\n","\\r":"\r","\\t":"\t","\\&":"&"};function ft(o,l,s){if(V.registerController.getRegister("/").setText(o),o instanceof RegExp)return o;var v,S,p=function(o){return y(o,"/")}(o);return p.length?(v=o.substring(0,p[0]),S=-1!=o.substring(p[0]).indexOf("i")):v=o,v?(C("pcre")||(v=function(o){for(var c=!1,p=[],v=-1;v<o.length;v++){var S=o.charAt(v)||"",I=o.charAt(v+1)||"",D=I&&-1!="|(){".indexOf(I);c?(("\\"!==S||!D)&&p.push(S),c=!1):"\\"===S?(c=!0,I&&-1!="}".indexOf(I)&&(D=!0),(!D||"\\"===I)&&p.push(S)):(p.push(S),D&&"\\"!==I&&p.push("\\"))}return p.join("")}(v)),s&&(l=/^[^A-Z]*$/.test(v)),new RegExp(v,l||S?"im":"m")):null}function mt(o){"string"==typeof o&&(o=document.createElement(o));for(var l,s=1;s<arguments.length;s++)if(l=arguments[s])if("object"!=typeof l&&(l=document.createTextNode(l)),l.nodeType)o.appendChild(l);else for(var c in l)!Object.prototype.hasOwnProperty.call(l,c)||("$"===c[0]?o.style[c.slice(1)]=l[c]:o.setAttribute(c,l[c]));return o}function Ve(o,l){var s=mt("pre",{$color:"red",class:"cm-vim-message"},l);o.openNotification?o.openNotification(s,{bottom:!0,duration:5e3}):alert(s.innerText)}function vn(o,l){var s=function(o,l){return mt(document.createDocumentFragment(),mt("span",{$fontFamily:"monospace",$whiteSpace:"pre"},o,mt("input",{type:"text",autocorrect:"off",autocapitalize:"off",spellcheck:"false"})),l&&mt("span",{$color:"#888"},l))}(l.prefix,l.desc);if(o.openDialog)o.openDialog(s,l.onClose,{onKeyDown:l.onKeyDown,onKeyUp:l.onKeyUp,bottom:!0,selectValueOnOpen:!1,value:l.value});else{var c="";"string"!=typeof l.prefix&&l.prefix&&(c+=l.prefix.textContent),l.desc&&(c+=" "+l.desc),l.onClose(prompt(c,""))}}function Qr(o,l,s,c){if(l){var p=gt(o),v=ft(l,!!s,!!c);if(v)return Xn(o,v),function(o,l){if(o instanceof RegExp&&l instanceof RegExp){for(var s=["global","multiline","ignoreCase","source"],c=0;c<s.length;c++){var p=s[c];if(o[p]!==l[p])return!1}return!0}return!1}(v,p.getQuery())||p.setQuery(v),v}}var nn=0;function Xn(o,l){clearTimeout(nn),nn=setTimeout(function(){if(o.state.vim){var s=gt(o),c=s.getOverlay();(!c||l!=c.query)&&(c&&o.removeOverlay(c),c=function(o){if("^"==o.source.charAt(0))var l=!0;return{token:function(s){if(!l||s.sol()){var c=s.match(o,!1);if(c)return 0==c[0].length?(s.next(),"searching"):s.sol()||(s.backUp(1),o.exec(s.next()+c[0]))?(s.match(o),"searching"):(s.next(),null);for(;!s.eol()&&(s.next(),!s.match(o,!1)););}else s.skipToEnd()},query:o}}(l),o.addOverlay(c),o.showMatchesOnScrollbar&&(s.getScrollbarAnnotate()&&s.getScrollbarAnnotate().clear(),s.setScrollbarAnnotate(o.showMatchesOnScrollbar(l))),s.setOverlay(c))}},50)}function Vn(o,l,s,c){return void 0===c&&(c=1),o.operation(function(){for(var p=o.getCursor(),v=o.getSearchCursor(s,p),S=0;S<c;S++){var I=v.find(l);if(0==S&&I&&pt(v.from(),p)){var D=l?v.from():v.to();(I=v.find(l))&&!I[0]&&pt(v.from(),D)&&o.getLine(D.line).length==D.ch&&(I=v.find(l))}if(!I&&!(v=o.getSearchCursor(s,l?new L(o.lastLine()):new L(o.firstLine(),0))).find(l))return}return v.from()})}function Fn(o){var l=gt(o);o.removeOverlay(gt(o).getOverlay()),l.setOverlay(null),l.getScrollbarAnnotate()&&(l.getScrollbarAnnotate().clear(),l.setScrollbarAnnotate(null))}function lo(o,l,s){return"number"!=typeof o&&(o=o.line),l instanceof Array?We(o,l):"number"==typeof s?o>=l&&o<=s:o==l}function $n(o){var l=o.getScrollInfo(),p=o.coordsChar({left:0,top:6+l.top},"local"),S=o.coordsChar({left:0,top:l.clientHeight-10+l.top},"local");return{top:p.line,bottom:S.line}}function ei(o,l,s){if("'"==s||"`"==s)return V.jumpList.find(o,-1)||new L(0,0);if("."==s)return Or(o);var c=l.marks[s];return c&&c.find()}function Or(o){for(var l=o.doc.history.done,s=l.length;s--;)if(l[s].changes)return st(l[s].changes[0].to)}var Ni=function(){this.buildCommandMap_()};Ni.prototype={processCommand:function(o,l,s){var c=this;o.operation(function(){o.curOp.isVimOp=!0,c._processCommand(o,l,s)})},_processCommand:function(o,l,s){var c=o.state.vim,p=V.registerController.getRegister(":"),v=p.toString();c.visualMode&&Ft(o);var S=new k.StringStream(l);p.setText(l);var D,j,I=s||{};I.input=l;try{this.parseInput_(o,S,I)}catch(ge){throw Ve(o,ge.toString()),ge}if(I.commandName){if(D=this.matchCommand_(I.commandName)){if(j=D.name,D.excludeFromCommandHistory&&p.setText(v),this.parseCommandArgs_(S,I,D),"exToKey"==D.type){for(var Z=0;Z<D.toKeys.length;Z++)Ue.handleKey(o,D.toKeys[Z],"mapping");return}if("exToEx"==D.type)return void this.processCommand(o,D.toInput)}}else void 0!==I.line&&(j="move");if(j)try{Bi[j](o,I),(!D||!D.possiblyAsync)&&I.callback&&I.callback()}catch(ge){throw Ve(o,ge.toString()),ge}else Ve(o,'Not an editor command ":'+l+'"')},parseInput_:function(o,l,s){l.eatWhile(":"),l.eat("%")?(s.line=o.firstLine(),s.lineEnd=o.lastLine()):(s.line=this.parseLineSpec_(o,l),void 0!==s.line&&l.eat(",")&&(s.lineEnd=this.parseLineSpec_(o,l)));var c=l.match(/^(\w+|!!|@@|[!#&*<=>@~])/);return s.commandName=c?c[1]:l.match(/.*/)[0],s},parseLineSpec_:function(o,l){var s=l.match(/^(\d+)/);if(s)return parseInt(s[1],10)-1;switch(l.next()){case".":return this.parseLineSpecOffset_(l,o.getCursor().line);case"$":return this.parseLineSpecOffset_(l,o.lastLine());case"'":var c=l.next(),p=ei(o,o.state.vim,c);if(!p)throw new Error("Mark not set");return this.parseLineSpecOffset_(l,p.line);case"-":case"+":return l.backUp(1),this.parseLineSpecOffset_(l,o.getCursor().line);default:return void l.backUp(1)}},parseLineSpecOffset_:function(o,l){var s=o.match(/^([+-])?(\d+)/);if(s){var c=parseInt(s[2],10);"-"==s[1]?l-=c:l+=c}return l},parseCommandArgs_:function(o,l,s){if(!o.eol()){l.argString=o.match(/.*/)[0];var c=s.argDelimiter||/\s+/,p=kt(l.argString).split(c);p.length&&p[0]&&(l.args=p)}},matchCommand_:function(o){for(var l=o.length;l>0;l--){var s=o.substring(0,l);if(this.commandMap_[s]){var c=this.commandMap_[s];if(0===c.name.indexOf(o))return c}}return null},buildCommandMap_:function(){this.commandMap_={};for(var o=0;o<E.length;o++){var l=E[o];this.commandMap_[l.shortName||l.name]=l}},map:function(o,l,s){if(":"!=o&&":"==o.charAt(0)){if(s)throw Error("Mode not supported for ex mappings");var c=o.substring(1);this.commandMap_[c]=":"!=l&&":"==l.charAt(0)?{name:c,type:"exToEx",toInput:l.substring(1),user:!0}:{name:c,type:"exToKey",toKeys:l,user:!0}}else if(":"!=l&&":"==l.charAt(0)){var p={keys:o,type:"keyToEx",exArgs:{input:l.substring(1)}};s&&(p.context=s),Q.unshift(p)}else p={keys:o,type:"keyToKey",toKeys:l},s&&(p.context=s),Q.unshift(p)},unmap:function(o,l){if(":"!=o&&":"==o.charAt(0)){if(l)throw Error("Mode not supported for ex mappings");var s=o.substring(1);if(this.commandMap_[s]&&this.commandMap_[s].user)return delete this.commandMap_[s],!0}else for(var c=o,p=0;p<Q.length;p++)if(c==Q[p].keys&&Q[p].context===l)return Q.splice(p,1),!0}};var Bi={colorscheme:function(o,l){!l.args||l.args.length<1?Ve(o,o.getOption("theme")):o.setOption("theme",l.args[0])},map:function(o,l,s){var c=l.args;!c||c.length<2?o&&Ve(o,"Invalid mapping: "+l.input):pr.map(c[0],c[1],s)},imap:function(o,l){this.map(o,l,"insert")},nmap:function(o,l){this.map(o,l,"normal")},vmap:function(o,l){this.map(o,l,"visual")},unmap:function(o,l,s){var c=l.args;(!c||c.length<1||!pr.unmap(c[0],s))&&o&&Ve(o,"No such mapping: "+l.input)},move:function(o,l){Lt.processCommand(o,o.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:l.line+1})},set:function(o,l){var s=l.args,c=l.setCfg||{};if(!s||s.length<1)o&&Ve(o,"Invalid mapping: "+l.input);else{var p=s[0].split("="),v=p[0],S=p[1],I=!1;if("?"==v.charAt(v.length-1)){if(S)throw Error("Trailing characters: "+l.argString);v=v.substring(0,v.length-1),I=!0}void 0===S&&"no"==v.substring(0,2)&&(v=v.substring(2),S=!1);var D=ze[v]&&"boolean"==ze[v].type;if(D&&null==S&&(S=!0),!D&&void 0===S||I){var j=C(v,o,c);j instanceof Error?Ve(o,j.message):Ve(o,!0===j||!1===j?" "+(j?"":"no")+v:"  "+v+"="+j)}else{var Z=O(v,S,o,c);Z instanceof Error&&Ve(o,Z.message)}}},setlocal:function(o,l){l.setCfg={scope:"local"},this.set(o,l)},setglobal:function(o,l){l.setCfg={scope:"global"},this.set(o,l)},registers:function(o,l){var s=l.args,c=V.registerController.registers,p="----------Registers----------\n\n";if(s){s=s.join("");for(var I=0;I<s.length;I++)v=s.charAt(I),V.registerController.isValidRegister(v)&&(p+='"'+v+"    "+(c[v]||new Ct).toString()+"\n")}else for(var v in c){var S=c[v].toString();S.length&&(p+='"'+v+"    "+S+"\n")}Ve(o,p)},sort:function(o,l){var s,c,p,v,S;var D=function(){if(l.argString){var ht=new k.StringStream(l.argString);if(ht.eat("!")&&(s=!0),ht.eol())return;if(!ht.eatSpace())return"Invalid arguments";var lt=ht.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!lt&&!ht.eol())return"Invalid arguments";if(lt[1]){c=-1!=lt[1].indexOf("i"),p=-1!=lt[1].indexOf("u");var Ut=-1!=lt[1].indexOf("d")||-1!=lt[1].indexOf("n")&&1,Yt=-1!=lt[1].indexOf("x")&&1,Mt=-1!=lt[1].indexOf("o")&&1;if(Ut+Yt+Mt>1)return"Invalid arguments";v=(Ut?"decimal":Yt&&"hex")||Mt&&"octal"}lt[2]&&(S=new RegExp(lt[2].substr(1,lt[2].length-2),c?"i":""))}}();if(D)Ve(o,D+": "+l.argString);else{var j=l.line||o.firstLine(),Z=l.lineEnd||l.line||o.lastLine();if(j!=Z){var ge=new L(j,0),Le=new L(Z,ct(o,Z)),ye=o.getRange(ge,Le).split("\n"),ke=S||("decimal"==v?/(-?)([\d]+)/:"hex"==v?/(-?)(?:0x)?([0-9a-f]+)/i:"octal"==v?/([0-7]+)/:null),Pe="decimal"==v?10:"hex"==v?16:"octal"==v?8:null,Me=[],Je=[];if(v||S)for(var $e=0;$e<ye.length;$e++){var qe=S?ye[$e].match(S):null;qe&&""!=qe[0]?Me.push(qe):!S&&ke.exec(ye[$e])?Me.push(ye[$e]):Je.push(ye[$e])}else Je=ye;if(Me.sort(S?function(ht,lt){var Ut;return s&&(Ut=ht,ht=lt,lt=Ut),c&&(ht[0]=ht[0].toLowerCase(),lt[0]=lt[0].toLowerCase()),ht[0]<lt[0]?-1:1}:ut),S)for($e=0;$e<Me.length;$e++)Me[$e]=Me[$e].input;else v||Je.sort(ut);if(ye=s?Me.concat(Je):Je.concat(Me),p){var jt,At=ye;for(ye=[],$e=0;$e<At.length;$e++)At[$e]!=jt&&ye.push(At[$e]),jt=At[$e]}o.replaceRange(ye.join("\n"),ge,Le)}}function ut(ht,lt){var Ut;s&&(Ut=ht,ht=lt,lt=Ut),c&&(ht=ht.toLowerCase(),lt=lt.toLowerCase());var Yt=v&&ke.exec(ht),Mt=v&&ke.exec(lt);return Yt?(Yt=parseInt((Yt[1]+Yt[2]).toLowerCase(),Pe))-(Mt=parseInt((Mt[1]+Mt[2]).toLowerCase(),Pe)):ht<lt?-1:1}},vglobal:function(o,l){this.global(o,l)},global:function(o,l){var s=l.argString;if(s){var D,c="v"===l.commandName[0],p=void 0!==l.line?l.line:o.firstLine(),v=l.lineEnd||l.line||o.lastLine(),S=function(o){return wt(o,"/")}(s),I=s;if(S.length&&(I=S[0],D=S.slice(1,S.length).join("/")),I)try{Qr(o,I,!0,!0)}catch(Me){return void Ve(o,"Invalid regex: "+I)}for(var j=gt(o).getQuery(),Z=[],ge=p;ge<=v;ge++){var Le=o.getLineHandle(ge);j.test(Le.text)!==c&&Z.push(D?Le:Le.text)}if(D){var ke=0,Pe=function(){if(ke<Z.length){var Me=Z[ke++],Je=o.getLineNumber(Me);if(null==Je)return void Pe();pr.processCommand(o,Je+1+D,{callback:Pe})}};Pe()}else Ve(o,Z.join("\n"))}else Ve(o,"Regular Expression missing from global")},substitute:function(o,l){if(!o.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var p,S,I,D,s=l.argString,c=s?wt(s,s[0]):[],v="",j=!1,Z=!1;if(c.length)p=c[0],C("pcre")&&""!==p&&(p=new RegExp(p).source),void 0!==(v=c[1])&&(v=C("pcre")?function(o){for(var l=new k.StringStream(o),s=[];!l.eol();){for(;l.peek()&&"\\"!=l.peek();)s.push(l.next());var c=!1;for(var p in Se)if(l.match(p,!0)){c=!0,s.push(Se[p]);break}c||s.push(l.next())}return s.join("")}(v.replace(/([^\\])&/g,"$1$$&")):function(o){for(var l=!1,s=[],c=-1;c<o.length;c++){var p=o.charAt(c)||"",v=o.charAt(c+1)||"";oe[p+v]?(s.push(oe[p+v]),c++):l?(s.push(p),l=!1):"\\"===p?(l=!0,x(v)||"$"===v?s.push("$"):"/"!==v&&"\\"!==v&&s.push("\\")):("$"===p&&s.push("$"),s.push(p),"/"===v&&s.push("\\"))}return s.join("")}(v),V.lastSubstituteReplacePart=v),S=c[2]?c[2].split(" "):[];else if(s&&s.length)return void Ve(o,"Substitutions should be of the form :s/pattern/replace/");if(S&&(I=S[0],D=parseInt(S[1]),I&&(-1!=I.indexOf("c")&&(j=!0),-1!=I.indexOf("g")&&(Z=!0),p=C("pcre")?p+"/"+I:p.replace(/\//g,"\\/")+"/"+I)),p)try{Qr(o,p,!0,!0)}catch(Je){return void Ve(o,"Invalid regex: "+p)}if(void 0!==(v=v||V.lastSubstituteReplacePart)){var Le=gt(o).getQuery(),ye=void 0!==l.line?l.line:o.getCursor().line,ke=l.lineEnd||ye;ye==o.firstLine()&&ke==o.lastLine()&&(ke=1/0),D&&(ke=(ye=ke)+D-1);var Pe=Ht(o,new L(ye,0)),Me=o.getSearchCursor(Le,Pe);!function(o,l,s,c,p,v,S,I,D){o.state.vim.exMode=!0;var Z,ge,Le,j=!1;function ye(){o.operation(function(){for(;!j;)ke(),Me();Je()})}function ke(){var ut=o.getRange(v.from(),v.to()).replace(S,I),Wt=v.to().line;v.replace(ut),ge=v.to().line,p+=ge-Wt,Le=ge<Wt}function Pe(){var qe=Z&&st(v.to()),ut=v.findNext();return ut&&!ut[0]&&qe&&pt(v.from(),qe)&&(ut=v.findNext()),ut}function Me(){for(;Pe()&&lo(v.from(),c,p);)if(s||v.from().line!=ge||Le)return o.scrollIntoView(v.from(),30),o.setSelection(v.from(),v.to()),Z=v.from(),void(j=!1);j=!0}function Je(qe){if(qe&&qe(),o.focus(),Z){o.setCursor(Z);var ut=o.state.vim;ut.exMode=!1,ut.lastHPos=ut.lastHSPos=Z.ch}D&&D()}function $e(qe,ut,Wt){switch(k.e_stop(qe),k.keyName(qe)){case"Y":ke(),Me();break;case"N":Me();break;case"A":var jt=D;D=void 0,o.operation(ye),D=jt;break;case"L":ke();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":Je(Wt)}return j&&Je(Wt),!0}if(Me(),!j)return l?void vn(o,{prefix:mt("span","replace with ",mt("strong",I)," (y/n/a/q/l)"),onKeyDown:$e}):(ye(),void(D&&D()));Ve(o,"No matches for "+S.source)}(o,j,Z,ye,ke,Me,Le,v,l.callback)}else Ve(o,"No previous substitute regular expression")},redo:k.commands.redo,undo:k.commands.undo,write:function(o){k.commands.save?k.commands.save(o):o.save&&o.save()},nohlsearch:function(o){Fn(o)},yank:function(o){var l=st(o.getCursor()),c=o.getLine(l.line);V.registerController.pushText("0","yank",c,!0,!0)},delmarks:function(o,l){if(l.argString&&kt(l.argString))for(var s=o.state.vim,c=new k.StringStream(kt(l.argString));!c.eol();){c.eatSpace();var p=c.pos;if(!c.match(/[a-zA-Z]/,!1))return void Ve(o,"Invalid argument: "+l.argString.substring(p));var v=c.next();if(c.match("-",!0)){if(!c.match(/[a-zA-Z]/,!1))return void Ve(o,"Invalid argument: "+l.argString.substring(p));var S=v,I=c.next();if(!(G(S)&&G(I)||fe(S)&&fe(I)))return void Ve(o,"Invalid argument: "+S+"-");var D=S.charCodeAt(0),j=I.charCodeAt(0);if(D>=j)return void Ve(o,"Invalid argument: "+l.argString.substring(p));for(var Z=0;Z<=j-D;Z++){var ge=String.fromCharCode(D+Z);delete s.marks[ge]}}else delete s.marks[v]}else Ve(o,"Argument required")}},pr=new Ni;function yn(o){var l=o.state.vim,s=V.macroModeState,c=V.registerController.getRegister("."),p=s.isPlaying,v=s.lastInsertModeChanges;p||(o.off("change",ri),k.off(o.getInputField(),"keydown",In)),!p&&l.insertModeRepeat>1&&(ii(o,l,l.insertModeRepeat-1,!0),l.lastEditInputState.repeatOverride=l.insertModeRepeat),delete l.insertModeRepeat,l.insertMode=!1,o.setCursor(o.getCursor().line,o.getCursor().ch-1),o.setOption("keyMap","vim"),o.setOption("disableInput",!0),o.toggleOverwrite(!1),c.setText(v.changes.join("")),k.signal(o,"vim-mode-change",{mode:"normal"}),s.isRecording&&function(o){if(!o.isPlaying){var s=V.registerController.getRegister(o.latestRegister);s&&s.pushInsertModeChanges&&s.pushInsertModeChanges(o.lastInsertModeChanges)}}(s)}function Ri(o){Q.unshift(o)}function uo(o,l,s,c){var p=V.registerController.getRegister(c);if(":"==c)return p.keyBuffer[0]&&pr.processCommand(o,p.keyBuffer[0]),void(s.isPlaying=!1);var v=p.keyBuffer,S=0;s.isPlaying=!0,s.replaySearchQueries=p.searchQueries.slice(0);for(var I=0;I<v.length;I++)for(var j,Z,D=v[I];D;)if(j=/<\w+-.+?>|<\w+>|./.exec(D),D=D.substring(j.index+(Z=j[0]).length),Ue.handleKey(o,Z,"macro"),l.insertMode){var ge=p.insertModeChanges[S++].changes;V.macroModeState.lastInsertModeChanges.changes=ge,oi(o,ge,1),yn(o)}s.isPlaying=!1}function ri(o,l){var s=V.macroModeState,c=s.lastInsertModeChanges;if(!s.isPlaying)for(;l;){if(c.expectCursorActivityForChange=!0,c.ignoreCount>1)c.ignoreCount--;else if("+input"==l.origin||"paste"==l.origin||void 0===l.origin){var p=o.listSelections().length;p>1&&(c.ignoreCount=p);var v=l.text.join("\n");c.maybeReset&&(c.changes=[],c.maybeReset=!1),v&&(o.state.overwrite&&!/\n/.test(v)?c.changes.push([v]):c.changes.push(v))}l=l.next}}function ni(o){var l=o.state.vim;if(l.insertMode){var s=V.macroModeState;if(s.isPlaying)return;var c=s.lastInsertModeChanges;c.expectCursorActivityForChange?c.expectCursorActivityForChange=!1:c.maybeReset=!0}else o.curOp.isVimOp||function(o,l){var s=o.getCursor("anchor"),c=o.getCursor("head");if(l.visualMode&&!o.somethingSelected()?Ft(o,!1):!l.visualMode&&!l.insertMode&&o.somethingSelected()&&(l.visualMode=!0,l.visualLine=!1,k.signal(o,"vim-mode-change",{mode:"visual"})),l.visualMode){var p=Xe(c,s)?0:-1,v=Xe(c,s)?-1:0;c=xt(c,0,p),s=xt(s,0,v),l.sel={anchor:s,head:c},me(o,l,"<",at(c,s)),me(o,l,">",et(c,s))}else l.insertMode||(l.lastHPos=o.getCursor().ch)}(o,l)}function on(o){this.keyName=o}function In(o){var s=V.macroModeState.lastInsertModeChanges,c=k.keyName(o);c&&(-1!=c.indexOf("Delete")||-1!=c.indexOf("Backspace"))&&k.lookupKey(c,"vim-insert",function(){return s.maybeReset&&(s.changes=[],s.maybeReset=!1),s.changes.push(new on(c)),!0})}function ii(o,l,s,c){var p=V.macroModeState;p.isPlaying=!0;var v=!!l.lastEditActionCommand,S=l.inputState;function I(){v?Lt.processAction(o,l,l.lastEditActionCommand):Lt.evalInput(o,l)}function D(Z){p.lastInsertModeChanges.changes.length>0&&oi(o,p.lastInsertModeChanges.changes,Z=l.lastEditActionCommand?Z:1)}if(l.inputState=l.lastEditInputState,v&&l.lastEditActionCommand.interlaceInsertRepeat)for(var j=0;j<s;j++)I(),D(1);else c||I(),D(s);l.inputState=S,l.insertMode&&!c&&yn(o),p.isPlaying=!1}function oi(o,l,s){function c(ge){return"string"==typeof ge?k.commands[ge](o):ge(o),!0}var p=o.getCursor("head"),v=V.macroModeState.lastInsertModeChanges.visualBlock;v&&($t(o,p,v+1),s=o.listSelections().length,o.setCursor(p));for(var S=0;S<s;S++){v&&o.setCursor(xt(p,S,0));for(var I=0;I<l.length;I++){var D=l[I];if(D instanceof on)k.lookupKey(D.keyName,"vim-insert",c);else if("string"==typeof D)o.replaceSelection(D);else{var j=o.getCursor(),Z=xt(j,0,D[0].length);o.replaceRange(D[0],j,Z),o.setCursor(Z)}}}v&&o.setCursor(xt(p,0,1))}return k.keyMap.vim={attach:z,detach:q,call:ue},Ge("insertModeEscKeysTimeout",200,"number"),k.keyMap["vim-insert"]={fallthrough:["default"],attach:z,detach:q,call:ue},k.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:z,detach:q,call:ue},Oe(),Ue}()}(pe(9475),pe(7660),pe(6584),pe(2946))},9475:function(bt){bt.exports=function(){"use strict";var rt=navigator.userAgent,pe=navigator.platform,k=/gecko\/\d/i.test(rt),L=/MSIE \d/.test(rt),_=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(rt),Q=/Edge\/(\d+)/.exec(rt),f=L||_||Q,E=f&&(L?document.documentMode||6:+(Q||_)[1]),B=!Q&&/WebKit\//.test(rt),se=B&&/Qt\/\d+\.\d+/.test(rt),X=!Q&&/Chrome\//.test(rt),q=/Opera\//.test(rt),z=/Apple Computer/.test(navigator.vendor),ue=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(rt),ce=/PhantomJS/.test(rt),Fe=z&&(/Mobile\/\w+/.test(rt)||navigator.maxTouchPoints>2),te=/Android/.test(rt),ie=Fe||te||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(rt),T=Fe||/Mac/.test(pe),W=/\bCrOS\b/.test(rt),g=/win/i.test(pe),w=q&&rt.match(/Version\/(\d*\.\d*)/);w&&(w=Number(w[1])),w&&w>=15&&(q=!1,B=!0);var M=T&&(se||q&&(null==w||w<12.11)),P=k||f&&E>=9;function b(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var xe,U=function(e,t){var n=e.className,r=b(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function re(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function K(e,t){return re(e).appendChild(t)}function ee(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var a=0;a<t.length;++a)i.appendChild(t[a]);return i}function G(e,t,n,r){var i=ee(e,t,n,r);return i.setAttribute("role","presentation"),i}function x(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function fe(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function he(e,t){var n=e.className;b(t).test(n)||(e.className+=(n?" ":"")+t)}function Ee(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!b(n[r]).test(t)&&(t+=" "+n[r]);return t}xe=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(i){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var We=function(e){e.select()};function ze(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Ge(e,t,n){for(var r in t||(t={}),e)e.hasOwnProperty(r)&&(!1!==n||!t.hasOwnProperty(r))&&(t[r]=e[r]);return t}function O(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var a=r||0,u=i||0;;){var h=e.indexOf("\t",a);if(h<0||h>=t)return u+(t-a);u+=h-a,u+=n-u%n,a=h+1}}Fe?We=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:f&&(We=function(e){try{e.select()}catch(t){}});var C=function(){this.id=null,this.f=null,this.time=0,this.handler=ze(this.onTimeout,this)};function Ae(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}C.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},C.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var Y={toString:function(){return"CodeMirror.Pass"}},ne={scroll:!1},V={origin:"*mouse"},Oe={origin:"+move"};function Qe(e,t,n){for(var r=0,i=0;;){var a=e.indexOf("\t",r);-1==a&&(a=e.length);var u=a-r;if(a==e.length||i+u>=t)return r+Math.min(u,t-i);if(i+=a-r,r=a+1,(i+=n-i%n)>=t)return r}}var Ue=[""];function Ye(e){for(;Ue.length<=e;)Ue.push(_e(Ue)+" ");return Ue[e]}function _e(e){return e[e.length-1]}function Ct(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Pt(){}function It(e,t){var n;return Object.create?n=Object.create(e):(Pt.prototype=e,n=new Pt),t&&Ge(t,n),n}var Lt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Dt(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Lt.test(e))}function lr(e,t){return t?!!(t.source.indexOf("\\w")>-1&&Dt(e))||t.test(e):Dt(e)}function nr(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var sr=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Ir(e){return e.charCodeAt(0)>=768&&sr.test(e)}function Kt(e,t,n){for(;(n<0?t>0:t<e.length)&&Ir(e.charAt(t));)t+=n;return t}function Ar(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,a=r<0?Math.ceil(i):Math.floor(i);if(a==t)return e(a)?t:n;e(a)?n=a:t=a+r}}var Zt=null;function xt(e,t,n){var r;Zt=null;for(var i=0;i<e.length;++i){var a=e[i];if(a.from<t&&a.to>t)return i;a.to==t&&(a.from!=a.to&&"before"==n?r=i:Zt=i),a.from==t&&(a.from!=a.to&&"before"!=n?r=i:Zt=i)}return null!=r?r:Zt}var br=function(){function n(m){return m<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(m):1424<=m&&m<=1524?"R":1536<=m&&m<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(m-1536):1774<=m&&m<=2220?"r":8192<=m&&m<=8203?"w":8204==m?"b":"L"}var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,a=/[LRr]/,u=/[Lb1n]/,h=/[1n]/;function d(m,A,N){this.level=m,this.from=A,this.to=N}return function(m,A){var N="ltr"==A?"L":"R";if(0==m.length||"ltr"==A&&!r.test(m))return!1;for(var $=m.length,J=[],de=0;de<$;++de)J.push(n(m.charCodeAt(de)));for(var Ce=0,Te=N;Ce<$;++Ce){var Ie=J[Ce];"m"==Ie?J[Ce]=Te:Te=Ie}for(var Be=0,Ne=N;Be<$;++Be){var He=J[Be];"1"==He&&"r"==Ne?J[Be]="n":a.test(He)&&(Ne=He,"r"==He&&(J[Be]="R"))}for(var je=1,Ze=J[0];je<$-1;++je){var nt=J[je];"+"==nt&&"1"==Ze&&"1"==J[je+1]?J[je]="1":","==nt&&Ze==J[je+1]&&("1"==Ze||"n"==Ze)&&(J[je]=Ze),Ze=nt}for(var yt=0;yt<$;++yt){var Xt=J[yt];if(","==Xt)J[yt]="N";else if("%"==Xt){var Et=void 0;for(Et=yt+1;Et<$&&"%"==J[Et];++Et);for(var Tr=yt&&"!"==J[yt-1]||Et<$&&"1"==J[Et]?"1":"N",mr=yt;mr<Et;++mr)J[mr]=Tr;yt=Et-1}}for(var Bt=0,yr=N;Bt<$;++Bt){var rr=J[Bt];"L"==yr&&"1"==rr?J[Bt]="L":a.test(rr)&&(yr=rr)}for(var zt=0;zt<$;++zt)if(i.test(J[zt])){var Rt=void 0;for(Rt=zt+1;Rt<$&&i.test(J[Rt]);++Rt);for(var Ot="L"==(zt?J[zt-1]:N),Qn=Ot==("L"==(Rt<$?J[Rt]:N))?Ot?"L":"R":N,dn=zt;dn<Rt;++dn)J[dn]=Qn;zt=Rt-1}for(var Gr,ar=[],Vt=0;Vt<$;)if(u.test(J[Vt])){var Qo=Vt;for(++Vt;Vt<$&&u.test(J[Vt]);++Vt);ar.push(new d(0,Qo,Vt))}else{var en=Vt,Mn=ar.length,En="rtl"==A?1:0;for(++Vt;Vt<$&&"L"!=J[Vt];++Vt);for(var hr=en;hr<Vt;)if(h.test(J[hr])){en<hr&&(ar.splice(Mn,0,new d(1,en,hr)),Mn+=En);var qn=hr;for(++hr;hr<Vt&&h.test(J[hr]);++hr);ar.splice(Mn,0,new d(2,qn,hr)),Mn+=En,en=hr}else++hr;en<Vt&&ar.splice(Mn,0,new d(1,en,Vt))}return"ltr"==A&&(1==ar[0].level&&(Gr=m.match(/^\s+/))&&(ar[0].from=Gr[0].length,ar.unshift(new d(0,0,Gr[0].length))),1==_e(ar).level&&(Gr=m.match(/\s+$/))&&(_e(ar).to-=Gr[0].length,ar.push(new d(0,$-Gr[0].length,$)))),"rtl"==A?ar.reverse():ar}}();function it(e,t){var n=e.order;return null==n&&(n=e.order=br(e.text,t)),n}var Er=[],Ke=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||Er).concat(n)}};function st(e,t){return e._handlers&&e._handlers[t]||Er}function pt(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var a=Ae(i,n);a>-1&&(r[t]=i.slice(0,a).concat(i.slice(a+1)))}}}function Xe(e,t){var n=st(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function at(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Xe(e,n||t.type,e,t),jr(t)||t.codemirrorIgnore}function et(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==Ae(n,t[r])&&n.push(t[r])}function Gt(e,t){return st(e,t).length>0}function ct(e){e.prototype.on=function(t,n){Ke(this,t,n)},e.prototype.off=function(t,n){pt(this,t,n)}}function kt(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Hr(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function jr(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Cr(e){kt(e),Hr(e)}function $t(e){return e.target||e.srcElement}function tn(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),T&&e.ctrlKey&&1==t&&(t=3),t}var Wr,Tt,_r=function(){if(f&&E<9)return!1;var e=ee("div");return"draggable"in e||"dragDrop"in e}();function Yr(e){if(null==Wr){var t=ee("span","\u200b");K(e,ee("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Wr=t.offsetWidth<=1&&t.offsetHeight>2&&!(f&&E<8))}var n=Wr?ee("span","\u200b"):ee("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Ur(e){if(null!=Tt)return Tt;var t=K(e,document.createTextNode("A\u062eA")),n=xe(t,0,1).getBoundingClientRect(),r=xe(t,1,2).getBoundingClientRect();return re(e),!(!n||n.left==n.right)&&(Tt=r.right-n.right<3)}var e,Jr=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var a=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),u=a.indexOf("\r");-1!=u?(n.push(a.slice(0,u)),t+=u+1):(n.push(a),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Ft=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(n){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},pn="oncopy"in(e=ee("div"))||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy),zr=null;var Dr={},er={};function dr(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Dr[e]=t}function Nr(e){if("string"==typeof e&&er.hasOwnProperty(e))e=er[e];else if(e&&"string"==typeof e.name&&er.hasOwnProperty(e.name)){var t=er[e.name];"string"==typeof t&&(t={name:t}),(e=It(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Nr("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Nr("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function ur(e,t){t=Nr(t);var n=Dr[t.name];if(!n)return ur(e,"text/plain");var r=n(e,t);if(Fr.hasOwnProperty(t.name)){var i=Fr[t.name];for(var a in i)!i.hasOwnProperty(a)||(r.hasOwnProperty(a)&&(r["_"+a]=r[a]),r[a]=i[a])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var u in t.modeProps)r[u]=t.modeProps[u];return r}var Fr={};function rn(e,t){Ge(t,Fr.hasOwnProperty(e)?Fr[e]:Fr[e]={})}function fr(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function tr(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Sr(e,t,n){return!e.startState||e.startState(t,n)}var ae=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function me(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],a=i.chunkSize();if(t<a){n=i;break}t-=a}return n.lines[t]}function H(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(a){var u=a.text;i==n.line&&(u=u.slice(0,n.ch)),i==t.line&&(u=u.slice(t.ch)),r.push(u),++i}),r}function le(e,t,n){var r=[];return e.iter(t,n,function(i){r.push(i.text)}),r}function we(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function De(e){if(null==e.parent)return null;for(var t=e.parent,n=Ae(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function tt(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],a=i.height;if(t<a){e=i;continue e}t-=a,n+=i.chunkSize()}return n}while(!e.lines);for(var u=0;u<e.lines.length;++u){var d=e.lines[u].height;if(t<d)break;t-=d}return n+u}function _t(e,t){return t>=e.first&&t<e.first+e.size}function gt(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ve(e,t,n){if(void 0===n&&(n=null),!(this instanceof ve))return new ve(e,t,n);this.line=e,this.ch=t,this.sticky=n}function Re(e,t){return e.line-t.line||e.ch-t.ch}function wt(e,t){return e.sticky==t.sticky&&0==Re(e,t)}function y(e){return ve(e.line,e.ch)}function F(e,t){return Re(e,t)<0?t:e}function oe(e,t){return Re(e,t)<0?e:t}function be(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Se(e,t){if(t.line<e.first)return ve(e.first,0);var n=e.first+e.size-1;return t.line>n?ve(n,me(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?ve(e.line,t):n<0?ve(e.line,0):e}(t,me(e,t.line).text.length)}function ft(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=Se(e,t[r]);return n}ae.prototype.eol=function(){return this.pos>=this.string.length},ae.prototype.sol=function(){return this.pos==this.lineStart},ae.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ae.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ae.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},ae.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},ae.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},ae.prototype.skipToEnd=function(){this.pos=this.string.length},ae.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},ae.prototype.backUp=function(e){this.pos-=e},ae.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=O(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?O(this.string,this.lineStart,this.tabSize):0)},ae.prototype.indentation=function(){return O(this.string,null,this.tabSize)-(this.lineStart?O(this.string,this.lineStart,this.tabSize):0)},ae.prototype.match=function(e,t,n){if("string"!=typeof e){var a=this.string.slice(this.pos).match(e);return a&&a.index>0?null:(a&&!1!==t&&(this.pos+=a[0].length),a)}var r=function(u){return n?u.toLowerCase():u};if(r(this.string.substr(this.pos,e.length))==r(e))return!1!==t&&(this.pos+=e.length),!0},ae.prototype.current=function(){return this.string.slice(this.start,this.pos)},ae.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},ae.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},ae.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var mt=function(e,t){this.state=e,this.lookAhead=t},Ve=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function Dn(e,t,n,r){var i=[e.state.modeGen],a={};Fn(e,t.text,e.doc.mode,n,function(m,A){return i.push(m,A)},a,r);for(var u=n.state,h=function(m){n.baseTokens=i;var A=e.state.overlays[m],N=1,$=0;n.state=!0,Fn(e,t.text,A.mode,n,function(J,de){for(var Ce=N;$<J;){var Te=i[N];Te>J&&i.splice(N,1,J,i[N+1],Te),N+=2,$=Math.min(J,Te)}if(de)if(A.opaque)i.splice(Ce,N-Ce,J,"overlay "+de),N=Ce+2;else for(;Ce<N;Ce+=2){var Ie=i[Ce+1];i[Ce+1]=(Ie?Ie+" ":"")+"overlay "+de}},a),n.state=u,n.baseTokens=null,n.baseTokenPos=1},d=0;d<e.state.overlays.length;++d)h(d);return{styles:i,classes:a.bgClass||a.textClass?a:null}}function vn(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=gn(e,De(t)),i=t.text.length>e.options.maxHighlightLength&&fr(e.doc.mode,r.state),a=Dn(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=a.styles,a.classes?t.styleClasses=a.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function gn(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new Ve(r,!0,t);var a=function(e,t,n){for(var r,i,a=e.doc,u=n?-1:t-(e.doc.mode.innerMode?1e3:100),h=t;h>u;--h){if(h<=a.first)return a.first;var d=me(a,h-1),m=d.stateAfter;if(m&&(!n||h+(m instanceof mt?m.lookAhead:0)<=a.modeFrontier))return h;var A=O(d.text,null,e.options.tabSize);(null==i||r>A)&&(i=h-1,r=A)}return i}(e,t,n),u=a>r.first&&me(r,a-1).stateAfter,h=u?Ve.fromSaved(r,u,a):new Ve(r,Sr(r.mode),a);return r.iter(a,t,function(d){Qr(e,d.text,h);var m=h.line;d.stateAfter=m==t-1||m%5==0||m>=i.viewFrom&&m<i.viewTo?h.save():null,h.nextLine()}),n&&(r.modeFrontier=h.line),h}function Qr(e,t,n,r){var i=e.doc.mode,a=new ae(t,e.options.tabSize,n);for(a.start=a.pos=r||0,""==t&&Oi(i,n.state);!a.eol();)nn(i,a,n.state),a.start=a.pos}function Oi(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=tr(e,t);if(n.mode.blankLine)return n.mode.blankLine(n.state)}}function nn(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=tr(e,n).mode);var a=e.token(t,n);if(t.pos>t.start)return a}throw new Error("Mode "+e.name+" failed to advance stream.")}Ve.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Ve.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Ve.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Ve.fromSaved=function(e,t,n){return t instanceof mt?new Ve(e,fr(e.mode,t.state),n,t.lookAhead):new Ve(e,fr(e.mode,t),n)},Ve.prototype.save=function(e){var t=!1!==e?fr(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new mt(t,this.maxLookAhead):t};var Xn=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function Vn(e,t,n,r){var u,A,i=e.doc,a=i.mode,h=me(i,(t=Se(i,t)).line),d=gn(e,t.line,n),m=new ae(h.text,e.options.tabSize,d);for(r&&(A=[]);(r||m.pos<t.ch)&&!m.eol();)m.start=m.pos,u=nn(a,m,d.state),r&&A.push(new Xn(m,u,fr(i.mode,d.state)));return r?A:new Xn(m,u,d.state)}function Ii(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+n[2])}return e}function Fn(e,t,n,r,i,a,u){var h=n.flattenSpans;null==h&&(h=e.options.flattenSpans);var N,d=0,m=null,A=new ae(t,e.options.tabSize,r),$=e.options.addModeClass&&[null];for(""==t&&Ii(Oi(n,r.state),a);!A.eol();){if(A.pos>e.options.maxHighlightLength?(h=!1,u&&Qr(e,t,r,A.pos),A.pos=t.length,N=null):N=Ii(nn(n,A,r.state,$),a),$){var J=$[0].name;J&&(N="m-"+(N?J+" "+N:J))}if(!h||m!=N){for(;d<A.start;)i(d=Math.min(A.start,d+5e3),m);m=N}A.start=A.pos}for(;d<A.pos;){var de=Math.min(A.pos,d+5e3);i(de,m),d=de}}var ei=!1,Or=!1;function pr(e,t,n){this.marker=e,this.from=t,this.to=n}function mn(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function yn(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function ti(e,t){if(t.full)return null;var n=_t(e,t.from.line)&&me(e,t.from.line).markedSpans,r=_t(e,t.to.line)&&me(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,a=t.to.ch,u=0==Re(t.from,t.to),h=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var a=e[i],u=a.marker;null!=a.from&&!(u.inclusiveLeft?a.from<=t:a.from<t)&&(a.from!=t||"bookmark"!=u.type||n&&a.marker.insertLeft)||(r||(r=[])).push(new pr(u,a.from,null==a.to||(u.inclusiveRight?a.to>=t:a.to>t)?null:a.to))}return r}(n,i,u),d=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var a=e[i],u=a.marker;(null==a.to||(u.inclusiveRight?a.to>=t:a.to>t)||a.from==t&&"bookmark"==u.type&&(!n||a.marker.insertLeft))&&(r||(r=[])).push(new pr(u,null==a.from||(u.inclusiveLeft?a.from<=t:a.from<t)?null:a.from-t,null==a.to?null:a.to-t))}return r}(r,a,u),m=1==t.text.length,A=_e(t.text).length+(m?i:0);if(h)for(var N=0;N<h.length;++N){var $=h[N];if(null==$.to){var J=mn(d,$.marker);J?m&&($.to=null==J.to?null:J.to+A):$.to=i}}if(d)for(var de=0;de<d.length;++de){var Ce=d[de];null!=Ce.to&&(Ce.to+=A),null==Ce.from?mn(h,Ce.marker)||(Ce.from=A,m&&(h||(h=[])).push(Ce)):(Ce.from+=A,m&&(h||(h=[])).push(Ce))}h&&(h=Pi(h)),d&&d!=h&&(d=Pi(d));var Ie=[h];if(!m){var Ne,Be=t.text.length-2;if(Be>0&&h)for(var He=0;He<h.length;++He)null==h[He].to&&(Ne||(Ne=[])).push(new pr(h[He].marker,null,null));for(var je=0;je<Be;++je)Ie.push(Ne);Ie.push(d)}return Ie}function Pi(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function ri(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function ni(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function On(e){return e.inclusiveLeft?-1:0}function on(e){return e.inclusiveRight?1:0}function In(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),a=Re(r.from,i.from)||On(e)-On(t);return a?-a:Re(r.to,i.to)||on(e)-on(t)||t.id-e.id}function ii(e,t){var r,n=Or&&e.markedSpans;if(n)for(var i=void 0,a=0;a<n.length;++a)(i=n[a]).marker.collapsed&&null==(t?i.from:i.to)&&(!r||In(r,i.marker)<0)&&(r=i.marker);return r}function oi(e){return ii(e,!0)}function o(e){return ii(e,!1)}function l(e,t){var r,n=Or&&e.markedSpans;if(n)for(var i=0;i<n.length;++i){var a=n[i];a.marker.collapsed&&(null==a.from||a.from<t)&&(null==a.to||a.to>t)&&(!r||In(r,a.marker)<0)&&(r=a.marker)}return r}function s(e,t,n,r,i){var a=me(e,t),u=Or&&a.markedSpans;if(u)for(var h=0;h<u.length;++h){var d=u[h];if(d.marker.collapsed){var m=d.marker.find(0),A=Re(m.from,n)||On(d.marker)-On(i),N=Re(m.to,r)||on(d.marker)-on(i);if(!(A>=0&&N<=0||A<=0&&N>=0)&&(A<=0&&(d.marker.inclusiveRight&&i.inclusiveLeft?Re(m.to,n)>=0:Re(m.to,n)>0)||A>=0&&(d.marker.inclusiveRight&&i.inclusiveLeft?Re(m.from,r)<=0:Re(m.from,r)<0)))return!0}}}function c(e){for(var t;t=oi(e);)e=t.find(-1,!0).line;return e}function S(e,t){var n=me(e,t),r=c(n);return n==r?t:De(r)}function I(e,t){if(t>e.lastLine())return t;var r,n=me(e,t);if(!D(e,n))return t;for(;r=o(n);)n=r.find(1,!0).line;return De(n)+1}function D(e,t){var n=Or&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&j(e,t,r))return!0}}function j(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return j(e,r.line,mn(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,a=0;a<t.markedSpans.length;++a)if((i=t.markedSpans[a]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&j(e,t,i))return!0}function Z(e){for(var t=0,n=(e=c(e)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var a=n.parent;a;a=(n=a).parent)for(var u=0;u<a.children.length;++u){var h=a.children[u];if(h==n)break;t+=h.height}return t}function ge(e){if(0==e.height)return 0;for(var n,t=e.text.length,r=e;n=oi(r);){var i=n.find(0,!0);r=i.from.line,t+=i.from.ch-i.to.ch}for(r=e;n=o(r);){var a=n.find(0,!0);t-=r.text.length-a.from.ch,t+=(r=a.to.line).text.length-a.to.ch}return t}function Le(e){var t=e.display,n=e.doc;t.maxLine=me(n,n.first),t.maxLineLength=ge(t.maxLine),t.maxLineChanged=!0,n.iter(function(r){var i=ge(r);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=r)})}var ye=function(e,t,n){this.text=e,ni(this,t),this.height=n?n(this):1};function Pe(e){e.parent=null,ri(e)}ye.prototype.lineNo=function(){return De(this)},ct(ye);var Me={},Je={};function $e(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Je:Me;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function qe(e,t){var n=G("span",null,null,B?"padding-right: .1px":null),r={pre:G("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var a=i?t.rest[i-1]:t.line,u=void 0;r.pos=0,r.addToken=Wt,Ur(e.display.measure)&&(u=it(a,e.doc.direction))&&(r.addToken=jt(r.addToken,u)),r.map=[],lt(a,r,vn(e,a,t!=e.display.externalMeasured&&De(a))),a.styleClasses&&(a.styleClasses.bgClass&&(r.bgClass=Ee(a.styleClasses.bgClass,r.bgClass||"")),a.styleClasses.textClass&&(r.textClass=Ee(a.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(Yr(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(B){var d=r.content.lastChild;(/\bcm-tab\b/.test(d.className)||d.querySelector&&d.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return Xe(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=Ee(r.pre.className,r.textClass||"")),r}function ut(e){var t=ee("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Wt(e,t,n,r,i,a,u){if(t){var A,h=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var a=e.charAt(i);" "==a&&n&&(i==e.length-1||32==e.charCodeAt(i+1))&&(a="\xa0"),r+=a,n=" "==a}return r}(t,e.trailingSpace):t,d=e.cm.state.specialChars,m=!1;if(d.test(t)){A=document.createDocumentFragment();for(var N=0;;){d.lastIndex=N;var $=d.exec(t),J=$?$.index-N:t.length-N;if(J){var de=document.createTextNode(h.slice(N,N+J));A.appendChild(f&&E<9?ee("span",[de]):de),e.map.push(e.pos,e.pos+J,de),e.col+=J,e.pos+=J}if(!$)break;N+=J+1;var Ce=void 0;if("\t"==$[0]){var Te=e.cm.options.tabSize,Ie=Te-e.col%Te;(Ce=A.appendChild(ee("span",Ye(Ie),"cm-tab"))).setAttribute("role","presentation"),Ce.setAttribute("cm-text","\t"),e.col+=Ie}else"\r"==$[0]||"\n"==$[0]?((Ce=A.appendChild(ee("span","\r"==$[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",$[0]),e.col+=1):((Ce=e.cm.options.specialCharPlaceholder($[0])).setAttribute("cm-text",$[0]),A.appendChild(f&&E<9?ee("span",[Ce]):Ce),e.col+=1);e.map.push(e.pos,e.pos+1,Ce),e.pos++}}else e.col+=t.length,A=document.createTextNode(h),e.map.push(e.pos,e.pos+t.length,A),f&&E<9&&(m=!0),e.pos+=t.length;if(e.trailingSpace=32==h.charCodeAt(t.length-1),n||r||i||m||a||u){var Be=n||"";r&&(Be+=r),i&&(Be+=i);var Ne=ee("span",[A],Be,a);if(u)for(var He in u)u.hasOwnProperty(He)&&"style"!=He&&"class"!=He&&Ne.setAttribute(He,u[He]);return e.content.appendChild(Ne)}e.content.appendChild(A)}}function jt(e,t){return function(n,r,i,a,u,h,d){i=i?i+" cm-force-border":"cm-force-border";for(var m=n.pos,A=m+r.length;;){for(var N=void 0,$=0;$<t.length&&!((N=t[$]).to>m&&N.from<=m);$++);if(N.to>=A)return e(n,r,i,a,u,h,d);e(n,r.slice(0,N.to-m),i,a,null,h,d),a=null,r=r.slice(N.to-m),m=N.to}}}function ht(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function lt(e,t,n){var r=e.markedSpans,i=e.text,a=0;if(r)for(var N,$,de,Ce,Te,Ie,Be,h=i.length,d=0,m=1,A="",J=0;;){if(J==d){de=Ce=Te=$="",Be=null,Ie=null,J=1/0;for(var Ne=[],He=void 0,je=0;je<r.length;++je){var Ze=r[je],nt=Ze.marker;if("bookmark"==nt.type&&Ze.from==d&&nt.widgetNode)Ne.push(nt);else if(Ze.from<=d&&(null==Ze.to||Ze.to>d||nt.collapsed&&Ze.to==d&&Ze.from==d)){if(null!=Ze.to&&Ze.to!=d&&J>Ze.to&&(J=Ze.to,Ce=""),nt.className&&(de+=" "+nt.className),nt.css&&($=($?$+";":"")+nt.css),nt.startStyle&&Ze.from==d&&(Te+=" "+nt.startStyle),nt.endStyle&&Ze.to==J&&(He||(He=[])).push(nt.endStyle,Ze.to),nt.title&&((Be||(Be={})).title=nt.title),nt.attributes)for(var yt in nt.attributes)(Be||(Be={}))[yt]=nt.attributes[yt];nt.collapsed&&(!Ie||In(Ie.marker,nt)<0)&&(Ie=Ze)}else Ze.from>d&&J>Ze.from&&(J=Ze.from)}if(He)for(var Xt=0;Xt<He.length;Xt+=2)He[Xt+1]==J&&(Ce+=" "+He[Xt]);if(!Ie||Ie.from==d)for(var Et=0;Et<Ne.length;++Et)ht(t,0,Ne[Et]);if(Ie&&(Ie.from||0)==d){if(ht(t,(null==Ie.to?h+1:Ie.to)-d,Ie.marker,null==Ie.from),null==Ie.to)return;Ie.to==d&&(Ie=!1)}}if(d>=h)break;for(var Tr=Math.min(h,J);;){if(A){var mr=d+A.length;if(!Ie){var Bt=mr>Tr?A.slice(0,Tr-d):A;t.addToken(t,Bt,N?N+de:de,Te,d+Bt.length==J?Ce:"",$,Be)}if(mr>=Tr){A=A.slice(Tr-d),d=Tr;break}d=mr,Te=""}A=i.slice(a,a=n[m++]),N=$e(n[m++],t.cm.options)}}else for(var u=1;u<n.length;u+=2)t.addToken(t,i.slice(a,a=n[u]),$e(n[u+1],t.cm.options))}function Ut(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=o(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?De(_e(this.rest))-n+1:1,this.node=this.text=null,this.hidden=D(e,t)}function Yt(e,t,n){for(var i,r=[],a=t;a<n;a=i){var u=new Ut(e.doc,me(e.doc,a),a);i=a+u.size,r.push(u)}return r}var Mt=null;var li=null;function Jt(e,t){var n=st(e,t);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);Mt?i=Mt.delayedCallbacks:li?i=li:(i=li=[],setTimeout(Dl,0));for(var a=function(h){i.push(function(){return n[h].apply(null,r)})},u=0;u<n.length;++u)a(u)}}function Dl(){var e=li;li=null;for(var t=0;t<e.length;++t)e[t]()}function Xo(e,t,n,r){for(var i=0;i<t.changes.length;i++){var a=t.changes[i];"text"==a?Ol(e,t):"gutter"==a?$o(e,t,n,r):"class"==a?co(e,t):"widget"==a&&Il(e,t,r)}t.changes=null}function si(e){return e.node==e.text&&(e.node=ee("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),f&&E<8&&(e.node.style.zIndex=2)),e.node}function Vo(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):qe(e,t)}function Ol(e,t){var n=t.text.className,r=Vo(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,co(e,t)):n&&(t.text.className=n)}function co(e,t){(function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=si(t);t.background=r.insertBefore(ee("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}})(e,t),t.line.wrapClass?si(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className=""),t.text.className=(t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass)||""}function $o(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=si(t);t.gutterBackground=ee("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var a=t.line.gutterMarkers;if(e.options.lineNumbers||a){var u=si(t),h=t.gutter=ee("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(h.setAttribute("aria-hidden","true"),e.display.input.setUneditable(h),u.insertBefore(h,t.text),t.line.gutterClass&&(h.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!a||!a["CodeMirror-linenumbers"])&&(t.lineNumber=h.appendChild(ee("div",gt(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),a)for(var d=0;d<e.display.gutterSpecs.length;++d){var m=e.display.gutterSpecs[d].className,A=a.hasOwnProperty(m)&&a[m];A&&h.appendChild(ee("div",[A],"CodeMirror-gutter-elt","left: "+r.gutterLeft[m]+"px; width: "+r.gutterWidth[m]+"px"))}}}function Il(e,t,n){t.alignable&&(t.alignable=null);for(var r=b("CodeMirror-linewidget"),i=t.node.firstChild,a=void 0;i;i=a)a=i.nextSibling,r.test(i.className)&&t.node.removeChild(i);ea(e,t,n)}function Nl(e,t,n,r){var i=Vo(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),co(e,t),$o(e,t,n,r),ea(e,t,r),t.node}function ea(e,t,n){if(ta(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)ta(e,t.rest[r],t,n,!1)}function ta(e,t,n,r,i){if(t.widgets)for(var a=si(n),u=0,h=t.widgets;u<h.length;++u){var d=h[u],m=ee("div",[d.node],"CodeMirror-linewidget"+(d.className?" "+d.className:""));d.handleMouseEvents||m.setAttribute("cm-ignore-events","true"),Bl(d,m,n,r),e.display.input.setUneditable(m),i&&d.above?a.insertBefore(m,n.gutter||n.text):a.appendChild(m),Jt(d,"redraw")}}function Bl(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function ui(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!x(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),K(t.display.measure,ee("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function Xr(e,t){for(var n=$t(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Hi(e){return e.lineSpace.offsetTop}function ho(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function ra(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=K(e.measure,ee("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return!isNaN(r.left)&&!isNaN(r.right)&&(e.cachedPaddingH=r),r}function Kr(e){return 50-e.display.nativeBarWidth}function kn(e){return e.display.scroller.clientWidth-Kr(e)-e.display.barWidth}function po(e){return e.display.scroller.clientHeight-Kr(e)-e.display.barHeight}function na(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(De(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}}function ia(e,t,n,r){return Zr(e,Nn(e,t),n,r)}function vo(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[wn(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Nn(e,t){var n=De(t),r=vo(e,n);r&&!r.text?r=null:r&&r.changes&&(Xo(e,r,n,ko(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var n=De(t=c(t)),r=e.display.externalMeasured=new Ut(e.doc,t,n);r.lineN=n;var i=r.built=qe(e,r);return r.text=i.pre,K(e.display.lineMeasure,i.pre),r}(e,t));var i=na(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Zr(e,t,n,r,i){t.before&&(n=-1);var u,a=n+(r||"");return t.cache.hasOwnProperty(a)?u=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var r=e.options.lineWrapping,i=r&&kn(e);if(!t.measure.heights||r&&t.measure.width!=i){var a=t.measure.heights=[];if(r){t.measure.width=i;for(var u=t.text.firstChild.getClientRects(),h=0;h<u.length-1;h++){var d=u[h],m=u[h+1];Math.abs(d.bottom-m.bottom)>2&&a.push((d.bottom+m.top)/2-n.top)}}a.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(u=function(e,t,n,r){var m,i=aa(t.map,n,r),a=i.node,u=i.start,h=i.end,d=i.collapse;if(3==a.nodeType){for(var A=0;A<4;A++){for(;u&&Ir(t.line.text.charAt(i.coverStart+u));)--u;for(;i.coverStart+h<i.coverEnd&&Ir(t.line.text.charAt(i.coverStart+h));)++h;if((m=f&&E<9&&0==u&&h==i.coverEnd-i.coverStart?a.parentNode.getBoundingClientRect():Hl(xe(a,u,h).getClientRects(),r)).left||m.right||0==u)break;h=u,u-=1,d="right"}f&&E<11&&(m=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=zr)return zr;var t=K(e,ee("span","x")),n=t.getBoundingClientRect(),r=xe(t,0,1).getBoundingClientRect();return zr=Math.abs(n.left-r.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,m))}else{var N;u>0&&(d=r="right"),m=e.options.lineWrapping&&(N=a.getClientRects()).length>1?N["right"==r?N.length-1:0]:a.getBoundingClientRect()}if(f&&E<9&&!u&&(!m||!m.left&&!m.right)){var $=a.parentNode.getClientRects()[0];m=$?{left:$.left,right:$.left+Rn(e.display),top:$.top,bottom:$.bottom}:oa}for(var J=m.top-t.rect.top,de=m.bottom-t.rect.top,Ce=(J+de)/2,Te=t.view.measure.heights,Ie=0;Ie<Te.length-1&&!(Ce<Te[Ie]);Ie++);var He={left:("right"==d?m.right:m.left)-t.rect.left,right:("left"==d?m.left:m.right)-t.rect.left,top:Ie?Te[Ie-1]:0,bottom:Te[Ie]};return!m.left&&!m.right&&(He.bogus=!0),e.options.singleCursorHeightPerLine||(He.rtop=J,He.rbottom=de),He}(e,t,n,r)).bogus||(t.cache[a]=u)),{left:u.left,right:u.right,top:i?u.rtop:u.top,bottom:i?u.rbottom:u.bottom}}var bn,oa={left:0,right:0,top:0,bottom:0};function aa(e,t,n){for(var r,i,a,u,h,d,m=0;m<e.length;m+=3)if(d=e[m+1],t<(h=e[m])?(i=0,a=1,u="left"):t<d?a=1+(i=t-h):(m==e.length-3||t==d&&e[m+3]>t)&&(i=(a=d-h)-1,t>=d&&(u="right")),null!=i){if(r=e[m+2],h==d&&n==(r.insertLeft?"left":"right")&&(u=n),"left"==n&&0==i)for(;m&&e[m-2]==e[m-3]&&e[m-1].insertLeft;)r=e[2+(m-=3)],u="left";if("right"==n&&i==d-h)for(;m<e.length-3&&e[m+3]==e[m+4]&&!e[m+5].insertLeft;)r=e[(m+=3)+2],u="right";break}return{node:r,start:i,end:a,collapse:u,coverStart:h,coverEnd:d}}function Hl(e,t){var n=oa;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function la(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function sa(e){e.display.externalMeasure=null,re(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)la(e.display.view[t])}function fi(e){sa(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function ua(){return X&&te?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function fa(){return X&&te?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function go(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=ui(e.widgets[n]));return t}function _i(e,t,n,r,i){if(!i){var a=go(t);n.top+=a,n.bottom+=a}if("line"==r)return n;r||(r="local");var u=Z(t);if("local"==r?u+=Hi(e.display):u-=e.display.viewOffset,"page"==r||"window"==r){var h=e.display.lineSpace.getBoundingClientRect();u+=h.top+("window"==r?0:fa());var d=h.left+("window"==r?0:ua());n.left+=d,n.right+=d}return n.top+=u,n.bottom+=u,n}function ca(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=ua(),i-=fa();else if("local"==n||!n){var a=e.display.sizer.getBoundingClientRect();r+=a.left,i+=a.top}var u=e.display.lineSpace.getBoundingClientRect();return{left:r-u.left,top:i-u.top}}function Wi(e,t,n,r,i){return r||(r=me(e.doc,t.line)),_i(e,r,ia(e,r,t.ch,i),n)}function Br(e,t,n,r,i,a){function u(de,Ce){var Te=Zr(e,i,de,Ce?"right":"left",a);return Ce?Te.left=Te.right:Te.right=Te.left,_i(e,r,Te,n)}r=r||me(e.doc,t.line),i||(i=Nn(e,r));var h=it(r,e.doc.direction),d=t.ch,m=t.sticky;if(d>=r.text.length?(d=r.text.length,m="before"):d<=0&&(d=0,m="after"),!h)return u("before"==m?d-1:d,"before"==m);function A(de,Ce,Te){return u(Te?de-1:de,1==h[Ce].level!=Te)}var N=xt(h,d,m),$=Zt,J=A(d,N,"before"==m);return null!=$&&(J.other=A(d,$,"before"!=m)),J}function ha(e,t){var n=0;t=Se(e.doc,t),e.options.lineWrapping||(n=Rn(e.display)*t.ch);var r=me(e.doc,t.line),i=Z(r)+Hi(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function mo(e,t,n,r,i){var a=ve(e,t,n);return a.xRel=i,r&&(a.outside=r),a}function yo(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return mo(r.first,0,null,-1,-1);var i=tt(r,n),a=r.first+r.size-1;if(i>a)return mo(r.first+r.size-1,me(r,a).text.length,null,1,1);t<0&&(t=0);for(var u=me(r,i);;){var h=Ul(e,u,i,t,n),d=l(u,h.ch+(h.xRel>0||h.outside>0?1:0));if(!d)return h;var m=d.find(1);if(m.line==i)return m;u=me(r,i=m.line)}}function da(e,t,n,r){r-=go(t);var i=t.text.length,a=Ar(function(u){return Zr(e,n,u-1).bottom<=r},i,0);return{begin:a,end:i=Ar(function(u){return Zr(e,n,u).top>r},a,i)}}function pa(e,t,n,r){return n||(n=Nn(e,t)),da(e,t,n,_i(e,t,Zr(e,n,r),"line").top)}function xo(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function Ul(e,t,n,r,i){i-=Z(t);var a=Nn(e,t),u=go(t),h=0,d=t.text.length,m=!0,A=it(t,e.doc.direction);if(A){var N=(e.options.lineWrapping?Kl:zl)(e,t,n,a,A,r,i);h=(m=1!=N.level)?N.from:N.to-1,d=m?N.to:N.from-1}var Ce,Te,$=null,J=null,de=Ar(function(je){var Ze=Zr(e,a,je);return Ze.top+=u,Ze.bottom+=u,!!xo(Ze,r,i,!1)&&(Ze.top<=i&&Ze.left<=r&&($=je,J=Ze),!0)},h,d),Ie=!1;if(J){var Be=r-J.left<J.right-r,Ne=Be==m;de=$+(Ne?0:1),Te=Ne?"after":"before",Ce=Be?J.left:J.right}else{!m&&(de==d||de==h)&&de++,Te=0==de?"after":de==t.text.length?"before":Zr(e,a,de-(m?1:0)).bottom+u<=i==m?"after":"before";var He=Br(e,ve(n,de,Te),"line",t,a);Ce=He.left,Ie=i<He.top?-1:i>=He.bottom?1:0}return mo(n,de=Kt(t.text,de,1),Te,Ie,r-Ce)}function zl(e,t,n,r,i,a,u){var h=Ar(function(N){var $=i[N],J=1!=$.level;return xo(Br(e,ve(n,J?$.to:$.from,J?"before":"after"),"line",t,r),a,u,!0)},0,i.length-1),d=i[h];if(h>0){var m=1!=d.level,A=Br(e,ve(n,m?d.from:d.to,m?"after":"before"),"line",t,r);xo(A,a,u,!0)&&A.top>u&&(d=i[h-1])}return d}function Kl(e,t,n,r,i,a,u){var h=da(e,t,r,u),d=h.begin,m=h.end;/\s/.test(t.text.charAt(m-1))&&m--;for(var A=null,N=null,$=0;$<i.length;$++){var J=i[$];if(!(J.from>=m||J.to<=d)){var Ce=Zr(e,r,1!=J.level?Math.min(m,J.to)-1:Math.max(d,J.from)).right,Te=Ce<a?a-Ce+1e9:Ce-a;(!A||N>Te)&&(A=J,N=Te)}}return A||(A=i[i.length-1]),A.from<d&&(A={from:d,to:A.to,level:A.level}),A.to>m&&(A={from:A.from,to:m,level:A.level}),A}function Bn(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==bn){bn=ee("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)bn.appendChild(document.createTextNode("x")),bn.appendChild(ee("br"));bn.appendChild(document.createTextNode("x"))}K(e.measure,bn);var n=bn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),re(e.measure),n||1}function Rn(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=ee("span","xxxxxxxxxx"),n=ee("pre",[t],"CodeMirror-line-like");K(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function ko(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,a=t.gutters.firstChild,u=0;a;a=a.nextSibling,++u){var h=e.display.gutterSpecs[u].className;n[h]=a.offsetLeft+a.clientLeft+i,r[h]=a.clientWidth}return{fixedPos:bo(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function bo(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function va(e){var t=Bn(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/Rn(e.display)-3);return function(i){if(D(e.doc,i))return 0;var a=0;if(i.widgets)for(var u=0;u<i.widgets.length;u++)i.widgets[u].height&&(a+=i.widgets[u].height);return n?a+(Math.ceil(i.text.length/r)||1)*t:a+t}}function Co(e){var t=e.doc,n=va(e);t.iter(function(r){var i=n(r);i!=r.height&&we(r,i)})}function Cn(e,t,n,r){var i=e.display;if(!n&&"true"==$t(t).getAttribute("cm-not-content"))return null;var a,u,h=i.lineSpace.getBoundingClientRect();try{a=t.clientX-h.left,u=t.clientY-h.top}catch(N){return null}var m,d=yo(e,a,u);if(r&&d.xRel>0&&(m=me(e.doc,d.line).text).length==d.ch){var A=O(m,m.length,e.options.tabSize)-m.length;d=ve(d.line,Math.max(0,Math.round((a-ra(e.display).left)/Rn(e.display))-A))}return d}function wn(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function vr(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Or&&S(e.doc,t)<i.viewTo&&ln(e);else if(n<=i.viewFrom)Or&&I(e.doc,n+r)>i.viewFrom?ln(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)ln(e);else if(t<=i.viewFrom){var a=Ui(e,n,n+r,1);a?(i.view=i.view.slice(a.index),i.viewFrom=a.lineN,i.viewTo+=r):ln(e)}else if(n>=i.viewTo){var u=Ui(e,t,t,-1);u?(i.view=i.view.slice(0,u.index),i.viewTo=u.lineN):ln(e)}else{var h=Ui(e,t,t,-1),d=Ui(e,n,n+r,1);h&&d?(i.view=i.view.slice(0,h.index).concat(Yt(e,h.lineN,d.lineN)).concat(i.view.slice(d.index)),i.viewTo+=r):ln(e)}var m=i.externalMeasured;m&&(n<m.lineN?m.lineN+=r:t<m.lineN+m.size&&(i.externalMeasured=null))}function an(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var a=r.view[wn(e,t)];if(null!=a.node){var u=a.changes||(a.changes=[]);-1==Ae(u,n)&&u.push(n)}}}function ln(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Ui(e,t,n,r){var a,i=wn(e,t),u=e.display.view;if(!Or||n==e.doc.first+e.doc.size)return{index:i,lineN:n};for(var h=e.display.viewFrom,d=0;d<i;d++)h+=u[d].size;if(h!=t){if(r>0){if(i==u.length-1)return null;a=h+u[i].size-t,i++}else a=h-t;t+=a,n+=a}for(;S(e.doc,n)!=n;){if(i==(r<0?0:u.length-1))return null;n+=r*u[i-(r<0?1:0)].size,i+=r}return{index:i,lineN:n}}function ga(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];!i.hidden&&(!i.node||i.changes)&&++n}return n}function ci(e){e.display.input.showSelection(e.display.input.prepareSelection())}function ma(e,t){void 0===t&&(t=!0);var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),a=r.selection=document.createDocumentFragment(),u=e.options.$customCursor;u&&(t=!0);for(var h=0;h<n.sel.ranges.length;h++)if(t||h!=n.sel.primIndex){var d=n.sel.ranges[h];if(!(d.from().line>=e.display.viewTo||d.to().line<e.display.viewFrom)){var m=d.empty();if(u){var A=u(e,d);A&&wo(e,A,i)}else(m||e.options.showCursorWhenSelecting)&&wo(e,d.head,i);m||Gl(e,d,a)}}return r}function wo(e,t,n){var r=Br(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(ee("div","\xa0","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var a=Wi(e,t,"div",null,null),u=a.right-a.left;i.style.width=(u>0?u:e.defaultCharWidth())+"px"}if(r.other){var h=n.appendChild(ee("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));h.style.display="",h.style.left=r.other.left+"px",h.style.top=r.other.top+"px",h.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function zi(e,t){return e.top-t.top||e.left-t.left}function Gl(e,t,n){var r=e.display,i=e.doc,a=document.createDocumentFragment(),u=ra(e.display),h=u.left,d=Math.max(r.sizerWidth,kn(e)-r.sizer.offsetLeft)-u.right,m="ltr"==i.direction;function A(Ne,He,je,Ze){He<0&&(He=0),He=Math.round(He),Ze=Math.round(Ze),a.appendChild(ee("div",null,"CodeMirror-selected","position: absolute; left: "+Ne+"px;\n                             top: "+He+"px; width: "+(null==je?d-Ne:je)+"px;\n                             height: "+(Ze-He)+"px"))}function N(Ne,He,je){var yt,Xt,Ze=me(i,Ne),nt=Ze.text.length;function Et(Bt,yr){return Wi(e,ve(Ne,Bt),"div",Ze,yr)}function Tr(Bt,yr,rr){var zt=pa(e,Ze,null,Bt),Rt="ltr"==yr==("after"==rr)?"left":"right";return Et("after"==rr?zt.begin:zt.end-(/\s/.test(Ze.text.charAt(zt.end-1))?2:1),Rt)[Rt]}var mr=it(Ze,i.direction);return function(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,a=0;a<e.length;++a){var u=e[a];(u.from<n&&u.to>t||t==n&&u.to==t)&&(r(Math.max(u.from,t),Math.min(u.to,n),1==u.level?"rtl":"ltr",a),i=!0)}i||r(t,n,"ltr")}(mr,He||0,null==je?nt:je,function(Bt,yr,rr,zt){var Rt="ltr"==rr,Ot=Et(Bt,Rt?"left":"right"),xr=Et(yr-1,Rt?"right":"left"),Qn=null==He&&0==Bt,dn=null==je&&yr==nt,ar=0==zt,Gr=!mr||zt==mr.length-1;if(xr.top-Ot.top<=3){var en=(m?Qn:dn)&&ar?h:(Rt?Ot:xr).left;A(en,Ot.top,((m?dn:Qn)&&Gr?d:(Rt?xr:Ot).right)-en,Ot.bottom)}else{var En,hr,qn,qo;Rt?(En=m&&Qn&&ar?h:Ot.left,hr=m?d:Tr(Bt,rr,"before"),qn=m?h:Tr(yr,rr,"after"),qo=m&&dn&&Gr?d:xr.right):(En=m?Tr(Bt,rr,"before"):h,hr=!m&&Qn&&ar?d:Ot.right,qn=!m&&dn&&Gr?h:xr.left,qo=m?Tr(yr,rr,"after"):d),A(En,Ot.top,hr-En,Ot.bottom),Ot.bottom<xr.top&&A(h,Ot.bottom,null,xr.top),A(qn,xr.top,qo-qn,xr.bottom)}(!yt||zi(Ot,yt)<0)&&(yt=Ot),zi(xr,yt)<0&&(yt=xr),(!Xt||zi(Ot,Xt)<0)&&(Xt=Ot),zi(xr,Xt)<0&&(Xt=xr)}),{start:yt,end:Xt}}var $=t.from(),J=t.to();if($.line==J.line)N($.line,$.ch,J.ch);else{var de=me(i,$.line),Ce=me(i,J.line),Te=c(de)==c(Ce),Ie=N($.line,$.ch,Te?de.text.length+1:null).end,Be=N(J.line,Te?0:null,J.ch).start;Te&&(Ie.top<Be.top-2?(A(Ie.right,Ie.top,null,Ie.bottom),A(h,Be.top,Be.left,Be.bottom)):A(Ie.right,Ie.top,Be.left-Ie.right,Ie.bottom)),Ie.bottom<Be.top&&A(h,Ie.bottom,null,Be.top)}n.appendChild(a)}function So(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||Pn(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function ya(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||To(e))}function Lo(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Pn(e))},100)}function To(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Xe(e,"focus",e,t),e.state.focused=!0,he(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),B&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),So(e))}function Pn(e,t){e.state.delayingBlurEvent||(e.state.focused&&(Xe(e,"blur",e,t),e.state.focused=!1,U(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Ki(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=Math.max(0,t.scroller.getBoundingClientRect().top),i=t.lineDiv.getBoundingClientRect().top,a=0,u=0;u<t.view.length;u++){var h=t.view[u],d=e.options.lineWrapping,m=void 0,A=0;if(!h.hidden){if(i+=h.line.height,f&&E<8){var N=h.node.offsetTop+h.node.offsetHeight;m=N-n,n=N}else{var $=h.node.getBoundingClientRect();m=$.bottom-$.top,!d&&h.text.firstChild&&(A=h.text.firstChild.getBoundingClientRect().right-$.left-1)}var J=h.line.height-m;if((J>.005||J<-.005)&&(i<r&&(a-=J),we(h.line,m),xa(h.line),h.rest))for(var de=0;de<h.rest.length;de++)xa(h.rest[de]);if(A>e.display.sizerWidth){var Ce=Math.ceil(A/Rn(e.display));Ce>e.display.maxLineLength&&(e.display.maxLineLength=Ce,e.display.maxLine=h.line,e.display.maxLineChanged=!0)}}}Math.abs(a)>2&&(t.scroller.scrollTop+=a)}function xa(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function Zi(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Hi(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,a=tt(t,r),u=tt(t,i);if(n&&n.ensure){var h=n.ensure.from.line,d=n.ensure.to.line;h<a?(a=h,u=tt(t,Z(me(t,h))+e.wrapper.clientHeight)):Math.min(d,t.lastLine())>=u&&(a=tt(t,Z(me(t,d))-e.wrapper.clientHeight),u=d)}return{from:a,to:Math.max(u,a+1)}}function Ao(e,t){var n=e.display,r=Bn(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,a=po(e),u={};t.bottom-t.top>a&&(t.bottom=t.top+a);var h=e.doc.height+ho(n),m=t.bottom>h-r;if(t.top<i)u.scrollTop=t.top<r?0:t.top;else if(t.bottom>i+a){var A=Math.min(t.top,(m?h:t.bottom)-a);A!=i&&(u.scrollTop=A)}var N=e.options.fixedGutter?0:n.gutters.offsetWidth,$=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-N,J=kn(e)-n.gutters.offsetWidth,de=t.right-t.left>J;return de&&(t.right=t.left+J),t.left<10?u.scrollLeft=0:t.left<$?u.scrollLeft=Math.max(0,t.left+N-(de?0:10)):t.right>J+$-3&&(u.scrollLeft=t.right+(de?0:10)-J),u}function Mo(e,t){null!=t&&(Gi(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Hn(e){Gi(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function hi(e,t,n){(null!=t||null!=n)&&Gi(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Gi(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,ka(e,ha(e,t.from),ha(e,t.to),t.margin))}function ka(e,t,n,r){var i=Ao(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});hi(e,i.scrollLeft,i.scrollTop)}function di(e,t){Math.abs(e.doc.scrollTop-t)<2||(k||Do(e,{top:t}),ba(e,t,!0),k&&Do(e),gi(e,100))}function ba(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Sn(e,t,n,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(!(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||r)&&(e.doc.scrollLeft=t,Ta(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function pi(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+ho(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Kr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Ln=function(e,t,n){this.cm=n;var r=this.vert=ee("div",[ee("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=ee("div",[ee("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),Ke(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),Ke(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,f&&E<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Ln.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;return n?(this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0",this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+(e.viewHeight-(t?r:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),t?(this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+(e.viewWidth-e.barLeft-(n?r:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},Ln.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Ln.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Ln.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=T&&!ue?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new C,this.disableVert=new C},Ln.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,function r(){var i=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,r)})},Ln.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var vi=function(){};function _n(e,t){t||(t=pi(e));var n=e.display.barWidth,r=e.display.barHeight;Ca(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&Ki(e),Ca(e,pi(e)),n=e.display.barWidth,r=e.display.barHeight}function Ca(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}vi.prototype.update=function(){return{bottom:0,right:0}},vi.prototype.setScrollLeft=function(){},vi.prototype.setScrollTop=function(){},vi.prototype.clear=function(){};var wa={native:Ln,null:vi};function Sa(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&U(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new wa[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),Ke(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?Sn(e,t):di(e,t)},e),e.display.scrollbars.addClass&&he(e.display.wrapper,e.display.scrollbars.addClass)}var ql=0;function Tn(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ql,markArrays:null},function(e){Mt?Mt.ops.push(e):e.ownsGroup=Mt={ops:[e],delayedCallbacks:[]}}(e.curOp)}function An(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{Mt=null,t(n)}}(t,function(n){for(var r=0;r<n.ops.length;r++)n.ops[r].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)Vl(t[n]);for(var r=0;r<t.length;r++)$l(t[r]);for(var i=0;i<t.length;i++)es(t[i]);for(var a=0;a<t.length;a++)ts(t[a]);for(var u=0;u<t.length;u++)rs(t[u])}(n)})}function Vl(e){var t=e.cm,n=t.display;(function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Kr(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Kr(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&Le(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new ji(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function $l(e){e.updatedDisplay=e.mustUpdate&&Eo(e.cm,e.update)}function es(e){var t=e.cm,n=t.display;e.updatedDisplay&&Ki(t),e.barMeasure=pi(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=ia(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Kr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-kn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function ts(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Sn(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==fe();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&_n(t,e.barMeasure),e.updatedDisplay&&Oo(t,e.barMeasure),e.selectionChanged&&So(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&ya(e.cm)}function rs(e){var t=e.cm,n=t.display,r=t.doc;e.updatedDisplay&&La(t,e.update),null!=n.wheelStartX&&(null!=e.scrollTop||null!=e.scrollLeft||e.scrollToPos)&&(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&ba(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Sn(t,e.scrollLeft,!0,!0),e.scrollToPos&&function(e,t){if(!at(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!ce){var a=ee("div","\u200b",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-Hi(e.display))+"px;\n                         height: "+(t.bottom-t.top+Kr(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(a),a.scrollIntoView(i),e.display.lineSpace.removeChild(a)}}}(t,function(e,t,n,r){var i;null==r&&(r=0),!e.options.lineWrapping&&t==n&&(n="before"==t.sticky?ve(t.line,t.ch+1,"before"):t,t=t.ch?ve(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t);for(var a=0;a<5;a++){var u=!1,h=Br(e,t),d=n&&n!=t?Br(e,n):h,m=Ao(e,i={left:Math.min(h.left,d.left),top:Math.min(h.top,d.top)-r,right:Math.max(h.left,d.left),bottom:Math.max(h.bottom,d.bottom)+r}),A=e.doc.scrollTop,N=e.doc.scrollLeft;if(null!=m.scrollTop&&(di(e,m.scrollTop),Math.abs(e.doc.scrollTop-A)>1&&(u=!0)),null!=m.scrollLeft&&(Sn(e,m.scrollLeft),Math.abs(e.doc.scrollLeft-N)>1&&(u=!0)),!u)break}return i}(t,Se(r,e.scrollToPos.from),Se(r,e.scrollToPos.to),e.scrollToPos.margin));var a=e.maybeHiddenMarkers,u=e.maybeUnhiddenMarkers;if(a)for(var h=0;h<a.length;++h)a[h].lines.length||Xe(a[h],"hide");if(u)for(var d=0;d<u.length;++d)u[d].lines.length&&Xe(u[d],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Xe(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Lr(e,t){if(e.curOp)return t();Tn(e);try{return t()}finally{An(e)}}function Qt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Tn(e);try{return t.apply(e,arguments)}finally{An(e)}}}function cr(e){return function(){if(this.curOp)return e.apply(this,arguments);Tn(this);try{return e.apply(this,arguments)}finally{An(this)}}}function qt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Tn(t);try{return e.apply(this,arguments)}finally{An(t)}}}function gi(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,ze(ns,e))}function ns(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=gn(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(a){if(r.line>=e.display.viewFrom){var u=a.styles,h=a.text.length>e.options.maxHighlightLength?fr(t.mode,r.state):null,d=Dn(e,a,r,!0);h&&(r.state=h),a.styles=d.styles;var m=a.styleClasses,A=d.classes;A?a.styleClasses=A:m&&(a.styleClasses=null);for(var N=!u||u.length!=a.styles.length||m!=A&&(!m||!A||m.bgClass!=A.bgClass||m.textClass!=A.textClass),$=0;!N&&$<u.length;++$)N=u[$]!=a.styles[$];N&&i.push(r.line),a.stateAfter=r.save(),r.nextLine()}else a.text.length<=e.options.maxHighlightLength&&Qr(e,a.text,r),a.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return gi(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&Lr(e,function(){for(var a=0;a<i.length;a++)an(e,i[a],"text")})}}var ji=function(e,t,n){var r=e.display;this.viewport=t,this.visible=Zi(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=kn(e),this.force=n,this.dims=ko(e),this.events=[]};function Eo(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return ln(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==ga(e))return!1;Aa(e)&&(ln(e),t.dims=ko(e));var i=r.first+r.size,a=Math.max(t.visible.from-e.options.viewportMargin,r.first),u=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<a&&a-n.viewFrom<20&&(a=Math.max(r.first,n.viewFrom)),n.viewTo>u&&n.viewTo-u<20&&(u=Math.min(i,n.viewTo)),Or&&(a=S(e.doc,a),u=I(e.doc,u));var h=a!=n.viewFrom||u!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;(function(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=Yt(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=Yt(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(wn(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(Yt(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,wn(e,n)))),r.viewTo=n})(e,a,u),n.viewOffset=Z(me(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var d=ga(e);if(!h&&0==d&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var m=function(e){if(e.hasFocus())return null;var t=fe();if(!t||!x(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&x(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(e);return d>4&&(n.lineDiv.style.display="none"),function(e,t,n){var r=e.display,i=e.options.lineNumbers,a=r.lineDiv,u=a.firstChild;function h(de){var Ce=de.nextSibling;return B&&T&&e.display.currentWheelTarget==de?de.style.display="none":de.parentNode.removeChild(de),Ce}for(var d=r.view,m=r.viewFrom,A=0;A<d.length;A++){var N=d[A];if(!N.hidden)if(N.node&&N.node.parentNode==a){for(;u!=N.node;)u=h(u);var J=i&&null!=t&&t<=m&&N.lineNumber;N.changes&&(Ae(N.changes,"gutter")>-1&&(J=!1),Xo(e,N,m,n)),J&&(re(N.lineNumber),N.lineNumber.appendChild(document.createTextNode(gt(e.options,m)))),u=N.node.nextSibling}else{var $=Nl(e,N,m,n);a.insertBefore($,u)}m+=N.size}for(;u;)u=h(u)}(e,n.updateLineNumbers,t.dims),d>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=fe()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&x(document.body,e.anchorNode)&&x(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(m),re(n.cursorDiv),re(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,h&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,gi(e,400)),n.updateLineNumbers=null,!0}function La(e,t){for(var n=t.viewport,r=!0;;r=!1){if(r&&e.options.lineWrapping&&t.oldDisplayWidth!=kn(e))r&&(t.visible=Zi(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+ho(e.display)-po(e),n.top)}),t.visible=Zi(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!Eo(e,t))break;Ki(e);var i=pi(e);ci(e),_n(e,i),Oo(e,i),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Do(e,t){var n=new ji(e,t);if(Eo(e,n)){Ki(e),La(e,n);var r=pi(e);ci(e),_n(e,r),Oo(e,r),n.finish()}}function Fo(e){e.sizer.style.marginLeft=e.gutters.offsetWidth+"px",Jt(e,"gutterChanged",e)}function Oo(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Kr(e)+"px"}function Ta(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=bo(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,a=r+"px",u=0;u<n.length;u++)if(!n[u].hidden){e.options.fixedGutter&&(n[u].gutter&&(n[u].gutter.style.left=a),n[u].gutterBackground&&(n[u].gutterBackground.style.left=a));var h=n[u].alignable;if(h)for(var d=0;d<h.length;d++)h[d].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function Aa(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=gt(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(ee("div",[ee("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=i.firstChild.offsetWidth,u=i.offsetWidth-a;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(a,r.lineGutter.offsetWidth-u)+1,r.lineNumWidth=r.lineNumInnerWidth+u,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",Fo(e.display),!0}return!1}function Io(e,t){for(var n=[],r=!1,i=0;i<e.length;i++){var a=e[i],u=null;if("string"!=typeof a&&(u=a.style,a=a.className),"CodeMirror-linenumbers"==a){if(!t)continue;r=!0}n.push({className:a,style:u})}return t&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function Ma(e){var t=e.gutters,n=e.gutterSpecs;re(t),e.lineGutter=null;for(var r=0;r<n.length;++r){var i=n[r],a=i.className,u=i.style,h=t.appendChild(ee("div",null,"CodeMirror-gutter "+a));u&&(h.style.cssText=u),"CodeMirror-linenumbers"==a&&(e.lineGutter=h,h.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",Fo(e)}function mi(e){Ma(e.display),vr(e),Ta(e)}function ss(e,t,n,r){var i=this;this.input=n,i.scrollbarFiller=ee("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=ee("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=G("div",null,"CodeMirror-code"),i.selectionDiv=ee("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=ee("div",null,"CodeMirror-cursors"),i.measure=ee("div",null,"CodeMirror-measure"),i.lineMeasure=ee("div",null,"CodeMirror-measure"),i.lineSpace=G("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var a=G("div",[i.lineSpace],"CodeMirror-lines");i.mover=ee("div",[a],null,"position: relative"),i.sizer=ee("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=ee("div",null,null,"position: absolute; height: 50px; width: 1px;"),i.gutters=ee("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=ee("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=ee("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),i.wrapper.setAttribute("translate","no"),f&&E<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),!B&&!(k&&ie)&&(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,i.gutterSpecs=Io(r.gutters,r.lineNumbers),Ma(i),n.init(i)}ji.prototype.signal=function(e,t){Gt(e,t)&&this.events.push(arguments)},ji.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Xe.apply(null,this.events[e])};var Yi=0,Vr=null;function Ea(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function us(e){var t=Ea(e);return t.x*=Vr,t.y*=Vr,t}function Da(e,t){var n=Ea(t),r=n.x,i=n.y,a=Vr;0===t.deltaMode&&(r=t.deltaX,i=t.deltaY,a=1);var u=e.display,h=u.scroller,m=h.scrollHeight>h.clientHeight;if(r&&h.scrollWidth>h.clientWidth||i&&m){if(i&&T&&B)e:for(var A=t.target,N=u.view;A!=h;A=A.parentNode)for(var $=0;$<N.length;$++)if(N[$].node==A){e.display.currentWheelTarget=A;break e}if(r&&!k&&!q&&null!=a)return i&&m&&di(e,Math.max(0,h.scrollTop+i*a)),Sn(e,Math.max(0,h.scrollLeft+r*a)),(!i||i&&m)&&kt(t),void(u.wheelStartX=null);if(i&&null!=a){var J=i*a,de=e.doc.scrollTop,Ce=de+u.wrapper.clientHeight;J<0?de=Math.max(0,de+J-50):Ce=Math.min(e.doc.height,Ce+J+50),Do(e,{top:de,bottom:Ce})}Yi<20&&0!==t.deltaMode&&(null==u.wheelStartX?(u.wheelStartX=h.scrollLeft,u.wheelStartY=h.scrollTop,u.wheelDX=r,u.wheelDY=i,setTimeout(function(){if(null!=u.wheelStartX){var Te=h.scrollLeft-u.wheelStartX,Ie=h.scrollTop-u.wheelStartY,Be=Ie&&u.wheelDY&&Ie/u.wheelDY||Te&&u.wheelDX&&Te/u.wheelDX;u.wheelStartX=u.wheelStartY=null,Be&&(Vr=(Vr*Yi+Be)/(Yi+1),++Yi)}},200)):(u.wheelDX+=r,u.wheelDY+=i))}}f?Vr=-.53:k?Vr=15:X?Vr=-.7:z&&(Vr=-1/3);var Mr=function(e,t){this.ranges=e,this.primIndex=t};Mr.prototype.primary=function(){return this.ranges[this.primIndex]},Mr.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!wt(n.anchor,r.anchor)||!wt(n.head,r.head))return!1}return!0},Mr.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new dt(y(this.ranges[t].anchor),y(this.ranges[t].head));return new Mr(e,this.primIndex)},Mr.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},Mr.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(Re(t,r.from())>=0&&Re(e,r.to())<=0)return n}return-1};var dt=function(e,t){this.anchor=e,this.head=t};function Rr(e,t,n){var r=e&&e.options.selectionsMayTouch,i=t[n];t.sort(function($,J){return Re($.from(),J.from())}),n=Ae(t,i);for(var a=1;a<t.length;a++){var u=t[a],h=t[a-1],d=Re(h.to(),u.from());if(r&&!u.empty()?d>0:d>=0){var m=oe(h.from(),u.from()),A=F(h.to(),u.to()),N=h.empty()?u.from()==u.head:h.from()==h.head;a<=n&&--n,t.splice(--a,2,new dt(N?A:m,N?m:A))}}return new Mr(t,n)}function sn(e,t){return new Mr([new dt(e,t||e)],0)}function un(e){return e.text?ve(e.from.line+e.text.length-1,_e(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Fa(e,t){if(Re(e,t.from)<0)return e;if(Re(e,t.to)<=0)return un(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=un(t).ch-t.to.ch),ve(n,r)}function No(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new dt(Fa(i.anchor,t),Fa(i.head,t)))}return Rr(e.cm,n,e.sel.primIndex)}function Oa(e,t,n){return e.line==t.line?ve(n.line,e.ch-t.ch+n.ch):ve(n.line+(e.line-t.line),e.ch)}function Bo(e){e.doc.mode=ur(e.options,e.doc.modeOption),yi(e)}function yi(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,gi(e,100),e.state.modeGen++,e.curOp&&vr(e)}function Ia(e,t){return 0==t.from.ch&&0==t.to.ch&&""==_e(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Ro(e,t,n,r){function i(Be){return n?n[Be]:null}function a(Be,Ne,He){(function(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),ri(e),ni(e,n);var i=r?r(e):1;i!=e.height&&we(e,i)})(Be,Ne,He,r),Jt(Be,"change",Be,t)}function u(Be,Ne){for(var He=[],je=Be;je<Ne;++je)He.push(new ye(m[je],i(je),r));return He}var h=t.from,d=t.to,m=t.text,A=me(e,h.line),N=me(e,d.line),$=_e(m),J=i(m.length-1),de=d.line-h.line;if(t.full)e.insert(0,u(0,m.length)),e.remove(m.length,e.size-m.length);else if(Ia(e,t)){var Ce=u(0,m.length-1);a(N,N.text,J),de&&e.remove(h.line,de),Ce.length&&e.insert(h.line,Ce)}else if(A==N)if(1==m.length)a(A,A.text.slice(0,h.ch)+$+A.text.slice(d.ch),J);else{var Te=u(1,m.length-1);Te.push(new ye($+A.text.slice(d.ch),J,r)),a(A,A.text.slice(0,h.ch)+m[0],i(0)),e.insert(h.line+1,Te)}else if(1==m.length)a(A,A.text.slice(0,h.ch)+m[0]+N.text.slice(d.ch),i(0)),e.remove(h.line+1,de);else{a(A,A.text.slice(0,h.ch)+m[0],i(0)),a(N,$+N.text.slice(d.ch),J);var Ie=u(1,m.length-1);de>1&&e.remove(h.line+1,de-1),e.insert(h.line+1,Ie)}Jt(e,"change",e,t)}function fn(e,t,n){!function r(i,a,u){if(i.linked)for(var h=0;h<i.linked.length;++h){var d=i.linked[h];if(d.doc!=a){var m=u&&d.sharedHist;n&&!m||(t(d.doc,m),r(d.doc,i,m))}}}(e,null,!0)}function Na(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Co(e),Bo(e),Ba(e),e.options.direction=t.direction,e.options.lineWrapping||Le(e),e.options.mode=t.modeOption,vr(e)}function Ba(e){("rtl"==e.doc.direction?he:U)(e.display.lineDiv,"CodeMirror-rtl")}function Ji(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Po(e,t){var n={from:y(t.from),to:un(t),text:H(e,t.from,t.to)};return Ha(e,n,t.from.line,t.to.line+1),fn(e,function(r){return Ha(r,n,t.from.line,t.to.line+1)},!0),n}function Ra(e){for(;e.length&&_e(e).ranges;)e.pop()}function Pa(e,t,n,r){var i=e.history;i.undone.length=0;var u,h,a=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(u=function(e,t){return t?(Ra(e.done),_e(e.done)):e.done.length&&!_e(e.done).ranges?_e(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),_e(e.done)):void 0}(i,i.lastOp==r)))h=_e(u.changes),0==Re(t.from,t.to)&&0==Re(t.from,h.to)?h.to=un(t):u.changes.push(Po(e,t));else{var d=_e(i.done);for((!d||!d.ranges)&&Qi(e.sel,i.done),u={changes:[Po(e,t)],generation:i.generation},i.done.push(u);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,h||Xe(e,"historyAdded")}function ps(e,t,n,r){var i=e.history,a=r&&r.origin;n==i.lastSelOp||a&&i.lastSelOrigin==a&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==a||function(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,a,_e(i.done),t))?i.done[i.done.length-1]=t:Qi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=a,i.lastSelOp=n,r&&!1!==r.clearRedo&&Ra(i.undone)}function Qi(e,t){var n=_e(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Ha(e,t,n,r){var i=t["spans_"+e.id],a=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(u){u.markedSpans&&((i||(i=t["spans_"+e.id]={}))[a]=u.markedSpans),++a})}function vs(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function _a(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(vs(n[i]));return r}(e,t),r=ti(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var a=n[i],u=r[i];if(a&&u)e:for(var h=0;h<u.length;++h){for(var d=u[h],m=0;m<a.length;++m)if(a[m].marker==d.marker)continue e;a.push(d)}else u&&(n[i]=u)}return n}function Wn(e,t,n){for(var r=[],i=0;i<e.length;++i){var a=e[i];if(a.ranges)r.push(n?Mr.prototype.deepCopy.call(a):a);else{var u=a.changes,h=[];r.push({changes:h});for(var d=0;d<u.length;++d){var m=u[d],A=void 0;if(h.push({from:m.from,to:m.to,text:m.text}),t)for(var N in m)(A=N.match(/^spans_(\d+)$/))&&Ae(t,Number(A[1]))>-1&&(_e(h)[N]=m[N],delete m[N])}}}return r}function Ho(e,t,n,r){if(r){var i=e.anchor;if(n){var a=Re(t,i)<0;a!=Re(n,i)<0?(i=t,t=n):a!=Re(t,n)<0&&(t=n)}return new dt(i,t)}return new dt(n||t,t)}function qi(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),or(e,new Mr([Ho(e.sel.primary(),t,n,i)],0),r)}function Wa(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),a=0;a<e.sel.ranges.length;a++)r[a]=Ho(e.sel.ranges[a],t[a],null,i);or(e,Rr(e.cm,r,e.sel.primIndex),n)}function _o(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,or(e,Rr(e.cm,i,e.sel.primIndex),r)}function Ua(e,t,n,r){or(e,sn(t,n),r)}function za(e,t,n){var r=e.history.done,i=_e(r);i&&i.ranges?(r[r.length-1]=t,Xi(e,t,n)):or(e,t,n)}function or(e,t,n){Xi(e,t,n),ps(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Xi(e,t,n){(Gt(e,"beforeSelectionChange")||e.cm&&Gt(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var r={ranges:t.ranges,update:function(i){this.ranges=[];for(var a=0;a<i.length;a++)this.ranges[a]=new dt(Se(e,i[a].anchor),Se(e,i[a].head))},origin:n&&n.origin};return Xe(e,"beforeSelectionChange",e,r),e.cm&&Xe(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?Rr(e.cm,r.ranges,r.ranges.length-1):t}(e,t,n));var r=n&&n.bias||(Re(t.primary().head,e.sel.primary().head)<0?-1:1);Ka(e,Ga(e,t,r,!0)),(!n||!1!==n.scroll)&&e.cm&&"nocursor"!=e.cm.getOption("readOnly")&&Hn(e.cm)}function Ka(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,et(e.cm)),Jt(e,"cursorActivity",e))}function Za(e){Ka(e,Ga(e,e.sel,null,!1))}function Ga(e,t,n,r){for(var i,a=0;a<t.ranges.length;a++){var u=t.ranges[a],h=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[a],d=Vi(e,u.anchor,h&&h.anchor,n,r),m=Vi(e,u.head,h&&h.head,n,r);(i||d!=u.anchor||m!=u.head)&&(i||(i=t.ranges.slice(0,a)),i[a]=new dt(d,m))}return i?Rr(e.cm,i,t.primIndex):t}function Un(e,t,n,r,i){var a=me(e,t.line);if(a.markedSpans)for(var u=0;u<a.markedSpans.length;++u){var h=a.markedSpans[u],d=h.marker,m="selectLeft"in d?!d.selectLeft:d.inclusiveLeft,A="selectRight"in d?!d.selectRight:d.inclusiveRight;if((null==h.from||(m?h.from<=t.ch:h.from<t.ch))&&(null==h.to||(A?h.to>=t.ch:h.to>t.ch))){if(i&&(Xe(d,"beforeCursorEnter"),d.explicitlyCleared)){if(a.markedSpans){--u;continue}break}if(!d.atomic)continue;if(n){var N=d.find(r<0?1:-1),$=void 0;if((r<0?A:m)&&(N=ja(e,N,-r,N&&N.line==t.line?a:null)),N&&N.line==t.line&&($=Re(N,n))&&(r<0?$<0:$>0))return Un(e,N,t,r,i)}var J=d.find(r<0?-1:1);return(r<0?m:A)&&(J=ja(e,J,r,J.line==t.line?a:null)),J?Un(e,J,t,r,i):null}}return t}function Vi(e,t,n,r,i){var a=r||1;return Un(e,t,n,a,i)||!i&&Un(e,t,n,a,!0)||Un(e,t,n,-a,i)||!i&&Un(e,t,n,-a,!0)||(e.cantEdit=!0,ve(e.first,0))}function ja(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?Se(e,ve(t.line-1)):null:n>0&&t.ch==(r||me(e,t.line)).text.length?t.line<e.first+e.size-1?ve(t.line+1,0):null:new ve(t.line,t.ch+n)}function Ya(e){e.setSelection(ve(e.firstLine(),0),ve(e.lastLine()),ne)}function Ja(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(i,a,u,h){i&&(r.from=Se(e,i)),a&&(r.to=Se(e,a)),u&&(r.text=u),void 0!==h&&(r.origin=h)}),Xe(e,"beforeChange",e,r),e.cm&&Xe(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function zn(e,t,n){if(e.cm){if(!e.cm.curOp)return Qt(e.cm,zn)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(Gt(e,"beforeChange")||e.cm&&Gt(e.cm,"beforeChange"))||(t=Ja(e,t,!0))){var r=ei&&!n&&function(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(J){if(J.markedSpans)for(var de=0;de<J.markedSpans.length;++de){var Ce=J.markedSpans[de].marker;Ce.readOnly&&(!r||-1==Ae(r,Ce))&&(r||(r=[])).push(Ce)}}),!r)return null;for(var i=[{from:t,to:n}],a=0;a<r.length;++a)for(var u=r[a],h=u.find(0),d=0;d<i.length;++d){var m=i[d];if(!(Re(m.to,h.from)<0||Re(m.from,h.to)>0)){var A=[d,1],N=Re(m.from,h.from),$=Re(m.to,h.to);(N<0||!u.inclusiveLeft&&!N)&&A.push({from:m.from,to:h.from}),($>0||!u.inclusiveRight&&!$)&&A.push({from:h.to,to:m.to}),i.splice.apply(i,A),d+=A.length-3}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)Qa(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else Qa(e,t)}}function Qa(e,t){if(1!=t.text.length||""!=t.text[0]||0!=Re(t.from,t.to)){var n=No(e,t);Pa(e,t,n,e.cm?e.cm.curOp.id:NaN),xi(e,t,n,ti(e,t));var r=[];fn(e,function(i,a){!a&&-1==Ae(r,i.history)&&($a(i.history,t),r.push(i.history)),xi(i,t,null,ti(i,t))})}}function $i(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!r||n){for(var a,i=e.history,u=e.sel,h="undo"==t?i.done:i.undone,d="undo"==t?i.undone:i.done,m=0;m<h.length&&(a=h[m],!(n?a.ranges&&!a.equals(e.sel):!a.ranges));m++);if(m!=h.length){for(i.lastOrigin=i.lastSelOrigin=null;;){if(!(a=h.pop()).ranges){if(r)return void h.push(a);break}if(Qi(a,d),n&&!a.equals(e.sel))return void or(e,a,{clearRedo:!1});u=a}var A=[];Qi(u,d),d.push({changes:A,generation:i.generation}),i.generation=a.generation||++i.maxGeneration;for(var N=Gt(e,"beforeChange")||e.cm&&Gt(e.cm,"beforeChange"),$=function(Ce){var Te=a.changes[Ce];if(Te.origin=t,N&&!Ja(e,Te,!1))return h.length=0,{};A.push(Po(e,Te));var Ie=Ce?No(e,Te):_e(h);xi(e,Te,Ie,_a(e,Te)),!Ce&&e.cm&&e.cm.scrollIntoView({from:Te.from,to:un(Te)});var Be=[];fn(e,function(Ne,He){!He&&-1==Ae(Be,Ne.history)&&($a(Ne.history,Te),Be.push(Ne.history)),xi(Ne,Te,null,_a(Ne,Te))})},J=a.changes.length-1;J>=0;--J){var de=$(J);if(de)return de.v}}}}function qa(e,t){if(0!=t&&(e.first+=t,e.sel=new Mr(Ct(e.sel.ranges,function(i){return new dt(ve(i.anchor.line+t,i.anchor.ch),ve(i.head.line+t,i.head.ch))}),e.sel.primIndex),e.cm)){vr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)an(e.cm,r,"gutter")}}function xi(e,t,n,r){if(e.cm&&!e.cm.curOp)return Qt(e.cm,xi)(e,t,n,r);if(t.to.line<e.first)qa(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);qa(e,i),t={from:ve(e.first,0),to:ve(t.to.line+i,t.to.ch),text:[_e(t.text)],origin:t.origin}}var a=e.lastLine();t.to.line>a&&(t={from:t.from,to:ve(a,me(e,a).text.length),text:[t.text[0]],origin:t.origin}),t.removed=H(e,t.from,t.to),n||(n=No(e,t)),e.cm?function(e,t,n){var r=e.doc,i=e.display,a=t.from,u=t.to,h=!1,d=a.line;e.options.lineWrapping||(d=De(c(me(r,a.line))),r.iter(d,u.line+1,function(J){if(J==i.maxLine)return h=!0,!0})),r.sel.contains(t.from,t.to)>-1&&et(e),Ro(r,t,n,va(e)),e.options.lineWrapping||(r.iter(d,a.line+t.text.length,function(J){var de=ge(J);de>i.maxLineLength&&(i.maxLine=J,i.maxLineLength=de,i.maxLineChanged=!0,h=!1)}),h&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=me(e,r).stateAfter;if(i&&(!(i instanceof mt)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(r,a.line),gi(e,400);var m=t.text.length-(u.line-a.line)-1;t.full?vr(e):a.line!=u.line||1!=t.text.length||Ia(e.doc,t)?vr(e,a.line,u.line+1,m):an(e,a.line,"text");var A=Gt(e,"changes"),N=Gt(e,"change");if(N||A){var $={from:a,to:u,text:t.text,removed:t.removed,origin:t.origin};N&&Jt(e,"change",e,$),A&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push($)}e.display.selForContextMenu=null}(e.cm,t,r):Ro(e,t,r),Xi(e,n,ne),e.cantEdit&&Vi(e,ve(e.firstLine(),0))&&(e.cantEdit=!1)}}function Kn(e,t,n,r,i){var a;r||(r=n),Re(r,n)<0&&(n=(a=[r,n])[0],r=a[1]),"string"==typeof t&&(t=e.splitLines(t)),zn(e,{from:n,to:r,text:t,origin:i})}function Xa(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function Va(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i],u=!0;if(a.ranges){a.copied||((a=e[i]=a.deepCopy()).copied=!0);for(var h=0;h<a.ranges.length;h++)Xa(a.ranges[h].anchor,t,n,r),Xa(a.ranges[h].head,t,n,r)}else{for(var d=0;d<a.changes.length;++d){var m=a.changes[d];if(n<m.from.line)m.from=ve(m.from.line+r,m.from.ch),m.to=ve(m.to.line+r,m.to.ch);else if(t<=m.to.line){u=!1;break}}u||(e.splice(0,i+1),i=0)}}}function $a(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;Va(e.done,n,r,i),Va(e.undone,n,r,i)}function ki(e,t,n,r){var i=t,a=t;return"number"==typeof t?a=me(e,be(e,t)):i=De(t),null==i?null:(r(a,i)&&e.cm&&an(e.cm,i,n),a)}function bi(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function Ci(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}dt.prototype.from=function(){return oe(this.anchor,this.head)},dt.prototype.to=function(){return F(this.anchor,this.head)},dt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},bi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,Pe(i),Jt(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},Ci.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var a=Math.min(t,i-e),u=r.height;if(r.removeInner(e,a),this.height-=u-r.height,i==a&&(this.children.splice(n--,1),r.parent=null),0==(t-=a))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof bi))){var h=[];this.collapse(h),this.children=[new bi(h)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],a=i.chunkSize();if(e<=a){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var u=i.lines.length%25+25,h=u;h<i.lines.length;){var d=new bi(i.lines.slice(h,h+=25));i.height-=d.height,this.children.splice(++r,0,d),d.parent=this}i.lines=i.lines.slice(0,u),this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var n=new Ci(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=n.size,e.height-=n.height;var i=Ae(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var r=new Ci(e.children);r.parent=e,e.children=[r,n],e=r}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],a=i.chunkSize();if(e<a){var u=Math.min(t,a-e);if(i.iterN(e,u,n))return!0;if(0==(t-=u))break;e=0}else e-=a}}};var wi=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function el(e,t,n){Z(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Mo(e,n)}wi.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=De(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var a=ui(this);we(n,Math.max(0,n.height-a)),e&&(Lr(e,function(){el(e,n,-a),an(e,r,"widget")}),Jt(e,"lineWidgetCleared",e,this,r))}},wi.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=ui(this)-t;!i||(D(this.doc,r)||we(r,r.height+i),n&&Lr(n,function(){n.curOp.forceUpdate=!0,el(n,r,i),Jt(n,"lineWidgetChanged",n,e,De(r))}))},ct(wi);var tl=0,cn=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++tl};function Zn(e,t,n,r,i){if(r&&r.shared)return function(e,t,n,r,i){(r=Ge(r)).shared=!1;var a=[Zn(e,t,n,r,i)],u=a[0],h=r.widgetNode;return fn(e,function(d){h&&(r.widgetNode=h.cloneNode(!0)),a.push(Zn(d,Se(d,t),Se(d,n),r,i));for(var m=0;m<d.linked.length;++m)if(d.linked[m].isParent)return;u=_e(a)}),new Si(a,u)}(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Qt(e.cm,Zn)(e,t,n,r,i);var a=new cn(e,i),u=Re(t,n);if(r&&Ge(r,a,!1),u>0||0==u&&!1!==a.clearWhenEmpty)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=G("span",[a.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(s(e,t.line,t,n,a)||t.line!=n.line&&s(e,n.line,t,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");Or=!0}a.addToHistory&&Pa(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var m,h=t.line,d=e.cm;if(e.iter(h,n.line+1,function(N){d&&a.collapsed&&!d.options.lineWrapping&&c(N)==d.display.maxLine&&(m=!0),a.collapsed&&h!=t.line&&we(N,0),function(e,t,n){var r=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));r&&r.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],r&&r.add(e.markedSpans)),t.marker.attachLine(e)}(N,new pr(a,h==t.line?t.ch:null,h==n.line?n.ch:null),e.cm&&e.cm.curOp),++h}),a.collapsed&&e.iter(t.line,n.line+1,function(N){D(e,N)&&we(N,0)}),a.clearOnEnter&&Ke(a,"beforeCursorEnter",function(){return a.clear()}),a.readOnly&&(ei=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++tl,a.atomic=!0),d){if(m&&(d.curOp.updateMaxLine=!0),a.collapsed)vr(d,t.line,n.line+1);else if(a.className||a.startStyle||a.endStyle||a.css||a.attributes||a.title)for(var A=t.line;A<=n.line;A++)an(d,A,"text");a.atomic&&Za(d.doc),Jt(d,"markerAdded",d,a)}return a}cn.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Tn(e),Gt(this,"clear")){var n=this.find();n&&Jt(this,"clear",n.from,n.to)}for(var r=null,i=null,a=0;a<this.lines.length;++a){var u=this.lines[a],h=mn(u.markedSpans,this);e&&!this.collapsed?an(e,De(u),"text"):e&&(null!=h.to&&(i=De(u)),null!=h.from&&(r=De(u))),u.markedSpans=yn(u.markedSpans,h),null==h.from&&this.collapsed&&!D(this.doc,u)&&e&&we(u,Bn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var d=0;d<this.lines.length;++d){var m=c(this.lines[d]),A=ge(m);A>e.display.maxLineLength&&(e.display.maxLine=m,e.display.maxLineLength=A,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&vr(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Za(e.doc)),e&&Jt(e,"markerCleared",e,this,r,i),t&&An(e),this.parent&&this.parent.clear()}},cn.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,r,i=0;i<this.lines.length;++i){var a=this.lines[i],u=mn(a.markedSpans,this);if(null!=u.from&&(n=ve(t?a:De(a),u.from),-1==e))return n;if(null!=u.to&&(r=ve(t?a:De(a),u.to),1==e))return r}return n&&{from:n,to:r}},cn.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;!t||!r||Lr(r,function(){var i=t.line,a=De(t.line),u=vo(r,a);if(u&&(la(u),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!D(n.doc,i)&&null!=n.height){var h=n.height;n.height=null;var d=ui(n)-h;d&&we(i,i.height+d)}Jt(r,"markerChanged",r,e)})},cn.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||-1==Ae(t.maybeHiddenMarkers,this))&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},cn.prototype.detachLine=function(e){if(this.lines.splice(Ae(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},ct(cn);var Si=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function rl(e){return e.findMarks(ve(e.first,0),e.clipPos(ve(e.lastLine())),function(t){return t.parent})}function Cs(e){for(var t=function(r){var i=e[r],a=[i.primary.doc];fn(i.primary.doc,function(d){return a.push(d)});for(var u=0;u<i.markers.length;u++){var h=i.markers[u];-1==Ae(a,h.doc)&&(h.parent=null,i.markers.splice(u--,1))}},n=0;n<e.length;n++)t(n)}Si.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Jt(this,"clear")}},Si.prototype.find=function(e,t){return this.primary.find(e,t)},ct(Si);var ws=0,gr=function(e,t,n,r,i){if(!(this instanceof gr))return new gr(e,t,n,r,i);null==n&&(n=0),Ci.call(this,[new bi([new ye("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var a=ve(n,0);this.sel=sn(a),this.history=new Ji(null),this.id=++ws,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Ro(this,{from:a,to:a,text:e}),or(this,sn(a),ne)};gr.prototype=It(Ci.prototype,{constructor:gr,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=le(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:qt(function(e){var t=ve(this.first,0),n=this.first+this.size-1;zn(this,{from:t,to:ve(n,me(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&hi(this.cm,0,0),or(this,sn(t),ne)}),replaceRange:function(e,t,n,r){Kn(this,e,t=Se(this,t),n=n?Se(this,n):t,r)},getRange:function(e,t,n){var r=H(this,Se(this,e),Se(this,t));return!1===n?r:r.join(""===n?"":n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(_t(this,e))return me(this,e)},getLineNumber:function(e){return De(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=me(this,e)),c(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Se(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:qt(function(e,t,n){Ua(this,Se(this,"number"==typeof e?ve(e,t||0):e),null,n)}),setSelection:qt(function(e,t,n){Ua(this,Se(this,e),Se(this,t||e),n)}),extendSelection:qt(function(e,t,n){qi(this,Se(this,e),t&&Se(this,t),n)}),extendSelections:qt(function(e,t){Wa(this,ft(this,e),t)}),extendSelectionsBy:qt(function(e,t){Wa(this,ft(this,Ct(this.sel.ranges,e)),t)}),setSelections:qt(function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new dt(Se(this,e[i].anchor),Se(this,e[i].head||e[i].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),or(this,Rr(this.cm,r,t),n)}}),addSelection:qt(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new dt(Se(this,e),Se(this,t||e))),or(this,Rr(this.cm,r,r.length-1),n)}),getSelection:function(e){for(var n,t=this.sel.ranges,r=0;r<t.length;r++){var i=H(this,t[r].from(),t[r].to());n=n?n.concat(i):i}return!1===e?n:n.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=H(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:qt(function(e,t,n){for(var r=[],i=this.sel,a=0;a<i.ranges.length;a++){var u=i.ranges[a];r[a]={from:u.from(),to:u.to(),text:this.splitLines(e[a]),origin:n}}for(var h=t&&"end"!=t&&function(e,t,n){for(var r=[],i=ve(e.first,0),a=i,u=0;u<t.length;u++){var h=t[u],d=Oa(h.from,i,a),m=Oa(un(h),i,a);if(i=h.to,a=m,"around"==n){var A=e.sel.ranges[u],N=Re(A.head,A.anchor)<0;r[u]=new dt(N?m:d,N?d:m)}else r[u]=new dt(d,d)}return new Mr(r,e.sel.primIndex)}(this,r,t),d=r.length-1;d>=0;d--)zn(this,r[d]);h?za(this,h):this.cm&&Hn(this.cm)}),undo:qt(function(){$i(this,"undo")}),redo:qt(function(){$i(this,"redo")}),undoSelection:qt(function(){$i(this,"undo",!0)}),redoSelection:qt(function(){$i(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new Ji(this.history),fn(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Wn(this.history.done),undone:Wn(this.history.undone)}},setHistory:function(e){var t=this.history=new Ji(this.history);t.done=Wn(e.done.slice(0),null,!0),t.undone=Wn(e.undone.slice(0),null,!0)},setGutterMarker:qt(function(e,t,n){return ki(this,e,"gutter",function(r){var i=r.gutterMarkers||(r.gutterMarkers={});return i[t]=n,!n&&nr(i)&&(r.gutterMarkers=null),!0})}),clearGutter:qt(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&ki(t,n,"gutter",function(){return n.gutterMarkers[e]=null,nr(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!(_t(this,e)&&(t=e,e=me(this,e))))return null}else if(null==(t=De(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:qt(function(e,t,n){return ki(this,e,"gutter"==t?"gutter":"class",function(r){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(r[i]){if(b(n).test(r[i]))return!1;r[i]+=" "+n}else r[i]=n;return!0})}),removeLineClass:qt(function(e,t,n){return ki(this,e,"gutter"==t?"gutter":"class",function(r){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",a=r[i];if(!a)return!1;if(null==n)r[i]=null;else{var u=a.match(b(n));if(!u)return!1;var h=u.index+u[0].length;r[i]=a.slice(0,u.index)+(u.index&&h!=a.length?" ":"")+a.slice(h)||null}return!0})}),addLineWidget:qt(function(e,t,n){return function(e,t,n,r){var i=new wi(e,n,r),a=e.cm;return a&&i.noHScroll&&(a.display.alignWidgets=!0),ki(e,t,"widget",function(u){var h=u.widgets||(u.widgets=[]);if(null==i.insertAt?h.push(i):h.splice(Math.min(h.length,Math.max(0,i.insertAt)),0,i),i.line=u,a&&!D(e,u)){var d=Z(u)<e.scrollTop;we(u,u.height+ui(i)),d&&Mo(a,i.height),a.curOp.forceUpdate=!0}return!0}),a&&Jt(a,"lineWidgetAdded",a,i,"number"==typeof t?t:De(t)),i}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Zn(this,Se(this,e),Se(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Zn(this,e=Se(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=me(this,(e=Se(this,e)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=Se(this,e),t=Se(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(a){var u=a.markedSpans;if(u)for(var h=0;h<u.length;h++){var d=u[h];!(null!=d.to&&i==e.line&&e.ch>=d.to||null==d.from&&i!=e.line||null!=d.from&&i==t.line&&d.from>=t.ch)&&(!n||n(d.marker))&&r.push(d.marker.parent||d.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var a=i.text.length+r;if(a>e)return t=e,!0;e-=a,++n}),Se(this,ve(n,t))},indexFromPos:function(e){var t=(e=Se(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(r){t+=r.text.length+n}),t},copy:function(e){var t=new gr(le(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new gr(le(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),a=e.clipPos(i.from),u=e.clipPos(i.to);if(Re(a,u)){var h=Zn(e,a,u,r.primary,r.primary.type);r.markers.push(h),h.parent=r}}}(r,rl(this)),r},unlinkDoc:function(e){if(e instanceof St&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Cs(rl(this));break}if(e.history==this.history){var r=[e.id];fn(e,function(i){return r.push(i.id)},!0),e.history=new Ji(null),e.history.done=Wn(this.history.done,r),e.history.undone=Wn(this.history.undone,r)}},iterLinkedDocs:function(e){fn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Jr(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:qt(function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&function(e){Lr(e,function(){Ba(e),vr(e)})}(this.cm))})}),gr.prototype.eachLine=gr.prototype.iter;var nl=0;function Ss(e){var t=this;if(il(t),!at(t,e)&&!Xr(t.display,e)){kt(e),f&&(nl=+new Date);var n=Cn(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,a=Array(i),u=0,h=function(){++u==i&&Qt(t,function(){var J={from:n=Se(t.doc,n),to:n,text:t.doc.splitLines(a.filter(function(de){return null!=de}).join(t.doc.lineSeparator())),origin:"paste"};zn(t.doc,J),za(t.doc,sn(Se(t.doc,n),Se(t.doc,un(J))))})()},d=function(J,de){if(t.options.allowDropFileTypes&&-1==Ae(t.options.allowDropFileTypes,J.type))h();else{var Ce=new FileReader;Ce.onerror=function(){return h()},Ce.onload=function(){var Te=Ce.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Te)||(a[de]=Te),h()},Ce.readAsText(J)}},m=0;m<r.length;m++)d(r[m],m);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var A=e.dataTransfer.getData("Text");if(A){var N;if(t.state.draggingText&&!t.state.draggingText.copy&&(N=t.listSelections()),Xi(t.doc,sn(n,n)),N)for(var $=0;$<N.length;++$)Kn(t.doc,"",N[$].anchor,N[$].head,"drag");t.replaceSelection(A,"around","paste"),t.display.input.focus()}}catch(J){}}}}function il(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function ol(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<t.length;r++){var i=t[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation(function(){for(var a=0;a<n.length;a++)e(n[a])})}}var al=!1;function As(){al||(function(){var e;Ke(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,ol(Es)},100))}),Ke(window,"blur",function(){return ol(Pn)})}(),al=!0)}function Es(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var hn={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Li=0;Li<10;Li++)hn[Li+48]=hn[Li+96]=String(Li);for(var eo=65;eo<=90;eo++)hn[eo]=String.fromCharCode(eo);for(var Ti=1;Ti<=12;Ti++)hn[Ti+111]=hn[Ti+63235]="F"+Ti;var $r={};function Ds(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var n,r,i,a,u=0;u<t.length-1;u++){var h=t[u];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))n=!0;else if(/^(c|ctrl|control)$/i.test(h))r=!0;else{if(!/^s(hift)?$/i.test(h))throw new Error("Unrecognized modifier name: "+h);i=!0}}return n&&(e="Alt-"+e),r&&(e="Ctrl-"+e),a&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function Fs(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=Ct(n.split(" "),Ds),a=0;a<i.length;a++){var u=void 0,h=void 0;a==i.length-1?(h=i.join(" "),u=r):(h=i.slice(0,a+1).join(" "),u="...");var d=t[h];if(d){if(d!=u)throw new Error("Inconsistent bindings for "+h)}else t[h]=u}delete e[n]}for(var m in t)e[m]=t[m];return e}function Gn(e,t,n,r){var i=(t=to(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Gn(e,t.fallthrough,n,r);for(var a=0;a<t.fallthrough.length;a++){var u=Gn(e,t.fallthrough[a],n,r);if(u)return u}}}function ll(e){var t="string"==typeof e?e:hn[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function sl(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(M?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(M?t.ctrlKey:t.metaKey)&&"Mod"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function ul(e,t){if(q&&34==e.keyCode&&e.char)return!1;var n=hn[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),sl(n,e,t))}function to(e){return"string"==typeof e?$r[e]:e}function jn(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var a=t(n[i]);r.length&&Re(a.from,_e(r).to)<=0;){var u=r.pop();if(Re(u.from,a.from)<0){a.from=u.from;break}}r.push(a)}Lr(e,function(){for(var h=r.length-1;h>=0;h--)Kn(e.doc,"",r[h].from,r[h].to,"+delete");Hn(e)})}function Wo(e,t,n){var r=Kt(e.text,t+n,n);return r<0||r>e.text.length?null:r}function Uo(e,t,n){var r=Wo(e,t.ch,n);return null==r?null:new ve(t.line,r,n<0?"after":"before")}function zo(e,t,n,r,i){if(e){"rtl"==t.doc.direction&&(i=-i);var a=it(n,t.doc.direction);if(a){var m,u=i<0?_e(a):a[0],d=i<0==(1==u.level)?"after":"before";if(u.level>0||"rtl"==t.doc.direction){var A=Nn(t,n),N=Zr(t,A,m=i<0?n.text.length-1:0).top;m=Ar(function($){return Zr(t,A,$).top==N},i<0==(1==u.level)?u.from:u.to-1,m),"before"==d&&(m=Wo(n,m,1))}else m=i<0?u.to:u.from;return new ve(r,m,d)}}return new ve(r,i<0?n.text.length:0,i<0?"before":"after")}$r.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},$r.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},$r.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},$r.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},$r.default=T?$r.macDefault:$r.pcDefault;var Ai={selectAll:Ya,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),ne)},killLine:function(e){return jn(e,function(t){if(t.empty()){var n=me(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:ve(t.head.line+1,0)}:{from:t.head,to:ve(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return jn(e,function(t){return{from:ve(t.from().line,0),to:Se(e.doc,ve(t.to().line+1,0))}})},delLineLeft:function(e){return jn(e,function(t){return{from:ve(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return jn(e,function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}})},delWrappedLineRight:function(e){return jn(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ve(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ve(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return fl(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return cl(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function(e,t){var n=me(e.doc,t),r=function(e){for(var t;t=o(e);)e=t.find(1,!0).line;return e}(n);return r!=n&&(t=De(r)),zo(!0,e,n,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},Oe)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},Oe)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?cl(e,t.head):r},Oe)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var a=n[i].from(),u=O(e.getLine(a.line),a.ch,r);t.push(Ye(r-u%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Lr(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,a=me(e.doc,i.line).text;if(a)if(i.ch==a.length&&(i=new ve(i.line,i.ch-1)),i.ch>0)i=new ve(i.line,i.ch+1),e.replaceRange(a.charAt(i.ch-1)+a.charAt(i.ch-2),ve(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var u=me(e.doc,i.line-1).text;u&&(i=new ve(i.line,1),e.replaceRange(a.charAt(0)+e.doc.lineSeparator()+u.charAt(u.length-1),ve(i.line-1,u.length-1),i,"+transpose"))}n.push(new dt(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){return Lr(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Hn(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function fl(e,t){var n=me(e.doc,t),r=c(n);return r!=n&&(t=De(r)),zo(!0,e,r,t,1)}function cl(e,t){var n=fl(e,t.line),r=me(e.doc,n.line),i=it(r,e.doc.direction);if(!i||0==i[0].level){var a=Math.max(n.ch,r.text.search(/\S/));return ve(n.line,t.line==n.line&&t.ch<=a&&t.ch?0:a,n.sticky)}return n}function ro(e,t,n){if("string"==typeof t&&!(t=Ai[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=Y}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}var Bs=new C;function Mi(e,t,n,r){var i=e.state.keySeq;if(i){if(ll(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Bs.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),hl(e,i+" "+t,n,r))return!0}return hl(e,t,n,r)}function hl(e,t,n,r){var i=function(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Gn(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Gn(t,e.options.extraKeys,n,e)||Gn(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&Jt(e,"keyHandled",e,t,n),("handled"==i||"multi"==i)&&(kt(n),So(e)),!!i}function dl(e,t){var n=ul(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?Mi(e,"Shift-"+n,t,function(r){return ro(e,r,!0)})||Mi(e,n,t,function(r){if("string"==typeof r?/^go[A-Z]/.test(r):r.motion)return ro(e,r)}):Mi(e,n,t,function(r){return ro(e,r)}))}var Ko=null;function pl(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=fe(),at(t,e)))){f&&E<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=dl(t,e);q&&(Ko=r?n:null,!r&&88==n&&!pn&&(T?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),k&&!T&&!r&&46==n&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==n&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&function(e){var t=e.display.lineDiv;function n(r){(18==r.keyCode||!r.altKey)&&(U(t,"CodeMirror-crosshair"),pt(document,"keyup",n),pt(document,"mouseover",n))}he(t,"CodeMirror-crosshair"),Ke(document,"keyup",n),Ke(document,"mouseover",n)}(t)}}function vl(e){16==e.keyCode&&(this.doc.sel.shift=!1),at(this,e)}function gl(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||Xr(t.display,e)||at(t,e)||e.ctrlKey&&!e.altKey||T&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(q&&n==Ko)return Ko=null,void kt(e);if(!q||e.which&&!(e.which<10)||!dl(t,e)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(e,t,n){return Mi(e,"'"+n+"'",t,function(r){return ro(e,r,!0)})}(t,e,i)||t.display.input.onKeyPress(e))}}}var Ei,Di,Zo=function(e,t,n){this.time=e,this.pos=t,this.button=n};function ml(e){var t=this,n=t.display;if(!(at(t,e)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=e.shiftKey,Xr(n,e))return void(B||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100)));if(!Go(t,e)){var r=Cn(t,e),i=tn(e),a=r?function(e,t){var n=+new Date;return Di&&Di.compare(n,e,t)?(Ei=Di=null,"triple"):Ei&&Ei.compare(n,e,t)?(Di=new Zo(n,e,t),Ei=null,"double"):(Ei=new Zo(n,e,t),Di=null,"single")}(r,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),(!r||!function(e,t,n,r,i){var a="Click";return"double"==r?a="Double"+a:"triple"==r&&(a="Triple"+a),Mi(e,sl(a=(1==t?"Left":2==t?"Middle":"Right")+a,i),i,function(u){if("string"==typeof u&&(u=Ai[u]),!u)return!1;var h=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),h=u(e,n)!=Y}finally{e.state.suppressEdits=!1}return h})}(t,i,r,a,e))&&(1==i?r?function(e,t,n,r){f?setTimeout(ze(ya,e),0):e.curOp.focus=fe();var u,i=function(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};return null==i.unit&&(i.unit=(W?n.shiftKey&&n.metaKey:n.altKey)?"rectangle":"single"==t?"char":"double"==t?"word":"line"),(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=T?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(T?n.altKey:n.ctrlKey)),i}(e,n,r),a=e.doc.sel;e.options.dragDrop&&_r&&!e.isReadOnly()&&"single"==n&&(u=a.contains(t))>-1&&(Re((u=a.ranges[u]).from(),t)<0||t.xRel>0)&&(Re(u.to(),t)>0||t.xRel<0)?function(e,t,n,r){var i=e.display,a=!1,u=Qt(e,function(m){B&&(i.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Lo(e)),pt(i.wrapper.ownerDocument,"mouseup",u),pt(i.wrapper.ownerDocument,"mousemove",h),pt(i.scroller,"dragstart",d),pt(i.scroller,"drop",u),a||(kt(m),r.addNew||qi(e.doc,n,null,null,r.extend),B&&!z||f&&9==E?setTimeout(function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()},20):i.input.focus())}),h=function(m){a=a||Math.abs(t.clientX-m.clientX)+Math.abs(t.clientY-m.clientY)>=10},d=function(){return a=!0};B&&(i.scroller.draggable=!0),e.state.draggingText=u,u.copy=!r.moveOnDrag,Ke(i.wrapper.ownerDocument,"mouseup",u),Ke(i.wrapper.ownerDocument,"mousemove",h),Ke(i.scroller,"dragstart",d),Ke(i.scroller,"drop",u),e.state.delayingBlurEvent=!0,setTimeout(function(){return i.input.focus()},20),i.scroller.dragDrop&&i.scroller.dragDrop()}(e,r,t,i):function(e,t,n,r){f&&Lo(e);var i=e.display,a=e.doc;kt(t);var u,h,d=a.sel,m=d.ranges;if(r.addNew&&!r.extend?(h=a.sel.contains(n),u=h>-1?m[h]:new dt(n,n)):(u=a.sel.primary(),h=a.sel.primIndex),"rectangle"==r.unit)r.addNew||(u=new dt(n,n)),n=Cn(e,t,!0,!0),h=-1;else{var A=yl(e,n,r.unit);u=r.extend?Ho(u,A.anchor,A.head,r.extend):A}r.addNew?-1==h?(h=m.length,or(a,Rr(e,m.concat([u]),h),{scroll:!1,origin:"*mouse"})):m.length>1&&m[h].empty()&&"char"==r.unit&&!r.extend?(or(a,Rr(e,m.slice(0,h).concat(m.slice(h+1)),0),{scroll:!1,origin:"*mouse"}),d=a.sel):_o(a,h,u,V):(h=0,or(a,new Mr([u],0),V),d=a.sel);var N=n;function $(Ne){if(0!=Re(N,Ne))if(N=Ne,"rectangle"==r.unit){for(var He=[],je=e.options.tabSize,Ze=O(me(a,n.line).text,n.ch,je),nt=O(me(a,Ne.line).text,Ne.ch,je),yt=Math.min(Ze,nt),Xt=Math.max(Ze,nt),Et=Math.min(n.line,Ne.line),Tr=Math.min(e.lastLine(),Math.max(n.line,Ne.line));Et<=Tr;Et++){var mr=me(a,Et).text,Bt=Qe(mr,yt,je);yt==Xt?He.push(new dt(ve(Et,Bt),ve(Et,Bt))):mr.length>Bt&&He.push(new dt(ve(Et,Bt),ve(Et,Qe(mr,Xt,je))))}He.length||He.push(new dt(n,n)),or(a,Rr(e,d.ranges.slice(0,h).concat(He),h),{origin:"*mouse",scroll:!1}),e.scrollIntoView(Ne)}else{var Rt,yr=u,rr=yl(e,Ne,r.unit),zt=yr.anchor;Re(rr.anchor,zt)>0?(Rt=rr.head,zt=oe(yr.from(),rr.anchor)):(Rt=rr.anchor,zt=F(yr.to(),rr.head));var Ot=d.ranges.slice(0);Ot[h]=function(e,t){var n=t.anchor,r=t.head,i=me(e.doc,n.line);if(0==Re(n,r)&&n.sticky==r.sticky)return t;var a=it(i);if(!a)return t;var u=xt(a,n.ch,n.sticky),h=a[u];if(h.from!=n.ch&&h.to!=n.ch)return t;var m,d=u+(h.from==n.ch==(1!=h.level)?0:1);if(0==d||d==a.length)return t;if(r.line!=n.line)m=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var A=xt(a,r.ch,r.sticky),N=A-u||(r.ch-n.ch)*(1==h.level?-1:1);m=A==d-1||A==d?N<0:N>0}var $=a[d+(m?-1:0)],J=m==(1==$.level),de=J?$.from:$.to,Ce=J?"after":"before";return n.ch==de&&n.sticky==Ce?t:new dt(new ve(n.line,de,Ce),r)}(e,new dt(Se(a,zt),Rt)),or(a,Rr(e,Ot,h),V)}}var J=i.wrapper.getBoundingClientRect(),de=0;function Ce(Ne){var He=++de,je=Cn(e,Ne,!0,"rectangle"==r.unit);if(je)if(0!=Re(je,N)){e.curOp.focus=fe(),$(je);var Ze=Zi(i,a);(je.line>=Ze.to||je.line<Ze.from)&&setTimeout(Qt(e,function(){de==He&&Ce(Ne)}),150)}else{var nt=Ne.clientY<J.top?-20:Ne.clientY>J.bottom?20:0;nt&&setTimeout(Qt(e,function(){de==He&&(i.scroller.scrollTop+=nt,Ce(Ne))}),50)}}function Te(Ne){e.state.selectingText=!1,de=1/0,Ne&&(kt(Ne),i.input.focus()),pt(i.wrapper.ownerDocument,"mousemove",Ie),pt(i.wrapper.ownerDocument,"mouseup",Be),a.history.lastSelOrigin=null}var Ie=Qt(e,function(Ne){0!==Ne.buttons&&tn(Ne)?Ce(Ne):Te(Ne)}),Be=Qt(e,Te);e.state.selectingText=Be,Ke(i.wrapper.ownerDocument,"mousemove",Ie),Ke(i.wrapper.ownerDocument,"mouseup",Be)}(e,r,t,i)}(t,r,a,e):$t(e)==n.scroller&&kt(e):2==i?(r&&qi(t.doc,r),setTimeout(function(){return n.input.focus()},20)):3==i&&(P?t.display.input.onContextMenu(e):Lo(t)))}}}function yl(e,t,n){if("char"==n)return new dt(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new dt(ve(t.line,0),Se(e.doc,ve(t.line+1,0)));var r=n(e,t);return new dt(r.from,r.to)}function xl(e,t,n,r){var i,a;if(t.touches)i=t.touches[0].clientX,a=t.touches[0].clientY;else try{i=t.clientX,a=t.clientY}catch($){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&kt(t);var u=e.display,h=u.lineDiv.getBoundingClientRect();if(a>h.bottom||!Gt(e,n))return jr(t);a-=h.top-u.viewOffset;for(var d=0;d<e.display.gutterSpecs.length;++d){var m=u.gutters.childNodes[d];if(m&&m.getBoundingClientRect().right>=i)return Xe(e,n,e,tt(e.doc,a),e.display.gutterSpecs[d].className,t),jr(t)}}function Go(e,t){return xl(e,t,"gutterClick",!0)}function kl(e,t){Xr(e.display,t)||function(e,t){return!!Gt(e,"gutterContextMenu")&&xl(e,t,"gutterContextMenu",!1)}(e,t)||at(e,t,"contextmenu")||P||e.display.input.onContextMenu(t)}function bl(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),fi(e)}Zo.prototype.compare=function(e,t,n){return this.time+400>e&&0==Re(t,this.pos)&&n==this.button};var Yn={toString:function(){return"CodeMirror.Init"}},Cl={},no={};function Js(e,t,n){if(!t!=!(n&&n!=Yn)){var i=e.display.dragFunctions,a=t?Ke:pt;a(e.display.scroller,"dragstart",i.start),a(e.display.scroller,"dragenter",i.enter),a(e.display.scroller,"dragover",i.over),a(e.display.scroller,"dragleave",i.leave),a(e.display.scroller,"drop",i.drop)}}function Qs(e){e.options.lineWrapping?(he(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(U(e.display.wrapper,"CodeMirror-wrap"),Le(e)),Co(e),vr(e),fi(e),setTimeout(function(){return _n(e)},100)}function St(e,t){var n=this;if(!(this instanceof St))return new St(e,t);this.options=t=t?Ge(t):{},Ge(Cl,t,!1);var r=t.value;"string"==typeof r?r=new gr(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var i=new St.inputStyles[t.inputStyle](this),a=this.display=new ss(e,r,i,t);for(var u in a.wrapper.CodeMirror=this,bl(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Sa(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new C,keySeq:null,specialChars:null},t.autofocus&&!ie&&a.input.focus(),f&&E<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function(e){var t=e.display;Ke(t.scroller,"mousedown",Qt(e,ml)),Ke(t.scroller,"dblclick",f&&E<11?Qt(e,function(d){if(!at(e,d)){var m=Cn(e,d);if(m&&!Go(e,d)&&!Xr(e.display,d)){kt(d);var A=e.findWordAt(m);qi(e.doc,A.anchor,A.head)}}}):function(d){return at(e,d)||kt(d)}),Ke(t.scroller,"contextmenu",function(d){return kl(e,d)}),Ke(t.input.getField(),"contextmenu",function(d){t.scroller.contains(d.target)||kl(e,d)});var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),(r=t.activeTouch).end=+new Date)}function a(d){if(1!=d.touches.length)return!1;var m=d.touches[0];return m.radiusX<=1&&m.radiusY<=1}function u(d,m){if(null==m.left)return!0;var A=m.left-d.left,N=m.top-d.top;return A*A+N*N>400}Ke(t.scroller,"touchstart",function(d){if(!at(e,d)&&!a(d)&&!Go(e,d)){t.input.ensurePolled(),clearTimeout(n);var m=+new Date;t.activeTouch={start:m,moved:!1,prev:m-r.end<=300?r:null},1==d.touches.length&&(t.activeTouch.left=d.touches[0].pageX,t.activeTouch.top=d.touches[0].pageY)}}),Ke(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),Ke(t.scroller,"touchend",function(d){var m=t.activeTouch;if(m&&!Xr(t,d)&&null!=m.left&&!m.moved&&new Date-m.start<300){var N,A=e.coordsChar(t.activeTouch,"page");N=!m.prev||u(m,m.prev)?new dt(A,A):!m.prev.prev||u(m,m.prev.prev)?e.findWordAt(A):new dt(ve(A.line,0),Se(e.doc,ve(A.line+1,0))),e.setSelection(N.anchor,N.head),e.focus(),kt(d)}i()}),Ke(t.scroller,"touchcancel",i),Ke(t.scroller,"scroll",function(){t.scroller.clientHeight&&(di(e,t.scroller.scrollTop),Sn(e,t.scroller.scrollLeft,!0),Xe(e,"scroll",e))}),Ke(t.scroller,"mousewheel",function(d){return Da(e,d)}),Ke(t.scroller,"DOMMouseScroll",function(d){return Da(e,d)}),Ke(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(d){at(e,d)||Cr(d)},over:function(d){at(e,d)||(function(e,t){var n=Cn(e,t);if(n){var r=document.createDocumentFragment();wo(e,n,r),e.display.dragCursor||(e.display.dragCursor=ee("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),K(e.display.dragCursor,r)}}(e,d),Cr(d))},start:function(d){return function(e,t){if(f&&(!e.state.draggingText||+new Date-nl<100))Cr(t);else if(!at(e,t)&&!Xr(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!z)){var n=ee("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",q&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),q&&n.parentNode.removeChild(n)}}(e,d)},drop:Qt(e,Ss),leave:function(d){at(e,d)||il(e)}};var h=t.input.getField();Ke(h,"keyup",function(d){return vl.call(e,d)}),Ke(h,"keydown",Qt(e,pl)),Ke(h,"keypress",Qt(e,gl)),Ke(h,"focus",function(d){return To(e,d)}),Ke(h,"blur",function(d){return Pn(e,d)})}(this),As(),Tn(this),this.curOp.forceUpdate=!0,Na(this,r),t.autofocus&&!ie||this.hasFocus()?setTimeout(function(){n.hasFocus()&&!n.state.focused&&To(n)},20):Pn(this),no)no.hasOwnProperty(u)&&no[u](this,t[u],Yn);Aa(this),t.finishInit&&t.finishInit(this);for(var h=0;h<jo.length;++h)jo[h](this);An(this),B&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}St.defaults=Cl,St.optionHandlers=no;var jo=[];function Fi(e,t,n,r){var a,i=e.doc;null==n&&(n="add"),"smart"==n&&(i.mode.indent?a=gn(e,t).state:n="prev");var u=e.options.tabSize,h=me(i,t),d=O(h.text,null,u);h.stateAfter&&(h.stateAfter=null);var A,m=h.text.match(/^\s*/)[0];if(r||/\S/.test(h.text)){if("smart"==n&&((A=i.mode.indent(a,h.text.slice(m.length),h.text))==Y||A>150)){if(!r)return;n="prev"}}else A=0,n="not";"prev"==n?A=t>i.first?O(me(i,t-1).text,null,u):0:"add"==n?A=d+e.options.indentUnit:"subtract"==n?A=d-e.options.indentUnit:"number"==typeof n&&(A=d+n),A=Math.max(0,A);var N="",$=0;if(e.options.indentWithTabs)for(var J=Math.floor(A/u);J;--J)$+=u,N+="\t";if($<A&&(N+=Ye(A-$)),N!=m)return Kn(i,N,ve(t,0),ve(t,m.length),"+input"),h.stateAfter=null,!0;for(var de=0;de<i.sel.ranges.length;de++){var Ce=i.sel.ranges[de];if(Ce.head.line==t&&Ce.head.ch<m.length){var Te=ve(t,m.length);_o(i,de,new dt(Te,Te));break}}}St.defineInitHook=function(e){return jo.push(e)};var Pr=null;function io(e){Pr=e}function Yo(e,t,n,r,i){var a=e.doc;e.display.shift=!1,r||(r=a.sel);var u=+new Date-200,h="paste"==i||e.state.pasteIncoming>u,d=Jr(t),m=null;if(h&&r.ranges.length>1)if(Pr&&Pr.text.join("\n")==t){if(r.ranges.length%Pr.text.length==0){m=[];for(var A=0;A<Pr.text.length;A++)m.push(a.splitLines(Pr.text[A]))}}else d.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(m=Ct(d,function(Ie){return[Ie]}));for(var N=e.curOp.updateInput,$=r.ranges.length-1;$>=0;$--){var J=r.ranges[$],de=J.from(),Ce=J.to();J.empty()&&(n&&n>0?de=ve(de.line,de.ch-n):e.state.overwrite&&!h?Ce=ve(Ce.line,Math.min(me(a,Ce.line).text.length,Ce.ch+_e(d).length)):h&&Pr&&Pr.lineWise&&Pr.text.join("\n")==d.join("\n")&&(de=Ce=ve(de.line,0)));var Te={from:de,to:Ce,text:m?m[$%m.length]:d,origin:i||(h?"paste":e.state.cutIncoming>u?"cut":"+input")};zn(e.doc,Te),Jt(e,"inputRead",e,Te)}t&&!h&&Sl(e,t),Hn(e),e.curOp.updateInput<2&&(e.curOp.updateInput=N),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function wl(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&Lr(t,function(){return Yo(t,n,0,null,"paste")}),!0}function Sl(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var a=e.getModeAt(i.head),u=!1;if(a.electricChars){for(var h=0;h<a.electricChars.length;h++)if(t.indexOf(a.electricChars.charAt(h))>-1){u=Fi(e,i.head.line,"smart");break}}else a.electricInput&&a.electricInput.test(me(e.doc,i.head.line).text.slice(0,i.head.ch))&&(u=Fi(e,i.head.line,"smart"));u&&Jt(e,"electricInput",e,i.head.line)}}}function Ll(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,a={anchor:ve(i,0),head:ve(i+1,0)};n.push(a),t.push(e.getRange(a.anchor,a.head))}return{text:t,ranges:n}}function Tl(e,t,n,r){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",r?"":"off"),e.setAttribute("spellcheck",!!t)}function Al(){var e=ee("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=ee("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return B?e.style.width="1000px":e.setAttribute("wrap","off"),Fe&&(e.style.border="1px solid black"),Tl(e),t}function Jo(e,t,n,r,i){var a=t,u=n,h=me(e,t.line),d=i&&"rtl"==e.direction?-n:n;function A(Be){var Ne;if("codepoint"==r){var He=h.text.charCodeAt(t.ch+(n>0?0:-1));Ne=isNaN(He)?null:new ve(t.line,Math.max(0,Math.min(h.text.length,t.ch+n*((n>0?He>=55296&&He<56320:He>=56320&&He<57343)?2:1))),-n)}else Ne=i?function(e,t,n,r){var i=it(t,e.doc.direction);if(!i)return Uo(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var a=xt(i,n.ch,n.sticky),u=i[a];if("ltr"==e.doc.direction&&u.level%2==0&&(r>0?u.to>n.ch:u.from<n.ch))return Uo(t,n,r);var d,h=function(Ie,Be){return Wo(t,Ie instanceof ve?Ie.ch:Ie,Be)},m=function(Ie){return e.options.lineWrapping?(d=d||Nn(e,t),pa(e,t,d,Ie)):{begin:0,end:t.text.length}},A=m("before"==n.sticky?h(n,-1):n.ch);if("rtl"==e.doc.direction||1==u.level){var N=1==u.level==r<0,$=h(n,N?1:-1);if(null!=$&&(N?$<=u.to&&$<=A.end:$>=u.from&&$>=A.begin))return new ve(n.line,$,N?"before":"after")}var de=function(Ie,Be,Ne){for(;Ie>=0&&Ie<i.length;Ie+=Be){var je=i[Ie],Ze=Be>0==(1!=je.level),nt=Ze?Ne.begin:h(Ne.end,-1);if(je.from<=nt&&nt<je.to||(nt=Ze?je.from:h(je.to,-1),Ne.begin<=nt&&nt<Ne.end))return yt=nt,Ze?new ve(n.line,h(yt,1),"before"):new ve(n.line,yt,"after")}var yt},Ce=de(a+r,r,A);if(Ce)return Ce;var Te=r>0?A.end:h(A.begin,-1);return null==Te||r>0&&Te==t.text.length||!(Ce=de(r>0?0:i.length-1,r,m(Te)))?null:Ce}(e.cm,h,t,n):Uo(h,t,n);if(null==Ne){if(Be||!function(){var Be=t.line+d;return!(Be<e.first||Be>=e.first+e.size)&&(t=new ve(Be,t.ch,t.sticky),h=me(e,Be))}())return!1;t=zo(i,e.cm,h,t.line,d)}else t=Ne;return!0}if("char"==r||"codepoint"==r)A();else if("column"==r)A(!0);else if("word"==r||"group"==r)for(var N=null,$="group"==r,J=e.cm&&e.cm.getHelper(t,"wordChars"),de=!0;!(n<0)||A(!de);de=!1){var Ce=h.text.charAt(t.ch)||"\n",Te=lr(Ce,J)?"w":$&&"\n"==Ce?"n":!$||/\s/.test(Ce)?null:"p";if($&&!de&&!Te&&(Te="s"),N&&N!=Te){n<0&&(n=1,A(),t.sticky="after");break}if(Te&&(N=Te),n>0&&!A(!de))break}var Ie=Vi(e,t,a,u,!0);return wt(a,Ie)&&(Ie.hitSide=!0),Ie}function Ml(e,t,n,r){var u,m,i=e.doc,a=t.left;if("page"==r){var h=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),d=Math.max(h-.5*Bn(e.display),3);u=(n>0?t.bottom:t.top)+n*d}else"line"==r&&(u=n>0?t.bottom+3:t.top-3);for(;(m=yo(e,a,u)).outside;){if(n<0?u<=0:u>=i.height){m.hitSide=!0;break}u+=5*n}return m}var vt=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new C,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function El(e,t){var n=vo(e,t.line);if(!n||n.hidden)return null;var r=me(e.doc,t.line),i=na(n,r,t.line),a=it(r,e.doc.direction),u="left";a&&(u=xt(a,t.ch)%2?"right":"left");var d=aa(i.map,t.ch,u);return d.offset="right"==d.collapse?d.end:d.start,d}function Jn(e,t){return t&&(e.bad=!0),e}function oo(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return Jn(e.clipPos(ve(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var a=e.display.view[i];if(a.node==r)return eu(a,t,n)}}function eu(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!x(r,t))return Jn(ve(De(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var a=e.rest?_e(e.rest):e.line;return Jn(ve(De(a),a.text.length),i)}var u=3==t.nodeType?t:null,h=t;for(!u&&1==t.childNodes.length&&3==t.firstChild.nodeType&&(u=t.firstChild,n&&(n=u.nodeValue.length));h.parentNode!=r;)h=h.parentNode;var d=e.measure,m=d.maps;function A(Te,Ie,Be){for(var Ne=-1;Ne<(m?m.length:0);Ne++)for(var He=Ne<0?d.map:m[Ne],je=0;je<He.length;je+=3){var Ze=He[je+2];if(Ze==Te||Ze==Ie){var nt=De(Ne<0?e.line:e.rest[Ne]),yt=He[je]+Be;return(Be<0||Ze!=Te)&&(yt=He[je+(Be?1:0)]),ve(nt,yt)}}}var N=A(u,h,n);if(N)return Jn(N,i);for(var $=h.nextSibling,J=u?u.nodeValue.length-n:0;$;$=$.nextSibling){if(N=A($,$.firstChild,0))return Jn(ve(N.line,N.ch-J),i);J+=$.textContent.length}for(var de=h.previousSibling,Ce=n;de;de=de.previousSibling){if(N=A(de,de.firstChild,-1))return Jn(ve(N.line,N.ch+Ce),i);Ce+=de.textContent.length}}vt.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;function a(h){for(var d=h.target;d;d=d.parentNode){if(d==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(d.className))break}return!1}function u(h){if(a(h)&&!at(r,h)){if(r.somethingSelected())io({lineWise:!1,text:r.getSelections()}),"cut"==h.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var d=Ll(r);io({lineWise:!0,text:d.text}),"cut"==h.type&&r.operation(function(){r.setSelections(d.ranges,0,ne),r.replaceSelection("",null,"cut")})}if(h.clipboardData){h.clipboardData.clearData();var m=Pr.text.join("\n");if(h.clipboardData.setData("Text",m),h.clipboardData.getData("Text")==m)return void h.preventDefault()}var A=Al(),N=A.firstChild;r.display.lineSpace.insertBefore(A,r.display.lineSpace.firstChild),N.value=Pr.text.join("\n");var $=fe();We(N),setTimeout(function(){r.display.lineSpace.removeChild(A),$.focus(),$==i&&n.showPrimarySelection()},50)}}i.contentEditable=!0,Tl(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize),Ke(i,"paste",function(h){!a(h)||at(r,h)||wl(h,r)||E<=11&&setTimeout(Qt(r,function(){return t.updateFromDOM()}),20)}),Ke(i,"compositionstart",function(h){t.composing={data:h.data,done:!1}}),Ke(i,"compositionupdate",function(h){t.composing||(t.composing={data:h.data,done:!1})}),Ke(i,"compositionend",function(h){t.composing&&(h.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),Ke(i,"touchstart",function(){return n.forceCompositionEnd()}),Ke(i,"input",function(){t.composing||t.readFromDOMSoon()}),Ke(i,"copy",u),Ke(i,"cut",u)},vt.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},vt.prototype.prepareSelection=function(){var e=ma(this.cm,!1);return e.focus=fe()==this.div,e},vt.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},vt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},vt.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),r=n.from(),i=n.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||i.line<t.display.viewFrom)e.removeAllRanges();else{var a=oo(t,e.anchorNode,e.anchorOffset),u=oo(t,e.focusNode,e.focusOffset);if(!a||a.bad||!u||u.bad||0!=Re(oe(a,u),r)||0!=Re(F(a,u),i)){var h=t.display.view,d=r.line>=t.display.viewFrom&&El(t,r)||{node:h[0].measure.map[2],offset:0},m=i.line<t.display.viewTo&&El(t,i);if(!m){var A=h[h.length-1].measure,N=A.maps?A.maps[A.maps.length-1]:A.map;m={node:N[N.length-1],offset:N[N.length-2]-N[N.length-3]}}if(!d||!m)return void e.removeAllRanges();var J,$=e.rangeCount&&e.getRangeAt(0);try{J=xe(d.node,d.offset,m.offset,m.node)}catch(de){}J&&(!k&&t.state.focused?(e.collapse(d.node,d.offset),J.collapsed||(e.removeAllRanges(),e.addRange(J))):(e.removeAllRanges(),e.addRange(J)),$&&null==e.anchorNode?e.addRange($):k&&this.startGracePeriod()),this.rememberSelection()}}},vt.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},vt.prototype.showMultipleSelections=function(e){K(this.cm.display.cursorDiv,e.cursors),K(this.cm.display.selectionDiv,e.selection)},vt.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},vt.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return x(this.div,t)},vt.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||fe()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},vt.prototype.blur=function(){this.div.blur()},vt.prototype.getField=function(){return this.div},vt.prototype.supportsTouch=function(){return!0},vt.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):Lr(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function n(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,n))})},vt.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},vt.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(te&&X&&this.cm.display.gutterSpecs.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=oo(t,e.anchorNode,e.anchorOffset),r=oo(t,e.focusNode,e.focusOffset);n&&r&&Lr(t,function(){or(t.doc,sn(n,r),ne),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},vt.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a,u,h,e=this.cm,t=e.display,n=e.doc.sel.primary(),r=n.from(),i=n.to();if(0==r.ch&&r.line>e.firstLine()&&(r=ve(r.line-1,me(e.doc,r.line-1).length)),i.ch==me(e.doc,i.line).text.length&&i.line<e.lastLine()&&(i=ve(i.line+1,0)),r.line<t.viewFrom||i.line>t.viewTo-1)return!1;r.line==t.viewFrom||0==(a=wn(e,r.line))?(u=De(t.view[0].line),h=t.view[0].node):(u=De(t.view[a].line),h=t.view[a-1].node.nextSibling);var m,A,d=wn(e,i.line);if(d==t.view.length-1?(m=t.viewTo-1,A=t.lineDiv.lastChild):(m=De(t.view[d+1].line)-1,A=t.view[d+1].node.previousSibling),!h)return!1;for(var N=e.doc.splitLines(function(e,t,n,r,i){var a="",u=!1,h=e.doc.lineSeparator(),d=!1;function A(){u&&(a+=h,d&&(a+=h),u=d=!1)}function N(J){J&&(A(),a+=J)}function $(J){if(1==J.nodeType){var de=J.getAttribute("cm-text");if(de)return void N(de);var Te,Ce=J.getAttribute("cm-marker");if(Ce){var Ie=e.findMarks(ve(r,0),ve(i+1,0),function(J){return function(de){return de.id==J}}(+Ce));return void(Ie.length&&(Te=Ie[0].find(0))&&N(H(e.doc,Te.from,Te.to).join(h)))}if("false"==J.getAttribute("contenteditable"))return;var Be=/^(pre|div|p|li|table|br)$/i.test(J.nodeName);if(!/^br$/i.test(J.nodeName)&&0==J.textContent.length)return;Be&&A();for(var Ne=0;Ne<J.childNodes.length;Ne++)$(J.childNodes[Ne]);/^(pre|p)$/i.test(J.nodeName)&&(d=!0),Be&&(u=!0)}else 3==J.nodeType&&N(J.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;$(t),t!=n;)t=t.nextSibling,d=!1;return a}(e,h,A,u,m)),$=H(e.doc,ve(u,0),ve(m,me(e.doc,m).text.length));N.length>1&&$.length>1;)if(_e(N)==_e($))N.pop(),$.pop(),m--;else{if(N[0]!=$[0])break;N.shift(),$.shift(),u++}for(var J=0,de=0,Ce=N[0],Te=$[0],Ie=Math.min(Ce.length,Te.length);J<Ie&&Ce.charCodeAt(J)==Te.charCodeAt(J);)++J;for(var Be=_e(N),Ne=_e($),He=Math.min(Be.length-(1==N.length?J:0),Ne.length-(1==$.length?J:0));de<He&&Be.charCodeAt(Be.length-de-1)==Ne.charCodeAt(Ne.length-de-1);)++de;if(1==N.length&&1==$.length&&u==r.line)for(;J&&J>r.ch&&Be.charCodeAt(Be.length-de-1)==Ne.charCodeAt(Ne.length-de-1);)J--,de++;N[N.length-1]=Be.slice(0,Be.length-de).replace(/^\u200b+/,""),N[0]=N[0].slice(J).replace(/\u200b+$/,"");var je=ve(u,J),Ze=ve(m,$.length?_e($).length-de:0);return N.length>1||N[0]||Re(je,Ze)?(Kn(e.doc,N,je,Ze,"+input"),!0):void 0},vt.prototype.ensurePolled=function(){this.forceCompositionEnd()},vt.prototype.reset=function(){this.forceCompositionEnd()},vt.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},vt.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},vt.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&Lr(this.cm,function(){return vr(e.cm)})},vt.prototype.setUneditable=function(e){e.contentEditable="false"},vt.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Qt(this.cm,Yo)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},vt.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},vt.prototype.onContextMenu=function(){},vt.prototype.resetPosition=function(){},vt.prototype.needsContentAttribute=!0;var Nt=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new C,this.hasSelection=!1,this.composing=null};Nt.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var i=this.textarea;function a(u){if(!at(r,u)){if(r.somethingSelected())io({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var h=Ll(r);io({lineWise:!0,text:h.text}),"cut"==u.type?r.setSelections(h.ranges,null,ne):(n.prevInput="",i.value=h.text.join("\n"),We(i))}"cut"==u.type&&(r.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),Fe&&(i.style.width="0px"),Ke(i,"input",function(){f&&E>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),Ke(i,"paste",function(u){at(r,u)||wl(u,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())}),Ke(i,"cut",a),Ke(i,"copy",a),Ke(e.scroller,"paste",function(u){if(!Xr(e,u)&&!at(r,u)){if(!i.dispatchEvent)return r.state.pasteIncoming=+new Date,void n.focus();var h=new Event("paste");h.clipboardData=u.clipboardData,i.dispatchEvent(h)}}),Ke(e.lineSpace,"selectstart",function(u){Xr(e,u)||kt(u)}),Ke(i,"compositionstart",function(){var u=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:u,range:r.markText(u,r.getCursor("to"),{className:"CodeMirror-composing"})}}),Ke(i,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},Nt.prototype.createField=function(e){this.wrapper=Al(),this.textarea=this.wrapper.firstChild},Nt.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Nt.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=ma(e);if(e.options.moveInputWithCursor){var i=Br(e,n.sel.primary().head,"div"),a=t.wrapper.getBoundingClientRect(),u=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+u.top-a.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+u.left-a.left))}return r},Nt.prototype.showSelection=function(e){var n=this.cm.display;K(n.cursorDiv,e.cursors),K(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Nt.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&We(this.textarea),f&&E>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",f&&E>=9&&(this.hasSelection=null))}},Nt.prototype.getField=function(){return this.textarea},Nt.prototype.supportsTouch=function(){return!1},Nt.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!ie||fe()!=this.textarea))try{this.textarea.focus()}catch(e){}},Nt.prototype.blur=function(){this.textarea.blur()},Nt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Nt.prototype.receivedFocus=function(){this.slowPoll()},Nt.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Nt.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))})},Nt.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||Ft(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(f&&E>=9&&this.hasSelection===i||T&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var a=i.charCodeAt(0);if(8203==a&&!r&&(r="\u200b"),8666==a)return this.reset(),this.cm.execCommand("undo")}for(var u=0,h=Math.min(r.length,i.length);u<h&&r.charCodeAt(u)==i.charCodeAt(u);)++u;return Lr(t,function(){Yo(t,i.slice(u),r.length-u,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Nt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Nt.prototype.onKeyPress=function(){f&&E>=9&&(this.hasSelection=null),this.fastPoll()},Nt.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var a=Cn(n,e),u=r.scroller.scrollTop;if(a&&!q){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(a)&&Qt(n,or)(n.doc,sn(a),ne);var N,d=i.style.cssText,m=t.wrapper.style.cssText,A=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-A.top-5)+"px; left: "+(e.clientX-A.left-5)+"px;\n      z-index: 1000; background: "+(f?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",B&&(N=window.scrollY),r.input.focus(),B&&window.scrollTo(null,N),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=J,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),f&&E>=9&&$(),P){Cr(e);var de=function(){pt(window,"mouseup",de),setTimeout(J,20)};Ke(window,"mouseup",de)}else setTimeout(J,50)}function $(){if(null!=i.selectionStart){var Ce=n.somethingSelected(),Te="\u200b"+(Ce?i.value:"");i.value="\u21da",i.value=Te,t.prevInput=Ce?"":"\u200b",i.selectionStart=1,i.selectionEnd=Te.length,r.selForContextMenu=n.doc.sel}}function J(){if(t.contextMenuPending==J&&(t.contextMenuPending=!1,t.wrapper.style.cssText=m,i.style.cssText=d,f&&E<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=u),null!=i.selectionStart)){(!f||f&&E<9)&&$();var Ce=0,Te=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"\u200b"==t.prevInput?Qt(n,Ya)(n):Ce++<10?r.detectingSelectAll=setTimeout(Te,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(Te,200)}}},Nt.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},Nt.prototype.setUneditable=function(){},Nt.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(r,i,a,u){e.defaults[r]=i,a&&(t[r]=u?function(h,d,m){m!=Yn&&a(h,d,m)}:a)}e.defineOption=n,e.Init=Yn,n("value","",function(r,i){return r.setValue(i)},!0),n("mode",null,function(r,i){r.doc.modeOption=i,Bo(r)},!0),n("indentUnit",2,Bo,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(r){yi(r),fi(r),vr(r)},!0),n("lineSeparator",null,function(r,i){if(r.doc.lineSep=i,i){var a=[],u=r.doc.first;r.doc.iter(function(d){for(var m=0;;){var A=d.text.indexOf(i,m);if(-1==A)break;m=A+i.length,a.push(ve(u,A))}u++});for(var h=a.length-1;h>=0;h--)Kn(r.doc,i,a[h],ve(a[h].line,a[h].ch+i.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(r,i,a){r.state.specialChars=new RegExp(i.source+(i.test("\t")?"":"|\t"),"g"),a!=Yn&&r.refresh()}),n("specialCharPlaceholder",ut,function(r){return r.refresh()},!0),n("electricChars",!0),n("inputStyle",ie?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(r,i){return r.getInputField().spellcheck=i},!0),n("autocorrect",!1,function(r,i){return r.getInputField().autocorrect=i},!0),n("autocapitalize",!1,function(r,i){return r.getInputField().autocapitalize=i},!0),n("rtlMoveVisually",!g),n("wholeLineUpdateBefore",!0),n("theme","default",function(r){bl(r),mi(r)},!0),n("keyMap","default",function(r,i,a){var u=to(i),h=a!=Yn&&to(a);h&&h.detach&&h.detach(r,u),u.attach&&u.attach(r,h||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Qs,!0),n("gutters",[],function(r,i){r.display.gutterSpecs=Io(i,r.options.lineNumbers),mi(r)},!0),n("fixedGutter",!0,function(r,i){r.display.gutters.style.left=i?bo(r.display)+"px":"0",r.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(r){return _n(r)},!0),n("scrollbarStyle","native",function(r){Sa(r),_n(r),r.display.scrollbars.setScrollTop(r.doc.scrollTop),r.display.scrollbars.setScrollLeft(r.doc.scrollLeft)},!0),n("lineNumbers",!1,function(r,i){r.display.gutterSpecs=Io(r.options.gutters,i),mi(r)},!0),n("firstLineNumber",1,mi,!0),n("lineNumberFormatter",function(r){return r},mi,!0),n("showCursorWhenSelecting",!1,ci,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(r,i){"nocursor"==i&&(Pn(r),r.display.input.blur()),r.display.input.readOnlyChanged(i)}),n("screenReaderLabel",null,function(r,i){r.display.input.screenReaderLabelChanged(i=""===i?null:i)}),n("disableInput",!1,function(r,i){i||r.display.input.reset()},!0),n("dragDrop",!0,Js),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,ci,!0),n("singleCursorHeightPerLine",!0,ci,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,yi,!0),n("addModeClass",!1,yi,!0),n("pollInterval",100),n("undoDepth",200,function(r,i){return r.doc.history.undoDepth=i}),n("historyEventDelay",1250),n("viewportMargin",10,function(r){return r.refresh()},!0),n("maxHighlightLength",1e4,yi,!0),n("moveInputWithCursor",!0,function(r,i){i||r.display.input.resetPosition()}),n("tabindex",null,function(r,i){return r.display.input.getField().tabIndex=i||""}),n("autofocus",null),n("direction","ltr",function(r,i){return r.doc.setDirection(i)},!0),n("phrases",null)}(St),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(r,i){var a=this.options,u=a[r];a[r]==i&&"mode"!=r||(a[r]=i,t.hasOwnProperty(r)&&Qt(this,t[r])(this,i,u),Xe(this,"optionChange",this,r))},getOption:function(r){return this.options[r]},getDoc:function(){return this.doc},addKeyMap:function(r,i){this.state.keyMaps[i?"push":"unshift"](to(r))},removeKeyMap:function(r){for(var i=this.state.keyMaps,a=0;a<i.length;++a)if(i[a]==r||i[a].name==r)return i.splice(a,1),!0},addOverlay:cr(function(r,i){var a=r.token?r:e.getMode(this.options,r);if(a.startState)throw new Error("Overlays may not be stateful.");(function(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)})(this.state.overlays,{mode:a,modeSpec:r,opaque:i&&i.opaque,priority:i&&i.priority||0},function(u){return u.priority}),this.state.modeGen++,vr(this)}),removeOverlay:cr(function(r){for(var i=this.state.overlays,a=0;a<i.length;++a){var u=i[a].modeSpec;if(u==r||"string"==typeof r&&u.name==r)return i.splice(a,1),this.state.modeGen++,void vr(this)}}),indentLine:cr(function(r,i,a){"string"!=typeof i&&"number"!=typeof i&&(i=null==i?this.options.smartIndent?"smart":"prev":i?"add":"subtract"),_t(this.doc,r)&&Fi(this,r,i,a)}),indentSelection:cr(function(r){for(var i=this.doc.sel.ranges,a=-1,u=0;u<i.length;u++){var h=i[u];if(h.empty())h.head.line>a&&(Fi(this,h.head.line,r,!0),a=h.head.line,u==this.doc.sel.primIndex&&Hn(this));else{var d=h.from(),m=h.to(),A=Math.max(a,d.line);a=Math.min(this.lastLine(),m.line-(m.ch?0:1))+1;for(var N=A;N<a;++N)Fi(this,N,r);var $=this.doc.sel.ranges;0==d.ch&&i.length==$.length&&$[u].from().ch>0&&_o(this.doc,u,new dt(d,$[u].to()),ne)}}}),getTokenAt:function(r,i){return Vn(this,r,i)},getLineTokens:function(r,i){return Vn(this,ve(r),i,!0)},getTokenTypeAt:function(r){r=Se(this.doc,r);var d,i=vn(this,me(this.doc,r.line)),a=0,u=(i.length-1)/2,h=r.ch;if(0==h)d=i[2];else for(;;){var m=a+u>>1;if((m?i[2*m-1]:0)>=h)u=m;else{if(!(i[2*m+1]<h)){d=i[2*m+2];break}a=m+1}}var A=d?d.indexOf("overlay "):-1;return A<0?d:0==A?null:d.slice(0,A-1)},getModeAt:function(r){var i=this.doc.mode;return i.innerMode?e.innerMode(i,this.getTokenAt(r).state).mode:i},getHelper:function(r,i){return this.getHelpers(r,i)[0]},getHelpers:function(r,i){var a=[];if(!n.hasOwnProperty(i))return a;var u=n[i],h=this.getModeAt(r);if("string"==typeof h[i])u[h[i]]&&a.push(u[h[i]]);else if(h[i])for(var d=0;d<h[i].length;d++){var m=u[h[i][d]];m&&a.push(m)}else h.helperType&&u[h.helperType]?a.push(u[h.helperType]):u[h.name]&&a.push(u[h.name]);for(var A=0;A<u._global.length;A++){var N=u._global[A];N.pred(h,this)&&-1==Ae(a,N.val)&&a.push(N.val)}return a},getStateAfter:function(r,i){var a=this.doc;return gn(this,(r=be(a,null==r?a.first+a.size-1:r))+1,i).state},cursorCoords:function(r,i){var u=this.doc.sel.primary();return Br(this,null==r?u.head:"object"==typeof r?Se(this.doc,r):r?u.from():u.to(),i||"page")},charCoords:function(r,i){return Wi(this,Se(this.doc,r),i||"page")},coordsChar:function(r,i){return yo(this,(r=ca(this,r,i||"page")).left,r.top)},lineAtHeight:function(r,i){return r=ca(this,{top:r,left:0},i||"page").top,tt(this.doc,r+this.display.viewOffset)},heightAtLine:function(r,i,a){var h,u=!1;if("number"==typeof r){var d=this.doc.first+this.doc.size-1;r<this.doc.first?r=this.doc.first:r>d&&(r=d,u=!0),h=me(this.doc,r)}else h=r;return _i(this,h,{top:0,left:0},i||"page",a||u).top+(u?this.doc.height-Z(h):0)},defaultTextHeight:function(){return Bn(this.display)},defaultCharWidth:function(){return Rn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(r,i,a,u,h){var d=this.display,m=(r=Br(this,Se(this.doc,r))).bottom,A=r.left;if(i.style.position="absolute",i.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(i),d.sizer.appendChild(i),"over"==u)m=r.top;else if("above"==u||"near"==u){var N=Math.max(d.wrapper.clientHeight,this.doc.height),$=Math.max(d.sizer.clientWidth,d.lineSpace.clientWidth);("above"==u||r.bottom+i.offsetHeight>N)&&r.top>i.offsetHeight?m=r.top-i.offsetHeight:r.bottom+i.offsetHeight<=N&&(m=r.bottom),A+i.offsetWidth>$&&(A=$-i.offsetWidth)}i.style.top=m+"px",i.style.left=i.style.right="","right"==h?(A=d.sizer.clientWidth-i.offsetWidth,i.style.right="0px"):("left"==h?A=0:"middle"==h&&(A=(d.sizer.clientWidth-i.offsetWidth)/2),i.style.left=A+"px"),a&&function(e,t){var n=Ao(e,t);null!=n.scrollTop&&di(e,n.scrollTop),null!=n.scrollLeft&&Sn(e,n.scrollLeft)}(this,{left:A,top:m,right:A+i.offsetWidth,bottom:m+i.offsetHeight})},triggerOnKeyDown:cr(pl),triggerOnKeyPress:cr(gl),triggerOnKeyUp:vl,triggerOnMouseDown:cr(ml),execCommand:function(r){if(Ai.hasOwnProperty(r))return Ai[r].call(null,this)},triggerElectric:cr(function(r){Sl(this,r)}),findPosH:function(r,i,a,u){var h=1;i<0&&(h=-1,i=-i);for(var d=Se(this.doc,r),m=0;m<i&&!(d=Jo(this.doc,d,h,a,u)).hitSide;++m);return d},moveH:cr(function(r,i){var a=this;this.extendSelectionsBy(function(u){return a.display.shift||a.doc.extend||u.empty()?Jo(a.doc,u.head,r,i,a.options.rtlMoveVisually):r<0?u.from():u.to()},Oe)}),deleteH:cr(function(r,i){var u=this.doc;this.doc.sel.somethingSelected()?u.replaceSelection("",null,"+delete"):jn(this,function(h){var d=Jo(u,h.head,r,i,!1);return r<0?{from:d,to:h.head}:{from:h.head,to:d}})}),findPosV:function(r,i,a,u){var h=1,d=u;i<0&&(h=-1,i=-i);for(var m=Se(this.doc,r),A=0;A<i;++A){var N=Br(this,m,"div");if(null==d?d=N.left:N.left=d,(m=Ml(this,N,h,a)).hitSide)break}return m},moveV:cr(function(r,i){var a=this,u=this.doc,h=[],d=!this.display.shift&&!u.extend&&u.sel.somethingSelected();if(u.extendSelectionsBy(function(A){if(d)return r<0?A.from():A.to();var N=Br(a,A.head,"div");null!=A.goalColumn&&(N.left=A.goalColumn),h.push(N.left);var $=Ml(a,N,r,i);return"page"==i&&A==u.sel.primary()&&Mo(a,Wi(a,$,"div").top-N.top),$},Oe),h.length)for(var m=0;m<u.sel.ranges.length;m++)u.sel.ranges[m].goalColumn=h[m]}),findWordAt:function(r){var a=me(this.doc,r.line).text,u=r.ch,h=r.ch;if(a){var d=this.getHelper(r,"wordChars");"before"!=r.sticky&&h!=a.length||!u?++h:--u;for(var m=a.charAt(u),A=lr(m,d)?function(N){return lr(N,d)}:/\s/.test(m)?function(N){return/\s/.test(N)}:function(N){return!/\s/.test(N)&&!lr(N)};u>0&&A(a.charAt(u-1));)--u;for(;h<a.length&&A(a.charAt(h));)++h}return new dt(ve(r.line,u),ve(r.line,h))},toggleOverwrite:function(r){null!=r&&r==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?he(this.display.cursorDiv,"CodeMirror-overwrite"):U(this.display.cursorDiv,"CodeMirror-overwrite"),Xe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==fe()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:cr(function(r,i){hi(this,r,i)}),getScrollInfo:function(){var r=this.display.scroller;return{left:r.scrollLeft,top:r.scrollTop,height:r.scrollHeight-Kr(this)-this.display.barHeight,width:r.scrollWidth-Kr(this)-this.display.barWidth,clientHeight:po(this),clientWidth:kn(this)}},scrollIntoView:cr(function(r,i){null==r?(r={from:this.doc.sel.primary().head,to:null},null==i&&(i=this.options.cursorScrollMargin)):"number"==typeof r?r={from:ve(r,0),to:null}:null==r.from&&(r={from:r,to:null}),r.to||(r.to=r.from),r.margin=i||0,null!=r.from.line?function(e,t){Gi(e),e.curOp.scrollToPos=t}(this,r):ka(this,r.from,r.to,r.margin)}),setSize:cr(function(r,i){var a=this,u=function(d){return"number"==typeof d||/^\d+$/.test(String(d))?d+"px":d};null!=r&&(this.display.wrapper.style.width=u(r)),null!=i&&(this.display.wrapper.style.height=u(i)),this.options.lineWrapping&&sa(this);var h=this.display.viewFrom;this.doc.iter(h,this.display.viewTo,function(d){if(d.widgets)for(var m=0;m<d.widgets.length;m++)if(d.widgets[m].noHScroll){an(a,h,"widget");break}++h}),this.curOp.forceUpdate=!0,Xe(this,"refresh",this)}),operation:function(r){return Lr(this,r)},startOperation:function(){return Tn(this)},endOperation:function(){return An(this)},refresh:cr(function(){var r=this.display.cachedTextHeight;vr(this),this.curOp.forceUpdate=!0,fi(this),hi(this,this.doc.scrollLeft,this.doc.scrollTop),Fo(this.display),(null==r||Math.abs(r-Bn(this.display))>.5||this.options.lineWrapping)&&Co(this),Xe(this,"refresh",this)}),swapDoc:cr(function(r){var i=this.doc;return i.cm=null,this.state.selectingText&&this.state.selectingText(),Na(this,r),fi(this),this.display.input.reset(),hi(this,r.scrollLeft,r.scrollTop),this.curOp.forceScroll=!0,Jt(this,"swapDoc",this,i),i}),phrase:function(r){var i=this.options.phrases;return i&&Object.prototype.hasOwnProperty.call(i,r)?i[r]:r},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ct(e),e.registerHelper=function(r,i,a){n.hasOwnProperty(r)||(n[r]=e[r]={_global:[]}),n[r][i]=a},e.registerGlobalHelper=function(r,i,a,u){e.registerHelper(r,i,u),n[r]._global.push({pred:a,val:u})}}(St);var nu="iter insert remove copy getEditor constructor".split(" ");for(var ao in gr.prototype)gr.prototype.hasOwnProperty(ao)&&Ae(nu,ao)<0&&(St.prototype[ao]=function(e){return function(){return e.apply(this.doc,arguments)}}(gr.prototype[ao]));return ct(gr),St.inputStyles={textarea:Nt,contenteditable:vt},St.defineMode=function(e){!St.defaults.mode&&"null"!=e&&(St.defaults.mode=e),dr.apply(this,arguments)},St.defineMIME=function(e,t){er[e]=t},St.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),St.defineMIME("text/plain","null"),St.defineExtension=function(e,t){St.prototype[e]=t},St.defineDocExtension=function(e,t){gr.prototype[e]=t},St.fromTextArea=function(e,t){if((t=t?Ge(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=fe();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function r(){e.value=h.getValue()}var i;if(e.form&&(Ke(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var a=e.form;i=a.submit;try{var u=a.submit=function(){r(),a.submit=i,a.submit(),a.submit=u}}catch(d){}}t.finishInit=function(d){d.save=r,d.getTextArea=function(){return e},d.toTextArea=function(){d.toTextArea=isNaN,r(),e.parentNode.removeChild(d.getWrapperElement()),e.style.display="",e.form&&(pt(e.form,"submit",r),!t.leaveSubmitMethodAlone&&"function"==typeof e.form.submit&&(e.form.submit=i))}},e.style.display="none";var h=St(function(d){return e.parentNode.insertBefore(d,e.nextSibling)},t);return h},function(e){e.off=pt,e.on=Ke,e.wheelEventPixels=us,e.Doc=gr,e.splitLines=Jr,e.countColumn=O,e.findColumn=Qe,e.isWordChar=Dt,e.Pass=Y,e.signal=Xe,e.Line=ye,e.changeEnd=un,e.scrollbarModel=wa,e.Pos=ve,e.cmpPos=Re,e.modes=Dr,e.mimeModes=er,e.resolveMode=Nr,e.getMode=ur,e.modeExtensions=Fr,e.extendMode=rn,e.copyState=fr,e.startState=Sr,e.innerMode=tr,e.commands=Ai,e.keyMap=$r,e.keyName=ul,e.isModifierKey=ll,e.lookupKey=Gn,e.normalizeKeyMap=Fs,e.StringStream=ae,e.SharedTextMarker=Si,e.TextMarker=cn,e.LineWidget=wi,e.e_preventDefault=kt,e.e_stopPropagation=Hr,e.e_stop=Cr,e.addClass=he,e.contains=x,e.rmClass=U,e.keyNames=hn}(St),St.version="5.64.0",St}()},7214:(bt,rt,pe)=>{!function(k){"use strict";var L=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/i;k.defineMode("gfm",function(_,Q){var f=0;var B={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(q){return{code:q.code,codeBlock:q.codeBlock,ateSpace:q.ateSpace}},token:function(q,z){if(z.combineTokens=null,z.codeBlock)return q.match(/^```+/)?(z.codeBlock=!1,null):(q.skipToEnd(),null);if(q.sol()&&(z.code=!1),q.sol()&&q.match(/^```+/))return q.skipToEnd(),z.codeBlock=!0,null;if("`"===q.peek()){q.next();var ue=q.pos;q.eatWhile("`");var ce=1+q.pos-ue;return z.code?ce===f&&(z.code=!1):(f=ce,z.code=!0),null}if(z.code)return q.next(),null;if(q.eatSpace())return z.ateSpace=!0,null;if((q.sol()||z.ateSpace)&&(z.ateSpace=!1,!1!==Q.gitHubSpice)){if(q.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/))return z.combineTokens=!0,"link";if(q.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return z.combineTokens=!0,"link"}return q.match(L)&&"]("!=q.string.slice(q.start-2,q.start)&&(0==q.start||/\W/.test(q.string.charAt(q.start-1)))?(z.combineTokens=!0,"link"):(q.next(),null)},blankLine:function(q){return q.code=!1,null}},se={taskLists:!0,strikethrough:!0,emoji:!0};for(var X in Q)se[X]=Q[X];return se.name="markdown",k.overlayMode(k.getMode(_,se),B)},"markdown"),k.defineMIME("text/x-gfm","gfm")}(pe(9475),pe(6864),pe(7630))},2391:(bt,rt,pe)=>{!function(k){"use strict";k.defineMode("javascript",function(L,_){var te,ie,Q=L.indentUnit,f=_.statementIndent,E=_.jsonld,B=_.json||E,se=!1!==_.trackScope,X=_.typescript,q=_.wordCharacters||/[\w$\xa1-\uffff]/,z=function(){function y(mt){return{type:mt,style:"keyword"}}var F=y("keyword a"),oe=y("keyword b"),be=y("keyword c"),Se=y("keyword d"),ot=y("operator"),ft={type:"atom",style:"atom"};return{if:y("if"),while:F,with:F,else:oe,do:oe,try:oe,finally:oe,return:Se,break:Se,continue:Se,new:y("new"),delete:be,void:be,throw:be,debugger:y("debugger"),var:y("var"),const:y("var"),let:y("var"),function:y("function"),catch:y("catch"),for:y("for"),switch:y("switch"),case:y("case"),default:y("default"),in:ot,typeof:ot,instanceof:ot,true:ft,false:ft,null:ft,undefined:ft,NaN:ft,Infinity:ft,this:y("this"),class:y("class"),super:y("atom"),yield:be,export:y("export"),import:y("import"),extends:be,await:be}}(),ue=/[+\-*&%=<>!?|~^@]/,ce=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function T(y,F,oe){return te=y,ie=oe,F}function W(y,F){var oe=y.next();if('"'==oe||"'"==oe)return F.tokenize=function(y){return function(F,oe){var Se,be=!1;if(E&&"@"==F.peek()&&F.match(ce))return oe.tokenize=W,T("jsonld-keyword","meta");for(;null!=(Se=F.next())&&(Se!=y||be);)be=!be&&"\\"==Se;return be||(oe.tokenize=W),T("string","string")}}(oe),F.tokenize(y,F);if("."==oe&&y.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return T("number","number");if("."==oe&&y.match(".."))return T("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(oe))return T(oe);if("="==oe&&y.eat(">"))return T("=>","operator");if("0"==oe&&y.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return T("number","number");if(/\d/.test(oe))return y.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),T("number","number");if("/"==oe)return y.eat("*")?(F.tokenize=w,w(y,F)):y.eat("/")?(y.skipToEnd(),T("comment","comment")):wt(y,F,1)?(function(y){for(var oe,F=!1,be=!1;null!=(oe=y.next());){if(!F){if("/"==oe&&!be)return;"["==oe?be=!0:be&&"]"==oe&&(be=!1)}F=!F&&"\\"==oe}}(y),y.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),T("regexp","string-2")):(y.eat("="),T("operator","operator",y.current()));if("`"==oe)return F.tokenize=M,M(y,F);if("#"==oe&&"!"==y.peek())return y.skipToEnd(),T("meta","meta");if("#"==oe&&y.eatWhile(q))return T("variable","property");if("<"==oe&&y.match("!--")||"-"==oe&&y.match("->")&&!/\S/.test(y.string.slice(0,y.start)))return y.skipToEnd(),T("comment","comment");if(ue.test(oe))return(">"!=oe||!F.lexical||">"!=F.lexical.type)&&(y.eat("=")?("!"==oe||"="==oe)&&y.eat("="):/[<>*+\-|&?]/.test(oe)&&(y.eat(oe),">"==oe&&y.eat(oe))),"?"==oe&&y.eat(".")?T("."):T("operator","operator",y.current());if(q.test(oe)){y.eatWhile(q);var be=y.current();if("."!=F.lastType){if(z.propertyIsEnumerable(be)){var Se=z[be];return T(Se.type,Se.style,be)}if("async"==be&&y.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return T("async","keyword",be)}return T("variable","variable",be)}}function w(y,F){for(var be,oe=!1;be=y.next();){if("/"==be&&oe){F.tokenize=W;break}oe="*"==be}return T("comment","comment")}function M(y,F){for(var be,oe=!1;null!=(be=y.next());){if(!oe&&("`"==be||"$"==be&&y.eat("{"))){F.tokenize=W;break}oe=!oe&&"\\"==be}return T("quasi","string-2",y.current())}function b(y,F){F.fatArrowAt&&(F.fatArrowAt=null);var oe=y.string.indexOf("=>",y.start);if(!(oe<0)){if(X){var be=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(y.string.slice(y.start,oe));be&&(oe=be.index)}for(var Se=0,ot=!1,ft=oe-1;ft>=0;--ft){var mt=y.string.charAt(ft),Ve="([{}])".indexOf(mt);if(Ve>=0&&Ve<3){if(!Se){++ft;break}if(0==--Se){"("==mt&&(ot=!0);break}}else if(Ve>=3&&Ve<6)++Se;else if(q.test(mt))ot=!0;else if(/["'\/`]/.test(mt))for(;;--ft){if(0==ft)return;if(y.string.charAt(ft-1)==mt&&"\\"!=y.string.charAt(ft-2)){ft--;break}}else if(ot&&!Se){++ft;break}}ot&&!Se&&(F.fatArrowAt=ft)}}var U={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function re(y,F,oe,be,Se,ot){this.indented=y,this.column=F,this.type=oe,this.prev=Se,this.info=ot,null!=be&&(this.align=be)}function K(y,F){if(!se)return!1;for(var oe=y.localVars;oe;oe=oe.next)if(oe.name==F)return!0;for(var be=y.context;be;be=be.prev)for(oe=be.vars;oe;oe=oe.next)if(oe.name==F)return!0}function ee(y,F,oe,be,Se){var ot=y.cc;for(G.state=y,G.stream=Se,G.marked=null,G.cc=ot,G.style=F,y.lexical.hasOwnProperty("align")||(y.lexical.align=!0);;)if((ot.length?ot.pop():B?Ue:Oe)(oe,be)){for(;ot.length&&ot[ot.length-1].lex;)ot.pop()();return G.marked?G.marked:"variable"==oe&&K(y,be)?"variable-2":F}}var G={state:null,column:null,marked:null,cc:null};function xe(){for(var y=arguments.length-1;y>=0;y--)G.cc.push(arguments[y])}function x(){return xe.apply(null,arguments),!0}function fe(y,F){for(var oe=F;oe;oe=oe.next)if(oe.name==y)return!0;return!1}function he(y){var F=G.state;if(G.marked="def",se){if(F.context)if("var"==F.lexical.info&&F.context&&F.context.block){var oe=Ee(y,F.context);if(null!=oe)return void(F.context=oe)}else if(!fe(y,F.localVars))return void(F.localVars=new Ge(y,F.localVars));_.globalVars&&!fe(y,F.globalVars)&&(F.globalVars=new Ge(y,F.globalVars))}}function Ee(y,F){if(F){if(F.block){var oe=Ee(y,F.prev);return oe?oe==F.prev?F:new ze(oe,F.vars,!0):null}return fe(y,F.vars)?F:new ze(F.prev,new Ge(y,F.vars),!1)}return null}function We(y){return"public"==y||"private"==y||"protected"==y||"abstract"==y||"readonly"==y}function ze(y,F,oe){this.prev=y,this.vars=F,this.block=oe}function Ge(y,F){this.name=y,this.next=F}var O=new Ge("this",new Ge("arguments",null));function C(){G.state.context=new ze(G.state.context,G.state.localVars,!1),G.state.localVars=O}function Ae(){G.state.context=new ze(G.state.context,G.state.localVars,!0),G.state.localVars=null}function R(){G.state.localVars=G.state.context.vars,G.state.context=G.state.context.prev}function Y(y,F){var oe=function(){var be=G.state,Se=be.indented;if("stat"==be.lexical.type)Se=be.lexical.indented;else for(var ot=be.lexical;ot&&")"==ot.type&&ot.align;ot=ot.prev)Se=ot.indented;be.lexical=new re(Se,G.stream.column(),y,null,be.lexical,F)};return oe.lex=!0,oe}function ne(){var y=G.state;y.lexical.prev&&(")"==y.lexical.type&&(y.indented=y.lexical.indented),y.lexical=y.lexical.prev)}function V(y){return function F(oe){return oe==y?x():";"==y||"}"==oe||")"==oe||"]"==oe?xe():x(F)}}function Oe(y,F){return"var"==y?x(Y("vardef",F),Yr,V(";"),ne):"keyword a"==y?x(Y("form"),_e,Oe,ne):"keyword b"==y?x(Y("form"),Oe,ne):"keyword d"==y?G.stream.match(/^\s*$/,!1)?x():x(Y("stat"),kr,V(";"),ne):"debugger"==y?x(V(";")):"{"==y?x(Y("}"),Ae,Ke,ne,R):";"==y?x():"if"==y?("else"==G.state.lexical.info&&G.state.cc[G.state.cc.length-1]==ne&&G.state.cc.pop()(),x(Y("form"),_e,Oe,ne,zr)):"function"==y?x(dr):"for"==y?x(Y("form"),Ae,ir,Oe,R,ne):"class"==y||X&&"interface"==F?(G.marked="keyword",x(Y("form","class"==y?y:F),rn,ne)):"variable"==y?X&&"declare"==F?(G.marked="keyword",x(Oe)):X&&("module"==F||"enum"==F||"type"==F)&&G.stream.match(/^\s*\w/,!1)?(G.marked="keyword","enum"==F?x(gt):"type"==F?x(Nr,V("operator"),et,V(";")):x(Y("form"),Tt,V("{"),Y("}"),Ke,ne,ne)):X&&"namespace"==F?(G.marked="keyword",x(Y("form"),Ue,Oe,ne)):X&&"abstract"==F?(G.marked="keyword",x(Oe)):x(Y("stat"),Ar):"switch"==y?x(Y("form"),_e,V("{"),Y("}","switch"),Ae,Ke,ne,ne,R):"case"==y?x(Ue,V(":")):"default"==y?x(V(":")):"catch"==y?x(Y("form"),C,Qe,Oe,ne,R):"export"==y?x(Y("stat"),ae,ne):"import"==y?x(Y("stat"),H,ne):"async"==y?x(Oe):"@"==F?x(Ue,Oe):xe(Y("stat"),Ue,V(";"),ne)}function Qe(y){if("("==y)return x(ur,V(")"))}function Ue(y,F){return Ct(y,F,!1)}function Ye(y,F){return Ct(y,F,!0)}function _e(y){return"("!=y?xe():x(Y(")"),kr,V(")"),ne)}function Ct(y,F,oe){if(G.state.fatArrowAt==G.stream.start){var be=oe?nr:lr;if("("==y)return x(C,Y(")"),it(ur,")"),ne,V("=>"),be,R);if("variable"==y)return xe(C,Tt,V("=>"),be,R)}var Se=oe?It:Pt;return U.hasOwnProperty(y)?x(Se):"function"==y?x(dr,Se):"class"==y||X&&"interface"==F?(G.marked="keyword",x(Y("form"),Fr,ne)):"keyword c"==y||"async"==y?x(oe?Ye:Ue):"("==y?x(Y(")"),kr,V(")"),ne,Se):"operator"==y||"spread"==y?x(oe?Ye:Ue):"["==y?x(Y("]"),_t,ne,Se):"{"==y?Er(Zt,"}",null,Se):"quasi"==y?xe(Lt,Se):"new"==y?x(function(y){return function(F){return"."==F?x(y?Kt:Ir):"variable"==F&&X?x(tn,y?It:Pt):xe(y?Ye:Ue)}}(oe)):x()}function kr(y){return y.match(/[;\}\)\],]/)?xe():xe(Ue)}function Pt(y,F){return","==y?x(kr):It(y,F,!1)}function It(y,F,oe){var be=0==oe?Pt:It,Se=0==oe?Ue:Ye;if("=>"==y)return x(C,oe?nr:lr,R);if("operator"==y)return/\+\+|--/.test(F)||X&&"!"==F?x(be):X&&"<"==F&&G.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?x(Y(">"),it(et,">"),ne,be):"?"==F?x(Ue,V(":"),Se):x(Se);if("quasi"==y)return xe(Lt,be);if(";"!=y){if("("==y)return Er(Ye,")","call",be);if("."==y)return x(Ht,be);if("["==y)return x(Y("]"),kr,V("]"),ne,be);if(X&&"as"==F)return G.marked="keyword",x(et,be);if("regexp"==y)return G.state.lastType=G.marked="operator",G.stream.backUp(G.stream.pos-G.stream.start-1),x(Se)}}function Lt(y,F){return"quasi"!=y?xe():"${"!=F.slice(F.length-2)?x(Lt):x(kr,Dt)}function Dt(y){if("}"==y)return G.marked="string-2",G.state.tokenize=M,x(Lt)}function lr(y){return b(G.stream,G.state),xe("{"==y?Oe:Ue)}function nr(y){return b(G.stream,G.state),xe("{"==y?Oe:Ye)}function Ir(y,F){if("target"==F)return G.marked="keyword",x(Pt)}function Kt(y,F){if("target"==F)return G.marked="keyword",x(It)}function Ar(y){return":"==y?x(ne,Oe):xe(Pt,V(";"),ne)}function Ht(y){if("variable"==y)return G.marked="property",x()}function Zt(y,F){return"async"==y?(G.marked="property",x(Zt)):"variable"==y||"keyword"==G.style?(G.marked="property","get"==F||"set"==F?x(xt):(X&&G.state.fatArrowAt==G.stream.start&&(oe=G.stream.match(/^\s*:\s*/,!1))&&(G.state.fatArrowAt=G.stream.pos+oe[0].length),x(br))):"number"==y||"string"==y?(G.marked=E?"property":G.style+" property",x(br)):"jsonld-keyword"==y?x(br):X&&We(F)?(G.marked="keyword",x(Zt)):"["==y?x(Ue,st,V("]"),br):"spread"==y?x(Ye,br):"*"==F?(G.marked="keyword",x(Zt)):":"==y?xe(br):void 0;var oe}function xt(y){return"variable"!=y?xe(br):(G.marked="property",x(dr))}function br(y){return":"==y?x(Ye):"("==y?xe(dr):void 0}function it(y,F,oe){function be(Se,ot){if(oe?oe.indexOf(Se)>-1:","==Se){var ft=G.state.lexical;return"call"==ft.info&&(ft.pos=(ft.pos||0)+1),x(function(mt,Ve){return mt==F||Ve==F?xe():xe(y)},be)}return Se==F||ot==F?x():oe&&oe.indexOf(";")>-1?xe(y):x(V(F))}return function(Se,ot){return Se==F||ot==F?x():xe(y,be)}}function Er(y,F,oe){for(var be=3;be<arguments.length;be++)G.cc.push(arguments[be]);return x(Y(F,oe),it(y,F),ne)}function Ke(y){return"}"==y?x():xe(Oe,Ke)}function st(y,F){if(X){if(":"==y)return x(et);if("?"==F)return x(st)}}function pt(y,F){if(X&&(":"==y||"in"==F))return x(et)}function Xe(y){if(X&&":"==y)return G.stream.match(/^\s*\w+\s+is\b/,!1)?x(Ue,at,et):x(et)}function at(y,F){if("is"==F)return G.marked="keyword",x()}function et(y,F){return"keyof"==F||"typeof"==F||"infer"==F||"readonly"==F?(G.marked="keyword",x("typeof"==F?Ye:et)):"variable"==y||"void"==F?(G.marked="type",x($t)):"|"==F||"&"==F?x(et):"string"==y||"number"==y||"atom"==y?x($t):"["==y?x(Y("]"),it(et,"]",","),ne,$t):"{"==y?x(Y("}"),ct,ne,$t):"("==y?x(it(Cr,")"),Gt,$t):"<"==y?x(it(et,">"),et):"quasi"==y?xe(Hr,$t):void 0}function Gt(y){if("=>"==y)return x(et)}function ct(y){return y.match(/[\}\)\]]/)?x():","==y||";"==y?x(ct):xe(kt,ct)}function kt(y,F){return"variable"==y||"keyword"==G.style?(G.marked="property",x(kt)):"?"==F||"number"==y||"string"==y?x(kt):":"==y?x(et):"["==y?x(V("variable"),pt,V("]"),kt):"("==y?xe(wr,kt):y.match(/[;\}\)\],]/)?void 0:x()}function Hr(y,F){return"quasi"!=y?xe():"${"!=F.slice(F.length-2)?x(Hr):x(et,jr)}function jr(y){if("}"==y)return G.marked="string-2",G.state.tokenize=M,x(Hr)}function Cr(y,F){return"variable"==y&&G.stream.match(/^\s*[?:]/,!1)||"?"==F?x(Cr):":"==y?x(et):"spread"==y?x(Cr):xe(et)}function $t(y,F){return"<"==F?x(Y(">"),it(et,">"),ne,$t):"|"==F||"."==y||"&"==F?x(et):"["==y?x(et,V("]"),$t):"extends"==F||"implements"==F?(G.marked="keyword",x(et)):"?"==F?x(et,V(":"),et):void 0}function tn(y,F){if("<"==F)return x(Y(">"),it(et,">"),ne,$t)}function _r(){return xe(et,Wr)}function Wr(y,F){if("="==F)return x(et)}function Yr(y,F){return"enum"==F?(G.marked="keyword",x(gt)):xe(Tt,st,Ft,pn)}function Tt(y,F){return X&&We(F)?(G.marked="keyword",x(Tt)):"variable"==y?(he(F),x()):"spread"==y?x(Tt):"["==y?Er(Jr,"]"):"{"==y?Er(Ur,"}"):void 0}function Ur(y,F){return"variable"!=y||G.stream.match(/^\s*:/,!1)?("variable"==y&&(G.marked="property"),"spread"==y?x(Tt):"}"==y?xe():"["==y?x(Ue,V("]"),V(":"),Ur):x(V(":"),Tt,Ft)):(he(F),x(Ft))}function Jr(){return xe(Tt,Ft)}function Ft(y,F){if("="==F)return x(Ye)}function pn(y){if(","==y)return x(Yr)}function zr(y,F){if("keyword b"==y&&"else"==F)return x(Y("form","else"),Oe,ne)}function ir(y,F){return"await"==F?x(ir):"("==y?x(Y(")"),Dr,ne):void 0}function Dr(y){return"var"==y?x(Yr,er):"variable"==y?x(er):xe(er)}function er(y,F){return")"==y?x():";"==y?x(er):"in"==F||"of"==F?(G.marked="keyword",x(Ue,er)):xe(Ue,er)}function dr(y,F){return"*"==F?(G.marked="keyword",x(dr)):"variable"==y?(he(F),x(dr)):"("==y?x(C,Y(")"),it(ur,")"),ne,Xe,Oe,R):X&&"<"==F?x(Y(">"),it(_r,">"),ne,dr):void 0}function wr(y,F){return"*"==F?(G.marked="keyword",x(wr)):"variable"==y?(he(F),x(wr)):"("==y?x(C,Y(")"),it(ur,")"),ne,Xe,R):X&&"<"==F?x(Y(">"),it(_r,">"),ne,wr):void 0}function Nr(y,F){return"keyword"==y||"variable"==y?(G.marked="type",x(Nr)):"<"==F?x(Y(">"),it(_r,">"),ne):void 0}function ur(y,F){return"@"==F&&x(Ue,ur),"spread"==y?x(ur):X&&We(F)?(G.marked="keyword",x(ur)):X&&"this"==y?x(st,Ft):xe(Tt,st,Ft)}function Fr(y,F){return"variable"==y?rn(y,F):fr(y,F)}function rn(y,F){if("variable"==y)return he(F),x(fr)}function fr(y,F){return"<"==F?x(Y(">"),it(_r,">"),ne,fr):"extends"==F||"implements"==F||X&&","==y?("implements"==F&&(G.marked="keyword"),x(X?et:Ue,fr)):"{"==y?x(Y("}"),tr,ne):void 0}function tr(y,F){return"async"==y||"variable"==y&&("static"==F||"get"==F||"set"==F||X&&We(F))&&G.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(G.marked="keyword",x(tr)):"variable"==y||"keyword"==G.style?(G.marked="property",x(Sr,tr)):"number"==y||"string"==y?x(Sr,tr):"["==y?x(Ue,st,V("]"),Sr,tr):"*"==F?(G.marked="keyword",x(tr)):X&&"("==y?xe(wr,tr):";"==y||","==y?x(tr):"}"==y?x():"@"==F?x(Ue,tr):void 0}function Sr(y,F){if("!"==F||"?"==F)return x(Sr);if(":"==y)return x(et,Ft);if("="==F)return x(Ye);var oe=G.state.lexical.prev;return xe(oe&&"interface"==oe.info?wr:dr)}function ae(y,F){return"*"==F?(G.marked="keyword",x(tt,V(";"))):"default"==F?(G.marked="keyword",x(Ue,V(";"))):"{"==y?x(it(me,"}"),tt,V(";")):xe(Oe)}function me(y,F){return"as"==F?(G.marked="keyword",x(V("variable"))):"variable"==y?xe(Ye,me):void 0}function H(y){return"string"==y?x():"("==y?xe(Ue):"."==y?xe(Pt):xe(le,we,tt)}function le(y,F){return"{"==y?Er(le,"}"):("variable"==y&&he(F),"*"==F&&(G.marked="keyword"),x(De))}function we(y){if(","==y)return x(le,we)}function De(y,F){if("as"==F)return G.marked="keyword",x(le)}function tt(y,F){if("from"==F)return G.marked="keyword",x(Ue)}function _t(y){return"]"==y?x():xe(it(Ye,"]"))}function gt(){return xe(Y("form"),Tt,V("{"),Y("}"),it(ve,"}"),ne,ne)}function ve(){return xe(Tt,Ft)}function wt(y,F,oe){return F.tokenize==W&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(F.lastType)||"quasi"==F.lastType&&/\{\s*$/.test(y.string.slice(0,y.pos-(oe||0)))}return R.lex=!0,ne.lex=!0,{startState:function(y){var F={tokenize:W,lastType:"sof",cc:[],lexical:new re((y||0)-Q,0,"block",!1),localVars:_.localVars,context:_.localVars&&new ze(null,null,!1),indented:y||0};return _.globalVars&&"object"==typeof _.globalVars&&(F.globalVars=_.globalVars),F},token:function(y,F){if(y.sol()&&(F.lexical.hasOwnProperty("align")||(F.lexical.align=!1),F.indented=y.indentation(),b(y,F)),F.tokenize!=w&&y.eatSpace())return null;var oe=F.tokenize(y,F);return"comment"==te?oe:(F.lastType="operator"!=te||"++"!=ie&&"--"!=ie?te:"incdec",ee(F,oe,te,ie,y))},indent:function(y,F){if(y.tokenize==w||y.tokenize==M)return k.Pass;if(y.tokenize!=W)return 0;var Se,oe=F&&F.charAt(0),be=y.lexical;if(!/^\s*else\b/.test(F))for(var ot=y.cc.length-1;ot>=0;--ot){var ft=y.cc[ot];if(ft==ne)be=be.prev;else if(ft!=zr&&ft!=R)break}for(;("stat"==be.type||"form"==be.type)&&("}"==oe||(Se=y.cc[y.cc.length-1])&&(Se==Pt||Se==It)&&!/^[,\.=+\-*:?[\(]/.test(F));)be=be.prev;f&&")"==be.type&&"stat"==be.prev.type&&(be=be.prev);var mt=be.type,Ve=oe==mt;return"vardef"==mt?be.indented+("operator"==y.lastType||","==y.lastType?be.info.length+1:0):"form"==mt&&"{"==oe?be.indented:"form"==mt?be.indented+Q:"stat"==mt?be.indented+(function(y,F){return"operator"==y.lastType||","==y.lastType||ue.test(F.charAt(0))||/[,.]/.test(F.charAt(0))}(y,F)?f||Q:0):"switch"!=be.info||Ve||0==_.doubleIndentSwitch?be.align?be.column+(Ve?0:1):be.indented+(Ve?0:Q):be.indented+(/^(?:case|default)\b/.test(F)?Q:2*Q)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:B?null:"/*",blockCommentEnd:B?null:"*/",blockCommentContinue:B?null:" * ",lineComment:B?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:B?"json":"javascript",jsonldMode:E,jsonMode:B,expressionAllowed:wt,skipExpression:function(y){ee(y,"atom","atom","true",new k.StringStream("",2,null))}}}),k.registerHelper("wordChars","javascript",/[\w$]/),k.defineMIME("text/javascript","javascript"),k.defineMIME("text/ecmascript","javascript"),k.defineMIME("application/javascript","javascript"),k.defineMIME("application/x-javascript","javascript"),k.defineMIME("application/ecmascript","javascript"),k.defineMIME("application/json",{name:"javascript",json:!0}),k.defineMIME("application/x-json",{name:"javascript",json:!0}),k.defineMIME("application/manifest+json",{name:"javascript",json:!0}),k.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),k.defineMIME("text/typescript",{name:"javascript",typescript:!0}),k.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(pe(9475))},6864:(bt,rt,pe)=>{!function(k){"use strict";k.defineMode("markdown",function(L,_){var Q=k.getMode(L,"text/html"),f="null"==Q.name;void 0===_.highlightFormatting&&(_.highlightFormatting=!1),void 0===_.maxBlockquoteDepth&&(_.maxBlockquoteDepth=0),void 0===_.taskLists&&(_.taskLists=!1),void 0===_.strikethrough&&(_.strikethrough=!1),void 0===_.emoji&&(_.emoji=!1),void 0===_.fencedCodeBlockHighlighting&&(_.fencedCodeBlockHighlighting=!0),void 0===_.fencedCodeBlockDefaultMode&&(_.fencedCodeBlockDefaultMode="text/plain"),void 0===_.xml&&(_.xml=!0),void 0===_.tokenTypeOverrides&&(_.tokenTypeOverrides={});var B={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var se in B)B.hasOwnProperty(se)&&_.tokenTypeOverrides[se]&&(B[se]=_.tokenTypeOverrides[se]);var X=/^([*\-_])(?:\s*\1){2,}\s*$/,q=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,z=/^\[(x| )\](?=\s)/i,ue=_.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,ce=/^ {0,3}(?:\={1,}|-{2,})\s*$/,Fe=/^[^#!\[\]*_\\<>` "'(~:]+/,te=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,ie=/^\s*\[[^\]]+?\]:.*$/,T=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function g(O,C,Ae){return C.f=C.inline=Ae,Ae(O,C)}function w(O,C,Ae){return C.f=C.block=Ae,Ae(O,C)}function P(O){if(O.linkTitle=!1,O.linkHref=!1,O.linkText=!1,O.em=!1,O.strong=!1,O.strikethrough=!1,O.quote=0,O.indentedCode=!1,O.f==U){var C=f;if(!C){var Ae=k.innerMode(Q,O.htmlState);C="xml"==Ae.mode.name&&null===Ae.state.tagStart&&!Ae.state.context&&Ae.state.tokenize.isInText}C&&(O.f=G,O.block=b,O.htmlState=null)}return O.trailingSpace=0,O.trailingSpaceNewLine=!1,O.prevLine=O.thisLine,O.thisLine={stream:null},null}function b(O,C){var Ae=O.column()===C.indentation,R=function(O){return!O||!/\S/.test(O.string)}(C.prevLine.stream),Y=C.indentedCode,ne=C.prevLine.hr,V=!1!==C.list,Oe=(C.listStack[C.listStack.length-1]||0)+3;C.indentedCode=!1;var Qe=C.indentation;if(null===C.indentationDiff&&(C.indentationDiff=C.indentation,V)){for(C.list=null;Qe<C.listStack[C.listStack.length-1];)C.listStack.pop(),C.listStack.length?C.indentation=C.listStack[C.listStack.length-1]:C.list=!1;!1!==C.list&&(C.indentationDiff=Qe-C.listStack[C.listStack.length-1])}var Ue=!(R||ne||C.prevLine.header||V&&Y||C.prevLine.fencedCodeEnd),Ye=(!1===C.list||ne||R)&&C.indentation<=Oe&&O.match(X),_e=null;if(C.indentationDiff>=4&&(Y||C.prevLine.fencedCodeEnd||C.prevLine.header||R))return O.skipToEnd(),C.indentedCode=!0,B.code;if(O.eatSpace())return null;if(Ae&&C.indentation<=Oe&&(_e=O.match(ue))&&_e[1].length<=6)return C.quote=0,C.header=_e[1].length,C.thisLine.header=!0,_.highlightFormatting&&(C.formatting="header"),C.f=C.inline,K(C);if(C.indentation<=Oe&&O.eat(">"))return C.quote=Ae?1:C.quote+1,_.highlightFormatting&&(C.formatting="quote"),O.eatSpace(),K(C);if(!Ye&&!C.setext&&Ae&&C.indentation<=Oe&&(_e=O.match(q))){var Ct=_e[1]?"ol":"ul";return C.indentation=Qe+O.current().length,C.list=!0,C.quote=0,C.listStack.push(C.indentation),C.em=!1,C.strong=!1,C.code=!1,C.strikethrough=!1,_.taskLists&&O.match(z,!1)&&(C.taskList=!0),C.f=C.inline,_.highlightFormatting&&(C.formatting=["list","list-"+Ct]),K(C)}return Ae&&C.indentation<=Oe&&(_e=O.match(te,!0))?(C.quote=0,C.fencedEndRE=new RegExp(_e[1]+"+ *$"),C.localMode=_.fencedCodeBlockHighlighting&&function(O){if(k.findModeByName){var C=k.findModeByName(O);C&&(O=C.mime||C.mimes[0])}var Ae=k.getMode(L,O);return"null"==Ae.name?null:Ae}(_e[2]||_.fencedCodeBlockDefaultMode),C.localMode&&(C.localState=k.startState(C.localMode)),C.f=C.block=re,_.highlightFormatting&&(C.formatting="code-block"),C.code=-1,K(C)):C.setext||!(Ue&&V||C.quote||!1!==C.list||C.code||Ye||ie.test(O.string))&&(_e=O.lookAhead(1))&&(_e=_e.match(ce))?(C.setext?(C.header=C.setext,C.setext=0,O.skipToEnd(),_.highlightFormatting&&(C.formatting="header")):(C.header="="==_e[0].charAt(0)?1:2,C.setext=C.header),C.thisLine.header=!0,C.f=C.inline,K(C)):Ye?(O.skipToEnd(),C.hr=!0,C.thisLine.hr=!0,B.hr):"["===O.peek()?g(O,C,Ee):g(O,C,C.inline)}function U(O,C){var Ae=Q.token(O,C.htmlState);if(!f){var R=k.innerMode(Q,C.htmlState);("xml"==R.mode.name&&null===R.state.tagStart&&!R.state.context&&R.state.tokenize.isInText||C.md_inside&&O.current().indexOf(">")>-1)&&(C.f=G,C.block=b,C.htmlState=null)}return Ae}function re(O,C){var ne,Ae=C.listStack[C.listStack.length-1]||0,R=C.indentation<Ae;return C.fencedEndRE&&C.indentation<=Ae+3&&(R||O.match(C.fencedEndRE))?(_.highlightFormatting&&(C.formatting="code-block"),R||(ne=K(C)),C.localMode=C.localState=null,C.block=b,C.f=G,C.fencedEndRE=null,C.code=0,C.thisLine.fencedCodeEnd=!0,R?w(O,C,C.block):ne):C.localMode?C.localMode.token(O,C.localState):(O.skipToEnd(),B.code)}function K(O){var C=[];if(O.formatting){C.push(B.formatting),"string"==typeof O.formatting&&(O.formatting=[O.formatting]);for(var Ae=0;Ae<O.formatting.length;Ae++)C.push(B.formatting+"-"+O.formatting[Ae]),"header"===O.formatting[Ae]&&C.push(B.formatting+"-"+O.formatting[Ae]+"-"+O.header),"quote"===O.formatting[Ae]&&C.push(!_.maxBlockquoteDepth||_.maxBlockquoteDepth>=O.quote?B.formatting+"-"+O.formatting[Ae]+"-"+O.quote:"error")}if(O.taskOpen)return C.push("meta"),C.length?C.join(" "):null;if(O.taskClosed)return C.push("property"),C.length?C.join(" "):null;if(O.linkHref?C.push(B.linkHref,"url"):(O.strong&&C.push(B.strong),O.em&&C.push(B.em),O.strikethrough&&C.push(B.strikethrough),O.emoji&&C.push(B.emoji),O.linkText&&C.push(B.linkText),O.code&&C.push(B.code),O.image&&C.push(B.image),O.imageAltText&&C.push(B.imageAltText,"link"),O.imageMarker&&C.push(B.imageMarker)),O.header&&C.push(B.header,B.header+"-"+O.header),O.quote&&(C.push(B.quote),C.push(!_.maxBlockquoteDepth||_.maxBlockquoteDepth>=O.quote?B.quote+"-"+O.quote:B.quote+"-"+_.maxBlockquoteDepth)),!1!==O.list){var R=(O.listStack.length-1)%3;C.push(R?1===R?B.list2:B.list3:B.list1)}return O.trailingSpaceNewLine?C.push("trailing-space-new-line"):O.trailingSpace&&C.push("trailing-space-"+(O.trailingSpace%2?"a":"b")),C.length?C.join(" "):null}function ee(O,C){if(O.match(Fe,!0))return K(C)}function G(O,C){var Ae=C.text(O,C);if(void 0!==Ae)return Ae;if(C.list)return C.list=null,K(C);if(C.taskList)return" "===O.match(z,!0)[1]?C.taskOpen=!0:C.taskClosed=!0,_.highlightFormatting&&(C.formatting="task"),C.taskList=!1,K(C);if(C.taskOpen=!1,C.taskClosed=!1,C.header&&O.match(/^#+$/,!0))return _.highlightFormatting&&(C.formatting="header"),K(C);var Y=O.next();if(C.linkTitle){C.linkTitle=!1;var ne=Y;if("("===Y&&(ne=")"),ne=(ne+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"),O.match(new RegExp("^\\s*(?:[^"+ne+"\\\\]+|\\\\\\\\|\\\\.)"+ne),!0))return B.linkHref}if("`"===Y){var Oe=C.formatting;_.highlightFormatting&&(C.formatting="code"),O.eatWhile("`");var Qe=O.current().length;if(0==C.code&&(!C.quote||1==Qe))return C.code=Qe,K(C);if(Qe==C.code){var Ue=K(C);return C.code=0,Ue}return C.formatting=Oe,K(C)}if(C.code)return K(C);if("\\"===Y&&(O.next(),_.highlightFormatting)){var Ye=K(C),_e=B.formatting+"-escape";return Ye?Ye+" "+_e:_e}if("!"===Y&&O.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return C.imageMarker=!0,C.image=!0,_.highlightFormatting&&(C.formatting="image"),K(C);if("["===Y&&C.imageMarker&&O.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return C.imageMarker=!1,C.imageAltText=!0,_.highlightFormatting&&(C.formatting="image"),K(C);if("]"===Y&&C.imageAltText){_.highlightFormatting&&(C.formatting="image");Ye=K(C);return C.imageAltText=!1,C.image=!1,C.inline=C.f=x,Ye}if("["===Y&&!C.image)return C.linkText&&O.match(/^.*?\]/)||(C.linkText=!0,_.highlightFormatting&&(C.formatting="link")),K(C);if("]"===Y&&C.linkText){_.highlightFormatting&&(C.formatting="link");Ye=K(C);return C.linkText=!1,C.inline=C.f=O.match(/\(.*?\)| ?\[.*?\]/,!1)?x:G,Ye}if("<"===Y&&O.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return C.f=C.inline=xe,_.highlightFormatting&&(C.formatting="link"),(Ye=K(C))?Ye+=" ":Ye="",Ye+B.linkInline;if("<"===Y&&O.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return C.f=C.inline=xe,_.highlightFormatting&&(C.formatting="link"),(Ye=K(C))?Ye+=" ":Ye="",Ye+B.linkEmail;if(_.xml&&"<"===Y&&O.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var Ct=O.string.indexOf(">",O.pos);if(-1!=Ct){var kr=O.string.substring(O.start,Ct);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(kr)&&(C.md_inside=!0)}return O.backUp(1),C.htmlState=k.startState(Q),w(O,C,U)}if(_.xml&&"<"===Y&&O.match(/^\/\w*?>/))return C.md_inside=!1,"tag";if("*"===Y||"_"===Y){for(var Pt=1,It=1==O.pos?" ":O.string.charAt(O.pos-2);Pt<3&&O.eat(Y);)Pt++;var Lt=O.peek()||" ",Dt=!/\s/.test(Lt)&&(!T.test(Lt)||/\s/.test(It)||T.test(It)),lr=!/\s/.test(It)&&(!T.test(It)||/\s/.test(Lt)||T.test(Lt)),nr=null,sr=null;if(Pt%2&&(C.em||!Dt||"*"!==Y&&lr&&!T.test(It)?C.em==Y&&lr&&("*"===Y||!Dt||T.test(Lt))&&(nr=!1):nr=!0),Pt>1&&(C.strong||!Dt||"*"!==Y&&lr&&!T.test(It)?C.strong==Y&&lr&&("*"===Y||!Dt||T.test(Lt))&&(sr=!1):sr=!0),null!=sr||null!=nr)return _.highlightFormatting&&(C.formatting=null==nr?"strong":null==sr?"em":"strong em"),!0===nr&&(C.em=Y),!0===sr&&(C.strong=Y),Ue=K(C),!1===nr&&(C.em=!1),!1===sr&&(C.strong=!1),Ue}else if(" "===Y&&(O.eat("*")||O.eat("_"))){if(" "===O.peek())return K(C);O.backUp(1)}if(_.strikethrough)if("~"===Y&&O.eatWhile(Y)){if(C.strikethrough)return _.highlightFormatting&&(C.formatting="strikethrough"),Ue=K(C),C.strikethrough=!1,Ue;if(O.match(/^[^\s]/,!1))return C.strikethrough=!0,_.highlightFormatting&&(C.formatting="strikethrough"),K(C)}else if(" "===Y&&O.match("~~",!0)){if(" "===O.peek())return K(C);O.backUp(2)}if(_.emoji&&":"===Y&&O.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){C.emoji=!0,_.highlightFormatting&&(C.formatting="emoji");var Ir=K(C);return C.emoji=!1,Ir}return" "===Y&&(O.match(/^ +$/,!1)?C.trailingSpace++:C.trailingSpace&&(C.trailingSpaceNewLine=!0)),K(C)}function xe(O,C){if(">"===O.next()){C.f=C.inline=G,_.highlightFormatting&&(C.formatting="link");var R=K(C);return R?R+=" ":R="",R+B.linkInline}return O.match(/^[^>]+/,!0),B.linkInline}function x(O,C){if(O.eatSpace())return null;var Ae=O.next();return"("===Ae||"["===Ae?(C.f=C.inline=function(O){return function(C,Ae){if(C.next()===O){Ae.f=Ae.inline=G,_.highlightFormatting&&(Ae.formatting="link-string");var Y=K(Ae);return Ae.linkHref=!1,Y}return C.match(fe[O]),Ae.linkHref=!0,K(Ae)}}("("===Ae?")":"]"),_.highlightFormatting&&(C.formatting="link-string"),C.linkHref=!0,K(C)):"error"}var fe={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function Ee(O,C){return O.match(/^([^\]\\]|\\.)*\]:/,!1)?(C.f=We,O.next(),_.highlightFormatting&&(C.formatting="link"),C.linkText=!0,K(C)):g(O,C,G)}function We(O,C){if(O.match("]:",!0)){C.f=C.inline=ze,_.highlightFormatting&&(C.formatting="link");var Ae=K(C);return C.linkText=!1,Ae}return O.match(/^([^\]\\]|\\.)+/,!0),B.linkText}function ze(O,C){return O.eatSpace()?null:(O.match(/^[^\s]+/,!0),void 0===O.peek()?C.linkTitle=!0:O.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),C.f=C.inline=G,B.linkHref+" url")}var Ge={startState:function(){return{f:b,prevLine:{stream:null},thisLine:{stream:null},block:b,htmlState:null,indentation:0,inline:G,text:ee,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(O){return{f:O.f,prevLine:O.prevLine,thisLine:O.thisLine,block:O.block,htmlState:O.htmlState&&k.copyState(Q,O.htmlState),indentation:O.indentation,localMode:O.localMode,localState:O.localMode?k.copyState(O.localMode,O.localState):null,inline:O.inline,text:O.text,formatting:!1,linkText:O.linkText,linkTitle:O.linkTitle,linkHref:O.linkHref,code:O.code,em:O.em,strong:O.strong,strikethrough:O.strikethrough,emoji:O.emoji,header:O.header,setext:O.setext,hr:O.hr,taskList:O.taskList,list:O.list,listStack:O.listStack.slice(0),quote:O.quote,indentedCode:O.indentedCode,trailingSpace:O.trailingSpace,trailingSpaceNewLine:O.trailingSpaceNewLine,md_inside:O.md_inside,fencedEndRE:O.fencedEndRE}},token:function(O,C){if(C.formatting=!1,O!=C.thisLine.stream){if(C.header=0,C.hr=!1,O.match(/^\s*$/,!0))return P(C),null;if(C.prevLine=C.thisLine,C.thisLine={stream:O},C.taskList=!1,C.trailingSpace=0,C.trailingSpaceNewLine=!1,!C.localState&&(C.f=C.block,C.f!=U)){var Ae=O.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(C.indentation=Ae,C.indentationDiff=null,Ae>0)return null}}return C.f(O,C)},innerMode:function(O){return O.block==U?{state:O.htmlState,mode:Q}:O.localState?{state:O.localState,mode:O.localMode}:{state:O,mode:Ge}},indent:function(O,C,Ae){return O.block==U&&Q.indent?Q.indent(O.htmlState,C,Ae):O.localState&&O.localMode.indent?O.localMode.indent(O.localState,C,Ae):k.Pass},blankLine:P,getType:K,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return Ge},"xml"),k.defineMIME("text/markdown","markdown"),k.defineMIME("text/x-markdown","markdown")}(pe(9475),pe(6380),pe(4816))},4816:(bt,rt,pe)=>{!function(k){"use strict";k.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var L=0;L<k.modeInfo.length;L++){var _=k.modeInfo[L];_.mimes&&(_.mime=_.mimes[0])}k.findModeByMIME=function(Q){Q=Q.toLowerCase();for(var f=0;f<k.modeInfo.length;f++){var E=k.modeInfo[f];if(E.mime==Q)return E;if(E.mimes)for(var B=0;B<E.mimes.length;B++)if(E.mimes[B]==Q)return E}return/\+xml$/.test(Q)?k.findModeByMIME("application/xml"):/\+json$/.test(Q)?k.findModeByMIME("application/json"):void 0},k.findModeByExtension=function(Q){Q=Q.toLowerCase();for(var f=0;f<k.modeInfo.length;f++){var E=k.modeInfo[f];if(E.ext)for(var B=0;B<E.ext.length;B++)if(E.ext[B]==Q)return E}},k.findModeByFileName=function(Q){for(var f=0;f<k.modeInfo.length;f++){var E=k.modeInfo[f];if(E.file&&E.file.test(Q))return E}var B=Q.lastIndexOf("."),se=B>-1&&Q.substring(B+1,Q.length);if(se)return k.findModeByExtension(se)},k.findModeByName=function(Q){Q=Q.toLowerCase();for(var f=0;f<k.modeInfo.length;f++){var E=k.modeInfo[f];if(E.name.toLowerCase()==Q)return E;if(E.alias)for(var B=0;B<E.alias.length;B++)if(E.alias[B].toLowerCase()==Q)return E}}}(pe(9475))},6380:(bt,rt,pe)=>{!function(k){"use strict";var L={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},_={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};k.defineMode("xml",function(Q,f){var q,z,E=Q.indentUnit,B={},se=f.htmlMode?L:_;for(var X in se)B[X]=se[X];for(var X in f)B[X]=f[X];function ue(x,fe){function he(ze){return fe.tokenize=ze,ze(x,fe)}var Ee=x.next();return"<"==Ee?x.eat("!")?x.eat("[")?x.match("CDATA[")?he(te("atom","]]>")):null:x.match("--")?he(te("comment","--\x3e")):x.match("DOCTYPE",!0,!0)?(x.eatWhile(/[\w\._\-]/),he(ie(1))):null:x.eat("?")?(x.eatWhile(/[\w\._\-]/),fe.tokenize=te("meta","?>"),"meta"):(q=x.eat("/")?"closeTag":"openTag",fe.tokenize=ce,"tag bracket"):"&"==Ee?(x.eat("#")?x.eat("x")?x.eatWhile(/[a-fA-F\d]/)&&x.eat(";"):x.eatWhile(/[\d]/)&&x.eat(";"):x.eatWhile(/[\w\.\-:]/)&&x.eat(";"))?"atom":"error":(x.eatWhile(/[^&<]/),null)}function ce(x,fe){var he=x.next();if(">"==he||"/"==he&&x.eat(">"))return fe.tokenize=ue,q=">"==he?"endTag":"selfcloseTag","tag bracket";if("="==he)return q="equals",null;if("<"==he){fe.tokenize=ue,fe.state=M,fe.tagName=fe.tagStart=null;var Ee=fe.tokenize(x,fe);return Ee?Ee+" tag error":"tag error"}return/[\'\"]/.test(he)?(fe.tokenize=function(x){var fe=function(he,Ee){for(;!he.eol();)if(he.next()==x){Ee.tokenize=ce;break}return"string"};return fe.isInAttribute=!0,fe}(he),fe.stringStartCol=x.column(),fe.tokenize(x,fe)):(x.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function te(x,fe){return function(he,Ee){for(;!he.eol();){if(he.match(fe)){Ee.tokenize=ue;break}he.next()}return x}}function ie(x){return function(fe,he){for(var Ee;null!=(Ee=fe.next());){if("<"==Ee)return he.tokenize=ie(x+1),he.tokenize(fe,he);if(">"==Ee){if(1==x){he.tokenize=ue;break}return he.tokenize=ie(x-1),he.tokenize(fe,he)}}return"meta"}}function T(x){return x&&x.toLowerCase()}function W(x,fe,he){this.prev=x.context,this.tagName=fe||"",this.indent=x.indented,this.startOfLine=he,(B.doNotIndent.hasOwnProperty(fe)||x.context&&x.context.noIndent)&&(this.noIndent=!0)}function g(x){x.context&&(x.context=x.context.prev)}function w(x,fe){for(var he;;){if(!x.context||!B.contextGrabbers.hasOwnProperty(T(he=x.context.tagName))||!B.contextGrabbers[T(he)].hasOwnProperty(T(fe)))return;g(x)}}function M(x,fe,he){return"openTag"==x?(he.tagStart=fe.column(),P):"closeTag"==x?b:M}function P(x,fe,he){return"word"==x?(he.tagName=fe.current(),z="tag",K):B.allowMissingTagName&&"endTag"==x?(z="tag bracket",K(x,0,he)):(z="error",P)}function b(x,fe,he){if("word"==x){var Ee=fe.current();return he.context&&he.context.tagName!=Ee&&B.implicitlyClosed.hasOwnProperty(T(he.context.tagName))&&g(he),he.context&&he.context.tagName==Ee||!1===B.matchClosing?(z="tag",U):(z="tag error",re)}return B.allowMissingTagName&&"endTag"==x?(z="tag bracket",U(x,0,he)):(z="error",re)}function U(x,fe,he){return"endTag"!=x?(z="error",U):(g(he),M)}function re(x,fe,he){return z="error",U(x,0,he)}function K(x,fe,he){if("word"==x)return z="attribute",ee;if("endTag"==x||"selfcloseTag"==x){var Ee=he.tagName,We=he.tagStart;return he.tagName=he.tagStart=null,"selfcloseTag"==x||B.autoSelfClosers.hasOwnProperty(T(Ee))?w(he,Ee):(w(he,Ee),he.context=new W(he,Ee,We==he.indented)),M}return z="error",K}function ee(x,fe,he){return"equals"==x?G:(B.allowMissing||(z="error"),K(x,0,he))}function G(x,fe,he){return"string"==x?xe:"word"==x&&B.allowUnquoted?(z="string",K):(z="error",K(x,0,he))}function xe(x,fe,he){return"string"==x?xe:K(x,0,he)}return ue.isInText=!0,{startState:function(x){var fe={tokenize:ue,state:M,indented:x||0,tagName:null,tagStart:null,context:null};return null!=x&&(fe.baseIndent=x),fe},token:function(x,fe){if(!fe.tagName&&x.sol()&&(fe.indented=x.indentation()),x.eatSpace())return null;q=null;var he=fe.tokenize(x,fe);return(he||q)&&"comment"!=he&&(z=null,fe.state=fe.state(q||he,x,fe),z&&(he="error"==z?he+" error":z)),he},indent:function(x,fe,he){var Ee=x.context;if(x.tokenize.isInAttribute)return x.tagStart==x.indented?x.stringStartCol+1:x.indented+E;if(Ee&&Ee.noIndent)return k.Pass;if(x.tokenize!=ce&&x.tokenize!=ue)return he?he.match(/^(\s*)/)[0].length:0;if(x.tagName)return!1!==B.multilineTagIndentPastTag?x.tagStart+x.tagName.length+2:x.tagStart+E*(B.multilineTagIndentFactor||1);if(B.alignCDATA&&/<!\[CDATA\[/.test(fe))return 0;var We=fe&&/^<(\/)?([\w_:\.-]*)/.exec(fe);if(We&&We[1])for(;Ee;){if(Ee.tagName==We[2]){Ee=Ee.prev;break}if(!B.implicitlyClosed.hasOwnProperty(T(Ee.tagName)))break;Ee=Ee.prev}else if(We)for(;Ee;){var ze=B.contextGrabbers[T(Ee.tagName)];if(!ze||!ze.hasOwnProperty(T(We[2])))break;Ee=Ee.prev}for(;Ee&&Ee.prev&&!Ee.startOfLine;)Ee=Ee.prev;return Ee?Ee.indent+E:x.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:B.htmlMode?"html":"xml",helperType:B.htmlMode?"html":"xml",skipAttribute:function(x){x.state==G&&(x.state=K)},xmlCurrentTag:function(x){return x.tagName?{name:x.tagName,close:"closeTag"==x.type}:null},xmlCurrentContext:function(x){for(var fe=[],he=x.context;he;he=he.prev)fe.push(he.tagName);return fe.reverse()}}}),k.defineMIME("text/xml","xml"),k.defineMIME("application/xml","xml"),k.mimeModes.hasOwnProperty("text/html")||k.defineMIME("text/html",{name:"xml",htmlMode:!0})}(pe(9475))},2289:(bt,rt,pe)=>{!function(k){var L={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}",mutiCharsPairs:[["*(",")*"]]},_=k.Pos;function Q(te,ie){return"pairs"==ie&&"string"==typeof te?te:"object"==typeof te&&null!=te[ie]?te[ie]:L[ie]}k.defineOption("autoCloseBrackets",!1,function(te,ie,T){T&&T!=k.Init&&(te.removeKeyMap(f),te.state.closeBrackets=null),ie&&(E(Q(ie,"pairs")),te.state.closeBrackets=ie,te.addKeyMap(f))});var f={Backspace:function(te){var ie=se(te);if(!ie||te.getOption("disableInput"))return k.Pass;for(var T=Q(ie,"pairs"),W=te.listSelections(),g=0;g<W.length;g++){if(!W[g].empty())return k.Pass;var w=ce(te,W[g].head);if(!w||T.indexOf(w)%2!=0)return k.Pass}for(g=W.length-1;g>=0;g--){var M=W[g].head;te.replaceRange("",_(M.line,M.ch-1),_(M.line,M.ch+1),"+delete")}},Enter:function(te){var ie=se(te),T=ie&&Q(ie,"explode");if(!T||te.getOption("disableInput"))return k.Pass;for(var W=te.listSelections(),g=0;g<W.length;g++){if(!W[g].empty())return k.Pass;var w=ce(te,W[g].head);if(!w||T.indexOf(w)%2!=0)return k.Pass}te.operation(function(){var M=te.lineSeparator()||"\n";te.replaceSelection(M+M,null),te.execCommand("goCharLeft"),W=te.listSelections();for(var P=0;P<W.length;P++){var b=W[P].head.line;te.indentLine(b,null,!0),te.indentLine(b+1,null,!0)}})}};function E(te){for(var ie=0;ie<te.length;ie++){var T=te.charAt(ie),W="'"+T+"'";f[W]||(f[W]=B(T))}}function B(te){return function(ie){return function(te,ie){var T=se(te);if(!T||te.getOption("disableInput"))return k.Pass;var W=Q(T,"pairs"),g=W.indexOf(ie);if(-1==g)return k.Pass;var w=Q(T,"triples"),M=W.charAt(g+1)==ie,P=te.listSelections(),b=g%2==0;const U=Q(T,"mutiCharsPairs");var re;let K,ee;for(var G=0;G<P.length;G++){var fe,xe=P[G],x=xe.head,he=te.getRange(x,_(x.line,x.ch+1));for(const Ge of U){if(K=Ge[0],K[K.length-1]===ie)for(let O=1;O<K.length;O++){const C=te.getRange(_(x.line,x.ch-O),x);if(K[K.length-1-O]!==C){K=void 0;break}}else K=void 0;if(K){ee=Ge[1];break}}if(K)fe="mutiCharsPairs";else if(b&&!xe.empty())fe="surround";else if(!M&&b||he!=ie)if(M&&x.ch>1&&w.indexOf(ie)>=0&&te.getRange(_(x.line,x.ch-2),x)==ie+ie){if(x.ch>2&&/\bstring/.test(te.getTokenTypeAt(_(x.line,x.ch-2))))return k.Pass;fe="addFour"}else if(M){var Ee=0==x.ch?" ":te.getRange(_(x.line,x.ch-1),x);if(k.isWordChar(he)||Ee==ie||k.isWordChar(Ee))return k.Pass;fe="both"}else{if(!b)return k.Pass;fe="both"}else fe=M&&Fe(te,x)?"both":w.indexOf(ie)>=0&&te.getRange(x,_(x.line,x.ch+3))==ie+ie+ie?"skipThree":"skip";if(re){if(re!=fe)return k.Pass}else re=fe}var We=g%2?W.charAt(g-1):ie,ze=g%2?ie:W.charAt(g+1);te.operation(function(){if("skip"==re)te.execCommand("goCharRight");else if("skipThree"==re)for(var Ge=0;Ge<3;Ge++)te.execCommand("goCharRight");else if("surround"==re){var O=te.getSelections();for(Ge=0;Ge<O.length;Ge++)O[Ge]=We+O[Ge]+ze;for(te.replaceSelections(O,"around"),O=te.listSelections().slice(),Ge=0;Ge<O.length;Ge++)O[Ge]=z(O[Ge]);te.setSelections(O)}else if("both"==re)te.replaceSelection(We+ze,null),te.triggerElectric(We+ze),te.execCommand("goCharLeft");else if("addFour"==re)te.replaceSelection(We+We+We+We,"before"),te.execCommand("goCharRight");else if("mutiCharsPairs"===re){te.replaceSelection(K[K.length-1]+ee,null),te.triggerElectric(K[K.length-1]+ee);for(let C=0;C<ee.length;C++)te.execCommand("goCharLeft")}})}(ie,te)}}function se(te){var ie=te.state.closeBrackets;return!ie||ie.override?ie:te.getModeAt(te.getCursor()).closeBrackets||ie}function z(te){var ie=k.cmpPos(te.anchor,te.head)>0;return{anchor:new _(te.anchor.line,te.anchor.ch+(ie?-1:1)),head:new _(te.head.line,te.head.ch+(ie?1:-1))}}function ce(te,ie){var T=te.getRange(_(ie.line,ie.ch-1),_(ie.line,ie.ch+1));return 2==T.length?T:null}function Fe(te,ie){var T=te.getTokenAt(_(ie.line,ie.ch+1));return/\bstring/.test(T.type)&&T.start==ie.ch&&(0==ie.ch||!/\bstring/.test(te.getTokenTypeAt(ie)))}E(L.pairs+"`")}(pe(9475))},2363:(bt,rt,pe)=>{"use strict";pe.r(rt),pe.d(rt,{MarkdownEditorModule:()=>Sr});var k=pe(6903),L=pe(2950),_=pe(3476),Q=pe(9475),f=pe(8079),E=pe(8513);let B=(()=>{class ae{constructor(H,le){this.markdownService=H,this.commands=Q.commands,this.docContentSet$=new L.x,this.docContentModified$=new L.x,this.docEditorLoaded$=new L.x,le.currentEditor=this,this.docEditorLoaded$.subscribe(we=>this.editor=we)}gotoLine(H){this.editor.focus(),this.editor.setCursor(H),this.editor.execCommand("showInCenter")}selectRange(H,le,we,De){this.editor.focus(),this.editor.setSelection({line:H,ch:le},{line:we,ch:De}),this.editor.execCommand("showInCenter")}replaceRange(H,le,we,De,tt){this.editor.replaceRange(H,{line:le,ch:we},{line:De,ch:tt})}}return ae.\u0275fac=function(H){return new(H||ae)(f.LFG(_.A),f.LFG(E.d))},ae.\u0275prov=f.Yz7({token:ae,factory:ae.\u0275fac}),ae})();var se=pe(4060),b=(pe(8237),pe(7214),pe(6584),pe(2391),pe(7660),pe(615),pe(1252),pe(102),pe(2946),pe(2289),pe(6571),pe(3613),pe(8209),pe(7838),pe(2));let U=(()=>{class ae extends b.LF{constructor(H,le,we){super(),this.editorService=H,this.utils=le,this.elementRef=we,this.change=new f.vpe,this.focus=new f.vpe,this.blur=new f.vpe,this.afterInit=new L.x,this._contentSet=!1,super.addSub(this.utils.isWideScreen$.subscribe(De=>this.showLineNumber=De))}get host(){return this._host||(this._host=this.elementRef.nativeElement.getElementsByTagName("textarea")[0]),this._host}ngOnInit(){this.config=this.config||{mode:{name:"gfm",highlightFormatting:!0},lineNumbers:this.showLineNumber,lineWrapping:!0,autoCloseBrackets:!0,autoCloseTags:!0,matchBrackets:!0,matchTags:{bothTags:!0},extraKeys:{F11:function(H){H.setOption("fullScreen",!H.getOption("fullScreen"))},Esc:function(H){H.getOption("fullScreen")&&H.setOption("fullScreen",!1)}}},this.codemirrorInit(this.config),this.afterInit.next(this.codemirror),this.editorService.docEditorLoaded$.next(this.codemirror)}get value(){return this.codemirror.getValue()}codemirrorInit(H){this.codemirror=Q.fromTextArea(this.host,H),this.codemirror.on("change",()=>{if(this._contentSet)return;const le=this.value;this.change.emit(le),this.editorService.docContentModified$.next([le,this.codemirror])}),this.codemirror.on("cursorActivity",le=>this.changeCursorStyle(le)),this.codemirror.on("focus",()=>{this.focus.emit()}),this.codemirror.on("blur",()=>{this.blur.emit()})}writeValue(H){this.codemirror&&(this._contentSet=!0,this.codemirror.setValue(H),this._contentSet=!1,this.codemirror.clearHistory(),this.editorService.docContentSet$.next(this.codemirror))}changeCursorStyle(H){const le=H.getCursor(),we=this.codemirror.cursorCoords(le),De=document.elementFromPoint(we.left,we.top+5),tt=H.display.cursorDiv;De&&De.className.includes("cm-em")?tt.classList.contains("cursor-italic")||tt.classList.add("cursor-italic"):tt.classList.remove("cursor-italic")}refresh(){this.codemirror.refresh()}}return ae.\u0275fac=function(H){return new(H||ae)(f.Y36(B),f.Y36(b.dU),f.Y36(f.SBq))},ae.\u0275cmp=f.Xpm({type:ae,selectors:[["ms-codemirror"]],inputs:{config:"config"},outputs:{change:"change",focus:"focus",blur:"blur"},features:[f.qOj],decls:2,vars:0,consts:[["host",""]],template:function(H,le){1&H&&f._UZ(0,"textarea",null,0)},encapsulation:2}),ae})();var re=pe(2518),K=pe(6681),ee=pe(1744),G=pe(7992),xe=pe(8854),x=pe(7380),fe=pe(6251),he=pe(1233),Ee=pe(1935),We=pe(2908),ze=pe(5649),Ge=pe(3550),O=pe(9597),C=pe(3863);let Ae=(()=>{class ae extends b.LF{constructor(H,le,we){super(),this.editorService=H,this.store=le,this.documentEffects=we,this.isSyncing$=new We.X(!1),this.editorLoaded$=this.editorService.docEditorLoaded$,super.addSub(this.store.currentDocStatus_IsEditorDirty$.pipe((0,ze.V)(this.editorLoaded$),(0,Ge.b)(b.pe),(0,re.b)(([De,tt])=>{De&&this.documentEffects.saveDocument_.next({content:tt.getValue(),format:b.cZ.md})}),(0,b.P0)(8,b.pe))).addSub(this.editorService.docContentSet$.subscribe(De=>{this.docLoadedHandler(De)})).addSub(this.editorService.docContentModified$.subscribe(([De,tt])=>this.checkDirty(tt))).addSub(this.documentEffects.saveDocument_.operationStatus$.pipe((0,ze.V)(this.editorLoaded$)).subscribe(([De,tt])=>{De.step===O.m7.Start?(this.docSavedHandler(tt),this.isSaving=!0):De.isEndStatus()&&(this.isSaving=!1)}))}docLoadedHandler(H){const le=H.getDoc();this.contentGeneration=le.changeGeneration(),le.clearHistory(),this.checkDirty(H)}docSavedHandler(H){H&&(this.contentGeneration=H.getDoc().changeGeneration(!1),this.checkDirty(H))}checkDirty(H){let le=this.store.currentDocStatus$.state;if(le||(le={id:this.store.docStatus.currentId_.state,isEditable:!0},this.store.docStatus.set(le)),!this.contentGeneration)return;const we=!H.getDoc().isClean(this.contentGeneration);le.isEditorDirty!==we&&this.store.updateCurrentDocStatus({isEditorDirty:we})}}return ae.\u0275fac=function(H){return new(H||ae)(f.LFG(B),f.LFG(C.G),f.LFG(fe.CL))},ae.\u0275prov=f.Yz7({token:ae,factory:ae.\u0275fac}),ae})();pe(1900),pe(8823),pe(8543);var V=pe(7826),Oe=pe(6527),Qe=pe(3860);const Ue=["imageUpload"],Ye=["progress"];function _e(ae,me){if(1&ae&&(f.TgZ(0,"span"),f._uU(1),f.qZA()),2&ae){const H=f.oxw();f.xp6(1),f.Oqu(H.data.message)}}function Ct(ae,me){if(1&ae&&f._UZ(0,"mat-progress-bar",6,7),2&ae){const H=f.oxw();f.Q6J("value",H.progressPercent)}}function kr(ae,me){if(1&ae){const H=f.EpF();f.TgZ(0,"div",8),f.TgZ(1,"button",9),f.NdJ("click",function(){return f.CHM(H),f.oxw().action()}),f._uU(2),f.qZA(),f.qZA()}if(2&ae){const H=f.oxw();f.xp6(2),f.Oqu(H.data.action)}}let Pt=(()=>{class ae{constructor(H,le){this.data=H,this.snackBarRef=le,this.progressPercent=0,this.showMessage=!0,this.accept="image/*",this.accept=H.accept}onFileChanged(H){this.selectedFile=H.target.files[0],this.showMessage=!1,this.data.action="cancel",this.data.takeAction(this.selectedFile,le=>{this.progressPercent=le})}get hasAction(){return!!this.data.action}action(){"cancel"!==this.data.action?(this.imageUpload.nativeElement.click(),this.data.selectFile(),this.data.action="cancel"):this.data.cancelAction()}}return ae.\u0275fac=function(H){return new(H||ae)(f.Y36(V.qD),f.Y36(V.OX))},ae.\u0275cmp=f.Xpm({type:ae,selectors:[["ms-file-upload"]],viewQuery:function(H,le){if(1&H&&(f.Gf(Ue,5),f.Gf(Ye,5)),2&H){let we;f.iGM(we=f.CRH())&&(le.imageUpload=we.first),f.iGM(we=f.CRH())&&(le.progressBar=we.first)}},decls:7,vars:4,consts:[["type","file",2,"display","none",3,"accept","change"],["imageUpload",""],[1,"mat-simple-snackbar"],[4,"ngIf"],["mode","determinate",3,"value",4,"ngIf"],["class","mat-simple-snackbar-action",4,"ngIf"],["mode","determinate",3,"value"],["progress",""],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(H,le){1&H&&(f.TgZ(0,"input",0,1),f.NdJ("change",function(De){return le.onFileChanged(De)}),f.qZA(),f.TgZ(2,"div"),f.TgZ(3,"div",2),f.YNc(4,_e,2,1,"span",3),f.YNc(5,Ct,2,1,"mat-progress-bar",4),f.YNc(6,kr,3,1,"div",5),f.qZA(),f.qZA()),2&H&&(f.Q6J("accept",le.accept),f.xp6(4),f.Q6J("ngIf",le.showMessage),f.xp6(1),f.Q6J("ngIf",!le.showMessage),f.xp6(1),f.Q6J("ngIf",le.hasAction))},directives:[k.O5,Oe.pW,Qe.lW],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2}),ae})();var It=pe(4992),Lt=pe(7737),Dt=pe(3346),lr=pe(8453);let nr=(()=>{class ae{constructor(H,le,we){this._snackBar=H,this._github=le,this._store=we}upload(H){let le=null,we=null;const De=this._snackBar.openFromComponent(Pt,{data:{accept:`${H}/*`,message:`pick ${H} to upload?`,action:"Ok",selectFile:()=>clearTimeout(le),cancelAction:()=>{we&&we.unsubscribe(),console.log(`${H} uploading canceled`),setTimeout(tt=>De.dismiss(),1e3)},takeAction:(tt,_t)=>{const gt=new FileReader;gt.onloadend=ve=>{const Re=gt.result,wt=Re.substr(Re.indexOf(",")+1);we=this._github.init().pipe((0,It.w)(y=>{const F=this._store.currentId_.state,oe=(new Date).toISOString().replace(/[-:.]/g,"");return y.newFileReportProgress(`${Lt.IQ}/${F}/${H}/${oe}-${tt.name}`,wt,!0)})).subscribe({next:y=>{switch(y.type){case Dt.dt.UploadProgress:const F=Math.round(100*y.loaded/y.total);_t(F);break;case Dt.dt.Response:this.fileUploaded(y.body.content.download_url),De.dismiss()}},error:y=>{De.dismiss(),this._snackBar.open(y.error.message,"ok",{duration:2e3}),console.error(y)}})},gt.readAsDataURL(tt)}},duration:0});le=setTimeout(tt=>De.dismiss(),6e3)}}return ae.\u0275fac=function(H){return new(H||ae)(f.LFG(V.ux),f.LFG(lr.SS),f.LFG(C.G))},ae.\u0275prov=f.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae})(),sr=(()=>{class ae{constructor(H,le,we,De){this._editorService=H,this._commandService=le,this._uploadService=we,this.markdownStore=De,this._commandService.commands.subscribe(tt=>this.handleCommand(tt)),this._editorService.docEditorLoaded$.subscribe(tt=>{ae.COMMANDS_CONFIG||(ae.COMMANDS_CONFIG={Bold:{command:"Bold",func:(ve,Re)=>`**${ve||Re}**`,startSize:2,hotKey:"Ctrl-M B"},Italic:{command:"Italic",func:(ve,Re)=>`*${ve||Re}*`,startSize:1,hotKey:"Ctrl-M T"},Heading:{command:"Heading",func:(ve,Re)=>`# ${ve||Re}`,startSize:2,hotKey:"Ctrl-M H"},Reference:{command:"Reference",func:(ve,Re)=>`> ${ve||Re}`,startSize:2,hotKey:"Ctrl-M R"},Link:{command:"Link",func:(ve,Re)=>`[${ve||Re}]()`,endSize:1,hotKey:"Ctrl-M L"},Image:{command:"Image",func:(ve,Re)=>`![${ve||Re}]()`,endSize:1,hotKey:"Ctrl-M I"},Ul:{command:"Ul",func:(ve,Re)=>`- ${ve||Re}`,startSize:2,hotKey:"Ctrl-M U"},Ol:{command:"Ol",func:(ve,Re)=>`1 ${ve||Re}`,startSize:2,hotKey:"Ctrl-M O"},Code:{command:"Code",func:(ve,Re,wt)=>{const y=this.editor.getCursor(),F=this.editor.getSearchCursor(/^\s*```[^\S\n\r]*(\S+)/,y);let be,oe=F.findPrevious();return oe?be=F.pos.match[1]:(oe=F.findNext(),be=oe?F.pos.match[1]:""),wt.startSize=be?be.length+4:3,"```"+be+"\r\n"+(ve||Re)+"\r\n```"},startSize:3,hotKey:"Ctrl-M C"}}),this.editor=tt;const _t=ae.COMMANDS_CONFIG,gt={};for(const ve in _t)if(_t.hasOwnProperty(ve)){const wt=this;gt[_t[ve].hotKey]=function(){wt.insertContent(ve)}}this.codeMirrorMaps(gt)})}codeMirrorMaps(H){H["Ctrl-M Q"]=function(we){we.display.input.textarea.blur()},H["Ctrl-Alt-Up"]=()=>{this.markdownStore.scrollView_.next({isUp:!0})},H["Ctrl-Alt-Down"]=()=>{this.markdownStore.scrollView_.next({isUp:!1})},H["Ctrl-Up"]="scrollLineUp",H["Ctrl-G"]="jumpToLine",H["Ctrl-Down"]="scrollLineDown",H["Ctrl-F"]="findPersistent",H["Shift-Delete"]="killLine",H["Shift-Backspace"]="delLineLeft",H["Ctrl-Shift-K"]="deleteLine",H.Home="goLineStart",H.End="goLineEnd",H["Ctrl-Left"]="goWordLeft",H["Ctrl-Right"]="goWordRight",H["Ctrl-Alt-Left"]="goSubwordLeft",H["Ctrl-Alt-Right"]="goSubwordRight",H["Ctrl-Backspace"]="delWordBefore",H["Ctrl-Shift-Backspace"]="delWordAfter",H["Ctrl-Alt-Backspace"]="delGroupBefore",H["Ctrl-Alt-Shift-Backspace"]="delGroupAfter",H.Tab=we=>{we.somethingSelected()?we.indentSelection("add"):we.execCommand("insertSoftTab")},H["Shift-Tab"]=we=>{we.indentSelection("subtract")};const le=this._commandService.commands;H["Alt-\\"]=le.goToBracket,H["Alt-Shift-\\"]=le.selectBetweenBrackets,H["Alt-Shift-Right"]=le.selectScope,H["Ctrl-Enter"]=le.insertLineAfter,H["Ctrl-Shift-Enter"]=le.insertLineBefore,H["Alt-Up"]=le.swapLineUp,H["Alt-Down"]=le.swapLineDown,H["Ctrl-/"]=le.toggleCommentIndented,H["Ctrl-I"]=le.selectLine,H["Ctrl-D"]=le.selectNextOccurrence,H["Ctrl-H"]=le.replace,H.Esc=le.singleSelectionTop,H["Alt-Shift+Down"]=le.duplicateLine,H.Backspace=le.smartBackspace,H["Alt-M"]="showInCenter",H["Ctrl-M M"]=this.insertMeta,this.editor.setOption("extraKeys",Q.normalizeKeyMap(H))}insertMeta(H){H.setCursor({line:1,ch:0}),H.replaceSelection(G.B0,"start"),H.focus()}handleCommand(H){this.insertContent(H.name)}insertContent(H){if(!this.editor)return;let le=this.editor.getSelection();if("Focus"===H)return void this.editor.focus();if("Meta"===H)return void this.insertMeta(this.editor);const we=ae.COMMANDS_CONFIG[H];le=we.func(le,"",we);const De=this.editor.getCursor();if(we.startSize)this.editor.replaceSelection(le,"start"),this.editor.focus(),this.editor.setCursor({line:De.line,ch:De.ch+we.startSize});else if(we.endSize){this.editor.replaceSelection(le,"around");const tt=this.editor.getCursor("to");this.editor.focus(),this.editor.setCursor({line:tt.line,ch:tt.ch-we.endSize})}"Image"===we.command&&(this._uploadService.fileUploaded=tt=>this.editor.replaceSelection(tt),this._uploadService.upload("image"))}}return ae.\u0275fac=function(H){return new(H||ae)(f.LFG(B),f.LFG(b.VD),f.LFG(nr),f.LFG(_.A))},ae.\u0275prov=f.Yz7({token:ae,factory:ae.\u0275fac}),ae})();var Ir=pe(4911),Kt=pe(5654),Ar=pe(6923),Ht=pe(955),Zt=pe(3196),xt=pe(7733),br=pe(6134),it=pe(2118);let Er=(()=>{class ae{constructor(H){this._bottomSheetRef=H,this.changeNote=""}onOk(H){this._bottomSheetRef.dismiss(),H.preventDefault()}}return ae.\u0275fac=function(H){return new(H||ae)(f.Y36(Zt.oL))},ae.\u0275cmp=f.Xpm({type:ae,selectors:[["change-note-input"]],decls:8,vars:2,consts:[[1,"input-form"],["appearance","fill",1,"input-field"],["matInput","","placeholder","showed document history",3,"ngModel","ngModelChange","keyup.Enter"],["mat-flat-button","","color","primary",3,"autofocus","click"],["okButton",""]],template:function(H,le){if(1&H&&(f.TgZ(0,"div",0),f.TgZ(1,"mat-form-field",1),f.TgZ(2,"mat-label"),f._uU(3,"document change note"),f.qZA(),f.TgZ(4,"input",2),f.NdJ("ngModelChange",function(De){return le.changeNote=De})("keyup.Enter",function(De){return le.onOk(De)}),f.qZA(),f.qZA(),f.TgZ(5,"button",3,4),f.NdJ("click",function(De){return le.onOk(De)}),f._uU(7,"OK"),f.qZA(),f.qZA()),2&H){const we=f.MAs(6);f.xp6(4),f.Q6J("ngModel",le.changeNote),f.xp6(1),f.Q6J("autofocus",we.focus())}},directives:[xt.KE,xt.hX,br.Nt,it.Fj,it.JJ,it.On,Qe.lW],styles:[".input-form[_ngcontent-%COMP%]{width:100%;max-width:80rem;display:flex;align-items:center;flex-direction:column}.input-field[_ngcontent-%COMP%]{width:100%}"]}),ae})();var Ke=pe(4478),st=pe(7883),pt=pe(3359),Xe=pe(7945),at=pe(7394),et=pe(9819),Gt=pe(9831);function ct(ae,me){if(1&ae){const H=f.EpF();f.TgZ(0,"button",11),f.NdJ("click",function(){return f.CHM(H),f.oxw().insertContent("Bold")}),f.TgZ(1,"mat-icon"),f._uU(2,"format_bold"),f.qZA(),f.qZA()}}function kt(ae,me){if(1&ae){const H=f.EpF();f.TgZ(0,"button",12),f.NdJ("click",function(){return f.CHM(H),f.oxw().insertContent("Italic")}),f.TgZ(1,"mat-icon"),f._uU(2,"format_italic"),f.qZA(),f.qZA()}}function Hr(ae,me){if(1&ae){const H=f.EpF();f.TgZ(0,"button",13),f.NdJ("click",function(){return f.CHM(H),f.oxw().insertContent("Heading")}),f.TgZ(1,"mat-icon"),f._uU(2,"title"),f.qZA(),f.qZA()}}function jr(ae,me){if(1&ae){const H=f.EpF();f.TgZ(0,"button",14),f.NdJ("click",function(){return f.CHM(H),f.oxw().insertContent("Reference")}),f.TgZ(1,"mat-icon"),f._uU(2,"format_quote"),f.qZA(),f.qZA()}}function Cr(ae,me){if(1&ae){const H=f.EpF();f.TgZ(0,"button",15),f.NdJ("click",function(){return f.CHM(H),f.oxw().insertContent("Ul")}),f.TgZ(1,"mat-icon"),f._uU(2,"format_list_bulleted"),f.qZA(),f.qZA()}}function $t(ae,me){if(1&ae){const H=f.EpF();f.TgZ(0,"button",16),f.NdJ("click",function(){return f.CHM(H),f.oxw().insertContent("Ol")}),f.TgZ(1,"mat-icon"),f._uU(2,"format_list_numbered"),f.qZA(),f.qZA()}}function tn(ae,me){if(1&ae){const H=f.EpF();f.TgZ(0,"button",17),f.NdJ("click",function(){return f.CHM(H),f.oxw().insertContent("Code")}),f.TgZ(1,"mat-icon"),f._uU(2,"code"),f.qZA(),f.qZA()}}function _r(ae,me){if(1&ae){const H=f.EpF();f.TgZ(0,"button",18),f.NdJ("click",function(){return f.CHM(H),f.oxw().insertContent("Link")}),f.TgZ(1,"mat-icon"),f._uU(2,"link"),f.qZA(),f.qZA()}}function Wr(ae,me){if(1&ae){const H=f.EpF();f.TgZ(0,"button",19),f.NdJ("click",function(){return f.CHM(H),f.oxw().insertContent("Image")}),f.TgZ(1,"mat-icon"),f._uU(2,"image"),f.qZA(),f.qZA()}}const Yr=function(ae){return{"tool-bar--bottom":ae}};let Tt=(()=>{class ae{constructor(H,le,we){this._verticalSplitPane=H,this._utils=le,this._keyMapService=we,this._destroy$=new L.x,this.isScreenWide$=this._utils.isWideScreen$,this.more=()=>{},this._hideIcons={Ol:!1,Italic:!1,Link:!1},this._verticalSplitPane.notifySizeDidChange.pipe((0,Gt.R)(this._destroy$)).subscribe(De=>{this.width!==De.primary&&(this.width=`${De.primary}px`)})}get options(){return this._options}insertContent(H){this._keyMapService.insertContent(H)}set options(H){this._options=H||{hideIcons:[]},this._hideIcons={},(this._options.hideIcons||[]).forEach(le=>{this._hideIcons[le]=!0})}ngOnDestroy(){this._destroy$.next(null)}}return ae.\u0275fac=function(H){return new(H||ae)(f.Y36(G.Mi),f.Y36(b.dU),f.Y36(sr))},ae.\u0275cmp=f.Xpm({type:ae,selectors:[["ms-codemirror-toolbar"]],hostVars:2,hostBindings:function(H,le){2&H&&f.Udp("width",le.width)},inputs:{options:"options"},decls:14,vars:14,consts:[[1,"tool-bar",2,"height","3.8rem",3,"ngClass"],["mat-icon-button","","title","Bold",3,"click",4,"ngIf"],["mat-icon-button","","title","Italic",3,"click",4,"ngIf"],["mat-icon-button","","title","Heading",3,"click",4,"ngIf"],["mat-icon-button","","title","Reference",3,"click",4,"ngIf"],["mat-icon-button","","title","Unordered List",3,"click",4,"ngIf"],["mat-icon-button","","title","Ordered List",3,"click",4,"ngIf"],["mat-icon-button","","title","Code Block",3,"click",4,"ngIf"],["mat-icon-button","","title","Link",3,"click",4,"ngIf"],["mat-icon-button","","title","Image",3,"click",4,"ngIf"],["mat-icon-button","","title","Meta Data",3,"click"],["mat-icon-button","","title","Bold",3,"click"],["mat-icon-button","","title","Italic",3,"click"],["mat-icon-button","","title","Heading",3,"click"],["mat-icon-button","","title","Reference",3,"click"],["mat-icon-button","","title","Unordered List",3,"click"],["mat-icon-button","","title","Ordered List",3,"click"],["mat-icon-button","","title","Code Block",3,"click"],["mat-icon-button","","title","Link",3,"click"],["mat-icon-button","","title","Image",3,"click"]],template:function(H,le){1&H&&(f.TgZ(0,"mat-toolbar",0),f.ALo(1,"async"),f.YNc(2,ct,3,0,"button",1),f.YNc(3,kt,3,0,"button",2),f.YNc(4,Hr,3,0,"button",3),f.YNc(5,jr,3,0,"button",4),f.YNc(6,Cr,3,0,"button",5),f.YNc(7,$t,3,0,"button",6),f.YNc(8,tn,3,0,"button",7),f.YNc(9,_r,3,0,"button",8),f.YNc(10,Wr,3,0,"button",9),f.TgZ(11,"button",10),f.NdJ("click",function(){return le.insertContent("Meta")}),f.TgZ(12,"mat-icon"),f._uU(13,"receipt"),f.qZA(),f.qZA(),f.qZA()),2&H&&(f.Q6J("ngClass",f.VKq(12,Yr,!1===f.lcZ(1,10,le.isScreenWide$))),f.xp6(2),f.Q6J("ngIf",!le._hideIcons.Bold),f.xp6(1),f.Q6J("ngIf",!le._hideIcons.Italic),f.xp6(1),f.Q6J("ngIf",!le._hideIcons.Heading),f.xp6(1),f.Q6J("ngIf",!le._hideIcons.Refrence),f.xp6(1),f.Q6J("ngIf",!le._hideIcons.Ul),f.xp6(1),f.Q6J("ngIf",!le._hideIcons.Ol),f.xp6(1),f.Q6J("ngIf",!le._hideIcons.Code),f.xp6(1),f.Q6J("ngIf",!le._hideIcons.Link),f.xp6(1),f.Q6J("ngIf",!le._hideIcons.Image))},directives:[Xe.Ye,k.mk,k.O5,Qe.lW,at.Hw],pipes:[k.Ov],styles:[".tool-bar--bottom[_ngcontent-%COMP%]{position:fixed;bottom:0;padding:0;overflow-x:auto;overflow-y:hidden}.tool-bar[_ngcontent-%COMP%]{background:whitesmoke;z-index:8}[_nghost-%COMP%]{z-index:10;display:block}"]}),ae})();const Ur=["toolbar"];function Jr(ae,me){if(1&ae){const H=f.EpF();f.TgZ(0,"button",4),f.NdJ("click",function(){return f.CHM(H),f.oxw().togglePreview()}),f.TgZ(1,"mat-icon"),f._uU(2),f.ALo(3,"async"),f.qZA(),f.qZA()}if(2&ae){const H=f.oxw();f.xp6(2),f.Oqu((f.lcZ(3,1,H.showPreview$),"chrome_reader_mode"))}}function Ft(ae,me){if(1&ae){const H=f.EpF();f.TgZ(0,"button",10),f.NdJ("click",function(we){return f.CHM(H),f.oxw().more(we)}),f._uU(1),f.qZA()}if(2&ae){const H=f.oxw();f.xp6(1),f.hij(" ",H.lockScrollWithView?"UnLock Scroll":"Lock Scroll"," ")}}let pn=(()=>{class ae extends Ht.LF{constructor(H,le,we,De,tt,_t,gt,ve,Re,wt,y){super(),this.router=H,this.utils=le,this.markdown=we,this._editorService=De,this.docService=tt,this.store=_t,this.bottomSheet=gt,this.docSaver=ve,this._breakpointObserver=Re,this.documentEffects=wt,this.markdownStore=y,this.DocumentMode=_.U,this.isScreenWide$=this.utils.isWideScreen$,this.isEditorDirty$=this.store.currentDocStatus_IsEditorDirty$.pipe((0,Ar.O)(!1)),this.isDbDirty$=this.store.currentDocStatus_IsDbDirty$.pipe((0,Ar.O)(!1)),this.isSyncing$=this.store.currentDocStatus_IsSyncing$.pipe((0,Ar.O)(!1)),this.dirtyInfo$=(0,Ir.a)([this.isEditorDirty$,this.isDbDirty$,this.isSyncing$]).pipe((0,K.U)(([oe,be,Se])=>oe?"modification not saved":be?"modification not sync with server":Se?"syncing modification with server":"")),this.showPreview$=this.markdownStore.editWithPreview_,this.logger=(0,b.eI)(console,"@MarkdownEditorToolbar"),this.onSave=()=>{const oe=this.editor.getValue();if(this.store.currentDocStatus_IsEditorDirty$.state){const be=this.bottomSheet.open(Er);be.afterDismissed().subscribe(Se=>{this.documentEffects.saveDocument_.next({content:oe,format:b.cZ.md,forceUpdate:!0,changeLog:be.instance.changeNote})})}else this.logger.debug("it seems the document is not dirty."),this.documentEffects.saveDocument_.next({content:oe,format:b.cZ.md,forceUpdate:!0,changeLog:""})},this.undo=()=>{!this.editor||this.editor.undo()},this.redo=()=>{!this.editor||this.editor.redo()},this.toViewMode=()=>{this.markdownStore.documentMode_.next(_.U.View)},this.new=()=>{this.documentEffects.createDocument_.next({format:b.cZ.md})},this.lockScrollWithView=!1,super.addSub(this._breakpointObserver.observe(["(orientation: portrait)","(orientation: landscape)"])).addSub(this._editorService.docEditorLoaded$.subscribe(oe=>{this.editor=oe})).addSub(this.store.currentDocStatus_IsEditable$.pipe((0,re.b)(oe=>{oe||this.toViewMode()})));const F=this._editorService.commands;F.save=this.onSave,F.scrollLineUp=function(oe){const be=oe.getScrollInfo();if(!oe.somethingSelected()){const Se=oe.lineAtHeight(be.top+be.clientHeight,"local");oe.getCursor().line>=Se&&oe.execCommand("goLineUp")}oe.scrollTo(null,be.top-oe.defaultTextHeight())},F.scrollLineDown=function(oe){const be=oe.getScrollInfo();if(!oe.somethingSelected()){const Se=oe.lineAtHeight(be.top,"local")+1;oe.getCursor().line<=Se&&oe.execCommand("goLineDown")}oe.scrollTo(null,be.top+oe.defaultTextHeight())}}back(H){this.router.navigateByUrl("/home")}togglePreview(){this.markdownStore.editWithPreview_.next(!this.markdownStore.editWithPreview_.state)}ngAfterViewInit(){this.hideHeight=this.toolbar.nativeElement.offsetHeight}previewPanelClick(H){H.preventDefault(),H.stopPropagation()}more(H){"0"===H.item.id&&(this.lockScrollWithView=!this.lockScrollWithView,this.markdownStore.isLockEditorScrollWithView_.next(this.lockScrollWithView))}}return ae.\u0275fac=function(H){return new(H||ae)(f.Y36(se.F0),f.Y36(Ht.dU),f.Y36(Ke.l),f.Y36(B),f.Y36(st.R7),f.Y36(C.G),f.Y36(Zt.ch),f.Y36(Ae),f.Y36(pt.Yg),f.Y36(fe.CL),f.Y36(_.A))},ae.\u0275cmp=f.Xpm({type:ae,selectors:[["editor-toolbar"]],viewQuery:function(H,le){if(1&H&&f.Gf(Ur,5,f.SBq),2&H){let we;f.iGM(we=f.CRH())&&(le.toolbar=we.first)}},features:[f.qOj],decls:38,vars:22,consts:[["color","primary",2,"z-index","20","pointer-events","all"],["toolbar",""],["mat-icon-button","","routerLinkActive","",3,"click"],[2,"flex","1 1 auto","margin","2.4rem"],["mat-icon-button","",3,"click"],["mat-icon-button","",3,"title","click"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu",""],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-menu-item","","disabled","",3,"click"],[2,"pointer-events","all"]],template:function(H,le){if(1&H&&(f.TgZ(0,"mat-toolbar",0,1),f.TgZ(2,"mat-toolbar-row"),f.TgZ(3,"button",2),f.NdJ("click",function(De){return le.back(De)}),f.TgZ(4,"mat-icon"),f._uU(5," arrow_back "),f.qZA(),f.qZA(),f.TgZ(6,"span",3),f._uU(7,"Edit"),f.qZA(),f.TgZ(8,"button",4),f.NdJ("click",function(){return le.undo()}),f.TgZ(9,"mat-icon"),f._uU(10," undo "),f.qZA(),f.qZA(),f.TgZ(11,"button",4),f.NdJ("click",function(){return le.redo()}),f.TgZ(12,"mat-icon"),f._uU(13," redo "),f.qZA(),f.qZA(),f.TgZ(14,"button",5),f.NdJ("click",function(){return le.onSave()}),f.ALo(15,"async"),f.ALo(16,"async"),f.ALo(17,"async"),f.ALo(18,"async"),f.TgZ(19,"mat-icon"),f._uU(20,"save"),f.qZA(),f.qZA(),f.YNc(21,Jr,4,3,"button",6),f.ALo(22,"async"),f.TgZ(23,"button",4),f.NdJ("click",function(){return le.toViewMode()}),f.TgZ(24,"mat-icon"),f._uU(25," visibility "),f.qZA(),f.qZA(),f.TgZ(26,"button",7),f.TgZ(27,"mat-icon"),f._uU(28," more_vert "),f.qZA(),f.qZA(),f.TgZ(29,"mat-menu",null,8),f.YNc(31,Ft,2,1,"button",9),f.ALo(32,"async"),f.TgZ(33,"button",10),f.NdJ("click",function(De){return le.more(De)}),f._uU(34,"Key Map"),f.qZA(),f.TgZ(35,"button",11),f.NdJ("click",function(De){return le.more(De)}),f._uU(36,"Item 2"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._UZ(37,"ms-codemirror-toolbar",12)),2&H){const we=f.MAs(30);f.xp6(14),f.ekj("mem-dirty",f.lcZ(15,10,le.isEditorDirty$))("db-dirty",f.lcZ(16,12,le.isDbDirty$))("net-syncing",f.lcZ(17,14,le.isSyncing$)),f.Q6J("title",f.lcZ(18,16,le.dirtyInfo$)),f.xp6(7),f.Q6J("ngIf",f.lcZ(22,18,le.isScreenWide$)),f.xp6(5),f.Q6J("matMenuTriggerFor",we),f.xp6(5),f.Q6J("ngIf",f.lcZ(32,20,le.isScreenWide$))}},directives:[Xe.Ye,Xe.rD,Qe.lW,at.Hw,k.O5,et.p6,et.VK,et.OP,Tt],pipes:[k.Ov],styles:['@charset "UTF-8";[_nghost-%COMP%]{pointer-events:none}a[_ngcontent-%COMP%]:hover{color:#ffffffb3;text-decoration:none}.mem-dirty[_ngcontent-%COMP%]:before{content:" \\25cf";font-size:1.34rem;color:red;margin-top:.6rem;margin-left:.9rem;position:absolute}.db-dirty[_ngcontent-%COMP%]{color:#4169e1}.net-syncing[_ngcontent-%COMP%]:after{margin-top:-1em;margin-left:.4em;content:"";display:inherit;border:3px solid #f3f3f3;border-radius:50%;border-top:3px solid #3498db;width:13px;height:13px;animation:spin 1.8s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}'],data:{animation:[(0,Kt.X$)("show",[(0,Kt.SB)("true",(0,Kt.oB)({opacity:1,transform:"translateY(0)"})),(0,Kt.eR)("void => true",[(0,Kt.oB)({opacity:0,transform:"translateY(-100%)"}),(0,Kt.jt)("0.2s ease-in")]),(0,Kt.eR)("true => void",[(0,Kt.jt)("0.2s ease-out",(0,Kt.oB)({opacity:0,transform:"translateY(-100%)"}))])])]}}),ae})();var zr=pe(692);let ir=(()=>{class ae extends b.LF{constructor(H){super(),this.codeMirrorComponent=H,this.addSub(H.afterInit.subscribe(le=>{this.codemirror=le,this.codemirror.on("blur",()=>{this.onTouched()}),this.codemirror.on("change",()=>{const we=this.codemirror.getValue();this.onChange(we)})}))}writeValue(H){null!=H&&this.codeMirrorComponent.writeValue(H)}registerOnChange(H){this.onChange=H}registerOnTouched(H){this.onTouched=H}setDisabledState(H){this.codeMirrorComponent.host.disabled=!0}onChange(H){}onTouched(){}}return ae.\u0275fac=function(H){return new(H||ae)(f.Y36(U))},ae.\u0275dir=f.lG2({type:ae,selectors:[["ms-codemirror"]],features:[f._Bn([{provide:it.JU,useExisting:(0,f.Gpc)(()=>ae),multi:!0}]),f.qOj]}),ae})();var Dr=pe(9038);const er=function(ae){return{container$:ae}},dr=function(ae,me){return[ae,me]};let wr=(()=>{class ae extends x.L{constructor(H,le,we,De,tt,_t,gt,ve,Re){super(),this.documentEffects=H,this._elementRef=le,this.dialog=we,this.markdownStore=De,this.gestureConfig=tt,this.editorService=_t,this.store=gt,this.ngZone=ve,this.utils=Re,this.logger=(0,b.eI)(console,"@MarkdownEditorComponent"),this.editorLoaded=!1,this.DocumentMode=_.U,this.docMode$=this.markdownStore.documentMode_,this.markdown$=this.store.currentDocContentString$,this.toViewMode=wt=>{this.markdownStore.documentMode_.next(_.U.View)},super.addSub(this.editorService.docEditorLoaded$.subscribe(()=>{setTimeout(()=>this.editorLoaded=!0,0)})).addSub(this.markdownStore.editIt_.subscribe(({sourceLine:wt}={})=>{!wt||(this.markdownStore.documentMode_.next(_.U.Edit),setTimeout(()=>{this.editorService.gotoLine(wt[0])},0))})).addSub(this.editorService.docContentModified$.subscribe(([wt,y])=>this.markdownStore.editorContentChanged_.next(wt))).addSub(this.docMode$.subscribe(wt=>{wt===_.U.Edit&&setTimeout(()=>this.codeMirrorComponent.refresh(),0)}))}ngAfterViewInit(){const H=this._elementRef.nativeElement.getElementsByClassName("CodeMirror-scroll")[0];this.markdownStore.editor_.next(new b.vR(H,void 0,void 0,this.ngZone));let le=null;super.addSub(this.utils.isWideScreen$.pipe((0,re.b)(we=>{we?le&&(le.off("swiperight"),le.off("swipeleft"),le.destroy(),le=null):null===le&&(le=this.gestureConfig.buildHammer(H),le.on("swiperight",this.toViewMode),le.on("swipeleft",this.toViewMode))})).subscribe())}canDeactivate(){const H=()=>{const De=this.store.currentId_.state;De===G.h2&&this.documentEffects.deleteDocument_.next({id:De})},we=this.store.currentDocStatus$.state;return(null==we?void 0:we.isEditorDirty)?this.dialog.open(he.n,{width:"300px",data:{title:"Save?",message:"Document modified, are you want to save?",defaultAction:"Yes",additionalAction:"No"}}).afterClosed().pipe((0,K.U)(De=>"Yes"===De?(this.documentEffects.saveDocument_.next({content:this.codeMirrorComponent.value,forceUpdate:!0}),!1):(H(),!0))):(H(),(0,ee.of)(!0))}}return ae.\u0275fac=function(H){return new(H||ae)(f.Y36(fe.CL),f.Y36(f.SBq),f.Y36(Ee.uw),f.Y36(_.A),f.Y36(xe.ok),f.Y36(B),f.Y36(C.G),f.Y36(f.R0b),f.Y36(b.dU))},ae.\u0275cmp=f.Xpm({type:ae,selectors:[["ms-markdown-editor"]],viewQuery:function(H,le){if(1&H&&f.Gf(U,5),2&H){let we;f.iGM(we=f.CRH())&&(le.codeMirrorComponent=we.first)}},features:[f.qOj],decls:6,vars:16,consts:[[2,"z-index","802",3,"scrollHide","hide","hideHeight"],["toolbar",""],[3,"ngModel"],[3,"isRunning"]],template:function(H,le){if(1&H&&(f._UZ(0,"editor-toolbar",0,1),f.ALo(2,"async"),f._UZ(3,"ms-codemirror",2),f.ALo(4,"async"),f._UZ(5,"sk-cube-grid",3)),2&H){const we=f.MAs(1);f.Q6J("scrollHide",f.WLB(13,dr,f.VKq(9,er,le.markdownStore.viewer_),f.VKq(11,er,le.markdownStore.editor_)))("hide",f.lcZ(2,5,le.docMode$)!==le.DocumentMode.Edit)("hideHeight",we.hideHeight),f.xp6(3),f.Q6J("ngModel",f.lcZ(4,7,le.markdown$)),f.xp6(2),f.Q6J("isRunning",!le.editorLoaded)}},directives:[pn,zr.M,U,ir,it.JJ,it.On,Dr.r],pipes:[k.Ov],styles:["[_nghost-%COMP%]{display:block;height:100vh;overflow-y:auto}"]}),ae})();const Nr=[{path:"",canDeactivate:[b.Ic],component:wr},{path:"new",canDeactivate:[b.Ic],component:wr}];let ur=(()=>{class ae{}return ae.\u0275fac=function(H){return new(H||ae)},ae.\u0275mod=f.oAB({type:ae}),ae.\u0275inj=f.cJS({imports:[[se.Bz.forChild(Nr)],se.Bz]}),ae})();var Fr=pe(7643),rn=pe(5757),fr=pe(6599);let tr=(()=>{class ae{}return ae.\u0275fac=function(H){return new(H||ae)},ae.\u0275mod=f.oAB({type:ae}),ae.\u0275inj=f.cJS({providers:[],imports:[[k.ez,Zt._r,Xe.g0,at.Ps,xt.lN,br.c,Qe.ot,et.Tx,it.UX,it.u5]]}),ae})(),Sr=(()=>{class ae{constructor(H){this.editor=H}}return ae.\u0275fac=function(H){return new(H||ae)(f.LFG(B))},ae.\u0275mod=f.oAB({type:ae}),ae.\u0275inj=f.cJS({providers:[sr,B,Ae,fr.I],imports:[[G.m8,k.ez,it.u5,Fr.Fm,tr,ur,rn.q]]}),ae})()}}]);