"use strict";(self.webpackChunkiam=self.webpackChunkiam||[]).push([["common"],{6145:(y,_,c)=>{c.d(_,{z:()=>S});var t=c(8079),C=c(3863),l=c(8513);let S=(()=>{class d{constructor(r,s){this._store=r,this.docEditor=s}set sourceLines(r){const s=/\[\s*(\d+)\s*,\s*(\d+)\s*\]/.exec(r);this.sourceLineStart=+s[1],this.sourceLineEnd=+s[2]}get source(){const r=this._store.currentDocContentString$.state,[s,m]=this.getRange(r);return r.substring(s,m)}set source(r){if(this.docEditor.currentEditor)return void this.docEditor.currentEditor.replaceRange(r+"\n",this.sourceLineStart,0,this.sourceLineEnd,0);const m=this._store.currentDocContent$.state.content,p=this._store.currentId_.state,[a,v]=this.getRange(m),D=function(d,h,r,s){return h<0&&(h+=this.length)<0&&(h=0),d.slice(0,h)+(s||"")+d.slice(h+r)}(m,a,v-a,r);this._store.docContent.update({id:p,changes:{content:D}}),setTimeout(()=>this._store.updateCurrentDocStatus({isEditorDirty:!0}))}getRange(r){if(this.sourceLineStart>=this.sourceLineEnd)throw"DataSourceLines: sourceLineStart should less than sourceLineEnd";let m,p,s=0;for(let a=0;a<r.length;a++)if("\n"===r[a]&&(s++,s===this.sourceLineStart&&(m=a+1),s===this.sourceLineEnd)){p=a;break}if(void 0===m||void 0===p)throw"DataSourceLines: content lenth is less than expected!";return[m,p]}}return d.\u0275fac=function(r){return new(r||d)(t.Y36(C.G),t.Y36(l.d))},d.\u0275dir=t.lG2({type:d,inputs:{sourceLines:["data-source-lines","sourceLines"]}}),d})()},1180:(y,_,c)=>{c.d(_,{I:()=>M});var t=c(8079),C=c(7394),l=c(6134);let S=(()=>{class n{constructor(e,o){this.matInput=e,this.elRef=o,this.autofocusSelectValue=!1}ngOnInit(){setTimeout(()=>{if(this.matInput.focus(),this.autofocusSelectValue){const e=this.elRef.nativeElement;e.setSelectionRange(0,e.value.length)}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.Nt),t.Y36(t.SBq))},n.\u0275dir=t.lG2({type:n,selectors:[["","matInputAutofocus",""]],inputs:{autofocusSelectValue:"autofocusSelectValue"}}),n})(),g=(()=>{class n{constructor(){this.search=new t.vpe}onSearch(e){this.search.next(e.trim())}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["iam-doc-search-bar"]],outputs:{search:"search"},decls:4,vars:0,consts:[[1,"doc-search"],[1,"search-icon"],["matInput","","matInputAutofocus","","action-bar-flex","","type","text","placeholder","Search...",1,"input-lg","search-input",3,"keyup"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-icon",1),t._uU(2,"search"),t.qZA(),t.TgZ(3,"input",2),t.NdJ("keyup",function(f){return o.onSearch(f.target.value)}),t.qZA(),t.qZA())},directives:[C.Hw,l.Nt,S],styles:[".doc-search[_ngcontent-%COMP%]{height:4rem;padding-left:1rem;font-size:1.4rem;display:flex;flex:1;background:white}.doc-search[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto}.doc-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;font-family:RobotoRegular;width:auto;max-width:none;display:inline-block;border:0;padding:.25rem .5rem;margin:0}"]}),n})();var d=c(2518),h=c(3550),r=c(878),s=c(6251),m=c(3863),p=c(6903),a=c(7468);function v(n,i){if(1&n&&t._UZ(0,"div",2),2&n){const e=i.$implicit,o=t.oxw();t.Q6J("innerHTML",o.getMatches(e),t.oJD)}}let D=(()=>{class n{constructor(){this.onClick=new t.vpe}getMatches(e){const o=e.fragment;let u="",f=0;return e.matches.forEach(L=>{const E=L.indices;u+=o.substr(f,E[0]-f),u+=`<em>${L.text}</em>`,f=E[1]}),u+=o.substr(f),u}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["doc-search-item"]],inputs:{item:"item"},outputs:{onClick:"onClick"},decls:9,vars:4,consts:[[1,"title",3,"click"],["class","fragment",3,"innerHTML",4,"ngFor","ngForOf"],[1,"fragment",3,"innerHTML"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-header"),t._UZ(2,"div"),t.TgZ(3,"mat-card-title",0),t.NdJ("click",function(){return o.onClick.emit(o.item)}),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"mat-card-content"),t.YNc(8,v,1,1,"div",1),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Oqu(o.item.title),t.xp6(2),t.AsE(" Score: ",o.item.score," Id: ",o.item.id,""),t.xp6(2),t.Q6J("ngForOf",o.item.text_matches))},directives:[a.a8,a.dk,a.n5,a.$j,a.dn,p.sg],styles:[".fragment[_ngcontent-%COMP%]{white-space:pre-wrap}.fragment[_ngcontent-%COMP%]     em{background:yellow}[_nghost-%COMP%]{display:inline-block;max-width:1000px;width:100%;display:flex}mat-card[_ngcontent-%COMP%]{width:100%;margin-top:3px}mat-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{cursor:pointer;text-decoration:underline}"]}),n})();function T(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"doc-search-item",4),t.NdJ("onClick",function(u){return t.CHM(e),t.oxw().onClick.emit(u)}),t.qZA()}2&n&&t.Q6J("item",i.$implicit)}let M=(()=>{class n{constructor(e,o){this._store=e,this.documentEffects=o,this.onClick=new t.vpe,this.searchResult$=this._store.searchResult_,this.trackByFunc=(u,f)=>f.id}ngAfterViewInit(){this.docSearchComponent.search.pipe((0,h.b)(500),(0,r.x)(),(0,d.b)(e=>{""!==e.trim()&&this.documentEffects.searchDocument_.next({query:e})})).subscribe()}onSearch(e){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.G),t.Y36(s.CL))},n.\u0275cmp=t.Xpm({type:n,selectors:[["doc-search-list"]],viewQuery:function(e,o){if(1&e&&t.Gf(g,5),2&e){let u;t.iGM(u=t.CRH())&&(o.docSearchComponent=u.first)}},outputs:{onClick:"onClick"},decls:5,vars:4,consts:[["clickToggleEnable","false"],[1,"search-result"],["search",""],[3,"item","onClick",4,"ngFor","ngForOf","ngForTrackBy"],[3,"item","onClick"]],template:function(e,o){1&e&&(t._UZ(0,"iam-doc-search-bar",0),t.TgZ(1,"div",1,2),t.YNc(3,T,1,1,"doc-search-item",3),t.ALo(4,"async"),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngForOf",t.lcZ(4,2,o.searchResult$))("ngForTrackBy",o.trackByFunc))},directives:[g,p.sg,D],pipes:[p.Ov],styles:["[_nghost-%COMP%]{max-width:400px;width:100%}.search-result[_ngcontent-%COMP%]{overflow:auto;display:flex;flex-flow:row wrap;box-sizing:border-box;justify-content:space-around;max-height:calc(100vh - 50px);margin-bottom:50px}"]}),n})()},8513:(y,_,c)=>{c.d(_,{d:()=>C});var t=c(8079);let C=(()=>{class l{}return l.\u0275fac=function(g){return new(g||l)},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()}}]);