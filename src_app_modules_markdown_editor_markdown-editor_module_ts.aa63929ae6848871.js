(self.webpackChunkiam=self.webpackChunkiam||[]).push([["src_app_modules_markdown_editor_markdown-editor_module_ts"],{5727:(xt,et,de)=>{"use strict";de.r(et),de.d(et,{MarkdownEditorModule:()=>ur});var k=de(7011),A=de(6109),_=de(493),q=de(3867),O=de.n(q),f=de(5281),H=de(1956);class oe{constructor(S,z){this.markdownService=S,this.commands=q.commands,this.docContentSet$=new A.x,this.docContentModified$=new A.x,this.docEditorLoaded$=new A.x,z.currentEditor=this,this.docEditorLoaded$.subscribe(Ce=>this.editor=Ce)}gotoLine(S){this.editor.focus(),this.editor.setCursor(S),this.editor.execCommand("showInCenter")}selectRange(S,z,Ce,g){this.editor.focus(),this.editor.setSelection({line:S,ch:z},{line:Ce,ch:g}),this.editor.execCommand("showInCenter")}replaceRange(S,z,Ce,g,T){this.editor.replaceRange(S,{line:z,ch:Ce},{line:g,ch:T})}}oe.\u0275fac=function(S){return new(S||oe)(f.LFG(_.A),f.LFG(H.d))},oe.\u0275prov=f.Yz7({token:oe,factory:oe.\u0275fac});var V=de(4578),j=de(4852);de(6338),de(9915),de(6246),de(3518),de(5626),de(9347),de(5396),de(4731),de(2491),de(1685),de(4171),de(7726),de(9137),de(6720);class ne extends j.LF{constructor(S,z,Ce){super(),this.editorService=S,this.utils=z,this.elementRef=Ce,this.change=new f.vpe,this.focus=new f.vpe,this.blur=new f.vpe,this.afterInit=new A.x,this._contentSet=!1,super.addSub(this.utils.isWideScreen$.subscribe(g=>this.showLineNumber=g))}get host(){return this._host||(this._host=this.elementRef.nativeElement.getElementsByTagName("textarea")[0]),this._host}ngOnInit(){this.config=this.config||{mode:{name:"gfm",highlightFormatting:!0},lineNumbers:this.showLineNumber,lineWrapping:!0,autoCloseBrackets:!0,autoCloseTags:!0,matchBrackets:!0,matchTags:{bothTags:!0},extraKeys:{F11:function(S){S.setOption("fullScreen",!S.getOption("fullScreen"))},Esc:function(S){S.getOption("fullScreen")&&S.setOption("fullScreen",!1)}}},this.codemirrorInit(this.config),this.afterInit.next(this.codemirror),this.editorService.docEditorLoaded$.next(this.codemirror)}get value(){return this.codemirror.getValue()}codemirrorInit(S){this.codemirror=O().fromTextArea(this.host,S),this.codemirror.on("change",()=>{if(this._contentSet)return;const z=this.value;this.change.emit(z),this.editorService.docContentModified$.next([z,this.codemirror])}),this.codemirror.on("cursorActivity",z=>this.changeCursorStyle(z)),this.codemirror.on("focus",()=>{this.focus.emit()}),this.codemirror.on("blur",()=>{this.blur.emit()})}writeValue(S){this.codemirror&&(this._contentSet=!0,this.codemirror.setValue(S),this._contentSet=!1,this.codemirror.clearHistory(),this.editorService.docContentSet$.next(this.codemirror))}changeCursorStyle(S){const z=S.getCursor(),Ce=this.codemirror.cursorCoords(z),g=document.elementFromPoint(Ce.left,Ce.top+5),T=S.display.cursorDiv;g&&g.className.includes("cm-em")?T.classList.contains("cursor-italic")||T.classList.add("cursor-italic"):T.classList.remove("cursor-italic")}refresh(){this.codemirror.refresh()}}ne.\u0275fac=function(S){return new(S||ne)(f.Y36(oe),f.Y36(j.dU),f.Y36(f.SBq))},ne.\u0275cmp=f.Xpm({type:ne,selectors:[["ms-codemirror"]],inputs:{config:"config"},outputs:{change:"change",focus:"focus",blur:"blur"},features:[f.qOj],decls:2,vars:0,consts:[["host",""]],template:function(S,z){1&S&&f._UZ(0,"textarea",null,0)},encapsulation:2});var G=de(2538),te=de(6801),Q=de(5930),ge=de(6828),x=de(6150),ue=de(2011),fe=de(2482),Ae=de(9021),He=de(7938),_e=de(4457),Ge=de(4985),N=de(8586),b=de(6299),Te=de(915),P=de(3812),J=de(9372);var Ee=de(504),Ve=de(8877),Pe=de(3746);class Ue extends j.LF{constructor(S,z,Ce){super(),this.editorService=S,this.store=z,this.documentEffects=Ce,this.isSyncing$=new Ge.X(!1),super.addSub(this.editorService.docEditorLoaded$.subscribe(g=>this.editor=g),this.store.currentDocStatus_IsEditorDirty$.pipe(function $(...be){return function ie(...be){const S=(0,P.yG)(be),z=(0,P._6)(be,1/0);return be=(0,b.k)(be),(0,N.e)((Ce,g)=>{(0,Te.J)(z)((0,J.D)([Ce,...be],S)).subscribe(g)})}(...be)}(this.editorService.docContentModified$.pipe((0,te.U)(g=>!0))),(0,Ee.b)(j.oS),(0,G.b)(g=>{g&&this.documentEffects.saveDocument_.next({id:this.store.currentId_.state,content:this.editor.getValue(),format:j.cZ.md})}),(0,j.P0)(8,5e3)),this.editorService.docContentSet$.subscribe(g=>{this.docLoadedHandler(g)}),this.editorService.docContentModified$.subscribe(([g,T])=>this.checkDirty(T)),this.documentEffects.saveDocument_.operationStatus$.subscribe(g=>{g.step===Ve.m7.Start?(this.docSavedHandler(this.editor),this.isSaving=!0):g.isEndStatus()&&(this.isSaving=!1)}))}docLoadedHandler(S){const z=S.getDoc();this.contentGeneration=z.changeGeneration(),z.clearHistory(),this.checkDirty(S)}docSavedHandler(S){S&&(this.contentGeneration=S.getDoc().changeGeneration(!1),this.checkDirty(S))}checkDirty(S){if(!this.contentGeneration)return;const z=!S.getDoc().isClean(this.contentGeneration);this.store.upsertDocStatus({isEditorDirty:z})}}Ue.\u0275fac=function(S){return new(S||Ue)(f.LFG(oe),f.LFG(Pe.G),f.LFG(fe.CL))},Ue.\u0275prov=f.Yz7({token:Ue,factory:Ue.\u0275fac}),de(1595),de(6670),de(3886);var Ot=de(2785),kt=de(8894),Lt=de(353);const It=["imageUpload"],hr=["progress"];function ir(be,S){if(1&be&&(f.TgZ(0,"span"),f._uU(1),f.qZA()),2&be){const z=f.oxw();f.xp6(1),f.Oqu(z.data.message)}}function mr(be,S){if(1&be&&f._UZ(0,"mat-progress-bar",6,7),2&be){const z=f.oxw();f.Q6J("value",z.progressPercent)}}function Wr(be,S){if(1&be){const z=f.EpF();f.TgZ(0,"div",8)(1,"button",9),f.NdJ("click",function(){f.CHM(z);const g=f.oxw();return f.KtG(g.action())}),f._uU(2),f.qZA()()}if(2&be){const z=f.oxw();f.xp6(2),f.Oqu(z.data.action)}}class dr{constructor(S,z){this.data=S,this.snackBarRef=z,this.progressPercent=0,this.accept="image/*",this.data.notifyProgress=this.notifyProgress.bind(this),this.accept=S.accept}onFileChanged(S){this.selectedFile=S.target.files[0],this.data.showMessage=!1,this.data.action="cancel",this.data.takeAction?.(this.selectedFile)}notifyProgress(S){this.progressPercent=S}get hasAction(){return!!this.data.action}action(){"cancel"!==this.data.action?(this.imageUpload.nativeElement.click(),this.data.selectFile?.(),this.data.action="cancel"):this.data.cancelAction()}}dr.\u0275fac=function(S){return new(S||dr)(f.Y36(Ot.qD),f.Y36(Ot.OX))},dr.\u0275cmp=f.Xpm({type:dr,selectors:[["ms-file-upload"]],viewQuery:function(S,z){if(1&S&&(f.Gf(It,5),f.Gf(hr,5)),2&S){let Ce;f.iGM(Ce=f.CRH())&&(z.imageUpload=Ce.first),f.iGM(Ce=f.CRH())&&(z.progressBar=Ce.first)}},decls:7,vars:4,consts:[["type","file",2,"display","none",3,"accept","change"],["imageUpload",""],[1,"mat-simple-snackbar"],[4,"ngIf"],["mode","determinate",3,"value",4,"ngIf"],["class","mat-simple-snackbar-action",4,"ngIf"],["mode","determinate",3,"value"],["progress",""],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(S,z){1&S&&(f.TgZ(0,"input",0,1),f.NdJ("change",function(g){return z.onFileChanged(g)}),f.qZA(),f.TgZ(2,"div")(3,"div",2),f.YNc(4,ir,2,1,"span",3),f.YNc(5,mr,2,1,"mat-progress-bar",4),f.YNc(6,Wr,3,1,"div",5),f.qZA()()),2&S&&(f.Q6J("accept",z.accept),f.xp6(4),f.Q6J("ngIf",z.data.showMessage),f.xp6(1),f.Q6J("ngIf",!z.data.showMessage),f.xp6(1),f.Q6J("ngIf",z.hasAction))},dependencies:[k.O5,kt.lW,Lt.pW],styles:[".mat-mdc-simple-snack-bar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-mdc-snack-bar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-mdc-snack-bar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-mdc-snack-bar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2});var Kr=de(18),Gt=de(6530),$t=de(6050),bt=de(4164);class er{constructor(S,z,Ce){this._snackBar=S,this._github=z,this._store=Ce,this.doUpload=(g,T,le,ye)=>{const ke=new FileReader;let Qe=null,je=null;const qe=new Promise((Ke,nt)=>{Qe=Ke,je=nt});return ke.onloadend=Ke=>{const nt=ke.result,yt=nt.substring(nt.indexOf(",")+1);return this._github.init().pipe((0,Kr.w)(Ct=>{const xr=this._store.currentId_.state,Fn=(new Date).toISOString().replace(/[-:.]/g,"");return Ct.newFileReportProgress(`${Gt.IQ}/${xr}/${le}/${Fn}-${g.name}`,yt,!0)})).subscribe({next:Ct=>{switch(Ct.type){case $t.dt.UploadProgress:const xr=Math.round(100*Ct.loaded/Ct.total);T.notifyProgress?.(xr);break;case $t.dt.Response:Qe(Ct.body.content.download_url),ye.dismiss()}},error:Ct=>{ye.dismiss(),this._snackBar.open(Ct.error.message,"ok",{duration:2e3}),je(Ct),console.error(Ct)}})},ke.readAsDataURL(g),qe}}uploadSelected(S){let g=null,le=null,ye=null;const ke=new Promise((qe,Ke)=>{le=qe,ye=Ke}),Qe={accept:`${S}/*`,showMessage:!0,message:`pick ${S} to upload?`,action:"OK",selectFile:()=>clearTimeout(g),cancelAction:()=>{console.log(`${S} uploading canceled`),ye("canceled"),setTimeout(qe=>je.dismiss(),1e3)},takeAction:qe=>this.doUpload(qe,Qe,S,je).then(le,ye)},je=this._snackBar.openFromComponent(dr,{data:Qe,duration:0});return g=setTimeout(qe=>{ye("timeout"),je.dismiss()},1e4),ke}uploadFile(S,z){const[Ce,g]=this.showProgress();return this.doUpload(z,g,S,Ce)}showProgress(){const g={showMessage:!1,action:"Cancel",cancelAction:()=>{console.log("uploading canceled"),setTimeout(le=>T.dismiss(),1e3)}},T=this._snackBar.openFromComponent(dr,{data:g,duration:0});return[T,g]}}er.\u0275fac=function(S){return new(S||er)(f.LFG(Ot.ux),f.LFG(bt.SS),f.LFG(Pe.G))},er.\u0275prov=f.Yz7({token:er,factory:er.\u0275fac,providedIn:"root"});class it{constructor(S,z,Ce,g){this._editorService=S,this._commandService=z,this._uploadService=Ce,this.markdownStore=g,this.config=it.COMMANDS_CONFIG??{Bold:{command:"Bold",func:(T,le)=>`**${T||le}**`,startSize:2,hotKey:"Ctrl-M B"},Italic:{command:"Italic",func:(T,le)=>`*${T||le}*`,startSize:1,hotKey:"Ctrl-M T"},Heading:{command:"Heading",func:(T,le)=>`# ${T||le}`,startSize:2,hotKey:"Ctrl-M H"},Reference:{command:"Reference",func:(T,le)=>`> ${T||le}`,startSize:2,hotKey:"Ctrl-M R"},Link:{command:"Link",func:(T,le)=>`[${T||le}]()`,endSize:1,hotKey:"Ctrl-M L"},Image:{command:"Image",func:(T,le)=>`![${T||le}]()`,endSize:1,hotKey:"Ctrl-M I"},Ul:{command:"Ul",func:(T,le)=>`- ${T||le}`,startSize:2,hotKey:"Ctrl-M U"},Ol:{command:"Ol",func:(T,le)=>`1 ${T||le}`,startSize:2,hotKey:"Ctrl-M O"},Code:{command:"Code",func:(T,le,ye)=>{const ke=this.editor.getCursor(),Qe=this.editor.getSearchCursor(/^\s*```[^\S\n\r]*(\S+)/,ke);let qe,je=Qe.findPrevious();return je?qe=Qe.pos.match[1]:(je=Qe.findNext(),qe=je?Qe.pos.match[1]:""),ye.startSize=qe?qe.length+4:3,"```"+qe+"\r\n"+(T||le)+"\r\n```"},startSize:3,hotKey:"Ctrl-M C"},Meta:{command:"Meta",hotKey:"Ctrl-M M",func:this.insertMeta}},this._commandService.commands.subscribe(T=>this.handleCommand(T)),this._editorService.docEditorLoaded$.subscribe(T=>{T.on("paste",(ye,ke)=>{const je=(ke.clipboardData||window.clipboardData).items;if(console.log(je),je)for(let qe=0;qe<je.length;qe++)if("file"===je[qe].kind){const Ke=je[qe].getAsFile();let nt=Ke.type.split("/")[0];if(!nt){const yt=Ke.name.split(".");nt=yt.length>1?yt.pop():"resource"}this._uploadService.uploadFile(nt,Ke).then(yt=>{this.editor.replaceSelection(`![](${yt})`)})}}),this.editor=T;const le={};for(const ye of Object.keys(this.config))le[this.config[ye].hotKey]=()=>{this.insertContent(ye)};this.codeMirrorMaps(le)})}codeMirrorMaps(S){S["Ctrl-M Q"]=function(Ce){Ce.display.input.textarea.blur()},S["Ctrl-Alt-Up"]=()=>{this.markdownStore.scrollView_.next({isUp:!0})},S["Ctrl-Alt-Down"]=()=>{this.markdownStore.scrollView_.next({isUp:!1})},S["Ctrl-Up"]="scrollLineUp",S["Ctrl-G"]="jumpToLine",S["Ctrl-Down"]="scrollLineDown",S["Ctrl-F"]="findPersistent",S["Shift-Delete"]="killLine",S["Shift-Backspace"]="delLineLeft",S["Ctrl-Shift-K"]="deleteLine",S.Home="goLineStart",S.End="goLineEnd",S["Ctrl-Left"]="goWordLeft",S["Ctrl-Right"]="goWordRight",S["Ctrl-Alt-Left"]="goSubwordLeft",S["Ctrl-Alt-Right"]="goSubwordRight",S["Ctrl-Backspace"]="delWordBefore",S["Ctrl-Shift-Backspace"]="delWordAfter",S["Ctrl-Alt-Backspace"]="delGroupBefore",S["Ctrl-Alt-Shift-Backspace"]="delGroupAfter",S.Tab=Ce=>{Ce.somethingSelected()?Ce.indentSelection("add"):Ce.execCommand("insertSoftTab")},S["Shift-Tab"]=Ce=>{Ce.indentSelection("subtract")},S["Alt-\\"]="goToBracket",S["Alt-Shift-\\"]="selectBetweenBrackets",S["Alt-Shift-Right"]="selectScope",S["Ctrl-Enter"]="insertLineAfter",S["Ctrl-Shift-Enter"]="insertLineBefore",S["Alt-Up"]="swapLineUp",S["Alt-Down"]="swapLineDown",S["Ctrl-/"]="toggleCommentIndented",S["Ctrl-I"]="selectLine",S["Ctrl-D"]="selectNextOccurrence",S["Ctrl-H"]="replace",S.Esc="singleSelectionTop",S["Alt-Shift+Down"]="duplicateLine",S.Backspace="smartBackspace",S["Alt-M"]="showInCenter",this.editor.setOption("extraKeys",q.normalizeKeyMap(S))}insertMeta(S){S.setCursor({line:1,ch:0}),S.replaceSelection(j.FA,"start"),S.focus()}handleCommand(S){this.insertContent(S.name)}insertContent(S){if(!this.editor)return;let z=this.editor.getSelection();if("Focus"===S)return void this.editor.focus();if("Meta"===S)return void this.insertMeta(this.editor);const Ce=this.config[S];z=Ce.func(z,"",Ce);const g=this.editor.getCursor();if(Ce.startSize)this.editor.replaceSelection(z,"start"),this.editor.focus(),this.editor.setCursor({line:g.line,ch:g.ch+Ce.startSize});else if(Ce.endSize){this.editor.replaceSelection(z,"around");const T=this.editor.getCursor("to");this.editor.focus(),this.editor.setCursor({line:T.line,ch:T.ch-Ce.endSize})}"Image"===Ce.command&&this._uploadService.uploadSelected("image").then(T=>{this.editor.replaceSelection(T)})}}it.\u0275fac=function(S){return new(S||it)(f.LFG(oe),f.LFG(j.VD),f.LFG(er),f.LFG(_.A))},it.\u0275prov=f.Yz7({token:it,factory:it.\u0275fac});var Ht=de(9413),We=de(3502),lt=de(6129),pt=de(2589),Ye=de(6844),ot=de(1777),tt=de(6901),_t=de(7731),ft=de(1938),gt=de(151);class Tr{constructor(S){this._bottomSheetRef=S,this.changeNote=""}onOk(S){this._bottomSheetRef.dismiss(),S.preventDefault()}}Tr.\u0275fac=function(S){return new(S||Tr)(f.Y36(_t.oL))},Tr.\u0275cmp=f.Xpm({type:Tr,selectors:[["change-note-input"]],decls:8,vars:2,consts:[[1,"input-form"],["appearance","fill",1,"input-field"],["matInput","","placeholder","showed in document history",3,"autofocus","ngModel","ngModelChange","keyup.Enter"],["input",""],["mat-flat-button","","color","primary",3,"click"]],template:function(S,z){if(1&S&&(f.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),f._uU(3,"document change note"),f.qZA(),f.TgZ(4,"input",2,3),f.NdJ("ngModelChange",function(g){return z.changeNote=g})("keyup.Enter",function(g){return z.onOk(g)}),f.qZA()(),f.TgZ(6,"button",4),f.NdJ("click",function(g){return z.onOk(g)}),f._uU(7,"OK"),f.qZA()()),2&S){const Ce=f.MAs(5);f.xp6(4),f.Q6J("autofocus",Ce.focus())("ngModel",z.changeNote)}},dependencies:[kt.lW,ft.Nt,gt.KE,gt.hX,Ht.Fj,Ht.JJ,Ht.On],styles:[".input-form[_ngcontent-%COMP%]{width:100%;max-width:80rem;display:flex;align-items:center;flex-direction:column}.input-field[_ngcontent-%COMP%]{width:100%}"]});var Vr=de(9089),Ar=de(5299),tr=de(7175),$r=de(4785),Nr=de(1333),Br=de(9546),en=de(3353);function Tt(be,S){if(1&be){const z=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){f.CHM(z);const g=f.oxw();return f.KtG(g.insertContent("Bold"))}),f.TgZ(1,"mat-icon"),f._uU(2,"format_bold"),f.qZA()()}if(2&be){const z=f.oxw();f.MGl("title","Bold (",z.keyMapService.config.Bold.hotKey,")")}}function Zr(be,S){if(1&be){const z=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){f.CHM(z);const g=f.oxw();return f.KtG(g.insertContent("Italic"))}),f.TgZ(1,"mat-icon"),f._uU(2,"format_italic"),f.qZA()()}if(2&be){const z=f.oxw();f.MGl("title","Italic (",z.keyMapService.config.Bold.hotKey,")")}}function tn(be,S){if(1&be){const z=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){f.CHM(z);const g=f.oxw();return f.KtG(g.insertContent("Heading"))}),f.TgZ(1,"mat-icon"),f._uU(2,"title"),f.qZA()()}if(2&be){const z=f.oxw();f.MGl("title","Heading (",z.keyMapService.config.Heading.hotKey,")")}}function Dt(be,S){if(1&be){const z=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){f.CHM(z);const g=f.oxw();return f.KtG(g.insertContent("Reference"))}),f.TgZ(1,"mat-icon"),f._uU(2,"format_quote"),f.qZA()()}if(2&be){const z=f.oxw();f.MGl("title","Reference (",z.keyMapService.config.Reference.hotKey,")")}}function mn(be,S){if(1&be){const z=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){f.CHM(z);const g=f.oxw();return f.KtG(g.insertContent("Ul"))}),f.TgZ(1,"mat-icon"),f._uU(2,"format_list_bulleted"),f.qZA()()}if(2&be){const z=f.oxw();f.MGl("title","Unordered List (",z.keyMapService.config.Ul.hotKey,")")}}function Yr(be,S){if(1&be){const z=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){f.CHM(z);const g=f.oxw();return f.KtG(g.insertContent("Ol"))}),f.TgZ(1,"mat-icon"),f._uU(2,"format_list_numbered"),f.qZA()()}if(2&be){const z=f.oxw();f.MGl("title","Ordered List (",z.keyMapService.config.Ol.hotKey,")")}}function or(be,S){if(1&be){const z=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){f.CHM(z);const g=f.oxw();return f.KtG(g.insertContent("Code"))}),f.TgZ(1,"mat-icon"),f._uU(2,"code"),f.qZA()()}if(2&be){const z=f.oxw();f.MGl("title","Code Block (",z.keyMapService.config.Code.hotKey,")")}}function Pr(be,S){if(1&be){const z=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){f.CHM(z);const g=f.oxw();return f.KtG(g.insertContent("Link"))}),f.TgZ(1,"mat-icon"),f._uU(2,"link"),f.qZA()()}if(2&be){const z=f.oxw();f.MGl("title","Link (",z.keyMapService.config.Link.hotKey,")")}}function ar(be,S){if(1&be){const z=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){f.CHM(z);const g=f.oxw();return f.KtG(g.insertContent("Image"))}),f.TgZ(1,"mat-icon"),f._uU(2,"image"),f.qZA()()}if(2&be){const z=f.oxw();f.MGl("title","Image (",z.keyMapService.config.Image.hotKey,")")}}const yr=function(be){return{"tool-bar--bottom":be}};class lr{constructor(S,z,Ce){this._verticalSplitPane=S,this._utils=z,this.keyMapService=Ce,this._destroy$=new A.x,this.isScreenWide$=this._utils.isWideScreen$,this.more=()=>{},this._hideIcons={Ol:!1,Italic:!1,Link:!1},this._verticalSplitPane.notifySizeDidChange.pipe((0,en.R)(this._destroy$)).subscribe(g=>{this.width!==g.primary&&(this.width=`${g.primary}px`)})}get options(){return this._options}insertContent(S){this.keyMapService.insertContent(S)}set options(S){this._options=S??{hideIcons:[]},this._hideIcons={},this._options.hideIcons?.forEach(z=>{this._hideIcons[z]=!0})}ngOnDestroy(){this._destroy$.next(null)}}lr.\u0275fac=function(S){return new(S||lr)(f.Y36(ge.Mi),f.Y36(j.dU),f.Y36(it))},lr.\u0275cmp=f.Xpm({type:lr,selectors:[["ms-codemirror-toolbar"]],hostVars:2,hostBindings:function(S,z){2&S&&f.Udp("width",z.width)},inputs:{options:"options"},decls:14,vars:15,consts:[[1,"tool-bar",2,"height","3.8rem",3,"ngClass"],["mat-icon-button","",3,"title","click",4,"ngIf"],["mat-icon-button","",3,"title","click"]],template:function(S,z){1&S&&(f.TgZ(0,"mat-toolbar",0),f.ALo(1,"async"),f.YNc(2,Tt,3,1,"button",1),f.YNc(3,Zr,3,1,"button",1),f.YNc(4,tn,3,1,"button",1),f.YNc(5,Dt,3,1,"button",1),f.YNc(6,mn,3,1,"button",1),f.YNc(7,Yr,3,1,"button",1),f.YNc(8,or,3,1,"button",1),f.YNc(9,Pr,3,1,"button",1),f.YNc(10,ar,3,1,"button",1),f.TgZ(11,"button",2),f.NdJ("click",function(){return z.insertContent("Meta")}),f.TgZ(12,"mat-icon"),f._uU(13,"receipt"),f.qZA()()()),2&S&&(f.Q6J("ngClass",f.VKq(13,yr,!1===f.lcZ(1,11,z.isScreenWide$))),f.xp6(2),f.Q6J("ngIf",!z._hideIcons.Bold),f.xp6(1),f.Q6J("ngIf",!z._hideIcons.Italic),f.xp6(1),f.Q6J("ngIf",!z._hideIcons.Heading),f.xp6(1),f.Q6J("ngIf",!z._hideIcons.Refrence),f.xp6(1),f.Q6J("ngIf",!z._hideIcons.Ul),f.xp6(1),f.Q6J("ngIf",!z._hideIcons.Ol),f.xp6(1),f.Q6J("ngIf",!z._hideIcons.Code),f.xp6(1),f.Q6J("ngIf",!z._hideIcons.Link),f.xp6(1),f.Q6J("ngIf",!z._hideIcons.Image),f.xp6(1),f.MGl("title","Meta Data (",z.keyMapService.config.Meta.hotKey,")"))},dependencies:[k.mk,k.O5,$r.Hw,kt.RK,Br.Ye,k.Ov],styles:[".tool-bar--bottom[_ngcontent-%COMP%]{position:fixed;bottom:0;padding:0;overflow-x:auto;overflow-y:hidden}.tool-bar[_ngcontent-%COMP%]{background:whitesmoke;z-index:8}[_nghost-%COMP%]{z-index:10;display:block}"]});const Ur=["toolbar"];function pr(be,S){if(1&be){const z=f.EpF();f.TgZ(0,"button",4),f.NdJ("click",function(){f.CHM(z);const g=f.oxw();return f.KtG(g.togglePreview())}),f.TgZ(1,"mat-icon"),f._uU(2),f.ALo(3,"async"),f.qZA()()}if(2&be){const z=f.oxw();f.xp6(2),f.Oqu((f.lcZ(3,1,z.showPreview$),"chrome_reader_mode"))}}function Rr(be,S){if(1&be){const z=f.EpF();f.TgZ(0,"button",10),f.NdJ("click",function(g){f.CHM(z);const T=f.oxw();return f.KtG(T.more(g))}),f._uU(1),f.qZA()}if(2&be){const z=f.oxw();f.xp6(1),f.hij(" ",z.lockScrollWithView?"UnLock Scroll":"Lock Scroll"," ")}}class Hr extends tt.LF{constructor(S,z,Ce,g,T,le,ye,ke,Qe,je,qe){super(),this.router=S,this.utils=z,this.markdown=Ce,this._editorService=g,this.docService=T,this.store=le,this.bottomSheet=ye,this.docSaver=ke,this._breakpointObserver=Qe,this.documentEffects=je,this.markdownStore=qe,this.DocumentMode=_.U,this.isScreenWide$=this.utils.isWideScreen$,this.isStoreDirty$=this.store.currentDocStatus_IsStoreDirty$.pipe((0,ot.O)(!1)),this.isDbDirty$=this.store.currentDocStatus_IsDbDirty$.pipe((0,ot.O)(!1)),this.isSyncing$=this.store.currentDocStatus_IsSyncing$.pipe((0,ot.O)(!1)),this.dirtyInfo$=(0,pt.a)([this.isStoreDirty$,this.isDbDirty$,this.isSyncing$]).pipe((0,te.U)(([nt,yt,Ct])=>nt?"modification not saved":yt?"modification not sync with server":Ct?"syncing modification with server":"")),this.showPreview$=this.markdownStore.editWithPreview_,this.logger=(0,j.Yd)("MarkdownEditorToolbar"),this.onSave=()=>{const nt=this.editor.getValue();if(this.store.currentDocStatus_IsStoreDirty$.state){const yt=this.bottomSheet.open(Tr);yt.afterDismissed().subscribe(Ct=>{this.documentEffects.saveDocument_.next({content:nt,format:j.cZ.md,forceUpdate:!0,changeLog:yt.instance.changeNote})})}else this.logger.debug("it seems the document is not dirty."),this.documentEffects.saveDocument_.next({content:nt,format:j.cZ.md,forceUpdate:!0,changeLog:""})},this.undo=()=>{this.editor&&this.editor.undo()},this.redo=()=>{this.editor&&this.editor.redo()},this.toViewMode=()=>{this.markdownStore.documentMode_.next(_.U.View)},this.new=()=>{this.documentEffects.createDocument_.next({format:j.cZ.md})},this.lockScrollWithView=!1,super.addSub(this._breakpointObserver.observe(["(orientation: portrait)","(orientation: landscape)"]),this._editorService.docEditorLoaded$.subscribe(nt=>{this.editor=nt}),this.store.currentDocStatus_IsEditable$.pipe((0,G.b)(nt=>{nt||this.toViewMode()})));const Ke=this._editorService.commands;Ke.save=this.onSave,Ke.scrollLineUp=function(nt){const yt=nt.getScrollInfo();if(!nt.somethingSelected()){const Ct=nt.lineAtHeight(yt.top+yt.clientHeight,"local");nt.getCursor().line>=Ct&&nt.execCommand("goLineUp")}nt.scrollTo(null,yt.top-nt.defaultTextHeight())},Ke.scrollLineDown=function(nt){const yt=nt.getScrollInfo();if(!nt.somethingSelected()){const Ct=nt.lineAtHeight(yt.top,"local")+1;nt.getCursor().line<=Ct&&nt.execCommand("goLineDown")}nt.scrollTo(null,yt.top+nt.defaultTextHeight())}}back(S){this.router.navigateByUrl("/home")}togglePreview(){this.markdownStore.editWithPreview_.next(!this.markdownStore.editWithPreview_.state)}ngAfterViewInit(){this.hideHeight=this.toolbar.nativeElement.offsetHeight}previewPanelClick(S){S.preventDefault(),S.stopPropagation()}more(S){"0"===S.item.id&&(this.lockScrollWithView=!this.lockScrollWithView,this.markdownStore.isLockEditorScrollWithView_.next(this.lockScrollWithView))}}Hr.\u0275fac=function(S){return new(S||Hr)(f.Y36(V.F0),f.Y36(tt.dU),f.Y36(Vr.l),f.Y36(oe),f.Y36(Ar.R7),f.Y36(Pe.G),f.Y36(_t.ch),f.Y36(Ue),f.Y36(tr.Yg),f.Y36(fe.CL),f.Y36(_.A))},Hr.\u0275cmp=f.Xpm({type:Hr,selectors:[["editor-toolbar"]],viewQuery:function(S,z){if(1&S&&f.Gf(Ur,5,f.SBq),2&S){let Ce;f.iGM(Ce=f.CRH())&&(z.toolbar=Ce.first)}},features:[f.qOj],decls:38,vars:22,consts:[["color","primary",2,"z-index","20","pointer-events","all"],["toolbar",""],["mat-icon-button","","routerLinkActive","",3,"click"],[2,"flex","1 1 auto","margin","2.4rem"],["mat-icon-button","",3,"click"],["mat-icon-button","",3,"title","click"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu",""],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-menu-item","","disabled","",3,"click"],[2,"pointer-events","all"]],template:function(S,z){if(1&S&&(f.TgZ(0,"mat-toolbar",0,1)(2,"mat-toolbar-row")(3,"button",2),f.NdJ("click",function(g){return z.back(g)}),f.TgZ(4,"mat-icon"),f._uU(5," arrow_back "),f.qZA()(),f.TgZ(6,"span",3),f._uU(7,"Edit"),f.qZA(),f.TgZ(8,"button",4),f.NdJ("click",function(){return z.undo()}),f.TgZ(9,"mat-icon"),f._uU(10," undo "),f.qZA()(),f.TgZ(11,"button",4),f.NdJ("click",function(){return z.redo()}),f.TgZ(12,"mat-icon"),f._uU(13," redo "),f.qZA()(),f.TgZ(14,"button",5),f.NdJ("click",function(){return z.onSave()}),f.ALo(15,"async"),f.ALo(16,"async"),f.ALo(17,"async"),f.ALo(18,"async"),f.TgZ(19,"mat-icon"),f._uU(20,"save"),f.qZA()(),f.YNc(21,pr,4,3,"button",6),f.ALo(22,"async"),f.TgZ(23,"button",4),f.NdJ("click",function(){return z.toViewMode()}),f.TgZ(24,"mat-icon"),f._uU(25," visibility "),f.qZA()(),f.TgZ(26,"button",7)(27,"mat-icon"),f._uU(28," more_vert "),f.qZA()(),f.TgZ(29,"mat-menu",null,8),f.YNc(31,Rr,2,1,"button",9),f.ALo(32,"async"),f.TgZ(33,"button",10),f.NdJ("click",function(g){return z.more(g)}),f._uU(34,"Key Map"),f.qZA(),f.TgZ(35,"button",11),f.NdJ("click",function(g){return z.more(g)}),f._uU(36,"Item 2"),f.qZA()()()(),f._UZ(37,"ms-codemirror-toolbar",12)),2&S){const Ce=f.MAs(30);f.xp6(14),f.ekj("mem-dirty",f.lcZ(15,10,z.isStoreDirty$))("db-dirty",f.lcZ(16,12,z.isDbDirty$))("net-syncing",f.lcZ(17,14,z.isSyncing$)),f.Q6J("title",f.lcZ(18,16,z.dirtyInfo$)),f.xp6(7),f.Q6J("ngIf",f.lcZ(22,18,z.isScreenWide$)),f.xp6(5),f.Q6J("matMenuTriggerFor",Ce),f.xp6(5),f.Q6J("ngIf",f.lcZ(32,20,z.isScreenWide$))}},dependencies:[k.O5,$r.Hw,Nr.VK,Nr.OP,Nr.p6,kt.RK,Br.Ye,Br.rD,lr,k.Ov],styles:['@charset "UTF-8";[_nghost-%COMP%]{pointer-events:none}a[_ngcontent-%COMP%]:hover{color:#ffffffb3;text-decoration:none}.mem-dirty[_ngcontent-%COMP%]:before{content:" \\25cf";font-size:1.34rem;color:red;margin-top:.6rem;margin-left:.9rem;position:absolute}.db-dirty[_ngcontent-%COMP%]{color:#4169e1}.net-syncing[_ngcontent-%COMP%]:after{margin-top:-2.2rem;margin-left:1.25rem;content:"";display:inherit;border:3px solid #f3f3f3;border-radius:50%;border-top:.35rem solid #3498db;width:.8rem;height:.8rem;animation:_ngcontent-%COMP%_spin 1.8s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}'],data:{animation:[(0,Ye.X$)("show",[(0,Ye.SB)("true",(0,Ye.oB)({opacity:1,transform:"translateY(0)"})),(0,Ye.eR)("void => true",[(0,Ye.oB)({opacity:0,transform:"translateY(-100%)"}),(0,Ye.jt)("0.2s ease-in")]),(0,Ye.eR)("true => void",[(0,Ye.jt)("0.2s ease-out",(0,Ye.oB)({opacity:0,transform:"translateY(-100%)"}))])])]}});class Bt extends j.LF{constructor(S){super(),this.codeMirrorComponent=S,this.addSub(S.afterInit.subscribe(z=>{this.codemirror=z,this.codemirror.on("blur",()=>{this.onTouched()}),this.codemirror.on("change",()=>{const Ce=this.codemirror.getValue();this.onChange(Ce)})}))}writeValue(S){null!=S&&this.codeMirrorComponent.writeValue(S)}registerOnChange(S){this.onChange=S}registerOnTouched(S){this.onTouched=S}setDisabledState(S){this.codeMirrorComponent.host.disabled=!0}onChange(S){}onTouched(){}}Bt.\u0275fac=function(S){return new(S||Bt)(f.Y36(ne))},Bt.\u0275dir=f.lG2({type:Bt,selectors:[["ms-codemirror"]],features:[f._Bn([{provide:Ht.JU,useExisting:(0,f.Gpc)(()=>Bt),multi:!0}]),f.qOj]});const jt=function(be){return{container$:be}},Mr=function(be,S){return[be,S]};class ct extends ue.L{constructor(S,z,Ce,g,T,le,ye,ke,Qe){super(),this.documentEffects=S,this._elementRef=z,this.dialog=Ce,this.markdownStore=g,this.gestureConfig=T,this.editorService=le,this.store=ye,this.ngZone=ke,this.utils=Qe,this.logger=(0,j.Yd)("MarkdownEditorComponent"),this.editorLoaded=!1,this.DocumentMode=_.U,this.docMode$=this.markdownStore.documentMode_,this.markdown$=this.store.currentDocContentString$,this.toViewMode=je=>{this.markdownStore.documentMode_.next(_.U.View)},super.addSub(this.editorService.docEditorLoaded$.subscribe(()=>{setTimeout(()=>this.editorLoaded=!0)}),this.markdownStore.editIt_.subscribe(({sourceLine:je})=>{je&&(this.markdownStore.documentMode_.next(_.U.Edit),setTimeout(()=>{this.editorService.gotoLine(je[0])}))}),this.docMode$.subscribe(je=>{je===_.U.Edit&&setTimeout(()=>this.codeMirrorComponent.refresh())}))}ngAfterViewInit(){const S=this._elementRef.nativeElement.getElementsByClassName("CodeMirror-scroll")[0];S.style.marginRight="0px",this.markdownStore.editor_.next(new j.vR(S,void 0,void 0,this.ngZone));let z=null;super.addSub(this.utils.isWideScreen$.pipe((0,G.b)(Ce=>{Ce?z&&(z.off("swiperight"),z.off("swipeleft"),z.destroy(),z=null):null===z&&(z=this.gestureConfig.buildHammer(S),z.on("swiperight",this.toViewMode),z.on("swipeleft",this.toViewMode))})).subscribe())}canDeactivate(){const S=()=>{const g=this.store.currentId_.state;g===ge.h2&&this.documentEffects.deleteDocument_.next({id:g})};return this.store.currentDocStatus$.state?.isStoreDirty?this.dialog.open(Ae.n,{width:"300px",data:{title:"Save?",message:"Document modified, are you want to save?",defaultAction:"Yes",additionalAction:"No"}}).afterClosed().pipe((0,te.U)(g=>"Yes"===g?(this.documentEffects.saveDocument_.next({content:this.codeMirrorComponent.value,forceUpdate:!0}),!1):(S(),!0))):(S(),(0,Q.of)(!0))}}ct.\u0275fac=function(S){return new(S||ct)(f.Y36(fe.CL),f.Y36(f.SBq),f.Y36(He.uw),f.Y36(_.A),f.Y36(x.ok),f.Y36(oe),f.Y36(Pe.G),f.Y36(f.R0b),f.Y36(j.dU))},ct.\u0275cmp=f.Xpm({type:ct,selectors:[["ms-markdown-editor"]],viewQuery:function(S,z){if(1&S&&f.Gf(ne,5),2&S){let Ce;f.iGM(Ce=f.CRH())&&(z.codeMirrorComponent=Ce.first)}},features:[f.qOj],decls:6,vars:17,consts:[[2,"z-index","802",3,"scrollHide","hide","usePadding","hideHeight"],["toolbar",""],[3,"ngModel"],[3,"isRunning"]],template:function(S,z){if(1&S&&(f._UZ(0,"editor-toolbar",0,1),f.ALo(2,"async"),f._UZ(3,"ms-codemirror",2),f.ALo(4,"async"),f._UZ(5,"sk-cube-grid",3)),2&S){const Ce=f.MAs(1);f.Q6J("scrollHide",f.WLB(14,Mr,f.VKq(10,jt,z.markdownStore.viewer_),f.VKq(12,jt,z.markdownStore.editor_)))("hide",f.lcZ(2,6,z.docMode$)!==z.DocumentMode.Edit)("usePadding",!0)("hideHeight",Ce.hideHeight),f.xp6(3),f.Q6J("ngModel",f.lcZ(4,8,z.markdown$)),f.xp6(2),f.Q6J("isRunning",!z.editorLoaded)}},dependencies:[Ht.JJ,Ht.On,We.M,lt.r,Hr,ne,Bt,k.Ov],styles:["[_nghost-%COMP%]{display:block;height:100%;overflow-y:auto}"]});const Ie=[{path:"",canDeactivate:[j.Ic],component:ct},{path:"new",canDeactivate:[j.Ic],component:ct}];class rr{}rr.\u0275fac=function(S){return new(S||rr)},rr.\u0275mod=f.oAB({type:rr}),rr.\u0275inj=f.cJS({imports:[V.Bz.forChild(Ie),V.Bz]});var Or=de(5982),sr=de(7942),st=de(3346);class Wt{}Wt.\u0275fac=function(S){return new(S||Wt)},Wt.\u0275mod=f.oAB({type:Wt}),Wt.\u0275inj=f.cJS({imports:[k.ez,st.q,Ht.UX,Ht.u5]});class ur{constructor(S){this.editor=S}}ur.\u0275fac=function(S){return new(S||ur)(f.LFG(oe))},ur.\u0275mod=f.oAB({type:ur}),ur.\u0275inj=f.cJS({providers:[it,oe,Ue,_e.I],imports:[ge.m8,k.ez,Ht.u5,Or.Fm,Wt,rr,sr.q]})},6720:(xt,et,de)=>{!function(k){"use strict";var A={},_=/[^\s\u00a0]/,q=k.Pos,O=k.cmpPos;function f(V){var j=V.search(_);return-1==j?0:j}function oe(V,j){var U=V.getMode();return!1!==U.useInnerComments&&U.innerMode?V.getModeAt(j):U}k.commands.toggleComment=function(V){V.toggleComment()},k.defineExtension("toggleComment",function(V){V||(V=A);for(var j=this,U=1/0,se=this.listSelections(),ce=null,Me=se.length-1;Me>=0;Me--){var re=se[Me].from(),ae=se[Me].to();re.line>=U||(ae.line>=U&&(ae=q(U,0)),U=re.line,null==ce?j.uncomment(re,ae,V)?ce="un":(j.lineComment(re,ae,V),ce="line"):"un"==ce?j.uncomment(re,ae,V):j.lineComment(re,ae,V))}}),k.defineExtension("lineComment",function(V,j,U){U||(U=A);var se=this,ce=oe(se,V),Me=se.getLine(V.line);if(null!=Me&&!function H(V,j,U){return/\bstring\b/.test(V.getTokenTypeAt(q(j.line,0)))&&!/^[\'\"\`]/.test(U)}(se,V,Me)){var re=U.lineComment||ce.lineComment;if(!re)return void((U.blockCommentStart||ce.blockCommentStart)&&(U.fullLines=!0,se.blockComment(V,j,U)));var ae=Math.min(0!=j.ch||j.line==V.line?j.line+1:j.line,se.lastLine()+1),M=null==U.padding?" ":U.padding,W=U.commentBlankLines||V.line==j.line;se.operation(function(){if(U.indent){for(var m=null,w=V.line;w<ae;++w){var R=(D=se.getLine(w)).slice(0,f(D));(null==m||m.length>R.length)&&(m=R)}for(w=V.line;w<ae;++w){var D=se.getLine(w),C=m.length;!W&&!_.test(D)||(D.slice(0,C)!=m&&(C=f(D)),se.replaceRange(m+re+M,q(w,0),q(w,C)))}}else for(w=V.line;w<ae;++w)(W||_.test(se.getLine(w)))&&se.replaceRange(re+M,q(w,0))})}}),k.defineExtension("blockComment",function(V,j,U){U||(U=A);var se=this,ce=oe(se,V),Me=U.blockCommentStart||ce.blockCommentStart,re=U.blockCommentEnd||ce.blockCommentEnd;if(Me&&re){if(!/\bcomment\b/.test(se.getTokenTypeAt(q(V.line,0)))){var ae=Math.min(j.line,se.lastLine());ae!=V.line&&0==j.ch&&_.test(se.getLine(ae))&&--ae;var M=null==U.padding?" ":U.padding;V.line>ae||se.operation(function(){if(0!=U.fullLines){var W=_.test(se.getLine(ae));se.replaceRange(M+re,q(ae)),se.replaceRange(Me+M,q(V.line,0));var m=U.blockCommentLead||ce.blockCommentLead;if(null!=m)for(var w=V.line+1;w<=ae;++w)(w!=ae||W)&&se.replaceRange(m+M,q(w,0))}else{var D=0==O(se.getCursor("to"),j),R=!se.somethingSelected();se.replaceRange(re,j),D&&se.setSelection(R?j:se.getCursor("from"),j),se.replaceRange(Me,V)}})}}else(U.lineComment||ce.lineComment)&&0!=U.fullLines&&se.lineComment(V,j,U)}),k.defineExtension("uncomment",function(V,j,U){U||(U=A);var m,se=this,ce=oe(se,V),Me=Math.min(0!=j.ch||j.line==V.line?j.line:j.line-1,se.lastLine()),re=Math.min(V.line,Me),ae=U.lineComment||ce.lineComment,M=[],W=null==U.padding?" ":U.padding;e:if(ae){for(var w=re;w<=Me;++w){var D=se.getLine(w),R=D.indexOf(ae);if(R>-1&&!/comment/.test(se.getTokenTypeAt(q(w,R+1)))&&(R=-1),-1==R&&_.test(D)||R>-1&&_.test(D.slice(0,R)))break e;M.push(D)}if(se.operation(function(){for(var _e=re;_e<=Me;++_e){var Ge=M[_e-re],N=Ge.indexOf(ae),b=N+ae.length;N<0||(Ge.slice(b,b+W.length)==W&&(b+=W.length),m=!0,se.replaceRange("",q(_e,N),q(_e,b)))}}),m)return!0}var C=U.blockCommentStart||ce.blockCommentStart,K=U.blockCommentEnd||ce.blockCommentEnd;if(!C||!K)return!1;var ne=U.blockCommentLead||ce.blockCommentLead,G=se.getLine(re),te=G.indexOf(C);if(-1==te)return!1;var Q=Me==re?G:se.getLine(Me),ge=Q.indexOf(K,Me==re?te+C.length:0),x=q(re,te+1),ue=q(Me,ge+1);if(-1==ge||!/comment/.test(se.getTokenTypeAt(x))||!/comment/.test(se.getTokenTypeAt(ue))||se.getRange(x,ue,"\n").indexOf(K)>-1)return!1;var fe=G.lastIndexOf(C,V.ch),Ae=-1==fe?-1:G.slice(0,V.ch).indexOf(K,fe+C.length);if(-1!=fe&&-1!=Ae&&Ae+K.length!=V.ch)return!1;Ae=Q.indexOf(K,j.ch);var He=Q.slice(j.ch).lastIndexOf(C,Ae-j.ch);return fe=-1==Ae||-1==He?-1:j.ch+He,(-1==Ae||-1==fe||fe==j.ch)&&(se.operation(function(){se.replaceRange("",q(Me,ge-(W&&Q.slice(ge-W.length,ge)==W?W.length:0)),q(Me,ge+K.length));var _e=te+C.length;if(W&&G.slice(_e,_e+W.length)==W&&(_e+=W.length),se.replaceRange("",q(re,te),q(re,_e)),ne)for(var Ge=re+1;Ge<=Me;++Ge){var N=se.getLine(Ge),b=N.indexOf(ne);if(-1!=b&&!_.test(N.slice(0,b))){var Te=b+ne.length;W&&N.slice(Te,Te+W.length)==W&&(Te+=W.length),se.replaceRange("",q(Ge,b),q(Ge,Te))}}}),!0)})}(de(3867))},6246:(xt,et,de)=>{!function(k){function A(q,O,f){var oe,H=q.getWrapperElement();return(oe=H.appendChild(document.createElement("div"))).className=f?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof O?oe.innerHTML=O:oe.appendChild(O),k.addClass(H,"dialog-opened"),oe}function _(q,O){q.state.currentNotificationClose&&q.state.currentNotificationClose(),q.state.currentNotificationClose=O}k.defineExtension("openDialog",function(q,O,f){f||(f={}),_(this,null);var H=A(this,q,f.bottom),oe=!1,V=this;function j(ce){if("string"==typeof ce)U.value=ce;else{if(oe)return;oe=!0,k.rmClass(H.parentNode,"dialog-opened"),H.parentNode.removeChild(H),V.focus(),f.onClose&&f.onClose(H)}}var se,U=H.getElementsByTagName("input")[0];return U?(U.focus(),f.value&&(U.value=f.value,!1!==f.selectValueOnOpen&&U.select()),f.onInput&&k.on(U,"input",function(ce){f.onInput(ce,U.value,j)}),f.onKeyUp&&k.on(U,"keyup",function(ce){f.onKeyUp(ce,U.value,j)}),k.on(U,"keydown",function(ce){f&&f.onKeyDown&&f.onKeyDown(ce,U.value,j)||((27==ce.keyCode||!1!==f.closeOnEnter&&13==ce.keyCode)&&(U.blur(),k.e_stop(ce),j()),13==ce.keyCode&&O(U.value,ce))}),!1!==f.closeOnBlur&&k.on(H,"focusout",function(ce){null!==ce.relatedTarget&&j()})):(se=H.getElementsByTagName("button")[0])&&(k.on(se,"click",function(){j(),V.focus()}),!1!==f.closeOnBlur&&k.on(se,"blur",j),se.focus()),j}),k.defineExtension("openConfirm",function(q,O,f){_(this,null);var H=A(this,q,f&&f.bottom),oe=H.getElementsByTagName("button"),V=!1,j=this,U=1;function se(){V||(V=!0,k.rmClass(H.parentNode,"dialog-opened"),H.parentNode.removeChild(H),j.focus())}oe[0].focus();for(var ce=0;ce<oe.length;++ce){var Me=oe[ce];(function(re){k.on(Me,"click",function(ae){k.e_preventDefault(ae),se(),re&&re(j)})})(O[ce]),k.on(Me,"blur",function(){--U,setTimeout(function(){U<=0&&se()},200)}),k.on(Me,"focus",function(){++U})}}),k.defineExtension("openNotification",function(q,O){_(this,j);var oe,f=A(this,q,O&&O.bottom),H=!1,V=O&&typeof O.duration<"u"?O.duration:5e3;function j(){H||(H=!0,clearTimeout(oe),k.rmClass(f.parentNode,"dialog-opened"),f.parentNode.removeChild(f))}return k.on(f,"click",function(U){k.e_preventDefault(U),j()}),V&&(oe=setTimeout(j,V)),j})}(de(3867))},6338:(xt,et,de)=>{!function(k){"use strict";k.defineOption("fullScreen",!1,function(q,O,f){f==k.Init&&(f=!1),!f!=!O&&(O?function A(q){var O=q.getWrapperElement();q.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:O.style.width,height:O.style.height},O.style.width="",O.style.height="auto",O.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",q.refresh()}(q):function _(q){var O=q.getWrapperElement();O.className=O.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var f=q.state.fullScreenRestore;O.style.width=f.width,O.style.height=f.height,window.scrollTo(f.scrollLeft,f.scrollTop),q.refresh()}(q))})}(de(3867))},2491:(xt,et,de)=>{!function(k){var A=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),_=k.Pos,q={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function O(U){return U&&U.bracketRegex||/[(){}[\]]/}function f(U,se,ce){var Me=U.getLineHandle(se.line),re=se.ch-1,ae=ce&&ce.afterCursor;null==ae&&(ae=/(^| )cm-fat-cursor($| )/.test(U.getWrapperElement().className));var M=O(ce),W=!ae&&re>=0&&M.test(Me.text.charAt(re))&&q[Me.text.charAt(re)]||M.test(Me.text.charAt(re+1))&&q[Me.text.charAt(++re)];if(!W)return null;var m=">"==W.charAt(1)?1:-1;if(ce&&ce.strict&&m>0!=(re==se.ch))return null;var w=U.getTokenTypeAt(_(se.line,re+1)),D=H(U,_(se.line,re+(m>0?1:0)),m,w,ce);return null==D?null:{from:_(se.line,re),to:D&&D.pos,match:D&&D.ch==W.charAt(0),forward:m>0}}function H(U,se,ce,Me,re){for(var ae=re&&re.maxScanLineLength||1e4,M=re&&re.maxScanLines||1e3,W=[],m=O(re),w=ce>0?Math.min(se.line+M,U.lastLine()+1):Math.max(U.firstLine()-1,se.line-M),D=se.line;D!=w;D+=ce){var R=U.getLine(D);if(R){var C=ce>0?0:R.length-1,K=ce>0?R.length:-1;if(!(R.length>ae))for(D==se.line&&(C=se.ch-(ce<0?1:0));C!=K;C+=ce){var ne=R.charAt(C);if(m.test(ne)&&(void 0===Me||(U.getTokenTypeAt(_(D,C+1))||"")==(Me||""))){var G=q[ne];if(G&&">"==G.charAt(1)==ce>0)W.push(ne);else{if(!W.length)return{pos:_(D,C),ch:ne};W.pop()}}}}}return D-ce!=(ce>0?U.lastLine():U.firstLine())&&null}function oe(U,se,ce){for(var Me=U.state.matchBrackets.maxHighlightLineLength||1e3,re=ce&&ce.highlightNonMatching,ae=[],M=U.listSelections(),W=0;W<M.length;W++){var m=M[W].empty()&&f(U,M[W].head,ce);if(m&&(m.match||!1!==re)&&U.getLine(m.from.line).length<=Me){var w=m.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";ae.push(U.markText(m.from,_(m.from.line,m.from.ch+1),{className:w})),m.to&&U.getLine(m.to.line).length<=Me&&ae.push(U.markText(m.to,_(m.to.line,m.to.ch+1),{className:w}))}}if(ae.length){A&&U.state.focused&&U.focus();var D=function(){U.operation(function(){for(var R=0;R<ae.length;R++)ae[R].clear()})};if(!se)return D;setTimeout(D,800)}}function V(U){U.operation(function(){U.state.matchBrackets.currentlyHighlighted&&(U.state.matchBrackets.currentlyHighlighted(),U.state.matchBrackets.currentlyHighlighted=null),U.state.matchBrackets.currentlyHighlighted=oe(U,!1,U.state.matchBrackets)})}function j(U){U.state.matchBrackets&&U.state.matchBrackets.currentlyHighlighted&&(U.state.matchBrackets.currentlyHighlighted(),U.state.matchBrackets.currentlyHighlighted=null)}k.defineOption("matchBrackets",!1,function(U,se,ce){ce&&ce!=k.Init&&(U.off("cursorActivity",V),U.off("focus",V),U.off("blur",j),j(U)),se&&(U.state.matchBrackets="object"==typeof se?se:{},U.on("cursorActivity",V),U.on("focus",V),U.on("blur",j))}),k.defineExtension("matchBrackets",function(){oe(this,!0)}),k.defineExtension("findMatchingBracket",function(U,se,ce){return(ce||"boolean"==typeof se)&&(ce?(ce.strict=se,se=ce):se=se?{strict:!0}:null),f(this,U,se)}),k.defineExtension("scanForBracket",function(U,se,ce,Me){return H(this,U,se,ce,Me)})}(de(3867))},9137:(xt,et,de)=>{!function(k){"use strict";function A(O){O.state.tagHit&&O.state.tagHit.clear(),O.state.tagOther&&O.state.tagOther.clear(),O.state.tagHit=O.state.tagOther=null}function _(O){O.state.failedTagMatch=!1,O.operation(function(){if(A(O),!O.somethingSelected()){var f=O.getCursor(),H=O.getViewport();H.from=Math.min(H.from,f.line),H.to=Math.max(f.line+1,H.to);var oe=k.findMatchingTag(O,f,H);if(oe){if(O.state.matchBothTags){var V="open"==oe.at?oe.open:oe.close;V&&(O.state.tagHit=O.markText(V.from,V.to,{className:"CodeMirror-matchingtag"}))}var j="close"==oe.at?oe.open:oe.close;j?O.state.tagOther=O.markText(j.from,j.to,{className:"CodeMirror-matchingtag"}):O.state.failedTagMatch=!0}}})}function q(O){O.state.failedTagMatch&&_(O)}k.defineOption("matchTags",!1,function(O,f,H){H&&H!=k.Init&&(O.off("cursorActivity",_),O.off("viewportChange",q),A(O)),f&&(O.state.matchBothTags="object"==typeof f&&f.bothTags,O.on("cursorActivity",_),O.on("viewportChange",q),_(O))}),k.commands.toMatchingTag=function(O){var f=k.findMatchingTag(O,O.getCursor());if(f){var H="close"==f.at?f.open:f.close;H&&O.extendSelection(H.to,H.from)}}}(de(3867),de(388))},7726:(xt,et,de)=>{!function(k){"use strict";k.registerHelper("fold","brace",function(A,_){var f,q=_.line,O=A.getLine(q);function H(R){for(var C=_.ch,K=0;;){var ne=C<=0?-1:O.lastIndexOf(R,C-1);if(-1!=ne){if(1==K&&ne<_.ch)break;if(f=A.getTokenTypeAt(k.Pos(q,ne+1)),!/^(comment|string)/.test(f))return ne+1;C=ne-1}else{if(1==K)break;K=1,C=O.length}}}var j,U,se,oe=H("{"),V=H("[");if(null!=oe&&(null==V||V>oe))se=oe,j="{",U="}";else{if(null==V)return;se=V,j="[",U="]"}var re,ae,ce=1,Me=A.lastLine();e:for(var M=q;M<=Me;++M)for(var W=A.getLine(M),m=M==q?se:0;;){var w=W.indexOf(j,m),D=W.indexOf(U,m);if(w<0&&(w=W.length),D<0&&(D=W.length),(m=Math.min(w,D))==W.length)break;if(A.getTokenTypeAt(k.Pos(M,m+1))==f)if(m==w)++ce;else if(!--ce){re=M,ae=m;break e}++m}if(null!=re&&q!=re)return{from:k.Pos(q,se),to:k.Pos(re,ae)}}),k.registerHelper("fold","import",function(A,_){function q(j){if(j<A.firstLine()||j>A.lastLine())return null;var U=A.getTokenAt(k.Pos(j,1));if(/\S/.test(U.string)||(U=A.getTokenAt(k.Pos(j,U.end+1))),"keyword"!=U.type||"import"!=U.string)return null;for(var se=j,ce=Math.min(A.lastLine(),j+10);se<=ce;++se){var re=A.getLine(se).indexOf(";");if(-1!=re)return{startCh:U.end,end:k.Pos(se,re)}}}var H,O=_.line,f=q(O);if(!f||q(O-1)||(H=q(O-2))&&H.end.line==O-1)return null;for(var oe=f.end;;){var V=q(oe.line+1);if(null==V)break;oe=V.end}return{from:A.clipPos(k.Pos(O,f.startCh+1)),to:oe}}),k.registerHelper("fold","include",function(A,_){function q(V){if(V<A.firstLine()||V>A.lastLine())return null;var j=A.getTokenAt(k.Pos(V,1));return/\S/.test(j.string)||(j=A.getTokenAt(k.Pos(V,j.end+1))),"meta"==j.type&&"#include"==j.string.slice(0,8)?j.start+8:void 0}var O=_.line,f=q(O);if(null==f||null!=q(O-1))return null;for(var H=O;null!=q(H+1);)++H;return{from:k.Pos(O,f+1),to:A.clipPos(k.Pos(H))}})}(de(3867))},4171:(xt,et,de)=>{!function(k){"use strict";function A(f,H,oe,V){if(oe&&oe.call){var j=oe;oe=null}else j=O(f,oe,"rangeFinder");"number"==typeof H&&(H=k.Pos(H,0));var U=O(f,oe,"minFoldSize");function se(ae){var M=j(f,H);if(!M||M.to.line-M.from.line<U)return null;if("fold"===V)return M;for(var W=f.findMarksAt(M.from),m=0;m<W.length;++m)if(W[m].__isFold){if(!ae)return null;M.cleared=!0,W[m].clear()}return M}var ce=se(!0);if(O(f,oe,"scanUp"))for(;!ce&&H.line>f.firstLine();)H=k.Pos(H.line-1,0),ce=se(!1);if(ce&&!ce.cleared&&"unfold"!==V){var Me=function _(f,H,oe){var V=O(f,H,"widget");if("function"==typeof V&&(V=V(oe.from,oe.to)),"string"==typeof V){var j=document.createTextNode(V);(V=document.createElement("span")).appendChild(j),V.className="CodeMirror-foldmarker"}else V&&(V=V.cloneNode(!0));return V}(f,oe,ce);k.on(Me,"mousedown",function(ae){re.clear(),k.e_preventDefault(ae)});var re=f.markText(ce.from,ce.to,{replacedWith:Me,clearOnEnter:O(f,oe,"clearOnEnter"),__isFold:!0});re.on("clear",function(ae,M){k.signal(f,"unfold",f,ae,M)}),k.signal(f,"fold",f,ce.from,ce.to)}}k.newFoldFunction=function(f,H){return function(oe,V){A(oe,V,{rangeFinder:f,widget:H})}},k.defineExtension("foldCode",function(f,H,oe){A(this,f,H,oe)}),k.defineExtension("isFolded",function(f){for(var H=this.findMarksAt(f),oe=0;oe<H.length;++oe)if(H[oe].__isFold)return!0}),k.commands.toggleFold=function(f){f.foldCode(f.getCursor())},k.commands.fold=function(f){f.foldCode(f.getCursor(),null,"fold")},k.commands.unfold=function(f){f.foldCode(f.getCursor(),{scanUp:!1},"unfold")},k.commands.foldAll=function(f){f.operation(function(){for(var H=f.firstLine(),oe=f.lastLine();H<=oe;H++)f.foldCode(k.Pos(H,0),{scanUp:!1},"fold")})},k.commands.unfoldAll=function(f){f.operation(function(){for(var H=f.firstLine(),oe=f.lastLine();H<=oe;H++)f.foldCode(k.Pos(H,0),{scanUp:!1},"unfold")})},k.registerHelper("fold","combine",function(){var f=Array.prototype.slice.call(arguments,0);return function(H,oe){for(var V=0;V<f.length;++V){var j=f[V](H,oe);if(j)return j}}}),k.registerHelper("fold","auto",function(f,H){for(var oe=f.getHelpers(H,"fold"),V=0;V<oe.length;V++){var j=oe[V](f,H);if(j)return j}});var q={rangeFinder:k.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:!1,clearOnEnter:!0};function O(f,H,oe){if(H&&void 0!==H[oe])return H[oe];var V=f.options.foldOptions;return V&&void 0!==V[oe]?V[oe]:q[oe]}k.defineOption("foldOptions",null),k.defineExtension("foldOption",function(f,H){return O(this,f,H)})}(de(3867))},388:(xt,et,de)=>{!function(k){"use strict";var A=k.Pos;function _(M,W){return M.line-W.line||M.ch-W.ch}var q="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",f=new RegExp("<(/?)(["+q+"]["+q+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");function H(M,W,m,w){this.line=W,this.ch=m,this.cm=M,this.text=M.getLine(W),this.min=w?Math.max(w.from,M.firstLine()):M.firstLine(),this.max=w?Math.min(w.to-1,M.lastLine()):M.lastLine()}function oe(M,W){var m=M.cm.getTokenTypeAt(A(M.line,W));return m&&/\btag\b/.test(m)}function V(M){if(!(M.line>=M.max))return M.ch=0,M.text=M.cm.getLine(++M.line),!0}function j(M){if(!(M.line<=M.min))return M.text=M.cm.getLine(--M.line),M.ch=M.text.length,!0}function U(M){for(;;){var W=M.text.indexOf(">",M.ch);if(-1==W){if(V(M))continue;return}if(oe(M,W+1)){var m=M.text.lastIndexOf("/",W),w=m>-1&&!/\S/.test(M.text.slice(m+1,W));return M.ch=W+1,w?"selfClose":"regular"}M.ch=W+1}}function se(M){for(;;){var W=M.ch?M.text.lastIndexOf("<",M.ch-1):-1;if(-1==W){if(j(M))continue;return}if(oe(M,W+1)){f.lastIndex=W,M.ch=W;var m=f.exec(M.text);if(m&&m.index==W)return m}else M.ch=W}}function ce(M){for(;;){f.lastIndex=M.ch;var W=f.exec(M.text);if(!W){if(V(M))continue;return}if(oe(M,W.index+1))return M.ch=W.index+W[0].length,W;M.ch=W.index+1}}function Me(M){for(;;){var W=M.ch?M.text.lastIndexOf(">",M.ch-1):-1;if(-1==W){if(j(M))continue;return}if(oe(M,W+1)){var m=M.text.lastIndexOf("/",W),w=m>-1&&!/\S/.test(M.text.slice(m+1,W));return M.ch=W+1,w?"selfClose":"regular"}M.ch=W}}function re(M,W){for(var m=[];;){var D,w=ce(M),R=M.line,C=M.ch-(w?w[0].length:0);if(!w||!(D=U(M)))return;if("selfClose"!=D)if(w[1]){for(var K=m.length-1;K>=0;--K)if(m[K]==w[2]){m.length=K;break}if(K<0&&(!W||W==w[2]))return{tag:w[2],from:A(R,C),to:A(M.line,M.ch)}}else m.push(w[2])}}function ae(M,W){for(var m=[];;){var w=Me(M);if(!w)return;if("selfClose"!=w){var D=M.line,R=M.ch,C=se(M);if(!C)return;if(C[1])m.push(C[2]);else{for(var K=m.length-1;K>=0;--K)if(m[K]==C[2]){m.length=K;break}if(K<0&&(!W||W==C[2]))return{tag:C[2],from:A(M.line,M.ch),to:A(D,R)}}}else se(M)}}k.registerHelper("fold","xml",function(M,W){for(var m=new H(M,W.line,0);;){var w=ce(m);if(!w||m.line!=W.line)return;var D=U(m);if(!D)return;if(!w[1]&&"selfClose"!=D){var R=A(m.line,m.ch),C=re(m,w[2]);return C&&_(C.from,R)>0?{from:R,to:C.from}:null}}}),k.findMatchingTag=function(M,W,m){var w=new H(M,W.line,W.ch,m);if(-1!=w.text.indexOf(">")||-1!=w.text.indexOf("<")){var D=U(w),R=D&&A(w.line,w.ch),C=D&&se(w);if(D&&C&&!(_(w,W)>0)){var K={from:A(w.line,w.ch),to:R,tag:C[2]};return"selfClose"==D?{open:K,close:null,at:"open"}:C[1]?{open:ae(w,C[2]),close:K,at:"close"}:{open:K,close:re(w=new H(M,R.line,R.ch,m),C[2]),at:"open"}}}},k.findEnclosingTag=function(M,W,m,w){for(var D=new H(M,W.line,W.ch,m);;){var R=ae(D,w);if(!R)break;var K=re(new H(M,W.line,W.ch,m),R.tag);if(K)return{open:R,close:K}}},k.scanForClosingTag=function(M,W,m,w){return re(new H(M,W.line,W.ch,w?{from:0,to:w}:null),m)}}(de(3867))},3784:(xt,et,de)=>{!function(k){"use strict";k.overlayMode=function(A,_,q){return{startState:function(){return{base:k.startState(A),overlay:k.startState(_),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(O){return{base:k.copyState(A,O.base),overlay:k.copyState(_,O.overlay),basePos:O.basePos,baseCur:null,overlayPos:O.overlayPos,overlayCur:null}},token:function(O,f){return(O!=f.streamSeen||Math.min(f.basePos,f.overlayPos)<O.start)&&(f.streamSeen=O,f.basePos=f.overlayPos=O.start),O.start==f.basePos&&(f.baseCur=A.token(O,f.base),f.basePos=O.pos),O.start==f.overlayPos&&(O.pos=O.start,f.overlayCur=_.token(O,f.overlay),f.overlayPos=O.pos),O.pos=Math.min(f.basePos,f.overlayPos),null==f.overlayCur?f.baseCur:null!=f.baseCur&&f.overlay.combineTokens||q&&null==f.overlay.combineTokens?f.baseCur+" "+f.overlayCur:f.overlayCur},indent:A.indent&&function(O,f,H){return A.indent(O.base,f,H)},electricChars:A.electricChars,innerMode:function(O){return{state:O.base,mode:A}},blankLine:function(O){var f,H;return A.blankLine&&(f=A.blankLine(O.base)),_.blankLine&&(H=_.blankLine(O.overlay)),null==H?f:q&&null!=f?f+" "+H:H}}}}(de(3867))},9741:(xt,et,de)=>{!function(k){"use strict";function A(_,q){function O(H){clearTimeout(f.doRedraw),f.doRedraw=setTimeout(function(){f.redraw()},H)}this.cm=_,this.options=q,this.buttonHeight=q.scrollButtonHeight||_.getOption("scrollButtonHeight"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=_.getWrapperElement().appendChild(document.createElement("div")),this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none",this.computeScale();var f=this;_.on("refresh",this.resizeHandler=function(){clearTimeout(f.doUpdate),f.doUpdate=setTimeout(function(){f.computeScale()&&O(20)},100)}),_.on("markerAdded",this.resizeHandler),_.on("markerCleared",this.resizeHandler),!1!==q.listenForChanges&&_.on("changes",this.changeHandler=function(){O(250)})}k.defineExtension("annotateScrollbar",function(_){return"string"==typeof _&&(_={className:_}),new A(this,_)}),k.defineOption("scrollButtonHeight",0),A.prototype.computeScale=function(){var _=this.cm,q=(_.getWrapperElement().clientHeight-_.display.barHeight-2*this.buttonHeight)/_.getScrollerElement().scrollHeight;if(q!=this.hScale)return this.hScale=q,!0},A.prototype.update=function(_){this.annotations=_,this.redraw()},A.prototype.redraw=function(_){!1!==_&&this.computeScale();var q=this.cm,O=this.hScale,f=document.createDocumentFragment(),H=this.annotations,oe=q.getOption("lineWrapping"),V=oe&&1.5*q.defaultTextHeight(),j=null,U=null;function se(D,R){if(j!=D.line){j=D.line,U=q.getLineHandle(D.line);var C=q.getLineHandleVisualStart(U);C!=U&&(j=q.getLineNumber(C),U=C)}return U.widgets&&U.widgets.length||oe&&U.height>V?q.charCoords(D,"local")[R?"top":"bottom"]:q.heightAtLine(U,"local")+(R?0:U.height)}var ce=q.lastLine();if(q.display.barWidth)for(var re,Me=0;Me<H.length;Me++){var ae=H[Me];if(!(ae.to.line>ce)){for(var M=re||se(ae.from,!0)*O,W=se(ae.to,!1)*O;Me<H.length-1&&!(H[Me+1].to.line>ce||(re=se(H[Me+1].from,!0)*O,re>W+.9));)W=se((ae=H[++Me]).to,!1)*O;if(W!=M){var m=Math.max(W-M,3),w=f.appendChild(document.createElement("div"));w.style.cssText="position: absolute; right: 0px; width: "+Math.max(q.display.barWidth-1,2)+"px; top: "+(M+this.buttonHeight)+"px; height: "+m+"px",w.className=this.options.className,ae.id&&w.setAttribute("annotation-id",ae.id)}}}this.div.textContent="",this.div.appendChild(f)},A.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler),this.cm.off("markerAdded",this.resizeHandler),this.cm.off("markerCleared",this.resizeHandler),this.changeHandler&&this.cm.off("changes",this.changeHandler),this.div.parentNode.removeChild(this.div)}}(de(3867))},4731:(xt,et,de)=>{!function(k){"use strict";function q(O,f){var H=Number(f);return/^[-+]/.test(f)?O.getCursor().line+H:H-1}k.defineOption("search",{bottom:!1}),k.commands.jumpToLine=function(O){var f=O.getCursor();!function A(O,f,H,oe,V){O.openDialog?O.openDialog(f,V,{value:oe,selectValueOnOpen:!0,bottom:O.options.search.bottom}):V(prompt(H,oe))}(O,function _(O){return O.phrase("Jump to line:")+' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+O.phrase("(Use line:column or scroll% syntax)")+"</span>"}(O),O.phrase("Jump to line:"),f.line+1+":"+f.ch,function(H){var oe;if(H)if(oe=/^\s*([\+\-]?\d+)\s*\:\s*(\d+)\s*$/.exec(H))O.setCursor(q(O,oe[1]),Number(oe[2]));else if(oe=/^\s*([\+\-]?\d+(\.\d+)?)\%\s*/.exec(H)){var V=Math.round(O.lineCount()*Number(oe[1])/100);/^[-+]/.test(oe[1])&&(V=f.line+V+1),O.setCursor(V-1,f.ch)}else(oe=/^\s*\:?\s*([\+\-]?\d+)\s*/.exec(H))&&O.setCursor(q(O,oe[1]),f.ch)})},k.keyMap.default["Alt-G"]="jumpToLine"}(de(3867),de(6246))},5396:(xt,et,de)=>{!function(k){"use strict";function A(O,f,H,oe){this.cm=O,this.options=oe;var V={listenForChanges:!1};for(var j in oe)V[j]=oe[j];V.className||(V.className="CodeMirror-search-match"),this.annotation=O.annotateScrollbar(V),this.query=f,this.caseFold=H,this.gap={from:O.firstLine(),to:O.lastLine()+1},this.matches=[],this.update=null,this.findMatches(),this.annotation.update(this.matches);var U=this;O.on("change",this.changeHandler=function(se,ce){U.onChange(ce)})}k.defineExtension("showMatchesOnScrollbar",function(O,f,H){return"string"==typeof H&&(H={className:H}),H||(H={}),new A(this,O,f,H)});function q(O,f,H){return O<=f?O:Math.max(f,O+H)}A.prototype.findMatches=function(){if(this.gap){for(var O=0;O<this.matches.length&&!((f=this.matches[O]).from.line>=this.gap.to);O++)f.to.line>=this.gap.from&&this.matches.splice(O--,1);for(var H=this.cm.getSearchCursor(this.query,k.Pos(this.gap.from,0),{caseFold:this.caseFold,multiline:this.options.multiline}),oe=this.options&&this.options.maxMatches||1e3;H.findNext();){var f;if((f={from:H.from(),to:H.to()}).from.line>=this.gap.to||(this.matches.splice(O++,0,f),this.matches.length>oe))break}this.gap=null}},A.prototype.onChange=function(O){var f=O.from.line,H=k.changeEnd(O).line,oe=H-O.to.line;if(this.gap?(this.gap.from=Math.min(q(this.gap.from,f,oe),O.from.line),this.gap.to=Math.max(q(this.gap.to,f,oe),O.from.line)):this.gap={from:O.from.line,to:H+1},oe)for(var V=0;V<this.matches.length;V++){var j=this.matches[V],U=q(j.from.line,f,oe);U!=j.from.line&&(j.from=k.Pos(U,j.from.ch));var se=q(j.to.line,f,oe);se!=j.to.line&&(j.to=k.Pos(se,j.to.ch))}clearTimeout(this.update);var ce=this;this.update=setTimeout(function(){ce.updateAfterChange()},250)},A.prototype.updateAfterChange=function(){this.findMatches(),this.annotation.update(this.matches)},A.prototype.clear=function(){this.cm.off("change",this.changeHandler),this.annotation.clear()}}(de(3867),de(5626),de(9741))},9347:(xt,et,de)=>{!function(k){"use strict";function _(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function q(C){return C.state.search||(C.state.search=new _)}function O(C){return"string"==typeof C&&C==C.toLowerCase()}function f(C,K,ne){return C.getSearchCursor(K,ne,{caseFold:O(K),multiline:!0})}function oe(C,K,ne,G,te){C.openDialog?C.openDialog(K,te,{value:G,selectValueOnOpen:!0,bottom:C.options.search.bottom}):te(prompt(ne,G))}function j(C){return C.replace(/\\([nrt\\])/g,function(K,ne){return"n"==ne?"\n":"r"==ne?"\r":"t"==ne?"\t":"\\"==ne?"\\":K})}function U(C){var K=C.match(/^\/(.*)\/([a-z]*)$/);if(K)try{C=new RegExp(K[1],-1==K[2].indexOf("i")?"":"i")}catch{}else C=j(C);return("string"==typeof C?""==C:C.test(""))&&(C=/x^/),C}function se(C,K,ne){K.queryText=ne,K.query=U(ne),C.removeOverlay(K.overlay,O(K.query)),K.overlay=function A(C,K){return"string"==typeof C?C=new RegExp(C.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),K?"gi":"g"):C.global||(C=new RegExp(C.source,C.ignoreCase?"gi":"g")),{token:function(ne){C.lastIndex=ne.pos;var G=C.exec(ne.string);if(G&&G.index==ne.pos)return ne.pos+=G[0].length||1,"searching";G?ne.pos=G.index:ne.skipToEnd()}}}(K.query,O(K.query)),C.addOverlay(K.overlay),C.showMatchesOnScrollbar&&(K.annotate&&(K.annotate.clear(),K.annotate=null),K.annotate=C.showMatchesOnScrollbar(K.query,O(K.query)))}function ce(C,K,ne,G){var te=q(C);if(te.query)return Me(C,K);var Q=C.getSelection()||te.lastQuery;if(Q instanceof RegExp&&"x^"==Q.source&&(Q=null),ne&&C.openDialog){var ge=null,x=function(ue,fe){k.e_stop(fe),ue&&(ue!=te.queryText&&(se(C,te,ue),te.posFrom=te.posTo=C.getCursor()),ge&&(ge.style.opacity=1),Me(C,fe.shiftKey,function(Ae,He){var _e;He.line<3&&document.querySelector&&(_e=C.display.wrapper.querySelector(".CodeMirror-dialog"))&&_e.getBoundingClientRect().bottom-4>C.cursorCoords(He,"window").top&&((ge=_e).style.opacity=.4)}))};(function H(C,K,ne,G,te){C.openDialog(K,G,{value:ne,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){re(C)},onKeyDown:te,bottom:C.options.search.bottom})})(C,M(C),Q,x,function(ue,fe){var Ae=k.keyName(ue),He=C.getOption("extraKeys"),_e=He&&He[Ae]||k.keyMap[C.getOption("keyMap")][Ae];"findNext"==_e||"findPrev"==_e||"findPersistentNext"==_e||"findPersistentPrev"==_e?(k.e_stop(ue),se(C,q(C),fe),C.execCommand(_e)):("find"==_e||"findPersistent"==_e)&&(k.e_stop(ue),x(fe,ue))}),G&&Q&&(se(C,te,Q),Me(C,K))}else oe(C,M(C),"Search for:",Q,function(ue){ue&&!te.query&&C.operation(function(){se(C,te,ue),te.posFrom=te.posTo=C.getCursor(),Me(C,K)})})}function Me(C,K,ne){C.operation(function(){var G=q(C),te=f(C,G.query,K?G.posFrom:G.posTo);!te.find(K)&&!(te=f(C,G.query,K?k.Pos(C.lastLine()):k.Pos(C.firstLine(),0))).find(K)||(C.setSelection(te.from(),te.to()),C.scrollIntoView({from:te.from(),to:te.to()},20),G.posFrom=te.from(),G.posTo=te.to(),ne&&ne(te.from(),te.to()))})}function re(C){C.operation(function(){var K=q(C);K.lastQuery=K.query,K.query&&(K.query=K.queryText=null,C.removeOverlay(K.overlay),K.annotate&&(K.annotate.clear(),K.annotate=null))})}function ae(C,K){var ne=C?document.createElement(C):document.createDocumentFragment();for(var G in K)ne[G]=K[G];for(var te=2;te<arguments.length;te++){var Q=arguments[te];ne.appendChild("string"==typeof Q?document.createTextNode(Q):Q)}return ne}function M(C){return ae("",null,ae("span",{className:"CodeMirror-search-label"},C.phrase("Search:"))," ",ae("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"})," ",ae("span",{style:"color: #888",className:"CodeMirror-search-hint"},C.phrase("(Use /re/ syntax for regexp search)")))}function D(C,K,ne){C.operation(function(){for(var G=f(C,K);G.findNext();)if("string"!=typeof K){var te=C.getRange(G.from(),G.to()).match(K);G.replace(ne.replace(/\$(\d)/g,function(Q,ge){return te[ge]}))}else G.replace(ne)})}function R(C,K){if(!C.getOption("readOnly")){var ne=C.getSelection()||q(C).lastQuery,G=C.phrase(K?"Replace all:":"Replace:"),te=ae("",null,ae("span",{className:"CodeMirror-search-label"},G),function W(C){return ae("",null," ",ae("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"})," ",ae("span",{style:"color: #888",className:"CodeMirror-search-hint"},C.phrase("(Use /re/ syntax for regexp search)")))}(C));oe(C,te,G,ne,function(Q){Q&&(Q=U(Q),oe(C,function m(C){return ae("",null,ae("span",{className:"CodeMirror-search-label"},C.phrase("With:"))," ",ae("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"}))}(C),C.phrase("Replace with:"),"",function(ge){if(ge=j(ge),K)D(C,Q,ge);else{re(C);var x=f(C,Q,C.getCursor("from")),ue=function(){var He,Ae=x.from();!(He=x.findNext())&&(x=f(C,Q),!(He=x.findNext())||Ae&&x.from().line==Ae.line&&x.from().ch==Ae.ch)||(C.setSelection(x.from(),x.to()),C.scrollIntoView({from:x.from(),to:x.to()}),function V(C,K,ne,G){C.openConfirm?C.openConfirm(K,G):confirm(ne)&&G[0]()}(C,function w(C){return ae("",null,ae("span",{className:"CodeMirror-search-label"},C.phrase("Replace?"))," ",ae("button",{},C.phrase("Yes"))," ",ae("button",{},C.phrase("No"))," ",ae("button",{},C.phrase("All"))," ",ae("button",{},C.phrase("Stop")))}(C),C.phrase("Replace?"),[function(){fe(He)},ue,function(){D(C,Q,ge)}]))},fe=function(Ae){x.replace("string"==typeof Q?ge:ge.replace(/\$(\d)/g,function(He,_e){return Ae[_e]})),ue()};ue()}}))})}}k.defineOption("search",{bottom:!1}),k.commands.find=function(C){re(C),ce(C)},k.commands.findPersistent=function(C){re(C),ce(C,!1,!0)},k.commands.findPersistentNext=function(C){ce(C,!1,!0,!0)},k.commands.findPersistentPrev=function(C){ce(C,!0,!0,!0)},k.commands.findNext=ce,k.commands.findPrev=function(C){ce(C,!0)},k.commands.clearSearch=re,k.commands.replace=R,k.commands.replaceAll=function(C){R(C,!0)}}(de(3867),de(5626),de(6246))},5626:(xt,et,de)=>{!function(k){"use strict";var U,se,A=k.Pos;function q(M,W){for(var m=function _(M){return M.flags??(M.ignoreCase?"i":"")+(M.global?"g":"")+(M.multiline?"m":"")}(M),w=m,D=0;D<W.length;D++)-1==w.indexOf(W.charAt(D))&&(w+=W.charAt(D));return m==w?M:new RegExp(M.source,w)}function O(M){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(M.source)}function f(M,W,m){W=q(W,"g");for(var w=m.line,D=m.ch,R=M.lastLine();w<=R;w++,D=0){W.lastIndex=D;var C=M.getLine(w),K=W.exec(C);if(K)return{from:A(w,K.index),to:A(w,K.index+K[0].length),match:K}}}function H(M,W,m){if(!O(W))return f(M,W,m);W=q(W,"gm");for(var w,D=1,R=m.line,C=M.lastLine();R<=C;){for(var K=0;K<D&&!(R>C);K++){var ne=M.getLine(R++);w=null==w?ne:w+"\n"+ne}D*=2,W.lastIndex=m.ch;var G=W.exec(w);if(G){var te=w.slice(0,G.index).split("\n"),Q=G[0].split("\n"),ge=m.line+te.length-1,x=te[te.length-1].length;return{from:A(ge,x),to:A(ge+Q.length-1,1==Q.length?x+Q[0].length:Q[Q.length-1].length),match:G}}}}function oe(M,W,m){for(var w,D=0;D<=M.length;){W.lastIndex=D;var R=W.exec(M);if(!R)break;var C=R.index+R[0].length;if(C>M.length-m)break;(!w||C>w.index+w[0].length)&&(w=R),D=R.index+1}return w}function V(M,W,m){W=q(W,"g");for(var w=m.line,D=m.ch,R=M.firstLine();w>=R;w--,D=-1){var C=M.getLine(w),K=oe(C,W,D<0?0:C.length-D);if(K)return{from:A(w,K.index),to:A(w,K.index+K[0].length),match:K}}}function j(M,W,m){if(!O(W))return V(M,W,m);W=q(W,"gm");for(var w,D=1,R=M.getLine(m.line).length-m.ch,C=m.line,K=M.firstLine();C>=K;){for(var ne=0;ne<D&&C>=K;ne++){var G=M.getLine(C--);w=null==w?G:G+"\n"+w}D*=2;var te=oe(w,W,R);if(te){var Q=w.slice(0,te.index).split("\n"),ge=te[0].split("\n"),x=C+Q.length,ue=Q[Q.length-1].length;return{from:A(x,ue),to:A(x+ge.length-1,1==ge.length?ue+ge[0].length:ge[ge.length-1].length),match:te}}}}function ce(M,W,m,w){if(M.length==W.length)return m;for(var D=0,R=m+Math.max(0,M.length-W.length);;){if(D==R)return D;var C=D+R>>1,K=w(M.slice(0,C)).length;if(K==m)return C;K>m?R=C:D=C+1}}function Me(M,W,m,w){if(!W.length)return null;var D=w?U:se,R=D(W).split(/\r|\n\r?/);e:for(var C=m.line,K=m.ch,ne=M.lastLine()+1-R.length;C<=ne;C++,K=0){var G=M.getLine(C).slice(K),te=D(G);if(1==R.length){var Q=te.indexOf(R[0]);if(-1==Q)continue e;return m=ce(G,te,Q,D)+K,{from:A(C,ce(G,te,Q,D)+K),to:A(C,ce(G,te,Q+R[0].length,D)+K)}}var ge=te.length-R[0].length;if(te.slice(ge)==R[0]){for(var x=1;x<R.length-1;x++)if(D(M.getLine(C+x))!=R[x])continue e;var ue=M.getLine(C+R.length-1),fe=D(ue),Ae=R[R.length-1];if(fe.slice(0,Ae.length)==Ae)return{from:A(C,ce(G,te,ge,D)+K),to:A(C+R.length-1,ce(ue,fe,Ae.length,D))}}}}function re(M,W,m,w){if(!W.length)return null;var D=w?U:se,R=D(W).split(/\r|\n\r?/);e:for(var C=m.line,K=m.ch,ne=M.firstLine()-1+R.length;C>=ne;C--,K=-1){var G=M.getLine(C);K>-1&&(G=G.slice(0,K));var te=D(G);if(1==R.length){var Q=te.lastIndexOf(R[0]);if(-1==Q)continue e;return{from:A(C,ce(G,te,Q,D)),to:A(C,ce(G,te,Q+R[0].length,D))}}var ge=R[R.length-1];if(te.slice(0,ge.length)==ge){var x=1;for(m=C-R.length+1;x<R.length-1;x++)if(D(M.getLine(m+x))!=R[x])continue e;var ue=M.getLine(C+1-R.length),fe=D(ue);if(fe.slice(fe.length-R[0].length)==R[0])return{from:A(C+1-R.length,ce(ue,fe,ue.length-R[0].length,D)),to:A(C,ce(G,te,ge.length,D))}}}}function ae(M,W,m,w){var D;this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=M,m=m?M.clipPos(m):A(0,0),this.pos={from:m,to:m},"object"==typeof w?D=w.caseFold:(D=w,w=null),"string"==typeof W?(null==D&&(D=!1),this.matches=function(R,C){return(R?re:Me)(M,W,C,D)}):(W=q(W,"gm"),this.matches=w&&!1===w.multiline?function(R,C){return(R?V:f)(M,W,C)}:function(R,C){return(R?j:H)(M,W,C)})}String.prototype.normalize?(U=function(M){return M.normalize("NFD").toLowerCase()},se=function(M){return M.normalize("NFD")}):(U=function(M){return M.toLowerCase()},se=function(M){return M}),ae.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(M){var W=this.doc.clipPos(M?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(W=A(W.line,W.ch),M?(W.ch--,W.ch<0&&(W.line--,W.ch=(this.doc.getLine(W.line)||"").length)):(W.ch++,W.ch>(this.doc.getLine(W.line)||"").length&&(W.ch=0,W.line++)),0!=k.cmpPos(W,this.doc.clipPos(W))))return this.atOccurrence=!1;var m=this.matches(M,W);if(this.afterEmptyMatch=m&&0==k.cmpPos(m.from,m.to),m)return this.pos=m,this.atOccurrence=!0,this.pos.match||!0;var w=A(M?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:w,to:w},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(M,W){if(this.atOccurrence){var m=k.splitLines(M);this.doc.replaceRange(m,this.pos.from,this.pos.to,W),this.pos.to=A(this.pos.from.line+m.length-1,m[m.length-1].length+(1==m.length?this.pos.from.ch:0))}}},k.defineExtension("getSearchCursor",function(M,W,m){return new ae(this.doc,M,W,m)}),k.defineDocExtension("getSearchCursor",function(M,W,m){return new ae(this,M,W,m)}),k.defineExtension("selectMatches",function(M,W){for(var m=[],w=this.getSearchCursor(M,this.getCursor("from"),W);w.findNext()&&!(k.cmpPos(w.to(),this.getCursor("to"))>0);)m.push({anchor:w.from(),head:w.to()});m.length&&this.setSelections(m,0)})}(de(3867))},3886:(xt,et,de)=>{!function(k){"use strict";var A=k.commands,_=k.Pos;function q(P,J){return P.line==J.line&&P.ch==J.ch}var O=[];function f(P){O.push(P),O.length>50&&O.shift()}function oe(P){return O[O.length-(P?Math.min(P,1):1)]||""}var j=null;function U(P,J,ie,$,Ee){null==Ee&&(Ee=P.getRange(J,ie)),"grow"==$&&j&&j.cm==P&&q(J,j.pos)&&P.isClean(j.gen)?function H(P){if(!O.length)return f(P);O[O.length-1]+=P}(Ee):!1!==$&&f(Ee),P.replaceRange("",J,ie,"+delete"),j="grow"==$?{cm:P,pos:J,gen:P.changeGeneration()}:null}function se(P,J,ie){return P.findPosH(J,ie,"char",!0)}function ce(P,J,ie){return P.findPosH(J,ie,"word",!0)}function Me(P,J,ie){return P.findPosV(J,ie,"line",P.doc.sel.goalColumn)}function re(P,J,ie){return P.findPosV(J,ie,"page",P.doc.sel.goalColumn)}function ae(P,J,ie){for(var $=J.line,Ee=P.getLine($),Ve=/\S/.test(ie<0?Ee.slice(0,J.ch):Ee.slice(J.ch)),Pe=P.firstLine(),Ue=P.lastLine();;){if(($+=ie)<Pe||$>Ue)return P.clipPos(_($-ie,ie<0?0:null));if(Ee=P.getLine($),/\S/.test(Ee))Ve=!0;else if(Ve)return _($,0)}}function M(P,J,ie){for(var $=J.line,Ee=J.ch,Ve=P.getLine(J.line),Pe=!1;;){var Ue=Ve.charAt(Ee+(ie<0?-1:0));if(Ue){if(Pe&&/[!?.]/.test(Ue))return _($,Ee+(ie>0?1:0));Pe||(Pe=/\w/.test(Ue)),Ee+=ie}else{if($==(ie<0?P.firstLine():P.lastLine())||(Ve=P.getLine($+ie),!/\S/.test(Ve)))return _($,Ee);$+=ie,Ee=ie<0?Ve.length:0}}}function W(P,J,ie){var $;if(P.findMatchingBracket&&($=P.findMatchingBracket(J,{strict:!0}))&&$.match&&($.forward?1:-1)==ie)return ie>0?_($.to.line,$.to.ch+1):$.to;for(var Ee=!0;;Ee=!1){var Ve=P.getTokenAt(J),Pe=_(J.line,ie<0?Ve.start:Ve.end);if(!(Ee&&ie>0&&Ve.end==J.ch)&&/\w/.test(Ve.string))return Pe;var Ue=P.findPosH(Pe,ie,"char");if(q(Pe,Ue))return J;J=Ue}}function m(P,J){var ie=P.state.emacsPrefix;return ie?(Q(P),"-"==ie?-1:Number(ie)):J?null:1}function w(P){var J="string"==typeof P?function(ie){ie.execCommand(P)}:P;return function(ie){var $=m(ie);J(ie);for(var Ee=1;Ee<$;++Ee)J(ie)}}function D(P,J,ie,$){var Ee=m(P);Ee<0&&($=-$,Ee=-Ee);for(var Ve=0;Ve<Ee;++Ve){var Pe=ie(P,J,$);if(q(Pe,J))break;J=Pe}return J}function R(P,J){var ie=function($){$.extendSelection(D($,$.getCursor(),P,J))};return ie.motion=!0,ie}function C(P,J,ie,$){for(var Ve,Ee=P.listSelections(),Pe=Ee.length;Pe--;)U(P,Ve=Ee[Pe].head,D(P,Ve,J,ie),$)}function K(P,J){if(P.somethingSelected()){for(var $,ie=P.listSelections(),Ee=ie.length;Ee--;)U(P,($=ie[Ee]).anchor,$.head,J);return!0}}function ne(P,J){P.state.emacsPrefix?"-"!=J&&(P.state.emacsPrefix+=J):(P.state.emacsPrefix=J,P.on("keyHandled",te),P.on("inputRead",ge))}var G={"Alt-G":!0,"Ctrl-X":!0,"Ctrl-Q":!0,"Ctrl-U":!0};function te(P,J){!P.state.emacsPrefixMap&&!G.hasOwnProperty(J)&&Q(P)}function Q(P){P.state.emacsPrefix=null,P.off("keyHandled",te),P.off("inputRead",ge)}function ge(P,J){var ie=m(P);if(ie>1&&"+input"==J.origin){for(var $=J.text.join("\n"),Ee="",Ve=1;Ve<ie;++Ve)Ee+=$;P.replaceSelection(Ee)}}function x(P,J){"string"==typeof J&&(/^\d$/.test(J)||"Ctrl-U"==J)||(P.removeKeyMap(N),P.state.emacsPrefixMap=!1,P.off("keyHandled",x),P.off("inputRead",x))}function ue(P){P.setExtending(!1),P.setCursor(P.getCursor())}function Ae(P,J,ie){P.openDialog?P.openDialog(function fe(P){var J=document.createDocumentFragment(),ie=document.createElement("input");return ie.setAttribute("type","text"),ie.style.width="10em",J.appendChild(document.createTextNode(P+": ")),J.appendChild(ie),J}(J),ie,{bottom:!0}):ie(prompt(J,""))}function He(P,J){var ie=P.getCursor(),$=P.findPosH(ie,1,"word");P.replaceRange(J(P.getRange(ie,$)),ie,$),P.setCursor($)}A.setMark=function(P){P.setCursor(P.getCursor()),P.setExtending(!P.getExtending()),P.on("change",function(){P.setExtending(!1)})},A.killRegion=function(P){U(P,P.getCursor("start"),P.getCursor("end"),!0)},A.killLineEmacs=w(function(P){var J=P.getCursor(),ie=P.clipPos(_(J.line)),$=P.getRange(J,ie);/\S/.test($)||($+="\n",ie=_(J.line+1,0)),U(P,J,ie,"grow",$)}),A.killRingSave=function(P){f(P.getSelection()),ue(P)},A.yank=function(P){var J=P.getCursor();P.replaceRange(oe(m(P)),J,J,"paste"),P.setSelection(J,P.getCursor())},A.yankPop=function(P){P.replaceSelection(function V(){return O.length>1&&O.pop(),oe()}(),"around","paste")},A.forwardChar=R(se,1),A.backwardChar=R(se,-1),A.deleteChar=function(P){C(P,se,1,!1)},A.deleteForwardChar=function(P){K(P,!1)||C(P,se,1,!1)},A.deleteBackwardChar=function(P){K(P,!1)||C(P,se,-1,!1)},A.forwardWord=R(ce,1),A.backwardWord=R(ce,-1),A.killWord=function(P){C(P,ce,1,"grow")},A.backwardKillWord=function(P){C(P,ce,-1,"grow")},A.nextLine=R(Me,1),A.previousLine=R(Me,-1),A.scrollDownCommand=R(re,-1),A.scrollUpCommand=R(re,1),A.backwardParagraph=R(ae,-1),A.forwardParagraph=R(ae,1),A.backwardSentence=R(M,-1),A.forwardSentence=R(M,1),A.killSentence=function(P){C(P,M,1,"grow")},A.backwardKillSentence=function(P){U(P,P.getCursor(),M(P,P.getCursor(),1),"grow")},A.killSexp=function(P){C(P,W,1,"grow")},A.backwardKillSexp=function(P){C(P,W,-1,"grow")},A.forwardSexp=R(W,1),A.backwardSexp=R(W,-1),A.markSexp=function(P){var J=P.getCursor();P.setSelection(D(P,J,W,1),J)},A.transposeSexps=function(P){var J=W(P,P.getCursor(),-1),ie=W(P,J,1),$=W(P,ie,1),Ee=W(P,$,-1);P.replaceRange(P.getRange(Ee,$)+P.getRange(ie,Ee)+P.getRange(J,ie),J,$)},A.backwardUpList=w(function _e(P){for(var J=P.getCursor(),ie=J.line,$=J.ch,Ee=[];ie>=P.firstLine();){for(var Ve=P.getLine(ie),Pe=$??Ve.length;Pe>0;)if(")"==($=Ve.charAt(--Pe)))Ee.push("(");else if("]"==$)Ee.push("[");else if("}"==$)Ee.push("{");else if(/[\(\{\[]/.test($)&&(!Ee.length||Ee.pop()!=$))return P.extendSelection(_(ie,Pe));--ie,$=null}}),A.justOneSpace=function(P){for(var J=P.getCursor(),ie=J.ch,$=J.ch,Ee=P.getLine(J.line);ie&&/\s/.test(Ee.charAt(ie-1));)--ie;for(;$<Ee.length&&/\s/.test(Ee.charAt($));)++$;P.replaceRange(" ",_(J.line,ie),_(J.line,$))},A.openLine=w(function(P){P.replaceSelection("\n","start")}),A.transposeCharsRepeatable=w(function(P){P.execCommand("transposeChars")}),A.capitalizeWord=w(function(P){He(P,function(J){var ie=J.search(/\w/);return-1==ie?J:J.slice(0,ie)+J.charAt(ie).toUpperCase()+J.slice(ie+1).toLowerCase()})}),A.upcaseWord=w(function(P){He(P,function(J){return J.toUpperCase()})}),A.downcaseWord=w(function(P){He(P,function(J){return J.toLowerCase()})}),A.undoRepeatable=w("undo"),A.keyboardQuit=function(P){P.execCommand("clearSearch"),ue(P)},A.newline=w(function(P){P.replaceSelection("\n","end")}),A.gotoLine=function(P){var J=m(P,!0);if(null!=J&&J>0)return P.setCursor(J-1);Ae(P,"Goto line",function(ie){var $;ie&&!isNaN($=Number(ie))&&$==(0|$)&&$>0&&P.setCursor($-1)})},A.indentRigidly=function(P){P.indentSelection(m(P,!0)||P.getOption("indentUnit"))},A.exchangePointAndMark=function(P){P.setSelection(P.getCursor("head"),P.getCursor("anchor"))},A.quotedInsertTab=w("insertTab"),A.universalArgument=function(J){J.state.emacsPrefixMap=!0,J.addKeyMap(N),J.on("keyHandled",x),J.on("inputRead",x)},k.emacs={kill:U,killRegion:K,repeated:w};var Ge=k.keyMap.emacs=k.normalizeKeyMap({"Ctrl-W":"killRegion","Ctrl-K":"killLineEmacs","Alt-W":"killRingSave","Ctrl-Y":"yank","Alt-Y":"yankPop","Ctrl-Space":"setMark","Ctrl-Shift-2":"setMark","Ctrl-F":"forwardChar","Ctrl-B":"backwardChar",Right:"forwardChar",Left:"backwardChar","Ctrl-D":"deleteChar",Delete:"deleteForwardChar","Ctrl-H":"deleteBackwardChar",Backspace:"deleteBackwardChar","Alt-F":"forwardWord","Alt-B":"backwardWord","Alt-Right":"forwardWord","Alt-Left":"backwardWord","Alt-D":"killWord","Alt-Backspace":"backwardKillWord","Ctrl-N":"nextLine","Ctrl-P":"previousLine",Down:"nextLine",Up:"previousLine","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd",End:"goLineEnd",Home:"goLineStart","Alt-V":"scrollDownCommand","Ctrl-V":"scrollUpCommand",PageUp:"scrollDownCommand",PageDown:"scrollUpCommand","Ctrl-Up":"backwardParagraph","Ctrl-Down":"forwardParagraph","Alt-{":"backwardParagraph","Alt-}":"forwardParagraph","Alt-A":"backwardSentence","Alt-E":"forwardSentence","Alt-K":"killSentence","Ctrl-X Delete":"backwardKillSentence","Ctrl-Alt-K":"killSexp","Ctrl-Alt-Backspace":"backwardKillSexp","Ctrl-Alt-F":"forwardSexp","Ctrl-Alt-B":"backwardSexp","Shift-Ctrl-Alt-2":"markSexp","Ctrl-Alt-T":"transposeSexps","Ctrl-Alt-U":"backwardUpList","Alt-Space":"justOneSpace","Ctrl-O":"openLine","Ctrl-T":"transposeCharsRepeatable","Alt-C":"capitalizeWord","Alt-U":"upcaseWord","Alt-L":"downcaseWord","Alt-;":"toggleComment","Ctrl-/":"undoRepeatable","Shift-Ctrl--":"undoRepeatable","Ctrl-Z":"undoRepeatable","Cmd-Z":"undoRepeatable","Ctrl-X U":"undoRepeatable","Shift-Ctrl-Z":"redo","Shift-Alt-,":"goDocStart","Shift-Alt-.":"goDocEnd","Ctrl-S":"findPersistentNext","Ctrl-R":"findPersistentPrev","Ctrl-G":"keyboardQuit","Shift-Alt-5":"replace","Alt-/":"autocomplete",Enter:"newlineAndIndent","Ctrl-J":"newline",Tab:"indentAuto","Alt-G G":"gotoLine","Ctrl-X Tab":"indentRigidly","Ctrl-X Ctrl-X":"exchangePointAndMark","Ctrl-X Ctrl-S":"save","Ctrl-X Ctrl-W":"save","Ctrl-X S":"saveAll","Ctrl-X F":"open","Ctrl-X K":"close","Ctrl-X H":"selectAll","Ctrl-Q Tab":"quotedInsertTab","Ctrl-U":"universalArgument",fallthrough:"default"}),N={"Ctrl-G":Q};function b(P){N[P]=function(J){ne(J,P)},Ge["Ctrl-"+P]=function(J){ne(J,P)},G["Ctrl-"+P]=!0}for(var Te=0;Te<10;++Te)b(String(Te));b("-")}(de(3867))},6670:(xt,et,de)=>{!function(k){"use strict";var A=k.commands,_=k.Pos;function O(m,w){m.extendSelectionsBy(function(D){return m.display.shift||m.doc.extend||D.empty()?function q(m,w,D){if(D<0&&0==w.ch)return m.clipPos(_(w.line-1));var R=m.getLine(w.line);if(D>0&&w.ch>=R.length)return m.clipPos(_(w.line+1,0));for(var K,C="start",ne=w.ch,G=ne,te=D<0?0:R.length,Q=0;G!=te;G+=D,Q++){var ge=R.charAt(D<0?G-1:G),x="_"!=ge&&k.isWordChar(ge)?"w":"o";if("w"==x&&ge.toUpperCase()==ge&&(x="W"),"start"==C)"o"!=x?(C="in",K=x):ne=G+D;else if("in"==C&&K!=x){if("w"==K&&"W"==x&&D<0&&G--,"W"==K&&"w"==x&&D>0){if(G==ne+1){K="w";continue}G--}break}}return _(w.line,G)}(m.doc,D.head,w):w<0?D.from():D.to()})}function f(m,w){if(m.isReadOnly())return k.Pass;m.operation(function(){for(var D=m.listSelections().length,R=[],C=-1,K=0;K<D;K++){var ne=m.listSelections()[K].head;if(!(ne.line<=C)){var G=_(ne.line+(w?0:1),0);m.replaceRange("\n",G,null,"+insertLine"),m.indentLine(G.line,null,!0),R.push({head:G,anchor:G}),C=ne.line+1}}m.setSelections(R)}),m.execCommand("indentAuto")}function H(m,w){for(var D=w.ch,R=D,C=m.getLine(w.line);D&&k.isWordChar(C.charAt(D-1));)--D;for(;R<C.length&&k.isWordChar(C.charAt(R));)++R;return{from:_(w.line,D),to:_(w.line,R),word:C.slice(D,R)}}function oe(m,w){for(var D=m.listSelections(),R=[],C=0;C<D.length;C++){var K=D[C],ne=m.findPosV(K.anchor,w,"line",K.anchor.goalColumn),G=m.findPosV(K.head,w,"line",K.head.goalColumn);ne.goalColumn=null!=K.anchor.goalColumn?K.anchor.goalColumn:m.cursorCoords(K.anchor,"div").left,G.goalColumn=null!=K.head.goalColumn?K.head.goalColumn:m.cursorCoords(K.head,"div").left;var te={anchor:ne,head:G};R.push(K),R.push(te)}m.setSelections(R)}A.goSubwordLeft=function(m){O(m,-1)},A.goSubwordRight=function(m){O(m,1)},A.scrollLineUp=function(m){var w=m.getScrollInfo();if(!m.somethingSelected()){var D=m.lineAtHeight(w.top+w.clientHeight,"local");m.getCursor().line>=D&&m.execCommand("goLineUp")}m.scrollTo(null,w.top-m.defaultTextHeight())},A.scrollLineDown=function(m){var w=m.getScrollInfo();if(!m.somethingSelected()){var D=m.lineAtHeight(w.top,"local")+1;m.getCursor().line<=D&&m.execCommand("goLineDown")}m.scrollTo(null,w.top+m.defaultTextHeight())},A.splitSelectionByLine=function(m){for(var w=m.listSelections(),D=[],R=0;R<w.length;R++)for(var C=w[R].from(),K=w[R].to(),ne=C.line;ne<=K.line;++ne)K.line>C.line&&ne==K.line&&0==K.ch||D.push({anchor:ne==C.line?C:_(ne,0),head:ne==K.line?K:_(ne)});m.setSelections(D,0)},A.singleSelectionTop=function(m){var w=m.listSelections()[0];m.setSelection(w.anchor,w.head,{scroll:!1})},A.selectLine=function(m){for(var w=m.listSelections(),D=[],R=0;R<w.length;R++){var C=w[R];D.push({anchor:_(C.from().line,0),head:_(C.to().line+1,0)})}m.setSelections(D)},A.insertLineAfter=function(m){return f(m,!1)},A.insertLineBefore=function(m){return f(m,!0)},A.selectNextOccurrence=function(m){var w=m.getCursor("from"),D=m.getCursor("to"),R=m.state.sublimeFindFullWord==m.doc.sel;if(0==k.cmpPos(w,D)){var C=H(m,w);if(!C.word)return;m.setSelection(C.from,C.to),R=!0}else{var K=m.getRange(w,D),ne=R?new RegExp("\\b"+K+"\\b"):K,G=m.getSearchCursor(ne,D),te=G.findNext();if(te||(te=(G=m.getSearchCursor(ne,_(m.firstLine(),0))).findNext()),!te||function V(m,w,D){for(var R=0;R<m.length;R++)if(0==k.cmpPos(m[R].from(),w)&&0==k.cmpPos(m[R].to(),D))return!0;return!1}(m.listSelections(),G.from(),G.to()))return;m.addSelection(G.from(),G.to())}R&&(m.state.sublimeFindFullWord=m.doc.sel)},A.skipAndSelectNextOccurrence=function(m){var w=m.getCursor("anchor"),D=m.getCursor("head");A.selectNextOccurrence(m),0!=k.cmpPos(w,D)&&m.doc.setSelections(m.doc.listSelections().filter(function(R){return R.anchor!=w||R.head!=D}))},A.addCursorToPrevLine=function(m){oe(m,-1)},A.addCursorToNextLine=function(m){oe(m,1)};var j="(){}[]";function U(m){for(var w=m.listSelections(),D=[],R=0;R<w.length;R++){var C=w[R],K=C.head,ne=m.scanForBracket(K,-1);if(!ne)return!1;for(;;){var G=m.scanForBracket(K,1);if(!G)return!1;if(G.ch==j.charAt(j.indexOf(ne.ch)+1)){var te=_(ne.pos.line,ne.pos.ch+1);if(0!=k.cmpPos(te,C.from())||0!=k.cmpPos(G.pos,C.to())){D.push({anchor:te,head:G.pos});break}if(!(ne=m.scanForBracket(ne.pos,-1)))return!1}K=_(G.pos.line,G.pos.ch+1)}}return m.setSelections(D),!0}function se(m){return m?/\bpunctuation\b/.test(m)?m:void 0:null}function ce(m,w,D){if(m.isReadOnly())return k.Pass;for(var K,R=m.listSelections(),C=[],ne=0;ne<R.length;ne++){var G=R[ne];if(!G.empty()){for(var te=G.from().line,Q=G.to().line;ne<R.length-1&&R[ne+1].from().line==Q;)Q=R[++ne].to().line;R[ne].to().ch||Q--,C.push(te,Q)}}C.length?K=!0:C.push(m.firstLine(),m.lastLine()),m.operation(function(){for(var ge=[],x=0;x<C.length;x+=2){var fe=C[x+1],Ae=_(C[x],0),He=_(fe),_e=m.getRange(Ae,He,!1);_e.sort(w?function(Ge,N){return Ge<N?-D:Ge==N?0:D}:function(Ge,N){var b=Ge.toUpperCase(),Te=N.toUpperCase();return b!=Te&&(Ge=b,N=Te),Ge<N?-D:Ge==N?0:D}),m.replaceRange(_e,Ae,He),K&&ge.push({anchor:Ae,head:_(fe+1,0)})}K&&m.setSelections(ge,0)})}function Me(m,w){m.operation(function(){for(var D=m.listSelections(),R=[],C=[],K=0;K<D.length;K++)(ne=D[K]).empty()?(R.push(K),C.push("")):C.push(w(m.getRange(ne.from(),ne.to())));var G;for(m.replaceSelections(C,"around","case"),K=R.length-1;K>=0;K--){var ne=D[R[K]];if(!(G&&k.cmpPos(ne.head,G)>0)){var te=H(m,ne.head);G=te.from,m.replaceRange(w(te.word),te.from,te.to)}}})}function re(m){var w=m.getCursor("from"),D=m.getCursor("to");if(0==k.cmpPos(w,D)){var R=H(m,w);if(!R.word)return;w=R.from,D=R.to}return{from:w,to:D,query:m.getRange(w,D),word:R}}function ae(m,w){var D=re(m);if(D){var R=D.query,C=m.getSearchCursor(R,w?D.to:D.from);(w?C.findNext():C.findPrevious())?m.setSelection(C.from(),C.to()):(C=m.getSearchCursor(R,w?_(m.firstLine(),0):m.clipPos(_(m.lastLine()))),(w?C.findNext():C.findPrevious())?m.setSelection(C.from(),C.to()):D.word&&m.setSelection(D.from,D.to))}}A.selectScope=function(m){U(m)||m.execCommand("selectAll")},A.selectBetweenBrackets=function(m){if(!U(m))return k.Pass},A.goToBracket=function(m){m.extendSelectionsBy(function(w){var D=m.scanForBracket(w.head,1,se(m.getTokenTypeAt(w.head)));if(D&&0!=k.cmpPos(D.pos,w.head))return D.pos;var R=m.scanForBracket(w.head,-1,se(m.getTokenTypeAt(_(w.head.line,w.head.ch+1))));return R&&_(R.pos.line,R.pos.ch+1)||w.head})},A.swapLineUp=function(m){if(m.isReadOnly())return k.Pass;for(var w=m.listSelections(),D=[],R=m.firstLine()-1,C=[],K=0;K<w.length;K++){var ne=w[K],G=ne.from().line-1,te=ne.to().line;C.push({anchor:_(ne.anchor.line-1,ne.anchor.ch),head:_(ne.head.line-1,ne.head.ch)}),0==ne.to().ch&&!ne.empty()&&--te,G>R?D.push(G,te):D.length&&(D[D.length-1]=te),R=te}m.operation(function(){for(var Q=0;Q<D.length;Q+=2){var ge=D[Q],x=D[Q+1],ue=m.getLine(ge);m.replaceRange("",_(ge,0),_(ge+1,0),"+swapLine"),x>m.lastLine()?m.replaceRange("\n"+ue,_(m.lastLine()),null,"+swapLine"):m.replaceRange(ue+"\n",_(x,0),null,"+swapLine")}m.setSelections(C),m.scrollIntoView()})},A.swapLineDown=function(m){if(m.isReadOnly())return k.Pass;for(var w=m.listSelections(),D=[],R=m.lastLine()+1,C=w.length-1;C>=0;C--){var K=w[C],ne=K.to().line+1,G=K.from().line;0==K.to().ch&&!K.empty()&&ne--,ne<R?D.push(ne,G):D.length&&(D[D.length-1]=G),R=G}m.operation(function(){for(var te=D.length-2;te>=0;te-=2){var Q=D[te],ge=D[te+1],x=m.getLine(Q);Q==m.lastLine()?m.replaceRange("",_(Q-1),_(Q),"+swapLine"):m.replaceRange("",_(Q,0),_(Q+1,0),"+swapLine"),m.replaceRange(x+"\n",_(ge,0),null,"+swapLine")}m.scrollIntoView()})},A.toggleCommentIndented=function(m){m.toggleComment({indent:!0})},A.joinLines=function(m){for(var w=m.listSelections(),D=[],R=0;R<w.length;R++){for(var C=w[R],K=C.from(),ne=K.line,G=C.to().line;R<w.length-1&&w[R+1].from().line==G;)G=w[++R].to().line;D.push({start:ne,end:G,anchor:!C.empty()&&K})}m.operation(function(){for(var te=0,Q=[],ge=0;ge<D.length;ge++){for(var fe,x=D[ge],ue=x.anchor&&_(x.anchor.line-te,x.anchor.ch),Ae=x.start;Ae<=x.end;Ae++){var He=Ae-te;Ae==x.end&&(fe=_(He,m.getLine(He).length+1)),He<m.lastLine()&&(m.replaceRange(" ",_(He),_(He+1,/^\s*/.exec(m.getLine(He+1))[0].length)),++te)}Q.push({anchor:ue||fe,head:fe})}m.setSelections(Q,0)})},A.duplicateLine=function(m){m.operation(function(){for(var w=m.listSelections().length,D=0;D<w;D++){var R=m.listSelections()[D];R.empty()?m.replaceRange(m.getLine(R.head.line)+"\n",_(R.head.line,0)):m.replaceRange(m.getRange(R.from(),R.to()),R.from())}m.scrollIntoView()})},A.sortLines=function(m){ce(m,!0,1)},A.reverseSortLines=function(m){ce(m,!0,-1)},A.sortLinesInsensitive=function(m){ce(m,!1,1)},A.reverseSortLinesInsensitive=function(m){ce(m,!1,-1)},A.nextBookmark=function(m){var w=m.state.sublimeBookmarks;if(w)for(;w.length;){var D=w.shift(),R=D.find();if(R)return w.push(D),m.setSelection(R.from,R.to)}},A.prevBookmark=function(m){var w=m.state.sublimeBookmarks;if(w)for(;w.length;){w.unshift(w.pop());var D=w[w.length-1].find();if(D)return m.setSelection(D.from,D.to);w.pop()}},A.toggleBookmark=function(m){for(var w=m.listSelections(),D=m.state.sublimeBookmarks||(m.state.sublimeBookmarks=[]),R=0;R<w.length;R++){for(var C=w[R].from(),K=w[R].to(),ne=w[R].empty()?m.findMarksAt(C):m.findMarks(C,K),G=0;G<ne.length;G++)if(ne[G].sublimeBookmark){ne[G].clear();for(var te=0;te<D.length;te++)D[te]==ne[G]&&D.splice(te--,1);break}G==ne.length&&D.push(m.markText(C,K,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},A.clearBookmarks=function(m){var w=m.state.sublimeBookmarks;if(w)for(var D=0;D<w.length;D++)w[D].clear();w.length=0},A.selectBookmarks=function(m){var w=m.state.sublimeBookmarks,D=[];if(w)for(var R=0;R<w.length;R++){var C=w[R].find();C?D.push({anchor:C.from,head:C.to}):w.splice(R--,0)}D.length&&m.setSelections(D,0)},A.smartBackspace=function(m){if(m.somethingSelected())return k.Pass;m.operation(function(){for(var w=m.listSelections(),D=m.getOption("indentUnit"),R=w.length-1;R>=0;R--){var C=w[R].head,K=m.getRange({line:C.line,ch:0},C),ne=k.countColumn(K,null,m.getOption("tabSize")),G=m.findPosH(C,-1,"char",!1);if(K&&!/\S/.test(K)&&ne%D==0){var te=new _(C.line,k.findColumn(K,ne-D,D));te.ch!=C.ch&&(G=te)}m.replaceRange("",G,C,"+delete")}})},A.delLineRight=function(m){m.operation(function(){for(var w=m.listSelections(),D=w.length-1;D>=0;D--)m.replaceRange("",w[D].anchor,_(w[D].to().line),"+delete");m.scrollIntoView()})},A.upcaseAtCursor=function(m){Me(m,function(w){return w.toUpperCase()})},A.downcaseAtCursor=function(m){Me(m,function(w){return w.toLowerCase()})},A.setSublimeMark=function(m){m.state.sublimeMark&&m.state.sublimeMark.clear(),m.state.sublimeMark=m.setBookmark(m.getCursor())},A.selectToSublimeMark=function(m){var w=m.state.sublimeMark&&m.state.sublimeMark.find();w&&m.setSelection(m.getCursor(),w)},A.deleteToSublimeMark=function(m){var w=m.state.sublimeMark&&m.state.sublimeMark.find();if(w){var D=m.getCursor(),R=w;if(k.cmpPos(D,R)>0){var C=R;R=D,D=C}m.state.sublimeKilled=m.getRange(D,R),m.replaceRange("",D,R)}},A.swapWithSublimeMark=function(m){var w=m.state.sublimeMark&&m.state.sublimeMark.find();w&&(m.state.sublimeMark.clear(),m.state.sublimeMark=m.setBookmark(m.getCursor()),m.setCursor(w))},A.sublimeYank=function(m){null!=m.state.sublimeKilled&&m.replaceSelection(m.state.sublimeKilled,null,"paste")},A.showInCenter=function(m){var w=m.cursorCoords(null,"local");m.scrollTo(null,(w.top+w.bottom)/2-m.getScrollInfo().clientHeight/2)},A.findUnder=function(m){ae(m,!0)},A.findUnderPrevious=function(m){ae(m,!1)},A.findAllUnder=function(m){var w=re(m);if(w){for(var D=m.getSearchCursor(w.query),R=[],C=-1;D.findNext();)R.push({anchor:D.from(),head:D.to()}),D.from().line<=w.from.line&&D.from().ch<=w.from.ch&&C++;m.setSelections(R,C)}};var M=k.keyMap;M.macSublime={"Cmd-Left":"goLineStartSmart","Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-Left":"goSubwordLeft","Ctrl-Right":"goSubwordRight","Ctrl-Alt-Up":"scrollLineUp","Ctrl-Alt-Down":"scrollLineDown","Cmd-L":"selectLine","Shift-Cmd-L":"splitSelectionByLine",Esc:"singleSelectionTop","Cmd-Enter":"insertLineAfter","Shift-Cmd-Enter":"insertLineBefore","Cmd-D":"selectNextOccurrence","Shift-Cmd-Space":"selectScope","Shift-Cmd-M":"selectBetweenBrackets","Cmd-M":"goToBracket","Cmd-Ctrl-Up":"swapLineUp","Cmd-Ctrl-Down":"swapLineDown","Cmd-/":"toggleCommentIndented","Cmd-J":"joinLines","Shift-Cmd-D":"duplicateLine",F5:"sortLines","Shift-F5":"reverseSortLines","Cmd-F5":"sortLinesInsensitive","Shift-Cmd-F5":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Cmd-F2":"toggleBookmark","Shift-Cmd-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Cmd-K Cmd-D":"skipAndSelectNextOccurrence","Cmd-K Cmd-K":"delLineRight","Cmd-K Cmd-U":"upcaseAtCursor","Cmd-K Cmd-L":"downcaseAtCursor","Cmd-K Cmd-Space":"setSublimeMark","Cmd-K Cmd-A":"selectToSublimeMark","Cmd-K Cmd-W":"deleteToSublimeMark","Cmd-K Cmd-X":"swapWithSublimeMark","Cmd-K Cmd-Y":"sublimeYank","Cmd-K Cmd-C":"showInCenter","Cmd-K Cmd-G":"clearBookmarks","Cmd-K Cmd-Backspace":"delLineLeft","Cmd-K Cmd-1":"foldAll","Cmd-K Cmd-0":"unfoldAll","Cmd-K Cmd-J":"unfoldAll","Ctrl-Shift-Up":"addCursorToPrevLine","Ctrl-Shift-Down":"addCursorToNextLine","Cmd-F3":"findUnder","Shift-Cmd-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Cmd-[":"fold","Shift-Cmd-]":"unfold","Cmd-I":"findIncremental","Shift-Cmd-I":"findIncrementalReverse","Cmd-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"macDefault"},k.normalizeKeyMap(M.macSublime),M.pcSublime={"Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-T":"transposeChars","Alt-Left":"goSubwordLeft","Alt-Right":"goSubwordRight","Ctrl-Up":"scrollLineUp","Ctrl-Down":"scrollLineDown","Ctrl-L":"selectLine","Shift-Ctrl-L":"splitSelectionByLine",Esc:"singleSelectionTop","Ctrl-Enter":"insertLineAfter","Shift-Ctrl-Enter":"insertLineBefore","Ctrl-D":"selectNextOccurrence","Shift-Ctrl-Space":"selectScope","Shift-Ctrl-M":"selectBetweenBrackets","Ctrl-M":"goToBracket","Shift-Ctrl-Up":"swapLineUp","Shift-Ctrl-Down":"swapLineDown","Ctrl-/":"toggleCommentIndented","Ctrl-J":"joinLines","Shift-Ctrl-D":"duplicateLine",F9:"sortLines","Shift-F9":"reverseSortLines","Ctrl-F9":"sortLinesInsensitive","Shift-Ctrl-F9":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Ctrl-F2":"toggleBookmark","Shift-Ctrl-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Ctrl-K Ctrl-D":"skipAndSelectNextOccurrence","Ctrl-K Ctrl-K":"delLineRight","Ctrl-K Ctrl-U":"upcaseAtCursor","Ctrl-K Ctrl-L":"downcaseAtCursor","Ctrl-K Ctrl-Space":"setSublimeMark","Ctrl-K Ctrl-A":"selectToSublimeMark","Ctrl-K Ctrl-W":"deleteToSublimeMark","Ctrl-K Ctrl-X":"swapWithSublimeMark","Ctrl-K Ctrl-Y":"sublimeYank","Ctrl-K Ctrl-C":"showInCenter","Ctrl-K Ctrl-G":"clearBookmarks","Ctrl-K Ctrl-Backspace":"delLineLeft","Ctrl-K Ctrl-1":"foldAll","Ctrl-K Ctrl-0":"unfoldAll","Ctrl-K Ctrl-J":"unfoldAll","Ctrl-Alt-Up":"addCursorToPrevLine","Ctrl-Alt-Down":"addCursorToNextLine","Ctrl-F3":"findUnder","Shift-Ctrl-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Ctrl-[":"fold","Shift-Ctrl-]":"unfold","Ctrl-I":"findIncremental","Shift-Ctrl-I":"findIncrementalReverse","Ctrl-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"pcDefault"},k.normalizeKeyMap(M.pcSublime),M.sublime=M.default==M.macDefault?M.macSublime:M.pcSublime}(de(3867),de(5626),de(2491))},1595:(xt,et,de)=>{!function(k){"use strict";var A=k.Pos;function _(oe,V){var j=oe.state.vim;if(!j||j.insertMode)return V.head;var U=j.sel.head;return U?j.visualBlock&&V.head.line!=U.line?void 0:V.from()!=V.anchor||V.empty()||V.head.line!=U.line||V.head.ch==U.ch?V.head:new A(V.head.line,V.head.ch-1):V.head}var q=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<Del>",type:"keyToKey",toKeys:"x",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"gn",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!0}},{keys:"gN",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!1}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-u>",type:"operatorMotion",operator:"delete",motion:"moveToStartOfLine",context:"insert"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],O=q.length,f=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"vglobal",shortName:"v"},{name:"global",shortName:"g"}];k.Vim=function(){function j(o,l){this==k.keyMap.vim&&(o.options.$customCursor=null,k.rmClass(o.getWrapperElement(),"cm-fat-cursor")),(!l||l.attach!=U)&&function V(o){o.setOption("disableInput",!1),o.off("cursorActivity",ii),k.off(o.getInputField(),"paste",ae(o)),o.state.vim=null,Jr&&clearTimeout(Jr)}(o)}function U(o,l){this==k.keyMap.vim&&(o.curOp&&(o.curOp.selectionChanged=!0),o.options.$customCursor=_,k.addClass(o.getWrapperElement(),"cm-fat-cursor")),(!l||l.attach!=U)&&function oe(o){o.setOption("disableInput",!0),o.setOption("showCursorWhenSelecting",!1),k.signal(o,"vim-mode-change",{mode:"normal"}),o.on("cursorActivity",ii),ie(o),k.on(o.getInputField(),"paste",ae(o))}(o)}function se(o,l){if(l){if(this[o])return this[o];var s=function re(o){if("'"==o.charAt(0))return o.charAt(1);var l=o.split(/-(?!$)/),s=l[l.length-1];if(1==l.length&&1==l[0].length)return!1;if(2==l.length&&"Shift"==l[0]&&1==s.length)return!1;for(var c=!1,p=0;p<l.length;p++){var v=l[p];v in ce?l[p]=ce[v]:c=!0,v in Me&&(l[p]=Me[v])}return!!c&&(ue(s)&&(l[l.length-1]=s.toLowerCase()),"<"+l.join("-")+">")}(o);if(!s)return!1;var c=Pe.findKey(l,s);return"function"==typeof c&&k.signal(l,"vim-keypress",s),c}}k.defineOption("vimMode",!1,function(o,l,s){l&&"vim"!=o.getOption("keyMap")?o.setOption("keyMap","vim"):!l&&s!=k.Init&&/^vim/.test(o.getOption("keyMap"))&&o.setOption("keyMap","default")});var ce={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A",CapsLock:""},Me={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"};function ae(o){var l=o.state.vim;return l.onPasteFn||(l.onPasteFn=function(){l.insertMode||(o.setCursor(bt(o.getCursor(),0,1)),dr.enterInsertMode(o,{},l))}),l.onPasteFn}var M=/[\d]/,W=[k.isWordChar,function(o){return o&&!k.isWordChar(o)&&!/\s/.test(o)}],m=[function(o){return/\S/.test(o)}];function w(o,l){for(var s=[],c=o;c<o+l;c++)s.push(String.fromCharCode(c));return s}var G,D=w(65,26),R=w(97,26),C=w(48,10),K=[].concat(D,R,C,["<",">"]),ne=[].concat(D,R,C,["-",'"',".",":","_","/"]);try{G=new RegExp("^[\\p{Lu}]$","u")}catch{G=/^[A-Z]$/}function te(o,l){return l>=o.firstLine()&&l<=o.lastLine()}function Q(o){return/^[a-z]$/.test(o)}function ge(o){return-1!="()[]{}".indexOf(o)}function x(o){return M.test(o)}function ue(o){return G.test(o)}function fe(o){return/^\s*$/.test(o)}function Ae(o){return-1!=".?!".indexOf(o)}function He(o,l){for(var s=0;s<l.length;s++)if(l[s]==o)return!0;return!1}var _e={};function Ge(o,l,s,c,p){if(void 0===l&&!p)throw Error("defaultValue is required unless callback is provided");if(s||(s="string"),_e[o]={type:s,defaultValue:l,callback:p},c)for(var v=0;v<c.length;v++)_e[c[v]]=_e[o];l&&N(o,l)}function N(o,l,s,c){var p=_e[o],v=(c=c||{}).scope;if(!p)return new Error("Unknown option: "+o);if("boolean"==p.type){if(l&&!0!==l)return new Error("Invalid argument: "+o+"="+l);!1!==l&&(l=!0)}p.callback?("local"!==v&&p.callback(l,void 0),"global"!==v&&s&&p.callback(l,s)):("local"!==v&&(p.value="boolean"==p.type?!!l:l),"global"!==v&&s&&(s.state.vim.options[o]={value:l}))}function b(o,l,s){var c=_e[o],p=(s=s||{}).scope;if(!c)return new Error("Unknown option: "+o);if(c.callback){var v=l&&c.callback(void 0,l);return"global"!==p&&void 0!==v?v:"local"!==p?c.callback():void 0}return((v="global"!==p&&l&&l.state.vim.options[o])||"local"!==p&&c||{}).value}Ge("filetype",void 0,"string",["ft"],function(o,l){if(void 0!==l){var s;if(void 0===o)return"null"==(s=l.getOption("mode"))?"":s;l.setOption("mode",s=""==o?"null":o)}});var $,Te=function(){var o=100,l=-1,s=0,c=0,p=new Array(o);function L(F,Y){(l+=Y)>s?l=s:l<c&&(l=c);var Z=p[(o+l)%o];if(Z&&!Z.find()){var xe,ve=Y>0?1:-1,pe=F.getCursor();do{if((Z=p[(o+(l+=ve))%o])&&(xe=Z.find())&&!pt(pe,xe))break}while(l<s&&l>c)}return Z}return{cachedCursor:void 0,add:function v(F,Y,Z){var xe=p[l%o];function pe(Be){var Le=++l%o,Je=p[Le];Je&&Je.clear(),p[Le]=F.setBookmark(Be)}if(xe){var we=xe.find();we&&!pt(we,Y)&&pe(Y)}else pe(Y);pe(Z),s=l,(c=l-o+1)<0&&(c=0)},find:function I(F,Y){var Z=l,ve=L(F,Y);return l=Z,ve&&ve.find()},move:L}},P=function(o){return o?{changes:o.changes,expectCursorActivityForChange:o.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function J(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=P()}function ie(o){return o.state.vim||(o.state.vim={inputState:new Ue,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),o.state.vim}function Ee(){for(var o in $={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:Te(),macroModeState:new J,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new Ot({}),searchHistoryController:new kt,exCommandHistoryController:new kt},_e){var l=_e[o];l.value=l.defaultValue}}J.prototype={exitMacroRecordMode:function(){var o=$.macroModeState;o.onRecordingDone&&o.onRecordingDone(),o.onRecordingDone=void 0,o.isRecording=!1},enterMacroRecordMode:function(o,l){var s=$.registerController.getRegister(l);s&&(s.clear(),this.latestRegister=l,o.openDialog&&(this.onRecordingDone=o.openDialog(document.createTextNode("(recording)["+l+"]"),null,{bottom:!0})),this.isRecording=!0)}};var Ve,Pe={buildKeyMap:function(){},getRegisterController:function(){return $.registerController},resetVimGlobalState_:Ee,getVimGlobalState_:function(){return $},maybeInitVimState_:ie,suppressErrorLogging:!1,InsertModeKey:sn,map:function(o,l,s){kr.map(o,l,s)},unmap:function(o,l){return kr.unmap(o,l)},noremap:function(o,l,s){function c(xe){return xe?[xe]:["normal","insert","visual"]}for(var p=c(s),v=q.length,I=v-O;I<v&&p.length;I++){var F=q[I];if(!(F.keys!=l||s&&F.context&&F.context!==s||"ex"===F.type.substr(0,2)||"key"===F.type.substr(0,3))){var Y={};for(var Z in F)Y[Z]=F[Z];Y.keys=o,s&&!Y.context&&(Y.context=s),this._mapCommand(Y);var ve=c(F.context);p=p.filter(function(xe){return-1===ve.indexOf(xe)})}}},mapclear:function(o){var l=q.length,s=O,c=q.slice(0,l-s);if(q=q.slice(l-s),o)for(var p=c.length-1;p>=0;p--){var v=c[p];if(o!==v.context)if(v.context)this._mapCommand(v);else{var L=["normal","insert","visual"];for(var I in L)if(L[I]!==o){var F={};for(var Y in v)F[Y]=v[Y];F.context=L[I],this._mapCommand(F)}}}},setOption:N,getOption:b,defineOption:Ge,defineEx:function(o,l,s){if(l){if(0!==o.indexOf(l))throw new Error('(Vim.defineEx) "'+l+'" is not a prefix of "'+o+'", command not registered')}else l=o;Bi[o]=s,kr.commandMap_[l]={name:o,shortName:l,type:"api"}},handleKey:function(o,l,s){var c=this.findKey(o,l,s);if("function"==typeof c)return c()},findKey:function(o,l,s){var Y,c=ie(o);function p(){var Z=$.macroModeState;if(Z.isRecording){if("q"==l)return Z.exitMacroRecordMode(),Re(o),!0;"mapping"!=s&&function ri(o,l){if(!o.isPlaying){var c=$.registerController.getRegister(o.latestRegister);c&&c.pushText(l)}}(Z,l)}}function v(){if("<Esc>"==l)return Re(o),c.visualMode?Dt(o):c.insertMode&&xn(o),!0}return!1===(Y=c.insertMode?function I(){if(v())return!0;for(var Z=c.inputState.keyBuffer=c.inputState.keyBuffer+l,ve=1==l.length,xe=Lt.matchCommand(Z,q,c.inputState,"insert");Z.length>1&&"full"!=xe.type;){Z=c.inputState.keyBuffer=Z.slice(1);var pe=Lt.matchCommand(Z,q,c.inputState,"insert");"none"!=pe.type&&(xe=pe)}if("none"==xe.type)return Re(o),!1;if("partial"==xe.type)return Ve&&window.clearTimeout(Ve),Ve=window.setTimeout(function(){c.insertMode&&c.inputState.keyBuffer&&Re(o)},b("insertModeEscKeysTimeout")),!ve;if(Ve&&window.clearTimeout(Ve),ve){for(var we=o.listSelections(),Be=0;Be<we.length;Be++){var Le=we[Be].head;o.replaceRange("",bt(Le,0,-(Z.length-1)),Le,"+input")}$.macroModeState.lastInsertModeChanges.changes.pop()}return Re(o),xe.command}():function F(){if(p()||v())return!0;var Z=c.inputState.keyBuffer=c.inputState.keyBuffer+l;if(/^[1-9]\d*$/.test(Z))return!0;if(!(we=/^(\d*)(.*)$/.exec(Z)))return Re(o),!1;var ve=c.visualMode?"visual":"normal",xe=we[2]||we[1];c.inputState.operatorShortcut&&c.inputState.operatorShortcut.slice(-1)==xe&&(xe=c.inputState.operatorShortcut);var we,pe=Lt.matchCommand(xe,q,c.inputState,ve);return"none"==pe.type?(Re(o),!1):"partial"==pe.type||(c.inputState.keyBuffer="",(we=/^(\d*)(.*)$/.exec(Z))[1]&&"0"!=we[1]&&c.inputState.pushRepeatDigit(we[1]),pe.command)}())?c.insertMode||1!==l.length?void 0:function(){return!0}:!0===Y?function(){return!0}:function(){return o.operation(function(){o.curOp.isVimOp=!0;try{"keyToKey"==Y.type?function L(Z){for(var ve;Z;)ve=/<\w+-.+?>|<\w+>|./.exec(Z),Z=Z.substring(ve.index+(l=ve[0]).length),Pe.handleKey(o,l,"mapping")}(Y.toKeys):Lt.processCommand(o,c,Y)}catch(Z){throw o.state.vim=void 0,ie(o),Pe.suppressErrorLogging||console.log(Z),Z}return!0})}},handleEx:function(o,l){kr.processCommand(o,l)},defineMotion:function hr(o,l){It[o]=l},defineAction:function Kr(o,l){dr[o]=l},defineOperator:function Wr(o,l){mr[o]=l},mapCommand:function so(o,l,s,c,p){var v={keys:o,type:l};for(var L in v[l]=s,v[l+"Args"]=c,p)v[L]=p[L];Pi(v)},_mapCommand:Pi,defineRegister:function Fr(o,l){var s=$.registerController.registers;if(!o||1!=o.length)throw Error("Register name must be 1 character");if(s[o])throw Error("Register already defined "+o);s[o]=l,ne.push(o)},exitVisualMode:Dt,exitInsertMode:xn};function Ue(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}function Re(o,l){o.state.vim.inputState=new Ue,k.signal(o,"vim-command-done",l)}function St(o,l,s){this.clear(),this.keyBuffer=[o||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!l,this.blockwise=!!s}function Ot(o){this.registers=o,this.unnamedRegister=o['"']=new St,o["."]=new St,o[":"]=new St,o["/"]=new St}function kt(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}Ue.prototype.pushRepeatDigit=function(o){this.operator?this.motionRepeat=this.motionRepeat.concat(o):this.prefixRepeat=this.prefixRepeat.concat(o)},Ue.prototype.getRepeat=function(){var o=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(o=1,this.prefixRepeat.length>0&&(o*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(o*=parseInt(this.motionRepeat.join(""),10))),o},St.prototype={setText:function(o,l,s){this.keyBuffer=[o||""],this.linewise=!!l,this.blockwise=!!s},pushText:function(o,l){l&&(this.linewise||this.keyBuffer.push("\n"),this.linewise=!0),this.keyBuffer.push(o)},pushInsertModeChanges:function(o){this.insertModeChanges.push(P(o))},pushSearchQuery:function(o){this.searchQueries.push(o)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}},Ot.prototype={pushText:function(o,l,s,c,p){if("_"!==o){c&&"\n"!==s.charAt(s.length-1)&&(s+="\n");var v=this.isValidRegister(o)?this.getRegister(o):null;if(!v){switch(l){case"yank":this.registers[0]=new St(s,c,p);break;case"delete":case"change":-1==s.indexOf("\n")?this.registers["-"]=new St(s,c):(this.shiftNumericRegisters_(),this.registers[1]=new St(s,c))}return void this.unnamedRegister.setText(s,c,p)}ue(o)?v.pushText(s,c):v.setText(s,c,p),this.unnamedRegister.setText(v.toString(),c)}},getRegister:function(o){return this.isValidRegister(o)?(o=o.toLowerCase(),this.registers[o]||(this.registers[o]=new St),this.registers[o]):this.unnamedRegister},isValidRegister:function(o){return o&&He(o,ne)},shiftNumericRegisters_:function(){for(var o=9;o>=2;o--)this.registers[o]=this.getRegister(""+(o-1))}},kt.prototype={nextMatch:function(o,l){var s=this.historyBuffer,c=l?-1:1;null===this.initialPrefix&&(this.initialPrefix=o);for(var p=this.iterator+c;l?p>=0:p<s.length;p+=c)for(var v=s[p],L=0;L<=v.length;L++)if(this.initialPrefix==v.substring(0,L))return this.iterator=p,v;return p>=s.length?(this.iterator=s.length,this.initialPrefix):p<0?o:void 0},pushInput:function(o){var l=this.historyBuffer.indexOf(o);l>-1&&this.historyBuffer.splice(l,1),o.length&&this.historyBuffer.push(o)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var Lt={matchCommand:function(o,l,s,c){var p=function er(o,l,s,c){for(var p,v=[],L=[],I=0;I<l.length;I++){var F=l[I];"insert"==s&&"insert"!=F.context||F.context&&F.context!=s||c.operator&&"action"==F.type||!(p=it(o,F.keys))||("partial"==p&&v.push(F),"full"==p&&L.push(F))}return{partial:v.length&&v,full:L.length&&L}}(o,l,c,s);if(!p.full&&!p.partial)return{type:"none"};if(!p.full&&p.partial)return{type:"partial"};for(var v,L=0;L<p.full.length;L++)v||(v=p.full[L]);if("<character>"==v.keys.slice(-11)){var F=function Ht(o){var l=/^.*(<[^>]+>)$/.exec(o),s=l?l[1]:o.slice(-1);if(s.length>1)switch(s){case"<CR>":s="\n";break;case"<Space>":s=" ";break;default:s=""}return s}(o);if(!F)return{type:"none"};s.selectedCharacter=F}return{type:"full",command:v}},processCommand:function(o,l,s){switch(l.inputState.repeatOverride=s.repeatOverride,s.type){case"motion":this.processMotion(o,l,s);break;case"operator":this.processOperator(o,l,s);break;case"operatorMotion":this.processOperatorMotion(o,l,s);break;case"action":this.processAction(o,l,s);break;case"search":this.processSearch(o,l,s);break;case"ex":case"keyToEx":this.processEx(o,l,s)}},processMotion:function(o,l,s){l.inputState.motion=s.motion,l.inputState.motionArgs=$t(s.motionArgs),this.evalInput(o,l)},processOperator:function(o,l,s){var c=l.inputState;if(c.operator){if(c.operator==s.operator)return c.motion="expandToLine",c.motionArgs={linewise:!0},void this.evalInput(o,l);Re(o)}c.operator=s.operator,c.operatorArgs=$t(s.operatorArgs),s.keys.length>1&&(c.operatorShortcut=s.keys),s.exitVisualBlock&&(l.visualBlock=!1,Tt(o)),l.visualMode&&this.evalInput(o,l)},processOperatorMotion:function(o,l,s){var c=l.visualMode,p=$t(s.operatorMotionArgs);p&&c&&p.visualLine&&(l.visualLine=!0),this.processOperator(o,l,s),c||this.processMotion(o,l,s)},processAction:function(o,l,s){var c=l.inputState,p=c.getRepeat(),v=!!p,L=$t(s.actionArgs)||{};c.selectedCharacter&&(L.selectedCharacter=c.selectedCharacter),s.operator&&this.processOperator(o,l,s),s.motion&&this.processMotion(o,l,s),(s.motion||s.operator)&&this.evalInput(o,l),L.repeat=p||1,L.repeatIsExplicit=v,L.registerName=c.registerName,Re(o),l.lastMotion=null,s.isEdit&&this.recordLastEdit(l,c,s),dr[s.action](o,L,l)},processSearch:function(o,l,s){if(o.getSearchCursor){var c=s.searchArgs.forward,p=s.searchArgs.wholeWordOnly;be(o).setReversed(!c);var v=c?"/":"?",L=be(o).getQuery(),I=o.getScrollInfo();switch(s.searchArgs.querySrc){case"prompt":var xe=$.macroModeState;xe.isPlaying?F(Be=xe.replaySearchQueries.shift(),!0,!1):yt(o,{onClose:function Y(Le){o.scrollTo(I.left,I.top),F(Le,!0,!0);var Je=$.macroModeState;Je.isRecording&&function fo(o,l){if(!o.isPlaying){var c=$.registerController.getRegister(o.latestRegister);c&&c.pushSearchQuery&&c.pushSearchQuery(l)}}(Je,Le)},prefix:v,desc:"(JavaScript regexp)",onKeyUp:function Z(Le,Je,$e){var Kt,At,Xe=k.keyName(Le);"Up"==Xe||"Down"==Xe?(Kt=Le.target?Le.target.selectionEnd:0,$e(Je=$.searchHistoryController.nextMatch(Je,"Up"==Xe)||""),Kt&&Le.target&&(Le.target.selectionEnd=Le.target.selectionStart=Math.min(Kt,Le.target.value.length))):"Left"!=Xe&&"Right"!=Xe&&"Ctrl"!=Xe&&"Alt"!=Xe&&"Shift"!=Xe&&$.searchHistoryController.reset();try{At=xr(o,Je,!0,!0)}catch{}At?o.scrollIntoView($n(o,!c,At),30):(On(o),o.scrollTo(I.left,I.top))},onKeyDown:function ve(Le,Je,$e){var Xe=k.keyName(Le);"Esc"==Xe||"Ctrl-C"==Xe||"Ctrl-["==Xe||"Backspace"==Xe&&""==Je?($.searchHistoryController.pushInput(Je),$.searchHistoryController.reset(),xr(o,L),On(o),o.scrollTo(I.left,I.top),k.e_stop(Le),Re(o),$e(),o.focus()):"Up"==Xe||"Down"==Xe?k.e_stop(Le):"Ctrl-U"==Xe&&(k.e_stop(Le),$e(""))}});break;case"wordUnderCursor":var pe=Pr(o,!1,0,!1,!0),we=!0;if(pe||(pe=Pr(o,!1,0,!1,!1),we=!1),!pe)return;var Be=o.getLine(pe.start.line).substring(pe.start.ch,pe.end.ch);Be=we&&p?"\\b"+Be+"\\b":function Tr(o){return o.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}(Be),$.jumpList.cachedCursor=o.getCursor(),o.setCursor(pe.start),F(Be,!0,!1)}}function F(Le,Je,$e){$.searchHistoryController.pushInput(Le),$.searchHistoryController.reset();try{xr(o,Le,Je,$e)}catch{return Ke(o,"Invalid regex: "+Le),void Re(o)}Lt.processMotion(o,l,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:s.searchArgs.toJumplist}})}},processEx:function(o,l,s){function c(v){$.exCommandHistoryController.pushInput(v),$.exCommandHistoryController.reset(),kr.processCommand(o,v)}function p(v,L,I){var Z,F=k.keyName(v);("Esc"==F||"Ctrl-C"==F||"Ctrl-["==F||"Backspace"==F&&""==L)&&($.exCommandHistoryController.pushInput(L),$.exCommandHistoryController.reset(),k.e_stop(v),Re(o),I(),o.focus()),"Up"==F||"Down"==F?(k.e_stop(v),Z=v.target?v.target.selectionEnd:0,I(L=$.exCommandHistoryController.nextMatch(L,"Up"==F)||""),Z&&v.target&&(v.target.selectionEnd=v.target.selectionStart=Math.min(Z,v.target.value.length))):"Ctrl-U"==F?(k.e_stop(v),I("")):"Left"!=F&&"Right"!=F&&"Ctrl"!=F&&"Alt"!=F&&"Shift"!=F&&$.exCommandHistoryController.reset()}"keyToEx"==s.type?kr.processCommand(o,s.exArgs.input):yt(o,l.visualMode?{onClose:c,prefix:":",value:"'<,'>",onKeyDown:p,selectValueOnOpen:!1}:{onClose:c,prefix:":",onKeyDown:p})},evalInput:function(o,l){var pe,we,Be,s=l.inputState,c=s.motion,p=s.motionArgs||{},v=s.operator,L=s.operatorArgs||{},I=s.registerName,F=l.sel,Y=lt(l.visualMode?Gt(o,F.head):o.getCursor("head")),Z=lt(l.visualMode?Gt(o,F.anchor):o.getCursor("anchor")),ve=lt(Y),xe=lt(Z);if(v&&this.recordLastEdit(l,s),(Be=void 0!==s.repeatOverride?s.repeatOverride:s.getRepeat())>0&&p.explicitRepeat?p.repeatIsExplicit=!0:(p.noRepeat||!p.explicitRepeat&&0===Be)&&(Be=1,p.repeatIsExplicit=!1),s.selectedCharacter&&(p.selectedCharacter=L.selectedCharacter=s.selectedCharacter),p.repeat=Be,Re(o),c){var Le=It[c](o,Y,p,l,s);if(l.lastMotion=It[c],!Le)return;if(p.toJumplist){var Je=$.jumpList,$e=Je.cachedCursor;$e?(yr(o,$e,Le),delete Je.cachedCursor):yr(o,Y,Le)}Le instanceof Array?(we=Le[0],pe=Le[1]):pe=Le,pe||(pe=lt(Y)),l.visualMode?(l.visualBlock&&pe.ch===1/0||(pe=Gt(o,pe)),we&&(we=Gt(o,we)),F.anchor=we=we||xe,F.head=pe,Tt(o),Ie(o,l,"<",Ye(we,pe)?we:pe),Ie(o,l,">",Ye(we,pe)?pe:we)):v||(pe=Gt(o,pe),o.setCursor(pe.line,pe.ch))}if(v){if(L.lastSel){we=xe;var Xe=L.lastSel,ut=Math.abs(Xe.head.line-Xe.anchor.line),Kt=Math.abs(Xe.head.ch-Xe.anchor.ch);pe=Xe.visualLine?new A(xe.line+ut,xe.ch):Xe.visualBlock?new A(xe.line+ut,xe.ch+Kt):Xe.head.line==Xe.anchor.line?new A(xe.line,xe.ch+Kt):new A(xe.line+ut,xe.ch),l.visualMode=!0,l.visualLine=Xe.visualLine,l.visualBlock=Xe.visualBlock,F=l.sel={anchor:we,head:pe},Tt(o)}else l.visualMode&&(L.lastSel={anchor:lt(F.anchor),head:lt(F.head),visualBlock:l.visualBlock,visualLine:l.visualLine});var At,Zt,ht,at,Ut;if(l.visualMode){if(At=ot(F.head,F.anchor),Zt=tt(F.head,F.anchor),ht=l.visualLine||L.linewise,Ut=Zr(o,{anchor:At,head:Zt},at=l.visualBlock?"block":ht?"line":"char"),ht){var Yt=Ut.ranges;if("block"==at)for(var Mt=0;Mt<Yt.length;Mt++)Yt[Mt].head.ch=ft(o,Yt[Mt].head.line);else"line"==at&&(Yt[0].head=new A(Yt[0].head.line+1,0))}}else{if(At=lt(we||xe),Ye(Zt=lt(pe||ve),At)){var rn=At;At=Zt,Zt=rn}(ht=p.linewise||L.linewise)?function Yr(o,l,s){l.ch=0,s.ch=0,s.line++}(0,At,Zt):p.forward&&function mn(o,l,s){var c=o.getRange(l,s);if(/\n\s*$/.test(c)){var p=c.split("\n");p.pop();for(var v=p.pop();p.length>0&&v&&fe(v);v=p.pop())s.line--,s.ch=0;v?(s.line--,s.ch=ft(o,s.line)):s.ch=0}}(o,At,Zt),Ut=Zr(o,{anchor:At,head:Zt},at="char",!p.inclusive||ht)}o.setSelections(Ut.ranges,Ut.primary),l.lastMotion=null,L.repeat=Be,L.registerName=I,L.linewise=ht;var li=mr[v](o,L,Ut.ranges,xe,pe);l.visualMode&&Dt(o,null!=li),li&&o.setCursor(li)}},recordLastEdit:function(o,l,s){var c=$.macroModeState;c.isPlaying||(o.lastEditInputState=l,o.lastEditActionCommand=s,c.lastInsertModeChanges.changes=[],c.lastInsertModeChanges.expectCursorActivityForChange=!1,c.lastInsertModeChanges.visualBlock=o.visualBlock?o.sel.head.line-o.sel.anchor.line:0)}},It={moveToTopLine:function(o,l,s){var c=ei(o).top+s.repeat-1;return new A(c,or(o.getLine(c)))},moveToMiddleLine:function(o){var l=ei(o),s=Math.floor(.5*(l.top+l.bottom));return new A(s,or(o.getLine(s)))},moveToBottomLine:function(o,l,s){var c=ei(o).bottom-s.repeat+1;return new A(c,or(o.getLine(c)))},expandToLine:function(o,l,s){return new A(l.line+s.repeat-1,1/0)},findNext:function(o,l,s){var c=be(o),p=c.getQuery();if(p){var v=!s.forward;return v=c.isReversed()?!v:v,Vn(o,p),$n(o,v,p,s.repeat)}},findAndSelectNextInclusive:function(o,l,s,c,p){var v=be(o),L=v.getQuery();if(L){var I=!s.forward,F=function Ii(o,l,s,c,p){return void 0===c&&(c=1),o.operation(function(){var v=o.getCursor(),L=o.getSearchCursor(s,v),I=L.find(!l);!p.visualMode&&I&&pt(L.from(),v)&&L.find(!l);for(var F=0;F<c;F++)if(!(I=L.find(l))&&!(L=o.getSearchCursor(s,l?new A(o.lastLine()):new A(o.firstLine(),0))).find(l))return;return[L.from(),L.to()]})}(o,I=v.isReversed()?!I:I,L,s.repeat,c);if(F){if(p.operator)return F;var Y=F[0],Z=new A(F[1].line,F[1].ch-1);if(c.visualMode){(c.visualLine||c.visualBlock)&&(c.visualLine=!1,c.visualBlock=!1,k.signal(o,"vim-mode-change",{mode:"visual",subMode:""}));var ve=c.sel.anchor;if(ve)return v.isReversed()?s.forward?[ve,Y]:[ve,Z]:s.forward?[ve,Z]:[ve,Y]}else c.visualMode=!0,c.visualLine=!1,c.visualBlock=!1,k.signal(o,"vim-mode-change",{mode:"visual",subMode:""});return I?[Z,Y]:[Y,Z]}}},goToMark:function(o,l,s,c){var p=ti(o,c,s.selectedCharacter);return p?s.linewise?{line:p.line,ch:or(o.getLine(p.line))}:p:null},moveToOtherHighlightedEnd:function(o,l,s,c){if(c.visualBlock&&s.sameLine){var p=c.sel;return[Gt(o,new A(p.anchor.line,p.head.ch)),Gt(o,new A(p.head.line,p.anchor.ch))]}return[c.sel.head,c.sel.anchor]},jumpToMark:function(o,l,s,c){for(var p=l,v=0;v<s.repeat;v++){var L=p;for(var I in c.marks)if(Q(I)){var F=c.marks[I].find();if(!((s.forward?Ye(F,L):Ye(L,F))||s.linewise&&F.line==L.line)){var Z=pt(L,p),ve=s.forward?_t(L,F,p):_t(p,F,L);(Z||ve)&&(p=F)}}}return s.linewise&&(p=new A(p.line,or(o.getLine(p.line)))),p},moveByCharacters:function(o,l,s){var p=s.repeat;return new A(l.line,s.forward?l.ch+p:l.ch-p)},moveByLines:function(o,l,s,c){var p=l,v=p.ch;switch(c.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:v=c.lastHPos;break;default:c.lastHPos=v}var L=s.repeat+(s.repeatOffset||0),I=s.forward?p.line+L:p.line-L,F=o.firstLine(),Y=o.lastLine(),Z=o.findPosV(p,s.forward?L:-L,"line",c.lastHSPos);return(s.forward?Z.line>I:Z.line<I)&&(I=Z.line,v=Z.ch),I<F&&p.line==F?this.moveToStartOfLine(o,l,s,c):I>Y&&p.line==Y?jt(o,l,s,c,!0):(s.toFirstChar&&(v=or(o.getLine(I)),c.lastHPos=v),c.lastHSPos=o.charCoords(new A(I,v),"div").left,new A(I,v))},moveByDisplayLines:function(o,l,s,c){var p=l;switch(c.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:c.lastHSPos=o.charCoords(p,"div").left}var v=s.repeat;if((L=o.findPosV(p,s.forward?v:-v,"line",c.lastHSPos)).hitSide)if(s.forward)var I=o.charCoords(L,"div"),L=o.coordsChar({top:I.top+8,left:c.lastHSPos},"div");else{var Y=o.charCoords(new A(o.firstLine(),0),"div");Y.left=c.lastHSPos,L=o.coordsChar(Y,"div")}return c.lastHPos=L.ch,L},moveByPage:function(o,l,s){var p=s.repeat;return o.findPosV(l,s.forward?p:-p,"page")},moveByParagraph:function(o,l,s){return Or(o,l,s.repeat,s.forward?1:-1)},moveBySentence:function(o,l,s){return function sr(o,l,s,c){function p(F,Y){if(Y.pos+Y.dir<0||Y.pos+Y.dir>=Y.line.length){if(Y.ln+=Y.dir,!te(F,Y.ln))return Y.line=null,Y.ln=null,void(Y.pos=null);Y.line=F.getLine(Y.ln),Y.pos=Y.dir>0?0:Y.line.length-1}else Y.pos+=Y.dir}function v(F,Y,Z,ve){var xe=""===(Le=F.getLine(Y)),pe={line:Le,ln:Y,pos:Z,dir:ve},we={ln:pe.ln,pos:pe.pos},Be=""===pe.line;for(p(F,pe);null!==pe.line;){if(we.ln=pe.ln,we.pos=pe.pos,""===pe.line&&!Be)return{ln:pe.ln,pos:pe.pos};if(xe&&""!==pe.line&&!fe(pe.line[pe.pos]))return{ln:pe.ln,pos:pe.pos};Ae(pe.line[pe.pos])&&!xe&&(pe.pos===pe.line.length-1||fe(pe.line[pe.pos+1]))&&(xe=!0),p(F,pe)}var Le=F.getLine(we.ln);we.pos=0;for(var Je=Le.length-1;Je>=0;--Je)if(!fe(Le[Je])){we.pos=Je;break}return we}function L(F,Y,Z,ve){var xe={line:Be=F.getLine(Y),ln:Y,pos:Z,dir:ve},pe={ln:xe.ln,pos:null},we=""===xe.line;for(p(F,xe);null!==xe.line;){if(""===xe.line&&!we)return null!==pe.pos?pe:{ln:xe.ln,pos:xe.pos};if(Ae(xe.line[xe.pos])&&null!==pe.pos&&(xe.ln!==pe.ln||xe.pos+1!==pe.pos))return pe;""!==xe.line&&!fe(xe.line[xe.pos])&&(we=!1,pe={ln:xe.ln,pos:xe.pos}),p(F,xe)}var Be=F.getLine(pe.ln);pe.pos=0;for(var Le=0;Le<Be.length;++Le)if(!fe(Be[Le])){pe.pos=Le;break}return pe}for(var I={ln:l.line,pos:l.ch};s>0;)I=c<0?L(o,I.ln,I.pos,c):v(o,I.ln,I.pos,c),s--;return new A(I.ln,I.pos)}(o,l,s.repeat,s.forward?1:-1)},moveByScroll:function(o,l,s,c){var I,p=o.getScrollInfo(),v=s.repeat;v||(v=p.clientHeight/(2*o.defaultTextHeight()));var L=o.charCoords(l,"local");if(s.repeat=v,!(I=It.moveByDisplayLines(o,l,s,c)))return null;var F=o.charCoords(I,"local");return o.scrollTo(null,p.top+F.top-L.top),I},moveByWords:function(o,l,s){return function Bt(o,l,s,c,p,v){var L=lt(l),I=[];(c&&!p||!c&&p)&&s++;for(var F=!(c&&p),Y=0;Y<s;Y++){var Z=Hr(o,l,c,v,F);if(!Z){var ve=ft(o,o.lastLine());I.push(c?{line:o.lastLine(),from:ve,to:ve}:{line:0,from:0,to:0});break}I.push(Z),l=new A(Z.line,c?Z.to-1:Z.from)}var xe=I.length!=s,pe=I[0],we=I.pop();return c&&!p?(!xe&&(pe.from!=L.ch||pe.line!=L.line)&&(we=I.pop()),new A(we.line,we.from)):c&&p?new A(we.line,we.to-1):!c&&p?(!xe&&(pe.to!=L.ch||pe.line!=L.line)&&(we=I.pop()),new A(we.line,we.to)):new A(we.line,we.from)}(o,l,s.repeat,!!s.forward,!!s.wordEnd,!!s.bigWord)},moveTillCharacter:function(o,l,s){var p=Mr(o,s.repeat,s.forward,s.selectedCharacter),v=s.forward?-1:1;return lr(v,s),p?(p.ch+=v,p):null},moveToCharacter:function(o,l,s){var c=s.repeat;return lr(0,s),Mr(o,c,s.forward,s.selectedCharacter)||l},moveToSymbol:function(o,l,s){return function Rr(o,l,s,c){var p=lt(o.getCursor()),v=s?1:-1,L=s?o.lineCount():-1,I=p.ch,F=p.line,Y=o.getLine(F),Z={lineText:Y,nextCh:Y.charAt(I),lastCh:null,index:I,symb:c,reverseSymb:(s?{")":"(","}":"{"}:{"(":")","{":"}"})[c],forward:s,depth:0,curMoveThrough:!1},ve=Ur[c];if(!ve)return p;var xe=pr[ve].init,pe=pr[ve].isComplete;for(xe&&xe(Z);F!==L&&l;){if(Z.index+=v,Z.nextCh=Z.lineText.charAt(Z.index),!Z.nextCh){if(Z.lineText=o.getLine(F+=v)||"",v>0)Z.index=0;else{var we=Z.lineText.length;Z.index=we>0?we-1:0}Z.nextCh=Z.lineText.charAt(Z.index)}pe(Z)&&(p.line=F,p.ch=Z.index,l--)}return Z.nextCh||Z.curMoveThrough?new A(F,Z.index):p}(o,s.repeat,s.forward,s.selectedCharacter)||l},moveToColumn:function(o,l,s,c){var p=s.repeat;return c.lastHPos=p-1,c.lastHSPos=o.charCoords(l,"div").left,function ct(o,l){var s=o.getCursor().line;return Gt(o,new A(s,l-1))}(o,p)},moveToEol:function(o,l,s,c){return jt(o,l,s,c,!1)},moveToFirstNonWhiteSpaceCharacter:function(o,l){return new A(l.line,or(o.getLine(l.line)))},moveToMatchedSymbol:function(o,l){for(var L,s=l,c=s.line,p=s.ch,v=o.getLine(c);p<v.length;p++)if((L=v.charAt(p))&&ge(L)){var I=o.getTokenTypeAt(new A(c,p+1));if("string"!==I&&"comment"!==I)break}if(p<v.length){var F="<"===p||">"===p?/[(){}[\]<>]/:/[(){}[\]]/;return o.findMatchingBracket(new A(c,p),{bracketRegex:F}).to}return s},moveToStartOfLine:function(o,l){return new A(l.line,0)},moveToLineOrEdgeOfDocument:function(o,l,s){var c=s.forward?o.lastLine():o.firstLine();return s.repeatIsExplicit&&(c=s.repeat-o.getOption("firstLineNumber")),new A(c,or(o.getLine(c)))},textObjectManipulation:function(o,l,s,c){var L=s.selectedCharacter;"b"==L?L="(":"B"==L&&(L="{");var F,I=!s.textObjectInner;if({"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"}[L])F=function st(o,l,s,c){var v,L,p=l,I={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[s],F={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[s],Z=o.getLine(p.line).charAt(p.ch)===F?1:0;if(v=o.scanForBracket(new A(p.line,p.ch+Z),-1,void 0,{bracketRegex:I}),L=o.scanForBracket(new A(p.line,p.ch+Z),1,void 0,{bracketRegex:I}),!v||!L)return{start:p,end:p};if((v=v.pos).line==(L=L.pos).line&&v.ch>L.ch||v.line>L.line){var ve=v;v=L,L=ve}return c?L.ch+=1:v.ch+=1,{start:v,end:L}}(o,l,L,I);else if({"'":!0,'"':!0,"`":!0}[L])F=function Wt(o,l,s,c){var I,F,Y,Z,p=lt(l),L=o.getLine(p.line).split(""),ve=L.indexOf(s);if(p.ch<ve?p.ch=ve:ve<p.ch&&L[p.ch]==s&&(F=p.ch,--p.ch),L[p.ch]!=s||F)for(Y=p.ch;Y>-1&&!I;Y--)L[Y]==s&&(I=Y+1);else I=p.ch+1;if(I&&!F)for(Y=I,Z=L.length;Y<Z&&!F;Y++)L[Y]==s&&(F=Y);return I&&F?(c&&(--I,++F),{start:new A(p.line,I),end:new A(p.line,F)}):{start:p,end:p}}(o,l,L,I);else if("W"===L)F=Pr(o,I,0,!0);else if("w"===L)F=Pr(o,I,0,!1);else if("p"===L)if(F=Or(o,l,s.repeat,0,I),s.linewise=!0,c.visualMode)c.visualLine||(c.visualLine=!0);else{var Y=c.inputState.operatorArgs;Y&&(Y.linewise=!0),F.end.line--}else{if("t"!==L)return null;F=function ar(o,l,s){var c=l;if(!k.findMatchingTag||!k.findEnclosingTag)return{start:c,end:c};var p=k.findMatchingTag(o,l)||k.findEnclosingTag(o,l);return p&&p.open&&p.close?s?{start:p.open.from,end:p.close.to}:{start:p.open.to,end:p.close.from}:{start:c,end:c}}(o,l,I)}return o.state.vim.visualMode?function en(o,l,s){var L,c=o.state.vim.sel,p=c.head,v=c.anchor;return Ye(s,l)&&(L=s,s=l,l=L),Ye(p,v)?(p=ot(l,p),v=tt(v,s)):(v=ot(l,v),-1==(p=bt(p=tt(p,s),0,-1)).ch&&p.line!=o.firstLine()&&(p=new A(p.line-1,ft(o,p.line-1)))),[v,p]}(o,F.start,F.end):[F.start,F.end]},repeatLastCharacterSearch:function(o,l,s){var c=$.lastCharacterSearch,p=s.repeat,v=s.forward===c.forward,L=(c.increment?1:0)*(v?-1:1);o.moveH(-L,"char"),s.inclusive=!!v;var I=Mr(o,p,v,c.selectedCharacter);return I?(I.ch+=L,I):(o.moveH(L,"char"),l)}};function ir(o,l){for(var s=[],c=0;c<l;c++)s.push(o);return s}var mr={change:function(o,l,s){var c,p,v=o.state.vim,L=s[0].anchor,I=s[0].head;if(v.visualMode)if(l.fullLine)I.ch=Number.MAX_VALUE,I.line--,o.setSelection(L,I),p=o.getSelection(),o.replaceSelection(""),c=L;else{p=o.getSelection();var xe=ir("",s.length);o.replaceSelections(xe),c=ot(s[0].head,s[0].anchor)}else{p=o.getRange(L,I);var F=v.lastEditInputState||{};if("moveByWords"==F.motion&&!fe(p)){var Y=/\s+$/.exec(p);Y&&F.motionArgs&&F.motionArgs.forward&&(I=bt(I,0,-Y[0].length),p=p.slice(0,-Y[0].length))}var Z=new A(L.line-1,Number.MAX_VALUE),ve=o.firstLine()==o.lastLine();I.line>o.lastLine()&&l.linewise&&!ve?o.replaceRange("",Z,I):o.replaceRange("",L,I),l.linewise&&(ve||(o.setCursor(Z),k.commands.newlineAndIndent(o)),L.ch=Number.MAX_VALUE),c=L}$.registerController.pushText(l.registerName,"change",p,l.linewise,s.length>1),dr.enterInsertMode(o,{head:c},o.state.vim)},delete:function(o,l,s){var c,p,v=o.state.vim;if(v.visualBlock){p=o.getSelection();var F=ir("",s.length);o.replaceSelections(F),c=ot(s[0].head,s[0].anchor)}else{var L=s[0].anchor,I=s[0].head;l.linewise&&I.line!=o.firstLine()&&L.line==o.lastLine()&&L.line==I.line-1&&(L.line==o.firstLine()?L.ch=0:L=new A(L.line-1,ft(o,L.line-1))),p=o.getRange(L,I),o.replaceRange("",L,I),c=L,l.linewise&&(c=It.moveToFirstNonWhiteSpaceCharacter(o,L))}return $.registerController.pushText(l.registerName,"delete",p,l.linewise,v.visualBlock),Gt(o,c)},indent:function(o,l,s){var c=o.state.vim,v=c.visualBlock?s[s.length-1].anchor.line:s[0].head.line,L=c.visualMode?l.repeat:1;l.linewise&&v--;for(var I=s[0].anchor.line;I<=v;I++)for(var F=0;F<L;F++)o.indentLine(I,l.indentRight);return It.moveToFirstNonWhiteSpaceCharacter(o,s[0].anchor)},indentAuto:function(o,l,s){return o.execCommand("indentAuto"),It.moveToFirstNonWhiteSpaceCharacter(o,s[0].anchor)},changeCase:function(o,l,s,c,p){for(var v=o.getSelections(),L=[],I=l.toLower,F=0;F<v.length;F++){var Y=v[F],Z="";if(!0===I)Z=Y.toLowerCase();else if(!1===I)Z=Y.toUpperCase();else for(var ve=0;ve<Y.length;ve++){var xe=Y.charAt(ve);Z+=ue(xe)?xe.toLowerCase():xe.toUpperCase()}L.push(Z)}return o.replaceSelections(L),l.shouldMoveCursor?p:!o.state.vim.visualMode&&l.linewise&&s[0].anchor.line+1==s[0].head.line?It.moveToFirstNonWhiteSpaceCharacter(o,c):l.linewise?c:ot(s[0].anchor,s[0].head)},yank:function(o,l,s,c){var p=o.state.vim,v=o.getSelection(),L=p.visualMode?ot(p.sel.anchor,p.sel.head,s[0].head,s[0].anchor):c;return $.registerController.pushText(l.registerName,"yank",v,l.linewise,p.visualBlock),L}};var dr={jumpListWalk:function(o,l,s){if(!s.visualMode){var c=l.repeat,L=$.jumpList.move(o,l.forward?c:-c),I=L?L.find():void 0;I=I||o.getCursor(),o.setCursor(I)}},scroll:function(o,l,s){if(!s.visualMode){var c=l.repeat||1,p=o.defaultTextHeight(),v=o.getScrollInfo().top,L=p*c,I=l.forward?v+L:v-L,F=lt(o.getCursor()),Y=o.charCoords(F,"local");if(l.forward)I>Y.top?(F.line+=(I-Y.top)/p,F.line=Math.ceil(F.line),o.setCursor(F),Y=o.charCoords(F,"local"),o.scrollTo(null,Y.top)):o.scrollTo(null,I);else{var Z=I+o.getScrollInfo().clientHeight;Z<Y.bottom?(F.line-=(Y.bottom-Z)/p,F.line=Math.floor(F.line),o.setCursor(F),Y=o.charCoords(F,"local"),o.scrollTo(null,Y.bottom-o.getScrollInfo().clientHeight)):o.scrollTo(null,I)}}},scrollToCursor:function(o,l){var s=o.getCursor().line,c=o.charCoords(new A(s,0),"local"),p=o.getScrollInfo().clientHeight,v=c.top,L=c.bottom-v;switch(l.position){case"center":v=v-p/2+L;break;case"bottom":v=v-p+L}o.scrollTo(null,v)},replayMacro:function(o,l,s){var c=l.selectedCharacter,p=l.repeat,v=$.macroModeState;for("@"==c?c=v.latestRegister:v.latestRegister=c;p--;)uo(o,s,v,c)},enterMacroRecordMode:function(o,l){var s=$.macroModeState,c=l.selectedCharacter;$.registerController.isValidRegister(c)&&s.enterMacroRecordMode(o,c)},toggleOverwrite:function(o){o.state.overwrite?(o.toggleOverwrite(!1),o.setOption("keyMap","vim-insert"),k.signal(o,"vim-mode-change",{mode:"insert"})):(o.toggleOverwrite(!0),o.setOption("keyMap","vim-replace"),k.signal(o,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(o,l,s){if(!o.getOption("readOnly")){s.insertMode=!0,s.insertModeRepeat=l&&l.repeat||1;var c=l?l.insertAt:null,p=s.sel,v=l.head||o.getCursor("head"),L=o.listSelections().length;if("eol"==c)v=new A(v.line,ft(o,v.line));else if("bol"==c)v=new A(v.line,0);else if("charAfter"==c)v=bt(v,0,1);else if("firstNonBlank"==c)v=It.moveToFirstNonWhiteSpaceCharacter(o,v);else if("startOfSelectedArea"==c){if(!s.visualMode)return;s.visualBlock?(v=new A(Math.min(p.head.line,p.anchor.line),Math.min(p.head.ch,p.anchor.ch)),L=Math.abs(p.head.line-p.anchor.line)+1):v=p.head.line<p.anchor.line?p.head:new A(p.anchor.line,0)}else if("endOfSelectedArea"==c){if(!s.visualMode)return;s.visualBlock?(v=new A(Math.min(p.head.line,p.anchor.line),Math.max(p.head.ch,p.anchor.ch)+1),L=Math.abs(p.head.line-p.anchor.line)+1):v=p.head.line>=p.anchor.line?bt(p.head,0,1):new A(p.anchor.line,0)}else if("inplace"==c){if(s.visualMode)return}else"lastEdit"==c&&(v=_r(o)||v);o.setOption("disableInput",!1),l&&l.replace?(o.toggleOverwrite(!0),o.setOption("keyMap","vim-replace"),k.signal(o,"vim-mode-change",{mode:"replace"})):(o.toggleOverwrite(!1),o.setOption("keyMap","vim-insert"),k.signal(o,"vim-mode-change",{mode:"insert"})),$.macroModeState.isPlaying||(o.on("change",ni),k.on(o.getInputField(),"keydown",Nn)),s.visualMode&&Dt(o),tr(o,v,L)}},toggleVisualMode:function(o,l,s){var v,c=l.repeat,p=o.getCursor();s.visualMode?s.visualLine^l.linewise||s.visualBlock^l.blockwise?(s.visualLine=!!l.linewise,s.visualBlock=!!l.blockwise,k.signal(o,"vim-mode-change",{mode:"visual",subMode:s.visualLine?"linewise":s.visualBlock?"blockwise":""}),Tt(o)):Dt(o):(s.visualMode=!0,s.visualLine=!!l.linewise,s.visualBlock=!!l.blockwise,v=Gt(o,new A(p.line,p.ch+c-1)),s.sel={anchor:p,head:v},k.signal(o,"vim-mode-change",{mode:"visual",subMode:s.visualLine?"linewise":s.visualBlock?"blockwise":""}),Tt(o),Ie(o,s,"<",ot(p,v)),Ie(o,s,">",tt(p,v)))},reselectLastSelection:function(o,l,s){var c=s.lastSelection;if(s.visualMode&&Br(o,s),c){var p=c.anchorMark.find(),v=c.headMark.find();if(!p||!v)return;s.sel={anchor:p,head:v},s.visualMode=!0,s.visualLine=c.visualLine,s.visualBlock=c.visualBlock,Tt(o),Ie(o,s,"<",ot(p,v)),Ie(o,s,">",tt(p,v)),k.signal(o,"vim-mode-change",{mode:"visual",subMode:s.visualLine?"linewise":s.visualBlock?"blockwise":""})}},joinLines:function(o,l,s){var c,p;if(s.visualMode){if(c=o.getCursor("anchor"),Ye(p=o.getCursor("head"),c)){var v=p;p=c,c=v}p.ch=ft(o,p.line)-1}else{var L=Math.max(l.repeat,2);c=o.getCursor(),p=Gt(o,new A(c.line+L-1,1/0))}for(var I=0,F=c.line;F<p.line;F++){I=ft(o,c.line),v=new A(c.line+1,ft(o,c.line+1));var Y=o.getRange(c,v);Y=l.keepSpaces?Y.replace(/\n\r?/g,""):Y.replace(/\n\s*/g," "),o.replaceRange(Y,c,v)}var Z=new A(c.line,I);s.visualMode&&Dt(o,!1),o.setCursor(Z)},newLineAndEnterInsertMode:function(o,l,s){s.insertMode=!0;var c=lt(o.getCursor());c.line!==o.firstLine()||l.after?(c.line=l.after?c.line:c.line-1,c.ch=ft(o,c.line),o.setCursor(c),(k.commands.newlineAndIndentContinueComment||k.commands.newlineAndIndent)(o)):(o.replaceRange("\n",new A(o.firstLine(),0)),o.setCursor(o.firstLine(),0)),this.enterInsertMode(o,{repeat:l.repeat},s)},paste:function(o,l,s){var c=lt(o.getCursor()),p=$.registerController.getRegister(l.registerName);if(v=p.toString()){if(l.matchIndent){var L=o.getOption("tabSize"),I=function(Mt){var rn=Mt.split("\t").length-1,kn=Mt.split(" ").length-1;return rn*L+1*kn},F=o.getLine(o.getCursor().line),Y=I(F.match(/^\s*/)[0]),Z=v.replace(/\n$/,""),ve=v!==Z,xe=I(v.match(/^\s*/)[0]),v=Z.replace(/^\s*/gm,function(Mt){var rn=Y+(I(Mt)-xe);if(rn<0)return"";if(o.getOption("indentWithTabs")){var kn=Math.floor(rn/L);return Array(kn+1).join("\t")}return Array(rn+1).join(" ")});v+=ve?"\n":""}l.repeat>1&&(v=Array(l.repeat+1).join(v));var Le,Je,pe=p.linewise,we=p.blockwise;if(we){v=v.split("\n"),pe&&v.pop();for(var Be=0;Be<v.length;Be++)v[Be]=""==v[Be]?" ":v[Be];c.ch+=l.after?1:0,c.ch=Math.min(ft(o,c.line),c.ch)}else pe?s.visualMode?v=s.visualLine?v.slice(0,-1):"\n"+v.slice(0,v.length-1)+"\n":l.after?(v="\n"+v.slice(0,v.length-1),c.ch=ft(o,c.line)):c.ch=0:c.ch+=l.after?1:0;if(s.visualMode){s.lastPastedText=v;var $e,Xe=function Nr(o,l){var v,L,I,s=l.lastSelection,p=function(){var v=o.getCursor(),L=o.getCursor(),I=s.visualBlock;if(I){L=new A(v.line+I.height,v.ch+I.width);for(var Z=[],ve=v.line;ve<L.line;ve++){var xe=new A(ve,v.ch),pe=new A(ve,L.ch);Z.push({anchor:xe,head:pe})}o.setSelections(Z)}else{var Be=s.anchorMark.find(),Le=s.headMark.find(),Je=Le.line-Be.line;L={line:L.line+Je,ch:Je?L.ch:Le.ch-Be.ch+L.ch},s.visualLine&&(v=new A(v.line,0),L=new A(L.line,ft(o,L.line))),o.setSelection(v,L)}return[v,L]};return l.visualMode?(v=o.listSelections(),I=v[v.length-1],[Ye((L=v[0]).anchor,L.head)?L.anchor:L.head,Ye(I.anchor,I.head)?I.head:I.anchor]):p()}(o,s),ut=Xe[0],Kt=Xe[1],At=o.getSelection(),Zt=o.listSelections(),ht=new Array(Zt.length).join("1").split("1");s.lastSelection&&($e=s.lastSelection.headMark.find()),$.registerController.unnamedRegister.setText(At),we?(o.replaceSelections(ht),Kt=new A(ut.line+v.length-1,ut.ch),o.setCursor(ut),Ar(o,Kt),o.replaceSelections(v),Le=ut):s.visualBlock?(o.replaceSelections(ht),o.setCursor(ut),o.replaceRange(v,ut,ut),Le=ut):(o.replaceRange(v,ut,Kt),Le=o.posFromIndex(o.indexFromPos(ut)+v.length-1)),$e&&(s.lastSelection.headMark=o.setBookmark($e)),pe&&(Le.ch=0)}else if(we){for(o.setCursor(c),Be=0;Be<v.length;Be++){var at=c.line+Be;at>o.lastLine()&&o.replaceRange("\n",new A(at,0)),ft(o,at)<c.ch&&Vr(o,at,c.ch)}o.setCursor(c),Ar(o,new A(c.line+v.length-1,c.ch)),o.replaceSelections(v),Le=c}else o.replaceRange(v,c),pe&&l.after?Le=new A(c.line+1,or(o.getLine(c.line+1))):pe&&!l.after?Le=new A(c.line,or(o.getLine(c.line))):!pe&&l.after?(Je=o.indexFromPos(c),Le=o.posFromIndex(Je+v.length-1)):(Je=o.indexFromPos(c),Le=o.posFromIndex(Je+v.length));s.visualMode&&Dt(o,!1),o.setCursor(Le)}},undo:function(o,l){o.operation(function(){We(o,k.commands.undo,l.repeat)(),o.setCursor(o.getCursor("anchor"))})},redo:function(o,l){We(o,k.commands.redo,l.repeat)()},setRegister:function(o,l,s){s.inputState.registerName=l.selectedCharacter},setMark:function(o,l,s){Ie(o,s,l.selectedCharacter,o.getCursor())},replace:function(o,l,s){var v,L,c=l.selectedCharacter,p=o.getCursor(),I=o.listSelections();if(s.visualMode)p=o.getCursor("start"),L=o.getCursor("end");else{var F=o.getLine(p.line);(v=p.ch+l.repeat)>F.length&&(v=F.length),L=new A(p.line,v)}if("\n"==c)s.visualMode||o.replaceRange("",p,L),(k.commands.newlineAndIndentContinueComment||k.commands.newlineAndIndent)(o);else{var Y=o.getRange(p,L);if(Y=Y.replace(/[^\n]/g,c),s.visualBlock){var Z=new Array(o.getOption("tabSize")+1).join(" ");Y=(Y=o.getSelection()).replace(/\t/g,Z).replace(/[^\n]/g,c).split("\n"),o.replaceSelections(Y)}else o.replaceRange(Y,p,L);s.visualMode?(p=Ye(I[0].anchor,I[0].head)?I[0].anchor:I[0].head,o.setCursor(p),Dt(o,!1)):o.setCursor(bt(L,0,-1))}},incrementNumberToken:function(o,l){for(var v,L,I,F,s=o.getCursor(),c=o.getLine(s.line),p=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi;null!==(v=p.exec(c))&&!(s.ch<(I=(L=v.index)+v[0].length)););if(l.backtrack||!(I<=s.ch)){if(!v)return;var Y=v[2]||v[4],Z=v[3]||v[5],ve=l.increase?1:-1,xe={"0b":2,0:8,"":10,"0x":16}[Y.toLowerCase()];F=(parseInt(v[1]+Z,xe)+ve*l.repeat).toString(xe);var we=Y?new Array(Z.length-F.length+1+v[1].length).join("0"):"";F="-"===F.charAt(0)?"-"+Y+we+F.substr(1):Y+we+F;var Be=new A(s.line,L),Le=new A(s.line,I);o.replaceRange(F,Be,Le),o.setCursor(new A(s.line,L+F.length-1))}},repeatLastEdit:function(o,l,s){if(s.lastEditInputState){var p=l.repeat;p&&l.repeatIsExplicit?s.lastEditInputState.repeatOverride=p:p=s.lastEditInputState.repeatOverride||p,oi(o,s,p,!1)}},indent:function(o,l){o.indentLine(o.getCursor().line,l.indentRight)},exitInsertMode:xn};function Gt(o,l){var s=o.state.vim,c=s.insertMode||s.visualMode,p=Math.min(Math.max(o.firstLine(),l.line),o.lastLine()),v=ft(o,p)-1+!!c,L=Math.min(Math.max(0,l.ch),v);return new A(p,L)}function $t(o){var l={};for(var s in o)o.hasOwnProperty(s)&&(l[s]=o[s]);return l}function bt(o,l,s){return"object"==typeof l&&(s=l.ch,l=l.line),new A(o.line+l,o.ch+s)}function it(o,l){if("<character>"==l.slice(-11)){var s=l.length-11,c=o.slice(0,s),p=l.slice(0,s);return c==p&&o.length>s?"full":0==p.indexOf(c)&&"partial"}return o==l?"full":0==l.indexOf(o)&&"partial"}function We(o,l,s){return function(){for(var c=0;c<s;c++)l(o)}}function lt(o){return new A(o.line,o.ch)}function pt(o,l){return o.ch==l.ch&&o.line==l.line}function Ye(o,l){return o.line<l.line||o.line==l.line&&o.ch<l.ch}function ot(o,l){return arguments.length>2&&(l=ot.apply(void 0,Array.prototype.slice.call(arguments,1))),Ye(o,l)?o:l}function tt(o,l){return arguments.length>2&&(l=tt.apply(void 0,Array.prototype.slice.call(arguments,1))),Ye(o,l)?l:o}function _t(o,l,s){var c=Ye(o,l),p=Ye(l,s);return c&&p}function ft(o,l){return o.getLine(l).length}function gt(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function Vr(o,l,s){var c=ft(o,l),p=new Array(s-c+1).join(" ");o.setCursor(new A(l,c)),o.replaceRange(p,o.getCursor())}function Ar(o,l){var s=[],c=o.listSelections(),p=lt(o.clipPos(l)),v=!pt(l,p),I=function $r(o,l,s){for(var c=0;c<o.length;c++){var p="head"!=s&&pt(o[c].anchor,l),v="anchor"!=s&&pt(o[c].head,l);if(p||v)return c}return-1}(c,o.getCursor("head")),F=pt(c[I].head,c[I].anchor),Y=c.length-1,Z=Y-I>I?Y:0,ve=c[Z].anchor,xe=Math.min(ve.line,p.line),pe=Math.max(ve.line,p.line),we=ve.ch,Be=p.ch,Le=c[Z].head.ch-we,Je=Be-we;Le>0&&Je<=0?(we++,v||Be--):Le<0&&Je>=0?(we--,F||Be++):Le<0&&-1==Je&&(we--,Be++);for(var $e=xe;$e<=pe;$e++){var Xe={anchor:new A($e,we),head:new A($e,Be)};s.push(Xe)}return o.setSelections(s),l.ch=Be,ve.ch=we,ve}function tr(o,l,s){for(var c=[],p=0;p<s;p++){var v=bt(l,p,0);c.push({anchor:v,head:v})}o.setSelections(c,0)}function Br(o,l){var s=l.sel.anchor,c=l.sel.head;l.lastPastedText&&(c=o.posFromIndex(o.indexFromPos(s)+l.lastPastedText.length),l.lastPastedText=null),l.lastSelection={anchorMark:o.setBookmark(s),headMark:o.setBookmark(c),anchor:lt(s),head:lt(c),visualMode:l.visualMode,visualLine:l.visualLine,visualBlock:l.visualBlock}}function Tt(o,l,p){var c=o.state.vim,v=Zr(o,l=l||c.sel,p=p||c.visualLine?"line":c.visualBlock?"block":"char");o.setSelections(v.ranges,v.primary)}function Zr(o,l,s,c){var p=lt(l.head),v=lt(l.anchor);if("char"==s){var L=c||Ye(l.head,l.anchor)?0:1,I=Ye(l.head,l.anchor)?1:0;return p=bt(l.head,0,L),{ranges:[{anchor:v=bt(l.anchor,0,I),head:p}],primary:0}}if("line"==s){if(Ye(l.head,l.anchor))p.ch=0,v.ch=ft(o,v.line);else{v.ch=0;var F=o.lastLine();p.line>F&&(p.line=F),p.ch=ft(o,p.line)}return{ranges:[{anchor:v,head:p}],primary:0}}if("block"==s){var Y=Math.min(v.line,p.line),Z=v.ch,ve=Math.max(v.line,p.line),xe=p.ch;Z<xe?xe+=1:Z+=1;for(var pe=ve-Y+1,we=p.line==Y?0:pe-1,Be=[],Le=0;Le<pe;Le++)Be.push({anchor:new A(Y+Le,Z),head:new A(Y+Le,xe)});return{ranges:Be,primary:we}}}function Dt(o,l){var s=o.state.vim;!1!==l&&o.setCursor(Gt(o,s.sel.head)),Br(o,s),s.visualMode=!1,s.visualLine=!1,s.visualBlock=!1,s.insertMode||k.signal(o,"vim-mode-change",{mode:"normal"})}function or(o){if(!o)return 0;var l=o.search(/\S/);return-1==l?o.length:l}function Pr(o,l,s,c,p){for(var v=function tn(o){var l=o.getCursor("head");return 1==o.getSelection().length&&(l=ot(l,o.getCursor("anchor"))),l}(o),L=o.getLine(v.line),I=v.ch,F=p?W[0]:m[0];!F(L.charAt(I));)if(++I>=L.length)return null;c?F=m[0]:(F=W[0])(L.charAt(I))||(F=W[1]);for(var Y=I,Z=I;F(L.charAt(Y))&&Y<L.length;)Y++;for(;F(L.charAt(Z))&&Z>=0;)Z--;if(Z++,l){for(var ve=Y;/\s/.test(L.charAt(Y))&&Y<L.length;)Y++;if(ve==Y){for(var xe=Z;/\s/.test(L.charAt(Z-1))&&Z>0;)Z--;Z||(Z=xe)}}return{start:new A(v.line,Z),end:new A(v.line,Y)}}function yr(o,l,s){pt(l,s)||$.jumpList.add(o,l,s)}function lr(o,l){$.lastCharacterSearch.increment=o,$.lastCharacterSearch.forward=l.forward,$.lastCharacterSearch.selectedCharacter=l.selectedCharacter}var Ur={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},pr={bracket:{isComplete:function(o){if(o.nextCh===o.symb){if(o.depth++,o.depth>=1)return!0}else o.nextCh===o.reverseSymb&&o.depth--;return!1}},section:{init:function(o){o.curMoveThrough=!0,o.symb=(o.forward?"]":"[")===o.symb?"{":"}"},isComplete:function(o){return 0===o.index&&o.nextCh===o.symb}},comment:{isComplete:function(o){var l="*"===o.lastCh&&"/"===o.nextCh;return o.lastCh=o.nextCh,l}},method:{init:function(o){o.symb="m"===o.symb?"{":"}",o.reverseSymb="{"===o.symb?"}":"{"},isComplete:function(o){return o.nextCh===o.symb}},preprocess:{init:function(o){o.index=0},isComplete:function(o){if("#"===o.nextCh){var l=o.lineText.match(/^#(\w+)/)[1];if("endif"===l){if(o.forward&&0===o.depth)return!0;o.depth++}else if("if"===l){if(!o.forward&&0===o.depth)return!0;o.depth--}if("else"===l&&0===o.depth)return!0}return!1}}};function Hr(o,l,s,c,p){var v=l.line,L=l.ch,I=o.getLine(v),F=s?1:-1,Y=c?m:W;if(p&&""==I){if(I=o.getLine(v+=F),!te(o,v))return null;L=s?0:I.length}for(;;){if(p&&""==I)return{from:0,to:0,line:v};for(var Z=F>0?I.length:-1,ve=Z,xe=Z;L!=Z;){for(var pe=!1,we=0;we<Y.length&&!pe;++we)if(Y[we](I.charAt(L))){for(ve=L;L!=Z&&Y[we](I.charAt(L));)L+=F;if(pe=ve!=(xe=L),ve==l.ch&&v==l.line&&xe==ve+F)continue;return{from:Math.min(ve,xe+1),to:Math.max(ve,xe),line:v}}pe||(L+=F)}if(!te(o,v+=F))return null;I=o.getLine(v),L=F>0?0:I.length}}function jt(o,l,s,c,p){var L=new A(l.line+s.repeat-1,1/0),I=o.clipPos(L);return I.ch--,p||(c.lastHPos=1/0,c.lastHSPos=o.charCoords(I,"div").left),L}function Mr(o,l,s,c){for(var L,p=o.getCursor(),v=p.ch,I=0;I<l;I++){if(-1==(L=rr(v,o.getLine(p.line),c,s,!0)))return null;v=L}return new A(o.getCursor().line,L)}function Ie(o,l,s,c){He(s,K)&&(l.marks[s]&&l.marks[s].clear(),l.marks[s]=o.setBookmark(c))}function rr(o,l,s,c,p){var v;return c?-1!=(v=l.indexOf(s,o+1))&&!p&&(v-=1):-1!=(v=l.lastIndexOf(s,o-1))&&!p&&(v+=1),v}function Or(o,l,s,c,p){var Y,v=l.line,L=o.firstLine(),I=o.lastLine(),Z=v;function ve(Le){return!o.getLine(Le)}function xe(Le,Je,$e){return $e?ve(Le)!=ve(Le+Je):!ve(Le)&&ve(Le+Je)}if(c){for(;L<=Z&&Z<=I&&s>0;)xe(Z,c)&&s--,Z+=c;return new A(Z,0)}var pe=o.state.vim;if(pe.visualLine&&xe(v,1,!0)){var we=pe.sel.anchor;xe(we.line,-1,!0)&&(!p||we.line!=v)&&(v+=1)}var Be=ve(v);for(Z=v;Z<=I&&s;Z++)xe(Z,1,!0)&&(!p||ve(Z)!=Be)&&s--;for(Y=new A(Z,0),Z>I&&!Be?Be=!0:p=!1,Z=v;Z>L&&(p&&ve(Z)!=Be&&Z!=v||!xe(Z,-1,!0));Z--);return{start:new A(Z,0),end:Y}}function ur(){}function be(o){var l=o.state.vim;return l.searchState_||(l.searchState_=new ur)}function Ce(o,l){var s=g(o,l)||[];if(!s.length)return[];var c=[];if(0===s[0]){for(var p=0;p<s.length;p++)"number"==typeof s[p]&&c.push(o.substring(s[p]+1,s[p+1]));return c}}function g(o,l){l||(l="/");for(var s=!1,c=[],p=0;p<o.length;p++){var v=o.charAt(p);!s&&v==l&&c.push(p),s=!s&&"\\"==v}return c}Ge("pcre",!0,"boolean"),ur.prototype={getQuery:function(){return $.query},setQuery:function(o){$.query=o},getOverlay:function(){return this.searchOverlay},setOverlay:function(o){this.searchOverlay=o},isReversed:function(){return $.isReversed},setReversed:function(o){$.isReversed=o},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(o){this.annotate=o}};var le={"\\n":"\n","\\r":"\r","\\t":"\t"};var ke={"\\/":"/","\\\\":"\\","\\n":"\n","\\r":"\r","\\t":"\t","\\&":"&"};function je(o,l,s){if($.registerController.getRegister("/").setText(o),o instanceof RegExp)return o;var v,L,p=function z(o){return g(o,"/")}(o);return p.length?(v=o.substring(0,p[0]),L=-1!=o.substring(p[0]).indexOf("i")):v=o,v?(b("pcre")||(v=function T(o){for(var c=!1,p=[],v=-1;v<o.length;v++){var L=o.charAt(v)||"",I=o.charAt(v+1)||"",F=I&&-1!="|(){".indexOf(I);c?(("\\"!==L||!F)&&p.push(L),c=!1):"\\"===L?(c=!0,I&&-1!="}".indexOf(I)&&(F=!0),(!F||"\\"===I)&&p.push(L)):(p.push(L),F&&"\\"!==I&&p.push("\\"))}return p.join("")}(v)),s&&(l=/^[^A-Z]*$/.test(v)),new RegExp(v,l||L?"im":"m")):null}function qe(o){"string"==typeof o&&(o=document.createElement(o));for(var l,s=1;s<arguments.length;s++)if(l=arguments[s])if("object"!=typeof l&&(l=document.createTextNode(l)),l.nodeType)o.appendChild(l);else for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&("$"===c[0]?o.style[c.slice(1)]=l[c]:o.setAttribute(c,l[c]));return o}function Ke(o,l){var s=qe("pre",{$color:"red",class:"cm-vim-message"},l);o.openNotification?o.openNotification(s,{bottom:!0,duration:5e3}):alert(s.innerText)}function yt(o,l){var s=function nt(o,l){return qe(document.createDocumentFragment(),qe("span",{$fontFamily:"monospace",$whiteSpace:"pre"},o,qe("input",{type:"text",autocorrect:"off",autocapitalize:"off",spellcheck:"false"})),l&&qe("span",{$color:"#888"},l))}(l.prefix,l.desc);if(o.openDialog)o.openDialog(s,l.onClose,{onKeyDown:l.onKeyDown,onKeyUp:l.onKeyUp,bottom:!0,selectValueOnOpen:!1,value:l.value});else{var c="";"string"!=typeof l.prefix&&l.prefix&&(c+=l.prefix.textContent),l.desc&&(c+=" "+l.desc),l.onClose(prompt(c,""))}}function xr(o,l,s,c){if(l){var p=be(o),v=je(l,!!s,!!c);if(v)return Vn(o,v),function Ct(o,l){if(o instanceof RegExp&&l instanceof RegExp){for(var s=["global","multiline","ignoreCase","source"],c=0;c<s.length;c++){var p=s[c];if(o[p]!==l[p])return!1}return!0}return!1}(v,p.getQuery())||p.setQuery(v),v}}var Jr=0;function Vn(o,l){clearTimeout(Jr),Jr=setTimeout(function(){if(o.state.vim){var s=be(o),c=s.getOverlay();(!c||l!=c.query)&&(c&&o.removeOverlay(c),c=function Fn(o){if("^"==o.source.charAt(0))var l=!0;return{token:function(s){if(!l||s.sol()){var c=s.match(o,!1);if(c)return 0==c[0].length?(s.next(),"searching"):s.sol()||(s.backUp(1),o.exec(s.next()+c[0]))?(s.match(o),"searching"):(s.next(),null);for(;!s.eol()&&(s.next(),!s.match(o,!1)););}else s.skipToEnd()},query:o}}(l),o.addOverlay(c),o.showMatchesOnScrollbar&&(s.getScrollbarAnnotate()&&s.getScrollbarAnnotate().clear(),s.setScrollbarAnnotate(o.showMatchesOnScrollbar(l))),s.setOverlay(c))}},50)}function $n(o,l,s,c){return void 0===c&&(c=1),o.operation(function(){for(var p=o.getCursor(),v=o.getSearchCursor(s,p),L=0;L<c;L++){var I=v.find(l);if(0==L&&I&&pt(v.from(),p)){var F=l?v.from():v.to();(I=v.find(l))&&!I[0]&&pt(v.from(),F)&&o.getLine(F.line).length==F.ch&&(I=v.find(l))}if(!I&&!(v=o.getSearchCursor(s,l?new A(o.lastLine()):new A(o.firstLine(),0))).find(l))return}return v.from()})}function On(o){var l=be(o);o.removeOverlay(be(o).getOverlay()),l.setOverlay(null),l.getScrollbarAnnotate()&&(l.getScrollbarAnnotate().clear(),l.setScrollbarAnnotate(null))}function lo(o,l,s){return"number"!=typeof o&&(o=o.line),l instanceof Array?He(o,l):"number"==typeof s?o>=l&&o<=s:o==l}function ei(o){var l=o.getScrollInfo(),p=o.coordsChar({left:0,top:6+l.top},"local"),L=o.coordsChar({left:0,top:l.clientHeight-10+l.top},"local");return{top:p.line,bottom:L.line}}function ti(o,l,s){if("'"==s||"`"==s)return $.jumpList.find(o,-1)||new A(0,0);if("."==s)return _r(o);var c=l.marks[s];return c&&c.find()}function _r(o){for(var l=o.doc.history.done,s=l.length;s--;)if(l[s].changes)return lt(l[s].changes[0].to)}var Ni=function(){this.buildCommandMap_()};Ni.prototype={processCommand:function(o,l,s){var c=this;o.operation(function(){o.curOp.isVimOp=!0,c._processCommand(o,l,s)})},_processCommand:function(o,l,s){var c=o.state.vim,p=$.registerController.getRegister(":"),v=p.toString();c.visualMode&&Dt(o);var L=new k.StringStream(l);p.setText(l);var F,Y,I=s||{};I.input=l;try{this.parseInput_(o,L,I)}catch(ve){throw Ke(o,ve.toString()),ve}if(I.commandName){if(F=this.matchCommand_(I.commandName)){if(Y=F.name,F.excludeFromCommandHistory&&p.setText(v),this.parseCommandArgs_(L,I,F),"exToKey"==F.type){for(var Z=0;Z<F.toKeys.length;Z++)Pe.handleKey(o,F.toKeys[Z],"mapping");return}if("exToEx"==F.type)return void this.processCommand(o,F.toInput)}}else void 0!==I.line&&(Y="move");if(Y)try{Bi[Y](o,I),(!F||!F.possiblyAsync)&&I.callback&&I.callback()}catch(ve){throw Ke(o,ve.toString()),ve}else Ke(o,'Not an editor command ":'+l+'"')},parseInput_:function(o,l,s){l.eatWhile(":"),l.eat("%")?(s.line=o.firstLine(),s.lineEnd=o.lastLine()):(s.line=this.parseLineSpec_(o,l),void 0!==s.line&&l.eat(",")&&(s.lineEnd=this.parseLineSpec_(o,l)));var c=l.match(/^(\w+|!!|@@|[!#&*<=>@~])/);return s.commandName=c?c[1]:l.match(/.*/)[0],s},parseLineSpec_:function(o,l){var s=l.match(/^(\d+)/);if(s)return parseInt(s[1],10)-1;switch(l.next()){case".":return this.parseLineSpecOffset_(l,o.getCursor().line);case"$":return this.parseLineSpecOffset_(l,o.lastLine());case"'":var c=l.next(),p=ti(o,o.state.vim,c);if(!p)throw new Error("Mark not set");return this.parseLineSpecOffset_(l,p.line);case"-":case"+":return l.backUp(1),this.parseLineSpecOffset_(l,o.getCursor().line);default:return void l.backUp(1)}},parseLineSpecOffset_:function(o,l){var s=o.match(/^([+-])?(\d+)/);if(s){var c=parseInt(s[2],10);"-"==s[1]?l-=c:l+=c}return l},parseCommandArgs_:function(o,l,s){if(!o.eol()){l.argString=o.match(/.*/)[0];var c=s.argDelimiter||/\s+/,p=gt(l.argString).split(c);p.length&&p[0]&&(l.args=p)}},matchCommand_:function(o){for(var l=o.length;l>0;l--){var s=o.substring(0,l);if(this.commandMap_[s]){var c=this.commandMap_[s];if(0===c.name.indexOf(o))return c}}return null},buildCommandMap_:function(){this.commandMap_={};for(var o=0;o<f.length;o++){var l=f[o];this.commandMap_[l.shortName||l.name]=l}},map:function(o,l,s){if(":"!=o&&":"==o.charAt(0)){if(s)throw Error("Mode not supported for ex mappings");var c=o.substring(1);this.commandMap_[c]=":"!=l&&":"==l.charAt(0)?{name:c,type:"exToEx",toInput:l.substring(1),user:!0}:{name:c,type:"exToKey",toKeys:l,user:!0}}else if(":"!=l&&":"==l.charAt(0)){var p={keys:o,type:"keyToEx",exArgs:{input:l.substring(1)}};s&&(p.context=s),q.unshift(p)}else p={keys:o,type:"keyToKey",toKeys:l},s&&(p.context=s),q.unshift(p)},unmap:function(o,l){if(":"!=o&&":"==o.charAt(0)){if(l)throw Error("Mode not supported for ex mappings");var s=o.substring(1);if(this.commandMap_[s]&&this.commandMap_[s].user)return delete this.commandMap_[s],!0}else for(var c=o,p=0;p<q.length;p++)if(c==q[p].keys&&q[p].context===l)return q.splice(p,1),!0}};var Bi={colorscheme:function(o,l){!l.args||l.args.length<1?Ke(o,o.getOption("theme")):o.setOption("theme",l.args[0])},map:function(o,l,s){var c=l.args;!c||c.length<2?o&&Ke(o,"Invalid mapping: "+l.input):kr.map(c[0],c[1],s)},imap:function(o,l){this.map(o,l,"insert")},nmap:function(o,l){this.map(o,l,"normal")},vmap:function(o,l){this.map(o,l,"visual")},unmap:function(o,l,s){var c=l.args;(!c||c.length<1||!kr.unmap(c[0],s))&&o&&Ke(o,"No such mapping: "+l.input)},move:function(o,l){Lt.processCommand(o,o.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:l.line+1})},set:function(o,l){var s=l.args,c=l.setCfg||{};if(!s||s.length<1)o&&Ke(o,"Invalid mapping: "+l.input);else{var p=s[0].split("="),v=p[0],L=p[1],I=!1;if("?"==v.charAt(v.length-1)){if(L)throw Error("Trailing characters: "+l.argString);v=v.substring(0,v.length-1),I=!0}void 0===L&&"no"==v.substring(0,2)&&(v=v.substring(2),L=!1);var F=_e[v]&&"boolean"==_e[v].type;if(F&&null==L&&(L=!0),!F&&void 0===L||I){var Y=b(v,o,c);Y instanceof Error?Ke(o,Y.message):Ke(o,!0===Y||!1===Y?" "+(Y?"":"no")+v:"  "+v+"="+Y)}else{var Z=N(v,L,o,c);Z instanceof Error&&Ke(o,Z.message)}}},setlocal:function(o,l){l.setCfg={scope:"local"},this.set(o,l)},setglobal:function(o,l){l.setCfg={scope:"global"},this.set(o,l)},registers:function(o,l){var s=l.args,c=$.registerController.registers,p="----------Registers----------\n\n";if(s){s=s.join("");for(var I=0;I<s.length;I++)v=s.charAt(I),$.registerController.isValidRegister(v)&&(p+='"'+v+"    "+(c[v]||new St).toString()+"\n")}else for(var v in c){var L=c[v].toString();L.length&&(p+='"'+v+"    "+L+"\n")}Ke(o,p)},sort:function(o,l){var s,c,p,v,L;var F=function I(){if(l.argString){var ht=new k.StringStream(l.argString);if(ht.eat("!")&&(s=!0),ht.eol())return;if(!ht.eatSpace())return"Invalid arguments";var at=ht.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!at&&!ht.eol())return"Invalid arguments";if(at[1]){c=-1!=at[1].indexOf("i"),p=-1!=at[1].indexOf("u");var Ut=-1!=at[1].indexOf("d")||-1!=at[1].indexOf("n")&&1,Yt=-1!=at[1].indexOf("x")&&1,Mt=-1!=at[1].indexOf("o")&&1;if(Ut+Yt+Mt>1)return"Invalid arguments";v=(Ut?"decimal":Yt&&"hex")||Mt&&"octal"}at[2]&&(L=new RegExp(at[2].substr(1,at[2].length-2),c?"i":""))}}();if(F)Ke(o,F+": "+l.argString);else{var Y=l.line||o.firstLine(),Z=l.lineEnd||l.line||o.lastLine();if(Y!=Z){var ve=new A(Y,0),xe=new A(Z,ft(o,Z)),pe=o.getRange(ve,xe).split("\n"),we=L||("decimal"==v?/(-?)([\d]+)/:"hex"==v?/(-?)(?:0x)?([0-9a-f]+)/i:"octal"==v?/([0-7]+)/:null),Be="decimal"==v?10:"hex"==v?16:"octal"==v?8:null,Le=[],Je=[];if(v||L)for(var $e=0;$e<pe.length;$e++){var Xe=L?pe[$e].match(L):null;Xe&&""!=Xe[0]?Le.push(Xe):!L&&we.exec(pe[$e])?Le.push(pe[$e]):Je.push(pe[$e])}else Je=pe;if(Le.sort(L?function Kt(ht,at){var Ut;return s&&(Ut=ht,ht=at,at=Ut),c&&(ht[0]=ht[0].toLowerCase(),at[0]=at[0].toLowerCase()),ht[0]<at[0]?-1:1}:ut),L)for($e=0;$e<Le.length;$e++)Le[$e]=Le[$e].input;else v||Je.sort(ut);if(pe=s?Le.concat(Je):Je.concat(Le),p){var Zt,At=pe;for(pe=[],$e=0;$e<At.length;$e++)At[$e]!=Zt&&pe.push(At[$e]),Zt=At[$e]}o.replaceRange(pe.join("\n"),ve,xe)}}function ut(ht,at){var Ut;s&&(Ut=ht,ht=at,at=Ut),c&&(ht=ht.toLowerCase(),at=at.toLowerCase());var Yt=v&&we.exec(ht),Mt=v&&we.exec(at);return Yt?(Yt=parseInt((Yt[1]+Yt[2]).toLowerCase(),Be))-(Mt=parseInt((Mt[1]+Mt[2]).toLowerCase(),Be)):ht<at?-1:1}},vglobal:function(o,l){this.global(o,l)},global:function(o,l){var s=l.argString;if(s){var F,c="v"===l.commandName[0],p=void 0!==l.line?l.line:o.firstLine(),v=l.lineEnd||l.line||o.lastLine(),L=function S(o){return Ce(o,"/")}(s),I=s;if(L.length&&(I=L[0],F=L.slice(1,L.length).join("/")),I)try{xr(o,I,!0,!0)}catch{return void Ke(o,"Invalid regex: "+I)}for(var Y=be(o).getQuery(),Z=[],ve=p;ve<=v;ve++){var xe=o.getLineHandle(ve);Y.test(xe.text)!==c&&Z.push(F?xe:xe.text)}if(F){var we=0,Be=function(){if(we<Z.length){var Le=Z[we++],Je=o.getLineNumber(Le);if(null==Je)return void Be();kr.processCommand(o,Je+1+F,{callback:Be})}};Be()}else Ke(o,Z.join("\n"))}else Ke(o,"Regular Expression missing from global")},substitute:function(o,l){if(!o.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var p,L,I,F,s=l.argString,c=s?Ce(s,s[0]):[],v="",Y=!1,Z=!1;if(c.length)p=c[0],b("pcre")&&""!==p&&(p=new RegExp(p).source),void 0!==(v=c[1])&&(v=b("pcre")?function Qe(o){for(var l=new k.StringStream(o),s=[];!l.eol();){for(;l.peek()&&"\\"!=l.peek();)s.push(l.next());var c=!1;for(var p in ke)if(l.match(p,!0)){c=!0,s.push(ke[p]);break}c||s.push(l.next())}return s.join("")}(v.replace(/([^\\])&/g,"$1$$&")):function ye(o){for(var l=!1,s=[],c=-1;c<o.length;c++){var p=o.charAt(c)||"",v=o.charAt(c+1)||"";le[p+v]?(s.push(le[p+v]),c++):l?(s.push(p),l=!1):"\\"===p?(l=!0,x(v)||"$"===v?s.push("$"):"/"!==v&&"\\"!==v&&s.push("\\")):("$"===p&&s.push("$"),s.push(p),"/"===v&&s.push("\\"))}return s.join("")}(v),$.lastSubstituteReplacePart=v),L=c[2]?c[2].split(" "):[];else if(s&&s.length)return void Ke(o,"Substitutions should be of the form :s/pattern/replace/");if(L&&(I=L[0],F=parseInt(L[1]),I&&(-1!=I.indexOf("c")&&(Y=!0),-1!=I.indexOf("g")&&(Z=!0),p=b("pcre")?p+"/"+I:p.replace(/\//g,"\\/")+"/"+I)),p)try{xr(o,p,!0,!0)}catch{return void Ke(o,"Invalid regex: "+p)}if(void 0!==(v=v||$.lastSubstituteReplacePart)){var xe=be(o).getQuery(),pe=void 0!==l.line?l.line:o.getCursor().line,we=l.lineEnd||pe;pe==o.firstLine()&&we==o.lastLine()&&(we=1/0),F&&(we=(pe=we)+F-1);var Be=Gt(o,new A(pe,0)),Le=o.getSearchCursor(xe,Be);!function yn(o,l,s,c,p,v,L,I,F){o.state.vim.exMode=!0;var Z,ve,xe,Y=!1;function pe(){o.operation(function(){for(;!Y;)we(),Le();Je()})}function we(){var ut=o.getRange(v.from(),v.to()).replace(L,I),Kt=v.to().line;v.replace(ut),ve=v.to().line,p+=ve-Kt,xe=ve<Kt}function Be(){var Xe=Z&&lt(v.to()),ut=v.findNext();return ut&&!ut[0]&&Xe&&pt(v.from(),Xe)&&(ut=v.findNext()),ut}function Le(){for(;Be()&&lo(v.from(),c,p);)if(s||v.from().line!=ve||xe)return o.scrollIntoView(v.from(),30),o.setSelection(v.from(),v.to()),Z=v.from(),void(Y=!1);Y=!0}function Je(Xe){if(Xe&&Xe(),o.focus(),Z){o.setCursor(Z);var ut=o.state.vim;ut.exMode=!1,ut.lastHPos=ut.lastHSPos=Z.ch}F&&F()}function $e(Xe,ut,Kt){switch(k.e_stop(Xe),k.keyName(Xe)){case"Y":we(),Le();break;case"N":Le();break;case"A":var Zt=F;F=void 0,o.operation(pe),F=Zt;break;case"L":we();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":Je(Kt)}return Y&&Je(Kt),!0}if(Le(),!Y)return l?void yt(o,{prefix:qe("span","replace with ",qe("strong",I)," (y/n/a/q/l)"),onKeyDown:$e}):(pe(),void(F&&F()));Ke(o,"No matches for "+L.source)}(o,Y,Z,pe,we,Le,xe,v,l.callback)}else Ke(o,"No previous substitute regular expression")},redo:k.commands.redo,undo:k.commands.undo,write:function(o){k.commands.save?k.commands.save(o):o.save&&o.save()},nohlsearch:function(o){On(o)},yank:function(o){var l=lt(o.getCursor()),c=o.getLine(l.line);$.registerController.pushText("0","yank",c,!0,!0)},delmarks:function(o,l){if(l.argString&&gt(l.argString))for(var s=o.state.vim,c=new k.StringStream(gt(l.argString));!c.eol();){c.eatSpace();var p=c.pos;if(!c.match(/[a-zA-Z]/,!1))return void Ke(o,"Invalid argument: "+l.argString.substring(p));var v=c.next();if(c.match("-",!0)){if(!c.match(/[a-zA-Z]/,!1))return void Ke(o,"Invalid argument: "+l.argString.substring(p));var L=v,I=c.next();if(!(Q(L)&&Q(I)||ue(L)&&ue(I)))return void Ke(o,"Invalid argument: "+L+"-");var F=L.charCodeAt(0),Y=I.charCodeAt(0);if(F>=Y)return void Ke(o,"Invalid argument: "+l.argString.substring(p));for(var Z=0;Z<=Y-F;Z++){var ve=String.fromCharCode(F+Z);delete s.marks[ve]}}else delete s.marks[v]}else Ke(o,"Argument required")}},kr=new Ni;function xn(o){var l=o.state.vim,s=$.macroModeState,c=$.registerController.getRegister("."),p=s.isPlaying,v=s.lastInsertModeChanges;p||(o.off("change",ni),k.off(o.getInputField(),"keydown",Nn)),!p&&l.insertModeRepeat>1&&(oi(o,l,l.insertModeRepeat-1,!0),l.lastEditInputState.repeatOverride=l.insertModeRepeat),delete l.insertModeRepeat,l.insertMode=!1,o.setCursor(o.getCursor().line,o.getCursor().ch-1),o.setOption("keyMap","vim"),o.setOption("disableInput",!0),o.toggleOverwrite(!1),c.setText(v.changes.join("")),k.signal(o,"vim-mode-change",{mode:"normal"}),s.isRecording&&function Ri(o){if(!o.isPlaying){var s=$.registerController.getRegister(o.latestRegister);s&&s.pushInsertModeChanges&&s.pushInsertModeChanges(o.lastInsertModeChanges)}}(s)}function Pi(o){q.unshift(o)}function uo(o,l,s,c){var p=$.registerController.getRegister(c);if(":"==c)return p.keyBuffer[0]&&kr.processCommand(o,p.keyBuffer[0]),void(s.isPlaying=!1);var v=p.keyBuffer,L=0;s.isPlaying=!0,s.replaySearchQueries=p.searchQueries.slice(0);for(var I=0;I<v.length;I++)for(var Y,Z,F=v[I];F;)if(Y=/<\w+-.+?>|<\w+>|./.exec(F),F=F.substring(Y.index+(Z=Y[0]).length),Pe.handleKey(o,Z,"macro"),l.insertMode){var ve=p.insertModeChanges[L++].changes;$.macroModeState.lastInsertModeChanges.changes=ve,ai(o,ve,1),xn(o)}s.isPlaying=!1}function ni(o,l){var s=$.macroModeState,c=s.lastInsertModeChanges;if(!s.isPlaying)for(;l;){if(c.expectCursorActivityForChange=!0,c.ignoreCount>1)c.ignoreCount--;else if("+input"==l.origin||"paste"==l.origin||void 0===l.origin){var p=o.listSelections().length;p>1&&(c.ignoreCount=p);var v=l.text.join("\n");c.maybeReset&&(c.changes=[],c.maybeReset=!1),v&&(o.state.overwrite&&!/\n/.test(v)?c.changes.push([v]):c.changes.push(v))}l=l.next}}function ii(o){var l=o.state.vim;if(l.insertMode){var s=$.macroModeState;if(s.isPlaying)return;var c=s.lastInsertModeChanges;c.expectCursorActivityForChange?c.expectCursorActivityForChange=!1:c.maybeReset=!0}else o.curOp.isVimOp||function In(o,l){var s=o.getCursor("anchor"),c=o.getCursor("head");if(l.visualMode&&!o.somethingSelected()?Dt(o,!1):!l.visualMode&&!l.insertMode&&o.somethingSelected()&&(l.visualMode=!0,l.visualLine=!1,k.signal(o,"vim-mode-change",{mode:"visual"})),l.visualMode){var p=Ye(c,s)?0:-1,v=Ye(c,s)?-1:0;c=bt(c,0,p),s=bt(s,0,v),l.sel={anchor:s,head:c},Ie(o,l,"<",ot(c,s)),Ie(o,l,">",tt(c,s))}else l.insertMode||(l.lastHPos=o.getCursor().ch)}(o,l)}function sn(o){this.keyName=o}function Nn(o){var s=$.macroModeState.lastInsertModeChanges,c=k.keyName(o);c&&(-1!=c.indexOf("Delete")||-1!=c.indexOf("Backspace"))&&k.lookupKey(c,"vim-insert",function p(){return s.maybeReset&&(s.changes=[],s.maybeReset=!1),s.changes.push(new sn(c)),!0})}function oi(o,l,s,c){var p=$.macroModeState;p.isPlaying=!0;var v=!!l.lastEditActionCommand,L=l.inputState;function I(){v?Lt.processAction(o,l,l.lastEditActionCommand):Lt.evalInput(o,l)}function F(Z){p.lastInsertModeChanges.changes.length>0&&ai(o,p.lastInsertModeChanges.changes,Z=l.lastEditActionCommand?Z:1)}if(l.inputState=l.lastEditInputState,v&&l.lastEditActionCommand.interlaceInsertRepeat)for(var Y=0;Y<s;Y++)I(),F(1);else c||I(),F(s);l.inputState=L,l.insertMode&&!c&&xn(o),p.isPlaying=!1}function ai(o,l,s){function c(ve){return"string"==typeof ve?k.commands[ve](o):ve(o),!0}var p=o.getCursor("head"),v=$.macroModeState.lastInsertModeChanges.visualBlock;v&&(tr(o,p,v+1),s=o.listSelections().length,o.setCursor(p));for(var L=0;L<s;L++){v&&o.setCursor(bt(p,L,0));for(var I=0;I<l.length;I++){var F=l[I];if(F instanceof sn)k.lookupKey(F.keyName,"vim-insert",c);else if("string"==typeof F)o.replaceSelection(F);else{var Y=o.getCursor(),Z=bt(Y,0,F[0].length);o.replaceRange(F[0],Y,Z),o.setCursor(Z)}}}v&&o.setCursor(bt(p,0,1))}return k.keyMap.vim={attach:U,detach:j,call:se},Ge("insertModeEscKeysTimeout",200,"number"),k.keyMap["vim-insert"]={fallthrough:["default"],attach:U,detach:j,call:se},k.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:U,detach:j,call:se},Ee(),Pe}()}(de(3867),de(5626),de(6246),de(2491))},3867:function(xt){xt.exports=function(){"use strict";var et=navigator.userAgent,de=navigator.platform,k=/gecko\/\d/i.test(et),A=/MSIE \d/.test(et),_=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(et),q=/Edge\/(\d+)/.exec(et),O=A||_||q,f=O&&(A?document.documentMode||6:+(q||_)[1]),H=!q&&/WebKit\//.test(et),oe=H&&/Qt\/\d+\.\d+/.test(et),V=!q&&/Chrome\//.test(et),j=/Opera\//.test(et),U=/Apple Computer/.test(navigator.vendor),se=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(et),ce=/PhantomJS/.test(et),Me=U&&(/Mobile\/\w+/.test(et)||navigator.maxTouchPoints>2),re=/Android/.test(et),ae=Me||re||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(et),M=Me||/Mac/.test(de),W=/\bCrOS\b/.test(et),m=/win/i.test(de),w=j&&et.match(/Version\/(\d*\.\d*)/);w&&(w=Number(w[1])),w&&w>=15&&(j=!1,H=!0);var D=M&&(oe||j&&(null==w||w<12.11)),R=k||O&&f>=9;function C(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var ge,K=function(e,t){var n=e.className,r=C(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function ne(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function G(e,t){return ne(e).appendChild(t)}function te(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var a=0;a<t.length;++a)i.appendChild(t[a]);return i}function Q(e,t,n,r){var i=te(e,t,n,r);return i.setAttribute("role","presentation"),i}function x(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function ue(){var e;try{e=document.activeElement}catch{e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function fe(e,t){var n=e.className;C(t).test(n)||(e.className+=(n?" ":"")+t)}function Ae(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!C(n[r]).test(t)&&(t+=" "+n[r]);return t}ge=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch{return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var He=function(e){e.select()};function _e(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Ge(e,t,n){for(var r in t||(t={}),e)e.hasOwnProperty(r)&&(!1!==n||!t.hasOwnProperty(r))&&(t[r]=e[r]);return t}function N(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var a=r||0,u=i||0;;){var h=e.indexOf("\t",a);if(h<0||h>=t)return u+(t-a);u+=h-a,u+=n-u%n,a=h+1}}Me?He=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:O&&(He=function(e){try{e.select()}catch{}});var b=function(){this.id=null,this.f=null,this.time=0,this.handler=_e(this.onTimeout,this)};function Te(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}b.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},b.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var J={toString:function(){return"CodeMirror.Pass"}},ie={scroll:!1},$={origin:"*mouse"},Ee={origin:"+move"};function Ve(e,t,n){for(var r=0,i=0;;){var a=e.indexOf("\t",r);-1==a&&(a=e.length);var u=a-r;if(a==e.length||i+u>=t)return r+Math.min(u,t-i);if(i+=a-r,r=a+1,(i+=n-i%n)>=t)return r}}var Pe=[""];function Ue(e){for(;Pe.length<=e;)Pe.push(Re(Pe)+" ");return Pe[e]}function Re(e){return e[e.length-1]}function St(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Ot(){}function kt(e,t){var n;return Object.create?n=Object.create(e):(Ot.prototype=e,n=new Ot),t&&Ge(t,n),n}var Lt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function It(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Lt.test(e))}function hr(e,t){return t?!!(t.source.indexOf("\\w")>-1&&It(e))||t.test(e):It(e)}function ir(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var mr=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Wr(e){return e.charCodeAt(0)>=768&&mr.test(e)}function dr(e,t,n){for(;(n<0?t>0:t<e.length)&&Wr(e.charAt(t));)t+=n;return t}function Kr(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,a=r<0?Math.ceil(i):Math.floor(i);if(a==t)return e(a)?t:n;e(a)?n=a:t=a+r}}var $t=null;function bt(e,t,n){var r;$t=null;for(var i=0;i<e.length;++i){var a=e[i];if(a.from<t&&a.to>t)return i;a.to==t&&(a.from!=a.to&&"before"==n?r=i:$t=i),a.from==t&&(a.from!=a.to&&"before"!=n?r=i:$t=i)}return r??$t}var er=function(){function n(y){return y<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(y):1424<=y&&y<=1524?"R":1536<=y&&y<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(y-1536):1774<=y&&y<=2220?"r":8192<=y&&y<=8203?"w":8204==y?"b":"L"}var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,a=/[LRr]/,u=/[Lb1n]/,h=/[1n]/;function d(y,E,B){this.level=y,this.from=E,this.to=B}return function(y,E){var B="ltr"==E?"L":"R";if(0==y.length||"ltr"==E&&!r.test(y))return!1;for(var ee=y.length,X=[],he=0;he<ee;++he)X.push(n(y.charCodeAt(he)));for(var me=0,Se=B;me<ee;++me){var De=X[me];"m"==De?X[me]=Se:Se=De}for(var Oe=0,Fe=B;Oe<ee;++Oe){var Ne=X[Oe];"1"==Ne&&"r"==Fe?X[Oe]="n":a.test(Ne)&&(Fe=Ne,"r"==Ne&&(X[Oe]="R"))}for(var Ze=1,ze=X[0];Ze<ee-1;++Ze){var rt=X[Ze];"+"==rt&&"1"==ze&&"1"==X[Ze+1]?X[Ze]="1":","==rt&&ze==X[Ze+1]&&("1"==ze||"n"==ze)&&(X[Ze]=ze),ze=rt}for(var mt=0;mt<ee;++mt){var qt=X[mt];if(","==qt)X[mt]="N";else if("%"==qt){var Et=void 0;for(Et=mt+1;Et<ee&&"%"==X[Et];++Et);for(var Dr=mt&&"!"==X[mt-1]||Et<ee&&"1"==X[Et]?"1":"N",wr=mt;wr<Et;++wr)X[wr]=Dr;mt=Et-1}}for(var Pt=0,Sr=B;Pt<ee;++Pt){var nr=X[Pt];"L"==Sr&&"1"==nr?X[Pt]="L":a.test(nr)&&(Sr=nr)}for(var zt=0;zt<ee;++zt)if(i.test(X[zt])){var Rt=void 0;for(Rt=zt+1;Rt<ee&&i.test(X[Rt]);++Rt);for(var Ft="L"==(zt?X[zt-1]:B),Xn=Ft==("L"==(Rt<ee?X[Rt]:B))?Ft?"L":"R":B,gn=zt;gn<Rt;++gn)X[gn]=Xn;zt=Rt-1}for(var qr,cr=[],Vt=0;Vt<ee;)if(u.test(X[Vt])){var Qo=Vt;for(++Vt;Vt<ee&&u.test(X[Vt]);++Vt);cr.push(new d(0,Qo,Vt))}else{var ln=Vt,En=cr.length,Dn="rtl"==E?1:0;for(++Vt;Vt<ee&&"L"!=X[Vt];++Vt);for(var gr=ln;gr<Vt;)if(h.test(X[gr])){ln<gr&&(cr.splice(En,0,new d(1,ln,gr)),En+=Dn);var qn=gr;for(++gr;gr<Vt&&h.test(X[gr]);++gr);cr.splice(En,0,new d(2,qn,gr)),En+=Dn,ln=gr}else++gr;ln<Vt&&cr.splice(En,0,new d(1,ln,Vt))}return"ltr"==E&&(1==cr[0].level&&(qr=y.match(/^\s+/))&&(cr[0].from=qr[0].length,cr.unshift(new d(0,0,qr[0].length))),1==Re(cr).level&&(qr=y.match(/\s+$/))&&(Re(cr).to-=qr[0].length,cr.push(new d(0,ee-qr[0].length,ee)))),"rtl"==E?cr.reverse():cr}}();function it(e,t){var n=e.order;return null==n&&(n=e.order=er(e.text,t)),n}var Ht=[],We=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||Ht).concat(n)}};function lt(e,t){return e._handlers&&e._handlers[t]||Ht}function pt(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var a=Te(i,n);a>-1&&(r[t]=i.slice(0,a).concat(i.slice(a+1)))}}}function Ye(e,t){var n=lt(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function ot(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Ye(e,n||t.type,e,t),Vr(t)||t.codemirrorIgnore}function tt(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==Te(n,t[r])&&n.push(t[r])}function _t(e,t){return lt(e,t).length>0}function ft(e){e.prototype.on=function(t,n){We(this,t,n)},e.prototype.off=function(t,n){pt(this,t,n)}}function gt(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Tr(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Vr(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Ar(e){gt(e),Tr(e)}function tr(e){return e.target||e.srcElement}function $r(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),M&&e.ctrlKey&&1==t&&(t=3),t}var Br,Tt,Nr=function(){if(O&&f<9)return!1;var e=te("div");return"draggable"in e||"dragDrop"in e}();function en(e){if(null==Br){var t=te("span","\u200b");G(e,te("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Br=t.offsetWidth<=1&&t.offsetHeight>2&&!(O&&f<8))}var n=Br?te("span","\u200b"):te("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Zr(e){if(null!=Tt)return Tt;var t=G(e,document.createTextNode("A\u062eA")),n=ge(t,0,1).getBoundingClientRect(),r=ge(t,1,2).getBoundingClientRect();return ne(e),!(!n||n.left==n.right)&&(Tt=r.right-n.right<3)}var e,tn=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var a=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),u=a.indexOf("\r");-1!=u?(n.push(a.slice(0,u)),t+=u+1):(n.push(a),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Dt=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},mn="oncopy"in(e=te("div"))||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy),Yr=null;var Pr={},ar={};function yr(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Pr[e]=t}function Ur(e){if("string"==typeof e&&ar.hasOwnProperty(e))e=ar[e];else if(e&&"string"==typeof e.name&&ar.hasOwnProperty(e.name)){var t=ar[e.name];"string"==typeof t&&(t={name:t}),(e=kt(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Ur("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Ur("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function pr(e,t){t=Ur(t);var n=Pr[t.name];if(!n)return pr(e,"text/plain");var r=n(e,t);if(Rr.hasOwnProperty(t.name)){var i=Rr[t.name];for(var a in i)i.hasOwnProperty(a)&&(r.hasOwnProperty(a)&&(r["_"+a]=r[a]),r[a]=i[a])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var u in t.modeProps)r[u]=t.modeProps[u];return r}var Rr={};function Hr(e,t){Ge(t,Rr.hasOwnProperty(e)?Rr[e]:Rr[e]={})}function Bt(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function jt(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Mr(e,t,n){return!e.startState||e.startState(t,n)}var ct=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Ie(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],a=i.chunkSize();if(t<a){n=i;break}t-=a}return n.lines[t]}function rr(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(a){var u=a.text;i==n.line&&(u=u.slice(0,n.ch)),i==t.line&&(u=u.slice(t.ch)),r.push(u),++i}),r}function Or(e,t,n){var r=[];return e.iter(t,n,function(i){r.push(i.text)}),r}function sr(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function st(e){if(null==e.parent)return null;for(var t=e.parent,n=Te(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function Wt(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],a=i.height;if(t<a){e=i;continue e}t-=a,n+=i.chunkSize()}return n}while(!e.lines);for(var u=0;u<e.lines.length;++u){var d=e.lines[u].height;if(t<d)break;t-=d}return n+u}function ur(e,t){return t>=e.first&&t<e.first+e.size}function be(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function S(e,t,n){if(void 0===n&&(n=null),!(this instanceof S))return new S(e,t,n);this.line=e,this.ch=t,this.sticky=n}function z(e,t){return e.line-t.line||e.ch-t.ch}function Ce(e,t){return e.sticky==t.sticky&&0==z(e,t)}function g(e){return S(e.line,e.ch)}function T(e,t){return z(e,t)<0?t:e}function le(e,t){return z(e,t)<0?e:t}function ye(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ke(e,t){if(t.line<e.first)return S(e.first,0);var n=e.first+e.size-1;return t.line>n?S(n,Ie(e,n).text.length):function Qe(e,t){var n=e.ch;return null==n||n>t?S(e.line,t):n<0?S(e.line,0):e}(t,Ie(e,t.line).text.length)}function je(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=ke(e,t[r]);return n}ct.prototype.eol=function(){return this.pos>=this.string.length},ct.prototype.sol=function(){return this.pos==this.lineStart},ct.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ct.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ct.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},ct.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},ct.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},ct.prototype.skipToEnd=function(){this.pos=this.string.length},ct.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},ct.prototype.backUp=function(e){this.pos-=e},ct.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=N(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?N(this.string,this.lineStart,this.tabSize):0)},ct.prototype.indentation=function(){return N(this.string,null,this.tabSize)-(this.lineStart?N(this.string,this.lineStart,this.tabSize):0)},ct.prototype.match=function(e,t,n){if("string"!=typeof e){var a=this.string.slice(this.pos).match(e);return a&&a.index>0?null:(a&&!1!==t&&(this.pos+=a[0].length),a)}var r=function(u){return n?u.toLowerCase():u};if(r(this.string.substr(this.pos,e.length))==r(e))return!1!==t&&(this.pos+=e.length),!0},ct.prototype.current=function(){return this.string.slice(this.start,this.pos)},ct.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},ct.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},ct.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var qe=function(e,t){this.state=e,this.lookAhead=t},Ke=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function nt(e,t,n,r){var i=[e.state.modeGen],a={};On(e,t.text,e.doc.mode,n,function(y,E){return i.push(y,E)},a,r);for(var u=n.state,h=function(y){n.baseTokens=i;var E=e.state.overlays[y],B=1,ee=0;n.state=!0,On(e,t.text,E.mode,n,function(X,he){for(var me=B;ee<X;){var Se=i[B];Se>X&&i.splice(B,1,X,i[B+1],Se),B+=2,ee=Math.min(X,Se)}if(he)if(E.opaque)i.splice(me,B-me,X,"overlay "+he),B=me+2;else for(;me<B;me+=2){var De=i[me+1];i[me+1]=(De?De+" ":"")+"overlay "+he}},a),n.state=u,n.baseTokens=null,n.baseTokenPos=1},d=0;d<e.state.overlays.length;++d)h(d);return{styles:i,classes:a.bgClass||a.textClass?a:null}}function yt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=Ct(e,st(t)),i=t.text.length>e.options.maxHighlightLength&&Bt(e.doc.mode,r.state),a=nt(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=a.styles,a.classes?t.styleClasses=a.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Ct(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new Ke(r,!0,t);var a=function lo(e,t,n){for(var r,i,a=e.doc,u=n?-1:t-(e.doc.mode.innerMode?1e3:100),h=t;h>u;--h){if(h<=a.first)return a.first;var d=Ie(a,h-1),y=d.stateAfter;if(y&&(!n||h+(y instanceof qe?y.lookAhead:0)<=a.modeFrontier))return h;var E=N(d.text,null,e.options.tabSize);(null==i||r>E)&&(i=h-1,r=E)}return i}(e,t,n),u=a>r.first&&Ie(r,a-1).stateAfter,h=u?Ke.fromSaved(r,u,a):new Ke(r,Mr(r.mode),a);return r.iter(a,t,function(d){xr(e,d.text,h);var y=h.line;d.stateAfter=y==t-1||y%5==0||y>=i.viewFrom&&y<i.viewTo?h.save():null,h.nextLine()}),n&&(r.modeFrontier=h.line),h}function xr(e,t,n,r){var i=e.doc.mode,a=new ct(t,e.options.tabSize,n);for(a.start=a.pos=r||0,""==t&&Fn(i,n.state);!a.eol();)Jr(i,a,n.state),a.start=a.pos}function Fn(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=jt(e,t);if(n.mode.blankLine)return n.mode.blankLine(n.state)}}function Jr(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=jt(e,n).mode);var a=e.token(t,n);if(t.pos>t.start)return a}throw new Error("Mode "+e.name+" failed to advance stream.")}Ke.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Ke.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Ke.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Ke.fromSaved=function(e,t,n){return t instanceof qe?new Ke(e,Bt(e.mode,t.state),n,t.lookAhead):new Ke(e,Bt(e.mode,t),n)},Ke.prototype.save=function(e){var t=!1!==e?Bt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new qe(t,this.maxLookAhead):t};var Vn=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function $n(e,t,n,r){var u,E,i=e.doc,a=i.mode,h=Ie(i,(t=ke(i,t)).line),d=Ct(e,t.line,n),y=new ct(h.text,e.options.tabSize,d);for(r&&(E=[]);(r||y.pos<t.ch)&&!y.eol();)y.start=y.pos,u=Jr(a,y,d.state),r&&E.push(new Vn(y,u,Bt(i.mode,d.state)));return r?E:new Vn(y,u,d.state)}function Ii(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+n[2])}return e}function On(e,t,n,r,i,a,u){var h=n.flattenSpans;null==h&&(h=e.options.flattenSpans);var B,d=0,y=null,E=new ct(t,e.options.tabSize,r),ee=e.options.addModeClass&&[null];for(""==t&&Ii(Fn(n,r.state),a);!E.eol();){if(E.pos>e.options.maxHighlightLength?(h=!1,u&&xr(e,t,r,E.pos),E.pos=t.length,B=null):B=Ii(Jr(n,E,r.state,ee),a),ee){var X=ee[0].name;X&&(B="m-"+(B?X+" "+B:X))}if(!h||y!=B){for(;d<E.start;)i(d=Math.min(E.start,d+5e3),y);y=B}E.start=E.pos}for(;d<E.pos;){var he=Math.min(E.pos,d+5e3);i(he,y),d=he}}var ti=!1,_r=!1;function kr(e,t,n){this.marker=e,this.from=t,this.to=n}function yn(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function xn(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function ri(e,t){if(t.full)return null;var n=ur(e,t.from.line)&&Ie(e,t.from.line).markedSpans,r=ur(e,t.to.line)&&Ie(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,a=t.to.ch,u=0==z(t.from,t.to),h=function so(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var a=e[i],u=a.marker;null!=a.from&&!(u.inclusiveLeft?a.from<=t:a.from<t)&&(a.from!=t||"bookmark"!=u.type||n&&a.marker.insertLeft)||(r||(r=[])).push(new kr(u,a.from,null==a.to||(u.inclusiveRight?a.to>=t:a.to>t)?null:a.to))}return r}(n,i,u),d=function uo(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var a=e[i],u=a.marker;(null==a.to||(u.inclusiveRight?a.to>=t:a.to>t)||a.from==t&&"bookmark"==u.type&&(!n||a.marker.insertLeft))&&(r||(r=[])).push(new kr(u,null==a.from||(u.inclusiveLeft?a.from<=t:a.from<t)?null:a.from-t,null==a.to?null:a.to-t))}return r}(r,a,u),y=1==t.text.length,E=Re(t.text).length+(y?i:0);if(h)for(var B=0;B<h.length;++B){var ee=h[B];if(null==ee.to){var X=yn(d,ee.marker);X?y&&(ee.to=null==X.to?null:X.to+E):ee.to=i}}if(d)for(var he=0;he<d.length;++he){var me=d[he];null!=me.to&&(me.to+=E),null==me.from?yn(h,me.marker)||(me.from=E,y&&(h||(h=[])).push(me)):(me.from+=E,y&&(h||(h=[])).push(me))}h&&(h=Ri(h)),d&&d!=h&&(d=Ri(d));var De=[h];if(!y){var Fe,Oe=t.text.length-2;if(Oe>0&&h)for(var Ne=0;Ne<h.length;++Ne)null==h[Ne].to&&(Fe||(Fe=[])).push(new kr(h[Ne].marker,null,null));for(var Ze=0;Ze<Oe;++Ze)De.push(Fe);De.push(d)}return De}function Ri(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function ni(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function ii(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function In(e){return e.inclusiveLeft?-1:0}function sn(e){return e.inclusiveRight?1:0}function Nn(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),a=z(r.from,i.from)||In(e)-In(t);return a?-a:z(r.to,i.to)||sn(e)-sn(t)||t.id-e.id}function oi(e,t){var r,n=_r&&e.markedSpans;if(n)for(var i=void 0,a=0;a<n.length;++a)(i=n[a]).marker.collapsed&&null==(t?i.from:i.to)&&(!r||Nn(r,i.marker)<0)&&(r=i.marker);return r}function ai(e){return oi(e,!0)}function o(e){return oi(e,!1)}function l(e,t){var r,n=_r&&e.markedSpans;if(n)for(var i=0;i<n.length;++i){var a=n[i];a.marker.collapsed&&(null==a.from||a.from<t)&&(null==a.to||a.to>t)&&(!r||Nn(r,a.marker)<0)&&(r=a.marker)}return r}function s(e,t,n,r,i){var a=Ie(e,t),u=_r&&a.markedSpans;if(u)for(var h=0;h<u.length;++h){var d=u[h];if(d.marker.collapsed){var y=d.marker.find(0),E=z(y.from,n)||In(d.marker)-In(i),B=z(y.to,r)||sn(d.marker)-sn(i);if(!(E>=0&&B<=0||E<=0&&B>=0)&&(E<=0&&(d.marker.inclusiveRight&&i.inclusiveLeft?z(y.to,n)>=0:z(y.to,n)>0)||E>=0&&(d.marker.inclusiveRight&&i.inclusiveLeft?z(y.from,r)<=0:z(y.from,r)<0)))return!0}}}function c(e){for(var t;t=ai(e);)e=t.find(-1,!0).line;return e}function L(e,t){var n=Ie(e,t),r=c(n);return n==r?t:st(r)}function I(e,t){if(t>e.lastLine())return t;var r,n=Ie(e,t);if(!F(e,n))return t;for(;r=o(n);)n=r.find(1,!0).line;return st(n)+1}function F(e,t){var n=_r&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&Y(e,t,r))return!0}}function Y(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return Y(e,r.line,yn(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,a=0;a<t.markedSpans.length;++a)if((i=t.markedSpans[a]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&Y(e,t,i))return!0}function Z(e){for(var t=0,n=(e=c(e)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var a=n.parent;a;a=(n=a).parent)for(var u=0;u<a.children.length;++u){var h=a.children[u];if(h==n)break;t+=h.height}return t}function ve(e){if(0==e.height)return 0;for(var n,t=e.text.length,r=e;n=ai(r);){var i=n.find(0,!0);r=i.from.line,t+=i.from.ch-i.to.ch}for(r=e;n=o(r);){var a=n.find(0,!0);t-=r.text.length-a.from.ch,t+=(r=a.to.line).text.length-a.to.ch}return t}function xe(e){var t=e.display,n=e.doc;t.maxLine=Ie(n,n.first),t.maxLineLength=ve(t.maxLine),t.maxLineChanged=!0,n.iter(function(r){var i=ve(r);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=r)})}var pe=function(e,t,n){this.text=e,ii(this,t),this.height=n?n(this):1};function Be(e){e.parent=null,ni(e)}pe.prototype.lineNo=function(){return st(this)},ft(pe);var Le={},Je={};function $e(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Je:Le;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Xe(e,t){var n=Q("span",null,null,H?"padding-right: .1px":null),r={pre:Q("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var a=i?t.rest[i-1]:t.line,u=void 0;r.pos=0,r.addToken=Kt,Zr(e.display.measure)&&(u=it(a,e.doc.direction))&&(r.addToken=Zt(r.addToken,u)),r.map=[],at(a,r,yt(e,a,t!=e.display.externalMeasured&&st(a))),a.styleClasses&&(a.styleClasses.bgClass&&(r.bgClass=Ae(a.styleClasses.bgClass,r.bgClass||"")),a.styleClasses.textClass&&(r.textClass=Ae(a.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(en(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(H){var d=r.content.lastChild;(/\bcm-tab\b/.test(d.className)||d.querySelector&&d.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return Ye(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=Ae(r.pre.className,r.textClass||"")),r}function ut(e){var t=te("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Kt(e,t,n,r,i,a,u){if(t){var E,h=e.splitSpaces?function At(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var a=e.charAt(i);" "==a&&n&&(i==e.length-1||32==e.charCodeAt(i+1))&&(a="\xa0"),r+=a,n=" "==a}return r}(t,e.trailingSpace):t,d=e.cm.state.specialChars,y=!1;if(d.test(t)){E=document.createDocumentFragment();for(var B=0;;){d.lastIndex=B;var ee=d.exec(t),X=ee?ee.index-B:t.length-B;if(X){var he=document.createTextNode(h.slice(B,B+X));E.appendChild(O&&f<9?te("span",[he]):he),e.map.push(e.pos,e.pos+X,he),e.col+=X,e.pos+=X}if(!ee)break;B+=X+1;var me=void 0;if("\t"==ee[0]){var Se=e.cm.options.tabSize,De=Se-e.col%Se;(me=E.appendChild(te("span",Ue(De),"cm-tab"))).setAttribute("role","presentation"),me.setAttribute("cm-text","\t"),e.col+=De}else"\r"==ee[0]||"\n"==ee[0]?((me=E.appendChild(te("span","\r"==ee[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",ee[0]),e.col+=1):((me=e.cm.options.specialCharPlaceholder(ee[0])).setAttribute("cm-text",ee[0]),E.appendChild(O&&f<9?te("span",[me]):me),e.col+=1);e.map.push(e.pos,e.pos+1,me),e.pos++}}else e.col+=t.length,E=document.createTextNode(h),e.map.push(e.pos,e.pos+t.length,E),O&&f<9&&(y=!0),e.pos+=t.length;if(e.trailingSpace=32==h.charCodeAt(t.length-1),n||r||i||y||a||u){var Oe=n||"";r&&(Oe+=r),i&&(Oe+=i);var Fe=te("span",[E],Oe,a);if(u)for(var Ne in u)u.hasOwnProperty(Ne)&&"style"!=Ne&&"class"!=Ne&&Fe.setAttribute(Ne,u[Ne]);return e.content.appendChild(Fe)}e.content.appendChild(E)}}function Zt(e,t){return function(n,r,i,a,u,h,d){i=i?i+" cm-force-border":"cm-force-border";for(var y=n.pos,E=y+r.length;;){for(var B=void 0,ee=0;ee<t.length&&!((B=t[ee]).to>y&&B.from<=y);ee++);if(B.to>=E)return e(n,r,i,a,u,h,d);e(n,r.slice(0,B.to-y),i,a,null,h,d),a=null,r=r.slice(B.to-y),y=B.to}}}function ht(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function at(e,t,n){var r=e.markedSpans,i=e.text,a=0;if(r)for(var B,ee,he,me,Se,De,Oe,h=i.length,d=0,y=1,E="",X=0;;){if(X==d){he=me=Se=ee="",Oe=null,De=null,X=1/0;for(var Fe=[],Ne=void 0,Ze=0;Ze<r.length;++Ze){var ze=r[Ze],rt=ze.marker;if("bookmark"==rt.type&&ze.from==d&&rt.widgetNode)Fe.push(rt);else if(ze.from<=d&&(null==ze.to||ze.to>d||rt.collapsed&&ze.to==d&&ze.from==d)){if(null!=ze.to&&ze.to!=d&&X>ze.to&&(X=ze.to,me=""),rt.className&&(he+=" "+rt.className),rt.css&&(ee=(ee?ee+";":"")+rt.css),rt.startStyle&&ze.from==d&&(Se+=" "+rt.startStyle),rt.endStyle&&ze.to==X&&(Ne||(Ne=[])).push(rt.endStyle,ze.to),rt.title&&((Oe||(Oe={})).title=rt.title),rt.attributes)for(var mt in rt.attributes)(Oe||(Oe={}))[mt]=rt.attributes[mt];rt.collapsed&&(!De||Nn(De.marker,rt)<0)&&(De=ze)}else ze.from>d&&X>ze.from&&(X=ze.from)}if(Ne)for(var qt=0;qt<Ne.length;qt+=2)Ne[qt+1]==X&&(me+=" "+Ne[qt]);if(!De||De.from==d)for(var Et=0;Et<Fe.length;++Et)ht(t,0,Fe[Et]);if(De&&(De.from||0)==d){if(ht(t,(null==De.to?h+1:De.to)-d,De.marker,null==De.from),null==De.to)return;De.to==d&&(De=!1)}}if(d>=h)break;for(var Dr=Math.min(h,X);;){if(E){var wr=d+E.length;if(!De){var Pt=wr>Dr?E.slice(0,Dr-d):E;t.addToken(t,Pt,B?B+he:he,Se,d+Pt.length==X?me:"",ee,Oe)}if(wr>=Dr){E=E.slice(Dr-d),d=Dr;break}d=wr,Se=""}E=i.slice(a,a=n[y++]),B=$e(n[y++],t.cm.options)}}else for(var u=1;u<n.length;u+=2)t.addToken(t,i.slice(a,a=n[u]),$e(n[u+1],t.cm.options))}function Ut(e,t,n){this.line=t,this.rest=function v(e){for(var t,n;t=o(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?st(Re(this.rest))-n+1:1,this.node=this.text=null,this.hidden=F(e,t)}function Yt(e,t,n){for(var i,r=[],a=t;a<n;a=i){var u=new Ut(e.doc,Ie(e.doc,a),a);i=a+u.size,r.push(u)}return r}var Mt=null;var si=null;function Jt(e,t){var n=lt(e,t);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);Mt?i=Mt.delayedCallbacks:si?i=si:(i=si=[],setTimeout(Dl,0));for(var a=function(h){i.push(function(){return n[h].apply(null,r)})},u=0;u<n.length;++u)a(u)}}function Dl(){var e=si;si=null;for(var t=0;t<e.length;++t)e[t]()}function qo(e,t,n,r){for(var i=0;i<t.changes.length;i++){var a=t.changes[i];"text"==a?Ol(e,t):"gutter"==a?$o(e,t,n,r):"class"==a?co(e,t):"widget"==a&&Il(e,t,r)}t.changes=null}function ui(e){return e.node==e.text&&(e.node=te("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),O&&f<8&&(e.node.style.zIndex=2)),e.node}function Vo(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Xe(e,t)}function Ol(e,t){var n=t.text.className,r=Vo(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,co(e,t)):n&&(t.text.className=n)}function co(e,t){(function Fl(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=ui(t);t.background=r.insertBefore(te("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}})(e,t),t.line.wrapClass?ui(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className=""),t.text.className=(t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass)||""}function $o(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=ui(t);t.gutterBackground=te("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var a=t.line.gutterMarkers;if(e.options.lineNumbers||a){var u=ui(t),h=t.gutter=te("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(h.setAttribute("aria-hidden","true"),e.display.input.setUneditable(h),u.insertBefore(h,t.text),t.line.gutterClass&&(h.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!a||!a["CodeMirror-linenumbers"])&&(t.lineNumber=h.appendChild(te("div",be(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),a)for(var d=0;d<e.display.gutterSpecs.length;++d){var y=e.display.gutterSpecs[d].className,E=a.hasOwnProperty(y)&&a[y];E&&h.appendChild(te("div",[E],"CodeMirror-gutter-elt","left: "+r.gutterLeft[y]+"px; width: "+r.gutterWidth[y]+"px"))}}}function Il(e,t,n){t.alignable&&(t.alignable=null);for(var r=C("CodeMirror-linewidget"),i=t.node.firstChild,a=void 0;i;i=a)a=i.nextSibling,r.test(i.className)&&t.node.removeChild(i);ea(e,t,n)}function Nl(e,t,n,r){var i=Vo(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),co(e,t),$o(e,t,n,r),ea(e,t,r),t.node}function ea(e,t,n){if(ta(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)ta(e,t.rest[r],t,n,!1)}function ta(e,t,n,r,i){if(t.widgets)for(var a=ui(n),u=0,h=t.widgets;u<h.length;++u){var d=h[u],y=te("div",[d.node],"CodeMirror-linewidget"+(d.className?" "+d.className:""));d.handleMouseEvents||y.setAttribute("cm-ignore-events","true"),Bl(d,y,n,r),e.display.input.setUneditable(y),i&&d.above?a.insertBefore(y,n.gutter||n.text):a.appendChild(y),Jt(d,"redraw")}}function Bl(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function fi(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!x(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),G(t.display.measure,te("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function nn(e,t){for(var n=tr(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Hi(e){return e.lineSpace.offsetTop}function ho(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function ra(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=G(e.measure,te("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return!isNaN(r.left)&&!isNaN(r.right)&&(e.cachedPaddingH=r),r}function Qr(e){return 50-e.display.nativeBarWidth}function bn(e){return e.display.scroller.clientWidth-Qr(e)-e.display.barWidth}function po(e){return e.display.scroller.clientHeight-Qr(e)-e.display.barHeight}function na(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(st(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}}function ia(e,t,n,r){return Xr(e,Bn(e,t),n,r)}function vo(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Sn(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Bn(e,t){var n=st(t),r=vo(e,n);r&&!r.text?r=null:r&&r.changes&&(qo(e,r,n,ko(e)),e.curOp.forceUpdate=!0),r||(r=function Rl(e,t){var n=st(t=c(t)),r=e.display.externalMeasured=new Ut(e.doc,t,n);r.lineN=n;var i=r.built=Xe(e,r);return r.text=i.pre,G(e.display.lineMeasure,i.pre),r}(e,t));var i=na(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Xr(e,t,n,r,i){t.before&&(n=-1);var u,a=n+(r||"");return t.cache.hasOwnProperty(a)?u=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function Pl(e,t,n){var r=e.options.lineWrapping,i=r&&bn(e);if(!t.measure.heights||r&&t.measure.width!=i){var a=t.measure.heights=[];if(r){t.measure.width=i;for(var u=t.text.firstChild.getClientRects(),h=0;h<u.length-1;h++){var d=u[h],y=u[h+1];Math.abs(d.bottom-y.bottom)>2&&a.push((d.bottom+y.top)/2-n.top)}}a.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(u=function _l(e,t,n,r){var y,i=aa(t.map,n,r),a=i.node,u=i.start,h=i.end,d=i.collapse;if(3==a.nodeType){for(var E=0;E<4;E++){for(;u&&Wr(t.line.text.charAt(i.coverStart+u));)--u;for(;i.coverStart+h<i.coverEnd&&Wr(t.line.text.charAt(i.coverStart+h));)++h;if((y=O&&f<9&&0==u&&h==i.coverEnd-i.coverStart?a.parentNode.getBoundingClientRect():Hl(ge(a,u,h).getClientRects(),r)).left||y.right||0==u)break;h=u,u-=1,d="right"}O&&f<11&&(y=function Wl(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function or(e){if(null!=Yr)return Yr;var t=G(e,te("span","x")),n=t.getBoundingClientRect(),r=ge(t,0,1).getBoundingClientRect();return Yr=Math.abs(n.left-r.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,y))}else{var B;u>0&&(d=r="right"),y=e.options.lineWrapping&&(B=a.getClientRects()).length>1?B["right"==r?B.length-1:0]:a.getBoundingClientRect()}if(O&&f<9&&!u&&(!y||!y.left&&!y.right)){var ee=a.parentNode.getClientRects()[0];y=ee?{left:ee.left,right:ee.left+Rn(e.display),top:ee.top,bottom:ee.bottom}:oa}for(var X=y.top-t.rect.top,he=y.bottom-t.rect.top,me=(X+he)/2,Se=t.view.measure.heights,De=0;De<Se.length-1&&!(me<Se[De]);De++);var Ne={left:("right"==d?y.right:y.left)-t.rect.left,right:("left"==d?y.left:y.right)-t.rect.left,top:De?Se[De-1]:0,bottom:Se[De]};return!y.left&&!y.right&&(Ne.bogus=!0),e.options.singleCursorHeightPerLine||(Ne.rtop=X,Ne.rbottom=he),Ne}(e,t,n,r)).bogus||(t.cache[a]=u)),{left:u.left,right:u.right,top:i?u.rtop:u.top,bottom:i?u.rbottom:u.bottom}}var Cn,oa={left:0,right:0,top:0,bottom:0};function aa(e,t,n){for(var r,i,a,u,h,d,y=0;y<e.length;y+=3)if(d=e[y+1],t<(h=e[y])?(i=0,a=1,u="left"):t<d?a=1+(i=t-h):(y==e.length-3||t==d&&e[y+3]>t)&&(i=(a=d-h)-1,t>=d&&(u="right")),null!=i){if(r=e[y+2],h==d&&n==(r.insertLeft?"left":"right")&&(u=n),"left"==n&&0==i)for(;y&&e[y-2]==e[y-3]&&e[y-1].insertLeft;)r=e[2+(y-=3)],u="left";if("right"==n&&i==d-h)for(;y<e.length-3&&e[y+3]==e[y+4]&&!e[y+5].insertLeft;)r=e[(y+=3)+2],u="right";break}return{node:r,start:i,end:a,collapse:u,coverStart:h,coverEnd:d}}function Hl(e,t){var n=oa;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function la(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function sa(e){e.display.externalMeasure=null,ne(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)la(e.display.view[t])}function ci(e){sa(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function ua(){return V&&re?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function fa(){return V&&re?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function go(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=fi(e.widgets[n]));return t}function _i(e,t,n,r,i){if(!i){var a=go(t);n.top+=a,n.bottom+=a}if("line"==r)return n;r||(r="local");var u=Z(t);if("local"==r?u+=Hi(e.display):u-=e.display.viewOffset,"page"==r||"window"==r){var h=e.display.lineSpace.getBoundingClientRect();u+=h.top+("window"==r?0:fa());var d=h.left+("window"==r?0:ua());n.left+=d,n.right+=d}return n.top+=u,n.bottom+=u,n}function ca(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=ua(),i-=fa();else if("local"==n||!n){var a=e.display.sizer.getBoundingClientRect();r+=a.left,i+=a.top}var u=e.display.lineSpace.getBoundingClientRect();return{left:r-u.left,top:i-u.top}}function Wi(e,t,n,r,i){return r||(r=Ie(e.doc,t.line)),_i(e,r,ia(e,r,t.ch,i),n)}function zr(e,t,n,r,i,a){function u(he,me){var Se=Xr(e,i,he,me?"right":"left",a);return me?Se.left=Se.right:Se.right=Se.left,_i(e,r,Se,n)}r=r||Ie(e.doc,t.line),i||(i=Bn(e,r));var h=it(r,e.doc.direction),d=t.ch,y=t.sticky;if(d>=r.text.length?(d=r.text.length,y="before"):d<=0&&(d=0,y="after"),!h)return u("before"==y?d-1:d,"before"==y);function E(he,me,Se){return u(Se?he-1:he,1==h[me].level!=Se)}var B=bt(h,d,y),ee=$t,X=E(d,B,"before"==y);return null!=ee&&(X.other=E(d,ee,"before"!=y)),X}function ha(e,t){var n=0;t=ke(e.doc,t),e.options.lineWrapping||(n=Rn(e.display)*t.ch);var r=Ie(e.doc,t.line),i=Z(r)+Hi(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function mo(e,t,n,r,i){var a=S(e,t,n);return a.xRel=i,r&&(a.outside=r),a}function yo(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return mo(r.first,0,null,-1,-1);var i=Wt(r,n),a=r.first+r.size-1;if(i>a)return mo(r.first+r.size-1,Ie(r,a).text.length,null,1,1);t<0&&(t=0);for(var u=Ie(r,i);;){var h=Kl(e,u,i,t,n),d=l(u,h.ch+(h.xRel>0||h.outside>0?1:0));if(!d)return h;var y=d.find(1);if(y.line==i)return y;u=Ie(r,i=y.line)}}function da(e,t,n,r){r-=go(t);var i=t.text.length,a=Kr(function(u){return Xr(e,n,u-1).bottom<=r},i,0);return{begin:a,end:i=Kr(function(u){return Xr(e,n,u).top>r},a,i)}}function pa(e,t,n,r){return n||(n=Bn(e,t)),da(e,t,n,_i(e,t,Xr(e,n,r),"line").top)}function xo(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function Kl(e,t,n,r,i){i-=Z(t);var a=Bn(e,t),u=go(t),h=0,d=t.text.length,y=!0,E=it(t,e.doc.direction);if(E){var B=(e.options.lineWrapping?zl:Ul)(e,t,n,a,E,r,i);h=(y=1!=B.level)?B.from:B.to-1,d=y?B.to:B.from-1}var me,Se,ee=null,X=null,he=Kr(function(Ze){var ze=Xr(e,a,Ze);return ze.top+=u,ze.bottom+=u,!!xo(ze,r,i,!1)&&(ze.top<=i&&ze.left<=r&&(ee=Ze,X=ze),!0)},h,d),De=!1;if(X){var Oe=r-X.left<X.right-r,Fe=Oe==y;he=ee+(Fe?0:1),Se=Fe?"after":"before",me=Oe?X.left:X.right}else{!y&&(he==d||he==h)&&he++,Se=0==he?"after":he==t.text.length?"before":Xr(e,a,he-(y?1:0)).bottom+u<=i==y?"after":"before";var Ne=zr(e,S(n,he,Se),"line",t,a);me=Ne.left,De=i<Ne.top?-1:i>=Ne.bottom?1:0}return mo(n,he=dr(t.text,he,1),Se,De,r-me)}function Ul(e,t,n,r,i,a,u){var h=Kr(function(B){var ee=i[B],X=1!=ee.level;return xo(zr(e,S(n,X?ee.to:ee.from,X?"before":"after"),"line",t,r),a,u,!0)},0,i.length-1),d=i[h];if(h>0){var y=1!=d.level,E=zr(e,S(n,y?d.from:d.to,y?"after":"before"),"line",t,r);xo(E,a,u,!0)&&E.top>u&&(d=i[h-1])}return d}function zl(e,t,n,r,i,a,u){var h=da(e,t,r,u),d=h.begin,y=h.end;/\s/.test(t.text.charAt(y-1))&&y--;for(var E=null,B=null,ee=0;ee<i.length;ee++){var X=i[ee];if(!(X.from>=y||X.to<=d)){var me=Xr(e,r,1!=X.level?Math.min(y,X.to)-1:Math.max(d,X.from)).right,Se=me<a?a-me+1e9:me-a;(!E||B>Se)&&(E=X,B=Se)}}return E||(E=i[i.length-1]),E.from<d&&(E={from:d,to:E.to,level:E.level}),E.to>y&&(E={from:E.from,to:y,level:E.level}),E}function Pn(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Cn){Cn=te("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)Cn.appendChild(document.createTextNode("x")),Cn.appendChild(te("br"));Cn.appendChild(document.createTextNode("x"))}G(e.measure,Cn);var n=Cn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),ne(e.measure),n||1}function Rn(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=te("span","xxxxxxxxxx"),n=te("pre",[t],"CodeMirror-line-like");G(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function ko(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,a=t.gutters.firstChild,u=0;a;a=a.nextSibling,++u){var h=e.display.gutterSpecs[u].className;n[h]=a.offsetLeft+a.clientLeft+i,r[h]=a.clientWidth}return{fixedPos:bo(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function bo(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function va(e){var t=Pn(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/Rn(e.display)-3);return function(i){if(F(e.doc,i))return 0;var a=0;if(i.widgets)for(var u=0;u<i.widgets.length;u++)i.widgets[u].height&&(a+=i.widgets[u].height);return n?a+(Math.ceil(i.text.length/r)||1)*t:a+t}}function Co(e){var t=e.doc,n=va(e);t.iter(function(r){var i=n(r);i!=r.height&&sr(r,i)})}function wn(e,t,n,r){var i=e.display;if(!n&&"true"==tr(t).getAttribute("cm-not-content"))return null;var a,u,h=i.lineSpace.getBoundingClientRect();try{a=t.clientX-h.left,u=t.clientY-h.top}catch{return null}var y,d=yo(e,a,u);if(r&&d.xRel>0&&(y=Ie(e.doc,d.line).text).length==d.ch){var E=N(y,y.length,e.options.tabSize)-y.length;d=S(d.line,Math.max(0,Math.round((a-ra(e.display).left)/Rn(e.display))-E))}return d}function Sn(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function br(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)_r&&L(e.doc,t)<i.viewTo&&fn(e);else if(n<=i.viewFrom)_r&&I(e.doc,n+r)>i.viewFrom?fn(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)fn(e);else if(t<=i.viewFrom){var a=Ki(e,n,n+r,1);a?(i.view=i.view.slice(a.index),i.viewFrom=a.lineN,i.viewTo+=r):fn(e)}else if(n>=i.viewTo){var u=Ki(e,t,t,-1);u?(i.view=i.view.slice(0,u.index),i.viewTo=u.lineN):fn(e)}else{var h=Ki(e,t,t,-1),d=Ki(e,n,n+r,1);h&&d?(i.view=i.view.slice(0,h.index).concat(Yt(e,h.lineN,d.lineN)).concat(i.view.slice(d.index)),i.viewTo+=r):fn(e)}var y=i.externalMeasured;y&&(n<y.lineN?y.lineN+=r:t<y.lineN+y.size&&(i.externalMeasured=null))}function un(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var a=r.view[Sn(e,t)];if(null!=a.node){var u=a.changes||(a.changes=[]);-1==Te(u,n)&&u.push(n)}}}function fn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Ki(e,t,n,r){var a,i=Sn(e,t),u=e.display.view;if(!_r||n==e.doc.first+e.doc.size)return{index:i,lineN:n};for(var h=e.display.viewFrom,d=0;d<i;d++)h+=u[d].size;if(h!=t){if(r>0){if(i==u.length-1)return null;a=h+u[i].size-t,i++}else a=h-t;t+=a,n+=a}for(;L(e.doc,n)!=n;){if(i==(r<0?0:u.length-1))return null;n+=r*u[i-(r<0?1:0)].size,i+=r}return{index:i,lineN:n}}function ga(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];!i.hidden&&(!i.node||i.changes)&&++n}return n}function hi(e){e.display.input.showSelection(e.display.input.prepareSelection())}function ma(e,t){void 0===t&&(t=!0);var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),a=r.selection=document.createDocumentFragment(),u=e.options.$customCursor;u&&(t=!0);for(var h=0;h<n.sel.ranges.length;h++)if(t||h!=n.sel.primIndex){var d=n.sel.ranges[h];if(!(d.from().line>=e.display.viewTo||d.to().line<e.display.viewFrom)){var y=d.empty();if(u){var E=u(e,d);E&&wo(e,E,i)}else(y||e.options.showCursorWhenSelecting)&&wo(e,d.head,i);y||jl(e,d,a)}}return r}function wo(e,t,n){var r=zr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(te("div","\xa0","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var a=Wi(e,t,"div",null,null),u=a.right-a.left;i.style.width=(u>0?u:e.defaultCharWidth())+"px"}if(r.other){var h=n.appendChild(te("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));h.style.display="",h.style.left=r.other.left+"px",h.style.top=r.other.top+"px",h.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function Ui(e,t){return e.top-t.top||e.left-t.left}function jl(e,t,n){var r=e.display,i=e.doc,a=document.createDocumentFragment(),u=ra(e.display),h=u.left,d=Math.max(r.sizerWidth,bn(e)-r.sizer.offsetLeft)-u.right,y="ltr"==i.direction;function E(Fe,Ne,Ze,ze){Ne<0&&(Ne=0),Ne=Math.round(Ne),ze=Math.round(ze),a.appendChild(te("div",null,"CodeMirror-selected","position: absolute; left: "+Fe+"px;\n                             top: "+Ne+"px; width: "+(Ze??d-Fe)+"px;\n                             height: "+(ze-Ne)+"px"))}function B(Fe,Ne,Ze){var mt,qt,ze=Ie(i,Fe),rt=ze.text.length;function Et(Pt,Sr){return Wi(e,S(Fe,Pt),"div",ze,Sr)}function Dr(Pt,Sr,nr){var zt=pa(e,ze,null,Pt),Rt="ltr"==Sr==("after"==nr)?"left":"right";return Et("after"==nr?zt.begin:zt.end-(/\s/.test(ze.text.charAt(zt.end-1))?2:1),Rt)[Rt]}var wr=it(ze,i.direction);return function Gt(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,a=0;a<e.length;++a){var u=e[a];(u.from<n&&u.to>t||t==n&&u.to==t)&&(r(Math.max(u.from,t),Math.min(u.to,n),1==u.level?"rtl":"ltr",a),i=!0)}i||r(t,n,"ltr")}(wr,Ne||0,Ze??rt,function(Pt,Sr,nr,zt){var Rt="ltr"==nr,Ft=Et(Pt,Rt?"left":"right"),Lr=Et(Sr-1,Rt?"right":"left"),Xn=null==Ne&&0==Pt,gn=null==Ze&&Sr==rt,cr=0==zt,qr=!wr||zt==wr.length-1;if(Lr.top-Ft.top<=3){var ln=(y?Xn:gn)&&cr?h:(Rt?Ft:Lr).left;E(ln,Ft.top,((y?gn:Xn)&&qr?d:(Rt?Lr:Ft).right)-ln,Ft.bottom)}else{var Dn,gr,qn,Xo;Rt?(Dn=y&&Xn&&cr?h:Ft.left,gr=y?d:Dr(Pt,nr,"before"),qn=y?h:Dr(Sr,nr,"after"),Xo=y&&gn&&qr?d:Lr.right):(Dn=y?Dr(Pt,nr,"before"):h,gr=!y&&Xn&&cr?d:Ft.right,qn=!y&&gn&&qr?h:Lr.left,Xo=y?Dr(Sr,nr,"after"):d),E(Dn,Ft.top,gr-Dn,Ft.bottom),Ft.bottom<Lr.top&&E(h,Ft.bottom,null,Lr.top),E(qn,Lr.top,Xo-qn,Lr.bottom)}(!mt||Ui(Ft,mt)<0)&&(mt=Ft),Ui(Lr,mt)<0&&(mt=Lr),(!qt||Ui(Ft,qt)<0)&&(qt=Ft),Ui(Lr,qt)<0&&(qt=Lr)}),{start:mt,end:qt}}var ee=t.from(),X=t.to();if(ee.line==X.line)B(ee.line,ee.ch,X.ch);else{var he=Ie(i,ee.line),me=Ie(i,X.line),Se=c(he)==c(me),De=B(ee.line,ee.ch,Se?he.text.length+1:null).end,Oe=B(X.line,Se?0:null,X.ch).start;Se&&(De.top<Oe.top-2?(E(De.right,De.top,null,De.bottom),E(h,Oe.top,Oe.left,Oe.bottom)):E(De.right,De.top,Oe.left-De.right,De.bottom)),De.bottom<Oe.top&&E(h,De.bottom,null,Oe.top)}n.appendChild(a)}function So(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||Hn(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function ya(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||To(e))}function Lo(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Hn(e))},100)}function To(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Ye(e,"focus",e,t),e.state.focused=!0,fe(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),H&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),So(e))}function Hn(e,t){e.state.delayingBlurEvent||(e.state.focused&&(Ye(e,"blur",e,t),e.state.focused=!1,K(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function zi(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=Math.max(0,t.scroller.getBoundingClientRect().top),i=t.lineDiv.getBoundingClientRect().top,a=0,u=0;u<t.view.length;u++){var h=t.view[u],d=e.options.lineWrapping,y=void 0,E=0;if(!h.hidden){if(i+=h.line.height,O&&f<8){var B=h.node.offsetTop+h.node.offsetHeight;y=B-n,n=B}else{var ee=h.node.getBoundingClientRect();y=ee.bottom-ee.top,!d&&h.text.firstChild&&(E=h.text.firstChild.getBoundingClientRect().right-ee.left-1)}var X=h.line.height-y;if((X>.005||X<-.005)&&(i<r&&(a-=X),sr(h.line,y),xa(h.line),h.rest))for(var he=0;he<h.rest.length;he++)xa(h.rest[he]);if(E>e.display.sizerWidth){var me=Math.ceil(E/Rn(e.display));me>e.display.maxLineLength&&(e.display.maxLineLength=me,e.display.maxLine=h.line,e.display.maxLineChanged=!0)}}}Math.abs(a)>2&&(t.scroller.scrollTop+=a)}function xa(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function Gi(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Hi(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,a=Wt(t,r),u=Wt(t,i);if(n&&n.ensure){var h=n.ensure.from.line,d=n.ensure.to.line;h<a?(a=h,u=Wt(t,Z(Ie(t,h))+e.wrapper.clientHeight)):Math.min(d,t.lastLine())>=u&&(a=Wt(t,Z(Ie(t,d))-e.wrapper.clientHeight),u=d)}return{from:a,to:Math.max(u,a+1)}}function Ao(e,t){var n=e.display,r=Pn(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,a=po(e),u={};t.bottom-t.top>a&&(t.bottom=t.top+a);var h=e.doc.height+ho(n),y=t.bottom>h-r;if(t.top<i)u.scrollTop=t.top<r?0:t.top;else if(t.bottom>i+a){var E=Math.min(t.top,(y?h:t.bottom)-a);E!=i&&(u.scrollTop=E)}var B=e.options.fixedGutter?0:n.gutters.offsetWidth,ee=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-B,X=bn(e)-n.gutters.offsetWidth,he=t.right-t.left>X;return he&&(t.right=t.left+X),t.left<10?u.scrollLeft=0:t.left<ee?u.scrollLeft=Math.max(0,t.left+B-(he?0:10)):t.right>X+ee-3&&(u.scrollLeft=t.right+(he?0:10)-X),u}function Mo(e,t){null!=t&&(ji(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function _n(e){ji(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function di(e,t,n){(null!=t||null!=n)&&ji(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function ji(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,ka(e,ha(e,t.from),ha(e,t.to),t.margin))}function ka(e,t,n,r){var i=Ao(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});di(e,i.scrollLeft,i.scrollTop)}function pi(e,t){Math.abs(e.doc.scrollTop-t)<2||(k||Do(e,{top:t}),ba(e,t,!0),k&&Do(e),mi(e,100))}function ba(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Ln(e,t,n,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(!(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||r)&&(e.doc.scrollLeft=t,Ta(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function vi(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+ho(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Qr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Tn=function(e,t,n){this.cm=n;var r=this.vert=te("div",[te("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=te("div",[te("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),We(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),We(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,O&&f<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Tn.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;return n?(this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0",this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+(e.viewHeight-(t?r:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),t?(this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+(e.viewWidth-e.barLeft-(n?r:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},Tn.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Tn.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Tn.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=M&&!se?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new b,this.disableVert=new b},Tn.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,function r(){var i=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,r)})},Tn.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var gi=function(){};function Wn(e,t){t||(t=vi(e));var n=e.display.barWidth,r=e.display.barHeight;Ca(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&zi(e),Ca(e,vi(e)),n=e.display.barWidth,r=e.display.barHeight}function Ca(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}gi.prototype.update=function(){return{bottom:0,right:0}},gi.prototype.setScrollLeft=function(){},gi.prototype.setScrollTop=function(){},gi.prototype.clear=function(){};var wa={native:Tn,null:gi};function Sa(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&K(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new wa[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),We(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?Ln(e,t):pi(e,t)},e),e.display.scrollbars.addClass&&fe(e.display.wrapper,e.display.scrollbars.addClass)}var Xl=0;function An(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Xl,markArrays:null},function rn(e){Mt?Mt.ops.push(e):e.ownsGroup=Mt={ops:[e],delayedCallbacks:[]}}(e.curOp)}function Mn(e){var t=e.curOp;t&&function li(e,t){var n=e.ownsGroup;if(n)try{!function kn(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{Mt=null,t(n)}}(t,function(n){for(var r=0;r<n.ops.length;r++)n.ops[r].cm.curOp=null;!function ql(e){for(var t=e.ops,n=0;n<t.length;n++)Vl(t[n]);for(var r=0;r<t.length;r++)$l(t[r]);for(var i=0;i<t.length;i++)es(t[i]);for(var a=0;a<t.length;a++)ts(t[a]);for(var u=0;u<t.length;u++)rs(t[u])}(n)})}function Vl(e){var t=e.cm,n=t.display;(function is(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Qr(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Qr(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&xe(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Zi(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function $l(e){e.updatedDisplay=e.mustUpdate&&Eo(e.cm,e.update)}function es(e){var t=e.cm,n=t.display;e.updatedDisplay&&zi(t),e.barMeasure=vi(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=ia(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Qr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-bn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function ts(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Ln(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==ue();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Wn(t,e.barMeasure),e.updatedDisplay&&Oo(t,e.barMeasure),e.selectionChanged&&So(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&ya(e.cm)}function rs(e){var t=e.cm,n=t.display,r=t.doc;e.updatedDisplay&&La(t,e.update),null!=n.wheelStartX&&(null!=e.scrollTop||null!=e.scrollLeft||e.scrollToPos)&&(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&ba(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Ln(t,e.scrollLeft,!0,!0),e.scrollToPos&&function Zl(e,t){if(!ot(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!ce){var a=te("div","\u200b",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-Hi(e.display))+"px;\n                         height: "+(t.bottom-t.top+Qr(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(a),a.scrollIntoView(i),e.display.lineSpace.removeChild(a)}}}(t,function Yl(e,t,n,r){var i;null==r&&(r=0),!e.options.lineWrapping&&t==n&&(n="before"==t.sticky?S(t.line,t.ch+1,"before"):t,t=t.ch?S(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t);for(var a=0;a<5;a++){var u=!1,h=zr(e,t),d=n&&n!=t?zr(e,n):h,y=Ao(e,i={left:Math.min(h.left,d.left),top:Math.min(h.top,d.top)-r,right:Math.max(h.left,d.left),bottom:Math.max(h.bottom,d.bottom)+r}),E=e.doc.scrollTop,B=e.doc.scrollLeft;if(null!=y.scrollTop&&(pi(e,y.scrollTop),Math.abs(e.doc.scrollTop-E)>1&&(u=!0)),null!=y.scrollLeft&&(Ln(e,y.scrollLeft),Math.abs(e.doc.scrollLeft-B)>1&&(u=!0)),!u)break}return i}(t,ke(r,e.scrollToPos.from),ke(r,e.scrollToPos.to),e.scrollToPos.margin));var a=e.maybeHiddenMarkers,u=e.maybeUnhiddenMarkers;if(a)for(var h=0;h<a.length;++h)a[h].lines.length||Ye(a[h],"hide");if(u)for(var d=0;d<u.length;++d)u[d].lines.length&&Ye(u[d],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Ye(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Er(e,t){if(e.curOp)return t();An(e);try{return t()}finally{Mn(e)}}function Qt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);An(e);try{return t.apply(e,arguments)}finally{Mn(e)}}}function vr(e){return function(){if(this.curOp)return e.apply(this,arguments);An(this);try{return e.apply(this,arguments)}finally{Mn(this)}}}function Xt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);An(t);try{return e.apply(this,arguments)}finally{Mn(t)}}}function mi(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,_e(ns,e))}function ns(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=Ct(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(a){if(r.line>=e.display.viewFrom){var u=a.styles,h=a.text.length>e.options.maxHighlightLength?Bt(t.mode,r.state):null,d=nt(e,a,r,!0);h&&(r.state=h),a.styles=d.styles;var y=a.styleClasses,E=d.classes;E?a.styleClasses=E:y&&(a.styleClasses=null);for(var B=!u||u.length!=a.styles.length||y!=E&&(!y||!E||y.bgClass!=E.bgClass||y.textClass!=E.textClass),ee=0;!B&&ee<u.length;++ee)B=u[ee]!=a.styles[ee];B&&i.push(r.line),a.stateAfter=r.save(),r.nextLine()}else a.text.length<=e.options.maxHighlightLength&&xr(e,a.text,r),a.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return mi(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&Er(e,function(){for(var a=0;a<i.length;a++)un(e,i[a],"text")})}}var Zi=function(e,t,n){var r=e.display;this.viewport=t,this.visible=Gi(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=bn(e),this.force=n,this.dims=ko(e),this.events=[]};function Eo(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return fn(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==ga(e))return!1;Aa(e)&&(fn(e),t.dims=ko(e));var i=r.first+r.size,a=Math.max(t.visible.from-e.options.viewportMargin,r.first),u=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<a&&a-n.viewFrom<20&&(a=Math.max(r.first,n.viewFrom)),n.viewTo>u&&n.viewTo-u<20&&(u=Math.min(i,n.viewTo)),_r&&(a=L(e.doc,a),u=I(e.doc,u));var h=a!=n.viewFrom||u!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;(function Gl(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=Yt(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=Yt(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(Sn(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(Yt(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,Sn(e,n)))),r.viewTo=n})(e,a,u),n.viewOffset=Z(Ie(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var d=ga(e);if(!h&&0==d&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var y=function os(e){if(e.hasFocus())return null;var t=ue();if(!t||!x(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&x(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(e);return d>4&&(n.lineDiv.style.display="none"),function ls(e,t,n){var r=e.display,i=e.options.lineNumbers,a=r.lineDiv,u=a.firstChild;function h(he){var me=he.nextSibling;return H&&M&&e.display.currentWheelTarget==he?he.style.display="none":he.parentNode.removeChild(he),me}for(var d=r.view,y=r.viewFrom,E=0;E<d.length;E++){var B=d[E];if(!B.hidden)if(B.node&&B.node.parentNode==a){for(;u!=B.node;)u=h(u);var X=i&&null!=t&&t<=y&&B.lineNumber;B.changes&&(Te(B.changes,"gutter")>-1&&(X=!1),qo(e,B,y,n)),X&&(ne(B.lineNumber),B.lineNumber.appendChild(document.createTextNode(be(e.options,y)))),u=B.node.nextSibling}else{var ee=Nl(e,B,y,n);a.insertBefore(ee,u)}y+=B.size}for(;u;)u=h(u)}(e,n.updateLineNumbers,t.dims),d>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function as(e){if(e&&e.activeElt&&e.activeElt!=ue()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&x(document.body,e.anchorNode)&&x(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(y),ne(n.cursorDiv),ne(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,h&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,mi(e,400)),n.updateLineNumbers=null,!0}function La(e,t){for(var n=t.viewport,r=!0;;r=!1){if(r&&e.options.lineWrapping&&t.oldDisplayWidth!=bn(e))r&&(t.visible=Gi(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+ho(e.display)-po(e),n.top)}),t.visible=Gi(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!Eo(e,t))break;zi(e);var i=vi(e);hi(e),Wn(e,i),Oo(e,i),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Do(e,t){var n=new Zi(e,t);if(Eo(e,n)){zi(e),La(e,n);var r=vi(e);hi(e),Wn(e,r),Oo(e,r),n.finish()}}function Fo(e){e.sizer.style.marginLeft=e.gutters.offsetWidth+"px",Jt(e,"gutterChanged",e)}function Oo(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Qr(e)+"px"}function Ta(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=bo(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,a=r+"px",u=0;u<n.length;u++)if(!n[u].hidden){e.options.fixedGutter&&(n[u].gutter&&(n[u].gutter.style.left=a),n[u].gutterBackground&&(n[u].gutterBackground.style.left=a));var h=n[u].alignable;if(h)for(var d=0;d<h.length;d++)h[d].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function Aa(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=be(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(te("div",[te("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=i.firstChild.offsetWidth,u=i.offsetWidth-a;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(a,r.lineGutter.offsetWidth-u)+1,r.lineNumWidth=r.lineNumInnerWidth+u,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",Fo(e.display),!0}return!1}function Io(e,t){for(var n=[],r=!1,i=0;i<e.length;i++){var a=e[i],u=null;if("string"!=typeof a&&(u=a.style,a=a.className),"CodeMirror-linenumbers"==a){if(!t)continue;r=!0}n.push({className:a,style:u})}return t&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function Ma(e){var t=e.gutters,n=e.gutterSpecs;ne(t),e.lineGutter=null;for(var r=0;r<n.length;++r){var i=n[r],a=i.className,u=i.style,h=t.appendChild(te("div",null,"CodeMirror-gutter "+a));u&&(h.style.cssText=u),"CodeMirror-linenumbers"==a&&(e.lineGutter=h,h.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",Fo(e)}function yi(e){Ma(e.display),br(e),Ta(e)}function ss(e,t,n,r){var i=this;this.input=n,i.scrollbarFiller=te("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=te("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=Q("div",null,"CodeMirror-code"),i.selectionDiv=te("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=te("div",null,"CodeMirror-cursors"),i.measure=te("div",null,"CodeMirror-measure"),i.lineMeasure=te("div",null,"CodeMirror-measure"),i.lineSpace=Q("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var a=Q("div",[i.lineSpace],"CodeMirror-lines");i.mover=te("div",[a],null,"position: relative"),i.sizer=te("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=te("div",null,null,"position: absolute; height: 50px; width: 1px;"),i.gutters=te("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=te("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=te("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),i.wrapper.setAttribute("translate","no"),O&&f<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),!H&&!(k&&ae)&&(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,i.gutterSpecs=Io(r.gutters,r.lineNumbers),Ma(i),n.init(i)}Zi.prototype.signal=function(e,t){_t(e,t)&&this.events.push(arguments)},Zi.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Ye.apply(null,this.events[e])};var Yi=0,on=null;function Ea(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function us(e){var t=Ea(e);return t.x*=on,t.y*=on,t}function Da(e,t){var n=Ea(t),r=n.x,i=n.y,a=on;0===t.deltaMode&&(r=t.deltaX,i=t.deltaY,a=1);var u=e.display,h=u.scroller,y=h.scrollHeight>h.clientHeight;if(r&&h.scrollWidth>h.clientWidth||i&&y){if(i&&M&&H)e:for(var E=t.target,B=u.view;E!=h;E=E.parentNode)for(var ee=0;ee<B.length;ee++)if(B[ee].node==E){e.display.currentWheelTarget=E;break e}if(r&&!k&&!j&&null!=a)return i&&y&&pi(e,Math.max(0,h.scrollTop+i*a)),Ln(e,Math.max(0,h.scrollLeft+r*a)),(!i||i&&y)&&gt(t),void(u.wheelStartX=null);if(i&&null!=a){var X=i*a,he=e.doc.scrollTop,me=he+u.wrapper.clientHeight;X<0?he=Math.max(0,he+X-50):me=Math.min(e.doc.height,me+X+50),Do(e,{top:he,bottom:me})}Yi<20&&0!==t.deltaMode&&(null==u.wheelStartX?(u.wheelStartX=h.scrollLeft,u.wheelStartY=h.scrollTop,u.wheelDX=r,u.wheelDY=i,setTimeout(function(){if(null!=u.wheelStartX){var Se=h.scrollLeft-u.wheelStartX,De=h.scrollTop-u.wheelStartY,Oe=De&&u.wheelDY&&De/u.wheelDY||Se&&u.wheelDX&&Se/u.wheelDX;u.wheelStartX=u.wheelStartY=null,Oe&&(on=(on*Yi+Oe)/(Yi+1),++Yi)}},200)):(u.wheelDX+=r,u.wheelDY+=i))}}O?on=-.53:k?on=15:V?on=-.7:U&&(on=-1/3);var Ir=function(e,t){this.ranges=e,this.primIndex=t};Ir.prototype.primary=function(){return this.ranges[this.primIndex]},Ir.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!Ce(n.anchor,r.anchor)||!Ce(n.head,r.head))return!1}return!0},Ir.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new dt(g(this.ranges[t].anchor),g(this.ranges[t].head));return new Ir(e,this.primIndex)},Ir.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},Ir.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(z(t,r.from())>=0&&z(e,r.to())<=0)return n}return-1};var dt=function(e,t){this.anchor=e,this.head=t};function Gr(e,t,n){var r=e&&e.options.selectionsMayTouch,i=t[n];t.sort(function(ee,X){return z(ee.from(),X.from())}),n=Te(t,i);for(var a=1;a<t.length;a++){var u=t[a],h=t[a-1],d=z(h.to(),u.from());if(r&&!u.empty()?d>0:d>=0){var y=le(h.from(),u.from()),E=T(h.to(),u.to()),B=h.empty()?u.from()==u.head:h.from()==h.head;a<=n&&--n,t.splice(--a,2,new dt(B?E:y,B?y:E))}}return new Ir(t,n)}function cn(e,t){return new Ir([new dt(e,t||e)],0)}function hn(e){return e.text?S(e.from.line+e.text.length-1,Re(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Fa(e,t){if(z(e,t.from)<0)return e;if(z(e,t.to)<=0)return hn(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=hn(t).ch-t.to.ch),S(n,r)}function No(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new dt(Fa(i.anchor,t),Fa(i.head,t)))}return Gr(e.cm,n,e.sel.primIndex)}function Oa(e,t,n){return e.line==t.line?S(n.line,e.ch-t.ch+n.ch):S(n.line+(e.line-t.line),e.ch)}function Bo(e){e.doc.mode=pr(e.options,e.doc.modeOption),xi(e)}function xi(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,mi(e,100),e.state.modeGen++,e.curOp&&br(e)}function Ia(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Re(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Po(e,t,n,r){function i(Oe){return n?n[Oe]:null}function a(Oe,Fe,Ne){(function we(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),ni(e),ii(e,n);var i=r?r(e):1;i!=e.height&&sr(e,i)})(Oe,Fe,Ne,r),Jt(Oe,"change",Oe,t)}function u(Oe,Fe){for(var Ne=[],Ze=Oe;Ze<Fe;++Ze)Ne.push(new pe(y[Ze],i(Ze),r));return Ne}var h=t.from,d=t.to,y=t.text,E=Ie(e,h.line),B=Ie(e,d.line),ee=Re(y),X=i(y.length-1),he=d.line-h.line;if(t.full)e.insert(0,u(0,y.length)),e.remove(y.length,e.size-y.length);else if(Ia(e,t)){var me=u(0,y.length-1);a(B,B.text,X),he&&e.remove(h.line,he),me.length&&e.insert(h.line,me)}else if(E==B)if(1==y.length)a(E,E.text.slice(0,h.ch)+ee+E.text.slice(d.ch),X);else{var Se=u(1,y.length-1);Se.push(new pe(ee+E.text.slice(d.ch),X,r)),a(E,E.text.slice(0,h.ch)+y[0],i(0)),e.insert(h.line+1,Se)}else if(1==y.length)a(E,E.text.slice(0,h.ch)+y[0]+B.text.slice(d.ch),i(0)),e.remove(h.line+1,he);else{a(E,E.text.slice(0,h.ch)+y[0],i(0)),a(B,ee+B.text.slice(d.ch),X);var De=u(1,y.length-1);he>1&&e.remove(h.line+1,he-1),e.insert(h.line+1,De)}Jt(e,"change",e,t)}function dn(e,t,n){!function r(i,a,u){if(i.linked)for(var h=0;h<i.linked.length;++h){var d=i.linked[h];if(d.doc!=a){var y=u&&d.sharedHist;n&&!y||(t(d.doc,y),r(d.doc,i,y))}}}(e,null,!0)}function Na(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Co(e),Bo(e),Ba(e),e.options.direction=t.direction,e.options.lineWrapping||xe(e),e.options.mode=t.modeOption,br(e)}function Ba(e){("rtl"==e.doc.direction?fe:K)(e.display.lineDiv,"CodeMirror-rtl")}function Ji(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Ro(e,t){var n={from:g(t.from),to:hn(t),text:rr(e,t.from,t.to)};return Ha(e,n,t.from.line,t.to.line+1),dn(e,function(r){return Ha(r,n,t.from.line,t.to.line+1)},!0),n}function Pa(e){for(;e.length&&Re(e).ranges;)e.pop()}function Ra(e,t,n,r){var i=e.history;i.undone.length=0;var u,h,a=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(u=function hs(e,t){return t?(Pa(e.done),Re(e.done)):e.done.length&&!Re(e.done).ranges?Re(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Re(e.done)):void 0}(i,i.lastOp==r)))h=Re(u.changes),0==z(t.from,t.to)&&0==z(t.from,h.to)?h.to=hn(t):u.changes.push(Ro(e,t));else{var d=Re(i.done);for((!d||!d.ranges)&&Qi(e.sel,i.done),u={changes:[Ro(e,t)],generation:i.generation},i.done.push(u);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,h||Ye(e,"historyAdded")}function ps(e,t,n,r){var i=e.history,a=r&&r.origin;n==i.lastSelOp||a&&i.lastSelOrigin==a&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==a||function ds(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,a,Re(i.done),t))?i.done[i.done.length-1]=t:Qi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=a,i.lastSelOp=n,r&&!1!==r.clearRedo&&Pa(i.undone)}function Qi(e,t){var n=Re(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Ha(e,t,n,r){var i=t["spans_"+e.id],a=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(u){u.markedSpans&&((i||(i=t["spans_"+e.id]={}))[a]=u.markedSpans),++a})}function vs(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function _a(e,t){var n=function gs(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(vs(n[i]));return r}(e,t),r=ri(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var a=n[i],u=r[i];if(a&&u)e:for(var h=0;h<u.length;++h){for(var d=u[h],y=0;y<a.length;++y)if(a[y].marker==d.marker)continue e;a.push(d)}else u&&(n[i]=u)}return n}function Kn(e,t,n){for(var r=[],i=0;i<e.length;++i){var a=e[i];if(a.ranges)r.push(n?Ir.prototype.deepCopy.call(a):a);else{var u=a.changes,h=[];r.push({changes:h});for(var d=0;d<u.length;++d){var y=u[d],E=void 0;if(h.push({from:y.from,to:y.to,text:y.text}),t)for(var B in y)(E=B.match(/^spans_(\d+)$/))&&Te(t,Number(E[1]))>-1&&(Re(h)[B]=y[B],delete y[B])}}}return r}function Ho(e,t,n,r){if(r){var i=e.anchor;if(n){var a=z(t,i)<0;a!=z(n,i)<0?(i=t,t=n):a!=z(t,n)<0&&(t=n)}return new dt(i,t)}return new dt(n||t,t)}function Xi(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),fr(e,new Ir([Ho(e.sel.primary(),t,n,i)],0),r)}function Wa(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),a=0;a<e.sel.ranges.length;a++)r[a]=Ho(e.sel.ranges[a],t[a],null,i);fr(e,Gr(e.cm,r,e.sel.primIndex),n)}function _o(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,fr(e,Gr(e.cm,i,e.sel.primIndex),r)}function Ka(e,t,n,r){fr(e,cn(t,n),r)}function Ua(e,t,n){var r=e.history.done,i=Re(r);i&&i.ranges?(r[r.length-1]=t,qi(e,t,n)):fr(e,t,n)}function fr(e,t,n){qi(e,t,n),ps(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function qi(e,t,n){(_t(e,"beforeSelectionChange")||e.cm&&_t(e.cm,"beforeSelectionChange"))&&(t=function ms(e,t,n){var r={ranges:t.ranges,update:function(i){this.ranges=[];for(var a=0;a<i.length;a++)this.ranges[a]=new dt(ke(e,i[a].anchor),ke(e,i[a].head))},origin:n&&n.origin};return Ye(e,"beforeSelectionChange",e,r),e.cm&&Ye(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?Gr(e.cm,r.ranges,r.ranges.length-1):t}(e,t,n));var r=n&&n.bias||(z(t.primary().head,e.sel.primary().head)<0?-1:1);za(e,ja(e,t,r,!0)),(!n||!1!==n.scroll)&&e.cm&&"nocursor"!=e.cm.getOption("readOnly")&&_n(e.cm)}function za(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,tt(e.cm)),Jt(e,"cursorActivity",e))}function Ga(e){za(e,ja(e,e.sel,null,!1))}function ja(e,t,n,r){for(var i,a=0;a<t.ranges.length;a++){var u=t.ranges[a],h=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[a],d=Vi(e,u.anchor,h&&h.anchor,n,r),y=Vi(e,u.head,h&&h.head,n,r);(i||d!=u.anchor||y!=u.head)&&(i||(i=t.ranges.slice(0,a)),i[a]=new dt(d,y))}return i?Gr(e.cm,i,t.primIndex):t}function Un(e,t,n,r,i){var a=Ie(e,t.line);if(a.markedSpans)for(var u=0;u<a.markedSpans.length;++u){var h=a.markedSpans[u],d=h.marker,y="selectLeft"in d?!d.selectLeft:d.inclusiveLeft,E="selectRight"in d?!d.selectRight:d.inclusiveRight;if((null==h.from||(y?h.from<=t.ch:h.from<t.ch))&&(null==h.to||(E?h.to>=t.ch:h.to>t.ch))){if(i&&(Ye(d,"beforeCursorEnter"),d.explicitlyCleared)){if(a.markedSpans){--u;continue}break}if(!d.atomic)continue;if(n){var B=d.find(r<0?1:-1),ee=void 0;if((r<0?E:y)&&(B=Za(e,B,-r,B&&B.line==t.line?a:null)),B&&B.line==t.line&&(ee=z(B,n))&&(r<0?ee<0:ee>0))return Un(e,B,t,r,i)}var X=d.find(r<0?-1:1);return(r<0?y:E)&&(X=Za(e,X,r,X.line==t.line?a:null)),X?Un(e,X,t,r,i):null}}return t}function Vi(e,t,n,r,i){var a=r||1;return Un(e,t,n,a,i)||!i&&Un(e,t,n,a,!0)||Un(e,t,n,-a,i)||!i&&Un(e,t,n,-a,!0)||(e.cantEdit=!0,S(e.first,0))}function Za(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?ke(e,S(t.line-1)):null:n>0&&t.ch==(r||Ie(e,t.line)).text.length?t.line<e.first+e.size-1?S(t.line+1,0):null:new S(t.line,t.ch+n)}function Ya(e){e.setSelection(S(e.firstLine(),0),S(e.lastLine()),ie)}function Ja(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(i,a,u,h){i&&(r.from=ke(e,i)),a&&(r.to=ke(e,a)),u&&(r.text=u),void 0!==h&&(r.origin=h)}),Ye(e,"beforeChange",e,r),e.cm&&Ye(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function zn(e,t,n){if(e.cm){if(!e.cm.curOp)return Qt(e.cm,zn)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(_t(e,"beforeChange")||e.cm&&_t(e.cm,"beforeChange"))||(t=Ja(e,t,!0))){var r=ti&&!n&&function fo(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(X){if(X.markedSpans)for(var he=0;he<X.markedSpans.length;++he){var me=X.markedSpans[he].marker;me.readOnly&&(!r||-1==Te(r,me))&&(r||(r=[])).push(me)}}),!r)return null;for(var i=[{from:t,to:n}],a=0;a<r.length;++a)for(var u=r[a],h=u.find(0),d=0;d<i.length;++d){var y=i[d];if(!(z(y.to,h.from)<0||z(y.from,h.to)>0)){var E=[d,1],B=z(y.from,h.from),ee=z(y.to,h.to);(B<0||!u.inclusiveLeft&&!B)&&E.push({from:y.from,to:h.from}),(ee>0||!u.inclusiveRight&&!ee)&&E.push({from:h.to,to:y.to}),i.splice.apply(i,E),d+=E.length-3}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)Qa(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else Qa(e,t)}}function Qa(e,t){if(1!=t.text.length||""!=t.text[0]||0!=z(t.from,t.to)){var n=No(e,t);Ra(e,t,n,e.cm?e.cm.curOp.id:NaN),ki(e,t,n,ri(e,t));var r=[];dn(e,function(i,a){!a&&-1==Te(r,i.history)&&($a(i.history,t),r.push(i.history)),ki(i,t,null,ri(i,t))})}}function $i(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!r||n){for(var a,i=e.history,u=e.sel,h="undo"==t?i.done:i.undone,d="undo"==t?i.undone:i.done,y=0;y<h.length&&(a=h[y],!(n?a.ranges&&!a.equals(e.sel):!a.ranges));y++);if(y!=h.length){for(i.lastOrigin=i.lastSelOrigin=null;;){if(!(a=h.pop()).ranges){if(r)return void h.push(a);break}if(Qi(a,d),n&&!a.equals(e.sel))return void fr(e,a,{clearRedo:!1});u=a}var E=[];Qi(u,d),d.push({changes:E,generation:i.generation}),i.generation=a.generation||++i.maxGeneration;for(var B=_t(e,"beforeChange")||e.cm&&_t(e.cm,"beforeChange"),ee=function(me){var Se=a.changes[me];if(Se.origin=t,B&&!Ja(e,Se,!1))return h.length=0,{};E.push(Ro(e,Se));var De=me?No(e,Se):Re(h);ki(e,Se,De,_a(e,Se)),!me&&e.cm&&e.cm.scrollIntoView({from:Se.from,to:hn(Se)});var Oe=[];dn(e,function(Fe,Ne){!Ne&&-1==Te(Oe,Fe.history)&&($a(Fe.history,Se),Oe.push(Fe.history)),ki(Fe,Se,null,_a(Fe,Se))})},X=a.changes.length-1;X>=0;--X){var he=ee(X);if(he)return he.v}}}}function Xa(e,t){if(0!=t&&(e.first+=t,e.sel=new Ir(St(e.sel.ranges,function(i){return new dt(S(i.anchor.line+t,i.anchor.ch),S(i.head.line+t,i.head.ch))}),e.sel.primIndex),e.cm)){br(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)un(e.cm,r,"gutter")}}function ki(e,t,n,r){if(e.cm&&!e.cm.curOp)return Qt(e.cm,ki)(e,t,n,r);if(t.to.line<e.first)Xa(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Xa(e,i),t={from:S(e.first,0),to:S(t.to.line+i,t.to.ch),text:[Re(t.text)],origin:t.origin}}var a=e.lastLine();t.to.line>a&&(t={from:t.from,to:S(a,Ie(e,a).text.length),text:[t.text[0]],origin:t.origin}),t.removed=rr(e,t.from,t.to),n||(n=No(e,t)),e.cm?function ys(e,t,n){var r=e.doc,i=e.display,a=t.from,u=t.to,h=!1,d=a.line;e.options.lineWrapping||(d=st(c(Ie(r,a.line))),r.iter(d,u.line+1,function(X){if(X==i.maxLine)return h=!0,!0})),r.sel.contains(t.from,t.to)>-1&&tt(e),Po(r,t,n,va(e)),e.options.lineWrapping||(r.iter(d,a.line+t.text.length,function(X){var he=ve(X);he>i.maxLineLength&&(i.maxLine=X,i.maxLineLength=he,i.maxLineChanged=!0,h=!1)}),h&&(e.curOp.updateMaxLine=!0)),function ei(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=Ie(e,r).stateAfter;if(i&&(!(i instanceof qe)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(r,a.line),mi(e,400);var y=t.text.length-(u.line-a.line)-1;t.full?br(e):a.line!=u.line||1!=t.text.length||Ia(e.doc,t)?br(e,a.line,u.line+1,y):un(e,a.line,"text");var E=_t(e,"changes"),B=_t(e,"change");if(B||E){var ee={from:a,to:u,text:t.text,removed:t.removed,origin:t.origin};B&&Jt(e,"change",e,ee),E&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(ee)}e.display.selForContextMenu=null}(e.cm,t,r):Po(e,t,r),qi(e,n,ie),e.cantEdit&&Vi(e,S(e.firstLine(),0))&&(e.cantEdit=!1)}}function Gn(e,t,n,r,i){var a;r||(r=n),z(r,n)<0&&(n=(a=[r,n])[0],r=a[1]),"string"==typeof t&&(t=e.splitLines(t)),zn(e,{from:n,to:r,text:t,origin:i})}function qa(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function Va(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i],u=!0;if(a.ranges){a.copied||((a=e[i]=a.deepCopy()).copied=!0);for(var h=0;h<a.ranges.length;h++)qa(a.ranges[h].anchor,t,n,r),qa(a.ranges[h].head,t,n,r)}else{for(var d=0;d<a.changes.length;++d){var y=a.changes[d];if(n<y.from.line)y.from=S(y.from.line+r,y.from.ch),y.to=S(y.to.line+r,y.to.ch);else if(t<=y.to.line){u=!1;break}}u||(e.splice(0,i+1),i=0)}}}function $a(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;Va(e.done,n,r,i),Va(e.undone,n,r,i)}function bi(e,t,n,r){var i=t,a=t;return"number"==typeof t?a=Ie(e,ye(e,t)):i=st(t),null==i?null:(r(a,i)&&e.cm&&un(e.cm,i,n),a)}function Ci(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function wi(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}dt.prototype.from=function(){return le(this.anchor,this.head)},dt.prototype.to=function(){return T(this.anchor,this.head)},dt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Ci.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,Be(i),Jt(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},wi.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var a=Math.min(t,i-e),u=r.height;if(r.removeInner(e,a),this.height-=u-r.height,i==a&&(this.children.splice(n--,1),r.parent=null),0==(t-=a))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Ci))){var h=[];this.collapse(h),this.children=[new Ci(h)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],a=i.chunkSize();if(e<=a){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var u=i.lines.length%25+25,h=u;h<i.lines.length;){var d=new Ci(i.lines.slice(h,h+=25));i.height-=d.height,this.children.splice(++r,0,d),d.parent=this}i.lines=i.lines.slice(0,u),this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var n=new wi(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=n.size,e.height-=n.height;var i=Te(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var r=new wi(e.children);r.parent=e,e.children=[r,n],e=r}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],a=i.chunkSize();if(e<a){var u=Math.min(t,a-e);if(i.iterN(e,u,n))return!0;if(0==(t-=u))break;e=0}else e-=a}}};var Si=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function el(e,t,n){Z(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Mo(e,n)}Si.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=st(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var a=fi(this);sr(n,Math.max(0,n.height-a)),e&&(Er(e,function(){el(e,n,-a),un(e,r,"widget")}),Jt(e,"lineWidgetCleared",e,this,r))}},Si.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=fi(this)-t;i&&(F(this.doc,r)||sr(r,r.height+i),n&&Er(n,function(){n.curOp.forceUpdate=!0,el(n,r,i),Jt(n,"lineWidgetChanged",n,e,st(r))}))},ft(Si);var tl=0,pn=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++tl};function jn(e,t,n,r,i){if(r&&r.shared)return function ks(e,t,n,r,i){(r=Ge(r)).shared=!1;var a=[jn(e,t,n,r,i)],u=a[0],h=r.widgetNode;return dn(e,function(d){h&&(r.widgetNode=h.cloneNode(!0)),a.push(jn(d,ke(d,t),ke(d,n),r,i));for(var y=0;y<d.linked.length;++y)if(d.linked[y].isParent)return;u=Re(a)}),new Li(a,u)}(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Qt(e.cm,jn)(e,t,n,r,i);var a=new pn(e,i),u=z(t,n);if(r&&Ge(r,a,!1),u>0||0==u&&!1!==a.clearWhenEmpty)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=Q("span",[a.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(s(e,t.line,t,n,a)||t.line!=n.line&&s(e,n.line,t,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function Bi(){_r=!0}()}a.addToHistory&&Ra(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var y,h=t.line,d=e.cm;if(e.iter(h,n.line+1,function(B){d&&a.collapsed&&!d.options.lineWrapping&&c(B)==d.display.maxLine&&(y=!0),a.collapsed&&h!=t.line&&sr(B,0),function Pi(e,t,n){var r=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));r&&r.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],r&&r.add(e.markedSpans)),t.marker.attachLine(e)}(B,new kr(a,h==t.line?t.ch:null,h==n.line?n.ch:null),e.cm&&e.cm.curOp),++h}),a.collapsed&&e.iter(t.line,n.line+1,function(B){F(e,B)&&sr(B,0)}),a.clearOnEnter&&We(a,"beforeCursorEnter",function(){return a.clear()}),a.readOnly&&(function Ni(){ti=!0}(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++tl,a.atomic=!0),d){if(y&&(d.curOp.updateMaxLine=!0),a.collapsed)br(d,t.line,n.line+1);else if(a.className||a.startStyle||a.endStyle||a.css||a.attributes||a.title)for(var E=t.line;E<=n.line;E++)un(d,E,"text");a.atomic&&Ga(d.doc),Jt(d,"markerAdded",d,a)}return a}pn.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&An(e),_t(this,"clear")){var n=this.find();n&&Jt(this,"clear",n.from,n.to)}for(var r=null,i=null,a=0;a<this.lines.length;++a){var u=this.lines[a],h=yn(u.markedSpans,this);e&&!this.collapsed?un(e,st(u),"text"):e&&(null!=h.to&&(i=st(u)),null!=h.from&&(r=st(u))),u.markedSpans=xn(u.markedSpans,h),null==h.from&&this.collapsed&&!F(this.doc,u)&&e&&sr(u,Pn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var d=0;d<this.lines.length;++d){var y=c(this.lines[d]),E=ve(y);E>e.display.maxLineLength&&(e.display.maxLine=y,e.display.maxLineLength=E,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&br(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Ga(e.doc)),e&&Jt(e,"markerCleared",e,this,r,i),t&&Mn(e),this.parent&&this.parent.clear()}},pn.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,r,i=0;i<this.lines.length;++i){var a=this.lines[i],u=yn(a.markedSpans,this);if(null!=u.from&&(n=S(t?a:st(a),u.from),-1==e))return n;if(null!=u.to&&(r=S(t?a:st(a),u.to),1==e))return r}return n&&{from:n,to:r}},pn.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;!t||!r||Er(r,function(){var i=t.line,a=st(t.line),u=vo(r,a);if(u&&(la(u),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!F(n.doc,i)&&null!=n.height){var h=n.height;n.height=null;var d=fi(n)-h;d&&sr(i,i.height+d)}Jt(r,"markerChanged",r,e)})},pn.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||-1==Te(t.maybeHiddenMarkers,this))&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},pn.prototype.detachLine=function(e){if(this.lines.splice(Te(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},ft(pn);var Li=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function rl(e){return e.findMarks(S(e.first,0),e.clipPos(S(e.lastLine())),function(t){return t.parent})}function Cs(e){for(var t=function(r){var i=e[r],a=[i.primary.doc];dn(i.primary.doc,function(d){return a.push(d)});for(var u=0;u<i.markers.length;u++){var h=i.markers[u];-1==Te(a,h.doc)&&(h.parent=null,i.markers.splice(u--,1))}},n=0;n<e.length;n++)t(n)}Li.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Jt(this,"clear")}},Li.prototype.find=function(e,t){return this.primary.find(e,t)},ft(Li);var ws=0,Cr=function(e,t,n,r,i){if(!(this instanceof Cr))return new Cr(e,t,n,r,i);null==n&&(n=0),wi.call(this,[new Ci([new pe("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var a=S(n,0);this.sel=cn(a),this.history=new Ji(null),this.id=++ws,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Po(this,{from:a,to:a,text:e}),fr(this,cn(a),ie)};Cr.prototype=kt(wi.prototype,{constructor:Cr,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Or(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Xt(function(e){var t=S(this.first,0),n=this.first+this.size-1;zn(this,{from:t,to:S(n,Ie(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&di(this.cm,0,0),fr(this,cn(t),ie)}),replaceRange:function(e,t,n,r){Gn(this,e,t=ke(this,t),n=n?ke(this,n):t,r)},getRange:function(e,t,n){var r=rr(this,ke(this,e),ke(this,t));return!1===n?r:r.join(""===n?"":n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(ur(this,e))return Ie(this,e)},getLineNumber:function(e){return st(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Ie(this,e)),c(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ke(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Xt(function(e,t,n){Ka(this,ke(this,"number"==typeof e?S(e,t||0):e),null,n)}),setSelection:Xt(function(e,t,n){Ka(this,ke(this,e),ke(this,t||e),n)}),extendSelection:Xt(function(e,t,n){Xi(this,ke(this,e),t&&ke(this,t),n)}),extendSelections:Xt(function(e,t){Wa(this,je(this,e),t)}),extendSelectionsBy:Xt(function(e,t){Wa(this,je(this,St(this.sel.ranges,e)),t)}),setSelections:Xt(function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new dt(ke(this,e[i].anchor),ke(this,e[i].head||e[i].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),fr(this,Gr(this.cm,r,t),n)}}),addSelection:Xt(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new dt(ke(this,e),ke(this,t||e))),fr(this,Gr(this.cm,r,r.length-1),n)}),getSelection:function(e){for(var n,t=this.sel.ranges,r=0;r<t.length;r++){var i=rr(this,t[r].from(),t[r].to());n=n?n.concat(i):i}return!1===e?n:n.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=rr(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Xt(function(e,t,n){for(var r=[],i=this.sel,a=0;a<i.ranges.length;a++){var u=i.ranges[a];r[a]={from:u.from(),to:u.to(),text:this.splitLines(e[a]),origin:n}}for(var h=t&&"end"!=t&&function fs(e,t,n){for(var r=[],i=S(e.first,0),a=i,u=0;u<t.length;u++){var h=t[u],d=Oa(h.from,i,a),y=Oa(hn(h),i,a);if(i=h.to,a=y,"around"==n){var E=e.sel.ranges[u],B=z(E.head,E.anchor)<0;r[u]=new dt(B?y:d,B?d:y)}else r[u]=new dt(d,d)}return new Ir(r,e.sel.primIndex)}(this,r,t),d=r.length-1;d>=0;d--)zn(this,r[d]);h?Ua(this,h):this.cm&&_n(this.cm)}),undo:Xt(function(){$i(this,"undo")}),redo:Xt(function(){$i(this,"redo")}),undoSelection:Xt(function(){$i(this,"undo",!0)}),redoSelection:Xt(function(){$i(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new Ji(this.history),dn(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Kn(this.history.done),undone:Kn(this.history.undone)}},setHistory:function(e){var t=this.history=new Ji(this.history);t.done=Kn(e.done.slice(0),null,!0),t.undone=Kn(e.undone.slice(0),null,!0)},setGutterMarker:Xt(function(e,t,n){return bi(this,e,"gutter",function(r){var i=r.gutterMarkers||(r.gutterMarkers={});return i[t]=n,!n&&ir(i)&&(r.gutterMarkers=null),!0})}),clearGutter:Xt(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&bi(t,n,"gutter",function(){return n.gutterMarkers[e]=null,ir(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!(ur(this,e)&&(t=e,e=Ie(this,e))))return null}else if(null==(t=st(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Xt(function(e,t,n){return bi(this,e,"gutter"==t?"gutter":"class",function(r){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(r[i]){if(C(n).test(r[i]))return!1;r[i]+=" "+n}else r[i]=n;return!0})}),removeLineClass:Xt(function(e,t,n){return bi(this,e,"gutter"==t?"gutter":"class",function(r){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",a=r[i];if(!a)return!1;if(null==n)r[i]=null;else{var u=a.match(C(n));if(!u)return!1;var h=u.index+u[0].length;r[i]=a.slice(0,u.index)+(u.index&&h!=a.length?" ":"")+a.slice(h)||null}return!0})}),addLineWidget:Xt(function(e,t,n){return function xs(e,t,n,r){var i=new Si(e,n,r),a=e.cm;return a&&i.noHScroll&&(a.display.alignWidgets=!0),bi(e,t,"widget",function(u){var h=u.widgets||(u.widgets=[]);if(null==i.insertAt?h.push(i):h.splice(Math.min(h.length,Math.max(0,i.insertAt)),0,i),i.line=u,a&&!F(e,u)){var d=Z(u)<e.scrollTop;sr(u,u.height+fi(i)),d&&Mo(a,i.height),a.curOp.forceUpdate=!0}return!0}),a&&Jt(a,"lineWidgetAdded",a,i,"number"==typeof t?t:st(t)),i}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return jn(this,ke(this,e),ke(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return jn(this,e=ke(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=Ie(this,(e=ke(this,e)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=ke(this,e),t=ke(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(a){var u=a.markedSpans;if(u)for(var h=0;h<u.length;h++){var d=u[h];!(null!=d.to&&i==e.line&&e.ch>=d.to||null==d.from&&i!=e.line||null!=d.from&&i==t.line&&d.from>=t.ch)&&(!n||n(d.marker))&&r.push(d.marker.parent||d.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var a=i.text.length+r;if(a>e)return t=e,!0;e-=a,++n}),ke(this,S(n,t))},indexFromPos:function(e){var t=(e=ke(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(r){t+=r.text.length+n}),t},copy:function(e){var t=new Cr(Or(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new Cr(Or(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function bs(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),a=e.clipPos(i.from),u=e.clipPos(i.to);if(z(a,u)){var h=jn(e,a,u,r.primary,r.primary.type);r.markers.push(h),h.parent=r}}}(r,rl(this)),r},unlinkDoc:function(e){if(e instanceof wt&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Cs(rl(this));break}if(e.history==this.history){var r=[e.id];dn(e,function(i){return r.push(i.id)},!0),e.history=new Ji(null),e.history.done=Kn(this.history.done,r),e.history.undone=Kn(this.history.undone,r)}},iterLinkedDocs:function(e){dn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):tn(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Xt(function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&function cs(e){Er(e,function(){Ba(e),br(e)})}(this.cm))})}),Cr.prototype.eachLine=Cr.prototype.iter;var nl=0;function Ss(e){var t=this;if(il(t),!ot(t,e)&&!nn(t.display,e)){gt(e),O&&(nl=+new Date);var n=wn(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,a=Array(i),u=0,h=function(){++u==i&&Qt(t,function(){var X={from:n=ke(t.doc,n),to:n,text:t.doc.splitLines(a.filter(function(he){return null!=he}).join(t.doc.lineSeparator())),origin:"paste"};zn(t.doc,X),Ua(t.doc,cn(ke(t.doc,n),ke(t.doc,hn(X))))})()},d=function(X,he){if(t.options.allowDropFileTypes&&-1==Te(t.options.allowDropFileTypes,X.type))h();else{var me=new FileReader;me.onerror=function(){return h()},me.onload=function(){var Se=me.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Se)||(a[he]=Se),h()},me.readAsText(X)}},y=0;y<r.length;y++)d(r[y],y);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var E=e.dataTransfer.getData("Text");if(E){var B;if(t.state.draggingText&&!t.state.draggingText.copy&&(B=t.listSelections()),qi(t.doc,cn(n,n)),B)for(var ee=0;ee<B.length;++ee)Gn(t.doc,"",B[ee].anchor,B[ee].head,"drag");t.replaceSelection(E,"around","paste"),t.display.input.focus()}}catch{}}}}function il(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function ol(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<t.length;r++){var i=t[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation(function(){for(var a=0;a<n.length;a++)e(n[a])})}}var al=!1;function As(){al||(function Ms(){var e;We(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,ol(Es)},100))}),We(window,"blur",function(){return ol(Hn)})}(),al=!0)}function Es(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var vn={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ti=0;Ti<10;Ti++)vn[Ti+48]=vn[Ti+96]=String(Ti);for(var eo=65;eo<=90;eo++)vn[eo]=String.fromCharCode(eo);for(var Ai=1;Ai<=12;Ai++)vn[Ai+111]=vn[Ai+63235]="F"+Ai;var an={};function Ds(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var n,r,i,a,u=0;u<t.length-1;u++){var h=t[u];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))n=!0;else if(/^(c|ctrl|control)$/i.test(h))r=!0;else{if(!/^s(hift)?$/i.test(h))throw new Error("Unrecognized modifier name: "+h);i=!0}}return n&&(e="Alt-"+e),r&&(e="Ctrl-"+e),a&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function Fs(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=St(n.split(" "),Ds),a=0;a<i.length;a++){var u=void 0,h=void 0;a==i.length-1?(h=i.join(" "),u=r):(h=i.slice(0,a+1).join(" "),u="...");var d=t[h];if(d){if(d!=u)throw new Error("Inconsistent bindings for "+h)}else t[h]=u}delete e[n]}for(var y in t)e[y]=t[y];return e}function Zn(e,t,n,r){var i=(t=to(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Zn(e,t.fallthrough,n,r);for(var a=0;a<t.fallthrough.length;a++){var u=Zn(e,t.fallthrough[a],n,r);if(u)return u}}}function ll(e){var t="string"==typeof e?e:vn[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function sl(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(D?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(D?t.ctrlKey:t.metaKey)&&"Mod"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function ul(e,t){if(j&&34==e.keyCode&&e.char)return!1;var n=vn[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),sl(n,e,t))}function to(e){return"string"==typeof e?an[e]:e}function Yn(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var a=t(n[i]);r.length&&z(a.from,Re(r).to)<=0;){var u=r.pop();if(z(u.from,a.from)<0){a.from=u.from;break}}r.push(a)}Er(e,function(){for(var h=r.length-1;h>=0;h--)Gn(e.doc,"",r[h].from,r[h].to,"+delete");_n(e)})}function Wo(e,t,n){var r=dr(e.text,t+n,n);return r<0||r>e.text.length?null:r}function Ko(e,t,n){var r=Wo(e,t.ch,n);return null==r?null:new S(t.line,r,n<0?"after":"before")}function Uo(e,t,n,r,i){if(e){"rtl"==t.doc.direction&&(i=-i);var a=it(n,t.doc.direction);if(a){var y,u=i<0?Re(a):a[0],d=i<0==(1==u.level)?"after":"before";if(u.level>0||"rtl"==t.doc.direction){var E=Bn(t,n),B=Xr(t,E,y=i<0?n.text.length-1:0).top;y=Kr(function(ee){return Xr(t,E,ee).top==B},i<0==(1==u.level)?u.from:u.to-1,y),"before"==d&&(y=Wo(n,y,1))}else y=i<0?u.to:u.from;return new S(r,y,d)}}return new S(r,i<0?n.text.length:0,i<0?"before":"after")}an.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},an.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},an.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},an.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},an.default=M?an.macDefault:an.pcDefault;var Mi={selectAll:Ya,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),ie)},killLine:function(e){return Yn(e,function(t){if(t.empty()){var n=Ie(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:S(t.head.line+1,0)}:{from:t.head,to:S(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Yn(e,function(t){return{from:S(t.from().line,0),to:ke(e.doc,S(t.to().line+1,0))}})},delLineLeft:function(e){return Yn(e,function(t){return{from:S(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return Yn(e,function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}})},delWrappedLineRight:function(e){return Yn(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(S(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(S(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return fl(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return cl(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function Is(e,t){var n=Ie(e.doc,t),r=function p(e){for(var t;t=o(e);)e=t.find(1,!0).line;return e}(n);return r!=n&&(t=st(r)),Uo(!0,e,n,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},Ee)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},Ee)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?cl(e,t.head):r},Ee)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var a=n[i].from(),u=N(e.getLine(a.line),a.ch,r);t.push(Ue(r-u%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Er(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,a=Ie(e.doc,i.line).text;if(a)if(i.ch==a.length&&(i=new S(i.line,i.ch-1)),i.ch>0)i=new S(i.line,i.ch+1),e.replaceRange(a.charAt(i.ch-1)+a.charAt(i.ch-2),S(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var u=Ie(e.doc,i.line-1).text;u&&(i=new S(i.line,1),e.replaceRange(a.charAt(0)+e.doc.lineSeparator()+u.charAt(u.length-1),S(i.line-1,u.length-1),i,"+transpose"))}n.push(new dt(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){return Er(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);_n(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function fl(e,t){var n=Ie(e.doc,t),r=c(n);return r!=n&&(t=st(r)),Uo(!0,e,r,t,1)}function cl(e,t){var n=fl(e,t.line),r=Ie(e.doc,n.line),i=it(r,e.doc.direction);if(!i||0==i[0].level){var a=Math.max(n.ch,r.text.search(/\S/));return S(n.line,t.line==n.line&&t.ch<=a&&t.ch?0:a,n.sticky)}return n}function ro(e,t,n){if("string"==typeof t&&!(t=Mi[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=J}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}var Bs=new b;function Ei(e,t,n,r){var i=e.state.keySeq;if(i){if(ll(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Bs.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),hl(e,i+" "+t,n,r))return!0}return hl(e,t,n,r)}function hl(e,t,n,r){var i=function Ns(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Zn(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Zn(t,e.options.extraKeys,n,e)||Zn(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&Jt(e,"keyHandled",e,t,n),("handled"==i||"multi"==i)&&(gt(n),So(e)),!!i}function dl(e,t){var n=ul(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?Ei(e,"Shift-"+n,t,function(r){return ro(e,r,!0)})||Ei(e,n,t,function(r){if("string"==typeof r?/^go[A-Z]/.test(r):r.motion)return ro(e,r)}):Ei(e,n,t,function(r){return ro(e,r)}))}var zo=null;function pl(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=ue(),ot(t,e)))){O&&f<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=dl(t,e);j&&(zo=r?n:null,!r&&88==n&&!mn&&(M?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),k&&!M&&!r&&46==n&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==n&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&function Rs(e){var t=e.display.lineDiv;function n(r){(18==r.keyCode||!r.altKey)&&(K(t,"CodeMirror-crosshair"),pt(document,"keyup",n),pt(document,"mouseover",n))}fe(t,"CodeMirror-crosshair"),We(document,"keyup",n),We(document,"mouseover",n)}(t)}}function vl(e){16==e.keyCode&&(this.doc.sel.shift=!1),ot(this,e)}function gl(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||nn(t.display,e)||ot(t,e)||e.ctrlKey&&!e.altKey||M&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(j&&n==zo)return zo=null,void gt(e);if(!j||e.which&&!(e.which<10)||!dl(t,e)){var i=String.fromCharCode(r??n);"\b"!=i&&(function Ps(e,t,n){return Ei(e,"'"+n+"'",t,function(r){return ro(e,r,!0)})}(t,e,i)||t.display.input.onKeyPress(e))}}}var Di,Fi,Go=function(e,t,n){this.time=e,this.pos=t,this.button=n};function ml(e){var t=this,n=t.display;if(!(ot(t,e)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=e.shiftKey,nn(n,e))return void(H||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100)));if(!jo(t,e)){var r=wn(t,e),i=$r(e),a=r?function _s(e,t){var n=+new Date;return Fi&&Fi.compare(n,e,t)?(Di=Fi=null,"triple"):Di&&Di.compare(n,e,t)?(Fi=new Go(n,e,t),Di=null,"double"):(Di=new Go(n,e,t),Fi=null,"single")}(r,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),(!r||!function Ws(e,t,n,r,i){var a="Click";return"double"==r?a="Double"+a:"triple"==r&&(a="Triple"+a),Ei(e,sl(a=(1==t?"Left":2==t?"Middle":"Right")+a,i),i,function(u){if("string"==typeof u&&(u=Mi[u]),!u)return!1;var h=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),h=u(e,n)!=J}finally{e.state.suppressEdits=!1}return h})}(t,i,r,a,e))&&(1==i?r?function Us(e,t,n,r){O?setTimeout(_e(ya,e),0):e.curOp.focus=ue();var u,i=function Ks(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};return null==i.unit&&(i.unit=(W?n.shiftKey&&n.metaKey:n.altKey)?"rectangle":"single"==t?"char":"double"==t?"word":"line"),(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=M?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(M?n.altKey:n.ctrlKey)),i}(e,n,r),a=e.doc.sel;e.options.dragDrop&&Nr&&!e.isReadOnly()&&"single"==n&&(u=a.contains(t))>-1&&(z((u=a.ranges[u]).from(),t)<0||t.xRel>0)&&(z(u.to(),t)>0||t.xRel<0)?function zs(e,t,n,r){var i=e.display,a=!1,u=Qt(e,function(y){H&&(i.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Lo(e)),pt(i.wrapper.ownerDocument,"mouseup",u),pt(i.wrapper.ownerDocument,"mousemove",h),pt(i.scroller,"dragstart",d),pt(i.scroller,"drop",u),a||(gt(y),r.addNew||Xi(e.doc,n,null,null,r.extend),H&&!U||O&&9==f?setTimeout(function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()},20):i.input.focus())}),h=function(y){a=a||Math.abs(t.clientX-y.clientX)+Math.abs(t.clientY-y.clientY)>=10},d=function(){return a=!0};H&&(i.scroller.draggable=!0),e.state.draggingText=u,u.copy=!r.moveOnDrag,We(i.wrapper.ownerDocument,"mouseup",u),We(i.wrapper.ownerDocument,"mousemove",h),We(i.scroller,"dragstart",d),We(i.scroller,"drop",u),e.state.delayingBlurEvent=!0,setTimeout(function(){return i.input.focus()},20),i.scroller.dragDrop&&i.scroller.dragDrop()}(e,r,t,i):function Gs(e,t,n,r){O&&Lo(e);var i=e.display,a=e.doc;gt(t);var u,h,d=a.sel,y=d.ranges;if(r.addNew&&!r.extend?(h=a.sel.contains(n),u=h>-1?y[h]:new dt(n,n)):(u=a.sel.primary(),h=a.sel.primIndex),"rectangle"==r.unit)r.addNew||(u=new dt(n,n)),n=wn(e,t,!0,!0),h=-1;else{var E=yl(e,n,r.unit);u=r.extend?Ho(u,E.anchor,E.head,r.extend):E}r.addNew?-1==h?(h=y.length,fr(a,Gr(e,y.concat([u]),h),{scroll:!1,origin:"*mouse"})):y.length>1&&y[h].empty()&&"char"==r.unit&&!r.extend?(fr(a,Gr(e,y.slice(0,h).concat(y.slice(h+1)),0),{scroll:!1,origin:"*mouse"}),d=a.sel):_o(a,h,u,$):(h=0,fr(a,new Ir([u],0),$),d=a.sel);var B=n;function ee(Fe){if(0!=z(B,Fe))if(B=Fe,"rectangle"==r.unit){for(var Ne=[],Ze=e.options.tabSize,ze=N(Ie(a,n.line).text,n.ch,Ze),rt=N(Ie(a,Fe.line).text,Fe.ch,Ze),mt=Math.min(ze,rt),qt=Math.max(ze,rt),Et=Math.min(n.line,Fe.line),Dr=Math.min(e.lastLine(),Math.max(n.line,Fe.line));Et<=Dr;Et++){var wr=Ie(a,Et).text,Pt=Ve(wr,mt,Ze);mt==qt?Ne.push(new dt(S(Et,Pt),S(Et,Pt))):wr.length>Pt&&Ne.push(new dt(S(Et,Pt),S(Et,Ve(wr,qt,Ze))))}Ne.length||Ne.push(new dt(n,n)),fr(a,Gr(e,d.ranges.slice(0,h).concat(Ne),h),{origin:"*mouse",scroll:!1}),e.scrollIntoView(Fe)}else{var Rt,Sr=u,nr=yl(e,Fe,r.unit),zt=Sr.anchor;z(nr.anchor,zt)>0?(Rt=nr.head,zt=le(Sr.from(),nr.anchor)):(Rt=nr.anchor,zt=T(Sr.to(),nr.head));var Ft=d.ranges.slice(0);Ft[h]=function js(e,t){var n=t.anchor,r=t.head,i=Ie(e.doc,n.line);if(0==z(n,r)&&n.sticky==r.sticky)return t;var a=it(i);if(!a)return t;var u=bt(a,n.ch,n.sticky),h=a[u];if(h.from!=n.ch&&h.to!=n.ch)return t;var y,d=u+(h.from==n.ch==(1!=h.level)?0:1);if(0==d||d==a.length)return t;if(r.line!=n.line)y=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var E=bt(a,r.ch,r.sticky),B=E-u||(r.ch-n.ch)*(1==h.level?-1:1);y=E==d-1||E==d?B<0:B>0}var ee=a[d+(y?-1:0)],X=y==(1==ee.level),he=X?ee.from:ee.to,me=X?"after":"before";return n.ch==he&&n.sticky==me?t:new dt(new S(n.line,he,me),r)}(e,new dt(ke(a,zt),Rt)),fr(a,Gr(e,Ft,h),$)}}var X=i.wrapper.getBoundingClientRect(),he=0;function me(Fe){var Ne=++he,Ze=wn(e,Fe,!0,"rectangle"==r.unit);if(Ze)if(0!=z(Ze,B)){e.curOp.focus=ue(),ee(Ze);var ze=Gi(i,a);(Ze.line>=ze.to||Ze.line<ze.from)&&setTimeout(Qt(e,function(){he==Ne&&me(Fe)}),150)}else{var rt=Fe.clientY<X.top?-20:Fe.clientY>X.bottom?20:0;rt&&setTimeout(Qt(e,function(){he==Ne&&(i.scroller.scrollTop+=rt,me(Fe))}),50)}}function Se(Fe){e.state.selectingText=!1,he=1/0,Fe&&(gt(Fe),i.input.focus()),pt(i.wrapper.ownerDocument,"mousemove",De),pt(i.wrapper.ownerDocument,"mouseup",Oe),a.history.lastSelOrigin=null}var De=Qt(e,function(Fe){0!==Fe.buttons&&$r(Fe)?me(Fe):Se(Fe)}),Oe=Qt(e,Se);e.state.selectingText=Oe,We(i.wrapper.ownerDocument,"mousemove",De),We(i.wrapper.ownerDocument,"mouseup",Oe)}(e,r,t,i)}(t,r,a,e):tr(e)==n.scroller&&gt(e):2==i?(r&&Xi(t.doc,r),setTimeout(function(){return n.input.focus()},20)):3==i&&(R?t.display.input.onContextMenu(e):Lo(t)))}}}function yl(e,t,n){if("char"==n)return new dt(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new dt(S(t.line,0),ke(e.doc,S(t.line+1,0)));var r=n(e,t);return new dt(r.from,r.to)}function xl(e,t,n,r){var i,a;if(t.touches)i=t.touches[0].clientX,a=t.touches[0].clientY;else try{i=t.clientX,a=t.clientY}catch{return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&gt(t);var u=e.display,h=u.lineDiv.getBoundingClientRect();if(a>h.bottom||!_t(e,n))return Vr(t);a-=h.top-u.viewOffset;for(var d=0;d<e.display.gutterSpecs.length;++d){var y=u.gutters.childNodes[d];if(y&&y.getBoundingClientRect().right>=i)return Ye(e,n,e,Wt(e.doc,a),e.display.gutterSpecs[d].className,t),Vr(t)}}function jo(e,t){return xl(e,t,"gutterClick",!0)}function kl(e,t){nn(e.display,t)||function Zs(e,t){return!!_t(e,"gutterContextMenu")&&xl(e,t,"gutterContextMenu",!1)}(e,t)||ot(e,t,"contextmenu")||R||e.display.input.onContextMenu(t)}function bl(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ci(e)}Go.prototype.compare=function(e,t,n){return this.time+400>e&&0==z(t,this.pos)&&n==this.button};var Jn={toString:function(){return"CodeMirror.Init"}},Cl={},no={};function Js(e,t,n){if(!t!=!(n&&n!=Jn)){var i=e.display.dragFunctions,a=t?We:pt;a(e.display.scroller,"dragstart",i.start),a(e.display.scroller,"dragenter",i.enter),a(e.display.scroller,"dragover",i.over),a(e.display.scroller,"dragleave",i.leave),a(e.display.scroller,"drop",i.drop)}}function Qs(e){e.options.lineWrapping?(fe(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(K(e.display.wrapper,"CodeMirror-wrap"),xe(e)),Co(e),br(e),ci(e),setTimeout(function(){return Wn(e)},100)}function wt(e,t){var n=this;if(!(this instanceof wt))return new wt(e,t);this.options=t=t?Ge(t):{},Ge(Cl,t,!1);var r=t.value;"string"==typeof r?r=new Cr(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var i=new wt.inputStyles[t.inputStyle](this),a=this.display=new ss(e,r,i,t);for(var u in a.wrapper.CodeMirror=this,bl(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Sa(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new b,keySeq:null,specialChars:null},t.autofocus&&!ae&&a.input.focus(),O&&f<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function Xs(e){var t=e.display;We(t.scroller,"mousedown",Qt(e,ml)),We(t.scroller,"dblclick",O&&f<11?Qt(e,function(d){if(!ot(e,d)){var y=wn(e,d);if(y&&!jo(e,d)&&!nn(e.display,d)){gt(d);var E=e.findWordAt(y);Xi(e.doc,E.anchor,E.head)}}}):function(d){return ot(e,d)||gt(d)}),We(t.scroller,"contextmenu",function(d){return kl(e,d)}),We(t.input.getField(),"contextmenu",function(d){t.scroller.contains(d.target)||kl(e,d)});var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),(r=t.activeTouch).end=+new Date)}function a(d){if(1!=d.touches.length)return!1;var y=d.touches[0];return y.radiusX<=1&&y.radiusY<=1}function u(d,y){if(null==y.left)return!0;var E=y.left-d.left,B=y.top-d.top;return E*E+B*B>400}We(t.scroller,"touchstart",function(d){if(!ot(e,d)&&!a(d)&&!jo(e,d)){t.input.ensurePolled(),clearTimeout(n);var y=+new Date;t.activeTouch={start:y,moved:!1,prev:y-r.end<=300?r:null},1==d.touches.length&&(t.activeTouch.left=d.touches[0].pageX,t.activeTouch.top=d.touches[0].pageY)}}),We(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),We(t.scroller,"touchend",function(d){var y=t.activeTouch;if(y&&!nn(t,d)&&null!=y.left&&!y.moved&&new Date-y.start<300){var B,E=e.coordsChar(t.activeTouch,"page");B=!y.prev||u(y,y.prev)?new dt(E,E):!y.prev.prev||u(y,y.prev.prev)?e.findWordAt(E):new dt(S(E.line,0),ke(e.doc,S(E.line+1,0))),e.setSelection(B.anchor,B.head),e.focus(),gt(d)}i()}),We(t.scroller,"touchcancel",i),We(t.scroller,"scroll",function(){t.scroller.clientHeight&&(pi(e,t.scroller.scrollTop),Ln(e,t.scroller.scrollLeft,!0),Ye(e,"scroll",e))}),We(t.scroller,"mousewheel",function(d){return Da(e,d)}),We(t.scroller,"DOMMouseScroll",function(d){return Da(e,d)}),We(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(d){ot(e,d)||Ar(d)},over:function(d){ot(e,d)||(function Ts(e,t){var n=wn(e,t);if(n){var r=document.createDocumentFragment();wo(e,n,r),e.display.dragCursor||(e.display.dragCursor=te("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),G(e.display.dragCursor,r)}}(e,d),Ar(d))},start:function(d){return function Ls(e,t){if(O&&(!e.state.draggingText||+new Date-nl<100))Ar(t);else if(!ot(e,t)&&!nn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!U)){var n=te("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",j&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),j&&n.parentNode.removeChild(n)}}(e,d)},drop:Qt(e,Ss),leave:function(d){ot(e,d)||il(e)}};var h=t.input.getField();We(h,"keyup",function(d){return vl.call(e,d)}),We(h,"keydown",Qt(e,pl)),We(h,"keypress",Qt(e,gl)),We(h,"focus",function(d){return To(e,d)}),We(h,"blur",function(d){return Hn(e,d)})}(this),As(),An(this),this.curOp.forceUpdate=!0,Na(this,r),t.autofocus&&!ae||this.hasFocus()?setTimeout(function(){n.hasFocus()&&!n.state.focused&&To(n)},20):Hn(this),no)no.hasOwnProperty(u)&&no[u](this,t[u],Jn);Aa(this),t.finishInit&&t.finishInit(this);for(var h=0;h<Zo.length;++h)Zo[h](this);Mn(this),H&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}wt.defaults=Cl,wt.optionHandlers=no;var Zo=[];function Oi(e,t,n,r){var a,i=e.doc;null==n&&(n="add"),"smart"==n&&(i.mode.indent?a=Ct(e,t).state:n="prev");var u=e.options.tabSize,h=Ie(i,t),d=N(h.text,null,u);h.stateAfter&&(h.stateAfter=null);var E,y=h.text.match(/^\s*/)[0];if(r||/\S/.test(h.text)){if("smart"==n&&((E=i.mode.indent(a,h.text.slice(y.length),h.text))==J||E>150)){if(!r)return;n="prev"}}else E=0,n="not";"prev"==n?E=t>i.first?N(Ie(i,t-1).text,null,u):0:"add"==n?E=d+e.options.indentUnit:"subtract"==n?E=d-e.options.indentUnit:"number"==typeof n&&(E=d+n),E=Math.max(0,E);var B="",ee=0;if(e.options.indentWithTabs)for(var X=Math.floor(E/u);X;--X)ee+=u,B+="\t";if(ee<E&&(B+=Ue(E-ee)),B!=y)return Gn(i,B,S(t,0),S(t,y.length),"+input"),h.stateAfter=null,!0;for(var he=0;he<i.sel.ranges.length;he++){var me=i.sel.ranges[he];if(me.head.line==t&&me.head.ch<y.length){var Se=S(t,y.length);_o(i,he,new dt(Se,Se));break}}}wt.defineInitHook=function(e){return Zo.push(e)};var jr=null;function io(e){jr=e}function Yo(e,t,n,r,i){var a=e.doc;e.display.shift=!1,r||(r=a.sel);var u=+new Date-200,h="paste"==i||e.state.pasteIncoming>u,d=tn(t),y=null;if(h&&r.ranges.length>1)if(jr&&jr.text.join("\n")==t){if(r.ranges.length%jr.text.length==0){y=[];for(var E=0;E<jr.text.length;E++)y.push(a.splitLines(jr.text[E]))}}else d.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(y=St(d,function(De){return[De]}));for(var B=e.curOp.updateInput,ee=r.ranges.length-1;ee>=0;ee--){var X=r.ranges[ee],he=X.from(),me=X.to();X.empty()&&(n&&n>0?he=S(he.line,he.ch-n):e.state.overwrite&&!h?me=S(me.line,Math.min(Ie(a,me.line).text.length,me.ch+Re(d).length)):h&&jr&&jr.lineWise&&jr.text.join("\n")==d.join("\n")&&(he=me=S(he.line,0)));var Se={from:he,to:me,text:y?y[ee%y.length]:d,origin:i||(h?"paste":e.state.cutIncoming>u?"cut":"+input")};zn(e.doc,Se),Jt(e,"inputRead",e,Se)}t&&!h&&Sl(e,t),_n(e),e.curOp.updateInput<2&&(e.curOp.updateInput=B),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function wl(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&Er(t,function(){return Yo(t,n,0,null,"paste")}),!0}function Sl(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var a=e.getModeAt(i.head),u=!1;if(a.electricChars){for(var h=0;h<a.electricChars.length;h++)if(t.indexOf(a.electricChars.charAt(h))>-1){u=Oi(e,i.head.line,"smart");break}}else a.electricInput&&a.electricInput.test(Ie(e.doc,i.head.line).text.slice(0,i.head.ch))&&(u=Oi(e,i.head.line,"smart"));u&&Jt(e,"electricInput",e,i.head.line)}}}function Ll(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,a={anchor:S(i,0),head:S(i+1,0)};n.push(a),t.push(e.getRange(a.anchor,a.head))}return{text:t,ranges:n}}function Tl(e,t,n,r){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",r?"":"off"),e.setAttribute("spellcheck",!!t)}function Al(){var e=te("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=te("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return H?e.style.width="1000px":e.setAttribute("wrap","off"),Me&&(e.style.border="1px solid black"),Tl(e),t}function Jo(e,t,n,r,i){var a=t,u=n,h=Ie(e,t.line),d=i&&"rtl"==e.direction?-n:n;function E(Oe){var Fe;if("codepoint"==r){var Ne=h.text.charCodeAt(t.ch+(n>0?0:-1));Fe=isNaN(Ne)?null:new S(t.line,Math.max(0,Math.min(h.text.length,t.ch+n*((n>0?Ne>=55296&&Ne<56320:Ne>=56320&&Ne<57343)?2:1))),-n)}else Fe=i?function Os(e,t,n,r){var i=it(t,e.doc.direction);if(!i)return Ko(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var a=bt(i,n.ch,n.sticky),u=i[a];if("ltr"==e.doc.direction&&u.level%2==0&&(r>0?u.to>n.ch:u.from<n.ch))return Ko(t,n,r);var d,h=function(De,Oe){return Wo(t,De instanceof S?De.ch:De,Oe)},y=function(De){return e.options.lineWrapping?(d=d||Bn(e,t),pa(e,t,d,De)):{begin:0,end:t.text.length}},E=y("before"==n.sticky?h(n,-1):n.ch);if("rtl"==e.doc.direction||1==u.level){var B=1==u.level==r<0,ee=h(n,B?1:-1);if(null!=ee&&(B?ee<=u.to&&ee<=E.end:ee>=u.from&&ee>=E.begin))return new S(n.line,ee,B?"before":"after")}var he=function(De,Oe,Fe){for(;De>=0&&De<i.length;De+=Oe){var Ze=i[De],ze=Oe>0==(1!=Ze.level),rt=ze?Fe.begin:h(Fe.end,-1);if(Ze.from<=rt&&rt<Ze.to||(rt=ze?Ze.from:h(Ze.to,-1),Fe.begin<=rt&&rt<Fe.end))return mt=rt,ze?new S(n.line,h(mt,1),"before"):new S(n.line,mt,"after")}var mt},me=he(a+r,r,E);if(me)return me;var Se=r>0?E.end:h(E.begin,-1);return null==Se||r>0&&Se==t.text.length||!(me=he(r>0?0:i.length-1,r,y(Se)))?null:me}(e.cm,h,t,n):Ko(h,t,n);if(null==Fe){if(Oe||!function y(){var Oe=t.line+d;return!(Oe<e.first||Oe>=e.first+e.size)&&(t=new S(Oe,t.ch,t.sticky),h=Ie(e,Oe))}())return!1;t=Uo(i,e.cm,h,t.line,d)}else t=Fe;return!0}if("char"==r||"codepoint"==r)E();else if("column"==r)E(!0);else if("word"==r||"group"==r)for(var B=null,ee="group"==r,X=e.cm&&e.cm.getHelper(t,"wordChars"),he=!0;!(n<0)||E(!he);he=!1){var me=h.text.charAt(t.ch)||"\n",Se=hr(me,X)?"w":ee&&"\n"==me?"n":!ee||/\s/.test(me)?null:"p";if(ee&&!he&&!Se&&(Se="s"),B&&B!=Se){n<0&&(n=1,E(),t.sticky="after");break}if(Se&&(B=Se),n>0&&!E(!he))break}var De=Vi(e,t,a,u,!0);return Ce(a,De)&&(De.hitSide=!0),De}function Ml(e,t,n,r){var u,y,i=e.doc,a=t.left;if("page"==r){var h=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),d=Math.max(h-.5*Pn(e.display),3);u=(n>0?t.bottom:t.top)+n*d}else"line"==r&&(u=n>0?t.bottom+3:t.top-3);for(;(y=yo(e,a,u)).outside;){if(n<0?u<=0:u>=i.height){y.hitSide=!0;break}u+=5*n}return y}var vt=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new b,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function El(e,t){var n=vo(e,t.line);if(!n||n.hidden)return null;var r=Ie(e.doc,t.line),i=na(n,r,t.line),a=it(r,e.doc.direction),u="left";a&&(u=bt(a,t.ch)%2?"right":"left");var d=aa(i.map,t.ch,u);return d.offset="right"==d.collapse?d.end:d.start,d}function Qn(e,t){return t&&(e.bad=!0),e}function oo(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return Qn(e.clipPos(S(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var a=e.display.view[i];if(a.node==r)return eu(a,t,n)}}function eu(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!x(r,t))return Qn(S(st(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var a=e.rest?Re(e.rest):e.line;return Qn(S(st(a),a.text.length),i)}var u=3==t.nodeType?t:null,h=t;for(!u&&1==t.childNodes.length&&3==t.firstChild.nodeType&&(u=t.firstChild,n&&(n=u.nodeValue.length));h.parentNode!=r;)h=h.parentNode;var d=e.measure,y=d.maps;function E(Se,De,Oe){for(var Fe=-1;Fe<(y?y.length:0);Fe++)for(var Ne=Fe<0?d.map:y[Fe],Ze=0;Ze<Ne.length;Ze+=3){var ze=Ne[Ze+2];if(ze==Se||ze==De){var rt=st(Fe<0?e.line:e.rest[Fe]),mt=Ne[Ze]+Oe;return(Oe<0||ze!=Se)&&(mt=Ne[Ze+(Oe?1:0)]),S(rt,mt)}}}var B=E(u,h,n);if(B)return Qn(B,i);for(var ee=h.nextSibling,X=u?u.nodeValue.length-n:0;ee;ee=ee.nextSibling){if(B=E(ee,ee.firstChild,0))return Qn(S(B.line,B.ch-X),i);X+=ee.textContent.length}for(var he=h.previousSibling,me=n;he;he=he.previousSibling){if(B=E(he,he.firstChild,-1))return Qn(S(B.line,B.ch+me),i);me+=he.textContent.length}}vt.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;function a(h){for(var d=h.target;d;d=d.parentNode){if(d==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(d.className))break}return!1}function u(h){if(a(h)&&!ot(r,h)){if(r.somethingSelected())io({lineWise:!1,text:r.getSelections()}),"cut"==h.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var d=Ll(r);io({lineWise:!0,text:d.text}),"cut"==h.type&&r.operation(function(){r.setSelections(d.ranges,0,ie),r.replaceSelection("",null,"cut")})}if(h.clipboardData){h.clipboardData.clearData();var y=jr.text.join("\n");if(h.clipboardData.setData("Text",y),h.clipboardData.getData("Text")==y)return void h.preventDefault()}var E=Al(),B=E.firstChild;r.display.lineSpace.insertBefore(E,r.display.lineSpace.firstChild),B.value=jr.text.join("\n");var ee=ue();He(B),setTimeout(function(){r.display.lineSpace.removeChild(E),ee.focus(),ee==i&&n.showPrimarySelection()},50)}}i.contentEditable=!0,Tl(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize),We(i,"paste",function(h){!a(h)||ot(r,h)||wl(h,r)||f<=11&&setTimeout(Qt(r,function(){return t.updateFromDOM()}),20)}),We(i,"compositionstart",function(h){t.composing={data:h.data,done:!1}}),We(i,"compositionupdate",function(h){t.composing||(t.composing={data:h.data,done:!1})}),We(i,"compositionend",function(h){t.composing&&(h.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),We(i,"touchstart",function(){return n.forceCompositionEnd()}),We(i,"input",function(){t.composing||t.readFromDOMSoon()}),We(i,"copy",u),We(i,"cut",u)},vt.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},vt.prototype.prepareSelection=function(){var e=ma(this.cm,!1);return e.focus=ue()==this.div,e},vt.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},vt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},vt.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),r=n.from(),i=n.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||i.line<t.display.viewFrom)e.removeAllRanges();else{var a=oo(t,e.anchorNode,e.anchorOffset),u=oo(t,e.focusNode,e.focusOffset);if(!a||a.bad||!u||u.bad||0!=z(le(a,u),r)||0!=z(T(a,u),i)){var h=t.display.view,d=r.line>=t.display.viewFrom&&El(t,r)||{node:h[0].measure.map[2],offset:0},y=i.line<t.display.viewTo&&El(t,i);if(!y){var E=h[h.length-1].measure,B=E.maps?E.maps[E.maps.length-1]:E.map;y={node:B[B.length-1],offset:B[B.length-2]-B[B.length-3]}}if(!d||!y)return void e.removeAllRanges();var X,ee=e.rangeCount&&e.getRangeAt(0);try{X=ge(d.node,d.offset,y.offset,y.node)}catch{}X&&(!k&&t.state.focused?(e.collapse(d.node,d.offset),X.collapsed||(e.removeAllRanges(),e.addRange(X))):(e.removeAllRanges(),e.addRange(X)),ee&&null==e.anchorNode?e.addRange(ee):k&&this.startGracePeriod()),this.rememberSelection()}}},vt.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},vt.prototype.showMultipleSelections=function(e){G(this.cm.display.cursorDiv,e.cursors),G(this.cm.display.selectionDiv,e.selection)},vt.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},vt.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return x(this.div,t)},vt.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||ue()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},vt.prototype.blur=function(){this.div.blur()},vt.prototype.getField=function(){return this.div},vt.prototype.supportsTouch=function(){return!0},vt.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):Er(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function n(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,n))})},vt.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},vt.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(re&&V&&this.cm.display.gutterSpecs.length&&function Vs(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=oo(t,e.anchorNode,e.anchorOffset),r=oo(t,e.focusNode,e.focusOffset);n&&r&&Er(t,function(){fr(t.doc,cn(n,r),ie),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},vt.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a,u,h,e=this.cm,t=e.display,n=e.doc.sel.primary(),r=n.from(),i=n.to();if(0==r.ch&&r.line>e.firstLine()&&(r=S(r.line-1,Ie(e.doc,r.line-1).length)),i.ch==Ie(e.doc,i.line).text.length&&i.line<e.lastLine()&&(i=S(i.line+1,0)),r.line<t.viewFrom||i.line>t.viewTo-1)return!1;r.line==t.viewFrom||0==(a=Sn(e,r.line))?(u=st(t.view[0].line),h=t.view[0].node):(u=st(t.view[a].line),h=t.view[a-1].node.nextSibling);var y,E,d=Sn(e,i.line);if(d==t.view.length-1?(y=t.viewTo-1,E=t.lineDiv.lastChild):(y=st(t.view[d+1].line)-1,E=t.view[d+1].node.previousSibling),!h)return!1;for(var B=e.doc.splitLines(function $s(e,t,n,r,i){var a="",u=!1,h=e.doc.lineSeparator(),d=!1;function E(){u&&(a+=h,d&&(a+=h),u=d=!1)}function B(X){X&&(E(),a+=X)}function ee(X){if(1==X.nodeType){var he=X.getAttribute("cm-text");if(he)return void B(he);var Se,me=X.getAttribute("cm-marker");if(me){var De=e.findMarks(S(r,0),S(i+1,0),function y(X){return function(he){return he.id==X}}(+me));return void(De.length&&(Se=De[0].find(0))&&B(rr(e.doc,Se.from,Se.to).join(h)))}if("false"==X.getAttribute("contenteditable"))return;var Oe=/^(pre|div|p|li|table|br)$/i.test(X.nodeName);if(!/^br$/i.test(X.nodeName)&&0==X.textContent.length)return;Oe&&E();for(var Fe=0;Fe<X.childNodes.length;Fe++)ee(X.childNodes[Fe]);/^(pre|p)$/i.test(X.nodeName)&&(d=!0),Oe&&(u=!0)}else 3==X.nodeType&&B(X.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;ee(t),t!=n;)t=t.nextSibling,d=!1;return a}(e,h,E,u,y)),ee=rr(e.doc,S(u,0),S(y,Ie(e.doc,y).text.length));B.length>1&&ee.length>1;)if(Re(B)==Re(ee))B.pop(),ee.pop(),y--;else{if(B[0]!=ee[0])break;B.shift(),ee.shift(),u++}for(var X=0,he=0,me=B[0],Se=ee[0],De=Math.min(me.length,Se.length);X<De&&me.charCodeAt(X)==Se.charCodeAt(X);)++X;for(var Oe=Re(B),Fe=Re(ee),Ne=Math.min(Oe.length-(1==B.length?X:0),Fe.length-(1==ee.length?X:0));he<Ne&&Oe.charCodeAt(Oe.length-he-1)==Fe.charCodeAt(Fe.length-he-1);)++he;if(1==B.length&&1==ee.length&&u==r.line)for(;X&&X>r.ch&&Oe.charCodeAt(Oe.length-he-1)==Fe.charCodeAt(Fe.length-he-1);)X--,he++;B[B.length-1]=Oe.slice(0,Oe.length-he).replace(/^\u200b+/,""),B[0]=B[0].slice(X).replace(/\u200b+$/,"");var Ze=S(u,X),ze=S(y,ee.length?Re(ee).length-he:0);return B.length>1||B[0]||z(Ze,ze)?(Gn(e.doc,B,Ze,ze,"+input"),!0):void 0},vt.prototype.ensurePolled=function(){this.forceCompositionEnd()},vt.prototype.reset=function(){this.forceCompositionEnd()},vt.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},vt.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},vt.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&Er(this.cm,function(){return br(e.cm)})},vt.prototype.setUneditable=function(e){e.contentEditable="false"},vt.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Qt(this.cm,Yo)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},vt.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},vt.prototype.onContextMenu=function(){},vt.prototype.resetPosition=function(){},vt.prototype.needsContentAttribute=!0;var Nt=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new b,this.hasSelection=!1,this.composing=null};Nt.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var i=this.textarea;function a(u){if(!ot(r,u)){if(r.somethingSelected())io({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var h=Ll(r);io({lineWise:!0,text:h.text}),"cut"==u.type?r.setSelections(h.ranges,null,ie):(n.prevInput="",i.value=h.text.join("\n"),He(i))}"cut"==u.type&&(r.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),Me&&(i.style.width="0px"),We(i,"input",function(){O&&f>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),We(i,"paste",function(u){ot(r,u)||wl(u,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())}),We(i,"cut",a),We(i,"copy",a),We(e.scroller,"paste",function(u){if(!nn(e,u)&&!ot(r,u)){if(!i.dispatchEvent)return r.state.pasteIncoming=+new Date,void n.focus();var h=new Event("paste");h.clipboardData=u.clipboardData,i.dispatchEvent(h)}}),We(e.lineSpace,"selectstart",function(u){nn(e,u)||gt(u)}),We(i,"compositionstart",function(){var u=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:u,range:r.markText(u,r.getCursor("to"),{className:"CodeMirror-composing"})}}),We(i,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},Nt.prototype.createField=function(e){this.wrapper=Al(),this.textarea=this.wrapper.firstChild},Nt.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Nt.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=ma(e);if(e.options.moveInputWithCursor){var i=zr(e,n.sel.primary().head,"div"),a=t.wrapper.getBoundingClientRect(),u=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+u.top-a.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+u.left-a.left))}return r},Nt.prototype.showSelection=function(e){var n=this.cm.display;G(n.cursorDiv,e.cursors),G(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Nt.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&He(this.textarea),O&&f>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",O&&f>=9&&(this.hasSelection=null))}},Nt.prototype.getField=function(){return this.textarea},Nt.prototype.supportsTouch=function(){return!1},Nt.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!ae||ue()!=this.textarea))try{this.textarea.focus()}catch{}},Nt.prototype.blur=function(){this.textarea.blur()},Nt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Nt.prototype.receivedFocus=function(){this.slowPoll()},Nt.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Nt.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))})},Nt.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||Dt(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(O&&f>=9&&this.hasSelection===i||M&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var a=i.charCodeAt(0);if(8203==a&&!r&&(r="\u200b"),8666==a)return this.reset(),this.cm.execCommand("undo")}for(var u=0,h=Math.min(r.length,i.length);u<h&&r.charCodeAt(u)==i.charCodeAt(u);)++u;return Er(t,function(){Yo(t,i.slice(u),r.length-u,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Nt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Nt.prototype.onKeyPress=function(){O&&f>=9&&(this.hasSelection=null),this.fastPoll()},Nt.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var a=wn(n,e),u=r.scroller.scrollTop;if(a&&!j){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(a)&&Qt(n,fr)(n.doc,cn(a),ie);var B,d=i.style.cssText,y=t.wrapper.style.cssText,E=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-E.top-5)+"px; left: "+(e.clientX-E.left-5)+"px;\n      z-index: 1000; background: "+(O?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",H&&(B=window.scrollY),r.input.focus(),H&&window.scrollTo(null,B),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=X,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),O&&f>=9&&ee(),R){Ar(e);var he=function(){pt(window,"mouseup",he),setTimeout(X,20)};We(window,"mouseup",he)}else setTimeout(X,50)}function ee(){if(null!=i.selectionStart){var me=n.somethingSelected(),Se="\u200b"+(me?i.value:"");i.value="\u21da",i.value=Se,t.prevInput=me?"":"\u200b",i.selectionStart=1,i.selectionEnd=Se.length,r.selForContextMenu=n.doc.sel}}function X(){if(t.contextMenuPending==X&&(t.contextMenuPending=!1,t.wrapper.style.cssText=y,i.style.cssText=d,O&&f<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=u),null!=i.selectionStart)){(!O||O&&f<9)&&ee();var me=0,Se=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"\u200b"==t.prevInput?Qt(n,Ya)(n):me++<10?r.detectingSelectAll=setTimeout(Se,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(Se,200)}}},Nt.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},Nt.prototype.setUneditable=function(){},Nt.prototype.needsContentAttribute=!1,function Ys(e){var t=e.optionHandlers;function n(r,i,a,u){e.defaults[r]=i,a&&(t[r]=u?function(h,d,y){y!=Jn&&a(h,d,y)}:a)}e.defineOption=n,e.Init=Jn,n("value","",function(r,i){return r.setValue(i)},!0),n("mode",null,function(r,i){r.doc.modeOption=i,Bo(r)},!0),n("indentUnit",2,Bo,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(r){xi(r),ci(r),br(r)},!0),n("lineSeparator",null,function(r,i){if(r.doc.lineSep=i,i){var a=[],u=r.doc.first;r.doc.iter(function(d){for(var y=0;;){var E=d.text.indexOf(i,y);if(-1==E)break;y=E+i.length,a.push(S(u,E))}u++});for(var h=a.length-1;h>=0;h--)Gn(r.doc,i,a[h],S(a[h].line,a[h].ch+i.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(r,i,a){r.state.specialChars=new RegExp(i.source+(i.test("\t")?"":"|\t"),"g"),a!=Jn&&r.refresh()}),n("specialCharPlaceholder",ut,function(r){return r.refresh()},!0),n("electricChars",!0),n("inputStyle",ae?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(r,i){return r.getInputField().spellcheck=i},!0),n("autocorrect",!1,function(r,i){return r.getInputField().autocorrect=i},!0),n("autocapitalize",!1,function(r,i){return r.getInputField().autocapitalize=i},!0),n("rtlMoveVisually",!m),n("wholeLineUpdateBefore",!0),n("theme","default",function(r){bl(r),yi(r)},!0),n("keyMap","default",function(r,i,a){var u=to(i),h=a!=Jn&&to(a);h&&h.detach&&h.detach(r,u),u.attach&&u.attach(r,h||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Qs,!0),n("gutters",[],function(r,i){r.display.gutterSpecs=Io(i,r.options.lineNumbers),yi(r)},!0),n("fixedGutter",!0,function(r,i){r.display.gutters.style.left=i?bo(r.display)+"px":"0",r.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(r){return Wn(r)},!0),n("scrollbarStyle","native",function(r){Sa(r),Wn(r),r.display.scrollbars.setScrollTop(r.doc.scrollTop),r.display.scrollbars.setScrollLeft(r.doc.scrollLeft)},!0),n("lineNumbers",!1,function(r,i){r.display.gutterSpecs=Io(r.options.gutters,i),yi(r)},!0),n("firstLineNumber",1,yi,!0),n("lineNumberFormatter",function(r){return r},yi,!0),n("showCursorWhenSelecting",!1,hi,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(r,i){"nocursor"==i&&(Hn(r),r.display.input.blur()),r.display.input.readOnlyChanged(i)}),n("screenReaderLabel",null,function(r,i){r.display.input.screenReaderLabelChanged(i=""===i?null:i)}),n("disableInput",!1,function(r,i){i||r.display.input.reset()},!0),n("dragDrop",!0,Js),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,hi,!0),n("singleCursorHeightPerLine",!0,hi,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,xi,!0),n("addModeClass",!1,xi,!0),n("pollInterval",100),n("undoDepth",200,function(r,i){return r.doc.history.undoDepth=i}),n("historyEventDelay",1250),n("viewportMargin",10,function(r){return r.refresh()},!0),n("maxHighlightLength",1e4,xi,!0),n("moveInputWithCursor",!0,function(r,i){i||r.display.input.resetPosition()}),n("tabindex",null,function(r,i){return r.display.input.getField().tabIndex=i||""}),n("autofocus",null),n("direction","ltr",function(r,i){return r.doc.setDirection(i)},!0),n("phrases",null)}(wt),function qs(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(r,i){var a=this.options,u=a[r];a[r]==i&&"mode"!=r||(a[r]=i,t.hasOwnProperty(r)&&Qt(this,t[r])(this,i,u),Ye(this,"optionChange",this,r))},getOption:function(r){return this.options[r]},getDoc:function(){return this.doc},addKeyMap:function(r,i){this.state.keyMaps[i?"push":"unshift"](to(r))},removeKeyMap:function(r){for(var i=this.state.keyMaps,a=0;a<i.length;++a)if(i[a]==r||i[a].name==r)return i.splice(a,1),!0},addOverlay:vr(function(r,i){var a=r.token?r:e.getMode(this.options,r);if(a.startState)throw new Error("Overlays may not be stateful.");(function Fr(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)})(this.state.overlays,{mode:a,modeSpec:r,opaque:i&&i.opaque,priority:i&&i.priority||0},function(u){return u.priority}),this.state.modeGen++,br(this)}),removeOverlay:vr(function(r){for(var i=this.state.overlays,a=0;a<i.length;++a){var u=i[a].modeSpec;if(u==r||"string"==typeof r&&u.name==r)return i.splice(a,1),this.state.modeGen++,void br(this)}}),indentLine:vr(function(r,i,a){"string"!=typeof i&&"number"!=typeof i&&(i=null==i?this.options.smartIndent?"smart":"prev":i?"add":"subtract"),ur(this.doc,r)&&Oi(this,r,i,a)}),indentSelection:vr(function(r){for(var i=this.doc.sel.ranges,a=-1,u=0;u<i.length;u++){var h=i[u];if(h.empty())h.head.line>a&&(Oi(this,h.head.line,r,!0),a=h.head.line,u==this.doc.sel.primIndex&&_n(this));else{var d=h.from(),y=h.to(),E=Math.max(a,d.line);a=Math.min(this.lastLine(),y.line-(y.ch?0:1))+1;for(var B=E;B<a;++B)Oi(this,B,r);var ee=this.doc.sel.ranges;0==d.ch&&i.length==ee.length&&ee[u].from().ch>0&&_o(this.doc,u,new dt(d,ee[u].to()),ie)}}}),getTokenAt:function(r,i){return $n(this,r,i)},getLineTokens:function(r,i){return $n(this,S(r),i,!0)},getTokenTypeAt:function(r){r=ke(this.doc,r);var d,i=yt(this,Ie(this.doc,r.line)),a=0,u=(i.length-1)/2,h=r.ch;if(0==h)d=i[2];else for(;;){var y=a+u>>1;if((y?i[2*y-1]:0)>=h)u=y;else{if(!(i[2*y+1]<h)){d=i[2*y+2];break}a=y+1}}var E=d?d.indexOf("overlay "):-1;return E<0?d:0==E?null:d.slice(0,E-1)},getModeAt:function(r){var i=this.doc.mode;return i.innerMode?e.innerMode(i,this.getTokenAt(r).state).mode:i},getHelper:function(r,i){return this.getHelpers(r,i)[0]},getHelpers:function(r,i){var a=[];if(!n.hasOwnProperty(i))return a;var u=n[i],h=this.getModeAt(r);if("string"==typeof h[i])u[h[i]]&&a.push(u[h[i]]);else if(h[i])for(var d=0;d<h[i].length;d++){var y=u[h[i][d]];y&&a.push(y)}else h.helperType&&u[h.helperType]?a.push(u[h.helperType]):u[h.name]&&a.push(u[h.name]);for(var E=0;E<u._global.length;E++){var B=u._global[E];B.pred(h,this)&&-1==Te(a,B.val)&&a.push(B.val)}return a},getStateAfter:function(r,i){var a=this.doc;return Ct(this,(r=ye(a,r??a.first+a.size-1))+1,i).state},cursorCoords:function(r,i){var u=this.doc.sel.primary();return zr(this,null==r?u.head:"object"==typeof r?ke(this.doc,r):r?u.from():u.to(),i||"page")},charCoords:function(r,i){return Wi(this,ke(this.doc,r),i||"page")},coordsChar:function(r,i){return yo(this,(r=ca(this,r,i||"page")).left,r.top)},lineAtHeight:function(r,i){return r=ca(this,{top:r,left:0},i||"page").top,Wt(this.doc,r+this.display.viewOffset)},heightAtLine:function(r,i,a){var h,u=!1;if("number"==typeof r){var d=this.doc.first+this.doc.size-1;r<this.doc.first?r=this.doc.first:r>d&&(r=d,u=!0),h=Ie(this.doc,r)}else h=r;return _i(this,h,{top:0,left:0},i||"page",a||u).top+(u?this.doc.height-Z(h):0)},defaultTextHeight:function(){return Pn(this.display)},defaultCharWidth:function(){return Rn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(r,i,a,u,h){var d=this.display,y=(r=zr(this,ke(this.doc,r))).bottom,E=r.left;if(i.style.position="absolute",i.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(i),d.sizer.appendChild(i),"over"==u)y=r.top;else if("above"==u||"near"==u){var B=Math.max(d.wrapper.clientHeight,this.doc.height),ee=Math.max(d.sizer.clientWidth,d.lineSpace.clientWidth);("above"==u||r.bottom+i.offsetHeight>B)&&r.top>i.offsetHeight?y=r.top-i.offsetHeight:r.bottom+i.offsetHeight<=B&&(y=r.bottom),E+i.offsetWidth>ee&&(E=ee-i.offsetWidth)}i.style.top=y+"px",i.style.left=i.style.right="","right"==h?(E=d.sizer.clientWidth-i.offsetWidth,i.style.right="0px"):("left"==h?E=0:"middle"==h&&(E=(d.sizer.clientWidth-i.offsetWidth)/2),i.style.left=E+"px"),a&&function Jl(e,t){var n=Ao(e,t);null!=n.scrollTop&&pi(e,n.scrollTop),null!=n.scrollLeft&&Ln(e,n.scrollLeft)}(this,{left:E,top:y,right:E+i.offsetWidth,bottom:y+i.offsetHeight})},triggerOnKeyDown:vr(pl),triggerOnKeyPress:vr(gl),triggerOnKeyUp:vl,triggerOnMouseDown:vr(ml),execCommand:function(r){if(Mi.hasOwnProperty(r))return Mi[r].call(null,this)},triggerElectric:vr(function(r){Sl(this,r)}),findPosH:function(r,i,a,u){var h=1;i<0&&(h=-1,i=-i);for(var d=ke(this.doc,r),y=0;y<i&&!(d=Jo(this.doc,d,h,a,u)).hitSide;++y);return d},moveH:vr(function(r,i){var a=this;this.extendSelectionsBy(function(u){return a.display.shift||a.doc.extend||u.empty()?Jo(a.doc,u.head,r,i,a.options.rtlMoveVisually):r<0?u.from():u.to()},Ee)}),deleteH:vr(function(r,i){var u=this.doc;this.doc.sel.somethingSelected()?u.replaceSelection("",null,"+delete"):Yn(this,function(h){var d=Jo(u,h.head,r,i,!1);return r<0?{from:d,to:h.head}:{from:h.head,to:d}})}),findPosV:function(r,i,a,u){var h=1,d=u;i<0&&(h=-1,i=-i);for(var y=ke(this.doc,r),E=0;E<i;++E){var B=zr(this,y,"div");if(null==d?d=B.left:B.left=d,(y=Ml(this,B,h,a)).hitSide)break}return y},moveV:vr(function(r,i){var a=this,u=this.doc,h=[],d=!this.display.shift&&!u.extend&&u.sel.somethingSelected();if(u.extendSelectionsBy(function(E){if(d)return r<0?E.from():E.to();var B=zr(a,E.head,"div");null!=E.goalColumn&&(B.left=E.goalColumn),h.push(B.left);var ee=Ml(a,B,r,i);return"page"==i&&E==u.sel.primary()&&Mo(a,Wi(a,ee,"div").top-B.top),ee},Ee),h.length)for(var y=0;y<u.sel.ranges.length;y++)u.sel.ranges[y].goalColumn=h[y]}),findWordAt:function(r){var a=Ie(this.doc,r.line).text,u=r.ch,h=r.ch;if(a){var d=this.getHelper(r,"wordChars");"before"!=r.sticky&&h!=a.length||!u?++h:--u;for(var y=a.charAt(u),E=hr(y,d)?function(B){return hr(B,d)}:/\s/.test(y)?function(B){return/\s/.test(B)}:function(B){return!/\s/.test(B)&&!hr(B)};u>0&&E(a.charAt(u-1));)--u;for(;h<a.length&&E(a.charAt(h));)++h}return new dt(S(r.line,u),S(r.line,h))},toggleOverwrite:function(r){null!=r&&r==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?fe(this.display.cursorDiv,"CodeMirror-overwrite"):K(this.display.cursorDiv,"CodeMirror-overwrite"),Ye(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ue()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:vr(function(r,i){di(this,r,i)}),getScrollInfo:function(){var r=this.display.scroller;return{left:r.scrollLeft,top:r.scrollTop,height:r.scrollHeight-Qr(this)-this.display.barHeight,width:r.scrollWidth-Qr(this)-this.display.barWidth,clientHeight:po(this),clientWidth:bn(this)}},scrollIntoView:vr(function(r,i){null==r?(r={from:this.doc.sel.primary().head,to:null},null==i&&(i=this.options.cursorScrollMargin)):"number"==typeof r?r={from:S(r,0),to:null}:null==r.from&&(r={from:r,to:null}),r.to||(r.to=r.from),r.margin=i||0,null!=r.from.line?function Ql(e,t){ji(e),e.curOp.scrollToPos=t}(this,r):ka(this,r.from,r.to,r.margin)}),setSize:vr(function(r,i){var a=this,u=function(d){return"number"==typeof d||/^\d+$/.test(String(d))?d+"px":d};null!=r&&(this.display.wrapper.style.width=u(r)),null!=i&&(this.display.wrapper.style.height=u(i)),this.options.lineWrapping&&sa(this);var h=this.display.viewFrom;this.doc.iter(h,this.display.viewTo,function(d){if(d.widgets)for(var y=0;y<d.widgets.length;y++)if(d.widgets[y].noHScroll){un(a,h,"widget");break}++h}),this.curOp.forceUpdate=!0,Ye(this,"refresh",this)}),operation:function(r){return Er(this,r)},startOperation:function(){return An(this)},endOperation:function(){return Mn(this)},refresh:vr(function(){var r=this.display.cachedTextHeight;br(this),this.curOp.forceUpdate=!0,ci(this),di(this,this.doc.scrollLeft,this.doc.scrollTop),Fo(this.display),(null==r||Math.abs(r-Pn(this.display))>.5||this.options.lineWrapping)&&Co(this),Ye(this,"refresh",this)}),swapDoc:vr(function(r){var i=this.doc;return i.cm=null,this.state.selectingText&&this.state.selectingText(),Na(this,r),ci(this),this.display.input.reset(),di(this,r.scrollLeft,r.scrollTop),this.curOp.forceScroll=!0,Jt(this,"swapDoc",this,i),i}),phrase:function(r){var i=this.options.phrases;return i&&Object.prototype.hasOwnProperty.call(i,r)?i[r]:r},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ft(e),e.registerHelper=function(r,i,a){n.hasOwnProperty(r)||(n[r]=e[r]={_global:[]}),n[r][i]=a},e.registerGlobalHelper=function(r,i,a,u){e.registerHelper(r,i,u),n[r]._global.push({pred:a,val:u})}}(wt);var nu="iter insert remove copy getEditor constructor".split(" ");for(var ao in Cr.prototype)Cr.prototype.hasOwnProperty(ao)&&Te(nu,ao)<0&&(wt.prototype[ao]=function(e){return function(){return e.apply(this.doc,arguments)}}(Cr.prototype[ao]));return ft(Cr),wt.inputStyles={textarea:Nt,contenteditable:vt},wt.defineMode=function(e){!wt.defaults.mode&&"null"!=e&&(wt.defaults.mode=e),yr.apply(this,arguments)},wt.defineMIME=function lr(e,t){ar[e]=t},wt.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),wt.defineMIME("text/plain","null"),wt.defineExtension=function(e,t){wt.prototype[e]=t},wt.defineDocExtension=function(e,t){Cr.prototype[e]=t},wt.fromTextArea=function tu(e,t){if((t=t?Ge(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=ue();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function r(){e.value=h.getValue()}var i;if(e.form&&(We(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var a=e.form;i=a.submit;try{var u=a.submit=function(){r(),a.submit=i,a.submit(),a.submit=u}}catch{}}t.finishInit=function(d){d.save=r,d.getTextArea=function(){return e},d.toTextArea=function(){d.toTextArea=isNaN,r(),e.parentNode.removeChild(d.getWrapperElement()),e.style.display="",e.form&&(pt(e.form,"submit",r),!t.leaveSubmitMethodAlone&&"function"==typeof e.form.submit&&(e.form.submit=i))}},e.style.display="none";var h=wt(function(d){return e.parentNode.insertBefore(d,e.nextSibling)},t);return h},function ru(e){e.off=pt,e.on=We,e.wheelEventPixels=us,e.Doc=Cr,e.splitLines=tn,e.countColumn=N,e.findColumn=Ve,e.isWordChar=It,e.Pass=J,e.signal=Ye,e.Line=pe,e.changeEnd=hn,e.scrollbarModel=wa,e.Pos=S,e.cmpPos=z,e.modes=Pr,e.mimeModes=ar,e.resolveMode=Ur,e.getMode=pr,e.modeExtensions=Rr,e.extendMode=Hr,e.copyState=Bt,e.startState=Mr,e.innerMode=jt,e.commands=Mi,e.keyMap=an,e.keyName=ul,e.isModifierKey=ll,e.lookupKey=Zn,e.normalizeKeyMap=Fs,e.StringStream=ct,e.SharedTextMarker=Li,e.TextMarker=pn,e.LineWidget=Si,e.e_preventDefault=gt,e.e_stopPropagation=Tr,e.e_stop=Ar,e.addClass=fe,e.contains=x,e.rmClass=K,e.keyNames=vn}(wt),wt.version="5.64.0",wt}()},9915:(xt,et,de)=>{!function(k){"use strict";var A=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/i;k.defineMode("gfm",function(_,q){var O=0;var H={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(j){return{code:j.code,codeBlock:j.codeBlock,ateSpace:j.ateSpace}},token:function(j,U){if(U.combineTokens=null,U.codeBlock)return j.match(/^```+/)?(U.codeBlock=!1,null):(j.skipToEnd(),null);if(j.sol()&&(U.code=!1),j.sol()&&j.match(/^```+/))return j.skipToEnd(),U.codeBlock=!0,null;if("`"===j.peek()){j.next();var se=j.pos;j.eatWhile("`");var ce=1+j.pos-se;return U.code?ce===O&&(U.code=!1):(O=ce,U.code=!0),null}if(U.code)return j.next(),null;if(j.eatSpace())return U.ateSpace=!0,null;if((j.sol()||U.ateSpace)&&(U.ateSpace=!1,!1!==q.gitHubSpice)){if(j.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/))return U.combineTokens=!0,"link";if(j.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return U.combineTokens=!0,"link"}return j.match(A)&&"]("!=j.string.slice(j.start-2,j.start)&&(0==j.start||/\W/.test(j.string.charAt(j.start-1)))?(U.combineTokens=!0,"link"):(j.next(),null)},blankLine:function f(j){return j.code=!1,null}},oe={taskLists:!0,strikethrough:!0,emoji:!0};for(var V in q)oe[V]=q[V];return oe.name="markdown",k.overlayMode(k.getMode(_,oe),H)},"markdown"),k.defineMIME("text/x-gfm","gfm")}(de(3867),de(9477),de(3784))},3518:(xt,et,de)=>{!function(k){"use strict";k.defineMode("javascript",function(A,_){var re,ae,q=A.indentUnit,O=_.statementIndent,f=_.jsonld,H=_.json||f,oe=!1!==_.trackScope,V=_.typescript,j=_.wordCharacters||/[\w$\xa1-\uffff]/,U=function(){function g(qe){return{type:qe,style:"keyword"}}var T=g("keyword a"),le=g("keyword b"),ye=g("keyword c"),ke=g("keyword d"),Qe=g("operator"),je={type:"atom",style:"atom"};return{if:g("if"),while:T,with:T,else:le,do:le,try:le,finally:le,return:ke,break:ke,continue:ke,new:g("new"),delete:ye,void:ye,throw:ye,debugger:g("debugger"),var:g("var"),const:g("var"),let:g("var"),function:g("function"),catch:g("catch"),for:g("for"),switch:g("switch"),case:g("case"),default:g("default"),in:Qe,typeof:Qe,instanceof:Qe,true:je,false:je,null:je,undefined:je,NaN:je,Infinity:je,this:g("this"),class:g("class"),super:g("atom"),yield:ye,export:g("export"),import:g("import"),extends:ye,await:ye}}(),se=/[+\-*&%=<>!?|~^@]/,ce=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function M(g,T,le){return re=g,ae=le,T}function W(g,T){var le=g.next();if('"'==le||"'"==le)return T.tokenize=function m(g){return function(T,le){var ke,ye=!1;if(f&&"@"==T.peek()&&T.match(ce))return le.tokenize=W,M("jsonld-keyword","meta");for(;null!=(ke=T.next())&&(ke!=g||ye);)ye=!ye&&"\\"==ke;return ye||(le.tokenize=W),M("string","string")}}(le),T.tokenize(g,T);if("."==le&&g.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return M("number","number");if("."==le&&g.match(".."))return M("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(le))return M(le);if("="==le&&g.eat(">"))return M("=>","operator");if("0"==le&&g.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return M("number","number");if(/\d/.test(le))return g.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),M("number","number");if("/"==le)return g.eat("*")?(T.tokenize=w,w(g,T)):g.eat("/")?(g.skipToEnd(),M("comment","comment")):Ce(g,T,1)?(function Me(g){for(var le,T=!1,ye=!1;null!=(le=g.next());){if(!T){if("/"==le&&!ye)return;"["==le?ye=!0:ye&&"]"==le&&(ye=!1)}T=!T&&"\\"==le}}(g),g.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),M("regexp","string-2")):(g.eat("="),M("operator","operator",g.current()));if("`"==le)return T.tokenize=D,D(g,T);if("#"==le&&"!"==g.peek())return g.skipToEnd(),M("meta","meta");if("#"==le&&g.eatWhile(j))return M("variable","property");if("<"==le&&g.match("!--")||"-"==le&&g.match("->")&&!/\S/.test(g.string.slice(0,g.start)))return g.skipToEnd(),M("comment","comment");if(se.test(le))return(">"!=le||!T.lexical||">"!=T.lexical.type)&&(g.eat("=")?("!"==le||"="==le)&&g.eat("="):/[<>*+\-|&?]/.test(le)&&(g.eat(le),">"==le&&g.eat(le))),"?"==le&&g.eat(".")?M("."):M("operator","operator",g.current());if(j.test(le)){g.eatWhile(j);var ye=g.current();if("."!=T.lastType){if(U.propertyIsEnumerable(ye)){var ke=U[ye];return M(ke.type,ke.style,ye)}if("async"==ye&&g.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return M("async","keyword",ye)}return M("variable","variable",ye)}}function w(g,T){for(var ye,le=!1;ye=g.next();){if("/"==ye&&le){T.tokenize=W;break}le="*"==ye}return M("comment","comment")}function D(g,T){for(var ye,le=!1;null!=(ye=g.next());){if(!le&&("`"==ye||"$"==ye&&g.eat("{"))){T.tokenize=W;break}le=!le&&"\\"==ye}return M("quasi","string-2",g.current())}function C(g,T){T.fatArrowAt&&(T.fatArrowAt=null);var le=g.string.indexOf("=>",g.start);if(!(le<0)){if(V){var ye=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(g.string.slice(g.start,le));ye&&(le=ye.index)}for(var ke=0,Qe=!1,je=le-1;je>=0;--je){var qe=g.string.charAt(je),Ke="([{}])".indexOf(qe);if(Ke>=0&&Ke<3){if(!ke){++je;break}if(0==--ke){"("==qe&&(Qe=!0);break}}else if(Ke>=3&&Ke<6)++ke;else if(j.test(qe))Qe=!0;else if(/["'\/`]/.test(qe))for(;;--je){if(0==je)return;if(g.string.charAt(je-1)==qe&&"\\"!=g.string.charAt(je-2)){je--;break}}else if(Qe&&!ke){++je;break}}Qe&&!ke&&(T.fatArrowAt=je)}}var K={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function ne(g,T,le,ye,ke,Qe){this.indented=g,this.column=T,this.type=le,this.prev=ke,this.info=Qe,null!=ye&&(this.align=ye)}function G(g,T){if(!oe)return!1;for(var le=g.localVars;le;le=le.next)if(le.name==T)return!0;for(var ye=g.context;ye;ye=ye.prev)for(le=ye.vars;le;le=le.next)if(le.name==T)return!0}function te(g,T,le,ye,ke){var Qe=g.cc;for(Q.state=g,Q.stream=ke,Q.marked=null,Q.cc=Qe,Q.style=T,g.lexical.hasOwnProperty("align")||(g.lexical.align=!0);;)if((Qe.length?Qe.pop():H?Pe:Ee)(le,ye)){for(;Qe.length&&Qe[Qe.length-1].lex;)Qe.pop()();return Q.marked?Q.marked:"variable"==le&&G(g,ye)?"variable-2":T}}var Q={state:null,column:null,marked:null,cc:null};function ge(){for(var g=arguments.length-1;g>=0;g--)Q.cc.push(arguments[g])}function x(){return ge.apply(null,arguments),!0}function ue(g,T){for(var le=T;le;le=le.next)if(le.name==g)return!0;return!1}function fe(g){var T=Q.state;if(Q.marked="def",oe){if(T.context)if("var"==T.lexical.info&&T.context&&T.context.block){var le=Ae(g,T.context);if(null!=le)return void(T.context=le)}else if(!ue(g,T.localVars))return void(T.localVars=new Ge(g,T.localVars));_.globalVars&&!ue(g,T.globalVars)&&(T.globalVars=new Ge(g,T.globalVars))}}function Ae(g,T){if(T){if(T.block){var le=Ae(g,T.prev);return le?le==T.prev?T:new _e(le,T.vars,!0):null}return ue(g,T.vars)?T:new _e(T.prev,new Ge(g,T.vars),!1)}return null}function He(g){return"public"==g||"private"==g||"protected"==g||"abstract"==g||"readonly"==g}function _e(g,T,le){this.prev=g,this.vars=T,this.block=le}function Ge(g,T){this.name=g,this.next=T}var N=new Ge("this",new Ge("arguments",null));function b(){Q.state.context=new _e(Q.state.context,Q.state.localVars,!1),Q.state.localVars=N}function Te(){Q.state.context=new _e(Q.state.context,Q.state.localVars,!0),Q.state.localVars=null}function P(){Q.state.localVars=Q.state.context.vars,Q.state.context=Q.state.context.prev}function J(g,T){var le=function(){var ye=Q.state,ke=ye.indented;if("stat"==ye.lexical.type)ke=ye.lexical.indented;else for(var Qe=ye.lexical;Qe&&")"==Qe.type&&Qe.align;Qe=Qe.prev)ke=Qe.indented;ye.lexical=new ne(ke,Q.stream.column(),g,null,ye.lexical,T)};return le.lex=!0,le}function ie(){var g=Q.state;g.lexical.prev&&(")"==g.lexical.type&&(g.indented=g.lexical.indented),g.lexical=g.lexical.prev)}function $(g){return function T(le){return le==g?x():";"==g||"}"==le||")"==le||"]"==le?ge():x(T)}}function Ee(g,T){return"var"==g?x(J("vardef",T),en,$(";"),ie):"keyword a"==g?x(J("form"),Re,Ee,ie):"keyword b"==g?x(J("form"),Ee,ie):"keyword d"==g?Q.stream.match(/^\s*$/,!1)?x():x(J("stat"),Fr,$(";"),ie):"debugger"==g?x($(";")):"{"==g?x(J("}"),Te,We,ie,P):";"==g?x():"if"==g?("else"==Q.state.lexical.info&&Q.state.cc[Q.state.cc.length-1]==ie&&Q.state.cc.pop()(),x(J("form"),Re,Ee,ie,Yr)):"function"==g?x(yr):"for"==g?x(J("form"),Te,or,Ee,P,ie):"class"==g||V&&"interface"==T?(Q.marked="keyword",x(J("form","class"==g?g:T),Hr,ie)):"variable"==g?V&&"declare"==T?(Q.marked="keyword",x(Ee)):V&&("module"==T||"enum"==T||"type"==T)&&Q.stream.match(/^\s*\w/,!1)?(Q.marked="keyword","enum"==T?x(be):"type"==T?x(Ur,$("operator"),tt,$(";")):x(J("form"),Tt,$("{"),J("}"),We,ie,ie)):V&&"namespace"==T?(Q.marked="keyword",x(J("form"),Pe,Ee,ie)):V&&"abstract"==T?(Q.marked="keyword",x(Ee)):x(J("stat"),Kr):"switch"==g?x(J("form"),Re,$("{"),J("}","switch"),Te,We,ie,ie,P):"case"==g?x(Pe,$(":")):"default"==g?x($(":")):"catch"==g?x(J("form"),b,Ve,Ee,ie,P):"export"==g?x(J("stat"),ct,ie):"import"==g?x(J("stat"),rr,ie):"async"==g?x(Ee):"@"==T?x(Pe,Ee):ge(J("stat"),Pe,$(";"),ie)}function Ve(g){if("("==g)return x(pr,$(")"))}function Pe(g,T){return St(g,T,!1)}function Ue(g,T){return St(g,T,!0)}function Re(g){return"("!=g?ge():x(J(")"),Fr,$(")"),ie)}function St(g,T,le){if(Q.state.fatArrowAt==Q.stream.start){var ye=le?ir:hr;if("("==g)return x(b,J(")"),it(pr,")"),ie,$("=>"),ye,P);if("variable"==g)return ge(b,Tt,$("=>"),ye,P)}var ke=le?kt:Ot;return K.hasOwnProperty(g)?x(ke):"function"==g?x(yr,ke):"class"==g||V&&"interface"==T?(Q.marked="keyword",x(J("form"),Rr,ie)):"keyword c"==g||"async"==g?x(le?Ue:Pe):"("==g?x(J(")"),Fr,$(")"),ie,ke):"operator"==g||"spread"==g?x(le?Ue:Pe):"["==g?x(J("]"),ur,ie,ke):"{"==g?Ht($t,"}",null,ke):"quasi"==g?ge(Lt,ke):"new"==g?x(function mr(g){return function(T){return"."==T?x(g?dr:Wr):"variable"==T&&V?x($r,g?kt:Ot):ge(g?Ue:Pe)}}(le)):x()}function Fr(g){return g.match(/[;\}\)\],]/)?ge():ge(Pe)}function Ot(g,T){return","==g?x(Fr):kt(g,T,!1)}function kt(g,T,le){var ye=0==le?Ot:kt,ke=0==le?Pe:Ue;if("=>"==g)return x(b,le?ir:hr,P);if("operator"==g)return/\+\+|--/.test(T)||V&&"!"==T?x(ye):V&&"<"==T&&Q.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?x(J(">"),it(tt,">"),ie,ye):"?"==T?x(Pe,$(":"),ke):x(ke);if("quasi"==g)return ge(Lt,ye);if(";"!=g){if("("==g)return Ht(Ue,")","call",ye);if("."==g)return x(Gt,ye);if("["==g)return x(J("]"),Fr,$("]"),ie,ye);if(V&&"as"==T)return Q.marked="keyword",x(tt,ye);if("regexp"==g)return Q.state.lastType=Q.marked="operator",Q.stream.backUp(Q.stream.pos-Q.stream.start-1),x(ke)}}function Lt(g,T){return"quasi"!=g?ge():"${"!=T.slice(T.length-2)?x(Lt):x(Fr,It)}function It(g){if("}"==g)return Q.marked="string-2",Q.state.tokenize=D,x(Lt)}function hr(g){return C(Q.stream,Q.state),ge("{"==g?Ee:Pe)}function ir(g){return C(Q.stream,Q.state),ge("{"==g?Ee:Ue)}function Wr(g,T){if("target"==T)return Q.marked="keyword",x(Ot)}function dr(g,T){if("target"==T)return Q.marked="keyword",x(kt)}function Kr(g){return":"==g?x(ie,Ee):ge(Ot,$(";"),ie)}function Gt(g){if("variable"==g)return Q.marked="property",x()}function $t(g,T){return"async"==g?(Q.marked="property",x($t)):"variable"==g||"keyword"==Q.style?(Q.marked="property","get"==T||"set"==T?x(bt):(V&&Q.state.fatArrowAt==Q.stream.start&&(le=Q.stream.match(/^\s*:\s*/,!1))&&(Q.state.fatArrowAt=Q.stream.pos+le[0].length),x(er))):"number"==g||"string"==g?(Q.marked=f?"property":Q.style+" property",x(er)):"jsonld-keyword"==g?x(er):V&&He(T)?(Q.marked="keyword",x($t)):"["==g?x(Pe,lt,$("]"),er):"spread"==g?x(Ue,er):"*"==T?(Q.marked="keyword",x($t)):":"==g?ge(er):void 0;var le}function bt(g){return"variable"!=g?ge(er):(Q.marked="property",x(yr))}function er(g){return":"==g?x(Ue):"("==g?ge(yr):void 0}function it(g,T,le){function ye(ke,Qe){if(le?le.indexOf(ke)>-1:","==ke){var je=Q.state.lexical;return"call"==je.info&&(je.pos=(je.pos||0)+1),x(function(qe,Ke){return qe==T||Ke==T?ge():ge(g)},ye)}return ke==T||Qe==T?x():le&&le.indexOf(";")>-1?ge(g):x($(T))}return function(ke,Qe){return ke==T||Qe==T?x():ge(g,ye)}}function Ht(g,T,le){for(var ye=3;ye<arguments.length;ye++)Q.cc.push(arguments[ye]);return x(J(T,le),it(g,T),ie)}function We(g){return"}"==g?x():ge(Ee,We)}function lt(g,T){if(V){if(":"==g)return x(tt);if("?"==T)return x(lt)}}function pt(g,T){if(V&&(":"==g||"in"==T))return x(tt)}function Ye(g){if(V&&":"==g)return Q.stream.match(/^\s*\w+\s+is\b/,!1)?x(Pe,ot,tt):x(tt)}function ot(g,T){if("is"==T)return Q.marked="keyword",x()}function tt(g,T){return"keyof"==T||"typeof"==T||"infer"==T||"readonly"==T?(Q.marked="keyword",x("typeof"==T?Ue:tt)):"variable"==g||"void"==T?(Q.marked="type",x(tr)):"|"==T||"&"==T?x(tt):"string"==g||"number"==g||"atom"==g?x(tr):"["==g?x(J("]"),it(tt,"]",","),ie,tr):"{"==g?x(J("}"),ft,ie,tr):"("==g?x(it(Ar,")"),_t,tr):"<"==g?x(it(tt,">"),tt):"quasi"==g?ge(Tr,tr):void 0}function _t(g){if("=>"==g)return x(tt)}function ft(g){return g.match(/[\}\)\]]/)?x():","==g||";"==g?x(ft):ge(gt,ft)}function gt(g,T){return"variable"==g||"keyword"==Q.style?(Q.marked="property",x(gt)):"?"==T||"number"==g||"string"==g?x(gt):":"==g?x(tt):"["==g?x($("variable"),pt,$("]"),gt):"("==g?ge(lr,gt):g.match(/[;\}\)\],]/)?void 0:x()}function Tr(g,T){return"quasi"!=g?ge():"${"!=T.slice(T.length-2)?x(Tr):x(tt,Vr)}function Vr(g){if("}"==g)return Q.marked="string-2",Q.state.tokenize=D,x(Tr)}function Ar(g,T){return"variable"==g&&Q.stream.match(/^\s*[?:]/,!1)||"?"==T?x(Ar):":"==g?x(tt):"spread"==g?x(Ar):ge(tt)}function tr(g,T){return"<"==T?x(J(">"),it(tt,">"),ie,tr):"|"==T||"."==g||"&"==T?x(tt):"["==g?x(tt,$("]"),tr):"extends"==T||"implements"==T?(Q.marked="keyword",x(tt)):"?"==T?x(tt,$(":"),tt):void 0}function $r(g,T){if("<"==T)return x(J(">"),it(tt,">"),ie,tr)}function Nr(){return ge(tt,Br)}function Br(g,T){if("="==T)return x(tt)}function en(g,T){return"enum"==T?(Q.marked="keyword",x(be)):ge(Tt,lt,Dt,mn)}function Tt(g,T){return V&&He(T)?(Q.marked="keyword",x(Tt)):"variable"==g?(fe(T),x()):"spread"==g?x(Tt):"["==g?Ht(tn,"]"):"{"==g?Ht(Zr,"}"):void 0}function Zr(g,T){return"variable"!=g||Q.stream.match(/^\s*:/,!1)?("variable"==g&&(Q.marked="property"),"spread"==g?x(Tt):"}"==g?ge():"["==g?x(Pe,$("]"),$(":"),Zr):x($(":"),Tt,Dt)):(fe(T),x(Dt))}function tn(){return ge(Tt,Dt)}function Dt(g,T){if("="==T)return x(Ue)}function mn(g){if(","==g)return x(en)}function Yr(g,T){if("keyword b"==g&&"else"==T)return x(J("form","else"),Ee,ie)}function or(g,T){return"await"==T?x(or):"("==g?x(J(")"),Pr,ie):void 0}function Pr(g){return"var"==g?x(en,ar):"variable"==g?x(ar):ge(ar)}function ar(g,T){return")"==g?x():";"==g?x(ar):"in"==T||"of"==T?(Q.marked="keyword",x(Pe,ar)):ge(Pe,ar)}function yr(g,T){return"*"==T?(Q.marked="keyword",x(yr)):"variable"==g?(fe(T),x(yr)):"("==g?x(b,J(")"),it(pr,")"),ie,Ye,Ee,P):V&&"<"==T?x(J(">"),it(Nr,">"),ie,yr):void 0}function lr(g,T){return"*"==T?(Q.marked="keyword",x(lr)):"variable"==g?(fe(T),x(lr)):"("==g?x(b,J(")"),it(pr,")"),ie,Ye,P):V&&"<"==T?x(J(">"),it(Nr,">"),ie,lr):void 0}function Ur(g,T){return"keyword"==g||"variable"==g?(Q.marked="type",x(Ur)):"<"==T?x(J(">"),it(Nr,">"),ie):void 0}function pr(g,T){return"@"==T&&x(Pe,pr),"spread"==g?x(pr):V&&He(T)?(Q.marked="keyword",x(pr)):V&&"this"==g?x(lt,Dt):ge(Tt,lt,Dt)}function Rr(g,T){return"variable"==g?Hr(g,T):Bt(g,T)}function Hr(g,T){if("variable"==g)return fe(T),x(Bt)}function Bt(g,T){return"<"==T?x(J(">"),it(Nr,">"),ie,Bt):"extends"==T||"implements"==T||V&&","==g?("implements"==T&&(Q.marked="keyword"),x(V?tt:Pe,Bt)):"{"==g?x(J("}"),jt,ie):void 0}function jt(g,T){return"async"==g||"variable"==g&&("static"==T||"get"==T||"set"==T||V&&He(T))&&Q.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(Q.marked="keyword",x(jt)):"variable"==g||"keyword"==Q.style?(Q.marked="property",x(Mr,jt)):"number"==g||"string"==g?x(Mr,jt):"["==g?x(Pe,lt,$("]"),Mr,jt):"*"==T?(Q.marked="keyword",x(jt)):V&&"("==g?ge(lr,jt):";"==g||","==g?x(jt):"}"==g?x():"@"==T?x(Pe,jt):void 0}function Mr(g,T){if("!"==T||"?"==T)return x(Mr);if(":"==g)return x(tt,Dt);if("="==T)return x(Ue);var le=Q.state.lexical.prev;return ge(le&&"interface"==le.info?lr:yr)}function ct(g,T){return"*"==T?(Q.marked="keyword",x(Wt,$(";"))):"default"==T?(Q.marked="keyword",x(Pe,$(";"))):"{"==g?x(it(Ie,"}"),Wt,$(";")):ge(Ee)}function Ie(g,T){return"as"==T?(Q.marked="keyword",x($("variable"))):"variable"==g?ge(Ue,Ie):void 0}function rr(g){return"string"==g?x():"("==g?ge(Pe):"."==g?ge(Ot):ge(Or,sr,Wt)}function Or(g,T){return"{"==g?Ht(Or,"}"):("variable"==g&&fe(T),"*"==T&&(Q.marked="keyword"),x(st))}function sr(g){if(","==g)return x(Or,sr)}function st(g,T){if("as"==T)return Q.marked="keyword",x(Or)}function Wt(g,T){if("from"==T)return Q.marked="keyword",x(Pe)}function ur(g){return"]"==g?x():ge(it(Ue,"]"))}function be(){return ge(J("form"),Tt,$("{"),J("}"),it(S,"}"),ie,ie)}function S(){return ge(Tt,Dt)}function Ce(g,T,le){return T.tokenize==W&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(T.lastType)||"quasi"==T.lastType&&/\{\s*$/.test(g.string.slice(0,g.pos-(le||0)))}return P.lex=!0,ie.lex=!0,{startState:function(g){var T={tokenize:W,lastType:"sof",cc:[],lexical:new ne((g||0)-q,0,"block",!1),localVars:_.localVars,context:_.localVars&&new _e(null,null,!1),indented:g||0};return _.globalVars&&"object"==typeof _.globalVars&&(T.globalVars=_.globalVars),T},token:function(g,T){if(g.sol()&&(T.lexical.hasOwnProperty("align")||(T.lexical.align=!1),T.indented=g.indentation(),C(g,T)),T.tokenize!=w&&g.eatSpace())return null;var le=T.tokenize(g,T);return"comment"==re?le:(T.lastType="operator"!=re||"++"!=ae&&"--"!=ae?re:"incdec",te(T,le,re,ae,g))},indent:function(g,T){if(g.tokenize==w||g.tokenize==D)return k.Pass;if(g.tokenize!=W)return 0;var ke,le=T&&T.charAt(0),ye=g.lexical;if(!/^\s*else\b/.test(T))for(var Qe=g.cc.length-1;Qe>=0;--Qe){var je=g.cc[Qe];if(je==ie)ye=ye.prev;else if(je!=Yr&&je!=P)break}for(;("stat"==ye.type||"form"==ye.type)&&("}"==le||(ke=g.cc[g.cc.length-1])&&(ke==Ot||ke==kt)&&!/^[,\.=+\-*:?[\(]/.test(T));)ye=ye.prev;O&&")"==ye.type&&"stat"==ye.prev.type&&(ye=ye.prev);var qe=ye.type,Ke=le==qe;return"vardef"==qe?ye.indented+("operator"==g.lastType||","==g.lastType?ye.info.length+1:0):"form"==qe&&"{"==le?ye.indented:"form"==qe?ye.indented+q:"stat"==qe?ye.indented+(function z(g,T){return"operator"==g.lastType||","==g.lastType||se.test(T.charAt(0))||/[,.]/.test(T.charAt(0))}(g,T)?O||q:0):"switch"!=ye.info||Ke||0==_.doubleIndentSwitch?ye.align?ye.column+(Ke?0:1):ye.indented+(Ke?0:q):ye.indented+(/^(?:case|default)\b/.test(T)?q:2*q)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:H?null:"/*",blockCommentEnd:H?null:"*/",blockCommentContinue:H?null:" * ",lineComment:H?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:H?"json":"javascript",jsonldMode:f,jsonMode:H,expressionAllowed:Ce,skipExpression:function(g){te(g,"atom","atom","true",new k.StringStream("",2,null))}}}),k.registerHelper("wordChars","javascript",/[\w$]/),k.defineMIME("text/javascript","javascript"),k.defineMIME("text/ecmascript","javascript"),k.defineMIME("application/javascript","javascript"),k.defineMIME("application/x-javascript","javascript"),k.defineMIME("application/ecmascript","javascript"),k.defineMIME("application/json",{name:"javascript",json:!0}),k.defineMIME("application/x-json",{name:"javascript",json:!0}),k.defineMIME("application/manifest+json",{name:"javascript",json:!0}),k.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),k.defineMIME("text/typescript",{name:"javascript",typescript:!0}),k.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(de(3867))},9477:(xt,et,de)=>{!function(k){"use strict";k.defineMode("markdown",function(A,_){var q=k.getMode(A,"text/html"),O="null"==q.name;void 0===_.highlightFormatting&&(_.highlightFormatting=!1),void 0===_.maxBlockquoteDepth&&(_.maxBlockquoteDepth=0),void 0===_.taskLists&&(_.taskLists=!1),void 0===_.strikethrough&&(_.strikethrough=!1),void 0===_.emoji&&(_.emoji=!1),void 0===_.fencedCodeBlockHighlighting&&(_.fencedCodeBlockHighlighting=!0),void 0===_.fencedCodeBlockDefaultMode&&(_.fencedCodeBlockDefaultMode="text/plain"),void 0===_.xml&&(_.xml=!0),void 0===_.tokenTypeOverrides&&(_.tokenTypeOverrides={});var H={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var oe in H)H.hasOwnProperty(oe)&&_.tokenTypeOverrides[oe]&&(H[oe]=_.tokenTypeOverrides[oe]);var V=/^([*\-_])(?:\s*\1){2,}\s*$/,j=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,U=/^\[(x| )\](?=\s)/i,se=_.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,ce=/^ {0,3}(?:\={1,}|-{2,})\s*$/,Me=/^[^#!\[\]*_\\<>` "'(~:]+/,re=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,ae=/^\s*\[[^\]]+?\]:.*$/,M=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function m(N,b,Te){return b.f=b.inline=Te,Te(N,b)}function w(N,b,Te){return b.f=b.block=Te,Te(N,b)}function R(N){if(N.linkTitle=!1,N.linkHref=!1,N.linkText=!1,N.em=!1,N.strong=!1,N.strikethrough=!1,N.quote=0,N.indentedCode=!1,N.f==K){var b=O;if(!b){var Te=k.innerMode(q,N.htmlState);b="xml"==Te.mode.name&&null===Te.state.tagStart&&!Te.state.context&&Te.state.tokenize.isInText}b&&(N.f=Q,N.block=C,N.htmlState=null)}return N.trailingSpace=0,N.trailingSpaceNewLine=!1,N.prevLine=N.thisLine,N.thisLine={stream:null},null}function C(N,b){var Te=N.column()===b.indentation,P=function D(N){return!N||!/\S/.test(N.string)}(b.prevLine.stream),J=b.indentedCode,ie=b.prevLine.hr,$=!1!==b.list,Ee=(b.listStack[b.listStack.length-1]||0)+3;b.indentedCode=!1;var Ve=b.indentation;if(null===b.indentationDiff&&(b.indentationDiff=b.indentation,$)){for(b.list=null;Ve<b.listStack[b.listStack.length-1];)b.listStack.pop(),b.listStack.length?b.indentation=b.listStack[b.listStack.length-1]:b.list=!1;!1!==b.list&&(b.indentationDiff=Ve-b.listStack[b.listStack.length-1])}var Pe=!(P||ie||b.prevLine.header||$&&J||b.prevLine.fencedCodeEnd),Ue=(!1===b.list||ie||P)&&b.indentation<=Ee&&N.match(V),Re=null;if(b.indentationDiff>=4&&(J||b.prevLine.fencedCodeEnd||b.prevLine.header||P))return N.skipToEnd(),b.indentedCode=!0,H.code;if(N.eatSpace())return null;if(Te&&b.indentation<=Ee&&(Re=N.match(se))&&Re[1].length<=6)return b.quote=0,b.header=Re[1].length,b.thisLine.header=!0,_.highlightFormatting&&(b.formatting="header"),b.f=b.inline,G(b);if(b.indentation<=Ee&&N.eat(">"))return b.quote=Te?1:b.quote+1,_.highlightFormatting&&(b.formatting="quote"),N.eatSpace(),G(b);if(!Ue&&!b.setext&&Te&&b.indentation<=Ee&&(Re=N.match(j))){var St=Re[1]?"ol":"ul";return b.indentation=Ve+N.current().length,b.list=!0,b.quote=0,b.listStack.push(b.indentation),b.em=!1,b.strong=!1,b.code=!1,b.strikethrough=!1,_.taskLists&&N.match(U,!1)&&(b.taskList=!0),b.f=b.inline,_.highlightFormatting&&(b.formatting=["list","list-"+St]),G(b)}return Te&&b.indentation<=Ee&&(Re=N.match(re,!0))?(b.quote=0,b.fencedEndRE=new RegExp(Re[1]+"+ *$"),b.localMode=_.fencedCodeBlockHighlighting&&function f(N){if(k.findModeByName){var b=k.findModeByName(N);b&&(N=b.mime||b.mimes[0])}var Te=k.getMode(A,N);return"null"==Te.name?null:Te}(Re[2]||_.fencedCodeBlockDefaultMode),b.localMode&&(b.localState=k.startState(b.localMode)),b.f=b.block=ne,_.highlightFormatting&&(b.formatting="code-block"),b.code=-1,G(b)):b.setext||!(Pe&&$||b.quote||!1!==b.list||b.code||Ue||ae.test(N.string))&&(Re=N.lookAhead(1))&&(Re=Re.match(ce))?(b.setext?(b.header=b.setext,b.setext=0,N.skipToEnd(),_.highlightFormatting&&(b.formatting="header")):(b.header="="==Re[0].charAt(0)?1:2,b.setext=b.header),b.thisLine.header=!0,b.f=b.inline,G(b)):Ue?(N.skipToEnd(),b.hr=!0,b.thisLine.hr=!0,H.hr):"["===N.peek()?m(N,b,Ae):m(N,b,b.inline)}function K(N,b){var Te=q.token(N,b.htmlState);if(!O){var P=k.innerMode(q,b.htmlState);("xml"==P.mode.name&&null===P.state.tagStart&&!P.state.context&&P.state.tokenize.isInText||b.md_inside&&N.current().indexOf(">")>-1)&&(b.f=Q,b.block=C,b.htmlState=null)}return Te}function ne(N,b){var ie,Te=b.listStack[b.listStack.length-1]||0,P=b.indentation<Te;return b.fencedEndRE&&b.indentation<=Te+3&&(P||N.match(b.fencedEndRE))?(_.highlightFormatting&&(b.formatting="code-block"),P||(ie=G(b)),b.localMode=b.localState=null,b.block=C,b.f=Q,b.fencedEndRE=null,b.code=0,b.thisLine.fencedCodeEnd=!0,P?w(N,b,b.block):ie):b.localMode?b.localMode.token(N,b.localState):(N.skipToEnd(),H.code)}function G(N){var b=[];if(N.formatting){b.push(H.formatting),"string"==typeof N.formatting&&(N.formatting=[N.formatting]);for(var Te=0;Te<N.formatting.length;Te++)b.push(H.formatting+"-"+N.formatting[Te]),"header"===N.formatting[Te]&&b.push(H.formatting+"-"+N.formatting[Te]+"-"+N.header),"quote"===N.formatting[Te]&&b.push(!_.maxBlockquoteDepth||_.maxBlockquoteDepth>=N.quote?H.formatting+"-"+N.formatting[Te]+"-"+N.quote:"error")}if(N.taskOpen)return b.push("meta"),b.length?b.join(" "):null;if(N.taskClosed)return b.push("property"),b.length?b.join(" "):null;if(N.linkHref?b.push(H.linkHref,"url"):(N.strong&&b.push(H.strong),N.em&&b.push(H.em),N.strikethrough&&b.push(H.strikethrough),N.emoji&&b.push(H.emoji),N.linkText&&b.push(H.linkText),N.code&&b.push(H.code),N.image&&b.push(H.image),N.imageAltText&&b.push(H.imageAltText,"link"),N.imageMarker&&b.push(H.imageMarker)),N.header&&b.push(H.header,H.header+"-"+N.header),N.quote&&(b.push(H.quote),b.push(!_.maxBlockquoteDepth||_.maxBlockquoteDepth>=N.quote?H.quote+"-"+N.quote:H.quote+"-"+_.maxBlockquoteDepth)),!1!==N.list){var P=(N.listStack.length-1)%3;b.push(P?1===P?H.list2:H.list3:H.list1)}return N.trailingSpaceNewLine?b.push("trailing-space-new-line"):N.trailingSpace&&b.push("trailing-space-"+(N.trailingSpace%2?"a":"b")),b.length?b.join(" "):null}function te(N,b){if(N.match(Me,!0))return G(b)}function Q(N,b){var Te=b.text(N,b);if(typeof Te<"u")return Te;if(b.list)return b.list=null,G(b);if(b.taskList)return" "===N.match(U,!0)[1]?b.taskOpen=!0:b.taskClosed=!0,_.highlightFormatting&&(b.formatting="task"),b.taskList=!1,G(b);if(b.taskOpen=!1,b.taskClosed=!1,b.header&&N.match(/^#+$/,!0))return _.highlightFormatting&&(b.formatting="header"),G(b);var J=N.next();if(b.linkTitle){b.linkTitle=!1;var ie=J;if("("===J&&(ie=")"),ie=(ie+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"),N.match(new RegExp("^\\s*(?:[^"+ie+"\\\\]+|\\\\\\\\|\\\\.)"+ie),!0))return H.linkHref}if("`"===J){var Ee=b.formatting;_.highlightFormatting&&(b.formatting="code"),N.eatWhile("`");var Ve=N.current().length;if(0==b.code&&(!b.quote||1==Ve))return b.code=Ve,G(b);if(Ve==b.code){var Pe=G(b);return b.code=0,Pe}return b.formatting=Ee,G(b)}if(b.code)return G(b);if("\\"===J&&(N.next(),_.highlightFormatting)){var Ue=G(b),Re=H.formatting+"-escape";return Ue?Ue+" "+Re:Re}if("!"===J&&N.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return b.imageMarker=!0,b.image=!0,_.highlightFormatting&&(b.formatting="image"),G(b);if("["===J&&b.imageMarker&&N.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return b.imageMarker=!1,b.imageAltText=!0,_.highlightFormatting&&(b.formatting="image"),G(b);if("]"===J&&b.imageAltText){_.highlightFormatting&&(b.formatting="image");Ue=G(b);return b.imageAltText=!1,b.image=!1,b.inline=b.f=x,Ue}if("["===J&&!b.image)return b.linkText&&N.match(/^.*?\]/)||(b.linkText=!0,_.highlightFormatting&&(b.formatting="link")),G(b);if("]"===J&&b.linkText){_.highlightFormatting&&(b.formatting="link");Ue=G(b);return b.linkText=!1,b.inline=b.f=N.match(/\(.*?\)| ?\[.*?\]/,!1)?x:Q,Ue}if("<"===J&&N.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return b.f=b.inline=ge,_.highlightFormatting&&(b.formatting="link"),(Ue=G(b))?Ue+=" ":Ue="",Ue+H.linkInline;if("<"===J&&N.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return b.f=b.inline=ge,_.highlightFormatting&&(b.formatting="link"),(Ue=G(b))?Ue+=" ":Ue="",Ue+H.linkEmail;if(_.xml&&"<"===J&&N.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var St=N.string.indexOf(">",N.pos);if(-1!=St){var Fr=N.string.substring(N.start,St);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(Fr)&&(b.md_inside=!0)}return N.backUp(1),b.htmlState=k.startState(q),w(N,b,K)}if(_.xml&&"<"===J&&N.match(/^\/\w*?>/))return b.md_inside=!1,"tag";if("*"===J||"_"===J){for(var Ot=1,kt=1==N.pos?" ":N.string.charAt(N.pos-2);Ot<3&&N.eat(J);)Ot++;var Lt=N.peek()||" ",It=!/\s/.test(Lt)&&(!M.test(Lt)||/\s/.test(kt)||M.test(kt)),hr=!/\s/.test(kt)&&(!M.test(kt)||/\s/.test(Lt)||M.test(Lt)),ir=null,mr=null;if(Ot%2&&(b.em||!It||"*"!==J&&hr&&!M.test(kt)?b.em==J&&hr&&("*"===J||!It||M.test(Lt))&&(ir=!1):ir=!0),Ot>1&&(b.strong||!It||"*"!==J&&hr&&!M.test(kt)?b.strong==J&&hr&&("*"===J||!It||M.test(Lt))&&(mr=!1):mr=!0),null!=mr||null!=ir)return _.highlightFormatting&&(b.formatting=null==ir?"strong":null==mr?"em":"strong em"),!0===ir&&(b.em=J),!0===mr&&(b.strong=J),Pe=G(b),!1===ir&&(b.em=!1),!1===mr&&(b.strong=!1),Pe}else if(" "===J&&(N.eat("*")||N.eat("_"))){if(" "===N.peek())return G(b);N.backUp(1)}if(_.strikethrough)if("~"===J&&N.eatWhile(J)){if(b.strikethrough)return _.highlightFormatting&&(b.formatting="strikethrough"),Pe=G(b),b.strikethrough=!1,Pe;if(N.match(/^[^\s]/,!1))return b.strikethrough=!0,_.highlightFormatting&&(b.formatting="strikethrough"),G(b)}else if(" "===J&&N.match("~~",!0)){if(" "===N.peek())return G(b);N.backUp(2)}if(_.emoji&&":"===J&&N.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){b.emoji=!0,_.highlightFormatting&&(b.formatting="emoji");var Wr=G(b);return b.emoji=!1,Wr}return" "===J&&(N.match(/^ +$/,!1)?b.trailingSpace++:b.trailingSpace&&(b.trailingSpaceNewLine=!0)),G(b)}function ge(N,b){if(">"===N.next()){b.f=b.inline=Q,_.highlightFormatting&&(b.formatting="link");var P=G(b);return P?P+=" ":P="",P+H.linkInline}return N.match(/^[^>]+/,!0),H.linkInline}function x(N,b){if(N.eatSpace())return null;var Te=N.next();return"("===Te||"["===Te?(b.f=b.inline=function fe(N){return function(b,Te){if(b.next()===N){Te.f=Te.inline=Q,_.highlightFormatting&&(Te.formatting="link-string");var J=G(Te);return Te.linkHref=!1,J}return b.match(ue[N]),Te.linkHref=!0,G(Te)}}("("===Te?")":"]"),_.highlightFormatting&&(b.formatting="link-string"),b.linkHref=!0,G(b)):"error"}var ue={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function Ae(N,b){return N.match(/^([^\]\\]|\\.)*\]:/,!1)?(b.f=He,N.next(),_.highlightFormatting&&(b.formatting="link"),b.linkText=!0,G(b)):m(N,b,Q)}function He(N,b){if(N.match("]:",!0)){b.f=b.inline=_e,_.highlightFormatting&&(b.formatting="link");var Te=G(b);return b.linkText=!1,Te}return N.match(/^([^\]\\]|\\.)+/,!0),H.linkText}function _e(N,b){return N.eatSpace()?null:(N.match(/^[^\s]+/,!0),void 0===N.peek()?b.linkTitle=!0:N.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),b.f=b.inline=Q,H.linkHref+" url")}var Ge={startState:function(){return{f:C,prevLine:{stream:null},thisLine:{stream:null},block:C,htmlState:null,indentation:0,inline:Q,text:te,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(N){return{f:N.f,prevLine:N.prevLine,thisLine:N.thisLine,block:N.block,htmlState:N.htmlState&&k.copyState(q,N.htmlState),indentation:N.indentation,localMode:N.localMode,localState:N.localMode?k.copyState(N.localMode,N.localState):null,inline:N.inline,text:N.text,formatting:!1,linkText:N.linkText,linkTitle:N.linkTitle,linkHref:N.linkHref,code:N.code,em:N.em,strong:N.strong,strikethrough:N.strikethrough,emoji:N.emoji,header:N.header,setext:N.setext,hr:N.hr,taskList:N.taskList,list:N.list,listStack:N.listStack.slice(0),quote:N.quote,indentedCode:N.indentedCode,trailingSpace:N.trailingSpace,trailingSpaceNewLine:N.trailingSpaceNewLine,md_inside:N.md_inside,fencedEndRE:N.fencedEndRE}},token:function(N,b){if(b.formatting=!1,N!=b.thisLine.stream){if(b.header=0,b.hr=!1,N.match(/^\s*$/,!0))return R(b),null;if(b.prevLine=b.thisLine,b.thisLine={stream:N},b.taskList=!1,b.trailingSpace=0,b.trailingSpaceNewLine=!1,!b.localState&&(b.f=b.block,b.f!=K)){var Te=N.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(b.indentation=Te,b.indentationDiff=null,Te>0)return null}}return b.f(N,b)},innerMode:function(N){return N.block==K?{state:N.htmlState,mode:q}:N.localState?{state:N.localState,mode:N.localMode}:{state:N,mode:Ge}},indent:function(N,b,Te){return N.block==K&&q.indent?q.indent(N.htmlState,b,Te):N.localState&&N.localMode.indent?N.localMode.indent(N.localState,b,Te):k.Pass},blankLine:R,getType:G,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return Ge},"xml"),k.defineMIME("text/markdown","markdown"),k.defineMIME("text/x-markdown","markdown")}(de(3867),de(1483),de(7874))},7874:(xt,et,de)=>{!function(k){"use strict";k.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var A=0;A<k.modeInfo.length;A++){var _=k.modeInfo[A];_.mimes&&(_.mime=_.mimes[0])}k.findModeByMIME=function(q){q=q.toLowerCase();for(var O=0;O<k.modeInfo.length;O++){var f=k.modeInfo[O];if(f.mime==q)return f;if(f.mimes)for(var H=0;H<f.mimes.length;H++)if(f.mimes[H]==q)return f}return/\+xml$/.test(q)?k.findModeByMIME("application/xml"):/\+json$/.test(q)?k.findModeByMIME("application/json"):void 0},k.findModeByExtension=function(q){q=q.toLowerCase();for(var O=0;O<k.modeInfo.length;O++){var f=k.modeInfo[O];if(f.ext)for(var H=0;H<f.ext.length;H++)if(f.ext[H]==q)return f}},k.findModeByFileName=function(q){for(var O=0;O<k.modeInfo.length;O++){var f=k.modeInfo[O];if(f.file&&f.file.test(q))return f}var H=q.lastIndexOf("."),oe=H>-1&&q.substring(H+1,q.length);if(oe)return k.findModeByExtension(oe)},k.findModeByName=function(q){q=q.toLowerCase();for(var O=0;O<k.modeInfo.length;O++){var f=k.modeInfo[O];if(f.name.toLowerCase()==q)return f;if(f.alias)for(var H=0;H<f.alias.length;H++)if(f.alias[H].toLowerCase()==q)return f}}}(de(3867))},1483:(xt,et,de)=>{!function(k){"use strict";var A={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},_={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};k.defineMode("xml",function(q,O){var j,U,f=q.indentUnit,H={},oe=O.htmlMode?A:_;for(var V in oe)H[V]=oe[V];for(var V in O)H[V]=O[V];function se(x,ue){function fe(_e){return ue.tokenize=_e,_e(x,ue)}var Ae=x.next();return"<"==Ae?x.eat("!")?x.eat("[")?x.match("CDATA[")?fe(re("atom","]]>")):null:x.match("--")?fe(re("comment","--\x3e")):x.match("DOCTYPE",!0,!0)?(x.eatWhile(/[\w\._\-]/),fe(ae(1))):null:x.eat("?")?(x.eatWhile(/[\w\._\-]/),ue.tokenize=re("meta","?>"),"meta"):(j=x.eat("/")?"closeTag":"openTag",ue.tokenize=ce,"tag bracket"):"&"==Ae?(x.eat("#")?x.eat("x")?x.eatWhile(/[a-fA-F\d]/)&&x.eat(";"):x.eatWhile(/[\d]/)&&x.eat(";"):x.eatWhile(/[\w\.\-:]/)&&x.eat(";"))?"atom":"error":(x.eatWhile(/[^&<]/),null)}function ce(x,ue){var fe=x.next();if(">"==fe||"/"==fe&&x.eat(">"))return ue.tokenize=se,j=">"==fe?"endTag":"selfcloseTag","tag bracket";if("="==fe)return j="equals",null;if("<"==fe){ue.tokenize=se,ue.state=D,ue.tagName=ue.tagStart=null;var Ae=ue.tokenize(x,ue);return Ae?Ae+" tag error":"tag error"}return/[\'\"]/.test(fe)?(ue.tokenize=function Me(x){var ue=function(fe,Ae){for(;!fe.eol();)if(fe.next()==x){Ae.tokenize=ce;break}return"string"};return ue.isInAttribute=!0,ue}(fe),ue.stringStartCol=x.column(),ue.tokenize(x,ue)):(x.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function re(x,ue){return function(fe,Ae){for(;!fe.eol();){if(fe.match(ue)){Ae.tokenize=se;break}fe.next()}return x}}function ae(x){return function(ue,fe){for(var Ae;null!=(Ae=ue.next());){if("<"==Ae)return fe.tokenize=ae(x+1),fe.tokenize(ue,fe);if(">"==Ae){if(1==x){fe.tokenize=se;break}return fe.tokenize=ae(x-1),fe.tokenize(ue,fe)}}return"meta"}}function M(x){return x&&x.toLowerCase()}function W(x,ue,fe){this.prev=x.context,this.tagName=ue||"",this.indent=x.indented,this.startOfLine=fe,(H.doNotIndent.hasOwnProperty(ue)||x.context&&x.context.noIndent)&&(this.noIndent=!0)}function m(x){x.context&&(x.context=x.context.prev)}function w(x,ue){for(var fe;;){if(!x.context||!H.contextGrabbers.hasOwnProperty(M(fe=x.context.tagName))||!H.contextGrabbers[M(fe)].hasOwnProperty(M(ue)))return;m(x)}}function D(x,ue,fe){return"openTag"==x?(fe.tagStart=ue.column(),R):"closeTag"==x?C:D}function R(x,ue,fe){return"word"==x?(fe.tagName=ue.current(),U="tag",G):H.allowMissingTagName&&"endTag"==x?(U="tag bracket",G(x,0,fe)):(U="error",R)}function C(x,ue,fe){if("word"==x){var Ae=ue.current();return fe.context&&fe.context.tagName!=Ae&&H.implicitlyClosed.hasOwnProperty(M(fe.context.tagName))&&m(fe),fe.context&&fe.context.tagName==Ae||!1===H.matchClosing?(U="tag",K):(U="tag error",ne)}return H.allowMissingTagName&&"endTag"==x?(U="tag bracket",K(x,0,fe)):(U="error",ne)}function K(x,ue,fe){return"endTag"!=x?(U="error",K):(m(fe),D)}function ne(x,ue,fe){return U="error",K(x,0,fe)}function G(x,ue,fe){if("word"==x)return U="attribute",te;if("endTag"==x||"selfcloseTag"==x){var Ae=fe.tagName,He=fe.tagStart;return fe.tagName=fe.tagStart=null,"selfcloseTag"==x||H.autoSelfClosers.hasOwnProperty(M(Ae))?w(fe,Ae):(w(fe,Ae),fe.context=new W(fe,Ae,He==fe.indented)),D}return U="error",G}function te(x,ue,fe){return"equals"==x?Q:(H.allowMissing||(U="error"),G(x,0,fe))}function Q(x,ue,fe){return"string"==x?ge:"word"==x&&H.allowUnquoted?(U="string",G):(U="error",G(x,0,fe))}function ge(x,ue,fe){return"string"==x?ge:G(x,0,fe)}return se.isInText=!0,{startState:function(x){var ue={tokenize:se,state:D,indented:x||0,tagName:null,tagStart:null,context:null};return null!=x&&(ue.baseIndent=x),ue},token:function(x,ue){if(!ue.tagName&&x.sol()&&(ue.indented=x.indentation()),x.eatSpace())return null;j=null;var fe=ue.tokenize(x,ue);return(fe||j)&&"comment"!=fe&&(U=null,ue.state=ue.state(j||fe,x,ue),U&&(fe="error"==U?fe+" error":U)),fe},indent:function(x,ue,fe){var Ae=x.context;if(x.tokenize.isInAttribute)return x.tagStart==x.indented?x.stringStartCol+1:x.indented+f;if(Ae&&Ae.noIndent)return k.Pass;if(x.tokenize!=ce&&x.tokenize!=se)return fe?fe.match(/^(\s*)/)[0].length:0;if(x.tagName)return!1!==H.multilineTagIndentPastTag?x.tagStart+x.tagName.length+2:x.tagStart+f*(H.multilineTagIndentFactor||1);if(H.alignCDATA&&/<!\[CDATA\[/.test(ue))return 0;var He=ue&&/^<(\/)?([\w_:\.-]*)/.exec(ue);if(He&&He[1])for(;Ae;){if(Ae.tagName==He[2]){Ae=Ae.prev;break}if(!H.implicitlyClosed.hasOwnProperty(M(Ae.tagName)))break;Ae=Ae.prev}else if(He)for(;Ae;){var _e=H.contextGrabbers[M(Ae.tagName)];if(!_e||!_e.hasOwnProperty(M(He[2])))break;Ae=Ae.prev}for(;Ae&&Ae.prev&&!Ae.startOfLine;)Ae=Ae.prev;return Ae?Ae.indent+f:x.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:H.htmlMode?"html":"xml",helperType:H.htmlMode?"html":"xml",skipAttribute:function(x){x.state==Q&&(x.state=G)},xmlCurrentTag:function(x){return x.tagName?{name:x.tagName,close:"closeTag"==x.type}:null},xmlCurrentContext:function(x){for(var ue=[],fe=x.context;fe;fe=fe.prev)ue.push(fe.tagName);return ue.reverse()}}}),k.defineMIME("text/xml","xml"),k.defineMIME("application/xml","xml"),k.mimeModes.hasOwnProperty("text/html")||k.defineMIME("text/html",{name:"xml",htmlMode:!0})}(de(3867))},1685:(xt,et,de)=>{!function(k){var A={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}",mutiCharsPairs:[["*(",")*"]]},_=k.Pos;function q(re,ae){return"pairs"==ae&&"string"==typeof re?re:"object"==typeof re&&null!=re[ae]?re[ae]:A[ae]}k.defineOption("autoCloseBrackets",!1,function(re,ae,M){M&&M!=k.Init&&(re.removeKeyMap(O),re.state.closeBrackets=null),ae&&(f(q(ae,"pairs")),re.state.closeBrackets=ae,re.addKeyMap(O))});var O={Backspace:function V(re){var ae=oe(re);if(!ae||re.getOption("disableInput"))return k.Pass;for(var M=q(ae,"pairs"),W=re.listSelections(),m=0;m<W.length;m++){if(!W[m].empty())return k.Pass;var w=ce(re,W[m].head);if(!w||M.indexOf(w)%2!=0)return k.Pass}for(m=W.length-1;m>=0;m--){var D=W[m].head;re.replaceRange("",_(D.line,D.ch-1),_(D.line,D.ch+1),"+delete")}},Enter:function j(re){var ae=oe(re),M=ae&&q(ae,"explode");if(!M||re.getOption("disableInput"))return k.Pass;for(var W=re.listSelections(),m=0;m<W.length;m++){if(!W[m].empty())return k.Pass;var w=ce(re,W[m].head);if(!w||M.indexOf(w)%2!=0)return k.Pass}re.operation(function(){var D=re.lineSeparator()||"\n";re.replaceSelection(D+D,null),re.execCommand("goCharLeft"),W=re.listSelections();for(var R=0;R<W.length;R++){var C=W[R].head.line;re.indentLine(C,null,!0),re.indentLine(C+1,null,!0)}})}};function f(re){for(var ae=0;ae<re.length;ae++){var M=re.charAt(ae),W="'"+M+"'";O[W]||(O[W]=H(M))}}function H(re){return function(ae){return function se(re,ae){var M=oe(re);if(!M||re.getOption("disableInput"))return k.Pass;var W=q(M,"pairs"),m=W.indexOf(ae);if(-1==m)return k.Pass;var w=q(M,"triples"),D=W.charAt(m+1)==ae,R=re.listSelections(),C=m%2==0;const K=q(M,"mutiCharsPairs");var ne;let G,te;for(var Q=0;Q<R.length;Q++){var ue,ge=R[Q],x=ge.head,fe=re.getRange(x,_(x.line,x.ch+1));for(const Ge of K){if(G=Ge[0],G[G.length-1]===ae)for(let N=1;N<G.length;N++){const b=re.getRange(_(x.line,x.ch-N),x);if(G[G.length-1-N]!==b){G=void 0;break}}else G=void 0;if(G){te=Ge[1];break}}if(G)ue="mutiCharsPairs";else if(C&&!ge.empty())ue="surround";else if(!D&&C||fe!=ae)if(D&&x.ch>1&&w.indexOf(ae)>=0&&re.getRange(_(x.line,x.ch-2),x)==ae+ae){if(x.ch>2&&/\bstring/.test(re.getTokenTypeAt(_(x.line,x.ch-2))))return k.Pass;ue="addFour"}else if(D){var Ae=0==x.ch?" ":re.getRange(_(x.line,x.ch-1),x);if(k.isWordChar(fe)||Ae==ae||k.isWordChar(Ae))return k.Pass;ue="both"}else{if(!C)return k.Pass;ue="both"}else ue=D&&Me(re,x)?"both":w.indexOf(ae)>=0&&re.getRange(x,_(x.line,x.ch+3))==ae+ae+ae?"skipThree":"skip";if(ne){if(ne!=ue)return k.Pass}else ne=ue}var He=m%2?W.charAt(m-1):ae,_e=m%2?ae:W.charAt(m+1);re.operation(function(){if("skip"==ne)re.execCommand("goCharRight");else if("skipThree"==ne)for(var Ge=0;Ge<3;Ge++)re.execCommand("goCharRight");else if("surround"==ne){var N=re.getSelections();for(Ge=0;Ge<N.length;Ge++)N[Ge]=He+N[Ge]+_e;for(re.replaceSelections(N,"around"),N=re.listSelections().slice(),Ge=0;Ge<N.length;Ge++)N[Ge]=U(N[Ge]);re.setSelections(N)}else if("both"==ne)re.replaceSelection(He+_e,null),re.triggerElectric(He+_e),re.execCommand("goCharLeft");else if("addFour"==ne)re.replaceSelection(He+He+He+He,"before"),re.execCommand("goCharRight");else if("mutiCharsPairs"===ne){re.replaceSelection(G[G.length-1]+te,null),re.triggerElectric(G[G.length-1]+te);for(let b=0;b<te.length;b++)re.execCommand("goCharLeft")}})}(ae,re)}}function oe(re){var ae=re.state.closeBrackets;return!ae||ae.override?ae:re.getModeAt(re.getCursor()).closeBrackets||ae}function U(re){var ae=k.cmpPos(re.anchor,re.head)>0;return{anchor:new _(re.anchor.line,re.anchor.ch+(ae?-1:1)),head:new _(re.head.line,re.head.ch+(ae?1:-1))}}function ce(re,ae){var M=re.getRange(_(ae.line,ae.ch-1),_(ae.line,ae.ch+1));return 2==M.length?M:null}function Me(re,ae){var M=re.getTokenAt(_(ae.line,ae.ch+1));return/\bstring/.test(M.type)&&M.start==ae.ch&&(0==ae.ch||!/\bstring/.test(re.getTokenTypeAt(ae)))}f(A.pairs+"`")}(de(3867))}}]);