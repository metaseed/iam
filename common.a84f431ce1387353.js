"use strict";(self.webpackChunkiam=self.webpackChunkiam||[]).push([["common"],{6145:(y,f,r)=>{r.d(f,{z:()=>C});var t=r(8079),_=r(3961),d=r(8513);let C=(()=>{class l{constructor(s,c){this._store=s,this.docEditor=c}set sourceLines(s){const c=/\[\s*(\d+)\s*,\s*(\d+)\s*\]/.exec(s);this.sourceLineStart=+c[1],this.sourceLineEnd=+c[2]}get source(){const s=this._store.currentDocContentString$.state,[c,i]=this.getRange(s);return s.substring(c,i)}set source(s){if(this.docEditor.currentEditor)return void this.docEditor.currentEditor.replaceRange(s+"\n",this.sourceLineStart,0,this.sourceLineEnd,0);const c=this._store.currentDocContent$.state,i=c.content,g=this._store.currentId_.state,[h,D]=this.getRange(i),v=function(l,m,s,c){return m<0&&(m+=this.length)<0&&(m=0),l.slice(0,m)+(c||"")+l.slice(m+s)}(i,h,D-h,s),n=Object.assign(Object.assign({},c),{content:v});this._store.update({id:g,changes:{content:n}}),setTimeout(()=>this._store.updateCurrentDocStatus({isEditorDirty:!0}))}getRange(s){if(this.sourceLineStart>=this.sourceLineEnd)throw"DataSourceLines: sourceLineStart should less than sourceLineEnd";let i,g,c=0;for(let h=0;h<s.length;h++)if("\n"===s[h]&&(c++,c===this.sourceLineStart&&(i=h+1),c===this.sourceLineEnd)){g=h;break}if(void 0===i||void 0===g)throw"DataSourceLines: content lenth is less than expected!";return[i,g]}}return l.\u0275fac=function(s){return new(s||l)(t.Y36(_.G),t.Y36(d.d))},l.\u0275dir=t.lG2({type:l,inputs:{sourceLines:["data-source-lines","sourceLines"]}}),l})()},426:(y,f,r)=>{r.d(f,{I:()=>v});var t=r(8079),_=r(7394);let d=(()=>{class n{constructor(){this.search=new t.vpe}onSearch(e){this.search.next(e.trim())}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["iam-doc-search-bar"]],outputs:{search:"search"},decls:4,vars:0,consts:[[1,"doc-search"],[1,"search-icon"],["matInput","","matInputAutofocus","","action-bar-flex","","type","text","placeholder","Search...",1,"input-lg","search-input",3,"keyup"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-icon",1),t._uU(2,"search"),t.qZA(),t.TgZ(3,"input",2),t.NdJ("keyup",function(p){return o.onSearch(p.target.value)}),t.qZA(),t.qZA())},directives:[_.Hw],styles:[".doc-search[_ngcontent-%COMP%]{height:4rem;padding-left:1rem;font-size:1.4rem;display:flex;flex:1;background:white}.doc-search[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto}.doc-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;font-family:RobotoRegular;width:auto;max-width:none;display:inline-block;border:0;padding:.25rem .5rem;margin:0}"]}),n})();var C=r(2518),S=r(3550),l=r(878),m=r(6251),s=r(3961),c=r(6903),i=r(7468);function g(n,a){if(1&n&&t._UZ(0,"div",2),2&n){const e=a.$implicit,o=t.oxw();t.Q6J("innerHTML",o.getMatches(e),t.oJD)}}let h=(()=>{class n{constructor(){this.onClick=new t.vpe}getMatches(e){const o=e.fragment;let u="",p=0;return e.matches.forEach(L=>{const E=L.indices;u+=o.substr(p,E[0]-p),u+=`<em>${L.text}</em>`,p=E[1]}),u+=o.substr(p),u}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["doc-search-item"]],inputs:{item:"item"},outputs:{onClick:"onClick"},decls:9,vars:4,consts:[[1,"title",3,"click"],["class","fragment",3,"innerHTML",4,"ngFor","ngForOf"],[1,"fragment",3,"innerHTML"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-header"),t._UZ(2,"div"),t.TgZ(3,"mat-card-title",0),t.NdJ("click",function(){return o.onClick.emit(o.item)}),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"mat-card-content"),t.YNc(8,g,1,1,"div",1),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Oqu(o.item.title),t.xp6(2),t.AsE(" Score: ",o.item.score," Id: ",o.item.id,""),t.xp6(2),t.Q6J("ngForOf",o.item.text_matches))},directives:[i.a8,i.dk,i.n5,i.$j,i.dn,c.sg],styles:[".fragment[_ngcontent-%COMP%]{white-space:pre-wrap}.fragment[_ngcontent-%COMP%]     em{background:yellow}[_nghost-%COMP%]{display:inline-block;max-width:1000px;width:100%;display:flex}mat-card[_ngcontent-%COMP%]{width:100%;margin-top:3px}mat-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{cursor:pointer;text-decoration:underline}"]}),n})();function D(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"doc-search-item",4),t.NdJ("onClick",function(u){return t.CHM(e),t.oxw().onClick.emit(u)}),t.qZA()}2&n&&t.Q6J("item",a.$implicit)}let v=(()=>{class n{constructor(e,o){this._store=e,this.documentEffects=o,this.onClick=new t.vpe,this.searchResult$=this._store.searchResult_,this.trackByFunc=(u,p)=>p.id}ngAfterViewInit(){this.docSearchComponent.search.pipe((0,S.b)(500),(0,l.x)(),(0,C.b)(e=>{""!==e.trim()&&this.documentEffects.searchDocument_.next({query:e})})).subscribe()}onSearch(e){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.G),t.Y36(m.CL))},n.\u0275cmp=t.Xpm({type:n,selectors:[["doc-search-list"]],viewQuery:function(e,o){if(1&e&&t.Gf(d,5),2&e){let u;t.iGM(u=t.CRH())&&(o.docSearchComponent=u.first)}},outputs:{onClick:"onClick"},decls:5,vars:4,consts:[["clickToggleEnable","false"],[1,"search-result"],["search",""],[3,"item","onClick",4,"ngFor","ngForOf","ngForTrackBy"],[3,"item","onClick"]],template:function(e,o){1&e&&(t._UZ(0,"iam-doc-search-bar",0),t.TgZ(1,"div",1,2),t.YNc(3,D,1,1,"doc-search-item",3),t.ALo(4,"async"),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngForOf",t.lcZ(4,2,o.searchResult$))("ngForTrackBy",o.trackByFunc))},directives:[d,c.sg,h],pipes:[c.Ov],styles:["[_nghost-%COMP%]{max-width:400px;width:100%}.search-result[_ngcontent-%COMP%]{overflow:auto;display:flex;flex-flow:row wrap;box-sizing:border-box;justify-content:space-around;max-height:calc(100vh - 50px);margin-bottom:50px}"]}),n})()},8513:(y,f,r)=>{r.d(f,{d:()=>_});var t=r(8079);let _=(()=>{class d{}return d.\u0275fac=function(S){return new(S||d)},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);