(self.webpackChunkiam=self.webpackChunkiam||[]).push([["src_app_modules_markdown_editor_markdown-editor_module_ts"],{75727:(yt,tt,de)=>{"use strict";de.r(tt),de.d(tt,{MarkdownEditorModule:()=>Pt});var T=de(17011),Q=de(26109),H=de(10493),W=de(43867),C=de.n(W),f=de(95281),I=de(63517);class ie{constructor(U,ee){this.markdownService=U,this.commands=W.commands,this.docContentSet$=new Q.x,this.docContentModified$=new Q.x,this.docEditorLoaded$=new Q.x,ee.currentEditor=this,this.docEditorLoaded$.subscribe(we=>this.editor=we)}gotoLine(U){this.editor.focus(),this.editor.setCursor(U),this.editor.execCommand("showInCenter")}selectRange(U,ee,we,d){this.editor.focus(),this.editor.setSelection({line:U,ch:ee},{line:we,ch:d}),this.editor.execCommand("showInCenter")}replaceRange(U,ee,we,d,w){this.editor.replaceRange(U,{line:ee,ch:we},{line:d,ch:w})}}ie.\u0275fac=function(U){return new(U||ie)(f.LFG(H.A),f.LFG(I.d))},ie.\u0275prov=f.Yz7({token:ie,factory:ie.\u0275fac});var q=de(44578),X=de(84852);de(56338),de(69915),de(46246),de(93518),de(15626),de(69347),de(75396),de(54731),de(82491),de(81685),de(4171),de(37726),de(99137),de(86720);class ne extends X.LF{get host(){return this._host||(this._host=this.elementRef.nativeElement.getElementsByTagName("textarea")[0]),this._host}constructor(U,ee,we){super(),this.editorService=U,this.utils=ee,this.elementRef=we,this.change=new f.vpe,this.focus=new f.vpe,this.blur=new f.vpe,this.afterInit=new Q.x,this._contentSet=!1,super.addSub(this.utils.isWideScreen$.subscribe(d=>this.showLineNumber=d))}ngOnInit(){this.config=this.config||{mode:{name:"gfm",highlightFormatting:!0},lineNumbers:this.showLineNumber,lineWrapping:!0,autoCloseBrackets:!0,autoCloseTags:!0,matchBrackets:!0,matchTags:{bothTags:!0},extraKeys:{F11:function(U){U.setOption("fullScreen",!U.getOption("fullScreen"))},Esc:function(U){U.getOption("fullScreen")&&U.setOption("fullScreen",!1)}}},this.codemirrorInit(this.config),this.afterInit.next(this.codemirror),this.editorService.docEditorLoaded$.next(this.codemirror)}get value(){return this.codemirror.getValue()}codemirrorInit(U){this.codemirror=C().fromTextArea(this.host,U),this.codemirror.on("change",()=>{if(this._contentSet)return;const ee=this.value;this.change.emit(ee),this.editorService.docContentModified$.next([ee,this.codemirror])}),this.codemirror.on("cursorActivity",ee=>this.changeCursorStyle(ee)),this.codemirror.on("focus",()=>{this.focus.emit()}),this.codemirror.on("blur",()=>{this.blur.emit()})}writeValue(U){this.codemirror&&(this._contentSet=!0,this.codemirror.setValue(U),this._contentSet=!1,this.codemirror.clearHistory(),this.editorService.docContentSet$.next(this.codemirror))}changeCursorStyle(U){const ee=U.getCursor(),we=this.codemirror.cursorCoords(ee),d=document.elementFromPoint(we.left,we.top+5),w=U.display.cursorDiv;d&&d.className.includes("cm-em")?w.classList.contains("cursor-italic")||w.classList.add("cursor-italic"):w.classList.remove("cursor-italic")}refresh(){this.codemirror.refresh()}}ne.\u0275fac=function(U){return new(U||ne)(f.Y36(ie),f.Y36(X.dU),f.Y36(f.SBq))},ne.\u0275cmp=f.Xpm({type:ne,selectors:[["ms-codemirror"]],inputs:{config:"config"},outputs:{change:"change",focus:"focus",blur:"blur"},features:[f.qOj],decls:2,vars:0,consts:[["host",""]],template:function(U,ee){1&U&&f._UZ(0,"textarea",null,0)},encapsulation:2});var Y=de(12538),ce=de(76801),R=de(85930),me=de(86828),x=de(66150),ve=de(12011),fe=de(22482),Se=de(69021),Pe=de(67938),Ue=de(74457),Ge=de(84985),N=de(48586),k=de(36299),Oe=de(80915),F=de(93812),Z=de(89372);var Ee=de(30504),Ce=de(48877),Ke=de(3746);class ze extends X.LF{constructor(U,ee,we){super(),this.editorService=U,this.store=ee,this.documentEffects=we,this.isSyncing$=new Ge.X(!1),super.addSub(this.editorService.docEditorLoaded$.subscribe(d=>this.editor=d),this.store.currentDocStatus_IsEditorDirty$.pipe(function ye(...ge){return function te(...ge){const U=(0,F.yG)(ge),ee=(0,F._6)(ge,1/0);return ge=(0,k.k)(ge),(0,N.e)((we,d)=>{(0,Oe.J)(ee)((0,Z.D)([we,...ge],U)).subscribe(d)})}(...ge)}(this.editorService.docContentModified$.pipe((0,ce.U)(d=>!0))),(0,Ee.b)(X.oS),(0,Y.b)(d=>{d&&this.documentEffects.saveDocument_.next({id:this.store.currentId_.state,content:this.editor.getValue(),format:X.cZ.md})}),(0,X.P0)(8,5e3)),this.editorService.docContentSet$.subscribe(d=>{this.docLoadedHandler(d)}),this.editorService.docContentModified$.subscribe(([d,w])=>this.checkDirty(w)),this.documentEffects.saveDocument_.operationStatus$.subscribe(d=>{d.step===Ce.m7.Start?(this.docSavedHandler(this.editor),this.isSaving=!0):d.isEndStatus()&&(this.isSaving=!1)}))}docLoadedHandler(U){const ee=U.getDoc();this.contentGeneration=ee.changeGeneration(),ee.clearHistory(),this.checkDirty(U)}docSavedHandler(U){U&&(this.contentGeneration=U.getDoc().changeGeneration(!1),this.checkDirty(U))}checkDirty(U){if(!this.contentGeneration)return;const ee=!U.getDoc().isClean(this.contentGeneration);this.store.upsertDocStatus({isEditorDirty:ee})}}ze.\u0275fac=function(U){return new(U||ze)(f.LFG(ie),f.LFG(Ke.G),f.LFG(fe.CL))},ze.\u0275prov=f.Yz7({token:ze,factory:ze.\u0275fac}),de(41595),de(76670),de(33886);var Ze=de(72785),xt=de(18894),Vt=de(353);const pr=["imageUpload"],It=["progress"];function St(ge,U){if(1&ge&&(f.TgZ(0,"span"),f._uU(1),f.qZA()),2&ge){const ee=f.oxw();f.xp6(1),f.Oqu(ee.data.message)}}function sr(ge,U){if(1&ge&&f._UZ(0,"mat-progress-bar",6,7),2&ge){const ee=f.oxw();f.Q6J("value",ee.progressPercent)}}function Er(ge,U){if(1&ge){const ee=f.EpF();f.TgZ(0,"div",8)(1,"button",9),f.NdJ("click",function(){f.CHM(ee);const d=f.oxw();return f.KtG(d.action())}),f._uU(2),f.qZA()()}if(2&ge){const ee=f.oxw();f.xp6(2),f.Oqu(ee.data.action)}}class br{constructor(U,ee){this.data=U,this.snackBarRef=ee,this.progressPercent=0,this.accept="image/*",this.data.notifyProgress=this.notifyProgress.bind(this),this.accept=U.accept}onFileChanged(U){this.selectedFile=U.target.files[0],this.data.showMessage=!1,this.data.action="cancel",this.data.takeAction?.(this.selectedFile)}notifyProgress(U){this.progressPercent=U}get hasAction(){return!!this.data.action}action(){"cancel"!==this.data.action?(this.imageUpload.nativeElement.click(),this.data.selectFile?.(),this.data.action="cancel"):this.data.cancelAction()}}br.\u0275fac=function(U){return new(U||br)(f.Y36(Ze.qD),f.Y36(Ze.OX))},br.\u0275cmp=f.Xpm({type:br,selectors:[["ms-file-upload"]],viewQuery:function(U,ee){if(1&U&&(f.Gf(pr,5),f.Gf(It,5)),2&U){let we;f.iGM(we=f.CRH())&&(ee.imageUpload=we.first),f.iGM(we=f.CRH())&&(ee.progressBar=we.first)}},decls:7,vars:4,consts:[["type","file",2,"display","none",3,"accept","change"],["imageUpload",""],[1,"mat-simple-snackbar"],[4,"ngIf"],["mode","determinate",3,"value",4,"ngIf"],["class","mat-simple-snackbar-action",4,"ngIf"],["mode","determinate",3,"value"],["progress",""],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(U,ee){1&U&&(f.TgZ(0,"input",0,1),f.NdJ("change",function(d){return ee.onFileChanged(d)}),f.qZA(),f.TgZ(2,"div")(3,"div",2),f.YNc(4,St,2,1,"span",3),f.YNc(5,sr,2,1,"mat-progress-bar",4),f.YNc(6,Er,3,1,"div",5),f.qZA()()),2&U&&(f.Q6J("accept",ee.accept),f.xp6(4),f.Q6J("ngIf",ee.data.showMessage),f.xp6(1),f.Q6J("ngIf",!ee.data.showMessage),f.xp6(1),f.Q6J("ngIf",ee.hasAction))},dependencies:[T.O5,xt.lW,Vt.pW],styles:[".mat-mdc-simple-snack-bar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-mdc-snack-bar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-mdc-snack-bar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-mdc-snack-bar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2});var xn=de(40018),Fr=de(76530),Ir=de(86050),Lt=de(94164);class Nt{constructor(U,ee,we){this._snackBar=U,this._github=ee,this._store=we,this.doUpload=(d,w,oe,ke)=>{const We=new FileReader;let Je=null,Ye=null;const De=new Promise((mt,it)=>{Je=mt,Ye=it});return We.onloadend=mt=>{const it=We.result,ct=it.substring(it.indexOf(",")+1);return this._github.init().pipe((0,xn.w)(Xe=>{const Yr=this._store.currentId_.state,qr=(new Date).toISOString().replace(/[-:.]/g,"");return Xe.newFileReportProgress(`${Fr.IQ}/${Yr}/${oe}/${qr}-${d.name}`,ct,!0)})).subscribe({next:Xe=>{switch(Xe.type){case Ir.dt.UploadProgress:const Yr=Math.round(100*Xe.loaded/Xe.total);w.notifyProgress?.(Yr);break;case Ir.dt.Response:Je(Xe.body.content.download_url),ke.dismiss()}},error:Xe=>{ke.dismiss(),this._snackBar.open(Xe.error.message,"ok",{duration:2e3}),Ye(Xe),console.error(Xe)}})},We.readAsDataURL(d),De}}uploadSelected(U){let d=null,oe=null,ke=null;const We=new Promise((De,mt)=>{oe=De,ke=mt}),Je={accept:`${U}/*`,showMessage:!0,message:`pick ${U} to upload?`,action:"OK",selectFile:()=>clearTimeout(d),cancelAction:()=>{console.log(`${U} uploading canceled`),ke("canceled"),setTimeout(De=>Ye.dismiss(),1e3)},takeAction:De=>this.doUpload(De,Je,U,Ye).then(oe,ke)},Ye=this._snackBar.openFromComponent(br,{data:Je,duration:0});return d=setTimeout(De=>{ke("timeout"),Ye.dismiss()},1e4),We}uploadFile(U,ee){const[we,d]=this.showProgress();return this.doUpload(ee,d,U,we)}showProgress(){const d={showMessage:!1,action:"Cancel",cancelAction:()=>{console.log("uploading canceled"),setTimeout(oe=>w.dismiss(),1e3)}},w=this._snackBar.openFromComponent(br,{data:d,duration:0});return[w,d]}}Nt.\u0275fac=function(U){return new(U||Nt)(f.LFG(Ze.ux),f.LFG(Lt.SS),f.LFG(Ke.G))},Nt.\u0275prov=f.Yz7({token:Nt,factory:Nt.\u0275fac,providedIn:"root"});class qe{constructor(U,ee,we,d){this._editorService=U,this._commandService=ee,this._uploadService=we,this.markdownStore=d,this.config=qe.COMMANDS_CONFIG??{Bold:{command:"Bold",func:(w,oe)=>`**${w||oe}**`,startSize:2,hotKey:"Ctrl-M B"},Italic:{command:"Italic",func:(w,oe)=>`*${w||oe}*`,startSize:1,hotKey:"Ctrl-M T"},Heading:{command:"Heading",func:(w,oe)=>`# ${w||oe}`,startSize:2,hotKey:"Ctrl-M H"},Reference:{command:"Reference",func:(w,oe)=>`> ${w||oe}`,startSize:2,hotKey:"Ctrl-M R"},Link:{command:"Link",func:(w,oe)=>`[${w||oe}]()`,endSize:1,hotKey:"Ctrl-M L"},Image:{command:"Image",func:(w,oe)=>`![${w||oe}]()`,endSize:1,hotKey:"Ctrl-M I"},Ul:{command:"Ul",func:(w,oe)=>`- ${w||oe}`,startSize:2,hotKey:"Ctrl-M U"},Ol:{command:"Ol",func:(w,oe)=>`1 ${w||oe}`,startSize:2,hotKey:"Ctrl-M O"},Code:{command:"Code",func:(w,oe,ke)=>{const We=this.editor.getCursor(),Je=this.editor.getSearchCursor(/^\s*```[^\S\n\r]*(\S+)/,We);let De,Ye=Je.findPrevious();return Ye?De=Je.pos.match[1]:(Ye=Je.findNext(),De=Ye?Je.pos.match[1]:""),ke.startSize=De?De.length+4:3,"```"+De+"\r\n"+(w||oe)+"\r\n```"},startSize:3,hotKey:"Ctrl-M C"},Meta:{command:"Meta",hotKey:"Ctrl-M M",func:this.insertMeta}},this._commandService.commands.subscribe(w=>this.handleCommand(w)),this._editorService.docEditorLoaded$.subscribe(w=>{w.on("paste",(ke,We)=>{const Ye=(We.clipboardData||window.clipboardData).items;if(console.log(Ye),Ye)for(let De=0;De<Ye.length;De++)if("file"===Ye[De].kind){const mt=Ye[De].getAsFile();let it=mt.type.split("/")[0];if(!it){const ct=mt.name.split(".");it=ct.length>1?ct.pop():"resource"}this._uploadService.uploadFile(it,mt).then(ct=>{this.editor.replaceSelection(`![](${ct})`)})}}),this.editor=w;const oe={};for(const ke of Object.keys(this.config))oe[this.config[ke].hotKey]=()=>{this.insertContent(ke)};this.codeMirrorMaps(oe)})}codeMirrorMaps(U){U["Ctrl-M Q"]=function(we){we.display.input.textarea.blur()},U["Ctrl-Alt-Up"]=()=>{this.markdownStore.scrollView_.next({isUp:!0})},U["Ctrl-Alt-Down"]=()=>{this.markdownStore.scrollView_.next({isUp:!1})},U["Ctrl-Up"]="scrollLineUp",U["Ctrl-G"]="jumpToLine",U["Ctrl-Down"]="scrollLineDown",U["Ctrl-F"]="findPersistent",U["Shift-Delete"]="killLine",U["Shift-Backspace"]="delLineLeft",U["Ctrl-Shift-K"]="deleteLine",U.Home="goLineStart",U.End="goLineEnd",U["Ctrl-Left"]="goWordLeft",U["Ctrl-Right"]="goWordRight",U["Ctrl-Alt-Left"]="goSubwordLeft",U["Ctrl-Alt-Right"]="goSubwordRight",U["Ctrl-Backspace"]="delWordBefore",U["Ctrl-Shift-Backspace"]="delWordAfter",U["Ctrl-Alt-Backspace"]="delGroupBefore",U["Ctrl-Alt-Shift-Backspace"]="delGroupAfter",U.Tab=we=>{we.somethingSelected()?we.indentSelection("add"):we.execCommand("insertSoftTab")},U["Shift-Tab"]=we=>{we.indentSelection("subtract")},U["Alt-\\"]="goToBracket",U["Alt-Shift-\\"]="selectBetweenBrackets",U["Alt-Shift-Right"]="selectScope",U["Ctrl-Enter"]="insertLineAfter",U["Ctrl-Shift-Enter"]="insertLineBefore",U["Alt-Up"]="swapLineUp",U["Alt-Down"]="swapLineDown",U["Ctrl-/"]="toggleCommentIndented",U["Ctrl-I"]="selectLine",U["Ctrl-D"]="selectNextOccurrence",U["Ctrl-H"]="replace",U.Esc="singleSelectionTop",U["Alt-Shift+Down"]="duplicateLine",U.Backspace="smartBackspace",U["Alt-M"]="showInCenter",this.editor.setOption("extraKeys",W.normalizeKeyMap(U))}insertMeta(U){U.setCursor({line:1,ch:0}),U.replaceSelection(X.FA,"start"),U.focus()}handleCommand(U){this.insertContent(U.name)}insertContent(U){if(!this.editor)return;let ee=this.editor.getSelection();if("Focus"===U)return void this.editor.focus();if("Meta"===U)return void this.insertMeta(this.editor);const we=this.config[U];ee=we.func(ee,"",we);const d=this.editor.getCursor();if(we.startSize)this.editor.replaceSelection(ee,"start"),this.editor.focus(),this.editor.setCursor({line:d.line,ch:d.ch+we.startSize});else if(we.endSize){this.editor.replaceSelection(ee,"around");const w=this.editor.getCursor("to");this.editor.focus(),this.editor.setCursor({line:w.line,ch:w.ch-we.endSize})}"Image"===we.command&&this._uploadService.uploadSelected("image").then(w=>{this.editor.replaceSelection(w)})}}qe.\u0275fac=function(U){return new(U||qe)(f.LFG(ie),f.LFG(X.VD),f.LFG(Nt),f.LFG(H.A))},qe.\u0275prov=f.Yz7({token:qe,factory:qe.\u0275fac});var Tt=de(89413),Gr=de(53502),_t=de(56129),Vr=de(62589),Me=de(16844),Ot=de(31777),He=de(46901),at=de(67731),ft=de(61936),Cr=de(20151);class rt{constructor(U){this._bottomSheetRef=U,this.changeNote=""}onOk(U){this._bottomSheetRef.dismiss(),U.preventDefault()}}rt.\u0275fac=function(U){return new(U||rt)(f.Y36(at.oL))},rt.\u0275cmp=f.Xpm({type:rt,selectors:[["change-note-input"]],decls:8,vars:2,consts:[[1,"input-form"],["appearance","fill",1,"input-field"],["matInput","","placeholder","showed in document history",3,"autofocus","ngModel","ngModelChange","keyup.Enter"],["input",""],["mat-flat-button","","color","primary",3,"click"]],template:function(U,ee){if(1&U&&(f.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),f._uU(3,"document change note"),f.qZA(),f.TgZ(4,"input",2,3),f.NdJ("ngModelChange",function(d){return ee.changeNote=d})("keyup.Enter",function(d){return ee.onOk(d)}),f.qZA()(),f.TgZ(6,"button",4),f.NdJ("click",function(d){return ee.onOk(d)}),f._uU(7,"OK"),f.qZA()()),2&U){const we=f.MAs(5);f.xp6(4),f.Q6J("autofocus",we.focus())("ngModel",ee.changeNote)}},dependencies:[xt.lW,ft.Nt,Cr.KE,Cr.hX,Tt.Fj,Tt.JJ,Tt.On],styles:[".input-form[_ngcontent-%COMP%]{width:100%;max-width:80rem;display:flex;align-items:center;flex-direction:column}.input-field[_ngcontent-%COMP%]{width:100%}"]});var wr=de(69089),At=de(35299),ur=de(17175),Rr=de(74785),rr=de(51333),Hr=de(99546),jr=de(23353);function qt(ge,U){if(1&ge){const ee=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){f.CHM(ee);const d=f.oxw();return f.KtG(d.insertContent("Bold"))}),f.TgZ(1,"mat-icon"),f._uU(2,"format_bold"),f.qZA()()}if(2&ge){const ee=f.oxw();f.MGl("title","Bold (",ee.keyMapService.config.Bold.hotKey,")")}}function Zr(ge,U){if(1&ge){const ee=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){f.CHM(ee);const d=f.oxw();return f.KtG(d.insertContent("Italic"))}),f.TgZ(1,"mat-icon"),f._uU(2,"format_italic"),f.qZA()()}if(2&ge){const ee=f.oxw();f.MGl("title","Italic (",ee.keyMapService.config.Bold.hotKey,")")}}function Nr(ge,U){if(1&ge){const ee=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){f.CHM(ee);const d=f.oxw();return f.KtG(d.insertContent("Heading"))}),f.TgZ(1,"mat-icon"),f._uU(2,"title"),f.qZA()()}if(2&ge){const ee=f.oxw();f.MGl("title","Heading (",ee.keyMapService.config.Heading.hotKey,")")}}function $t(ge,U){if(1&ge){const ee=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){f.CHM(ee);const d=f.oxw();return f.KtG(d.insertContent("Reference"))}),f.TgZ(1,"mat-icon"),f._uU(2,"format_quote"),f.qZA()()}if(2&ge){const ee=f.oxw();f.MGl("title","Reference (",ee.keyMapService.config.Reference.hotKey,")")}}function kn(ge,U){if(1&ge){const ee=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){f.CHM(ee);const d=f.oxw();return f.KtG(d.insertContent("Ul"))}),f.TgZ(1,"mat-icon"),f._uU(2,"format_list_bulleted"),f.qZA()()}if(2&ge){const ee=f.oxw();f.MGl("title","Unordered List (",ee.keyMapService.config.Ul.hotKey,")")}}function Ut(ge,U){if(1&ge){const ee=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){f.CHM(ee);const d=f.oxw();return f.KtG(d.insertContent("Ol"))}),f.TgZ(1,"mat-icon"),f._uU(2,"format_list_numbered"),f.qZA()()}if(2&ge){const ee=f.oxw();f.MGl("title","Ordered List (",ee.keyMapService.config.Ol.hotKey,")")}}function ln(ge,U){if(1&ge){const ee=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){f.CHM(ee);const d=f.oxw();return f.KtG(d.insertContent("Code"))}),f.TgZ(1,"mat-icon"),f._uU(2,"code"),f.qZA()()}if(2&ge){const ee=f.oxw();f.MGl("title","Code Block (",ee.keyMapService.config.Code.hotKey,")")}}function bn(ge,U){if(1&ge){const ee=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){f.CHM(ee);const d=f.oxw();return f.KtG(d.insertContent("Link"))}),f.TgZ(1,"mat-icon"),f._uU(2,"link"),f.qZA()()}if(2&ge){const ee=f.oxw();f.MGl("title","Link (",ee.keyMapService.config.Link.hotKey,")")}}function Mt(ge,U){if(1&ge){const ee=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){f.CHM(ee);const d=f.oxw();return f.KtG(d.insertContent("Image"))}),f.TgZ(1,"mat-icon"),f._uU(2,"image"),f.qZA()()}if(2&ge){const ee=f.oxw();f.MGl("title","Image (",ee.keyMapService.config.Image.hotKey,")")}}const nr=function(ge){return{"tool-bar--bottom":ge}};class er{constructor(U,ee,we){this._verticalSplitPane=U,this._utils=ee,this.keyMapService=we,this._destroy$=new Q.x,this.isScreenWide$=this._utils.isWideScreen$,this.more=()=>{},this._hideIcons={Ol:!1,Italic:!1,Link:!1},this._verticalSplitPane.notifySizeDidChange.pipe((0,jr.R)(this._destroy$)).subscribe(d=>{this.width!==d.primary&&(this.width=`${d.primary}px`)})}get options(){return this._options}insertContent(U){this.keyMapService.insertContent(U)}set options(U){this._options=U??{hideIcons:[]},this._hideIcons={},this._options.hideIcons?.forEach(ee=>{this._hideIcons[ee]=!0})}ngOnDestroy(){this._destroy$.next(null)}}er.\u0275fac=function(U){return new(U||er)(f.Y36(me.Mi),f.Y36(X.dU),f.Y36(qe))},er.\u0275cmp=f.Xpm({type:er,selectors:[["ms-codemirror-toolbar"]],hostVars:2,hostBindings:function(U,ee){2&U&&f.Udp("width",ee.width)},inputs:{options:"options"},decls:14,vars:15,consts:[[1,"tool-bar",2,"height","3.8rem",3,"ngClass"],["mat-icon-button","",3,"title","click",4,"ngIf"],["mat-icon-button","",3,"title","click"]],template:function(U,ee){1&U&&(f.TgZ(0,"mat-toolbar",0),f.ALo(1,"async"),f.YNc(2,qt,3,1,"button",1),f.YNc(3,Zr,3,1,"button",1),f.YNc(4,Nr,3,1,"button",1),f.YNc(5,$t,3,1,"button",1),f.YNc(6,kn,3,1,"button",1),f.YNc(7,Ut,3,1,"button",1),f.YNc(8,ln,3,1,"button",1),f.YNc(9,bn,3,1,"button",1),f.YNc(10,Mt,3,1,"button",1),f.TgZ(11,"button",2),f.NdJ("click",function(){return ee.insertContent("Meta")}),f.TgZ(12,"mat-icon"),f._uU(13,"receipt"),f.qZA()()()),2&U&&(f.Q6J("ngClass",f.VKq(13,nr,!1===f.lcZ(1,11,ee.isScreenWide$))),f.xp6(2),f.Q6J("ngIf",!ee._hideIcons.Bold),f.xp6(1),f.Q6J("ngIf",!ee._hideIcons.Italic),f.xp6(1),f.Q6J("ngIf",!ee._hideIcons.Heading),f.xp6(1),f.Q6J("ngIf",!ee._hideIcons.Refrence),f.xp6(1),f.Q6J("ngIf",!ee._hideIcons.Ul),f.xp6(1),f.Q6J("ngIf",!ee._hideIcons.Ol),f.xp6(1),f.Q6J("ngIf",!ee._hideIcons.Code),f.xp6(1),f.Q6J("ngIf",!ee._hideIcons.Link),f.xp6(1),f.Q6J("ngIf",!ee._hideIcons.Image),f.xp6(1),f.MGl("title","Meta Data (",ee.keyMapService.config.Meta.hotKey,")"))},dependencies:[T.mk,T.O5,Rr.Hw,xt.RK,Hr.Ye,T.Ov],styles:[".tool-bar--bottom[_ngcontent-%COMP%]{position:fixed;bottom:0;padding:0;overflow-x:auto;overflow-y:hidden}.tool-bar[_ngcontent-%COMP%]{background:whitesmoke;z-index:8}[_nghost-%COMP%]{z-index:10;display:block}"]});const Sr=["toolbar"];function Lr(ge,U){if(1&ge){const ee=f.EpF();f.TgZ(0,"button",4),f.NdJ("click",function(){f.CHM(ee);const d=f.oxw();return f.KtG(d.togglePreview())}),f.TgZ(1,"mat-icon"),f._uU(2),f.ALo(3,"async"),f.qZA()()}if(2&ge){const ee=f.oxw();f.xp6(2),f.Oqu((f.lcZ(3,1,ee.showPreview$),"chrome_reader_mode"))}}function Cn(ge,U){if(1&ge){const ee=f.EpF();f.TgZ(0,"button",10),f.NdJ("click",function(d){f.CHM(ee);const w=f.oxw();return f.KtG(w.more(d))}),f._uU(1),f.qZA()}if(2&ge){const ee=f.oxw();f.xp6(1),f.hij(" ",ee.lockScrollWithView?"UnLock Scroll":"Lock Scroll"," ")}}class fr extends He.LF{constructor(U,ee,we,d,w,oe,ke,We,Je,Ye,De){super(),this.router=U,this.utils=ee,this.markdown=we,this._editorService=d,this.docService=w,this.store=oe,this.bottomSheet=ke,this.docSaver=We,this._breakpointObserver=Je,this.documentEffects=Ye,this.markdownStore=De,this.DocumentMode=H.U,this.isScreenWide$=this.utils.isWideScreen$,this.isStoreDirty$=this.store.currentDocStatus_IsStoreDirty$.pipe((0,Ot.O)(!1)),this.isDbDirty$=this.store.currentDocStatus_IsDbDirty$.pipe((0,Ot.O)(!1)),this.isSyncing$=this.store.currentDocStatus_IsSyncing$.pipe((0,Ot.O)(!1)),this.dirtyInfo$=(0,Vr.a)([this.isStoreDirty$,this.isDbDirty$,this.isSyncing$]).pipe((0,ce.U)(([it,ct,Xe])=>it?"modification not saved":ct?"modification not sync with server":Xe?"syncing modification with server":"")),this.showPreview$=this.markdownStore.editWithPreview_,this.logger=(0,X.Yd)("MarkdownEditorToolbar"),this.onSave=()=>{const it=this.editor.getValue();if(this.store.currentDocStatus_IsStoreDirty$.state){const ct=this.bottomSheet.open(rt);ct.afterDismissed().subscribe(Xe=>{this.documentEffects.saveDocument_.next({content:it,format:X.cZ.md,forceUpdate:!0,changeLog:ct.instance.changeNote})})}else this.logger.debug("it seems the document is not dirty."),this.documentEffects.saveDocument_.next({content:it,format:X.cZ.md,forceUpdate:!0,changeLog:""})},this.undo=()=>{this.editor&&this.editor.undo()},this.redo=()=>{this.editor&&this.editor.redo()},this.toViewMode=()=>{this.markdownStore.documentMode_.next(H.U.View)},this.new=()=>{this.documentEffects.createDocument_.next({format:X.cZ.md})},this.lockScrollWithView=!1,super.addSub(this._breakpointObserver.observe(["(orientation: portrait)","(orientation: landscape)"]),this._editorService.docEditorLoaded$.subscribe(it=>{this.editor=it}),this.store.currentDocStatus_IsEditable$.pipe((0,Y.b)(it=>{it||this.toViewMode()})));const mt=this._editorService.commands;mt.save=this.onSave,mt.scrollLineUp=function(it){const ct=it.getScrollInfo();if(!it.somethingSelected()){const Xe=it.lineAtHeight(ct.top+ct.clientHeight,"local");it.getCursor().line>=Xe&&it.execCommand("goLineUp")}it.scrollTo(null,ct.top-it.defaultTextHeight())},mt.scrollLineDown=function(it){const ct=it.getScrollInfo();if(!it.somethingSelected()){const Xe=it.lineAtHeight(ct.top,"local")+1;it.getCursor().line<=Xe&&it.execCommand("goLineDown")}it.scrollTo(null,ct.top+it.defaultTextHeight())}}back(U){this.router.navigateByUrl("/home")}togglePreview(){this.markdownStore.editWithPreview_.next(!this.markdownStore.editWithPreview_.state)}ngAfterViewInit(){this.hideHeight=this.toolbar.nativeElement.offsetHeight}previewPanelClick(U){U.preventDefault(),U.stopPropagation()}more(U){"0"===U.item.id&&(this.lockScrollWithView=!this.lockScrollWithView,this.markdownStore.isLockEditorScrollWithView_.next(this.lockScrollWithView))}}fr.\u0275fac=function(U){return new(U||fr)(f.Y36(q.F0),f.Y36(He.dU),f.Y36(wr.l),f.Y36(ie),f.Y36(At.R7),f.Y36(Ke.G),f.Y36(at.ch),f.Y36(ze),f.Y36(ur.Yg),f.Y36(fe.CL),f.Y36(H.A))},fr.\u0275cmp=f.Xpm({type:fr,selectors:[["editor-toolbar"]],viewQuery:function(U,ee){if(1&U&&f.Gf(Sr,5,f.SBq),2&U){let we;f.iGM(we=f.CRH())&&(ee.toolbar=we.first)}},features:[f.qOj],decls:38,vars:22,consts:[["color","primary",2,"z-index","20","pointer-events","all"],["toolbar",""],["mat-icon-button","","routerLinkActive","",3,"click"],[2,"flex","1 1 auto","margin","2.4rem"],["mat-icon-button","",3,"click"],["mat-icon-button","",3,"title","click"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu",""],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-menu-item","","disabled","",3,"click"],[2,"pointer-events","all"]],template:function(U,ee){if(1&U&&(f.TgZ(0,"mat-toolbar",0,1)(2,"mat-toolbar-row")(3,"button",2),f.NdJ("click",function(d){return ee.back(d)}),f.TgZ(4,"mat-icon"),f._uU(5," arrow_back "),f.qZA()(),f.TgZ(6,"span",3),f._uU(7,"Edit"),f.qZA(),f.TgZ(8,"button",4),f.NdJ("click",function(){return ee.undo()}),f.TgZ(9,"mat-icon"),f._uU(10," undo "),f.qZA()(),f.TgZ(11,"button",4),f.NdJ("click",function(){return ee.redo()}),f.TgZ(12,"mat-icon"),f._uU(13," redo "),f.qZA()(),f.TgZ(14,"button",5),f.NdJ("click",function(){return ee.onSave()}),f.ALo(15,"async"),f.ALo(16,"async"),f.ALo(17,"async"),f.ALo(18,"async"),f.TgZ(19,"mat-icon"),f._uU(20,"save"),f.qZA()(),f.YNc(21,Lr,4,3,"button",6),f.ALo(22,"async"),f.TgZ(23,"button",4),f.NdJ("click",function(){return ee.toViewMode()}),f.TgZ(24,"mat-icon"),f._uU(25," visibility "),f.qZA()(),f.TgZ(26,"button",7)(27,"mat-icon"),f._uU(28," more_vert "),f.qZA()(),f.TgZ(29,"mat-menu",null,8),f.YNc(31,Cn,2,1,"button",9),f.ALo(32,"async"),f.TgZ(33,"button",10),f.NdJ("click",function(d){return ee.more(d)}),f._uU(34,"Key Map"),f.qZA(),f.TgZ(35,"button",11),f.NdJ("click",function(d){return ee.more(d)}),f._uU(36,"Item 2"),f.qZA()()()(),f._UZ(37,"ms-codemirror-toolbar",12)),2&U){const we=f.MAs(30);f.xp6(14),f.ekj("mem-dirty",f.lcZ(15,10,ee.isStoreDirty$))("db-dirty",f.lcZ(16,12,ee.isDbDirty$))("net-syncing",f.lcZ(17,14,ee.isSyncing$)),f.Q6J("title",f.lcZ(18,16,ee.dirtyInfo$)),f.xp6(7),f.Q6J("ngIf",f.lcZ(22,18,ee.isScreenWide$)),f.xp6(5),f.Q6J("matMenuTriggerFor",we),f.xp6(5),f.Q6J("ngIf",f.lcZ(32,20,ee.isScreenWide$))}},dependencies:[T.O5,Rr.Hw,rr.VK,rr.OP,rr.p6,xt.RK,Hr.Ye,Hr.rD,er,T.Ov],styles:['@charset "UTF-8";[_nghost-%COMP%]{pointer-events:none}a[_ngcontent-%COMP%]:hover{color:#ffffffb3;text-decoration:none}.mem-dirty[_ngcontent-%COMP%]:before{content:" \\25cf";font-size:1.34rem;color:red;margin-top:.6rem;margin-left:.9rem;position:absolute}.db-dirty[_ngcontent-%COMP%]{color:#4169e1}.net-syncing[_ngcontent-%COMP%]:after{margin-top:-2.2rem;margin-left:1.25rem;content:"";display:inherit;border:3px solid #f3f3f3;border-radius:50%;border-top:.35rem solid #3498db;width:.8rem;height:.8rem;animation:_ngcontent-%COMP%_spin 1.8s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}'],data:{animation:[(0,Me.X$)("show",[(0,Me.SB)("true",(0,Me.oB)({opacity:1,transform:"translateY(0)"})),(0,Me.eR)("void => true",[(0,Me.oB)({opacity:0,transform:"translateY(-100%)"}),(0,Me.jt)("0.2s ease-in")]),(0,Me.eR)("true => void",[(0,Me.jt)("0.2s ease-out",(0,Me.oB)({opacity:0,transform:"translateY(-100%)"}))])])]}});class ir extends X.LF{constructor(U){super(),this.codeMirrorComponent=U,this.addSub(U.afterInit.subscribe(ee=>{this.codemirror=ee,this.codemirror.on("blur",()=>{this.onTouched()}),this.codemirror.on("change",()=>{const we=this.codemirror.getValue();this.onChange(we)})}))}writeValue(U){null!=U&&this.codeMirrorComponent.writeValue(U)}registerOnChange(U){this.onChange=U}registerOnTouched(U){this.onTouched=U}setDisabledState(U){this.codeMirrorComponent.host.disabled=!0}onChange(U){}onTouched(){}}ir.\u0275fac=function(U){return new(U||ir)(f.Y36(ne))},ir.\u0275dir=f.lG2({type:ir,selectors:[["ms-codemirror"]],features:[f._Bn([{provide:Tt.JU,useExisting:(0,f.Gpc)(()=>ir),multi:!0}]),f.qOj]});const Bt=function(ge){return{container$:ge}},_r=function(ge,U){return[ge,U]};class zt extends ve.L{constructor(U,ee,we,d,w,oe,ke,We,Je){super(),this.documentEffects=U,this._elementRef=ee,this.dialog=we,this.markdownStore=d,this.gestureConfig=w,this.editorService=oe,this.store=ke,this.ngZone=We,this.utils=Je,this.logger=(0,X.Yd)("MarkdownEditorComponent"),this.editorLoaded=!1,this.DocumentMode=H.U,this.docMode$=this.markdownStore.documentMode_,this.markdown$=this.store.currentDocContentString$,this.toViewMode=Ye=>{this.markdownStore.documentMode_.next(H.U.View)},super.addSub(this.editorService.docEditorLoaded$.subscribe(()=>{setTimeout(()=>this.editorLoaded=!0)}),this.markdownStore.editIt_.subscribe(({sourceLine:Ye})=>{Ye&&(this.markdownStore.documentMode_.next(H.U.Edit),setTimeout(()=>{this.editorService.gotoLine(Ye[0])}))}),this.docMode$.subscribe(Ye=>{Ye===H.U.Edit&&setTimeout(()=>this.codeMirrorComponent.refresh())}))}ngAfterViewInit(){const U=this._elementRef.nativeElement.getElementsByClassName("CodeMirror-scroll")[0];U.style.marginRight="0px",this.markdownStore.editor_.next(new X.vR(U,void 0,void 0,this.ngZone));let ee=null;super.addSub(this.utils.isWideScreen$.pipe((0,Y.b)(we=>{we?ee&&(ee.off("swiperight"),ee.off("swipeleft"),ee.destroy(),ee=null):null===ee&&(ee=this.gestureConfig.buildHammer(U),ee.on("swiperight",this.toViewMode),ee.on("swipeleft",this.toViewMode))})).subscribe())}canDeactivate(){const U=()=>{const d=this.store.currentId_.state;d===me.h2&&this.documentEffects.deleteDocument_.next({id:d})};return this.store.currentDocStatus$.state?.isStoreDirty?this.dialog.open(Se.n,{width:"300px",data:{title:"Save?",message:"Document modified, are you want to save?",defaultAction:"Yes",additionalAction:"No"}}).afterClosed().pipe((0,ce.U)(d=>"Yes"===d?(this.documentEffects.saveDocument_.next({content:this.codeMirrorComponent.value,forceUpdate:!0}),!1):(U(),!0))):(U(),(0,R.of)(!0))}}zt.\u0275fac=function(U){return new(U||zt)(f.Y36(fe.CL),f.Y36(f.SBq),f.Y36(Pe.uw),f.Y36(H.A),f.Y36(x.ok),f.Y36(ie),f.Y36(Ke.G),f.Y36(f.R0b),f.Y36(X.dU))},zt.\u0275cmp=f.Xpm({type:zt,selectors:[["ms-markdown-editor"]],viewQuery:function(U,ee){if(1&U&&f.Gf(ne,5),2&U){let we;f.iGM(we=f.CRH())&&(ee.codeMirrorComponent=we.first)}},features:[f.qOj],decls:6,vars:17,consts:[[2,"z-index","802",3,"scrollHide","hide","usePadding","hideHeight"],["toolbar",""],[3,"ngModel"],[3,"isRunning"]],template:function(U,ee){if(1&U&&(f._UZ(0,"editor-toolbar",0,1),f.ALo(2,"async"),f._UZ(3,"ms-codemirror",2),f.ALo(4,"async"),f._UZ(5,"sk-cube-grid",3)),2&U){const we=f.MAs(1);f.Q6J("scrollHide",f.WLB(14,_r,f.VKq(10,Bt,ee.markdownStore.viewer_),f.VKq(12,Bt,ee.markdownStore.editor_)))("hide",f.lcZ(2,6,ee.docMode$)!==ee.DocumentMode.Edit)("usePadding",!0)("hideHeight",we.hideHeight),f.xp6(3),f.Q6J("ngModel",f.lcZ(4,8,ee.markdown$)),f.xp6(2),f.Q6J("isRunning",!ee.editorLoaded)}},dependencies:[Tt.JJ,Tt.On,Gr.M,_t.r,fr,ne,ir,T.Ov],styles:["[_nghost-%COMP%]{display:block;height:100%;overflow-y:auto}"]});const Br=[{path:"",canDeactivate:[X.Ic],component:zt},{path:"new",canDeactivate:[X.Ic],component:zt}];class Dr{}Dr.\u0275fac=function(U){return new(U||Dr)},Dr.\u0275mod=f.oAB({type:Dr}),Dr.\u0275inj=f.cJS({imports:[q.Bz.forChild(Br),q.Bz]});var lt=de(25982),_e=de(7942),Tr=de(73346);class or{}or.\u0275fac=function(U){return new(U||or)},or.\u0275mod=f.oAB({type:or}),or.\u0275inj=f.cJS({imports:[T.ez,Tr.q,Tt.UX,Tt.u5]});class Pt{constructor(U){this.editor=U}}Pt.\u0275fac=function(U){return new(U||Pt)(f.LFG(ie))},Pt.\u0275mod=f.oAB({type:Pt}),Pt.\u0275inj=f.cJS({providers:[qe,ie,ze,Ue.I],imports:[me.m8,T.ez,Tt.u5,lt.Fm,or,Dr,_e.q]})},86720:(yt,tt,de)=>{!function(T){"use strict";var Q={},H=/[^\s\u00a0]/,W=T.Pos,C=T.cmpPos;function f(q){var X=q.search(H);return-1==X?0:X}function ie(q,X){var K=q.getMode();return!1!==K.useInnerComments&&K.innerMode?q.getModeAt(X):K}T.commands.toggleComment=function(q){q.toggleComment()},T.defineExtension("toggleComment",function(q){q||(q=Q);for(var X=this,K=1/0,ae=this.listSelections(),le=null,Ae=ae.length-1;Ae>=0;Ae--){var $=ae[Ae].from(),re=ae[Ae].to();$.line>=K||(re.line>=K&&(re=W(K,0)),K=$.line,null==le?X.uncomment($,re,q)?le="un":(X.lineComment($,re,q),le="line"):"un"==le?X.uncomment($,re,q):X.lineComment($,re,q))}}),T.defineExtension("lineComment",function(q,X,K){K||(K=Q);var ae=this,le=ie(ae,q),Ae=ae.getLine(q.line);if(null!=Ae&&!function I(q,X,K){return/\bstring\b/.test(q.getTokenTypeAt(W(X.line,0)))&&!/^[\'\"\`]/.test(K)}(ae,q,Ae)){var $=K.lineComment||le.lineComment;if(!$)return void((K.blockCommentStart||le.blockCommentStart)&&(K.fullLines=!0,ae.blockComment(q,X,K)));var re=Math.min(0!=X.ch||X.line==q.line?X.line+1:X.line,ae.lastLine()+1),D=null==K.padding?" ":K.padding,_=K.commentBlankLines||q.line==X.line;ae.operation(function(){if(K.indent){for(var m=null,L=q.line;L<re;++L){var P=-1===(M=ae.getLine(L)).search(H)?M:M.slice(0,f(M));(null==m||m.length>P.length)&&(m=P)}for(L=q.line;L<re;++L){var M=ae.getLine(L),b=m.length;!_&&!H.test(M)||(M.slice(0,b)!=m&&(b=f(M)),ae.replaceRange(m+$+D,W(L,0),W(L,b)))}}else for(L=q.line;L<re;++L)(_||H.test(ae.getLine(L)))&&ae.replaceRange($+D,W(L,0))})}}),T.defineExtension("blockComment",function(q,X,K){K||(K=Q);var ae=this,le=ie(ae,q),Ae=K.blockCommentStart||le.blockCommentStart,$=K.blockCommentEnd||le.blockCommentEnd;if(Ae&&$){if(!/\bcomment\b/.test(ae.getTokenTypeAt(W(q.line,0)))){var re=Math.min(X.line,ae.lastLine());re!=q.line&&0==X.ch&&H.test(ae.getLine(re))&&--re;var D=null==K.padding?" ":K.padding;q.line>re||ae.operation(function(){if(0!=K.fullLines){var _=H.test(ae.getLine(re));ae.replaceRange(D+$,W(re)),ae.replaceRange(Ae+D,W(q.line,0));var m=K.blockCommentLead||le.blockCommentLead;if(null!=m)for(var L=q.line+1;L<=re;++L)(L!=re||_)&&ae.replaceRange(m+D,W(L,0))}else{var M=0==C(ae.getCursor("to"),X),P=!ae.somethingSelected();ae.replaceRange($,X),M&&ae.setSelection(P?X:ae.getCursor("from"),X),ae.replaceRange(Ae,q)}})}}else(K.lineComment||le.lineComment)&&0!=K.fullLines&&ae.lineComment(q,X,K)}),T.defineExtension("uncomment",function(q,X,K){K||(K=Q);var m,ae=this,le=ie(ae,q),Ae=Math.min(0!=X.ch||X.line==q.line?X.line:X.line-1,ae.lastLine()),$=Math.min(q.line,Ae),re=K.lineComment||le.lineComment,D=[],_=null==K.padding?" ":K.padding;e:if(re){for(var L=$;L<=Ae;++L){var M=ae.getLine(L),P=M.indexOf(re);if(P>-1&&!/comment/.test(ae.getTokenTypeAt(W(L,P+1)))&&(P=-1),-1==P&&H.test(M)||P>-1&&H.test(M.slice(0,P)))break e;D.push(M)}if(ae.operation(function(){for(var Ue=$;Ue<=Ae;++Ue){var Ge=D[Ue-$],N=Ge.indexOf(re),k=N+re.length;N<0||(Ge.slice(k,k+_.length)==_&&(k+=_.length),m=!0,ae.replaceRange("",W(Ue,N),W(Ue,k)))}}),m)return!0}var b=K.blockCommentStart||le.blockCommentStart,z=K.blockCommentEnd||le.blockCommentEnd;if(!b||!z)return!1;var ne=K.blockCommentLead||le.blockCommentLead,Y=ae.getLine($),ce=Y.indexOf(b);if(-1==ce)return!1;var R=Ae==$?Y:ae.getLine(Ae),me=R.indexOf(z,Ae==$?ce+b.length:0),x=W($,ce+1),ve=W(Ae,me+1);if(-1==me||!/comment/.test(ae.getTokenTypeAt(x))||!/comment/.test(ae.getTokenTypeAt(ve))||ae.getRange(x,ve,"\n").indexOf(z)>-1)return!1;var fe=Y.lastIndexOf(b,q.ch),Se=-1==fe?-1:Y.slice(0,q.ch).indexOf(z,fe+b.length);if(-1!=fe&&-1!=Se&&Se+z.length!=q.ch)return!1;Se=R.indexOf(z,X.ch);var Pe=R.slice(X.ch).lastIndexOf(b,Se-X.ch);return fe=-1==Se||-1==Pe?-1:X.ch+Pe,(-1==Se||-1==fe||fe==X.ch)&&(ae.operation(function(){ae.replaceRange("",W(Ae,me-(_&&R.slice(me-_.length,me)==_?_.length:0)),W(Ae,me+z.length));var Ue=ce+b.length;if(_&&Y.slice(Ue,Ue+_.length)==_&&(Ue+=_.length),ae.replaceRange("",W($,ce),W($,Ue)),ne)for(var Ge=$+1;Ge<=Ae;++Ge){var N=ae.getLine(Ge),k=N.indexOf(ne);if(-1!=k&&!H.test(N.slice(0,k))){var Oe=k+ne.length;_&&N.slice(Oe,Oe+_.length)==_&&(Oe+=_.length),ae.replaceRange("",W(Ge,k),W(Ge,Oe))}}}),!0)})}(de(43867))},46246:(yt,tt,de)=>{!function(T){function Q(W,C,f){var ie,I=W.getWrapperElement();return(ie=I.appendChild(document.createElement("div"))).className=f?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof C?ie.innerHTML=C:ie.appendChild(C),T.addClass(I,"dialog-opened"),ie}function H(W,C){W.state.currentNotificationClose&&W.state.currentNotificationClose(),W.state.currentNotificationClose=C}T.defineExtension("openDialog",function(W,C,f){f||(f={}),H(this,null);var I=Q(this,W,f.bottom),ie=!1,q=this;function X(le){if("string"==typeof le)K.value=le;else{if(ie)return;ie=!0,T.rmClass(I.parentNode,"dialog-opened"),I.parentNode.removeChild(I),q.focus(),f.onClose&&f.onClose(I)}}var ae,K=I.getElementsByTagName("input")[0];return K?(K.focus(),f.value&&(K.value=f.value,!1!==f.selectValueOnOpen&&K.select()),f.onInput&&T.on(K,"input",function(le){f.onInput(le,K.value,X)}),f.onKeyUp&&T.on(K,"keyup",function(le){f.onKeyUp(le,K.value,X)}),T.on(K,"keydown",function(le){f&&f.onKeyDown&&f.onKeyDown(le,K.value,X)||((27==le.keyCode||!1!==f.closeOnEnter&&13==le.keyCode)&&(K.blur(),T.e_stop(le),X()),13==le.keyCode&&C(K.value,le))}),!1!==f.closeOnBlur&&T.on(I,"focusout",function(le){null!==le.relatedTarget&&X()})):(ae=I.getElementsByTagName("button")[0])&&(T.on(ae,"click",function(){X(),q.focus()}),!1!==f.closeOnBlur&&T.on(ae,"blur",X),ae.focus()),X}),T.defineExtension("openConfirm",function(W,C,f){H(this,null);var I=Q(this,W,f&&f.bottom),ie=I.getElementsByTagName("button"),q=!1,X=this,K=1;function ae(){q||(q=!0,T.rmClass(I.parentNode,"dialog-opened"),I.parentNode.removeChild(I),X.focus())}ie[0].focus();for(var le=0;le<ie.length;++le){var Ae=ie[le];(function($){T.on(Ae,"click",function(re){T.e_preventDefault(re),ae(),$&&$(X)})})(C[le]),T.on(Ae,"blur",function(){--K,setTimeout(function(){K<=0&&ae()},200)}),T.on(Ae,"focus",function(){++K})}}),T.defineExtension("openNotification",function(W,C){H(this,X);var ie,f=Q(this,W,C&&C.bottom),I=!1,q=C&&typeof C.duration<"u"?C.duration:5e3;function X(){I||(I=!0,clearTimeout(ie),T.rmClass(f.parentNode,"dialog-opened"),f.parentNode.removeChild(f))}return T.on(f,"click",function(K){T.e_preventDefault(K),X()}),q&&(ie=setTimeout(X,q)),X})}(de(43867))},56338:(yt,tt,de)=>{!function(T){"use strict";T.defineOption("fullScreen",!1,function(W,C,f){f==T.Init&&(f=!1),!f!=!C&&(C?function Q(W){var C=W.getWrapperElement();W.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:C.style.width,height:C.style.height},C.style.width="",C.style.height="auto",C.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",W.refresh()}(W):function H(W){var C=W.getWrapperElement();C.className=C.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var f=W.state.fullScreenRestore;C.style.width=f.width,C.style.height=f.height,window.scrollTo(f.scrollLeft,f.scrollTop),W.refresh()}(W))})}(de(43867))},82491:(yt,tt,de)=>{!function(T){var Q=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),H=T.Pos,W={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function C(K){return K&&K.bracketRegex||/[(){}[\]]/}function f(K,ae,le){var Ae=K.getLineHandle(ae.line),$=ae.ch-1,re=le&&le.afterCursor;null==re&&(re=/(^| )cm-fat-cursor($| )/.test(K.getWrapperElement().className));var D=C(le),_=!re&&$>=0&&D.test(Ae.text.charAt($))&&W[Ae.text.charAt($)]||D.test(Ae.text.charAt($+1))&&W[Ae.text.charAt(++$)];if(!_)return null;var m=">"==_.charAt(1)?1:-1;if(le&&le.strict&&m>0!=($==ae.ch))return null;var L=K.getTokenTypeAt(H(ae.line,$+1)),M=I(K,H(ae.line,$+(m>0?1:0)),m,L,le);return null==M?null:{from:H(ae.line,$),to:M&&M.pos,match:M&&M.ch==_.charAt(0),forward:m>0}}function I(K,ae,le,Ae,$){for(var re=$&&$.maxScanLineLength||1e4,D=$&&$.maxScanLines||1e3,_=[],m=C($),L=le>0?Math.min(ae.line+D,K.lastLine()+1):Math.max(K.firstLine()-1,ae.line-D),M=ae.line;M!=L;M+=le){var P=K.getLine(M);if(P){var b=le>0?0:P.length-1,z=le>0?P.length:-1;if(!(P.length>re))for(M==ae.line&&(b=ae.ch-(le<0?1:0));b!=z;b+=le){var ne=P.charAt(b);if(m.test(ne)&&(void 0===Ae||(K.getTokenTypeAt(H(M,b+1))||"")==(Ae||""))){var Y=W[ne];if(Y&&">"==Y.charAt(1)==le>0)_.push(ne);else{if(!_.length)return{pos:H(M,b),ch:ne};_.pop()}}}}}return M-le!=(le>0?K.lastLine():K.firstLine())&&null}function ie(K,ae,le){for(var Ae=K.state.matchBrackets.maxHighlightLineLength||1e3,$=le&&le.highlightNonMatching,re=[],D=K.listSelections(),_=0;_<D.length;_++){var m=D[_].empty()&&f(K,D[_].head,le);if(m&&(m.match||!1!==$)&&K.getLine(m.from.line).length<=Ae){var L=m.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";re.push(K.markText(m.from,H(m.from.line,m.from.ch+1),{className:L})),m.to&&K.getLine(m.to.line).length<=Ae&&re.push(K.markText(m.to,H(m.to.line,m.to.ch+1),{className:L}))}}if(re.length){Q&&K.state.focused&&K.focus();var M=function(){K.operation(function(){for(var P=0;P<re.length;P++)re[P].clear()})};if(!ae)return M;setTimeout(M,800)}}function q(K){K.operation(function(){K.state.matchBrackets.currentlyHighlighted&&(K.state.matchBrackets.currentlyHighlighted(),K.state.matchBrackets.currentlyHighlighted=null),K.state.matchBrackets.currentlyHighlighted=ie(K,!1,K.state.matchBrackets)})}function X(K){K.state.matchBrackets&&K.state.matchBrackets.currentlyHighlighted&&(K.state.matchBrackets.currentlyHighlighted(),K.state.matchBrackets.currentlyHighlighted=null)}T.defineOption("matchBrackets",!1,function(K,ae,le){le&&le!=T.Init&&(K.off("cursorActivity",q),K.off("focus",q),K.off("blur",X),X(K)),ae&&(K.state.matchBrackets="object"==typeof ae?ae:{},K.on("cursorActivity",q),K.on("focus",q),K.on("blur",X))}),T.defineExtension("matchBrackets",function(){ie(this,!0)}),T.defineExtension("findMatchingBracket",function(K,ae,le){return(le||"boolean"==typeof ae)&&(le?(le.strict=ae,ae=le):ae=ae?{strict:!0}:null),f(this,K,ae)}),T.defineExtension("scanForBracket",function(K,ae,le,Ae){return I(this,K,ae,le,Ae)})}(de(43867))},99137:(yt,tt,de)=>{!function(T){"use strict";function Q(C){C.state.tagHit&&C.state.tagHit.clear(),C.state.tagOther&&C.state.tagOther.clear(),C.state.tagHit=C.state.tagOther=null}function H(C){C.state.failedTagMatch=!1,C.operation(function(){if(Q(C),!C.somethingSelected()){var f=C.getCursor(),I=C.getViewport();I.from=Math.min(I.from,f.line),I.to=Math.max(f.line+1,I.to);var ie=T.findMatchingTag(C,f,I);if(ie){if(C.state.matchBothTags){var q="open"==ie.at?ie.open:ie.close;q&&(C.state.tagHit=C.markText(q.from,q.to,{className:"CodeMirror-matchingtag"}))}var X="close"==ie.at?ie.open:ie.close;X?C.state.tagOther=C.markText(X.from,X.to,{className:"CodeMirror-matchingtag"}):C.state.failedTagMatch=!0}}})}function W(C){C.state.failedTagMatch&&H(C)}T.defineOption("matchTags",!1,function(C,f,I){I&&I!=T.Init&&(C.off("cursorActivity",H),C.off("viewportChange",W),Q(C)),f&&(C.state.matchBothTags="object"==typeof f&&f.bothTags,C.on("cursorActivity",H),C.on("viewportChange",W),H(C))}),T.commands.toMatchingTag=function(C){var f=T.findMatchingTag(C,C.getCursor());if(f){var I="close"==f.at?f.open:f.close;I&&C.extendSelection(I.to,I.from)}}}(de(43867),de(10388))},37726:(yt,tt,de)=>{!function(T){"use strict";function Q(H){return function(W,C){var f=C.line,I=W.getLine(f);function ie(Ae){for(var $,re=C.ch,D=0;;){var _=re<=0?-1:I.lastIndexOf(Ae[0],re-1);if(-1!=_){if(1==D&&_<C.ch)break;if($=W.getTokenTypeAt(T.Pos(f,_+1)),!/^(comment|string)/.test($))return{ch:_+1,tokenType:$,pair:Ae};re=_-1}else{if(1==D)break;D=1,re=I.length}}}function q(Ae){var D,m,$=1,re=W.lastLine(),_=Ae.ch;e:for(var L=f;L<=re;++L)for(var M=W.getLine(L),P=L==f?_:0;;){var b=M.indexOf(Ae.pair[0],P),z=M.indexOf(Ae.pair[1],P);if(b<0&&(b=M.length),z<0&&(z=M.length),(P=Math.min(b,z))==M.length)break;if(W.getTokenTypeAt(T.Pos(L,P+1))==Ae.tokenType)if(P==b)++$;else if(!--$){D=L,m=P;break e}++P}return null==D||f==D?null:{from:T.Pos(f,_),to:T.Pos(D,m)}}for(var X=[],K=0;K<H.length;K++){var ae=ie(H[K]);ae&&X.push(ae)}for(X.sort(function(Ae,$){return Ae.ch-$.ch}),K=0;K<X.length;K++){var le=q(X[K]);if(le)return le}return null}}T.registerHelper("fold","brace",Q([["{","}"],["[","]"]])),T.registerHelper("fold","brace-paren",Q([["{","}"],["[","]"],["(",")"]])),T.registerHelper("fold","import",function(H,W){function C(K){if(K<H.firstLine()||K>H.lastLine())return null;var ae=H.getTokenAt(T.Pos(K,1));if(/\S/.test(ae.string)||(ae=H.getTokenAt(T.Pos(K,ae.end+1))),"keyword"!=ae.type||"import"!=ae.string)return null;for(var le=K,Ae=Math.min(H.lastLine(),K+10);le<=Ae;++le){var re=H.getLine(le).indexOf(";");if(-1!=re)return{startCh:ae.end,end:T.Pos(le,re)}}}var ie,f=W.line,I=C(f);if(!I||C(f-1)||(ie=C(f-2))&&ie.end.line==f-1)return null;for(var q=I.end;;){var X=C(q.line+1);if(null==X)break;q=X.end}return{from:H.clipPos(T.Pos(f,I.startCh+1)),to:q}}),T.registerHelper("fold","include",function(H,W){function C(X){if(X<H.firstLine()||X>H.lastLine())return null;var K=H.getTokenAt(T.Pos(X,1));return/\S/.test(K.string)||(K=H.getTokenAt(T.Pos(X,K.end+1))),"meta"==K.type&&"#include"==K.string.slice(0,8)?K.start+8:void 0}var f=W.line,I=C(f);if(null==I||null!=C(f-1))return null;for(var ie=f;null!=C(ie+1);)++ie;return{from:T.Pos(f,I+1),to:H.clipPos(T.Pos(ie))}})}(de(43867))},4171:(yt,tt,de)=>{!function(T){"use strict";function Q(f,I,ie,q){if(ie&&ie.call){var X=ie;ie=null}else X=C(f,ie,"rangeFinder");"number"==typeof I&&(I=T.Pos(I,0));var K=C(f,ie,"minFoldSize");function ae(re){var D=X(f,I);if(!D||D.to.line-D.from.line<K)return null;if("fold"===q)return D;for(var _=f.findMarksAt(D.from),m=0;m<_.length;++m)if(_[m].__isFold){if(!re)return null;D.cleared=!0,_[m].clear()}return D}var le=ae(!0);if(C(f,ie,"scanUp"))for(;!le&&I.line>f.firstLine();)I=T.Pos(I.line-1,0),le=ae(!1);if(le&&!le.cleared&&"unfold"!==q){var Ae=function H(f,I,ie){var q=C(f,I,"widget");if("function"==typeof q&&(q=q(ie.from,ie.to)),"string"==typeof q){var X=document.createTextNode(q);(q=document.createElement("span")).appendChild(X),q.className="CodeMirror-foldmarker"}else q&&(q=q.cloneNode(!0));return q}(f,ie,le);T.on(Ae,"mousedown",function(re){$.clear(),T.e_preventDefault(re)});var $=f.markText(le.from,le.to,{replacedWith:Ae,clearOnEnter:C(f,ie,"clearOnEnter"),__isFold:!0});$.on("clear",function(re,D){T.signal(f,"unfold",f,re,D)}),T.signal(f,"fold",f,le.from,le.to)}}T.newFoldFunction=function(f,I){return function(ie,q){Q(ie,q,{rangeFinder:f,widget:I})}},T.defineExtension("foldCode",function(f,I,ie){Q(this,f,I,ie)}),T.defineExtension("isFolded",function(f){for(var I=this.findMarksAt(f),ie=0;ie<I.length;++ie)if(I[ie].__isFold)return!0}),T.commands.toggleFold=function(f){f.foldCode(f.getCursor())},T.commands.fold=function(f){f.foldCode(f.getCursor(),null,"fold")},T.commands.unfold=function(f){f.foldCode(f.getCursor(),{scanUp:!1},"unfold")},T.commands.foldAll=function(f){f.operation(function(){for(var I=f.firstLine(),ie=f.lastLine();I<=ie;I++)f.foldCode(T.Pos(I,0),{scanUp:!1},"fold")})},T.commands.unfoldAll=function(f){f.operation(function(){for(var I=f.firstLine(),ie=f.lastLine();I<=ie;I++)f.foldCode(T.Pos(I,0),{scanUp:!1},"unfold")})},T.registerHelper("fold","combine",function(){var f=Array.prototype.slice.call(arguments,0);return function(I,ie){for(var q=0;q<f.length;++q){var X=f[q](I,ie);if(X)return X}}}),T.registerHelper("fold","auto",function(f,I){for(var ie=f.getHelpers(I,"fold"),q=0;q<ie.length;q++){var X=ie[q](f,I);if(X)return X}});var W={rangeFinder:T.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:!1,clearOnEnter:!0};function C(f,I,ie){if(I&&void 0!==I[ie])return I[ie];var q=f.options.foldOptions;return q&&void 0!==q[ie]?q[ie]:W[ie]}T.defineOption("foldOptions",null),T.defineExtension("foldOption",function(f,I){return C(this,f,I)})}(de(43867))},10388:(yt,tt,de)=>{!function(T){"use strict";var Q=T.Pos;function H(D,_){return D.line-_.line||D.ch-_.ch}var W="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",f=new RegExp("<(/?)(["+W+"]["+W+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");function I(D,_,m,L){this.line=_,this.ch=m,this.cm=D,this.text=D.getLine(_),this.min=L?Math.max(L.from,D.firstLine()):D.firstLine(),this.max=L?Math.min(L.to-1,D.lastLine()):D.lastLine()}function ie(D,_){var m=D.cm.getTokenTypeAt(Q(D.line,_));return m&&/\btag\b/.test(m)}function q(D){if(!(D.line>=D.max))return D.ch=0,D.text=D.cm.getLine(++D.line),!0}function X(D){if(!(D.line<=D.min))return D.text=D.cm.getLine(--D.line),D.ch=D.text.length,!0}function K(D){for(;;){var _=D.text.indexOf(">",D.ch);if(-1==_){if(q(D))continue;return}if(ie(D,_+1)){var m=D.text.lastIndexOf("/",_),L=m>-1&&!/\S/.test(D.text.slice(m+1,_));return D.ch=_+1,L?"selfClose":"regular"}D.ch=_+1}}function ae(D){for(;;){var _=D.ch?D.text.lastIndexOf("<",D.ch-1):-1;if(-1==_){if(X(D))continue;return}if(ie(D,_+1)){f.lastIndex=_,D.ch=_;var m=f.exec(D.text);if(m&&m.index==_)return m}else D.ch=_}}function le(D){for(;;){f.lastIndex=D.ch;var _=f.exec(D.text);if(!_){if(q(D))continue;return}if(ie(D,_.index+1))return D.ch=_.index+_[0].length,_;D.ch=_.index+1}}function Ae(D){for(;;){var _=D.ch?D.text.lastIndexOf(">",D.ch-1):-1;if(-1==_){if(X(D))continue;return}if(ie(D,_+1)){var m=D.text.lastIndexOf("/",_),L=m>-1&&!/\S/.test(D.text.slice(m+1,_));return D.ch=_+1,L?"selfClose":"regular"}D.ch=_}}function $(D,_){for(var m=[];;){var M,L=le(D),P=D.line,b=D.ch-(L?L[0].length:0);if(!L||!(M=K(D)))return;if("selfClose"!=M)if(L[1]){for(var z=m.length-1;z>=0;--z)if(m[z]==L[2]){m.length=z;break}if(z<0&&(!_||_==L[2]))return{tag:L[2],from:Q(P,b),to:Q(D.line,D.ch)}}else m.push(L[2])}}function re(D,_){for(var m=[];;){var L=Ae(D);if(!L)return;if("selfClose"!=L){var M=D.line,P=D.ch,b=ae(D);if(!b)return;if(b[1])m.push(b[2]);else{for(var z=m.length-1;z>=0;--z)if(m[z]==b[2]){m.length=z;break}if(z<0&&(!_||_==b[2]))return{tag:b[2],from:Q(D.line,D.ch),to:Q(M,P)}}}else ae(D)}}T.registerHelper("fold","xml",function(D,_){for(var m=new I(D,_.line,0);;){var L=le(m);if(!L||m.line!=_.line)return;var M=K(m);if(!M)return;if(!L[1]&&"selfClose"!=M){var P=Q(m.line,m.ch),b=$(m,L[2]);return b&&H(b.from,P)>0?{from:P,to:b.from}:null}}}),T.findMatchingTag=function(D,_,m){var L=new I(D,_.line,_.ch,m);if(-1!=L.text.indexOf(">")||-1!=L.text.indexOf("<")){var M=K(L),P=M&&Q(L.line,L.ch),b=M&&ae(L);if(M&&b&&!(H(L,_)>0)){var z={from:Q(L.line,L.ch),to:P,tag:b[2]};return"selfClose"==M?{open:z,close:null,at:"open"}:b[1]?{open:re(L,b[2]),close:z,at:"close"}:{open:z,close:$(L=new I(D,P.line,P.ch,m),b[2]),at:"open"}}}},T.findEnclosingTag=function(D,_,m,L){for(var M=new I(D,_.line,_.ch,m);;){var P=re(M,L);if(!P)break;var z=$(new I(D,_.line,_.ch,m),P.tag);if(z)return{open:P,close:z}}},T.scanForClosingTag=function(D,_,m,L){return $(new I(D,_.line,_.ch,L?{from:0,to:L}:null),m)}}(de(43867))},93784:(yt,tt,de)=>{!function(T){"use strict";T.overlayMode=function(Q,H,W){return{startState:function(){return{base:T.startState(Q),overlay:T.startState(H),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(C){return{base:T.copyState(Q,C.base),overlay:T.copyState(H,C.overlay),basePos:C.basePos,baseCur:null,overlayPos:C.overlayPos,overlayCur:null}},token:function(C,f){return(C!=f.streamSeen||Math.min(f.basePos,f.overlayPos)<C.start)&&(f.streamSeen=C,f.basePos=f.overlayPos=C.start),C.start==f.basePos&&(f.baseCur=Q.token(C,f.base),f.basePos=C.pos),C.start==f.overlayPos&&(C.pos=C.start,f.overlayCur=H.token(C,f.overlay),f.overlayPos=C.pos),C.pos=Math.min(f.basePos,f.overlayPos),null==f.overlayCur?f.baseCur:null!=f.baseCur&&f.overlay.combineTokens||W&&null==f.overlay.combineTokens?f.baseCur+" "+f.overlayCur:f.overlayCur},indent:Q.indent&&function(C,f,I){return Q.indent(C.base,f,I)},electricChars:Q.electricChars,innerMode:function(C){return{state:C.base,mode:Q}},blankLine:function(C){var f,I;return Q.blankLine&&(f=Q.blankLine(C.base)),H.blankLine&&(I=H.blankLine(C.overlay)),null==I?f:W&&null!=f?f+" "+I:I}}}}(de(43867))},29741:(yt,tt,de)=>{!function(T){"use strict";function Q(H,W){function C(I){clearTimeout(f.doRedraw),f.doRedraw=setTimeout(function(){f.redraw()},I)}this.cm=H,this.options=W,this.buttonHeight=W.scrollButtonHeight||H.getOption("scrollButtonHeight"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=H.getWrapperElement().appendChild(document.createElement("div")),this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none",this.computeScale();var f=this;H.on("refresh",this.resizeHandler=function(){clearTimeout(f.doUpdate),f.doUpdate=setTimeout(function(){f.computeScale()&&C(20)},100)}),H.on("markerAdded",this.resizeHandler),H.on("markerCleared",this.resizeHandler),!1!==W.listenForChanges&&H.on("changes",this.changeHandler=function(){C(250)})}T.defineExtension("annotateScrollbar",function(H){return"string"==typeof H&&(H={className:H}),new Q(this,H)}),T.defineOption("scrollButtonHeight",0),Q.prototype.computeScale=function(){var H=this.cm,W=(H.getWrapperElement().clientHeight-H.display.barHeight-2*this.buttonHeight)/H.getScrollerElement().scrollHeight;if(W!=this.hScale)return this.hScale=W,!0},Q.prototype.update=function(H){this.annotations=H,this.redraw()},Q.prototype.redraw=function(H){!1!==H&&this.computeScale();var W=this.cm,C=this.hScale,f=document.createDocumentFragment(),I=this.annotations,ie=W.getOption("lineWrapping"),q=ie&&1.5*W.defaultTextHeight(),X=null,K=null;function ae(M,P){if(X!=M.line){X=M.line,K=W.getLineHandle(M.line);var b=W.getLineHandleVisualStart(K);b!=K&&(X=W.getLineNumber(b),K=b)}return K.widgets&&K.widgets.length||ie&&K.height>q?W.charCoords(M,"local")[P?"top":"bottom"]:W.heightAtLine(K,"local")+(P?0:K.height)}var le=W.lastLine();if(W.display.barWidth)for(var $,Ae=0;Ae<I.length;Ae++){var re=I[Ae];if(!(re.to.line>le)){for(var D=$||ae(re.from,!0)*C,_=ae(re.to,!1)*C;Ae<I.length-1&&!(I[Ae+1].to.line>le||($=ae(I[Ae+1].from,!0)*C,$>_+.9));)_=ae((re=I[++Ae]).to,!1)*C;if(_!=D){var m=Math.max(_-D,3),L=f.appendChild(document.createElement("div"));L.style.cssText="position: absolute; right: 0px; width: "+Math.max(W.display.barWidth-1,2)+"px; top: "+(D+this.buttonHeight)+"px; height: "+m+"px",L.className=this.options.className,re.id&&L.setAttribute("annotation-id",re.id)}}}this.div.textContent="",this.div.appendChild(f)},Q.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler),this.cm.off("markerAdded",this.resizeHandler),this.cm.off("markerCleared",this.resizeHandler),this.changeHandler&&this.cm.off("changes",this.changeHandler),this.div.parentNode.removeChild(this.div)}}(de(43867))},54731:(yt,tt,de)=>{!function(T){"use strict";function W(C,f){var I=Number(f);return/^[-+]/.test(f)?C.getCursor().line+I:I-1}T.defineOption("search",{bottom:!1}),T.commands.jumpToLine=function(C){var f=C.getCursor();!function Q(C,f,I,ie,q){C.openDialog?C.openDialog(f,q,{value:ie,selectValueOnOpen:!0,bottom:C.options.search.bottom}):q(prompt(I,ie))}(C,function H(C){return C.phrase("Jump to line:")+' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+C.phrase("(Use line:column or scroll% syntax)")+"</span>"}(C),C.phrase("Jump to line:"),f.line+1+":"+f.ch,function(I){var ie;if(I)if(ie=/^\s*([\+\-]?\d+)\s*\:\s*(\d+)\s*$/.exec(I))C.setCursor(W(C,ie[1]),Number(ie[2]));else if(ie=/^\s*([\+\-]?\d+(\.\d+)?)\%\s*/.exec(I)){var q=Math.round(C.lineCount()*Number(ie[1])/100);/^[-+]/.test(ie[1])&&(q=f.line+q+1),C.setCursor(q-1,f.ch)}else(ie=/^\s*\:?\s*([\+\-]?\d+)\s*/.exec(I))&&C.setCursor(W(C,ie[1]),f.ch)})},T.keyMap.default["Alt-G"]="jumpToLine"}(de(43867),de(46246))},75396:(yt,tt,de)=>{!function(T){"use strict";function Q(C,f,I,ie){this.cm=C,this.options=ie;var q={listenForChanges:!1};for(var X in ie)q[X]=ie[X];q.className||(q.className="CodeMirror-search-match"),this.annotation=C.annotateScrollbar(q),this.query=f,this.caseFold=I,this.gap={from:C.firstLine(),to:C.lastLine()+1},this.matches=[],this.update=null,this.findMatches(),this.annotation.update(this.matches);var K=this;C.on("change",this.changeHandler=function(ae,le){K.onChange(le)})}T.defineExtension("showMatchesOnScrollbar",function(C,f,I){return"string"==typeof I&&(I={className:I}),I||(I={}),new Q(this,C,f,I)});function W(C,f,I){return C<=f?C:Math.max(f,C+I)}Q.prototype.findMatches=function(){if(this.gap){for(var C=0;C<this.matches.length&&!((f=this.matches[C]).from.line>=this.gap.to);C++)f.to.line>=this.gap.from&&this.matches.splice(C--,1);for(var I=this.cm.getSearchCursor(this.query,T.Pos(this.gap.from,0),{caseFold:this.caseFold,multiline:this.options.multiline}),ie=this.options&&this.options.maxMatches||1e3;I.findNext();){var f;if((f={from:I.from(),to:I.to()}).from.line>=this.gap.to||(this.matches.splice(C++,0,f),this.matches.length>ie))break}this.gap=null}},Q.prototype.onChange=function(C){var f=C.from.line,I=T.changeEnd(C).line,ie=I-C.to.line;if(this.gap?(this.gap.from=Math.min(W(this.gap.from,f,ie),C.from.line),this.gap.to=Math.max(W(this.gap.to,f,ie),C.from.line)):this.gap={from:C.from.line,to:I+1},ie)for(var q=0;q<this.matches.length;q++){var X=this.matches[q],K=W(X.from.line,f,ie);K!=X.from.line&&(X.from=T.Pos(K,X.from.ch));var ae=W(X.to.line,f,ie);ae!=X.to.line&&(X.to=T.Pos(ae,X.to.ch))}clearTimeout(this.update);var le=this;this.update=setTimeout(function(){le.updateAfterChange()},250)},Q.prototype.updateAfterChange=function(){this.findMatches(),this.annotation.update(this.matches)},Q.prototype.clear=function(){this.cm.off("change",this.changeHandler),this.annotation.clear()}}(de(43867),de(15626),de(29741))},69347:(yt,tt,de)=>{!function(T){"use strict";function H(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function W(b){return b.state.search||(b.state.search=new H)}function C(b){return"string"==typeof b&&b==b.toLowerCase()}function f(b,z,ne){return b.getSearchCursor(z,ne,{caseFold:C(z),multiline:!0})}function ie(b,z,ne,Y,ce){b.openDialog?b.openDialog(z,ce,{value:Y,selectValueOnOpen:!0,bottom:b.options.search.bottom}):ce(prompt(ne,Y))}function X(b){return b.replace(/\\([nrt\\])/g,function(z,ne){return"n"==ne?"\n":"r"==ne?"\r":"t"==ne?"\t":"\\"==ne?"\\":z})}function K(b){var z=b.match(/^\/(.*)\/([a-z]*)$/);if(z)try{b=new RegExp(z[1],-1==z[2].indexOf("i")?"":"i")}catch{}else b=X(b);return("string"==typeof b?""==b:b.test(""))&&(b=/x^/),b}function ae(b,z,ne){z.queryText=ne,z.query=K(ne),b.removeOverlay(z.overlay,C(z.query)),z.overlay=function Q(b,z){return"string"==typeof b?b=new RegExp(b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),z?"gi":"g"):b.global||(b=new RegExp(b.source,b.ignoreCase?"gi":"g")),{token:function(ne){b.lastIndex=ne.pos;var Y=b.exec(ne.string);if(Y&&Y.index==ne.pos)return ne.pos+=Y[0].length||1,"searching";Y?ne.pos=Y.index:ne.skipToEnd()}}}(z.query,C(z.query)),b.addOverlay(z.overlay),b.showMatchesOnScrollbar&&(z.annotate&&(z.annotate.clear(),z.annotate=null),z.annotate=b.showMatchesOnScrollbar(z.query,C(z.query)))}function le(b,z,ne,Y){var ce=W(b);if(ce.query)return Ae(b,z);var R=b.getSelection()||ce.lastQuery;if(R instanceof RegExp&&"x^"==R.source&&(R=null),ne&&b.openDialog){var me=null,x=function(ve,fe){T.e_stop(fe),ve&&(ve!=ce.queryText&&(ae(b,ce,ve),ce.posFrom=ce.posTo=b.getCursor()),me&&(me.style.opacity=1),Ae(b,fe.shiftKey,function(Se,Pe){var Ue;Pe.line<3&&document.querySelector&&(Ue=b.display.wrapper.querySelector(".CodeMirror-dialog"))&&Ue.getBoundingClientRect().bottom-4>b.cursorCoords(Pe,"window").top&&((me=Ue).style.opacity=.4)}))};(function I(b,z,ne,Y,ce){b.openDialog(z,Y,{value:ne,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){$(b)},onKeyDown:ce,bottom:b.options.search.bottom})})(b,D(b),R,x,function(ve,fe){var Se=T.keyName(ve),Pe=b.getOption("extraKeys"),Ue=Pe&&Pe[Se]||T.keyMap[b.getOption("keyMap")][Se];"findNext"==Ue||"findPrev"==Ue||"findPersistentNext"==Ue||"findPersistentPrev"==Ue?(T.e_stop(ve),ae(b,W(b),fe),b.execCommand(Ue)):("find"==Ue||"findPersistent"==Ue)&&(T.e_stop(ve),x(fe,ve))}),Y&&R&&(ae(b,ce,R),Ae(b,z))}else ie(b,D(b),"Search for:",R,function(ve){ve&&!ce.query&&b.operation(function(){ae(b,ce,ve),ce.posFrom=ce.posTo=b.getCursor(),Ae(b,z)})})}function Ae(b,z,ne){b.operation(function(){var Y=W(b),ce=f(b,Y.query,z?Y.posFrom:Y.posTo);!ce.find(z)&&!(ce=f(b,Y.query,z?T.Pos(b.lastLine()):T.Pos(b.firstLine(),0))).find(z)||(b.setSelection(ce.from(),ce.to()),b.scrollIntoView({from:ce.from(),to:ce.to()},20),Y.posFrom=ce.from(),Y.posTo=ce.to(),ne&&ne(ce.from(),ce.to()))})}function $(b){b.operation(function(){var z=W(b);z.lastQuery=z.query,z.query&&(z.query=z.queryText=null,b.removeOverlay(z.overlay),z.annotate&&(z.annotate.clear(),z.annotate=null))})}function re(b,z){var ne=b?document.createElement(b):document.createDocumentFragment();for(var Y in z)ne[Y]=z[Y];for(var ce=2;ce<arguments.length;ce++){var R=arguments[ce];ne.appendChild("string"==typeof R?document.createTextNode(R):R)}return ne}function D(b){var z=re("label",{className:"CodeMirror-search-label"},b.phrase("Search:"),re("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field",id:"CodeMirror-search-field"}));return z.setAttribute("for","CodeMirror-search-field"),re("",null,z," ",re("span",{style:"color: #666",className:"CodeMirror-search-hint"},b.phrase("(Use /re/ syntax for regexp search)")))}function M(b,z,ne){b.operation(function(){for(var Y=f(b,z);Y.findNext();)if("string"!=typeof z){var ce=b.getRange(Y.from(),Y.to()).match(z);Y.replace(ne.replace(/\$(\d)/g,function(R,me){return ce[me]}))}else Y.replace(ne)})}function P(b,z){if(!b.getOption("readOnly")){var ne=b.getSelection()||W(b).lastQuery,Y=b.phrase(z?"Replace all:":"Replace:"),ce=re("",null,re("span",{className:"CodeMirror-search-label"},Y),function _(b){return re("",null," ",re("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"})," ",re("span",{style:"color: #666",className:"CodeMirror-search-hint"},b.phrase("(Use /re/ syntax for regexp search)")))}(b));ie(b,ce,Y,ne,function(R){R&&(R=K(R),ie(b,function m(b){return re("",null,re("span",{className:"CodeMirror-search-label"},b.phrase("With:"))," ",re("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"}))}(b),b.phrase("Replace with:"),"",function(me){if(me=X(me),z)M(b,R,me);else{$(b);var x=f(b,R,b.getCursor("from")),ve=function(){var Pe,Se=x.from();!(Pe=x.findNext())&&(x=f(b,R),!(Pe=x.findNext())||Se&&x.from().line==Se.line&&x.from().ch==Se.ch)||(b.setSelection(x.from(),x.to()),b.scrollIntoView({from:x.from(),to:x.to()}),function q(b,z,ne,Y){b.openConfirm?b.openConfirm(z,Y):confirm(ne)&&Y[0]()}(b,function L(b){return re("",null,re("span",{className:"CodeMirror-search-label"},b.phrase("Replace?"))," ",re("button",{},b.phrase("Yes"))," ",re("button",{},b.phrase("No"))," ",re("button",{},b.phrase("All"))," ",re("button",{},b.phrase("Stop")))}(b),b.phrase("Replace?"),[function(){fe(Pe)},ve,function(){M(b,R,me)}]))},fe=function(Se){x.replace("string"==typeof R?me:me.replace(/\$(\d)/g,function(Pe,Ue){return Se[Ue]})),ve()};ve()}}))})}}T.defineOption("search",{bottom:!1}),T.commands.find=function(b){$(b),le(b)},T.commands.findPersistent=function(b){$(b),le(b,!1,!0)},T.commands.findPersistentNext=function(b){le(b,!1,!0,!0)},T.commands.findPersistentPrev=function(b){le(b,!0,!0,!0)},T.commands.findNext=le,T.commands.findPrev=function(b){le(b,!0)},T.commands.clearSearch=$,T.commands.replace=P,T.commands.replaceAll=function(b){P(b,!0)}}(de(43867),de(15626),de(46246))},15626:(yt,tt,de)=>{!function(T){"use strict";var K,ae,Q=T.Pos;function W(D,_){for(var m=function H(D){return D.flags??(D.ignoreCase?"i":"")+(D.global?"g":"")+(D.multiline?"m":"")}(D),L=m,M=0;M<_.length;M++)-1==L.indexOf(_.charAt(M))&&(L+=_.charAt(M));return m==L?D:new RegExp(D.source,L)}function C(D){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(D.source)}function f(D,_,m){_=W(_,"g");for(var L=m.line,M=m.ch,P=D.lastLine();L<=P;L++,M=0){_.lastIndex=M;var b=D.getLine(L),z=_.exec(b);if(z)return{from:Q(L,z.index),to:Q(L,z.index+z[0].length),match:z}}}function I(D,_,m){if(!C(_))return f(D,_,m);_=W(_,"gm");for(var L,M=1,P=m.line,b=D.lastLine();P<=b;){for(var z=0;z<M&&!(P>b);z++){var ne=D.getLine(P++);L=null==L?ne:L+"\n"+ne}M*=2,_.lastIndex=m.ch;var Y=_.exec(L);if(Y){var ce=L.slice(0,Y.index).split("\n"),R=Y[0].split("\n"),me=m.line+ce.length-1,x=ce[ce.length-1].length;return{from:Q(me,x),to:Q(me+R.length-1,1==R.length?x+R[0].length:R[R.length-1].length),match:Y}}}}function ie(D,_,m){for(var L,M=0;M<=D.length;){_.lastIndex=M;var P=_.exec(D);if(!P)break;var b=P.index+P[0].length;if(b>D.length-m)break;(!L||b>L.index+L[0].length)&&(L=P),M=P.index+1}return L}function q(D,_,m){_=W(_,"g");for(var L=m.line,M=m.ch,P=D.firstLine();L>=P;L--,M=-1){var b=D.getLine(L),z=ie(b,_,M<0?0:b.length-M);if(z)return{from:Q(L,z.index),to:Q(L,z.index+z[0].length),match:z}}}function X(D,_,m){if(!C(_))return q(D,_,m);_=W(_,"gm");for(var L,M=1,P=D.getLine(m.line).length-m.ch,b=m.line,z=D.firstLine();b>=z;){for(var ne=0;ne<M&&b>=z;ne++){var Y=D.getLine(b--);L=null==L?Y:Y+"\n"+L}M*=2;var ce=ie(L,_,P);if(ce){var R=L.slice(0,ce.index).split("\n"),me=ce[0].split("\n"),x=b+R.length,ve=R[R.length-1].length;return{from:Q(x,ve),to:Q(x+me.length-1,1==me.length?ve+me[0].length:me[me.length-1].length),match:ce}}}}function le(D,_,m,L){if(D.length==_.length)return m;for(var M=0,P=m+Math.max(0,D.length-_.length);;){if(M==P)return M;var b=M+P>>1,z=L(D.slice(0,b)).length;if(z==m)return b;z>m?P=b:M=b+1}}function Ae(D,_,m,L){if(!_.length)return null;var M=L?K:ae,P=M(_).split(/\r|\n\r?/);e:for(var b=m.line,z=m.ch,ne=D.lastLine()+1-P.length;b<=ne;b++,z=0){var Y=D.getLine(b).slice(z),ce=M(Y);if(1==P.length){var R=ce.indexOf(P[0]);if(-1==R)continue e;return m=le(Y,ce,R,M)+z,{from:Q(b,le(Y,ce,R,M)+z),to:Q(b,le(Y,ce,R+P[0].length,M)+z)}}var me=ce.length-P[0].length;if(ce.slice(me)==P[0]){for(var x=1;x<P.length-1;x++)if(M(D.getLine(b+x))!=P[x])continue e;var ve=D.getLine(b+P.length-1),fe=M(ve),Se=P[P.length-1];if(fe.slice(0,Se.length)==Se)return{from:Q(b,le(Y,ce,me,M)+z),to:Q(b+P.length-1,le(ve,fe,Se.length,M))}}}}function $(D,_,m,L){if(!_.length)return null;var M=L?K:ae,P=M(_).split(/\r|\n\r?/);e:for(var b=m.line,z=m.ch,ne=D.firstLine()-1+P.length;b>=ne;b--,z=-1){var Y=D.getLine(b);z>-1&&(Y=Y.slice(0,z));var ce=M(Y);if(1==P.length){var R=ce.lastIndexOf(P[0]);if(-1==R)continue e;return{from:Q(b,le(Y,ce,R,M)),to:Q(b,le(Y,ce,R+P[0].length,M))}}var me=P[P.length-1];if(ce.slice(0,me.length)==me){var x=1;for(m=b-P.length+1;x<P.length-1;x++)if(M(D.getLine(m+x))!=P[x])continue e;var ve=D.getLine(b+1-P.length),fe=M(ve);if(fe.slice(fe.length-P[0].length)==P[0])return{from:Q(b+1-P.length,le(ve,fe,ve.length-P[0].length,M)),to:Q(b,le(Y,ce,me.length,M))}}}}function re(D,_,m,L){var M;this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=D,m=m?D.clipPos(m):Q(0,0),this.pos={from:m,to:m},"object"==typeof L?M=L.caseFold:(M=L,L=null),"string"==typeof _?(null==M&&(M=!1),this.matches=function(P,b){return(P?$:Ae)(D,_,b,M)}):(_=W(_,"gm"),this.matches=L&&!1===L.multiline?function(P,b){return(P?q:f)(D,_,b)}:function(P,b){return(P?X:I)(D,_,b)})}String.prototype.normalize?(K=function(D){return D.normalize("NFD").toLowerCase()},ae=function(D){return D.normalize("NFD")}):(K=function(D){return D.toLowerCase()},ae=function(D){return D}),re.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(D){var _=this.doc.clipPos(D?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(_=Q(_.line,_.ch),D?(_.ch--,_.ch<0&&(_.line--,_.ch=(this.doc.getLine(_.line)||"").length)):(_.ch++,_.ch>(this.doc.getLine(_.line)||"").length&&(_.ch=0,_.line++)),0!=T.cmpPos(_,this.doc.clipPos(_))))return this.atOccurrence=!1;var m=this.matches(D,_);if(this.afterEmptyMatch=m&&0==T.cmpPos(m.from,m.to),m)return this.pos=m,this.atOccurrence=!0,this.pos.match||!0;var L=Q(D?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:L,to:L},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(D,_){if(this.atOccurrence){var m=T.splitLines(D);this.doc.replaceRange(m,this.pos.from,this.pos.to,_),this.pos.to=Q(this.pos.from.line+m.length-1,m[m.length-1].length+(1==m.length?this.pos.from.ch:0))}}},T.defineExtension("getSearchCursor",function(D,_,m){return new re(this.doc,D,_,m)}),T.defineDocExtension("getSearchCursor",function(D,_,m){return new re(this,D,_,m)}),T.defineExtension("selectMatches",function(D,_){for(var m=[],L=this.getSearchCursor(D,this.getCursor("from"),_);L.findNext()&&!(T.cmpPos(L.to(),this.getCursor("to"))>0);)m.push({anchor:L.from(),head:L.to()});m.length&&this.setSelections(m,0)})}(de(43867))},33886:(yt,tt,de)=>{!function(T){"use strict";var Q=T.commands,H=T.Pos;function W(F,Z){return F.line==Z.line&&F.ch==Z.ch}var C=[];function f(F){C.push(F),C.length>50&&C.shift()}function ie(F){return C[C.length-(F?Math.min(F,1):1)]||""}var X=null;function K(F,Z,te,ye,Ee){null==Ee&&(Ee=F.getRange(Z,te)),"grow"==ye&&X&&X.cm==F&&W(Z,X.pos)&&F.isClean(X.gen)?function I(F){if(!C.length)return f(F);C[C.length-1]+=F}(Ee):!1!==ye&&f(Ee),F.replaceRange("",Z,te,"+delete"),X="grow"==ye?{cm:F,pos:Z,gen:F.changeGeneration()}:null}function ae(F,Z,te){return F.findPosH(Z,te,"char",!0)}function le(F,Z,te){return F.findPosH(Z,te,"word",!0)}function Ae(F,Z,te){return F.findPosV(Z,te,"line",F.doc.sel.goalColumn)}function $(F,Z,te){return F.findPosV(Z,te,"page",F.doc.sel.goalColumn)}function re(F,Z,te){for(var ye=Z.line,Ee=F.getLine(ye),Ce=/\S/.test(te<0?Ee.slice(0,Z.ch):Ee.slice(Z.ch)),Ke=F.firstLine(),ze=F.lastLine();;){if((ye+=te)<Ke||ye>ze)return F.clipPos(H(ye-te,te<0?0:null));if(Ee=F.getLine(ye),/\S/.test(Ee))Ce=!0;else if(Ce)return H(ye,0)}}function D(F,Z,te){for(var ye=Z.line,Ee=Z.ch,Ce=F.getLine(Z.line),Ke=!1;;){var ze=Ce.charAt(Ee+(te<0?-1:0));if(ze){if(Ke&&/[!?.]/.test(ze))return H(ye,Ee+(te>0?1:0));Ke||(Ke=/\w/.test(ze)),Ee+=te}else{if(ye==(te<0?F.firstLine():F.lastLine())||(Ce=F.getLine(ye+te),!/\S/.test(Ce)))return H(ye,Ee);ye+=te,Ee=te<0?Ce.length:0}}}function _(F,Z,te){var ye;if(F.findMatchingBracket&&(ye=F.findMatchingBracket(Z,{strict:!0}))&&ye.match&&(ye.forward?1:-1)==te)return te>0?H(ye.to.line,ye.to.ch+1):ye.to;for(var Ee=!0;;Ee=!1){var Ce=F.getTokenAt(Z),Ke=H(Z.line,te<0?Ce.start:Ce.end);if(!(Ee&&te>0&&Ce.end==Z.ch)&&/\w/.test(Ce.string))return Ke;var ze=F.findPosH(Ke,te,"char");if(W(Ke,ze))return Z;Z=ze}}function m(F,Z){var te=F.state.emacsPrefix;return te?(R(F),"-"==te?-1:Number(te)):Z?null:1}function L(F){var Z="string"==typeof F?function(te){te.execCommand(F)}:F;return function(te){var ye=m(te);Z(te);for(var Ee=1;Ee<ye;++Ee)Z(te)}}function M(F,Z,te,ye){var Ee=m(F);Ee<0&&(ye=-ye,Ee=-Ee);for(var Ce=0;Ce<Ee;++Ce){var Ke=te(F,Z,ye);if(W(Ke,Z))break;Z=Ke}return Z}function P(F,Z){var te=function(ye){ye.extendSelection(M(ye,ye.getCursor(),F,Z))};return te.motion=!0,te}function b(F,Z,te,ye){for(var Ce,Ee=F.listSelections(),Ke=Ee.length;Ke--;)K(F,Ce=Ee[Ke].head,M(F,Ce,Z,te),ye)}function z(F,Z){if(F.somethingSelected()){for(var ye,te=F.listSelections(),Ee=te.length;Ee--;)K(F,(ye=te[Ee]).anchor,ye.head,Z);return!0}}function ne(F,Z){F.state.emacsPrefix?"-"!=Z&&(F.state.emacsPrefix+=Z):(F.state.emacsPrefix=Z,F.on("keyHandled",ce),F.on("inputRead",me))}var Y={"Alt-G":!0,"Ctrl-X":!0,"Ctrl-Q":!0,"Ctrl-U":!0};function ce(F,Z){!F.state.emacsPrefixMap&&!Y.hasOwnProperty(Z)&&R(F)}function R(F){F.state.emacsPrefix=null,F.off("keyHandled",ce),F.off("inputRead",me)}function me(F,Z){var te=m(F);if(te>1&&"+input"==Z.origin){for(var ye=Z.text.join("\n"),Ee="",Ce=1;Ce<te;++Ce)Ee+=ye;F.replaceSelection(Ee)}}function x(F,Z){"string"==typeof Z&&(/^\d$/.test(Z)||"Ctrl-U"==Z)||(F.removeKeyMap(N),F.state.emacsPrefixMap=!1,F.off("keyHandled",x),F.off("inputRead",x))}function ve(F){F.setExtending(!1),F.setCursor(F.getCursor())}function Se(F,Z,te){F.openDialog?F.openDialog(function fe(F){var Z=document.createDocumentFragment(),te=document.createElement("input");return te.setAttribute("type","text"),te.style.width="10em",Z.appendChild(document.createTextNode(F+": ")),Z.appendChild(te),Z}(Z),te,{bottom:!0}):te(prompt(Z,""))}function Pe(F,Z){var te=F.getCursor(),ye=F.findPosH(te,1,"word");F.replaceRange(Z(F.getRange(te,ye)),te,ye),F.setCursor(ye)}Q.setMark=function(F){F.setCursor(F.getCursor()),F.setExtending(!F.getExtending()),F.on("change",function(){F.setExtending(!1)})},Q.killRegion=function(F){K(F,F.getCursor("start"),F.getCursor("end"),!0)},Q.killLineEmacs=L(function(F){var Z=F.getCursor(),te=F.clipPos(H(Z.line)),ye=F.getRange(Z,te);/\S/.test(ye)||(ye+="\n",te=H(Z.line+1,0)),K(F,Z,te,"grow",ye)}),Q.killRingSave=function(F){f(F.getSelection()),ve(F)},Q.yank=function(F){var Z=F.getCursor();F.replaceRange(ie(m(F)),Z,Z,"paste"),F.setSelection(Z,F.getCursor())},Q.yankPop=function(F){F.replaceSelection(function q(){return C.length>1&&C.pop(),ie()}(),"around","paste")},Q.forwardChar=P(ae,1),Q.backwardChar=P(ae,-1),Q.deleteChar=function(F){b(F,ae,1,!1)},Q.deleteForwardChar=function(F){z(F,!1)||b(F,ae,1,!1)},Q.deleteBackwardChar=function(F){z(F,!1)||b(F,ae,-1,!1)},Q.forwardWord=P(le,1),Q.backwardWord=P(le,-1),Q.killWord=function(F){b(F,le,1,"grow")},Q.backwardKillWord=function(F){b(F,le,-1,"grow")},Q.nextLine=P(Ae,1),Q.previousLine=P(Ae,-1),Q.scrollDownCommand=P($,-1),Q.scrollUpCommand=P($,1),Q.backwardParagraph=P(re,-1),Q.forwardParagraph=P(re,1),Q.backwardSentence=P(D,-1),Q.forwardSentence=P(D,1),Q.killSentence=function(F){b(F,D,1,"grow")},Q.backwardKillSentence=function(F){K(F,F.getCursor(),D(F,F.getCursor(),1),"grow")},Q.killSexp=function(F){b(F,_,1,"grow")},Q.backwardKillSexp=function(F){b(F,_,-1,"grow")},Q.forwardSexp=P(_,1),Q.backwardSexp=P(_,-1),Q.markSexp=function(F){var Z=F.getCursor();F.setSelection(M(F,Z,_,1),Z)},Q.transposeSexps=function(F){var Z=_(F,F.getCursor(),-1),te=_(F,Z,1),ye=_(F,te,1),Ee=_(F,ye,-1);F.replaceRange(F.getRange(Ee,ye)+F.getRange(te,Ee)+F.getRange(Z,te),Z,ye)},Q.backwardUpList=L(function Ue(F){for(var Z=F.getCursor(),te=Z.line,ye=Z.ch,Ee=[];te>=F.firstLine();){for(var Ce=F.getLine(te),Ke=ye??Ce.length;Ke>0;)if(")"==(ye=Ce.charAt(--Ke)))Ee.push("(");else if("]"==ye)Ee.push("[");else if("}"==ye)Ee.push("{");else if(/[\(\{\[]/.test(ye)&&(!Ee.length||Ee.pop()!=ye))return F.extendSelection(H(te,Ke));--te,ye=null}}),Q.justOneSpace=function(F){for(var Z=F.getCursor(),te=Z.ch,ye=Z.ch,Ee=F.getLine(Z.line);te&&/\s/.test(Ee.charAt(te-1));)--te;for(;ye<Ee.length&&/\s/.test(Ee.charAt(ye));)++ye;F.replaceRange(" ",H(Z.line,te),H(Z.line,ye))},Q.openLine=L(function(F){F.replaceSelection("\n","start")}),Q.transposeCharsRepeatable=L(function(F){F.execCommand("transposeChars")}),Q.capitalizeWord=L(function(F){Pe(F,function(Z){var te=Z.search(/\w/);return-1==te?Z:Z.slice(0,te)+Z.charAt(te).toUpperCase()+Z.slice(te+1).toLowerCase()})}),Q.upcaseWord=L(function(F){Pe(F,function(Z){return Z.toUpperCase()})}),Q.downcaseWord=L(function(F){Pe(F,function(Z){return Z.toLowerCase()})}),Q.undoRepeatable=L("undo"),Q.keyboardQuit=function(F){F.execCommand("clearSearch"),ve(F)},Q.newline=L(function(F){F.replaceSelection("\n","end")}),Q.gotoLine=function(F){var Z=m(F,!0);if(null!=Z&&Z>0)return F.setCursor(Z-1);Se(F,"Goto line",function(te){var ye;te&&!isNaN(ye=Number(te))&&ye==(0|ye)&&ye>0&&F.setCursor(ye-1)})},Q.indentRigidly=function(F){F.indentSelection(m(F,!0)||F.getOption("indentUnit"))},Q.exchangePointAndMark=function(F){F.setSelection(F.getCursor("head"),F.getCursor("anchor"))},Q.quotedInsertTab=L("insertTab"),Q.universalArgument=function(Z){Z.state.emacsPrefixMap=!0,Z.addKeyMap(N),Z.on("keyHandled",x),Z.on("inputRead",x)},T.emacs={kill:K,killRegion:z,repeated:L};var Ge=T.keyMap.emacs=T.normalizeKeyMap({"Ctrl-W":"killRegion","Ctrl-K":"killLineEmacs","Alt-W":"killRingSave","Ctrl-Y":"yank","Alt-Y":"yankPop","Ctrl-Space":"setMark","Ctrl-Shift-2":"setMark","Ctrl-F":"forwardChar","Ctrl-B":"backwardChar",Right:"forwardChar",Left:"backwardChar","Ctrl-D":"deleteChar",Delete:"deleteForwardChar","Ctrl-H":"deleteBackwardChar",Backspace:"deleteBackwardChar","Alt-F":"forwardWord","Alt-B":"backwardWord","Alt-Right":"forwardWord","Alt-Left":"backwardWord","Alt-D":"killWord","Alt-Backspace":"backwardKillWord","Ctrl-N":"nextLine","Ctrl-P":"previousLine",Down:"nextLine",Up:"previousLine","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd",End:"goLineEnd",Home:"goLineStart","Alt-V":"scrollDownCommand","Ctrl-V":"scrollUpCommand",PageUp:"scrollDownCommand",PageDown:"scrollUpCommand","Ctrl-Up":"backwardParagraph","Ctrl-Down":"forwardParagraph","Alt-{":"backwardParagraph","Alt-}":"forwardParagraph","Alt-A":"backwardSentence","Alt-E":"forwardSentence","Alt-K":"killSentence","Ctrl-X Delete":"backwardKillSentence","Ctrl-Alt-K":"killSexp","Ctrl-Alt-Backspace":"backwardKillSexp","Ctrl-Alt-F":"forwardSexp","Ctrl-Alt-B":"backwardSexp","Shift-Ctrl-Alt-2":"markSexp","Ctrl-Alt-T":"transposeSexps","Ctrl-Alt-U":"backwardUpList","Alt-Space":"justOneSpace","Ctrl-O":"openLine","Ctrl-T":"transposeCharsRepeatable","Alt-C":"capitalizeWord","Alt-U":"upcaseWord","Alt-L":"downcaseWord","Alt-;":"toggleComment","Ctrl-/":"undoRepeatable","Shift-Ctrl--":"undoRepeatable","Ctrl-Z":"undoRepeatable","Cmd-Z":"undoRepeatable","Ctrl-X U":"undoRepeatable","Shift-Ctrl-Z":"redo","Shift-Alt-,":"goDocStart","Shift-Alt-.":"goDocEnd","Ctrl-S":"findPersistentNext","Ctrl-R":"findPersistentPrev","Ctrl-G":"keyboardQuit","Shift-Alt-5":"replace","Alt-/":"autocomplete",Enter:"newlineAndIndent","Ctrl-J":"newline",Tab:"indentAuto","Alt-G G":"gotoLine","Ctrl-X Tab":"indentRigidly","Ctrl-X Ctrl-X":"exchangePointAndMark","Ctrl-X Ctrl-S":"save","Ctrl-X Ctrl-W":"save","Ctrl-X S":"saveAll","Ctrl-X F":"open","Ctrl-X K":"close","Ctrl-X H":"selectAll","Ctrl-Q Tab":"quotedInsertTab","Ctrl-U":"universalArgument",fallthrough:"default"}),N={"Ctrl-G":R};function k(F){N[F]=function(Z){ne(Z,F)},Ge["Ctrl-"+F]=function(Z){ne(Z,F)},Y["Ctrl-"+F]=!0}for(var Oe=0;Oe<10;++Oe)k(String(Oe));k("-")}(de(43867))},76670:(yt,tt,de)=>{!function(T){"use strict";var Q=T.commands,H=T.Pos;function C(m,L){m.extendSelectionsBy(function(M){return m.display.shift||m.doc.extend||M.empty()?function W(m,L,M){if(M<0&&0==L.ch)return m.clipPos(H(L.line-1));var P=m.getLine(L.line);if(M>0&&L.ch>=P.length)return m.clipPos(H(L.line+1,0));for(var z,b="start",ne=L.ch,Y=ne,ce=M<0?0:P.length,R=0;Y!=ce;Y+=M,R++){var me=P.charAt(M<0?Y-1:Y),x="_"!=me&&T.isWordChar(me)?"w":"o";if("w"==x&&me.toUpperCase()==me&&(x="W"),"start"==b)"o"!=x?(b="in",z=x):ne=Y+M;else if("in"==b&&z!=x){if("w"==z&&"W"==x&&M<0&&Y--,"W"==z&&"w"==x&&M>0){if(Y==ne+1){z="w";continue}Y--}break}}return H(L.line,Y)}(m.doc,M.head,L):L<0?M.from():M.to()})}function f(m,L){if(m.isReadOnly())return T.Pass;m.operation(function(){for(var M=m.listSelections().length,P=[],b=-1,z=0;z<M;z++){var ne=m.listSelections()[z].head;if(!(ne.line<=b)){var Y=H(ne.line+(L?0:1),0);m.replaceRange("\n",Y,null,"+insertLine"),m.indentLine(Y.line,null,!0),P.push({head:Y,anchor:Y}),b=ne.line+1}}m.setSelections(P)}),m.execCommand("indentAuto")}function I(m,L){for(var M=L.ch,P=M,b=m.getLine(L.line);M&&T.isWordChar(b.charAt(M-1));)--M;for(;P<b.length&&T.isWordChar(b.charAt(P));)++P;return{from:H(L.line,M),to:H(L.line,P),word:b.slice(M,P)}}function ie(m,L){for(var M=m.listSelections(),P=[],b=0;b<M.length;b++){var z=M[b],ne=m.findPosV(z.anchor,L,"line",z.anchor.goalColumn),Y=m.findPosV(z.head,L,"line",z.head.goalColumn);ne.goalColumn=null!=z.anchor.goalColumn?z.anchor.goalColumn:m.cursorCoords(z.anchor,"div").left,Y.goalColumn=null!=z.head.goalColumn?z.head.goalColumn:m.cursorCoords(z.head,"div").left;var ce={anchor:ne,head:Y};P.push(z),P.push(ce)}m.setSelections(P)}Q.goSubwordLeft=function(m){C(m,-1)},Q.goSubwordRight=function(m){C(m,1)},Q.scrollLineUp=function(m){var L=m.getScrollInfo();if(!m.somethingSelected()){var M=m.lineAtHeight(L.top+L.clientHeight,"local");m.getCursor().line>=M&&m.execCommand("goLineUp")}m.scrollTo(null,L.top-m.defaultTextHeight())},Q.scrollLineDown=function(m){var L=m.getScrollInfo();if(!m.somethingSelected()){var M=m.lineAtHeight(L.top,"local")+1;m.getCursor().line<=M&&m.execCommand("goLineDown")}m.scrollTo(null,L.top+m.defaultTextHeight())},Q.splitSelectionByLine=function(m){for(var L=m.listSelections(),M=[],P=0;P<L.length;P++)for(var b=L[P].from(),z=L[P].to(),ne=b.line;ne<=z.line;++ne)z.line>b.line&&ne==z.line&&0==z.ch||M.push({anchor:ne==b.line?b:H(ne,0),head:ne==z.line?z:H(ne)});m.setSelections(M,0)},Q.singleSelectionTop=function(m){var L=m.listSelections()[0];m.setSelection(L.anchor,L.head,{scroll:!1})},Q.selectLine=function(m){for(var L=m.listSelections(),M=[],P=0;P<L.length;P++){var b=L[P];M.push({anchor:H(b.from().line,0),head:H(b.to().line+1,0)})}m.setSelections(M)},Q.insertLineAfter=function(m){return f(m,!1)},Q.insertLineBefore=function(m){return f(m,!0)},Q.selectNextOccurrence=function(m){var L=m.getCursor("from"),M=m.getCursor("to"),P=m.state.sublimeFindFullWord==m.doc.sel;if(0==T.cmpPos(L,M)){var b=I(m,L);if(!b.word)return;m.setSelection(b.from,b.to),P=!0}else{var z=m.getRange(L,M),ne=P?new RegExp("\\b"+z+"\\b"):z,Y=m.getSearchCursor(ne,M),ce=Y.findNext();if(ce||(ce=(Y=m.getSearchCursor(ne,H(m.firstLine(),0))).findNext()),!ce||function q(m,L,M){for(var P=0;P<m.length;P++)if(0==T.cmpPos(m[P].from(),L)&&0==T.cmpPos(m[P].to(),M))return!0;return!1}(m.listSelections(),Y.from(),Y.to()))return;m.addSelection(Y.from(),Y.to())}P&&(m.state.sublimeFindFullWord=m.doc.sel)},Q.skipAndSelectNextOccurrence=function(m){var L=m.getCursor("anchor"),M=m.getCursor("head");Q.selectNextOccurrence(m),0!=T.cmpPos(L,M)&&m.doc.setSelections(m.doc.listSelections().filter(function(P){return P.anchor!=L||P.head!=M}))},Q.addCursorToPrevLine=function(m){ie(m,-1)},Q.addCursorToNextLine=function(m){ie(m,1)};var X="(){}[]";function K(m){for(var L=m.listSelections(),M=[],P=0;P<L.length;P++){var b=L[P],z=b.head,ne=m.scanForBracket(z,-1);if(!ne)return!1;for(;;){var Y=m.scanForBracket(z,1);if(!Y)return!1;if(Y.ch==X.charAt(X.indexOf(ne.ch)+1)){var ce=H(ne.pos.line,ne.pos.ch+1);if(0!=T.cmpPos(ce,b.from())||0!=T.cmpPos(Y.pos,b.to())){M.push({anchor:ce,head:Y.pos});break}if(!(ne=m.scanForBracket(ne.pos,-1)))return!1}z=H(Y.pos.line,Y.pos.ch+1)}}return m.setSelections(M),!0}function ae(m){return m?/\bpunctuation\b/.test(m)?m:void 0:null}function le(m,L,M){if(m.isReadOnly())return T.Pass;for(var z,P=m.listSelections(),b=[],ne=0;ne<P.length;ne++){var Y=P[ne];if(!Y.empty()){for(var ce=Y.from().line,R=Y.to().line;ne<P.length-1&&P[ne+1].from().line==R;)R=P[++ne].to().line;P[ne].to().ch||R--,b.push(ce,R)}}b.length?z=!0:b.push(m.firstLine(),m.lastLine()),m.operation(function(){for(var me=[],x=0;x<b.length;x+=2){var fe=b[x+1],Se=H(b[x],0),Pe=H(fe),Ue=m.getRange(Se,Pe,!1);Ue.sort(L?function(Ge,N){return Ge<N?-M:Ge==N?0:M}:function(Ge,N){var k=Ge.toUpperCase(),Oe=N.toUpperCase();return k!=Oe&&(Ge=k,N=Oe),Ge<N?-M:Ge==N?0:M}),m.replaceRange(Ue,Se,Pe),z&&me.push({anchor:Se,head:H(fe+1,0)})}z&&m.setSelections(me,0)})}function Ae(m,L){m.operation(function(){for(var M=m.listSelections(),P=[],b=[],z=0;z<M.length;z++)(ne=M[z]).empty()?(P.push(z),b.push("")):b.push(L(m.getRange(ne.from(),ne.to())));var Y;for(m.replaceSelections(b,"around","case"),z=P.length-1;z>=0;z--){var ne=M[P[z]];if(!(Y&&T.cmpPos(ne.head,Y)>0)){var ce=I(m,ne.head);Y=ce.from,m.replaceRange(L(ce.word),ce.from,ce.to)}}})}function $(m){var L=m.getCursor("from"),M=m.getCursor("to");if(0==T.cmpPos(L,M)){var P=I(m,L);if(!P.word)return;L=P.from,M=P.to}return{from:L,to:M,query:m.getRange(L,M),word:P}}function re(m,L){var M=$(m);if(M){var P=M.query,b=m.getSearchCursor(P,L?M.to:M.from);(L?b.findNext():b.findPrevious())?m.setSelection(b.from(),b.to()):(b=m.getSearchCursor(P,L?H(m.firstLine(),0):m.clipPos(H(m.lastLine()))),(L?b.findNext():b.findPrevious())?m.setSelection(b.from(),b.to()):M.word&&m.setSelection(M.from,M.to))}}Q.selectScope=function(m){K(m)||m.execCommand("selectAll")},Q.selectBetweenBrackets=function(m){if(!K(m))return T.Pass},Q.goToBracket=function(m){m.extendSelectionsBy(function(L){var M=m.scanForBracket(L.head,1,ae(m.getTokenTypeAt(L.head)));if(M&&0!=T.cmpPos(M.pos,L.head))return M.pos;var P=m.scanForBracket(L.head,-1,ae(m.getTokenTypeAt(H(L.head.line,L.head.ch+1))));return P&&H(P.pos.line,P.pos.ch+1)||L.head})},Q.swapLineUp=function(m){if(m.isReadOnly())return T.Pass;for(var L=m.listSelections(),M=[],P=m.firstLine()-1,b=[],z=0;z<L.length;z++){var ne=L[z],Y=ne.from().line-1,ce=ne.to().line;b.push({anchor:H(ne.anchor.line-1,ne.anchor.ch),head:H(ne.head.line-1,ne.head.ch)}),0==ne.to().ch&&!ne.empty()&&--ce,Y>P?M.push(Y,ce):M.length&&(M[M.length-1]=ce),P=ce}m.operation(function(){for(var R=0;R<M.length;R+=2){var me=M[R],x=M[R+1],ve=m.getLine(me);m.replaceRange("",H(me,0),H(me+1,0),"+swapLine"),x>m.lastLine()?m.replaceRange("\n"+ve,H(m.lastLine()),null,"+swapLine"):m.replaceRange(ve+"\n",H(x,0),null,"+swapLine")}m.setSelections(b),m.scrollIntoView()})},Q.swapLineDown=function(m){if(m.isReadOnly())return T.Pass;for(var L=m.listSelections(),M=[],P=m.lastLine()+1,b=L.length-1;b>=0;b--){var z=L[b],ne=z.to().line+1,Y=z.from().line;0==z.to().ch&&!z.empty()&&ne--,ne<P?M.push(ne,Y):M.length&&(M[M.length-1]=Y),P=Y}m.operation(function(){for(var ce=M.length-2;ce>=0;ce-=2){var R=M[ce],me=M[ce+1],x=m.getLine(R);R==m.lastLine()?m.replaceRange("",H(R-1),H(R),"+swapLine"):m.replaceRange("",H(R,0),H(R+1,0),"+swapLine"),m.replaceRange(x+"\n",H(me,0),null,"+swapLine")}m.scrollIntoView()})},Q.toggleCommentIndented=function(m){m.toggleComment({indent:!0})},Q.joinLines=function(m){for(var L=m.listSelections(),M=[],P=0;P<L.length;P++){for(var b=L[P],z=b.from(),ne=z.line,Y=b.to().line;P<L.length-1&&L[P+1].from().line==Y;)Y=L[++P].to().line;M.push({start:ne,end:Y,anchor:!b.empty()&&z})}m.operation(function(){for(var ce=0,R=[],me=0;me<M.length;me++){for(var fe,x=M[me],ve=x.anchor&&H(x.anchor.line-ce,x.anchor.ch),Se=x.start;Se<=x.end;Se++){var Pe=Se-ce;Se==x.end&&(fe=H(Pe,m.getLine(Pe).length+1)),Pe<m.lastLine()&&(m.replaceRange(" ",H(Pe),H(Pe+1,/^\s*/.exec(m.getLine(Pe+1))[0].length)),++ce)}R.push({anchor:ve||fe,head:fe})}m.setSelections(R,0)})},Q.duplicateLine=function(m){m.operation(function(){for(var L=m.listSelections().length,M=0;M<L;M++){var P=m.listSelections()[M];P.empty()?m.replaceRange(m.getLine(P.head.line)+"\n",H(P.head.line,0)):m.replaceRange(m.getRange(P.from(),P.to()),P.from())}m.scrollIntoView()})},Q.sortLines=function(m){le(m,!0,1)},Q.reverseSortLines=function(m){le(m,!0,-1)},Q.sortLinesInsensitive=function(m){le(m,!1,1)},Q.reverseSortLinesInsensitive=function(m){le(m,!1,-1)},Q.nextBookmark=function(m){var L=m.state.sublimeBookmarks;if(L)for(;L.length;){var M=L.shift(),P=M.find();if(P)return L.push(M),m.setSelection(P.from,P.to)}},Q.prevBookmark=function(m){var L=m.state.sublimeBookmarks;if(L)for(;L.length;){L.unshift(L.pop());var M=L[L.length-1].find();if(M)return m.setSelection(M.from,M.to);L.pop()}},Q.toggleBookmark=function(m){for(var L=m.listSelections(),M=m.state.sublimeBookmarks||(m.state.sublimeBookmarks=[]),P=0;P<L.length;P++){for(var b=L[P].from(),z=L[P].to(),ne=L[P].empty()?m.findMarksAt(b):m.findMarks(b,z),Y=0;Y<ne.length;Y++)if(ne[Y].sublimeBookmark){ne[Y].clear();for(var ce=0;ce<M.length;ce++)M[ce]==ne[Y]&&M.splice(ce--,1);break}Y==ne.length&&M.push(m.markText(b,z,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},Q.clearBookmarks=function(m){var L=m.state.sublimeBookmarks;if(L)for(var M=0;M<L.length;M++)L[M].clear();L.length=0},Q.selectBookmarks=function(m){var L=m.state.sublimeBookmarks,M=[];if(L)for(var P=0;P<L.length;P++){var b=L[P].find();b?M.push({anchor:b.from,head:b.to}):L.splice(P--,0)}M.length&&m.setSelections(M,0)},Q.smartBackspace=function(m){if(m.somethingSelected())return T.Pass;m.operation(function(){for(var L=m.listSelections(),M=m.getOption("indentUnit"),P=L.length-1;P>=0;P--){var b=L[P].head,z=m.getRange({line:b.line,ch:0},b),ne=T.countColumn(z,null,m.getOption("tabSize")),Y=m.findPosH(b,-1,"char",!1);if(z&&!/\S/.test(z)&&ne%M==0){var ce=new H(b.line,T.findColumn(z,ne-M,M));ce.ch!=b.ch&&(Y=ce)}m.replaceRange("",Y,b,"+delete")}})},Q.delLineRight=function(m){m.operation(function(){for(var L=m.listSelections(),M=L.length-1;M>=0;M--)m.replaceRange("",L[M].anchor,H(L[M].to().line),"+delete");m.scrollIntoView()})},Q.upcaseAtCursor=function(m){Ae(m,function(L){return L.toUpperCase()})},Q.downcaseAtCursor=function(m){Ae(m,function(L){return L.toLowerCase()})},Q.setSublimeMark=function(m){m.state.sublimeMark&&m.state.sublimeMark.clear(),m.state.sublimeMark=m.setBookmark(m.getCursor())},Q.selectToSublimeMark=function(m){var L=m.state.sublimeMark&&m.state.sublimeMark.find();L&&m.setSelection(m.getCursor(),L)},Q.deleteToSublimeMark=function(m){var L=m.state.sublimeMark&&m.state.sublimeMark.find();if(L){var M=m.getCursor(),P=L;if(T.cmpPos(M,P)>0){var b=P;P=M,M=b}m.state.sublimeKilled=m.getRange(M,P),m.replaceRange("",M,P)}},Q.swapWithSublimeMark=function(m){var L=m.state.sublimeMark&&m.state.sublimeMark.find();L&&(m.state.sublimeMark.clear(),m.state.sublimeMark=m.setBookmark(m.getCursor()),m.setCursor(L))},Q.sublimeYank=function(m){null!=m.state.sublimeKilled&&m.replaceSelection(m.state.sublimeKilled,null,"paste")},Q.showInCenter=function(m){var L=m.cursorCoords(null,"local");m.scrollTo(null,(L.top+L.bottom)/2-m.getScrollInfo().clientHeight/2)},Q.findUnder=function(m){re(m,!0)},Q.findUnderPrevious=function(m){re(m,!1)},Q.findAllUnder=function(m){var L=$(m);if(L){for(var M=m.getSearchCursor(L.query),P=[],b=-1;M.findNext();)P.push({anchor:M.from(),head:M.to()}),M.from().line<=L.from.line&&M.from().ch<=L.from.ch&&b++;m.setSelections(P,b)}};var D=T.keyMap;D.macSublime={"Cmd-Left":"goLineStartSmart","Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-Left":"goSubwordLeft","Ctrl-Right":"goSubwordRight","Ctrl-Alt-Up":"scrollLineUp","Ctrl-Alt-Down":"scrollLineDown","Cmd-L":"selectLine","Shift-Cmd-L":"splitSelectionByLine",Esc:"singleSelectionTop","Cmd-Enter":"insertLineAfter","Shift-Cmd-Enter":"insertLineBefore","Cmd-D":"selectNextOccurrence","Shift-Cmd-Space":"selectScope","Shift-Cmd-M":"selectBetweenBrackets","Cmd-M":"goToBracket","Cmd-Ctrl-Up":"swapLineUp","Cmd-Ctrl-Down":"swapLineDown","Cmd-/":"toggleCommentIndented","Cmd-J":"joinLines","Shift-Cmd-D":"duplicateLine",F5:"sortLines","Shift-F5":"reverseSortLines","Cmd-F5":"sortLinesInsensitive","Shift-Cmd-F5":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Cmd-F2":"toggleBookmark","Shift-Cmd-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Cmd-K Cmd-D":"skipAndSelectNextOccurrence","Cmd-K Cmd-K":"delLineRight","Cmd-K Cmd-U":"upcaseAtCursor","Cmd-K Cmd-L":"downcaseAtCursor","Cmd-K Cmd-Space":"setSublimeMark","Cmd-K Cmd-A":"selectToSublimeMark","Cmd-K Cmd-W":"deleteToSublimeMark","Cmd-K Cmd-X":"swapWithSublimeMark","Cmd-K Cmd-Y":"sublimeYank","Cmd-K Cmd-C":"showInCenter","Cmd-K Cmd-G":"clearBookmarks","Cmd-K Cmd-Backspace":"delLineLeft","Cmd-K Cmd-1":"foldAll","Cmd-K Cmd-0":"unfoldAll","Cmd-K Cmd-J":"unfoldAll","Ctrl-Shift-Up":"addCursorToPrevLine","Ctrl-Shift-Down":"addCursorToNextLine","Cmd-F3":"findUnder","Shift-Cmd-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Cmd-[":"fold","Shift-Cmd-]":"unfold","Cmd-I":"findIncremental","Shift-Cmd-I":"findIncrementalReverse","Cmd-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"macDefault"},T.normalizeKeyMap(D.macSublime),D.pcSublime={"Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-T":"transposeChars","Alt-Left":"goSubwordLeft","Alt-Right":"goSubwordRight","Ctrl-Up":"scrollLineUp","Ctrl-Down":"scrollLineDown","Ctrl-L":"selectLine","Shift-Ctrl-L":"splitSelectionByLine",Esc:"singleSelectionTop","Ctrl-Enter":"insertLineAfter","Shift-Ctrl-Enter":"insertLineBefore","Ctrl-D":"selectNextOccurrence","Shift-Ctrl-Space":"selectScope","Shift-Ctrl-M":"selectBetweenBrackets","Ctrl-M":"goToBracket","Shift-Ctrl-Up":"swapLineUp","Shift-Ctrl-Down":"swapLineDown","Ctrl-/":"toggleCommentIndented","Ctrl-J":"joinLines","Shift-Ctrl-D":"duplicateLine",F9:"sortLines","Shift-F9":"reverseSortLines","Ctrl-F9":"sortLinesInsensitive","Shift-Ctrl-F9":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Ctrl-F2":"toggleBookmark","Shift-Ctrl-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Ctrl-K Ctrl-D":"skipAndSelectNextOccurrence","Ctrl-K Ctrl-K":"delLineRight","Ctrl-K Ctrl-U":"upcaseAtCursor","Ctrl-K Ctrl-L":"downcaseAtCursor","Ctrl-K Ctrl-Space":"setSublimeMark","Ctrl-K Ctrl-A":"selectToSublimeMark","Ctrl-K Ctrl-W":"deleteToSublimeMark","Ctrl-K Ctrl-X":"swapWithSublimeMark","Ctrl-K Ctrl-Y":"sublimeYank","Ctrl-K Ctrl-C":"showInCenter","Ctrl-K Ctrl-G":"clearBookmarks","Ctrl-K Ctrl-Backspace":"delLineLeft","Ctrl-K Ctrl-1":"foldAll","Ctrl-K Ctrl-0":"unfoldAll","Ctrl-K Ctrl-J":"unfoldAll","Ctrl-Alt-Up":"addCursorToPrevLine","Ctrl-Alt-Down":"addCursorToNextLine","Ctrl-F3":"findUnder","Shift-Ctrl-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Ctrl-[":"fold","Shift-Ctrl-]":"unfold","Ctrl-I":"findIncremental","Shift-Ctrl-I":"findIncrementalReverse","Ctrl-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"pcDefault"},T.normalizeKeyMap(D.pcSublime),D.sublime=D.default==D.macDefault?D.macSublime:D.pcSublime}(de(43867),de(15626),de(82491))},41595:(yt,tt,de)=>{!function(T){"use strict";function Q(W){var C=W.Pos;function f(o,l){var s=o.state.vim;if(!s||s.insertMode)return l.head;var c=s.sel.head;return c?s.visualBlock&&l.head.line!=c.line?void 0:l.from()!=l.anchor||l.empty()||l.head.line!=c.line||l.head.ch==c.ch?l.head:new C(l.head.line,l.head.ch-1):l.head}var I=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"g<Up>",type:"keyToKey",toKeys:"gk"},{keys:"g<Down>",type:"keyToKey",toKeys:"gj"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<Del>",type:"keyToKey",toKeys:"x",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"keyToKey",toKeys:"i",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"g$",type:"motion",motion:"moveToEndOfDisplayLine"},{keys:"g^",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"g0",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"gn",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!0}},{keys:"gN",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!1}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-u>",type:"operatorMotion",operator:"delete",motion:"moveToStartOfLine",context:"insert"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],ie=I.length,q=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"vglobal",shortName:"v"},{name:"global",shortName:"g"}];function X(o){o.setOption("disableInput",!0),o.setOption("showCursorWhenSelecting",!1),W.signal(o,"vim-mode-change",{mode:"normal"}),o.on("cursorActivity",li),Ee(o),W.on(o.getInputField(),"paste",_(o))}function ae(o,l){this==W.keyMap.vim&&(o.options.$customCursor=null,W.rmClass(o.getWrapperElement(),"cm-fat-cursor")),(!l||l.attach!=le)&&function K(o){o.setOption("disableInput",!1),o.off("cursorActivity",li),W.off(o.getInputField(),"paste",_(o)),o.state.vim=null,sn&&clearTimeout(sn)}(o)}function le(o,l){this==W.keyMap.vim&&(o.curOp&&(o.curOp.selectionChanged=!0),o.options.$customCursor=f,W.addClass(o.getWrapperElement(),"cm-fat-cursor")),(!l||l.attach!=le)&&X(o)}function Ae(o,l){if(l){if(this[o])return this[o];var s=function D(o){if("'"==o.charAt(0))return o.charAt(1);var l=o.split(/-(?!$)/),s=l[l.length-1];if(1==l.length&&1==l[0].length)return!1;if(2==l.length&&"Shift"==l[0]&&1==s.length)return!1;for(var c=!1,p=0;p<l.length;p++){var g=l[p];g in $?l[p]=$[g]:c=!0,g in re&&(l[p]=re[g])}return!!c&&(Se(s)&&(l[l.length-1]=s.toLowerCase()),"<"+l.join("-")+">")}(o);if(!s)return!1;var c=st.findKey(l,s);return"function"==typeof c&&W.signal(l,"vim-keypress",s),c}}W.defineOption("vimMode",!1,function(o,l,s){l&&"vim"!=o.getOption("keyMap")?o.setOption("keyMap","vim"):!l&&s!=W.Init&&/^vim/.test(o.getOption("keyMap"))&&o.setOption("keyMap","default")});var $={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A",CapsLock:""},re={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"};function _(o){var l=o.state.vim;return l.onPasteFn||(l.onPasteFn=function(){l.insertMode||(o.setCursor(qe(o.getCursor(),0,1)),Fr.enterInsertMode(o,{},l))}),l.onPasteFn}var m=/[\d]/,L=[W.isWordChar,function(o){return o&&!W.isWordChar(o)&&!/\s/.test(o)}],M=[function(o){return/\S/.test(o)}];function P(o,l){for(var s=[],c=o;c<o+l;c++)s.push(String.fromCharCode(c));return s}var R,b=P(65,26),z=P(97,26),ne=P(48,10),Y=[].concat(b,z,ne,["<",">"]),ce=[].concat(b,z,ne,["-",'"',".",":","_","/"]);try{R=new RegExp("^[\\p{Lu}]$","u")}catch{R=/^[A-Z]$/}function me(o,l){return l>=o.firstLine()&&l<=o.lastLine()}function x(o){return/^[a-z]$/.test(o)}function ve(o){return-1!="()[]{}".indexOf(o)}function fe(o){return m.test(o)}function Se(o){return R.test(o)}function Pe(o){return/^\s*$/.test(o)}function Ue(o){return-1!=".?!".indexOf(o)}function Ge(o,l){for(var s=0;s<l.length;s++)if(l[s]==o)return!0;return!1}var N={};function k(o,l,s,c,p){if(void 0===l&&!p)throw Error("defaultValue is required unless callback is provided");if(s||(s="string"),N[o]={type:s,defaultValue:l,callback:p},c)for(var g=0;g<c.length;g++)N[c[g]]=N[o];l&&Oe(o,l)}function Oe(o,l,s,c){var p=N[o],g=(c=c||{}).scope;if(!p)return new Error("Unknown option: "+o);if("boolean"==p.type){if(l&&!0!==l)return new Error("Invalid argument: "+o+"="+l);!1!==l&&(l=!0)}p.callback?("local"!==g&&p.callback(l,void 0),"global"!==g&&s&&p.callback(l,s)):("local"!==g&&(p.value="boolean"==p.type?!!l:l),"global"!==g&&s&&(s.state.vim.options[o]={value:l}))}function F(o,l,s){var c=N[o],p=(s=s||{}).scope;if(!c)return new Error("Unknown option: "+o);if(c.callback){var g=l&&c.callback(void 0,l);return"global"!==p&&void 0!==g?g:"local"!==p?c.callback():void 0}return((g="global"!==p&&l&&l.state.vim.options[o])||"local"!==p&&c||{}).value}k("filetype",void 0,"string",["ft"],function(o,l){if(void 0!==l){var s;if(void 0===o)return"null"==(s=l.getOption("mode"))?"":s;l.setOption("mode",s=""==o?"null":o)}});var Ce,Z=function(){var o=100,l=-1,s=0,c=0,p=new Array(o);function S(A,G){(l+=G)>s?l=s:l<c&&(l=c);var j=p[(o+l)%o];if(j&&!j.find()){var xe,ue=G>0?1:-1,pe=A.getCursor();do{if((j=p[(o+(l+=ue))%o])&&(xe=j.find())&&!Ot(pe,xe))break}while(l<s&&l>c)}return j}return{cachedCursor:void 0,add:function g(A,G,j){var xe=p[l%o];function pe(Ne){var Le=++l%o,Ve=p[Le];Ve&&Ve.clear(),p[Le]=A.setBookmark(Ne)}if(xe){var se=xe.find();se&&!Ot(se,G)&&pe(G)}else pe(G);pe(j),s=l,(c=l-o+1)<0&&(c=0)},find:function O(A,G){var j=l,ue=S(A,G);return l=j,ue&&ue.find()},move:S}},te=function(o){return o?{changes:o.changes,expectCursorActivityForChange:o.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function ye(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=te()}function Ee(o){return o.state.vim||(o.state.vim={inputState:new Xt,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),o.state.vim}function Ke(){for(var o in Ce={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:Z(),macroModeState:new ye,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new Vt({}),searchHistoryController:new pr,exCommandHistoryController:new pr},N){var l=N[o];l.value=l.defaultValue}}ye.prototype={exitMacroRecordMode:function(){var o=Ce.macroModeState;o.onRecordingDone&&o.onRecordingDone(),o.onRecordingDone=void 0,o.isRecording=!1},enterMacroRecordMode:function(o,l){var s=Ce.registerController.getRegister(l);if(s){if(s.clear(),this.latestRegister=l,o.openDialog){var c=ct("span",{class:"cm-vim-message"},"recording @"+l);this.onRecordingDone=o.openDialog(c,null,{bottom:!0})}this.isRecording=!0}}};var ze,st={enterVimMode:X,buildKeyMap:function(){},getRegisterController:function(){return Ce.registerController},resetVimGlobalState_:Ke,getVimGlobalState_:function(){return Ce},maybeInitVimState_:Ee,suppressErrorLogging:!1,InsertModeKey:un,map:function(o,l,s){vr.map(o,l,s)},unmap:function(o,l){return vr.unmap(o,l)},noremap:function(o,l,s){function c(xe){return xe?[xe]:["normal","insert","visual"]}for(var p=c(s),g=I.length,O=g-ie;O<g&&p.length;O++){var A=I[O];if(!(A.keys!=l||s&&A.context&&A.context!==s||"ex"===A.type.substr(0,2)||"key"===A.type.substr(0,3))){var G={};for(var j in A)G[j]=A[j];G.keys=o,s&&!G.context&&(G.context=s),this._mapCommand(G);var ue=c(A.context);p=p.filter(function(xe){return-1===ue.indexOf(xe)})}}},mapclear:function(o){var l=I.length,s=ie,c=I.slice(0,l-s);if(I=I.slice(l-s),o)for(var p=c.length-1;p>=0;p--){var g=c[p];if(o!==g.context)if(g.context)this._mapCommand(g);else{var S=["normal","insert","visual"];for(var O in S)if(S[O]!==o){var A={};for(var G in g)A[G]=g[G];A.context=S[O],this._mapCommand(A)}}}},setOption:Oe,getOption:F,defineOption:k,defineEx:function(o,l,s){if(l){if(0!==o.indexOf(l))throw new Error('(Vim.defineEx) "'+l+'" is not a prefix of "'+o+'", command not registered')}else l=o;Ri[o]=s,vr.commandMap_[l]={name:o,shortName:l,type:"api"}},handleKey:function(o,l,s){var c=this.findKey(o,l,s);if("function"==typeof c)return c()},multiSelectHandleKey:function po(o,l,s){var c=!1,p=st.maybeInitVimState_(o),g=p.visualBlock||p.wasInVisualBlock,S=o.isInMultiSelectMode();if(p.wasInVisualBlock&&!S?p.wasInVisualBlock=!1:S&&p.visualBlock&&(p.wasInVisualBlock=!0),"<Esc>"!=l||p.insertMode||p.visualMode||!S||"<Esc>"!=p.status)if(g||!S||o.inVirtualSelectionMode)c=st.handleKey(o,l,s);else{var O=fn(p);o.operation(function(){o.curOp.isVimOp=!0,o.forEachSelection(function(){var A=o.getCursor("head"),G=o.getCursor("anchor"),j=He(A,G)?0:-1,ue=He(A,G)?-1:0;A=qe(A,0,j),G=qe(G,0,ue),o.state.vim.sel.head=A,o.state.vim.sel.anchor=G,c=st.handleKey(o,l,s),o.virtualSelection&&(o.state.vim=fn(O))}),o.curOp.cursorActivity&&!c&&(o.curOp.cursorActivity=!1),o.state.vim=p},!0)}else pt(o);return c&&!p.visualMode&&!p.insert&&p.visualMode!=o.somethingSelected()&&Ln(o,p),c},findKey:function(o,l,s){var G,c=Ee(o);function p(){var j=Ce.macroModeState;if(j.isRecording){if("q"==l)return j.exitMacroRecordMode(),pt(o),!0;"mapping"!=s&&function oi(o,l){if(!o.isPlaying){var c=Ce.registerController.getRegister(o.latestRegister);c&&c.pushText(l)}}(j,l)}}function g(){if("<Esc>"==l){if(c.visualMode)Ut(o);else{if(!c.insertMode)return;Sn(o)}return pt(o),!0}}return!1===(G=c.insertMode?function O(){if(g())return!0;for(var j=c.inputState.keyBuffer=c.inputState.keyBuffer+l,ue=1==l.length,xe=It.matchCommand(j,I,c.inputState,"insert");j.length>1&&"full"!=xe.type;){j=c.inputState.keyBuffer=j.slice(1);var pe=It.matchCommand(j,I,c.inputState,"insert");"none"!=pe.type&&(xe=pe)}if("none"==xe.type)return pt(o),!1;if("partial"==xe.type)return ze&&window.clearTimeout(ze),ze=window.setTimeout(function(){c.insertMode&&c.inputState.keyBuffer&&pt(o)},F("insertModeEscKeysTimeout")),!ue;if(ze&&window.clearTimeout(ze),ue){for(var se=o.listSelections(),Ne=0;Ne<se.length;Ne++){var Le=se[Ne].head;o.replaceRange("",qe(Le,0,-(j.length-1)),Le,"+input")}Ce.macroModeState.lastInsertModeChanges.changes.pop()}return pt(o),xe.command}():function A(){if(p()||g())return!0;var j=c.inputState.keyBuffer=c.inputState.keyBuffer+l;if(/^[1-9]\d*$/.test(j))return!0;var ue=/^(\d*)(.*)$/.exec(j);if(!ue)return pt(o),!1;var xe=c.visualMode?"visual":"normal",pe=ue[2]||ue[1];c.inputState.operatorShortcut&&c.inputState.operatorShortcut.slice(-1)==pe&&(pe=c.inputState.operatorShortcut);var se=It.matchCommand(pe,I,c.inputState,xe);return"none"==se.type?(pt(o),!1):"partial"==se.type||("clear"==se.type?(pt(o),!0):(c.inputState.keyBuffer="",(ue=/^(\d*)(.*)$/.exec(j))[1]&&"0"!=ue[1]&&c.inputState.pushRepeatDigit(ue[1]),se.command))}())?c.insertMode||1!==l.length?void 0:function(){return!0}:!0===G?function(){return!0}:function(){return o.operation(function(){o.curOp.isVimOp=!0;try{"keyToKey"==G.type?function S(j){for(var ue;j;)ue=/<\w+-.+?>|<\w+>|./.exec(j),j=j.substring(ue.index+(l=ue[0]).length),st.handleKey(o,l,"mapping")}(G.toKeys):It.processCommand(o,c,G)}catch(j){throw o.state.vim=void 0,Ee(o),st.suppressErrorLogging||console.log(j),j}return!0})}},handleEx:function(o,l){vr.processCommand(o,l)},defineMotion:function sr(o,l){St[o]=l},defineAction:function Ir(o,l){Fr[o]=l},defineOperator:function xn(o,l){br[o]=l},mapCommand:function fo(o,l,s,c,p){var g={keys:o,type:l};for(var S in g[l]=s,g[l+"Args"]=c,p)g[S]=p[S];Hi(g)},_mapCommand:Hi,defineRegister:function xt(o,l){var s=Ce.registerController.registers;if(!o||1!=o.length)throw Error("Register name must be 1 character");if(s[o])throw Error("Register already defined "+o);s[o]=l,ce.push(o)},exitVisualMode:Ut,exitInsertMode:Sn};function Xt(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}function pt(o,l){o.state.vim.inputState=new Xt,W.signal(o,"vim-command-done",l)}function Ze(o,l,s){this.clear(),this.keyBuffer=[o||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!l,this.blockwise=!!s}function Vt(o){this.registers=o,this.unnamedRegister=o['"']=new Ze,o["."]=new Ze,o[":"]=new Ze,o["/"]=new Ze}function pr(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}Xt.prototype.pushRepeatDigit=function(o){this.operator?this.motionRepeat=this.motionRepeat.concat(o):this.prefixRepeat=this.prefixRepeat.concat(o)},Xt.prototype.getRepeat=function(){var o=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(o=1,this.prefixRepeat.length>0&&(o*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(o*=parseInt(this.motionRepeat.join(""),10))),o},Ze.prototype={setText:function(o,l,s){this.keyBuffer=[o||""],this.linewise=!!l,this.blockwise=!!s},pushText:function(o,l){l&&(this.linewise||this.keyBuffer.push("\n"),this.linewise=!0),this.keyBuffer.push(o)},pushInsertModeChanges:function(o){this.insertModeChanges.push(te(o))},pushSearchQuery:function(o){this.searchQueries.push(o)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}},Vt.prototype={pushText:function(o,l,s,c,p){if("_"!==o){c&&"\n"!==s.charAt(s.length-1)&&(s+="\n");var g=this.isValidRegister(o)?this.getRegister(o):null;if(!g){switch(l){case"yank":this.registers[0]=new Ze(s,c,p);break;case"delete":case"change":-1==s.indexOf("\n")?this.registers["-"]=new Ze(s,c):(this.shiftNumericRegisters_(),this.registers[1]=new Ze(s,c))}return void this.unnamedRegister.setText(s,c,p)}Se(o)?g.pushText(s,c):g.setText(s,c,p),this.unnamedRegister.setText(g.toString(),c)}},getRegister:function(o){return this.isValidRegister(o)?(o=o.toLowerCase(),this.registers[o]||(this.registers[o]=new Ze),this.registers[o]):this.unnamedRegister},isValidRegister:function(o){return o&&Ge(o,ce)},shiftNumericRegisters_:function(){for(var o=9;o>=2;o--)this.registers[o]=this.getRegister(""+(o-1))}},pr.prototype={nextMatch:function(o,l){var s=this.historyBuffer,c=l?-1:1;null===this.initialPrefix&&(this.initialPrefix=o);for(var p=this.iterator+c;l?p>=0:p<s.length;p+=c)for(var g=s[p],S=0;S<=g.length;S++)if(this.initialPrefix==g.substring(0,S))return this.iterator=p,g;return p>=s.length?(this.iterator=s.length,this.initialPrefix):p<0?o:void 0},pushInput:function(o){var l=this.historyBuffer.indexOf(o);l>-1&&this.historyBuffer.splice(l,1),o.length&&this.historyBuffer.push(o)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var It={matchCommand:function(o,l,s,c){var p=function Tt(o,l,s,c){for(var p,g=[],S=[],O=0;O<l.length;O++){var A=l[O];"insert"==s&&"insert"!=A.context||A.context&&A.context!=s||c.operator&&"action"==A.type||!(p=Gr(o,A.keys))||("partial"==p&&g.push(A),"full"==p&&S.push(A))}return{partial:g.length&&g,full:S.length&&S}}(o,l,c,s);if(!p.full&&!p.partial)return{type:"none"};if(!p.full&&p.partial)return{type:"partial"};for(var g,S=0;S<p.full.length;S++)g||(g=p.full[S]);if("<character>"==g.keys.slice(-11)){var A=function _t(o){var l=/^.*(<[^>]+>)$/.exec(o),s=l?l[1]:o.slice(-1);if(s.length>1)switch(s){case"<CR>":s="\n";break;case"<Space>":s=" ";break;default:s=""}return s}(o);if(!A||A.length>1)return{type:"clear"};s.selectedCharacter=A}return{type:"full",command:g}},processCommand:function(o,l,s){switch(l.inputState.repeatOverride=s.repeatOverride,s.type){case"motion":this.processMotion(o,l,s);break;case"operator":this.processOperator(o,l,s);break;case"operatorMotion":this.processOperatorMotion(o,l,s);break;case"action":this.processAction(o,l,s);break;case"search":this.processSearch(o,l,s);break;case"ex":case"keyToEx":this.processEx(o,l,s)}},processMotion:function(o,l,s){l.inputState.motion=s.motion,l.inputState.motionArgs=Nt(s.motionArgs),this.evalInput(o,l)},processOperator:function(o,l,s){var c=l.inputState;if(c.operator){if(c.operator==s.operator)return c.motion="expandToLine",c.motionArgs={linewise:!0},void this.evalInput(o,l);pt(o)}c.operator=s.operator,c.operatorArgs=Nt(s.operatorArgs),s.keys.length>1&&(c.operatorShortcut=s.keys),s.exitVisualBlock&&(l.visualBlock=!1,Nr(o)),l.visualMode&&this.evalInput(o,l)},processOperatorMotion:function(o,l,s){var c=l.visualMode,p=Nt(s.operatorMotionArgs);p&&c&&p.visualLine&&(l.visualLine=!0),this.processOperator(o,l,s),c||this.processMotion(o,l,s)},processAction:function(o,l,s){var c=l.inputState,p=c.getRepeat(),g=!!p,S=Nt(s.actionArgs)||{};c.selectedCharacter&&(S.selectedCharacter=c.selectedCharacter),s.operator&&this.processOperator(o,l,s),s.motion&&this.processMotion(o,l,s),(s.motion||s.operator)&&this.evalInput(o,l),S.repeat=p||1,S.repeatIsExplicit=g,S.registerName=c.registerName,pt(o),l.lastMotion=null,s.isEdit&&this.recordLastEdit(l,c,s),Fr[s.action](o,S,l)},processSearch:function(o,l,s){if(o.getSearchCursor){var c=s.searchArgs.forward,p=s.searchArgs.wholeWordOnly;we(o).setReversed(!c);var g=c?"/":"?",S=we(o).getQuery(),O=o.getScrollInfo();switch(s.searchArgs.querySrc){case"prompt":var xe=Ce.macroModeState;xe.isPlaying?A(Ne=xe.replaySearchQueries.shift(),!0,!1):qr(o,{onClose:function G(Le){o.scrollTo(O.left,O.top),A(Le,!0,!0);var Ve=Ce.macroModeState;Ve.isRecording&&function ho(o,l){if(!o.isPlaying){var c=Ce.registerController.getRegister(o.latestRegister);c&&c.pushSearchQuery&&c.pushSearchQuery(l)}}(Ve,Le)},prefix:g,desc:"(JavaScript regexp)",onKeyUp:function j(Le,Ve,et){var Wt,kt,$e=W.keyName(Le);"Up"==$e||"Down"==$e?(Wt=Le.target?Le.target.selectionEnd:0,et(Ve=Ce.searchHistoryController.nextMatch(Ve,"Up"==$e)||""),Wt&&Le.target&&(Le.target.selectionEnd=Le.target.selectionStart=Math.min(Wt,Le.target.value.length))):"Left"!=$e&&"Right"!=$e&&"Ctrl"!=$e&&"Alt"!=$e&&"Shift"!=$e&&Ce.searchHistoryController.reset();try{kt=en(o,Ve,!0,!0)}catch{}kt?o.scrollIntoView(ri(o,!c,kt),30):(Pn(o),o.scrollTo(O.left,O.top))},onKeyDown:function ue(Le,Ve,et){var $e=W.keyName(Le);"Esc"==$e||"Ctrl-C"==$e||"Ctrl-["==$e||"Backspace"==$e&&""==Ve?(Ce.searchHistoryController.pushInput(Ve),Ce.searchHistoryController.reset(),en(o,S),Pn(o),o.scrollTo(O.left,O.top),W.e_stop(Le),pt(o),et(),o.focus()):"Up"==$e||"Down"==$e?W.e_stop(Le):"Ctrl-U"==$e&&(W.e_stop(Le),et(""))}});break;case"wordUnderCursor":var pe=nr(o,!1,0,!1,!0),se=!0;if(pe||(pe=nr(o,!1,0,!1,!1),se=!1),!pe)return;var Ne=o.getLine(pe.start.line).substring(pe.start.ch,pe.end.ch);Ne=se&&p?"\\b"+Ne+"\\b":function At(o){return o.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}(Ne),Ce.jumpList.cachedCursor=o.getCursor(),o.setCursor(pe.start),A(Ne,!0,!1)}}function A(Le,Ve,et){Ce.searchHistoryController.pushInput(Le),Ce.searchHistoryController.reset();try{en(o,Le,Ve,et)}catch{return Xe(o,"Invalid regex: "+Le),void pt(o)}It.processMotion(o,l,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:s.searchArgs.toJumplist}})}},processEx:function(o,l,s){function c(g){Ce.exCommandHistoryController.pushInput(g),Ce.exCommandHistoryController.reset(),vr.processCommand(o,g),pt(o)}function p(g,S,O){var j,A=W.keyName(g);("Esc"==A||"Ctrl-C"==A||"Ctrl-["==A||"Backspace"==A&&""==S)&&(Ce.exCommandHistoryController.pushInput(S),Ce.exCommandHistoryController.reset(),W.e_stop(g),pt(o),O(),o.focus()),"Up"==A||"Down"==A?(W.e_stop(g),j=g.target?g.target.selectionEnd:0,O(S=Ce.exCommandHistoryController.nextMatch(S,"Up"==A)||""),j&&g.target&&(g.target.selectionEnd=g.target.selectionStart=Math.min(j,g.target.value.length))):"Ctrl-U"==A?(W.e_stop(g),O("")):"Left"!=A&&"Right"!=A&&"Ctrl"!=A&&"Alt"!=A&&"Shift"!=A&&Ce.exCommandHistoryController.reset()}"keyToEx"==s.type?vr.processCommand(o,s.exArgs.input):qr(o,l.visualMode?{onClose:c,prefix:":",value:"'<,'>",onKeyDown:p,selectValueOnOpen:!1}:{onClose:c,prefix:":",onKeyDown:p})},evalInput:function(o,l){var pe,se,Ne,s=l.inputState,c=s.motion,p=s.motionArgs||{},g=s.operator,S=s.operatorArgs||{},O=s.registerName,A=l.sel,G=Me(l.visualMode?Lt(o,A.head):o.getCursor("head")),j=Me(l.visualMode?Lt(o,A.anchor):o.getCursor("anchor")),ue=Me(G),xe=Me(j);if(g&&this.recordLastEdit(l,s),(Ne=void 0!==s.repeatOverride?s.repeatOverride:s.getRepeat())>0&&p.explicitRepeat?p.repeatIsExplicit=!0:(p.noRepeat||!p.explicitRepeat&&0===Ne)&&(Ne=1,p.repeatIsExplicit=!1),s.selectedCharacter&&(p.selectedCharacter=S.selectedCharacter=s.selectedCharacter),p.repeat=Ne,pt(o),c){var Le=St[c](o,G,p,l,s);if(l.lastMotion=St[c],!Le)return;if(p.toJumplist){var Ve=Ce.jumpList,et=Ve.cachedCursor;et?(Sr(o,et,Le),delete Ve.cachedCursor):Sr(o,G,Le)}Le instanceof Array?(se=Le[0],pe=Le[1]):pe=Le,pe||(pe=Me(G)),l.visualMode?(l.visualBlock&&pe.ch===1/0||(pe=Lt(o,pe)),se&&(se=Lt(o,se)),A.anchor=se=se||xe,A.head=pe,Nr(o),lt(o,l,"<",He(se,pe)?se:pe),lt(o,l,">",He(se,pe)?pe:se)):g||(pe=Lt(o,pe),o.setCursor(pe.line,pe.ch))}if(g){if(S.lastSel){se=xe;var $e=S.lastSel,ut=Math.abs($e.head.line-$e.anchor.line),Wt=Math.abs($e.head.ch-$e.anchor.ch);pe=$e.visualLine?new C(xe.line+ut,xe.ch):$e.visualBlock?new C(xe.line+ut,xe.ch+Wt):$e.head.line==$e.anchor.line?new C(xe.line,xe.ch+Wt):new C(xe.line+ut,xe.ch),l.visualMode=!0,l.visualLine=$e.visualLine,l.visualBlock=$e.visualBlock,A=l.sel={anchor:se,head:pe},Nr(o)}else l.visualMode&&(S.lastSel={anchor:Me(A.anchor),head:Me(A.head),visualBlock:l.visualBlock,visualLine:l.visualLine});var kt,Gt,ht,ot,Ct;if(l.visualMode){if(kt=at(A.head,A.anchor),Gt=ft(A.head,A.anchor),ht=l.visualLine||S.linewise,Ct=$t(o,{anchor:kt,head:Gt},ot=l.visualBlock?"block":ht?"line":"char"),ht){var cr=Ct.ranges;if("block"==ot)for(var jt=0;jt<cr.length;jt++)cr[jt].head.ch=rt(o,cr[jt].head.line);else"line"==ot&&(cr[0].head=new C(cr[0].head.line+1,0))}}else{if(kt=Me(se||xe),He(Gt=Me(pe||ue),kt)){var tn=kt;kt=Gt,Gt=tn}(ht=p.linewise||S.linewise)?function bn(o,l,s){l.ch=0,s.ch=0,s.line++}(0,kt,Gt):p.forward&&function ln(o,l,s){var c=o.getRange(l,s);if(/\n\s*$/.test(c)){var p=c.split("\n");p.pop();for(var g=p.pop();p.length>0&&g&&Pe(g);g=p.pop())s.line--,s.ch=0;g?(s.line--,s.ch=rt(o,s.line)):s.ch=0}}(o,kt,Gt),Ct=$t(o,{anchor:kt,head:Gt},ot="char",!p.inclusive||ht)}o.setSelections(Ct.ranges,Ct.primary),l.lastMotion=null,S.repeat=Ne,S.registerName=O,S.linewise=ht;var Et=br[g](o,S,Ct.ranges,xe,pe);l.visualMode&&Ut(o,null!=Et),Et&&o.setCursor(Et)}},recordLastEdit:function(o,l,s){var c=Ce.macroModeState;c.isPlaying||(o.lastEditInputState=l,o.lastEditActionCommand=s,c.lastInsertModeChanges.changes=[],c.lastInsertModeChanges.expectCursorActivityForChange=!1,c.lastInsertModeChanges.visualBlock=o.visualBlock?o.sel.head.line-o.sel.anchor.line:0)}},St={moveToTopLine:function(o,l,s){var c=ni(o).top+s.repeat-1;return new C(c,Mt(o.getLine(c)))},moveToMiddleLine:function(o){var l=ni(o),s=Math.floor(.5*(l.top+l.bottom));return new C(s,Mt(o.getLine(s)))},moveToBottomLine:function(o,l,s){var c=ni(o).bottom-s.repeat+1;return new C(c,Mt(o.getLine(c)))},expandToLine:function(o,l,s){return new C(l.line+s.repeat-1,1/0)},findNext:function(o,l,s){var c=we(o),p=c.getQuery();if(p){var g=!s.forward;return g=c.isReversed()?!g:g,ti(o,p),ri(o,g,p,s.repeat)}},findAndSelectNextInclusive:function(o,l,s,c,p){var g=we(o),S=g.getQuery();if(S){var O=!s.forward,A=function Bi(o,l,s,c,p){return void 0===c&&(c=1),o.operation(function(){var g=o.getCursor(),S=o.getSearchCursor(s,g),O=S.find(!l);!p.visualMode&&O&&Ot(S.from(),g)&&S.find(!l);for(var A=0;A<c;A++)if(!(O=S.find(l))&&!(S=o.getSearchCursor(s,l?new C(o.lastLine()):new C(o.firstLine(),0))).find(l))return;return[S.from(),S.to()]})}(o,O=g.isReversed()?!O:O,S,s.repeat,c);if(A){if(p.operator)return A;var G=A[0],j=new C(A[1].line,A[1].ch-1);if(c.visualMode){(c.visualLine||c.visualBlock)&&(c.visualLine=!1,c.visualBlock=!1,W.signal(o,"vim-mode-change",{mode:"visual",subMode:""}));var ue=c.sel.anchor;if(ue)return g.isReversed()?s.forward?[ue,G]:[ue,j]:s.forward?[ue,j]:[ue,G]}else c.visualMode=!0,c.visualLine=!1,c.visualBlock=!1,W.signal(o,"vim-mode-change",{mode:"visual",subMode:""});return O?[j,G]:[G,j]}}},goToMark:function(o,l,s,c){var p=ii(o,c,s.selectedCharacter);return p?s.linewise?{line:p.line,ch:Mt(o.getLine(p.line))}:p:null},moveToOtherHighlightedEnd:function(o,l,s,c){if(c.visualBlock&&s.sameLine){var p=c.sel;return[Lt(o,new C(p.anchor.line,p.head.ch)),Lt(o,new C(p.head.line,p.anchor.ch))]}return[c.sel.head,c.sel.anchor]},jumpToMark:function(o,l,s,c){for(var p=l,g=0;g<s.repeat;g++){var S=p;for(var O in c.marks)if(x(O)){var A=c.marks[O].find();if(!((s.forward?He(A,S):He(S,A))||s.linewise&&A.line==S.line)){var j=Ot(S,p),ue=s.forward?Cr(S,A,p):Cr(p,A,S);(j||ue)&&(p=A)}}}return s.linewise&&(p=new C(p.line,Mt(o.getLine(p.line)))),p},moveByCharacters:function(o,l,s){var p=s.repeat;return new C(l.line,s.forward?l.ch+p:l.ch-p)},moveByLines:function(o,l,s,c){var p=l,g=p.ch;switch(c.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:g=c.lastHPos;break;default:c.lastHPos=g}var S=s.repeat+(s.repeatOffset||0),O=s.forward?p.line+S:p.line-S,A=o.firstLine(),G=o.lastLine(),j=o.findPosV(p,s.forward?S:-S,"line",c.lastHSPos);return(s.forward?j.line>O:j.line<O)&&(O=j.line,g=j.ch),O<A&&p.line==A?this.moveToStartOfLine(o,l,s,c):O>G&&p.line==G?zt(o,l,s,c,!0):(s.toFirstChar&&(g=Mt(o.getLine(O)),c.lastHPos=g),c.lastHSPos=o.charCoords(new C(O,g),"div").left,new C(O,g))},moveByDisplayLines:function(o,l,s,c){var p=l;switch(c.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:c.lastHSPos=o.charCoords(p,"div").left}var g=s.repeat;if((S=o.findPosV(p,s.forward?g:-g,"line",c.lastHSPos)).hitSide)if(s.forward)var O=o.charCoords(S,"div"),S=o.coordsChar({top:O.top+8,left:c.lastHSPos},"div");else{var G=o.charCoords(new C(o.firstLine(),0),"div");G.left=c.lastHSPos,S=o.coordsChar(G,"div")}return c.lastHPos=S.ch,S},moveByPage:function(o,l,s){var p=s.repeat;return o.findPosV(l,s.forward?p:-p,"page")},moveByParagraph:function(o,l,s){return Tr(o,l,s.repeat,s.forward?1:-1)},moveBySentence:function(o,l,s){return function Pt(o,l,s,c){function p(A,G){if(G.pos+G.dir<0||G.pos+G.dir>=G.line.length){if(G.ln+=G.dir,!me(A,G.ln))return G.line=null,G.ln=null,void(G.pos=null);G.line=A.getLine(G.ln),G.pos=G.dir>0?0:G.line.length-1}else G.pos+=G.dir}function g(A,G,j,ue){var xe=""===(Le=A.getLine(G)),pe={line:Le,ln:G,pos:j,dir:ue},se={ln:pe.ln,pos:pe.pos},Ne=""===pe.line;for(p(A,pe);null!==pe.line;){if(se.ln=pe.ln,se.pos=pe.pos,""===pe.line&&!Ne)return{ln:pe.ln,pos:pe.pos};if(xe&&""!==pe.line&&!Pe(pe.line[pe.pos]))return{ln:pe.ln,pos:pe.pos};Ue(pe.line[pe.pos])&&!xe&&(pe.pos===pe.line.length-1||Pe(pe.line[pe.pos+1]))&&(xe=!0),p(A,pe)}var Le=A.getLine(se.ln);se.pos=0;for(var Ve=Le.length-1;Ve>=0;--Ve)if(!Pe(Le[Ve])){se.pos=Ve;break}return se}function S(A,G,j,ue){var xe={line:Ne=A.getLine(G),ln:G,pos:j,dir:ue},pe={ln:xe.ln,pos:null},se=""===xe.line;for(p(A,xe);null!==xe.line;){if(""===xe.line&&!se)return null!==pe.pos?pe:{ln:xe.ln,pos:xe.pos};if(Ue(xe.line[xe.pos])&&null!==pe.pos&&(xe.ln!==pe.ln||xe.pos+1!==pe.pos))return pe;""!==xe.line&&!Pe(xe.line[xe.pos])&&(se=!1,pe={ln:xe.ln,pos:xe.pos}),p(A,xe)}var Ne=A.getLine(pe.ln);pe.pos=0;for(var Le=0;Le<Ne.length;++Le)if(!Pe(Ne[Le])){pe.pos=Le;break}return pe}for(var O={ln:l.line,pos:l.ch};s>0;)O=c<0?S(o,O.ln,O.pos,c):g(o,O.ln,O.pos,c),s--;return new C(O.ln,O.pos)}(o,l,s.repeat,s.forward?1:-1)},moveByScroll:function(o,l,s,c){var g,p=o.getScrollInfo(),S=s.repeat;S||(S=p.clientHeight/(2*o.defaultTextHeight()));var O=o.charCoords(l,"local");if(s.repeat=S,!(g=St.moveByDisplayLines(o,l,s,c)))return null;var A=o.charCoords(g,"local");return o.scrollTo(null,p.top+A.top-O.top),g},moveByWords:function(o,l,s){return function _r(o,l,s,c,p,g){var S=Me(l),O=[];(c&&!p||!c&&p)&&s++;for(var A=!(c&&p),G=0;G<s;G++){var j=Bt(o,l,c,g,A);if(!j){var ue=rt(o,o.lastLine());O.push(c?{line:o.lastLine(),from:ue,to:ue}:{line:0,from:0,to:0});break}O.push(j),l=new C(j.line,c?j.to-1:j.from)}var xe=O.length!=s,pe=O[0],se=O.pop();return c&&!p?(!xe&&(pe.from!=S.ch||pe.line!=S.line)&&(se=O.pop()),new C(se.line,se.from)):c&&p?new C(se.line,se.to-1):!c&&p?(!xe&&(pe.to!=S.ch||pe.line!=S.line)&&(se=O.pop()),new C(se.line,se.to)):new C(se.line,se.from)}(o,l,s.repeat,!!s.forward,!!s.wordEnd,!!s.bigWord)},moveTillCharacter:function(o,l,s){var p=Br(o,s.repeat,s.forward,s.selectedCharacter),g=s.forward?-1:1;return Lr(g,s),p?(p.ch+=g,p):null},moveToCharacter:function(o,l,s){var c=s.repeat;return Lr(0,s),Br(o,c,s.forward,s.selectedCharacter)||l},moveToSymbol:function(o,l,s){return function ir(o,l,s,c){var p=Me(o.getCursor()),g=s?1:-1,S=s?o.lineCount():-1,O=p.ch,A=p.line,G=o.getLine(A),j={lineText:G,nextCh:G.charAt(O),lastCh:null,index:O,symb:c,reverseSymb:(s?{")":"(","}":"{"}:{"(":")","{":"}"})[c],forward:s,depth:0,curMoveThrough:!1},ue=Cn[c];if(!ue)return p;var xe=fr[ue].init,pe=fr[ue].isComplete;for(xe&&xe(j);A!==S&&l;){if(j.index+=g,j.nextCh=j.lineText.charAt(j.index),!j.nextCh){if(j.lineText=o.getLine(A+=g)||"",g>0)j.index=0;else{var se=j.lineText.length;j.index=se>0?se-1:0}j.nextCh=j.lineText.charAt(j.index)}pe(j)&&(p.line=A,p.ch=j.index,l--)}return j.nextCh||j.curMoveThrough?new C(A,j.index):p}(o,s.repeat,s.forward,s.selectedCharacter)||l},moveToColumn:function(o,l,s,c){var p=s.repeat;return c.lastHPos=p-1,c.lastHSPos=o.charCoords(l,"div").left,function Dr(o,l){var s=o.getCursor().line;return Lt(o,new C(s,l-1))}(o,p)},moveToEol:function(o,l,s,c){return zt(o,l,s,c,!1)},moveToFirstNonWhiteSpaceCharacter:function(o,l){return new C(l.line,Mt(o.getLine(l.line)))},moveToMatchedSymbol:function(o,l){for(var S,s=l,c=s.line,p=s.ch,g=o.getLine(c);p<g.length;p++)if((S=g.charAt(p))&&ve(S)){var O=o.getTokenTypeAt(new C(c,p+1));if("string"!==O&&"comment"!==O)break}if(p<g.length){var A="<"===p||">"===p?/[(){}[\]<>]/:/[(){}[\]]/;return o.findMatchingBracket(new C(c,p),{bracketRegex:A}).to}return s},moveToStartOfLine:function(o,l){return new C(l.line,0)},moveToLineOrEdgeOfDocument:function(o,l,s){var c=s.forward?o.lastLine():o.firstLine();return s.repeatIsExplicit&&(c=s.repeat-o.getOption("firstLineNumber")),new C(c,Mt(o.getLine(c)))},moveToStartOfDisplayLine:function(o){return o.execCommand("goLineLeft"),o.getCursor()},moveToEndOfDisplayLine:function(o){o.execCommand("goLineRight");var l=o.getCursor();return"before"==l.sticky&&l.ch--,l},textObjectManipulation:function(o,l,s,c){var S=s.selectedCharacter;"b"==S?S="(":"B"==S&&(S="{");var A,O=!s.textObjectInner;if({"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"}[S])A=function ge(o,l,s,c){var g,S,p=l,O={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[s],A={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[s],j=o.getLine(p.line).charAt(p.ch)===A?1:0;if(g=o.scanForBracket(new C(p.line,p.ch+j),-1,void 0,{bracketRegex:O}),S=o.scanForBracket(new C(p.line,p.ch+j),1,void 0,{bracketRegex:O}),!g||!S)return{start:p,end:p};if((g=g.pos).line==(S=S.pos).line&&g.ch>S.ch||g.line>S.line){var ue=g;g=S,S=ue}return c?S.ch+=1:g.ch+=1,{start:g,end:S}}(o,l,S,O);else if({"'":!0,'"':!0,"`":!0}[S])A=function U(o,l,s,c){var O,A,G,j,p=Me(l),S=o.getLine(p.line).split(""),ue=S.indexOf(s);if(p.ch<ue?p.ch=ue:ue<p.ch&&S[p.ch]==s&&(A=p.ch,--p.ch),S[p.ch]!=s||A)for(G=p.ch;G>-1&&!O;G--)S[G]==s&&(O=G+1);else O=p.ch+1;if(O&&!A)for(G=O,j=S.length;G<j&&!A;G++)S[G]==s&&(A=G);return O&&A?(c&&(--O,++A),{start:new C(p.line,O),end:new C(p.line,A)}):{start:p,end:p}}(o,l,S,O);else if("W"===S)A=nr(o,O,0,!0);else if("w"===S)A=nr(o,O,0,!1);else if("p"===S)if(A=Tr(o,l,s.repeat,0,O),s.linewise=!0,c.visualMode)c.visualLine||(c.visualLine=!0);else{var G=c.inputState.operatorArgs;G&&(G.linewise=!0),A.end.line--}else if("t"===S)A=function er(o,l,s){var c=l;if(!W.findMatchingTag||!W.findEnclosingTag)return{start:c,end:c};var p=W.findMatchingTag(o,l)||W.findEnclosingTag(o,l);return p&&p.open&&p.close?s?{start:p.open.from,end:p.close.to}:{start:p.open.to,end:p.close.from}:{start:c,end:c}}(o,l,O);else{if("s"!==S)return null;var j=o.getLine(l.line);l.ch>0&&Ue(j[l.ch])&&(l.ch-=1);var ue=or(o,l,s.repeat,1,O),xe=or(o,l,s.repeat,-1,O);Pe(o.getLine(xe.line)[xe.ch])&&Pe(o.getLine(ue.line)[ue.ch-1])&&(xe={line:xe.line,ch:xe.ch+1}),A={start:xe,end:ue}}return o.state.vim.visualMode?function Zr(o,l,s){var S,c=o.state.vim.sel,p=c.head,g=c.anchor;return He(s,l)&&(S=s,s=l,l=S),He(p,g)?(p=at(l,p),g=ft(g,s)):(g=at(l,g),-1==(p=qe(p=ft(p,s),0,-1)).ch&&p.line!=o.firstLine()&&(p=new C(p.line-1,rt(o,p.line-1)))),[g,p]}(o,A.start,A.end):[A.start,A.end]},repeatLastCharacterSearch:function(o,l,s){var c=Ce.lastCharacterSearch,p=s.repeat,g=s.forward===c.forward,S=(c.increment?1:0)*(g?-1:1);o.moveH(-S,"char"),s.inclusive=!!g;var O=Br(o,p,g,c.selectedCharacter);return O?(O.ch+=S,O):(o.moveH(S,"char"),l)}};function Er(o,l){for(var s=[],c=0;c<l;c++)s.push(o);return s}var br={change:function(o,l,s){var c,p,g=o.state.vim,S=s[0].anchor,O=s[0].head;if(g.visualMode)if(l.fullLine)O.ch=Number.MAX_VALUE,O.line--,o.setSelection(S,O),p=o.getSelection(),o.replaceSelection(""),c=S;else{p=o.getSelection();var xe=Er("",s.length);o.replaceSelections(xe),c=at(s[0].head,s[0].anchor)}else{p=o.getRange(S,O);var A=g.lastEditInputState||{};if("moveByWords"==A.motion&&!Pe(p)){var G=/\s+$/.exec(p);G&&A.motionArgs&&A.motionArgs.forward&&(O=qe(O,0,-G[0].length),p=p.slice(0,-G[0].length))}var j=new C(S.line-1,Number.MAX_VALUE),ue=o.firstLine()==o.lastLine();O.line>o.lastLine()&&l.linewise&&!ue?o.replaceRange("",j,O):o.replaceRange("",S,O),l.linewise&&(ue||(o.setCursor(j),W.commands.newlineAndIndent(o)),S.ch=Number.MAX_VALUE),c=S}Ce.registerController.pushText(l.registerName,"change",p,l.linewise,s.length>1),Fr.enterInsertMode(o,{head:c},o.state.vim)},delete:function(o,l,s){var c,p,g=o.state.vim;if(g.visualBlock){p=o.getSelection();var A=Er("",s.length);o.replaceSelections(A),c=at(s[0].head,s[0].anchor)}else{var S=s[0].anchor,O=s[0].head;l.linewise&&O.line!=o.firstLine()&&S.line==o.lastLine()&&S.line==O.line-1&&(S.line==o.firstLine()?S.ch=0:S=new C(S.line-1,rt(o,S.line-1))),p=o.getRange(S,O),o.replaceRange("",S,O),c=S,l.linewise&&(c=St.moveToFirstNonWhiteSpaceCharacter(o,S))}return Ce.registerController.pushText(l.registerName,"delete",p,l.linewise,g.visualBlock),Lt(o,c)},indent:function(o,l,s){var c=o.state.vim;if(o.indentMore)for(var p=c.visualMode?l.repeat:1,g=0;g<p;g++)l.indentRight?o.indentMore():o.indentLess();else{var O=c.visualBlock?s[s.length-1].anchor.line:s[0].head.line;p=c.visualMode?l.repeat:1,l.linewise&&O--;for(var A=s[0].anchor.line;A<=O;A++)for(g=0;g<p;g++)o.indentLine(A,l.indentRight)}return St.moveToFirstNonWhiteSpaceCharacter(o,s[0].anchor)},indentAuto:function(o,l,s){return o.execCommand("indentAuto"),St.moveToFirstNonWhiteSpaceCharacter(o,s[0].anchor)},changeCase:function(o,l,s,c,p){for(var g=o.getSelections(),S=[],O=l.toLower,A=0;A<g.length;A++){var G=g[A],j="";if(!0===O)j=G.toLowerCase();else if(!1===O)j=G.toUpperCase();else for(var ue=0;ue<G.length;ue++){var xe=G.charAt(ue);j+=Se(xe)?xe.toLowerCase():xe.toUpperCase()}S.push(j)}return o.replaceSelections(S),l.shouldMoveCursor?p:!o.state.vim.visualMode&&l.linewise&&s[0].anchor.line+1==s[0].head.line?St.moveToFirstNonWhiteSpaceCharacter(o,c):l.linewise?c:at(s[0].anchor,s[0].head)},yank:function(o,l,s,c){var p=o.state.vim,g=o.getSelection(),S=p.visualMode?at(p.sel.anchor,p.sel.head,s[0].head,s[0].anchor):c;return Ce.registerController.pushText(l.registerName,"yank",g,l.linewise,p.visualBlock),S}};var Fr={jumpListWalk:function(o,l,s){if(!s.visualMode){var c=l.repeat,S=Ce.jumpList.move(o,l.forward?c:-c),O=S?S.find():void 0;O=O||o.getCursor(),o.setCursor(O)}},scroll:function(o,l,s){if(!s.visualMode){var c=l.repeat||1,p=o.defaultTextHeight(),g=o.getScrollInfo().top,S=p*c,O=l.forward?g+S:g-S,A=Me(o.getCursor()),G=o.charCoords(A,"local");if(l.forward)O>G.top?(A.line+=(O-G.top)/p,A.line=Math.ceil(A.line),o.setCursor(A),G=o.charCoords(A,"local"),o.scrollTo(null,G.top)):o.scrollTo(null,O);else{var j=O+o.getScrollInfo().clientHeight;j<G.bottom?(A.line-=(G.bottom-j)/p,A.line=Math.floor(A.line),o.setCursor(A),G=o.charCoords(A,"local"),o.scrollTo(null,G.bottom-o.getScrollInfo().clientHeight)):o.scrollTo(null,O)}}},scrollToCursor:function(o,l){var s=o.getCursor().line,c=o.charCoords(new C(s,0),"local"),p=o.getScrollInfo().clientHeight,g=c.top;switch(l.position){case"center":g=c.bottom-p/2;break;case"bottom":var S=new C(s,o.getLine(s).length-1);g=g-p+(o.charCoords(S,"local").bottom-g)}o.scrollTo(null,g)},replayMacro:function(o,l,s){var c=l.selectedCharacter,p=l.repeat,g=Ce.macroModeState;for("@"==c?c=g.latestRegister:g.latestRegister=c;p--;)co(o,s,g,c)},enterMacroRecordMode:function(o,l){var s=Ce.macroModeState,c=l.selectedCharacter;Ce.registerController.isValidRegister(c)&&s.enterMacroRecordMode(o,c)},toggleOverwrite:function(o){o.state.overwrite?(o.toggleOverwrite(!1),o.setOption("keyMap","vim-insert"),W.signal(o,"vim-mode-change",{mode:"insert"})):(o.toggleOverwrite(!0),o.setOption("keyMap","vim-replace"),W.signal(o,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(o,l,s){if(!o.getOption("readOnly")){s.insertMode=!0,s.insertModeRepeat=l&&l.repeat||1;var c=l?l.insertAt:null,p=s.sel,g=l.head||o.getCursor("head"),S=o.listSelections().length;if("eol"==c)g=new C(g.line,rt(o,g.line));else if("bol"==c)g=new C(g.line,0);else if("charAfter"==c)g=qe(g,0,1);else if("firstNonBlank"==c)g=St.moveToFirstNonWhiteSpaceCharacter(o,g);else if("startOfSelectedArea"==c){if(!s.visualMode)return;s.visualBlock?(g=new C(Math.min(p.head.line,p.anchor.line),Math.min(p.head.ch,p.anchor.ch)),S=Math.abs(p.head.line-p.anchor.line)+1):g=p.head.line<p.anchor.line?p.head:new C(p.anchor.line,0)}else if("endOfSelectedArea"==c){if(!s.visualMode)return;s.visualBlock?(g=new C(Math.min(p.head.line,p.anchor.line),Math.max(p.head.ch,p.anchor.ch)+1),S=Math.abs(p.head.line-p.anchor.line)+1):g=p.head.line>=p.anchor.line?qe(p.head,0,1):new C(p.anchor.line,0)}else if("inplace"==c){if(s.visualMode)return}else"lastEdit"==c&&(g=Pr(o)||g);o.setOption("disableInput",!1),l&&l.replace?(o.toggleOverwrite(!0),o.setOption("keyMap","vim-replace"),W.signal(o,"vim-mode-change",{mode:"replace"})):(o.toggleOverwrite(!1),o.setOption("keyMap","vim-insert"),W.signal(o,"vim-mode-change",{mode:"insert"})),Ce.macroModeState.isPlaying||(o.on("change",ai),W.on(o.getInputField(),"keydown",Rn)),s.visualMode&&Ut(o),rr(o,g,S)}},toggleVisualMode:function(o,l,s){var g,c=l.repeat,p=o.getCursor();s.visualMode?s.visualLine^l.linewise||s.visualBlock^l.blockwise?(s.visualLine=!!l.linewise,s.visualBlock=!!l.blockwise,W.signal(o,"vim-mode-change",{mode:"visual",subMode:s.visualLine?"linewise":s.visualBlock?"blockwise":""}),Nr(o)):Ut(o):(s.visualMode=!0,s.visualLine=!!l.linewise,s.visualBlock=!!l.blockwise,g=Lt(o,new C(p.line,p.ch+c-1)),s.sel={anchor:p,head:g},W.signal(o,"vim-mode-change",{mode:"visual",subMode:s.visualLine?"linewise":s.visualBlock?"blockwise":""}),Nr(o),lt(o,s,"<",at(p,g)),lt(o,s,">",ft(p,g)))},reselectLastSelection:function(o,l,s){var c=s.lastSelection;if(s.visualMode&&qt(o,s),c){var p=c.anchorMark.find(),g=c.headMark.find();if(!p||!g)return;s.sel={anchor:p,head:g},s.visualMode=!0,s.visualLine=c.visualLine,s.visualBlock=c.visualBlock,Nr(o),lt(o,s,"<",at(p,g)),lt(o,s,">",ft(p,g)),W.signal(o,"vim-mode-change",{mode:"visual",subMode:s.visualLine?"linewise":s.visualBlock?"blockwise":""})}},joinLines:function(o,l,s){var c,p;if(s.visualMode){if(c=o.getCursor("anchor"),He(p=o.getCursor("head"),c)){var g=p;p=c,c=g}p.ch=rt(o,p.line)-1}else{var S=Math.max(l.repeat,2);c=o.getCursor(),p=Lt(o,new C(c.line+S-1,1/0))}for(var O=0,A=c.line;A<p.line;A++){O=rt(o,c.line),g=new C(c.line+1,rt(o,c.line+1));var G=o.getRange(c,g);G=l.keepSpaces?G.replace(/\n\r?/g,""):G.replace(/\n\s*/g," "),o.replaceRange(G,c,g)}var j=new C(c.line,O);s.visualMode&&Ut(o,!1),o.setCursor(j)},newLineAndEnterInsertMode:function(o,l,s){s.insertMode=!0;var c=Me(o.getCursor());c.line!==o.firstLine()||l.after?(c.line=l.after?c.line:c.line-1,c.ch=rt(o,c.line),o.setCursor(c),(W.commands.newlineAndIndentContinueComment||W.commands.newlineAndIndent)(o)):(o.replaceRange("\n",new C(o.firstLine(),0)),o.setCursor(o.firstLine(),0)),this.enterInsertMode(o,{repeat:l.repeat},s)},paste:function(o,l,s){var c=Me(o.getCursor()),p=Ce.registerController.getRegister(l.registerName);if(g=p.toString()){if(l.matchIndent){var S=o.getOption("tabSize"),O=function(jt){var tn=jt.split("\t").length-1,Wr=jt.split(" ").length-1;return tn*S+1*Wr},A=o.getLine(o.getCursor().line),G=O(A.match(/^\s*/)[0]),j=g.replace(/\n$/,""),ue=g!==j,xe=O(g.match(/^\s*/)[0]),g=j.replace(/^\s*/gm,function(jt){var tn=G+(O(jt)-xe);if(tn<0)return"";if(o.getOption("indentWithTabs")){var Wr=Math.floor(tn/S);return Array(Wr+1).join("\t")}return Array(tn+1).join(" ")});g+=ue?"\n":""}l.repeat>1&&(g=Array(l.repeat+1).join(g));var Le,Ve,pe=p.linewise,se=p.blockwise;if(se){g=g.split("\n"),pe&&g.pop();for(var Ne=0;Ne<g.length;Ne++)g[Ne]=""==g[Ne]?" ":g[Ne];c.ch+=l.after?1:0,c.ch=Math.min(rt(o,c.line),c.ch)}else pe?s.visualMode?g=s.visualLine?g.slice(0,-1):"\n"+g.slice(0,g.length-1)+"\n":l.after?(g="\n"+g.slice(0,g.length-1),c.ch=rt(o,c.line)):c.ch=0:c.ch+=l.after?1:0;if(s.visualMode){s.lastPastedText=g;var et,$e=function jr(o,l){var g,S,O,s=l.lastSelection,p=function(){var g=o.getCursor(),S=o.getCursor(),O=s.visualBlock;if(O){S=new C(g.line+O.height,g.ch+O.width);for(var j=[],ue=g.line;ue<S.line;ue++){var xe=new C(ue,g.ch),pe=new C(ue,S.ch);j.push({anchor:xe,head:pe})}o.setSelections(j)}else{var Ne=s.anchorMark.find(),Le=s.headMark.find(),Ve=Le.line-Ne.line;S={line:S.line+Ve,ch:Ve?S.ch:Le.ch-Ne.ch+S.ch},s.visualLine&&(g=new C(g.line,0),S=new C(S.line,rt(o,S.line))),o.setSelection(g,S)}return[g,S]};return l.visualMode?(g=o.listSelections(),O=g[g.length-1],[He((S=g[0]).anchor,S.head)?S.anchor:S.head,He(O.anchor,O.head)?O.head:O.anchor]):p()}(o,s),ut=$e[0],Wt=$e[1],kt=o.getSelection(),Gt=o.listSelections(),ht=new Array(Gt.length).join("1").split("1");s.lastSelection&&(et=s.lastSelection.headMark.find()),Ce.registerController.unnamedRegister.setText(kt),se?(o.replaceSelections(ht),Wt=new C(ut.line+g.length-1,ut.ch),o.setCursor(ut),Rr(o,Wt),o.replaceSelections(g),Le=ut):s.visualBlock?(o.replaceSelections(ht),o.setCursor(ut),o.replaceRange(g,ut,ut),Le=ut):(o.replaceRange(g,ut,Wt),Le=o.posFromIndex(o.indexFromPos(ut)+g.length-1)),et&&(s.lastSelection.headMark=o.setBookmark(et)),pe&&(Le.ch=0)}else if(se){for(o.setCursor(c),Ne=0;Ne<g.length;Ne++){var ot=c.line+Ne;ot>o.lastLine()&&o.replaceRange("\n",new C(ot,0)),rt(o,ot)<c.ch&&ur(o,ot,c.ch)}o.setCursor(c),Rr(o,new C(c.line+g.length-1,c.ch)),o.replaceSelections(g),Le=c}else o.replaceRange(g,c),pe&&l.after?Le=new C(c.line+1,Mt(o.getLine(c.line+1))):pe&&!l.after?Le=new C(c.line,Mt(o.getLine(c.line))):!pe&&l.after?(Ve=o.indexFromPos(c),Le=o.posFromIndex(Ve+g.length-1)):(Ve=o.indexFromPos(c),Le=o.posFromIndex(Ve+g.length));s.visualMode&&Ut(o,!1),o.setCursor(Le)}},undo:function(o,l){o.operation(function(){Vr(o,W.commands.undo,l.repeat)(),o.setCursor(o.getCursor("anchor"))})},redo:function(o,l){Vr(o,W.commands.redo,l.repeat)()},setRegister:function(o,l,s){s.inputState.registerName=l.selectedCharacter},setMark:function(o,l,s){lt(o,s,l.selectedCharacter,o.getCursor())},replace:function(o,l,s){var g,S,c=l.selectedCharacter,p=o.getCursor(),O=o.listSelections();if(s.visualMode)p=o.getCursor("start"),S=o.getCursor("end");else{var A=o.getLine(p.line);(g=p.ch+l.repeat)>A.length&&(g=A.length),S=new C(p.line,g)}if("\n"==c)s.visualMode||o.replaceRange("",p,S),(W.commands.newlineAndIndentContinueComment||W.commands.newlineAndIndent)(o);else{var G=o.getRange(p,S);if(G=G.replace(/[^\n]/g,c),s.visualBlock){var j=new Array(o.getOption("tabSize")+1).join(" ");G=(G=o.getSelection()).replace(/\t/g,j).replace(/[^\n]/g,c).split("\n"),o.replaceSelections(G)}else o.replaceRange(G,p,S);s.visualMode?(p=He(O[0].anchor,O[0].head)?O[0].anchor:O[0].head,o.setCursor(p),Ut(o,!1)):o.setCursor(qe(S,0,-1))}},incrementNumberToken:function(o,l){for(var g,S,O,A,s=o.getCursor(),c=o.getLine(s.line),p=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi;null!==(g=p.exec(c))&&!(s.ch<(O=(S=g.index)+g[0].length)););if(l.backtrack||!(O<=s.ch)){if(!g)return;var G=g[2]||g[4],j=g[3]||g[5],ue=l.increase?1:-1,xe={"0b":2,0:8,"":10,"0x":16}[G.toLowerCase()];A=(parseInt(g[1]+j,xe)+ue*l.repeat).toString(xe);var se=G?new Array(j.length-A.length+1+g[1].length).join("0"):"";A="-"===A.charAt(0)?"-"+G+se+A.substr(1):G+se+A;var Ne=new C(s.line,S),Le=new C(s.line,O);o.replaceRange(A,Ne,Le),o.setCursor(new C(s.line,S+A.length-1))}},repeatLastEdit:function(o,l,s){if(s.lastEditInputState){var p=l.repeat;p&&l.repeatIsExplicit?s.lastEditInputState.repeatOverride=p:p=s.lastEditInputState.repeatOverride||p,si(o,s,p,!1)}},indent:function(o,l){o.indentLine(o.getCursor().line,l.indentRight)},exitInsertMode:Sn};function Lt(o,l){var s=o.state.vim,c=s.insertMode||s.visualMode,p=Math.min(Math.max(o.firstLine(),l.line),o.lastLine()),g=rt(o,p)-1+!!c,S=Math.min(Math.max(0,l.ch),g);return new C(p,S)}function Nt(o){var l={};for(var s in o)o.hasOwnProperty(s)&&(l[s]=o[s]);return l}function qe(o,l,s){return"object"==typeof l&&(s=l.ch,l=l.line),new C(o.line+l,o.ch+s)}function Gr(o,l){if("<character>"==l.slice(-11)){var s=l.length-11,c=o.slice(0,s),p=l.slice(0,s);return c==p&&o.length>s?"full":0==p.indexOf(c)&&"partial"}return o==l?"full":0==l.indexOf(o)&&"partial"}function Vr(o,l,s){return function(){for(var c=0;c<s;c++)l(o)}}function Me(o){return new C(o.line,o.ch)}function Ot(o,l){return o.ch==l.ch&&o.line==l.line}function He(o,l){return o.line<l.line||o.line==l.line&&o.ch<l.ch}function at(o,l){return arguments.length>2&&(l=at.apply(void 0,Array.prototype.slice.call(arguments,1))),He(o,l)?o:l}function ft(o,l){return arguments.length>2&&(l=ft.apply(void 0,Array.prototype.slice.call(arguments,1))),He(o,l)?l:o}function Cr(o,l,s){var c=He(o,l),p=He(l,s);return c&&p}function rt(o,l){return o.getLine(l).length}function wr(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function ur(o,l,s){var c=rt(o,l),p=new Array(s-c+1).join(" ");o.setCursor(new C(l,c)),o.replaceRange(p,o.getCursor())}function Rr(o,l){var s=[],c=o.listSelections(),p=Me(o.clipPos(l)),g=!Ot(l,p),O=function Hr(o,l,s){for(var c=0;c<o.length;c++){var p="head"!=s&&Ot(o[c].anchor,l),g="anchor"!=s&&Ot(o[c].head,l);if(p||g)return c}return-1}(c,o.getCursor("head")),A=Ot(c[O].head,c[O].anchor),G=c.length-1,j=G-O>O?G:0,ue=c[j].anchor,xe=Math.min(ue.line,p.line),pe=Math.max(ue.line,p.line),se=ue.ch,Ne=p.ch,Le=c[j].head.ch-se,Ve=Ne-se;Le>0&&Ve<=0?(se++,g||Ne--):Le<0&&Ve>=0?(se--,A||Ne++):Le<0&&-1==Ve&&(se--,Ne++);for(var et=xe;et<=pe;et++){var $e={anchor:new C(et,se),head:new C(et,Ne)};s.push($e)}return o.setSelections(s),l.ch=Ne,ue.ch=se,ue}function rr(o,l,s){for(var c=[],p=0;p<s;p++){var g=qe(l,p,0);c.push({anchor:g,head:g})}o.setSelections(c,0)}function qt(o,l){var s=l.sel.anchor,c=l.sel.head;l.lastPastedText&&(c=o.posFromIndex(o.indexFromPos(s)+l.lastPastedText.length),l.lastPastedText=null),l.lastSelection={anchorMark:o.setBookmark(s),headMark:o.setBookmark(c),anchor:Me(s),head:Me(c),visualMode:l.visualMode,visualLine:l.visualLine,visualBlock:l.visualBlock}}function Nr(o,l,p){var c=o.state.vim,g=$t(o,l=l||c.sel,p=p||c.visualLine?"line":c.visualBlock?"block":"char");o.setSelections(g.ranges,g.primary)}function $t(o,l,s,c){var p=Me(l.head),g=Me(l.anchor);if("char"==s){var S=c||He(l.head,l.anchor)?0:1,O=He(l.head,l.anchor)?1:0;return p=qe(l.head,0,S),{ranges:[{anchor:g=qe(l.anchor,0,O),head:p}],primary:0}}if("line"==s){if(He(l.head,l.anchor))p.ch=0,g.ch=rt(o,g.line);else{g.ch=0;var A=o.lastLine();p.line>A&&(p.line=A),p.ch=rt(o,p.line)}return{ranges:[{anchor:g,head:p}],primary:0}}if("block"==s){var G=Math.min(g.line,p.line),j=g.ch,ue=Math.max(g.line,p.line),xe=p.ch;j<xe?xe+=1:j+=1;for(var pe=ue-G+1,se=p.line==G?0:pe-1,Ne=[],Le=0;Le<pe;Le++)Ne.push({anchor:new C(G+Le,j),head:new C(G+Le,xe)});return{ranges:Ne,primary:se}}}function Ut(o,l){var s=o.state.vim;!1!==l&&o.setCursor(Lt(o,s.sel.head)),qt(o,s),s.visualMode=!1,s.visualLine=!1,s.visualBlock=!1,s.insertMode||W.signal(o,"vim-mode-change",{mode:"normal"})}function Mt(o){if(!o)return 0;var l=o.search(/\S/);return-1==l?o.length:l}function nr(o,l,s,c,p){for(var g=function kn(o){var l=o.getCursor("head");return 1==o.getSelection().length&&(l=at(l,o.getCursor("anchor"))),l}(o),S=o.getLine(g.line),O=g.ch,A=p?L[0]:M[0];!A(S.charAt(O));)if(++O>=S.length)return null;c?A=M[0]:(A=L[0])(S.charAt(O))||(A=L[1]);for(var G=O,j=O;A(S.charAt(G))&&G<S.length;)G++;for(;A(S.charAt(j))&&j>=0;)j--;if(j++,l){for(var ue=G;/\s/.test(S.charAt(G))&&G<S.length;)G++;if(ue==G){for(var xe=j;/\s/.test(S.charAt(j-1))&&j>0;)j--;j||(j=xe)}}return{start:new C(g.line,j),end:new C(g.line,G)}}function Sr(o,l,s){Ot(l,s)||Ce.jumpList.add(o,l,s)}function Lr(o,l){Ce.lastCharacterSearch.increment=o,Ce.lastCharacterSearch.forward=l.forward,Ce.lastCharacterSearch.selectedCharacter=l.selectedCharacter}var Cn={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},fr={bracket:{isComplete:function(o){if(o.nextCh===o.symb){if(o.depth++,o.depth>=1)return!0}else o.nextCh===o.reverseSymb&&o.depth--;return!1}},section:{init:function(o){o.curMoveThrough=!0,o.symb=(o.forward?"]":"[")===o.symb?"{":"}"},isComplete:function(o){return 0===o.index&&o.nextCh===o.symb}},comment:{isComplete:function(o){var l="*"===o.lastCh&&"/"===o.nextCh;return o.lastCh=o.nextCh,l}},method:{init:function(o){o.symb="m"===o.symb?"{":"}",o.reverseSymb="{"===o.symb?"}":"{"},isComplete:function(o){return o.nextCh===o.symb}},preprocess:{init:function(o){o.index=0},isComplete:function(o){if("#"===o.nextCh){var l=o.lineText.match(/^#(\w+)/)[1];if("endif"===l){if(o.forward&&0===o.depth)return!0;o.depth++}else if("if"===l){if(!o.forward&&0===o.depth)return!0;o.depth--}if("else"===l&&0===o.depth)return!0}return!1}}};function Bt(o,l,s,c,p){var g=l.line,S=l.ch,O=o.getLine(g),A=s?1:-1,G=c?M:L;if(p&&""==O){if(O=o.getLine(g+=A),!me(o,g))return null;S=s?0:O.length}for(;;){if(p&&""==O)return{from:0,to:0,line:g};for(var j=A>0?O.length:-1,ue=j,xe=j;S!=j;){for(var pe=!1,se=0;se<G.length&&!pe;++se)if(G[se](O.charAt(S))){for(ue=S;S!=j&&G[se](O.charAt(S));)S+=A;if(pe=ue!=(xe=S),ue==l.ch&&g==l.line&&xe==ue+A)continue;return{from:Math.min(ue,xe+1),to:Math.max(ue,xe),line:g}}pe||(S+=A)}if(!me(o,g+=A))return null;O=o.getLine(g),S=A>0?0:O.length}}function zt(o,l,s,c,p){var S=new C(l.line+s.repeat-1,1/0),O=o.clipPos(S);return O.ch--,p||(c.lastHPos=1/0,c.lastHSPos=o.charCoords(O,"div").left),S}function Br(o,l,s,c){for(var S,p=o.getCursor(),g=p.ch,O=0;O<l;O++){if(-1==(S=_e(g,o.getLine(p.line),c,s,!0)))return null;g=S}return new C(o.getCursor().line,S)}function lt(o,l,s,c){Ge(s,Y)&&(l.marks[s]&&l.marks[s].clear(),l.marks[s]=o.setBookmark(c))}function _e(o,l,s,c,p){var g;return c?-1!=(g=l.indexOf(s,o+1))&&!p&&(g-=1):-1!=(g=l.lastIndexOf(s,o-1))&&!p&&(g+=1),g}function Tr(o,l,s,c,p){var G,g=l.line,S=o.firstLine(),O=o.lastLine(),j=g;function ue(Le){return!o.getLine(Le)}function xe(Le,Ve,et){return et?ue(Le)!=ue(Le+Ve):!ue(Le)&&ue(Le+Ve)}if(c){for(;S<=j&&j<=O&&s>0;)xe(j,c)&&s--,j+=c;return new C(j,0)}var pe=o.state.vim;if(pe.visualLine&&xe(g,1,!0)){var se=pe.sel.anchor;xe(se.line,-1,!0)&&(!p||se.line!=g)&&(g+=1)}var Ne=ue(g);for(j=g;j<=O&&s;j++)xe(j,1,!0)&&(!p||ue(j)!=Ne)&&s--;for(G=new C(j,0),j>O&&!Ne?Ne=!0:p=!1,j=g;j>S&&(p&&ue(j)!=Ne&&j!=g||!xe(j,-1,!0));j--);return{start:new C(j,0),end:G}}function or(o,l,s,c,p){function g(G){G.pos+G.dir<0||G.pos+G.dir>=G.line.length?G.line=null:G.pos+=G.dir}function S(G,j,ue,xe){var se={line:G.getLine(j),ln:j,pos:ue,dir:xe};if(""===se.line)return{ln:se.ln,pos:se.pos};var Ne=se.pos;for(g(se);null!==se.line;){if(Ne=se.pos,Ue(se.line[se.pos])){if(p){for(g(se);null!==se.line&&Pe(se.line[se.pos]);)Ne=se.pos,g(se);return{ln:se.ln,pos:Ne+1}}return{ln:se.ln,pos:se.pos+1}}g(se)}return{ln:se.ln,pos:Ne+1}}function O(G,j,ue,xe){var pe=G.getLine(j),se={line:pe,ln:j,pos:ue,dir:xe};if(""===se.line)return{ln:se.ln,pos:se.pos};var Ne=se.pos;for(g(se);null!==se.line;){if(Pe(se.line[se.pos])||Ue(se.line[se.pos])){if(Ue(se.line[se.pos]))return p&&Pe(se.line[se.pos+1])?{ln:se.ln,pos:se.pos+1}:{ln:se.ln,pos:Ne}}else Ne=se.pos;g(se)}return se.line=pe,p&&Pe(se.line[se.pos])?{ln:se.ln,pos:se.pos}:{ln:se.ln,pos:Ne}}for(var A={ln:l.line,pos:l.ch};s>0;)A=c<0?O(o,A.ln,A.pos,c):S(o,A.ln,A.pos,c),s--;return new C(A.ln,A.pos)}function ee(){}function we(o){var l=o.state.vim;return l.searchState_||(l.searchState_=new ee)}function oe(o,l){var s=ke(o,l)||[];if(!s.length)return[];var c=[];if(0===s[0]){for(var p=0;p<s.length;p++)"number"==typeof s[p]&&c.push(o.substring(s[p]+1,s[p+1]));return c}}function ke(o,l){l||(l="/");for(var s=!1,c=[],p=0;p<o.length;p++){var g=o.charAt(p);!s&&g==l&&c.push(p),s=!s&&"\\"==g}return c}k("pcre",!0,"boolean"),ee.prototype={getQuery:function(){return Ce.query},setQuery:function(o){Ce.query=o},getOverlay:function(){return this.searchOverlay},setOverlay:function(o){this.searchOverlay=o},isReversed:function(){return Ce.isReversed},setReversed:function(o){Ce.isReversed=o},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(o){this.annotate=o}};var Je={"\\n":"\n","\\r":"\r","\\t":"\t"};var De={"\\/":"/","\\\\":"\\","\\n":"\n","\\r":"\r","\\t":"\t","\\&":"&"};function it(o,l,s){if(Ce.registerController.getRegister("/").setText(o),o instanceof RegExp)return o;var g,S,p=function w(o){return ke(o,"/")}(o);return p.length?(g=o.substring(0,p[0]),S=-1!=o.substring(p[0]).indexOf("i")):g=o,g?(F("pcre")||(g=function We(o){for(var c=!1,p=[],g=-1;g<o.length;g++){var S=o.charAt(g)||"",O=o.charAt(g+1)||"",A=O&&-1!="|(){".indexOf(O);c?(("\\"!==S||!A)&&p.push(S),c=!1):"\\"===S?(c=!0,O&&-1!="}".indexOf(O)&&(A=!0),(!A||"\\"===O)&&p.push(S)):(p.push(S),A&&"\\"!==O&&p.push("\\"))}return p.join("")}(g)),s&&(l=/^[^A-Z]*$/.test(g)),new RegExp(g,l||S?"im":"m")):null}function ct(o){"string"==typeof o&&(o=document.createElement(o));for(var l,s=1;s<arguments.length;s++)if(l=arguments[s])if("object"!=typeof l&&(l=document.createTextNode(l)),l.nodeType)o.appendChild(l);else for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&("$"===c[0]?o.style[c.slice(1)]=l[c]:o.setAttribute(c,l[c]));return o}function Xe(o,l){var s=ct("div",{$color:"red",$whiteSpace:"pre",class:"cm-vim-message"},l);o.openNotification?o.openNotification(s,{bottom:!0,duration:5e3}):alert(s.innerText)}function qr(o,l){var s=function Yr(o,l){return ct(document.createDocumentFragment(),ct("span",{$fontFamily:"monospace",$whiteSpace:"pre"},o,ct("input",{type:"text",autocorrect:"off",autocapitalize:"off",spellcheck:"false"})),l&&ct("span",{$color:"#888"},l))}(l.prefix,l.desc);if(o.openDialog)o.openDialog(s,l.onClose,{onKeyDown:l.onKeyDown,onKeyUp:l.onKeyUp,bottom:!0,selectValueOnOpen:!1,value:l.value});else{var c="";"string"!=typeof l.prefix&&l.prefix&&(c+=l.prefix.textContent),l.desc&&(c+=" "+l.desc),l.onClose(prompt(c,""))}}function en(o,l,s,c){if(l){var p=we(o),g=it(l,!!s,!!c);if(g)return ti(o,g),function $r(o,l){if(o instanceof RegExp&&l instanceof RegExp){for(var s=["global","multiline","ignoreCase","source"],c=0;c<s.length;c++){var p=s[c];if(o[p]!==l[p])return!1}return!0}return!1}(g,p.getQuery())||p.setQuery(g),g}}var sn=0;function ti(o,l){clearTimeout(sn),sn=setTimeout(function(){if(o.state.vim){var s=we(o),c=s.getOverlay();(!c||l!=c.query)&&(c&&o.removeOverlay(c),c=function Ni(o){if("^"==o.source.charAt(0))var l=!0;return{token:function(s){if(!l||s.sol()){var c=s.match(o,!1);if(c)return 0==c[0].length?(s.next(),"searching"):s.sol()||(s.backUp(1),o.exec(s.next()+c[0]))?(s.match(o),"searching"):(s.next(),null);for(;!s.eol()&&(s.next(),!s.match(o,!1)););}else s.skipToEnd()},query:o}}(l),o.addOverlay(c),o.showMatchesOnScrollbar&&(s.getScrollbarAnnotate()&&s.getScrollbarAnnotate().clear(),s.setScrollbarAnnotate(o.showMatchesOnScrollbar(l))),s.setOverlay(c))}},50)}function ri(o,l,s,c){return void 0===c&&(c=1),o.operation(function(){for(var p=o.getCursor(),g=o.getSearchCursor(s,p),S=0;S<c;S++){var O=g.find(l);if(0==S&&O&&Ot(g.from(),p)){var A=l?g.from():g.to();(O=g.find(l))&&!O[0]&&Ot(g.from(),A)&&o.getLine(A.line).length==A.ch&&(O=g.find(l))}if(!O&&!(g=o.getSearchCursor(s,l?new C(o.lastLine()):new C(o.firstLine(),0))).find(l))return}return g.from()})}function Pn(o){var l=we(o);o.removeOverlay(we(o).getOverlay()),l.setOverlay(null),l.getScrollbarAnnotate()&&(l.getScrollbarAnnotate().clear(),l.setScrollbarAnnotate(null))}function uo(o,l,s){return"number"!=typeof o&&(o=o.line),l instanceof Array?Ge(o,l):"number"==typeof s?o>=l&&o<=s:o==l}function ni(o){var l=o.getScrollInfo(),p=o.coordsChar({left:0,top:6+l.top},"local"),S=o.coordsChar({left:0,top:l.clientHeight-10+l.top},"local");return{top:p.line,bottom:S.line}}function ii(o,l,s){if("'"==s||"`"==s)return Ce.jumpList.find(o,-1)||new C(0,0);if("."==s)return Pr(o);var c=l.marks[s];return c&&c.find()}function Pr(o){for(var l=o.doc.history.done,s=l.length;s--;)if(l[s].changes)return Me(l[s].changes[0].to)}var Pi=function(){this.buildCommandMap_()};Pi.prototype={processCommand:function(o,l,s){var c=this;o.operation(function(){o.curOp.isVimOp=!0,c._processCommand(o,l,s)})},_processCommand:function(o,l,s){var c=o.state.vim,p=Ce.registerController.getRegister(":"),g=p.toString();c.visualMode&&Ut(o);var S=new W.StringStream(l);p.setText(l);var A,G,O=s||{};O.input=l;try{this.parseInput_(o,S,O)}catch(ue){throw Xe(o,ue.toString()),ue}if(O.commandName){if(A=this.matchCommand_(O.commandName)){if(G=A.name,A.excludeFromCommandHistory&&p.setText(g),this.parseCommandArgs_(S,O,A),"exToKey"==A.type){for(var j=0;j<A.toKeys.length;j++)st.handleKey(o,A.toKeys[j],"mapping");return}if("exToEx"==A.type)return void this.processCommand(o,A.toInput)}}else void 0!==O.line&&(G="move");if(G)try{Ri[G](o,O),(!A||!A.possiblyAsync)&&O.callback&&O.callback()}catch(ue){throw Xe(o,ue.toString()),ue}else Xe(o,'Not an editor command ":'+l+'"')},parseInput_:function(o,l,s){l.eatWhile(":"),l.eat("%")?(s.line=o.firstLine(),s.lineEnd=o.lastLine()):(s.line=this.parseLineSpec_(o,l),void 0!==s.line&&l.eat(",")&&(s.lineEnd=this.parseLineSpec_(o,l)));var c=l.match(/^(\w+|!!|@@|[!#&*<=>@~])/);return s.commandName=c?c[1]:l.match(/.*/)[0],s},parseLineSpec_:function(o,l){var s=l.match(/^(\d+)/);if(s)return parseInt(s[1],10)-1;switch(l.next()){case".":return this.parseLineSpecOffset_(l,o.getCursor().line);case"$":return this.parseLineSpecOffset_(l,o.lastLine());case"'":var c=l.next(),p=ii(o,o.state.vim,c);if(!p)throw new Error("Mark not set");return this.parseLineSpecOffset_(l,p.line);case"-":case"+":return l.backUp(1),this.parseLineSpecOffset_(l,o.getCursor().line);default:return void l.backUp(1)}},parseLineSpecOffset_:function(o,l){var s=o.match(/^([+-])?(\d+)/);if(s){var c=parseInt(s[2],10);"-"==s[1]?l-=c:l+=c}return l},parseCommandArgs_:function(o,l,s){if(!o.eol()){l.argString=o.match(/.*/)[0];var c=s.argDelimiter||/\s+/,p=wr(l.argString).split(c);p.length&&p[0]&&(l.args=p)}},matchCommand_:function(o){for(var l=o.length;l>0;l--){var s=o.substring(0,l);if(this.commandMap_[s]){var c=this.commandMap_[s];if(0===c.name.indexOf(o))return c}}return null},buildCommandMap_:function(){this.commandMap_={};for(var o=0;o<q.length;o++){var l=q[o];this.commandMap_[l.shortName||l.name]=l}},map:function(o,l,s){if(":"!=o&&":"==o.charAt(0)){if(s)throw Error("Mode not supported for ex mappings");var c=o.substring(1);this.commandMap_[c]=":"!=l&&":"==l.charAt(0)?{name:c,type:"exToEx",toInput:l.substring(1),user:!0}:{name:c,type:"exToKey",toKeys:l,user:!0}}else if(":"!=l&&":"==l.charAt(0)){var p={keys:o,type:"keyToEx",exArgs:{input:l.substring(1)}};s&&(p.context=s),I.unshift(p)}else p={keys:o,type:"keyToKey",toKeys:l},s&&(p.context=s),I.unshift(p)},unmap:function(o,l){if(":"!=o&&":"==o.charAt(0)){if(l)throw Error("Mode not supported for ex mappings");var s=o.substring(1);if(this.commandMap_[s]&&this.commandMap_[s].user)return delete this.commandMap_[s],!0}else for(var c=o,p=0;p<I.length;p++)if(c==I[p].keys&&I[p].context===l)return I.splice(p,1),!0}};var Ri={colorscheme:function(o,l){!l.args||l.args.length<1?Xe(o,o.getOption("theme")):o.setOption("theme",l.args[0])},map:function(o,l,s){var c=l.args;!c||c.length<2?o&&Xe(o,"Invalid mapping: "+l.input):vr.map(c[0],c[1],s)},imap:function(o,l){this.map(o,l,"insert")},nmap:function(o,l){this.map(o,l,"normal")},vmap:function(o,l){this.map(o,l,"visual")},unmap:function(o,l,s){var c=l.args;(!c||c.length<1||!vr.unmap(c[0],s))&&o&&Xe(o,"No such mapping: "+l.input)},move:function(o,l){It.processCommand(o,o.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:l.line+1})},set:function(o,l){var s=l.args,c=l.setCfg||{};if(!s||s.length<1)o&&Xe(o,"Invalid mapping: "+l.input);else{var p=s[0].split("="),g=p[0],S=p[1],O=!1;if("?"==g.charAt(g.length-1)){if(S)throw Error("Trailing characters: "+l.argString);g=g.substring(0,g.length-1),O=!0}void 0===S&&"no"==g.substring(0,2)&&(g=g.substring(2),S=!1);var A=N[g]&&"boolean"==N[g].type;if(A&&null==S&&(S=!0),!A&&void 0===S||O){var G=F(g,o,c);G instanceof Error?Xe(o,G.message):Xe(o,!0===G||!1===G?" "+(G?"":"no")+g:"  "+g+"="+G)}else{var j=Oe(g,S,o,c);j instanceof Error&&Xe(o,j.message)}}},setlocal:function(o,l){l.setCfg={scope:"local"},this.set(o,l)},setglobal:function(o,l){l.setCfg={scope:"global"},this.set(o,l)},registers:function(o,l){var s=l.args,c=Ce.registerController.registers,p="----------Registers----------\n\n";if(s){s=s.join("");for(var O=0;O<s.length;O++)g=s.charAt(O),Ce.registerController.isValidRegister(g)&&(p+='"'+g+"    "+(c[g]||new Ze).toString()+"\n")}else for(var g in c){var S=c[g].toString();S.length&&(p+='"'+g+"    "+S+"\n")}Xe(o,p)},sort:function(o,l){var s,c,p,g,S;var A=function O(){if(l.argString){var ht=new W.StringStream(l.argString);if(ht.eat("!")&&(s=!0),ht.eol())return;if(!ht.eatSpace())return"Invalid arguments";var ot=ht.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!ot&&!ht.eol())return"Invalid arguments";if(ot[1]){c=-1!=ot[1].indexOf("i"),p=-1!=ot[1].indexOf("u");var Ct=-1!=ot[1].indexOf("d")||-1!=ot[1].indexOf("n")&&1,cr=-1!=ot[1].indexOf("x")&&1,jt=-1!=ot[1].indexOf("o")&&1;if(Ct+cr+jt>1)return"Invalid arguments";g=(Ct?"decimal":cr&&"hex")||jt&&"octal"}ot[2]&&(S=new RegExp(ot[2].substr(1,ot[2].length-2),c?"i":""))}}();if(A)Xe(o,A+": "+l.argString);else{var G=l.line||o.firstLine(),j=l.lineEnd||l.line||o.lastLine();if(G!=j){var ue=new C(G,0),xe=new C(j,rt(o,j)),pe=o.getRange(ue,xe).split("\n"),se=S||("decimal"==g?/(-?)([\d]+)/:"hex"==g?/(-?)(?:0x)?([0-9a-f]+)/i:"octal"==g?/([0-7]+)/:null),Ne="decimal"==g?10:"hex"==g?16:"octal"==g?8:null,Le=[],Ve=[];if(g||S)for(var et=0;et<pe.length;et++){var $e=S?pe[et].match(S):null;$e&&""!=$e[0]?Le.push($e):!S&&se.exec(pe[et])?Le.push(pe[et]):Ve.push(pe[et])}else Ve=pe;if(Le.sort(S?function Wt(ht,ot){var Ct;return s&&(Ct=ht,ht=ot,ot=Ct),c&&(ht[0]=ht[0].toLowerCase(),ot[0]=ot[0].toLowerCase()),ht[0]<ot[0]?-1:1}:ut),S)for(et=0;et<Le.length;et++)Le[et]=Le[et].input;else g||Ve.sort(ut);if(pe=s?Le.concat(Ve):Ve.concat(Le),p){var Gt,kt=pe;for(pe=[],et=0;et<kt.length;et++)kt[et]!=Gt&&pe.push(kt[et]),Gt=kt[et]}o.replaceRange(pe.join("\n"),ue,xe)}}function ut(ht,ot){var Ct;s&&(Ct=ht,ht=ot,ot=Ct),c&&(ht=ht.toLowerCase(),ot=ot.toLowerCase());var cr=g&&se.exec(ht),jt=g&&se.exec(ot);return cr?(cr=parseInt((cr[1]+cr[2]).toLowerCase(),Ne))-(jt=parseInt((jt[1]+jt[2]).toLowerCase(),Ne)):ht<ot?-1:1}},vglobal:function(o,l){this.global(o,l)},global:function(o,l){var s=l.argString;if(s){var A,c="v"===l.commandName[0],p=void 0!==l.line?l.line:o.firstLine(),g=l.lineEnd||l.line||o.lastLine(),S=function d(o){return oe(o,"/")}(s),O=s;if(S.length&&(O=S[0],A=S.slice(1,S.length).join("/")),O)try{en(o,O,!0,!0)}catch{return void Xe(o,"Invalid regex: "+O)}for(var G=we(o).getQuery(),j=[],ue=p;ue<=g;ue++){var xe=o.getLineHandle(ue);G.test(xe.text)!==c&&j.push(A?xe:xe.text)}if(A){var se=0,Ne=function(){if(se<j.length){var Le=j[se++],Ve=o.getLineNumber(Le);if(null==Ve)return void Ne();vr.processCommand(o,Ve+1+A,{callback:Ne})}};Ne()}else Xe(o,j.join("\n"))}else Xe(o,"Regular Expression missing from global")},substitute:function(o,l){if(!o.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var p,S,O,A,s=l.argString,c=s?oe(s,s[0]):[],g="",G=!1,j=!1;if(c.length)p=c[0],F("pcre")&&""!==p&&(p=new RegExp(p).source),void 0!==(g=c[1])&&(g=F("pcre")?function mt(o){for(var l=new W.StringStream(o),s=[];!l.eol();){for(;l.peek()&&"\\"!=l.peek();)s.push(l.next());var c=!1;for(var p in De)if(l.match(p,!0)){c=!0,s.push(De[p]);break}c||s.push(l.next())}return s.join("")}(g.replace(/([^\\])&/g,"$1$$&")):function Ye(o){for(var l=!1,s=[],c=-1;c<o.length;c++){var p=o.charAt(c)||"",g=o.charAt(c+1)||"";Je[p+g]?(s.push(Je[p+g]),c++):l?(s.push(p),l=!1):"\\"===p?(l=!0,fe(g)||"$"===g?s.push("$"):"/"!==g&&"\\"!==g&&s.push("\\")):("$"===p&&s.push("$"),s.push(p),"/"===g&&s.push("\\"))}return s.join("")}(g),Ce.lastSubstituteReplacePart=g),S=c[2]?c[2].split(" "):[];else if(s&&s.length)return void Xe(o,"Substitutions should be of the form :s/pattern/replace/");if(S&&(O=S[0],A=parseInt(S[1]),O&&(-1!=O.indexOf("c")&&(G=!0),-1!=O.indexOf("g")&&(j=!0),p=F("pcre")?p+"/"+O:p.replace(/\//g,"\\/")+"/"+O)),p)try{en(o,p,!0,!0)}catch{return void Xe(o,"Invalid regex: "+p)}if(void 0!==(g=g||Ce.lastSubstituteReplacePart)){var xe=we(o).getQuery(),pe=void 0!==l.line?l.line:o.getCursor().line,se=l.lineEnd||pe;pe==o.firstLine()&&se==o.lastLine()&&(se=1/0),A&&(se=(pe=se)+A-1);var Ne=Lt(o,new C(pe,0)),Le=o.getSearchCursor(xe,Ne);!function wn(o,l,s,c,p,g,S,O,A){o.state.vim.exMode=!0;var j,ue,xe,G=!1;function pe(){o.operation(function(){for(;!G;)se(),Le();Ve()})}function se(){var ut=o.getRange(g.from(),g.to()).replace(S,O),Wt=g.to().line;g.replace(ut),ue=g.to().line,p+=ue-Wt,xe=ue<Wt}function Ne(){var $e=j&&Me(g.to()),ut=g.findNext();return ut&&!ut[0]&&$e&&Ot(g.from(),$e)&&(ut=g.findNext()),ut}function Le(){for(;Ne()&&uo(g.from(),c,p);)if(s||g.from().line!=ue||xe)return o.scrollIntoView(g.from(),30),o.setSelection(g.from(),g.to()),j=g.from(),void(G=!1);G=!0}function Ve($e){if($e&&$e(),o.focus(),j){o.setCursor(j);var ut=o.state.vim;ut.exMode=!1,ut.lastHPos=ut.lastHSPos=j.ch}A&&A()}function et($e,ut,Wt){switch(W.e_stop($e),W.keyName($e)){case"Y":se(),Le();break;case"N":Le();break;case"A":var Gt=A;A=void 0,o.operation(pe),A=Gt;break;case"L":se();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":Ve(Wt)}return G&&Ve(Wt),!0}if(Le(),!G)return l?void qr(o,{prefix:ct("span","replace with ",ct("strong",O)," (y/n/a/q/l)"),onKeyDown:et}):(pe(),void(A&&A()));Xe(o,"No matches for "+S.source)}(o,G,j,pe,se,Le,xe,g,l.callback)}else Xe(o,"No previous substitute regular expression")},redo:W.commands.redo,undo:W.commands.undo,write:function(o){W.commands.save?W.commands.save(o):o.save&&o.save()},nohlsearch:function(o){Pn(o)},yank:function(o){var l=Me(o.getCursor()),c=o.getLine(l.line);Ce.registerController.pushText("0","yank",c,!0,!0)},delmarks:function(o,l){if(l.argString&&wr(l.argString))for(var s=o.state.vim,c=new W.StringStream(wr(l.argString));!c.eol();){c.eatSpace();var p=c.pos;if(!c.match(/[a-zA-Z]/,!1))return void Xe(o,"Invalid argument: "+l.argString.substring(p));var g=c.next();if(c.match("-",!0)){if(!c.match(/[a-zA-Z]/,!1))return void Xe(o,"Invalid argument: "+l.argString.substring(p));var S=g,O=c.next();if(!(x(S)&&x(O)||Se(S)&&Se(O)))return void Xe(o,"Invalid argument: "+S+"-");var A=S.charCodeAt(0),G=O.charCodeAt(0);if(A>=G)return void Xe(o,"Invalid argument: "+l.argString.substring(p));for(var j=0;j<=G-A;j++){var ue=String.fromCharCode(A+j);delete s.marks[ue]}}else delete s.marks[g]}else Xe(o,"Argument required")}},vr=new Pi;function Sn(o){var l=o.state.vim,s=Ce.macroModeState,c=Ce.registerController.getRegister("."),p=s.isPlaying,g=s.lastInsertModeChanges;p||(o.off("change",ai),W.off(o.getInputField(),"keydown",Rn)),!p&&l.insertModeRepeat>1&&(si(o,l,l.insertModeRepeat-1,!0),l.lastEditInputState.repeatOverride=l.insertModeRepeat),delete l.insertModeRepeat,l.insertMode=!1,o.setCursor(o.getCursor().line,o.getCursor().ch-1),o.setOption("keyMap","vim"),o.setOption("disableInput",!0),o.toggleOverwrite(!1),c.setText(g.changes.join("")),W.signal(o,"vim-mode-change",{mode:"normal"}),s.isRecording&&function _i(o){if(!o.isPlaying){var s=Ce.registerController.getRegister(o.latestRegister);s&&s.pushInsertModeChanges&&s.pushInsertModeChanges(o.lastInsertModeChanges)}}(s)}function Hi(o){I.unshift(o)}function co(o,l,s,c){var p=Ce.registerController.getRegister(c);if(":"==c)return p.keyBuffer[0]&&vr.processCommand(o,p.keyBuffer[0]),void(s.isPlaying=!1);var g=p.keyBuffer,S=0;s.isPlaying=!0,s.replaySearchQueries=p.searchQueries.slice(0);for(var O=0;O<g.length;O++)for(var G,j,A=g[O];A;)if(G=/<\w+-.+?>|<\w+>|./.exec(A),A=A.substring(G.index+(j=G[0]).length),st.handleKey(o,j,"macro"),l.insertMode){var ue=p.insertModeChanges[S++].changes;Ce.macroModeState.lastInsertModeChanges.changes=ue,ui(o,ue,1),Sn(o)}s.isPlaying=!1}function ai(o,l){var s=Ce.macroModeState,c=s.lastInsertModeChanges;if(!s.isPlaying)for(;l;){if(c.expectCursorActivityForChange=!0,c.ignoreCount>1)c.ignoreCount--;else if("+input"==l.origin||"paste"==l.origin||void 0===l.origin){var p=o.listSelections().length;p>1&&(c.ignoreCount=p);var g=l.text.join("\n");c.maybeReset&&(c.changes=[],c.maybeReset=!1),g&&(o.state.overwrite&&!/\n/.test(g)?c.changes.push([g]):c.changes.push(g))}l=l.next}}function li(o){var l=o.state.vim;if(l.insertMode){var s=Ce.macroModeState;if(s.isPlaying)return;var c=s.lastInsertModeChanges;c.expectCursorActivityForChange?c.expectCursorActivityForChange=!1:c.maybeReset=!0}else o.curOp.isVimOp||Ln(o,l)}function Ln(o,l){var s=o.getCursor("anchor"),c=o.getCursor("head");if(l.visualMode&&!o.somethingSelected()?Ut(o,!1):!l.visualMode&&!l.insertMode&&o.somethingSelected()&&(l.visualMode=!0,l.visualLine=!1,W.signal(o,"vim-mode-change",{mode:"visual"})),l.visualMode){var p=He(c,s)?0:-1,g=He(c,s)?-1:0;c=qe(c,0,p),s=qe(s,0,g),l.sel={anchor:s,head:c},lt(o,l,"<",at(c,s)),lt(o,l,">",ft(c,s))}else l.insertMode||(l.lastHPos=o.getCursor().ch)}function un(o){this.keyName=o}function Rn(o){var s=Ce.macroModeState.lastInsertModeChanges,c=W.keyName(o);c&&(-1!=c.indexOf("Delete")||-1!=c.indexOf("Backspace"))&&W.lookupKey(c,"vim-insert",function p(){return s.maybeReset&&(s.changes=[],s.maybeReset=!1),s.changes.push(new un(c)),!0})}function si(o,l,s,c){var p=Ce.macroModeState;p.isPlaying=!0;var g=!!l.lastEditActionCommand,S=l.inputState;function O(){g?It.processAction(o,l,l.lastEditActionCommand):It.evalInput(o,l)}function A(j){p.lastInsertModeChanges.changes.length>0&&ui(o,p.lastInsertModeChanges.changes,j=l.lastEditActionCommand?j:1)}if(l.inputState=l.lastEditInputState,g&&l.lastEditActionCommand.interlaceInsertRepeat)for(var G=0;G<s;G++)O(),A(1);else c||O(),A(s);l.inputState=S,l.insertMode&&!c&&Sn(o),p.isPlaying=!1}function ui(o,l,s){function c(ue){return"string"==typeof ue?W.commands[ue](o):ue(o),!0}var p=o.getCursor("head"),g=Ce.macroModeState.lastInsertModeChanges.visualBlock;g&&(rr(o,p,g+1),s=o.listSelections().length,o.setCursor(p));for(var S=0;S<s;S++){g&&o.setCursor(qe(p,S,0));for(var O=0;O<l.length;O++){var A=l[O];if(A instanceof un)W.lookupKey(A.keyName,"vim-insert",c);else if("string"==typeof A)o.replaceSelection(A);else{var G=o.getCursor(),j=qe(G,0,A[0].length);o.replaceRange(A[0],G,j),o.setCursor(j)}}}g&&o.setCursor(qe(p,0,1))}function fn(o){var l=new o.constructor;return Object.keys(o).forEach(function(s){var c=o[s];Array.isArray(c)?c=c.slice():c&&"object"==typeof c&&c.constructor!=Object&&(c=fn(c)),l[s]=c}),o.sel&&(l.sel={head:o.sel.head&&Me(o.sel.head),anchor:o.sel.anchor&&Me(o.sel.anchor)}),l}return W.keyMap.vim={attach:le,detach:ae,call:Ae},k("insertModeEscKeysTimeout",200,"number"),W.keyMap["vim-insert"]={fallthrough:["default"],attach:le,detach:ae,call:Ae},W.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:le,detach:ae,call:Ae},Ke(),st}T.Vim=function H(W){return W.Vim=Q(W),W.Vim}(T)}(de(43867),de(15626),de(46246),de(82491))},43867:function(yt){yt.exports=function(){"use strict";var tt=navigator.userAgent,de=navigator.platform,T=/gecko\/\d/i.test(tt),Q=/MSIE \d/.test(tt),H=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(tt),W=/Edge\/(\d+)/.exec(tt),C=Q||H||W,f=C&&(Q?document.documentMode||6:+(W||H)[1]),I=!W&&/WebKit\//.test(tt),ie=I&&/Qt\/\d+\.\d+/.test(tt),q=!W&&/Chrome\/(\d+)/.exec(tt),X=q&&+q[1],K=/Opera\//.test(tt),ae=/Apple Computer/.test(navigator.vendor),le=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(tt),Ae=/PhantomJS/.test(tt),$=ae&&(/Mobile\/\w+/.test(tt)||navigator.maxTouchPoints>2),re=/Android/.test(tt),D=$||re||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(tt),_=$||/Mac/.test(de),m=/\bCrOS\b/.test(tt),L=/win/i.test(de),M=K&&tt.match(/Version\/(\d*\.\d*)/);M&&(M=Number(M[1])),M&&M>=15&&(K=!1,I=!0);var P=_&&(ie||K&&(null==M||M<12.11)),b=T||C&&f>=9;function z(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var x,ne=function(e,t){var n=e.className,r=z(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function Y(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function ce(e,t){return Y(e).appendChild(t)}function R(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var a=0;a<t.length;++a)i.appendChild(t[a]);return i}function me(e,t,n,r){var i=R(e,t,n,r);return i.setAttribute("role","presentation"),i}function ve(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function fe(e){var t;try{t=e.activeElement}catch{t=e.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function Se(e,t){var n=e.className;z(t).test(n)||(e.className+=(n?" ":"")+t)}function Pe(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!z(n[r]).test(t)&&(t+=" "+n[r]);return t}x=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch{return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var Ue=function(e){e.select()};function Ge(e){return e.display.wrapper.ownerDocument}function N(e){return Ge(e).defaultView}function k(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Oe(e,t,n){for(var r in t||(t={}),e)e.hasOwnProperty(r)&&(!1!==n||!t.hasOwnProperty(r))&&(t[r]=e[r]);return t}function F(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var a=r||0,u=i||0;;){var h=e.indexOf("\t",a);if(h<0||h>=t)return u+(t-a);u+=h-a,u+=n-u%n,a=h+1}}$?Ue=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:C&&(Ue=function(e){try{e.select()}catch{}});var Z=function(){this.id=null,this.f=null,this.time=0,this.handler=k(this.onTimeout,this)};function te(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}Z.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},Z.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var ye=50,Ee={toString:function(){return"CodeMirror.Pass"}},Ce={scroll:!1},Ke={origin:"*mouse"},ze={origin:"+move"};function st(e,t,n){for(var r=0,i=0;;){var a=e.indexOf("\t",r);-1==a&&(a=e.length);var u=a-r;if(a==e.length||i+u>=t)return r+Math.min(u,t-i);if(i+=a-r,r=a+1,(i+=n-i%n)>=t)return r}}var Xt=[""];function pt(e){for(;Xt.length<=e;)Xt.push(Ze(Xt)+" ");return Xt[e]}function Ze(e){return e[e.length-1]}function xt(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function pr(){}function It(e,t){var n;return Object.create?n=Object.create(e):(pr.prototype=e,n=new pr),t&&Oe(t,n),n}var St=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function sr(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||St.test(e))}function Er(e,t){return t?!!(t.source.indexOf("\\w")>-1&&sr(e))||t.test(e):sr(e)}function br(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var xn=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Fr(e){return e.charCodeAt(0)>=768&&xn.test(e)}function Ir(e,t,n){for(;(n<0?t>0:t<e.length)&&Fr(e.charAt(t));)t+=n;return t}function Lt(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,a=r<0?Math.ceil(i):Math.floor(i);if(a==t)return e(a)?t:n;e(a)?n=a:t=a+r}}var qe=null;function Tt(e,t,n){var r;qe=null;for(var i=0;i<e.length;++i){var a=e[i];if(a.from<t&&a.to>t)return i;a.to==t&&(a.from!=a.to&&"before"==n?r=i:qe=i),a.from==t&&(a.from!=a.to&&"before"!=n?r=i:qe=i)}return r??qe}var Gr=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function n(y){return y<=247?e.charAt(y):1424<=y&&y<=1524?"R":1536<=y&&y<=1785?t.charAt(y-1536):1774<=y&&y<=2220?"r":8192<=y&&y<=8203?"w":8204==y?"b":"L"}var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,a=/[LRr]/,u=/[Lb1n]/,h=/[1n]/;function v(y,E,B){this.level=y,this.from=E,this.to=B}return function(y,E){var B="ltr"==E?"L":"R";if(0==y.length||"ltr"==E&&!r.test(y))return!1;for(var V=y.length,J=[],he=0;he<V;++he)J.push(n(y.charCodeAt(he)));for(var be=0,Te=B;be<V;++be){var Fe=J[be];"m"==Fe?J[be]=Te:Te=Fe}for(var Be=0,Ie=B;Be<V;++Be){var Re=J[Be];"1"==Re&&"r"==Ie?J[Be]="n":a.test(Re)&&(Ie=Re,"r"==Re&&(J[Be]="R"))}for(var Qe=1,je=J[0];Qe<V-1;++Qe){var nt=J[Qe];"+"==nt&&"1"==je&&"1"==J[Qe+1]?J[Qe]="1":","==nt&&je==J[Qe+1]&&("1"==je||"n"==je)&&(J[Qe]=je),je=nt}for(var gt=0;gt<V;++gt){var Jt=J[gt];if(","==Jt)J[gt]="N";else if("%"==Jt){var wt=void 0;for(wt=gt+1;wt<V&&"%"==J[wt];++wt);for(var Mr=gt&&"!"==J[gt-1]||wt<V&&"1"==J[wt]?"1":"N",yr=gt;yr<wt;++yr)J[yr]=Mr;gt=wt-1}}for(var Rt=0,xr=B;Rt<V;++Rt){var tr=J[Rt];"L"==xr&&"1"==tr?J[Rt]="L":a.test(tr)&&(xr=tr)}for(var Kt=0;Kt<V;++Kt)if(i.test(J[Kt])){var Ht=void 0;for(Ht=Kt+1;Ht<V&&i.test(J[Ht]);++Ht);for(var Dt="L"==(Kt?J[Kt-1]:B),$n=Dt==("L"==(Ht<V?J[Ht]:B))?Dt?"L":"R":B,yn=Kt;yn<Ht;++yn)J[yn]=$n;Kt=Ht-1}for(var Xr,lr=[],Qt=0;Qt<V;)if(u.test(J[Qt])){var $o=Qt;for(++Qt;Qt<V&&u.test(J[Qt]);++Qt);lr.push(new v(0,$o,Qt))}else{var an=Qt,Nn=lr.length,Bn="rtl"==E?1:0;for(++Qt;Qt<V&&"L"!=J[Qt];++Qt);for(var dr=an;dr<Qt;)if(h.test(J[dr])){an<dr&&(lr.splice(Nn,0,new v(1,an,dr)),Nn+=Bn);var ei=dr;for(++dr;dr<Qt&&h.test(J[dr]);++dr);lr.splice(Nn,0,new v(2,ei,dr)),Nn+=Bn,an=dr}else++dr;an<Qt&&lr.splice(Nn,0,new v(1,an,Qt))}return"ltr"==E&&(1==lr[0].level&&(Xr=y.match(/^\s+/))&&(lr[0].from=Xr[0].length,lr.unshift(new v(0,0,Xr[0].length))),1==Ze(lr).level&&(Xr=y.match(/\s+$/))&&(Ze(lr).to-=Xr[0].length,lr.push(new v(0,V-Xr[0].length,V)))),"rtl"==E?lr.reverse():lr}}();function _t(e,t){var n=e.order;return null==n&&(n=e.order=Gr(e.text,t)),n}var Vr=[],Me=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||Vr).concat(n)}};function Ot(e,t){return e._handlers&&e._handlers[t]||Vr}function He(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var a=te(i,n);a>-1&&(r[t]=i.slice(0,a).concat(i.slice(a+1)))}}}function at(e,t){var n=Ot(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function ft(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),at(e,n||t.type,e,t),Rr(t)||t.codemirrorIgnore}function Cr(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==te(n,t[r])&&n.push(t[r])}function rt(e,t){return Ot(e,t).length>0}function wr(e){e.prototype.on=function(t,n){Me(this,t,n)},e.prototype.off=function(t,n){He(this,t,n)}}function At(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function ur(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Rr(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function rr(e){At(e),ur(e)}function Hr(e){return e.target||e.srcElement}function jr(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),_&&e.ctrlKey&&1==t&&(t=3),t}var Zr,$t,qt=function(){if(C&&f<9)return!1;var e=R("div");return"draggable"in e||"dragDrop"in e}();function Nr(e){if(null==Zr){var t=R("span","\u200b");ce(e,R("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Zr=t.offsetWidth<=1&&t.offsetHeight>2&&!(C&&f<8))}var n=Zr?R("span","\u200b"):R("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function kn(e){if(null!=$t)return $t;var t=ce(e,document.createTextNode("A\u062eA")),n=x(t,0,1).getBoundingClientRect(),r=x(t,1,2).getBoundingClientRect();return Y(e),!(!n||n.left==n.right)&&($t=r.right-n.right<3)}var e,Ut=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var a=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),u=a.indexOf("\r");-1!=u?(n.push(a.slice(0,u)),t+=u+1):(n.push(a),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},ln=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},bn="oncopy"in(e=R("div"))||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy),Mt=null;var er={},Sr={};function Lr(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),er[e]=t}function fr(e){if("string"==typeof e&&Sr.hasOwnProperty(e))e=Sr[e];else if(e&&"string"==typeof e.name&&Sr.hasOwnProperty(e.name)){var t=Sr[e.name];"string"==typeof t&&(t={name:t}),(e=It(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return fr("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return fr("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function ir(e,t){t=fr(t);var n=er[t.name];if(!n)return ir(e,"text/plain");var r=n(e,t);if(Bt.hasOwnProperty(t.name)){var i=Bt[t.name];for(var a in i)i.hasOwnProperty(a)&&(r.hasOwnProperty(a)&&(r["_"+a]=r[a]),r[a]=i[a])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var u in t.modeProps)r[u]=t.modeProps[u];return r}var Bt={};function _r(e,t){Oe(t,Bt.hasOwnProperty(e)?Bt[e]:Bt[e]={})}function zt(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Br(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Dr(e,t,n){return!e.startState||e.startState(t,n)}var lt=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function _e(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],a=i.chunkSize();if(t<a){n=i;break}t-=a}return n.lines[t]}function Tr(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(a){var u=a.text;i==n.line&&(u=u.slice(0,n.ch)),i==t.line&&(u=u.slice(t.ch)),r.push(u),++i}),r}function or(e,t,n){var r=[];return e.iter(t,n,function(i){r.push(i.text)}),r}function Pt(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function ge(e){if(null==e.parent)return null;for(var t=e.parent,n=te(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function U(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],a=i.height;if(t<a){e=i;continue e}t-=a,n+=i.chunkSize()}return n}while(!e.lines);for(var u=0;u<e.lines.length;++u){var v=e.lines[u].height;if(t<v)break;t-=v}return n+u}function ee(e,t){return t>=e.first&&t<e.first+e.size}function we(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function d(e,t,n){if(void 0===n&&(n=null),!(this instanceof d))return new d(e,t,n);this.line=e,this.ch=t,this.sticky=n}function w(e,t){return e.line-t.line||e.ch-t.ch}function oe(e,t){return e.sticky==t.sticky&&0==w(e,t)}function ke(e){return d(e.line,e.ch)}function We(e,t){return w(e,t)<0?t:e}function Je(e,t){return w(e,t)<0?e:t}function Ye(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function De(e,t){if(t.line<e.first)return d(e.first,0);var n=e.first+e.size-1;return t.line>n?d(n,_e(e,n).text.length):function mt(e,t){var n=e.ch;return null==n||n>t?d(e.line,t):n<0?d(e.line,0):e}(t,_e(e,t.line).text.length)}function it(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=De(e,t[r]);return n}lt.prototype.eol=function(){return this.pos>=this.string.length},lt.prototype.sol=function(){return this.pos==this.lineStart},lt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},lt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},lt.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},lt.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},lt.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},lt.prototype.skipToEnd=function(){this.pos=this.string.length},lt.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},lt.prototype.backUp=function(e){this.pos-=e},lt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=F(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},lt.prototype.indentation=function(){return F(this.string,null,this.tabSize)-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},lt.prototype.match=function(e,t,n){if("string"!=typeof e){var a=this.string.slice(this.pos).match(e);return a&&a.index>0?null:(a&&!1!==t&&(this.pos+=a[0].length),a)}var r=function(u){return n?u.toLowerCase():u};if(r(this.string.substr(this.pos,e.length))==r(e))return!1!==t&&(this.pos+=e.length),!0},lt.prototype.current=function(){return this.string.slice(this.start,this.pos)},lt.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},lt.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},lt.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var ct=function(e,t){this.state=e,this.lookAhead=t},Xe=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function Yr(e,t,n,r){var i=[e.state.modeGen],a={};Pn(e,t.text,e.doc.mode,n,function(y,E){return i.push(y,E)},a,r);for(var u=n.state,h=function(y){n.baseTokens=i;var E=e.state.overlays[y],B=1,V=0;n.state=!0,Pn(e,t.text,E.mode,n,function(J,he){for(var be=B;V<J;){var Te=i[B];Te>J&&i.splice(B,1,J,i[B+1],Te),B+=2,V=Math.min(J,Te)}if(he)if(E.opaque)i.splice(be,B-be,J,"overlay "+he),B=be+2;else for(;be<B;be+=2){var Fe=i[be+1];i[be+1]=(Fe?Fe+" ":"")+"overlay "+he}},a),n.state=u,n.baseTokens=null,n.baseTokenPos=1},v=0;v<e.state.overlays.length;++v)h(v);return{styles:i,classes:a.bgClass||a.textClass?a:null}}function qr(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=$r(e,ge(t)),i=t.text.length>e.options.maxHighlightLength&&zt(e.doc.mode,r.state),a=Yr(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=a.styles,a.classes?t.styleClasses=a.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function $r(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new Xe(r,!0,t);var a=function uo(e,t,n){for(var r,i,a=e.doc,u=n?-1:t-(e.doc.mode.innerMode?1e3:100),h=t;h>u;--h){if(h<=a.first)return a.first;var v=_e(a,h-1),y=v.stateAfter;if(y&&(!n||h+(y instanceof ct?y.lookAhead:0)<=a.modeFrontier))return h;var E=F(v.text,null,e.options.tabSize);(null==i||r>E)&&(i=h-1,r=E)}return i}(e,t,n),u=a>r.first&&_e(r,a-1).stateAfter,h=u?Xe.fromSaved(r,u,a):new Xe(r,Dr(r.mode),a);return r.iter(a,t,function(v){en(e,v.text,h);var y=h.line;v.stateAfter=y==t-1||y%5==0||y>=i.viewFrom&&y<i.viewTo?h.save():null,h.nextLine()}),n&&(r.modeFrontier=h.line),h}function en(e,t,n,r){var i=e.doc.mode,a=new lt(t,e.options.tabSize,n);for(a.start=a.pos=r||0,""==t&&Ni(i,n.state);!a.eol();)sn(i,a,n.state),a.start=a.pos}function Ni(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Br(e,t);if(n.mode.blankLine)return n.mode.blankLine(n.state)}}function sn(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=Br(e,n).mode);var a=e.token(t,n);if(t.pos>t.start)return a}throw new Error("Mode "+e.name+" failed to advance stream.")}Xe.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Xe.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Xe.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Xe.fromSaved=function(e,t,n){return t instanceof ct?new Xe(e,zt(e.mode,t.state),n,t.lookAhead):new Xe(e,zt(e.mode,t),n)},Xe.prototype.save=function(e){var t=!1!==e?zt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ct(t,this.maxLookAhead):t};var ti=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function ri(e,t,n,r){var u,E,i=e.doc,a=i.mode,h=_e(i,(t=De(i,t)).line),v=$r(e,t.line,n),y=new lt(h.text,e.options.tabSize,v);for(r&&(E=[]);(r||y.pos<t.ch)&&!y.eol();)y.start=y.pos,u=sn(a,y,v.state),r&&E.push(new ti(y,u,zt(i.mode,v.state)));return r?E:new ti(y,u,v.state)}function Bi(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+n[2])}return e}function Pn(e,t,n,r,i,a,u){var h=n.flattenSpans;null==h&&(h=e.options.flattenSpans);var B,v=0,y=null,E=new lt(t,e.options.tabSize,r),V=e.options.addModeClass&&[null];for(""==t&&Bi(Ni(n,r.state),a);!E.eol();){if(E.pos>e.options.maxHighlightLength?(h=!1,u&&en(e,t,r,E.pos),E.pos=t.length,B=null):B=Bi(sn(n,E,r.state,V),a),V){var J=V[0].name;J&&(B="m-"+(B?J+" "+B:J))}if(!h||y!=B){for(;v<E.start;)i(v=Math.min(E.start,v+5e3),y);y=B}E.start=E.pos}for(;v<E.pos;){var he=Math.min(E.pos,v+5e3);i(he,y),v=he}}var ii=!1,Pr=!1;function vr(e,t,n){this.marker=e,this.from=t,this.to=n}function wn(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Sn(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function oi(e,t){if(t.full)return null;var n=ee(e,t.from.line)&&_e(e,t.from.line).markedSpans,r=ee(e,t.to.line)&&_e(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,a=t.to.ch,u=0==w(t.from,t.to),h=function fo(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var a=e[i],u=a.marker;null!=a.from&&!(u.inclusiveLeft?a.from<=t:a.from<t)&&(a.from!=t||"bookmark"!=u.type||n&&a.marker.insertLeft)||(r||(r=[])).push(new vr(u,a.from,null==a.to||(u.inclusiveRight?a.to>=t:a.to>t)?null:a.to))}return r}(n,i,u),v=function co(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var a=e[i],u=a.marker;(null==a.to||(u.inclusiveRight?a.to>=t:a.to>t)||a.from==t&&"bookmark"==u.type&&(!n||a.marker.insertLeft))&&(r||(r=[])).push(new vr(u,null==a.from||(u.inclusiveLeft?a.from<=t:a.from<t)?null:a.from-t,null==a.to?null:a.to-t))}return r}(r,a,u),y=1==t.text.length,E=Ze(t.text).length+(y?i:0);if(h)for(var B=0;B<h.length;++B){var V=h[B];if(null==V.to){var J=wn(v,V.marker);J?y&&(V.to=null==J.to?null:J.to+E):V.to=i}}if(v)for(var he=0;he<v.length;++he){var be=v[he];null!=be.to&&(be.to+=E),null==be.from?wn(h,be.marker)||(be.from=E,y&&(h||(h=[])).push(be)):(be.from+=E,y&&(h||(h=[])).push(be))}h&&(h=_i(h)),v&&v!=h&&(v=_i(v));var Fe=[h];if(!y){var Ie,Be=t.text.length-2;if(Be>0&&h)for(var Re=0;Re<h.length;++Re)null==h[Re].to&&(Ie||(Ie=[])).push(new vr(h[Re].marker,null,null));for(var Qe=0;Qe<Be;++Qe)Fe.push(Ie);Fe.push(v)}return Fe}function _i(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function ai(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function li(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Ln(e){return e.inclusiveLeft?-1:0}function un(e){return e.inclusiveRight?1:0}function Rn(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),a=w(r.from,i.from)||Ln(e)-Ln(t);return a?-a:w(r.to,i.to)||un(e)-un(t)||t.id-e.id}function si(e,t){var r,n=Pr&&e.markedSpans;if(n)for(var i=void 0,a=0;a<n.length;++a)(i=n[a]).marker.collapsed&&null==(t?i.from:i.to)&&(!r||Rn(r,i.marker)<0)&&(r=i.marker);return r}function ui(e){return si(e,!0)}function fn(e){return si(e,!1)}function po(e,t){var r,n=Pr&&e.markedSpans;if(n)for(var i=0;i<n.length;++i){var a=n[i];a.marker.collapsed&&(null==a.from||a.from<t)&&(null==a.to||a.to>t)&&(!r||Rn(r,a.marker)<0)&&(r=a.marker)}return r}function o(e,t,n,r,i){var a=_e(e,t),u=Pr&&a.markedSpans;if(u)for(var h=0;h<u.length;++h){var v=u[h];if(v.marker.collapsed){var y=v.marker.find(0),E=w(y.from,n)||Ln(v.marker)-Ln(i),B=w(y.to,r)||un(v.marker)-un(i);if(!(E>=0&&B<=0||E<=0&&B>=0)&&(E<=0&&(v.marker.inclusiveRight&&i.inclusiveLeft?w(y.to,n)>=0:w(y.to,n)>0)||E>=0&&(v.marker.inclusiveRight&&i.inclusiveLeft?w(y.from,r)<=0:w(y.from,r)<0)))return!0}}}function l(e){for(var t;t=ui(e);)e=t.find(-1,!0).line;return e}function p(e,t){var n=_e(e,t),r=l(n);return n==r?t:ge(r)}function g(e,t){if(t>e.lastLine())return t;var r,n=_e(e,t);if(!S(e,n))return t;for(;r=fn(n);)n=r.find(1,!0).line;return ge(n)+1}function S(e,t){var n=Pr&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&O(e,t,r))return!0}}function O(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return O(e,r.line,wn(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,a=0;a<t.markedSpans.length;++a)if((i=t.markedSpans[a]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&O(e,t,i))return!0}function A(e){for(var t=0,n=(e=l(e)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var a=n.parent;a;a=(n=a).parent)for(var u=0;u<a.children.length;++u){var h=a.children[u];if(h==n)break;t+=h.height}return t}function G(e){if(0==e.height)return 0;for(var n,t=e.text.length,r=e;n=ui(r);){var i=n.find(0,!0);r=i.from.line,t+=i.from.ch-i.to.ch}for(r=e;n=fn(r);){var a=n.find(0,!0);t-=r.text.length-a.from.ch,t+=(r=a.to.line).text.length-a.to.ch}return t}function j(e){var t=e.display,n=e.doc;t.maxLine=_e(n,n.first),t.maxLineLength=G(t.maxLine),t.maxLineChanged=!0,n.iter(function(r){var i=G(r);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=r)})}var ue=function(e,t,n){this.text=e,li(this,t),this.height=n?n(this):1};function pe(e){e.parent=null,ai(e)}ue.prototype.lineNo=function(){return ge(this)},wr(ue);var se={},Ne={};function Le(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Ne:se;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Ve(e,t){var n=me("span",null,null,I?"padding-right: .1px":null),r={pre:me("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var a=i?t.rest[i-1]:t.line,u=void 0;r.pos=0,r.addToken=$e,kn(e.display.measure)&&(u=_t(a,e.doc.direction))&&(r.addToken=Wt(r.addToken,u)),r.map=[],Gt(a,r,qr(e,a,t!=e.display.externalMeasured&&ge(a))),a.styleClasses&&(a.styleClasses.bgClass&&(r.bgClass=Pe(a.styleClasses.bgClass,r.bgClass||"")),a.styleClasses.textClass&&(r.textClass=Pe(a.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(Nr(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(I){var v=r.content.lastChild;(/\bcm-tab\b/.test(v.className)||v.querySelector&&v.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return at(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=Pe(r.pre.className,r.textClass||"")),r}function et(e){var t=R("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function $e(e,t,n,r,i,a,u){if(t){var E,h=e.splitSpaces?function ut(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var a=e.charAt(i);" "==a&&n&&(i==e.length-1||32==e.charCodeAt(i+1))&&(a="\xa0"),r+=a,n=" "==a}return r}(t,e.trailingSpace):t,v=e.cm.state.specialChars,y=!1;if(v.test(t)){E=document.createDocumentFragment();for(var B=0;;){v.lastIndex=B;var V=v.exec(t),J=V?V.index-B:t.length-B;if(J){var he=document.createTextNode(h.slice(B,B+J));E.appendChild(C&&f<9?R("span",[he]):he),e.map.push(e.pos,e.pos+J,he),e.col+=J,e.pos+=J}if(!V)break;B+=J+1;var be=void 0;if("\t"==V[0]){var Te=e.cm.options.tabSize,Fe=Te-e.col%Te;(be=E.appendChild(R("span",pt(Fe),"cm-tab"))).setAttribute("role","presentation"),be.setAttribute("cm-text","\t"),e.col+=Fe}else"\r"==V[0]||"\n"==V[0]?((be=E.appendChild(R("span","\r"==V[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",V[0]),e.col+=1):((be=e.cm.options.specialCharPlaceholder(V[0])).setAttribute("cm-text",V[0]),E.appendChild(C&&f<9?R("span",[be]):be),e.col+=1);e.map.push(e.pos,e.pos+1,be),e.pos++}}else e.col+=t.length,E=document.createTextNode(h),e.map.push(e.pos,e.pos+t.length,E),C&&f<9&&(y=!0),e.pos+=t.length;if(e.trailingSpace=32==h.charCodeAt(t.length-1),n||r||i||y||a||u){var Be=n||"";r&&(Be+=r),i&&(Be+=i);var Ie=R("span",[E],Be,a);if(u)for(var Re in u)u.hasOwnProperty(Re)&&"style"!=Re&&"class"!=Re&&Ie.setAttribute(Re,u[Re]);return e.content.appendChild(Ie)}e.content.appendChild(E)}}function Wt(e,t){return function(n,r,i,a,u,h,v){i=i?i+" cm-force-border":"cm-force-border";for(var y=n.pos,E=y+r.length;;){for(var B=void 0,V=0;V<t.length&&!((B=t[V]).to>y&&B.from<=y);V++);if(B.to>=E)return e(n,r,i,a,u,h,v);e(n,r.slice(0,B.to-y),i,a,null,h,v),a=null,r=r.slice(B.to-y),y=B.to}}}function kt(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function Gt(e,t,n){var r=e.markedSpans,i=e.text,a=0;if(r)for(var B,V,he,be,Te,Fe,Be,h=i.length,v=0,y=1,E="",J=0;;){if(J==v){he=be=Te=V="",Be=null,Fe=null,J=1/0;for(var Ie=[],Re=void 0,Qe=0;Qe<r.length;++Qe){var je=r[Qe],nt=je.marker;if("bookmark"==nt.type&&je.from==v&&nt.widgetNode)Ie.push(nt);else if(je.from<=v&&(null==je.to||je.to>v||nt.collapsed&&je.to==v&&je.from==v)){if(null!=je.to&&je.to!=v&&J>je.to&&(J=je.to,be=""),nt.className&&(he+=" "+nt.className),nt.css&&(V=(V?V+";":"")+nt.css),nt.startStyle&&je.from==v&&(Te+=" "+nt.startStyle),nt.endStyle&&je.to==J&&(Re||(Re=[])).push(nt.endStyle,je.to),nt.title&&((Be||(Be={})).title=nt.title),nt.attributes)for(var gt in nt.attributes)(Be||(Be={}))[gt]=nt.attributes[gt];nt.collapsed&&(!Fe||Rn(Fe.marker,nt)<0)&&(Fe=je)}else je.from>v&&J>je.from&&(J=je.from)}if(Re)for(var Jt=0;Jt<Re.length;Jt+=2)Re[Jt+1]==J&&(be+=" "+Re[Jt]);if(!Fe||Fe.from==v)for(var wt=0;wt<Ie.length;++wt)kt(t,0,Ie[wt]);if(Fe&&(Fe.from||0)==v){if(kt(t,(null==Fe.to?h+1:Fe.to)-v,Fe.marker,null==Fe.from),null==Fe.to)return;Fe.to==v&&(Fe=!1)}}if(v>=h)break;for(var Mr=Math.min(h,J);;){if(E){var yr=v+E.length;if(!Fe){var Rt=yr>Mr?E.slice(0,Mr-v):E;t.addToken(t,Rt,B?B+he:he,Te,v+Rt.length==J?be:"",V,Be)}if(yr>=Mr){E=E.slice(Mr-v),v=Mr;break}v=yr,Te=""}E=i.slice(a,a=n[y++]),B=Le(n[y++],t.cm.options)}}else for(var u=1;u<n.length;u+=2)t.addToken(t,i.slice(a,a=n[u]),Le(n[u+1],t.cm.options))}function ht(e,t,n){this.line=t,this.rest=function c(e){for(var t,n;t=fn(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?ge(Ze(this.rest))-n+1:1,this.node=this.text=null,this.hidden=S(e,t)}function ot(e,t,n){for(var i,r=[],a=t;a<n;a=i){var u=new ht(e.doc,_e(e.doc,a),a);i=a+u.size,r.push(u)}return r}var Ct=null;var Wr=null;function Et(e,t){var n=Ot(e,t);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);Ct?i=Ct.delayedCallbacks:Wr?i=Wr:(i=Wr=[],setTimeout(Il,0));for(var a=function(h){i.push(function(){return n[h].apply(null,r)})},u=0;u<n.length;++u)a(u)}}function Il(){var e=Wr;Wr=null;for(var t=0;t<e.length;++t)e[t]()}function ta(e,t,n,r){for(var i=0;i<t.changes.length;i++){var a=t.changes[i];"text"==a?Bl(e,t):"gutter"==a?na(e,t,n,r):"class"==a?vo(e,t):"widget"==a&&Pl(e,t,r)}t.changes=null}function fi(e){return e.node==e.text&&(e.node=R("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),C&&f<8&&(e.node.style.zIndex=2)),e.node}function ra(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Ve(e,t)}function Bl(e,t){var n=t.text.className,r=ra(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,vo(e,t)):n&&(t.text.className=n)}function vo(e,t){(function Nl(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=fi(t);t.background=r.insertBefore(R("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}})(e,t),t.line.wrapClass?fi(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className=""),t.text.className=(t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass)||""}function na(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=fi(t);t.gutterBackground=R("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var a=t.line.gutterMarkers;if(e.options.lineNumbers||a){var u=fi(t),h=t.gutter=R("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(h.setAttribute("aria-hidden","true"),e.display.input.setUneditable(h),u.insertBefore(h,t.text),t.line.gutterClass&&(h.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!a||!a["CodeMirror-linenumbers"])&&(t.lineNumber=h.appendChild(R("div",we(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),a)for(var v=0;v<e.display.gutterSpecs.length;++v){var y=e.display.gutterSpecs[v].className,E=a.hasOwnProperty(y)&&a[y];E&&h.appendChild(R("div",[E],"CodeMirror-gutter-elt","left: "+r.gutterLeft[y]+"px; width: "+r.gutterWidth[y]+"px"))}}}function Pl(e,t,n){t.alignable&&(t.alignable=null);for(var r=z("CodeMirror-linewidget"),i=t.node.firstChild,a=void 0;i;i=a)a=i.nextSibling,r.test(i.className)&&t.node.removeChild(i);ia(e,t,n)}function Rl(e,t,n,r){var i=ra(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),vo(e,t),na(e,t,n,r),ia(e,t,r),t.node}function ia(e,t,n){if(oa(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)oa(e,t.rest[r],t,n,!1)}function oa(e,t,n,r,i){if(t.widgets)for(var a=fi(n),u=0,h=t.widgets;u<h.length;++u){var v=h[u],y=R("div",[v.node],"CodeMirror-linewidget"+(v.className?" "+v.className:""));v.handleMouseEvents||y.setAttribute("cm-ignore-events","true"),Hl(v,y,n,r),e.display.input.setUneditable(y),i&&v.above?a.insertBefore(y,n.gutter||n.text):a.appendChild(y),Et(v,"redraw")}}function Hl(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function ci(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!ve(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),ce(t.display.measure,R("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function rn(e,t){for(var n=Hr(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Wi(e){return e.lineSpace.offsetTop}function go(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function aa(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=ce(e.measure,R("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return!isNaN(r.left)&&!isNaN(r.right)&&(e.cachedPaddingH=r),r}function Jr(e){return ye-e.display.nativeBarWidth}function Tn(e){return e.display.scroller.clientWidth-Jr(e)-e.display.barWidth}function mo(e){return e.display.scroller.clientHeight-Jr(e)-e.display.barHeight}function la(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(ge(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}}function sa(e,t,n,r){return Qr(e,Hn(e,t),n,r)}function yo(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[En(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Hn(e,t){var n=ge(t),r=yo(e,n);r&&!r.text?r=null:r&&r.changes&&(ta(e,r,n,wo(e)),e.curOp.forceUpdate=!0),r||(r=function Wl(e,t){var n=ge(t=l(t)),r=e.display.externalMeasured=new ht(e.doc,t,n);r.lineN=n;var i=r.built=Ve(e,r);return r.text=i.pre,ce(e.display.lineMeasure,i.pre),r}(e,t));var i=la(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Qr(e,t,n,r,i){t.before&&(n=-1);var u,a=n+(r||"");return t.cache.hasOwnProperty(a)?u=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function _l(e,t,n){var r=e.options.lineWrapping,i=r&&Tn(e);if(!t.measure.heights||r&&t.measure.width!=i){var a=t.measure.heights=[];if(r){t.measure.width=i;for(var u=t.text.firstChild.getClientRects(),h=0;h<u.length-1;h++){var v=u[h],y=u[h+1];Math.abs(v.bottom-y.bottom)>2&&a.push((v.bottom+y.top)/2-n.top)}}a.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(u=function Ul(e,t,n,r){var y,i=fa(t.map,n,r),a=i.node,u=i.start,h=i.end,v=i.collapse;if(3==a.nodeType){for(var E=0;E<4;E++){for(;u&&Fr(t.line.text.charAt(i.coverStart+u));)--u;for(;i.coverStart+h<i.coverEnd&&Fr(t.line.text.charAt(i.coverStart+h));)++h;if((y=C&&f<9&&0==u&&h==i.coverEnd-i.coverStart?a.parentNode.getBoundingClientRect():Kl(x(a,u,h).getClientRects(),r)).left||y.right||0==u)break;h=u,u-=1,v="right"}C&&f<11&&(y=function zl(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function nr(e){if(null!=Mt)return Mt;var t=ce(e,R("span","x")),n=t.getBoundingClientRect(),r=x(t,0,1).getBoundingClientRect();return Mt=Math.abs(n.left-r.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,y))}else{var B;u>0&&(v=r="right"),y=e.options.lineWrapping&&(B=a.getClientRects()).length>1?B["right"==r?B.length-1:0]:a.getBoundingClientRect()}if(C&&f<9&&!u&&(!y||!y.left&&!y.right)){var V=a.parentNode.getClientRects()[0];y=V?{left:V.left,right:V.left+Wn(e.display),top:V.top,bottom:V.bottom}:ua}for(var J=y.top-t.rect.top,he=y.bottom-t.rect.top,be=(J+he)/2,Te=t.view.measure.heights,Fe=0;Fe<Te.length-1&&!(be<Te[Fe]);Fe++);var Re={left:("right"==v?y.right:y.left)-t.rect.left,right:("left"==v?y.left:y.right)-t.rect.left,top:Fe?Te[Fe-1]:0,bottom:Te[Fe]};return!y.left&&!y.right&&(Re.bogus=!0),e.options.singleCursorHeightPerLine||(Re.rtop=J,Re.rbottom=he),Re}(e,t,n,r)).bogus||(t.cache[a]=u)),{left:u.left,right:u.right,top:i?u.rtop:u.top,bottom:i?u.rbottom:u.bottom}}var An,ua={left:0,right:0,top:0,bottom:0};function fa(e,t,n){for(var r,i,a,u,h,v,y=0;y<e.length;y+=3)if(v=e[y+1],t<(h=e[y])?(i=0,a=1,u="left"):t<v?a=1+(i=t-h):(y==e.length-3||t==v&&e[y+3]>t)&&(i=(a=v-h)-1,t>=v&&(u="right")),null!=i){if(r=e[y+2],h==v&&n==(r.insertLeft?"left":"right")&&(u=n),"left"==n&&0==i)for(;y&&e[y-2]==e[y-3]&&e[y-1].insertLeft;)r=e[2+(y-=3)],u="left";if("right"==n&&i==v-h)for(;y<e.length-3&&e[y+3]==e[y+4]&&!e[y+5].insertLeft;)r=e[(y+=3)+2],u="right";break}return{node:r,start:i,end:a,collapse:u,coverStart:h,coverEnd:v}}function Kl(e,t){var n=ua;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function ca(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function ha(e){e.display.externalMeasure=null,Y(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)ca(e.display.view[t])}function hi(e){ha(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function da(e){return q&&re?-(e.body.getBoundingClientRect().left-parseInt(getComputedStyle(e.body).marginLeft)):e.defaultView.pageXOffset||(e.documentElement||e.body).scrollLeft}function pa(e){return q&&re?-(e.body.getBoundingClientRect().top-parseInt(getComputedStyle(e.body).marginTop)):e.defaultView.pageYOffset||(e.documentElement||e.body).scrollTop}function xo(e){var n=l(e).widgets,r=0;if(n)for(var i=0;i<n.length;++i)n[i].above&&(r+=ci(n[i]));return r}function Ki(e,t,n,r,i){if(!i){var a=xo(t);n.top+=a,n.bottom+=a}if("line"==r)return n;r||(r="local");var u=A(t);if("local"==r?u+=Wi(e.display):u-=e.display.viewOffset,"page"==r||"window"==r){var h=e.display.lineSpace.getBoundingClientRect();u+=h.top+("window"==r?0:pa(Ge(e)));var v=h.left+("window"==r?0:da(Ge(e)));n.left+=v,n.right+=v}return n.top+=u,n.bottom+=u,n}function va(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=da(Ge(e)),i-=pa(Ge(e));else if("local"==n||!n){var a=e.display.sizer.getBoundingClientRect();r+=a.left,i+=a.top}var u=e.display.lineSpace.getBoundingClientRect();return{left:r-u.left,top:i-u.top}}function Ui(e,t,n,r,i){return r||(r=_e(e.doc,t.line)),Ki(e,r,sa(e,r,t.ch,i),n)}function Kr(e,t,n,r,i,a){function u(he,be){var Te=Qr(e,i,he,be?"right":"left",a);return be?Te.left=Te.right:Te.right=Te.left,Ki(e,r,Te,n)}r=r||_e(e.doc,t.line),i||(i=Hn(e,r));var h=_t(r,e.doc.direction),v=t.ch,y=t.sticky;if(v>=r.text.length?(v=r.text.length,y="before"):v<=0&&(v=0,y="after"),!h)return u("before"==y?v-1:v,"before"==y);function E(he,be,Te){return u(Te?he-1:he,1==h[be].level!=Te)}var B=Tt(h,v,y),V=qe,J=E(v,B,"before"==y);return null!=V&&(J.other=E(v,V,"before"!=y)),J}function ga(e,t){var n=0;t=De(e.doc,t),e.options.lineWrapping||(n=Wn(e.display)*t.ch);var r=_e(e.doc,t.line),i=A(r)+Wi(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function ko(e,t,n,r,i){var a=d(e,t,n);return a.xRel=i,r&&(a.outside=r),a}function bo(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return ko(r.first,0,null,-1,-1);var i=U(r,n),a=r.first+r.size-1;if(i>a)return ko(r.first+r.size-1,_e(r,a).text.length,null,1,1);t<0&&(t=0);for(var u=_e(r,i);;){var h=Gl(e,u,i,t,n),v=po(u,h.ch+(h.xRel>0||h.outside>0?1:0));if(!v)return h;var y=v.find(1);if(y.line==i)return y;u=_e(r,i=y.line)}}function ma(e,t,n,r){r-=xo(t);var i=t.text.length,a=Lt(function(u){return Qr(e,n,u-1).bottom<=r},i,0);return{begin:a,end:i=Lt(function(u){return Qr(e,n,u).top>r},a,i)}}function ya(e,t,n,r){return n||(n=Hn(e,t)),ma(e,t,n,Ki(e,t,Qr(e,n,r),"line").top)}function Co(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function Gl(e,t,n,r,i){i-=A(t);var a=Hn(e,t),u=xo(t),h=0,v=t.text.length,y=!0,E=_t(t,e.doc.direction);if(E){var B=(e.options.lineWrapping?Zl:jl)(e,t,n,a,E,r,i);h=(y=1!=B.level)?B.from:B.to-1,v=y?B.to:B.from-1}var be,Te,V=null,J=null,he=Lt(function(Qe){var je=Qr(e,a,Qe);return je.top+=u,je.bottom+=u,!!Co(je,r,i,!1)&&(je.top<=i&&je.left<=r&&(V=Qe,J=je),!0)},h,v),Fe=!1;if(J){var Be=r-J.left<J.right-r,Ie=Be==y;he=V+(Ie?0:1),Te=Ie?"after":"before",be=Be?J.left:J.right}else{!y&&(he==v||he==h)&&he++,Te=0==he?"after":he==t.text.length?"before":Qr(e,a,he-(y?1:0)).bottom+u<=i==y?"after":"before";var Re=Kr(e,d(n,he,Te),"line",t,a);be=Re.left,Fe=i<Re.top?-1:i>=Re.bottom?1:0}return ko(n,he=Ir(t.text,he,1),Te,Fe,r-be)}function jl(e,t,n,r,i,a,u){var h=Lt(function(B){var V=i[B],J=1!=V.level;return Co(Kr(e,d(n,J?V.to:V.from,J?"before":"after"),"line",t,r),a,u,!0)},0,i.length-1),v=i[h];if(h>0){var y=1!=v.level,E=Kr(e,d(n,y?v.from:v.to,y?"after":"before"),"line",t,r);Co(E,a,u,!0)&&E.top>u&&(v=i[h-1])}return v}function Zl(e,t,n,r,i,a,u){var h=ma(e,t,r,u),v=h.begin,y=h.end;/\s/.test(t.text.charAt(y-1))&&y--;for(var E=null,B=null,V=0;V<i.length;V++){var J=i[V];if(!(J.from>=y||J.to<=v)){var be=Qr(e,r,1!=J.level?Math.min(y,J.to)-1:Math.max(v,J.from)).right,Te=be<a?a-be+1e9:be-a;(!E||B>Te)&&(E=J,B=Te)}}return E||(E=i[i.length-1]),E.from<v&&(E={from:v,to:E.to,level:E.level}),E.to>y&&(E={from:E.from,to:y,level:E.level}),E}function _n(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==An){An=R("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)An.appendChild(document.createTextNode("x")),An.appendChild(R("br"));An.appendChild(document.createTextNode("x"))}ce(e.measure,An);var n=An.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),Y(e.measure),n||1}function Wn(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=R("span","xxxxxxxxxx"),n=R("pre",[t],"CodeMirror-line-like");ce(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function wo(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,a=t.gutters.firstChild,u=0;a;a=a.nextSibling,++u){var h=e.display.gutterSpecs[u].className;n[h]=a.offsetLeft+a.clientLeft+i,r[h]=a.clientWidth}return{fixedPos:So(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function So(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function xa(e){var t=_n(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/Wn(e.display)-3);return function(i){if(S(e.doc,i))return 0;var a=0;if(i.widgets)for(var u=0;u<i.widgets.length;u++)i.widgets[u].height&&(a+=i.widgets[u].height);return n?a+(Math.ceil(i.text.length/r)||1)*t:a+t}}function Lo(e){var t=e.doc,n=xa(e);t.iter(function(r){var i=n(r);i!=r.height&&Pt(r,i)})}function Mn(e,t,n,r){var i=e.display;if(!n&&"true"==Hr(t).getAttribute("cm-not-content"))return null;var a,u,h=i.lineSpace.getBoundingClientRect();try{a=t.clientX-h.left,u=t.clientY-h.top}catch{return null}var y,v=bo(e,a,u);if(r&&v.xRel>0&&(y=_e(e.doc,v.line).text).length==v.ch){var E=F(y,y.length,e.options.tabSize)-y.length;v=d(v.line,Math.max(0,Math.round((a-aa(e.display).left)/Wn(e.display))-E))}return v}function En(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function gr(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Pr&&p(e.doc,t)<i.viewTo&&hn(e);else if(n<=i.viewFrom)Pr&&g(e.doc,n+r)>i.viewFrom?hn(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)hn(e);else if(t<=i.viewFrom){var a=zi(e,n,n+r,1);a?(i.view=i.view.slice(a.index),i.viewFrom=a.lineN,i.viewTo+=r):hn(e)}else if(n>=i.viewTo){var u=zi(e,t,t,-1);u?(i.view=i.view.slice(0,u.index),i.viewTo=u.lineN):hn(e)}else{var h=zi(e,t,t,-1),v=zi(e,n,n+r,1);h&&v?(i.view=i.view.slice(0,h.index).concat(ot(e,h.lineN,v.lineN)).concat(i.view.slice(v.index)),i.viewTo+=r):hn(e)}var y=i.externalMeasured;y&&(n<y.lineN?y.lineN+=r:t<y.lineN+y.size&&(i.externalMeasured=null))}function cn(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var a=r.view[En(e,t)];if(null!=a.node){var u=a.changes||(a.changes=[]);-1==te(u,n)&&u.push(n)}}}function hn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function zi(e,t,n,r){var a,i=En(e,t),u=e.display.view;if(!Pr||n==e.doc.first+e.doc.size)return{index:i,lineN:n};for(var h=e.display.viewFrom,v=0;v<i;v++)h+=u[v].size;if(h!=t){if(r>0){if(i==u.length-1)return null;a=h+u[i].size-t,i++}else a=h-t;t+=a,n+=a}for(;p(e.doc,n)!=n;){if(i==(r<0?0:u.length-1))return null;n+=r*u[i-(r<0?1:0)].size,i+=r}return{index:i,lineN:n}}function ka(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];!i.hidden&&(!i.node||i.changes)&&++n}return n}function di(e){e.display.input.showSelection(e.display.input.prepareSelection())}function ba(e,t){void 0===t&&(t=!0);var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),a=r.selection=document.createDocumentFragment(),u=e.options.$customCursor;u&&(t=!0);for(var h=0;h<n.sel.ranges.length;h++)if(t||h!=n.sel.primIndex){var v=n.sel.ranges[h];if(!(v.from().line>=e.display.viewTo||v.to().line<e.display.viewFrom)){var y=v.empty();if(u){var E=u(e,v);E&&To(e,E,i)}else(y||e.options.showCursorWhenSelecting)&&To(e,v.head,i);y||Jl(e,v,a)}}return r}function To(e,t,n){var r=Kr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(R("div","\xa0","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var a=Ui(e,t,"div",null,null),u=a.right-a.left;i.style.width=(u>0?u:e.defaultCharWidth())+"px"}if(r.other){var h=n.appendChild(R("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));h.style.display="",h.style.left=r.other.left+"px",h.style.top=r.other.top+"px",h.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function Gi(e,t){return e.top-t.top||e.left-t.left}function Jl(e,t,n){var r=e.display,i=e.doc,a=document.createDocumentFragment(),u=aa(e.display),h=u.left,v=Math.max(r.sizerWidth,Tn(e)-r.sizer.offsetLeft)-u.right,y="ltr"==i.direction;function E(Ie,Re,Qe,je){Re<0&&(Re=0),Re=Math.round(Re),je=Math.round(je),a.appendChild(R("div",null,"CodeMirror-selected","position: absolute; left: "+Ie+"px;\n                             top: "+Re+"px; width: "+(Qe??v-Ie)+"px;\n                             height: "+(je-Re)+"px"))}function B(Ie,Re,Qe){var gt,Jt,je=_e(i,Ie),nt=je.text.length;function wt(Rt,xr){return Ui(e,d(Ie,Rt),"div",je,xr)}function Mr(Rt,xr,tr){var Kt=ya(e,je,null,Rt),Ht="ltr"==xr==("after"==tr)?"left":"right";return wt("after"==tr?Kt.begin:Kt.end-(/\s/.test(je.text.charAt(Kt.end-1))?2:1),Ht)[Ht]}var yr=_t(je,i.direction);return function Nt(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,a=0;a<e.length;++a){var u=e[a];(u.from<n&&u.to>t||t==n&&u.to==t)&&(r(Math.max(u.from,t),Math.min(u.to,n),1==u.level?"rtl":"ltr",a),i=!0)}i||r(t,n,"ltr")}(yr,Re||0,Qe??nt,function(Rt,xr,tr,Kt){var Ht="ltr"==tr,Dt=wt(Rt,Ht?"left":"right"),kr=wt(xr-1,Ht?"right":"left"),$n=null==Re&&0==Rt,yn=null==Qe&&xr==nt,lr=0==Kt,Xr=!yr||Kt==yr.length-1;if(kr.top-Dt.top<=3){var an=(y?$n:yn)&&lr?h:(Ht?Dt:kr).left;E(an,Dt.top,((y?yn:$n)&&Xr?v:(Ht?kr:Dt).right)-an,Dt.bottom)}else{var Bn,dr,ei,ea;Ht?(Bn=y&&$n&&lr?h:Dt.left,dr=y?v:Mr(Rt,tr,"before"),ei=y?h:Mr(xr,tr,"after"),ea=y&&yn&&Xr?v:kr.right):(Bn=y?Mr(Rt,tr,"before"):h,dr=!y&&$n&&lr?v:Dt.right,ei=!y&&yn&&Xr?h:kr.left,ea=y?Mr(xr,tr,"after"):v),E(Bn,Dt.top,dr-Bn,Dt.bottom),Dt.bottom<kr.top&&E(h,Dt.bottom,null,kr.top),E(ei,kr.top,ea-ei,kr.bottom)}(!gt||Gi(Dt,gt)<0)&&(gt=Dt),Gi(kr,gt)<0&&(gt=kr),(!Jt||Gi(Dt,Jt)<0)&&(Jt=Dt),Gi(kr,Jt)<0&&(Jt=kr)}),{start:gt,end:Jt}}var V=t.from(),J=t.to();if(V.line==J.line)B(V.line,V.ch,J.ch);else{var he=_e(i,V.line),be=_e(i,J.line),Te=l(he)==l(be),Fe=B(V.line,V.ch,Te?he.text.length+1:null).end,Be=B(J.line,Te?0:null,J.ch).start;Te&&(Fe.top<Be.top-2?(E(Fe.right,Fe.top,null,Fe.bottom),E(h,Be.top,Be.left,Be.bottom)):E(Fe.right,Fe.top,Be.left-Fe.right,Fe.bottom)),Fe.bottom<Be.top&&E(h,Fe.bottom,null,Be.top)}n.appendChild(a)}function Ao(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||Kn(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Ca(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Eo(e))}function Mo(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Kn(e))},100)}function Eo(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(at(e,"focus",e,t),e.state.focused=!0,Se(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),I&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Ao(e))}function Kn(e,t){e.state.delayingBlurEvent||(e.state.focused&&(at(e,"blur",e,t),e.state.focused=!1,ne(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function ji(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=Math.max(0,t.scroller.getBoundingClientRect().top),i=t.lineDiv.getBoundingClientRect().top,a=0,u=0;u<t.view.length;u++){var h=t.view[u],v=e.options.lineWrapping,y=void 0,E=0;if(!h.hidden){if(i+=h.line.height,C&&f<8){var B=h.node.offsetTop+h.node.offsetHeight;y=B-n,n=B}else{var V=h.node.getBoundingClientRect();y=V.bottom-V.top,!v&&h.text.firstChild&&(E=h.text.firstChild.getBoundingClientRect().right-V.left-1)}var J=h.line.height-y;if((J>.005||J<-.005)&&(i<r&&(a-=J),Pt(h.line,y),wa(h.line),h.rest))for(var he=0;he<h.rest.length;he++)wa(h.rest[he]);if(E>e.display.sizerWidth){var be=Math.ceil(E/Wn(e.display));be>e.display.maxLineLength&&(e.display.maxLineLength=be,e.display.maxLine=h.line,e.display.maxLineChanged=!0)}}}Math.abs(a)>2&&(t.scroller.scrollTop+=a)}function wa(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function Zi(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Wi(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,a=U(t,r),u=U(t,i);if(n&&n.ensure){var h=n.ensure.from.line,v=n.ensure.to.line;h<a?(a=h,u=U(t,A(_e(t,h))+e.wrapper.clientHeight)):Math.min(v,t.lastLine())>=u&&(a=U(t,A(_e(t,v))-e.wrapper.clientHeight),u=v)}return{from:a,to:Math.max(u,a+1)}}function Do(e,t){var n=e.display,r=_n(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,a=mo(e),u={};t.bottom-t.top>a&&(t.bottom=t.top+a);var h=e.doc.height+go(n),y=t.bottom>h-r;if(t.top<i)u.scrollTop=t.top<r?0:t.top;else if(t.bottom>i+a){var E=Math.min(t.top,(y?h:t.bottom)-a);E!=i&&(u.scrollTop=E)}var B=e.options.fixedGutter?0:n.gutters.offsetWidth,V=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-B,J=Tn(e)-n.gutters.offsetWidth,he=t.right-t.left>J;return he&&(t.right=t.left+J),t.left<10?u.scrollLeft=0:t.left<V?u.scrollLeft=Math.max(0,t.left+B-(he?0:10)):t.right>J+V-3&&(u.scrollLeft=t.right+(he?0:10)-J),u}function Oo(e,t){null!=t&&(Yi(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Un(e){Yi(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function pi(e,t,n){(null!=t||null!=n)&&Yi(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Yi(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Sa(e,ga(e,t.from),ga(e,t.to),t.margin))}function Sa(e,t,n,r){var i=Do(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});pi(e,i.scrollLeft,i.scrollTop)}function vi(e,t){Math.abs(e.doc.scrollTop-t)<2||(T||Io(e,{top:t}),La(e,t,!0),T&&Io(e),yi(e,100))}function La(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Dn(e,t,n,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(!(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||r)&&(e.doc.scrollLeft=t,Da(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function gi(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+go(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Jr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var On=function(e,t,n){this.cm=n;var r=this.vert=R("div",[R("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=R("div",[R("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),Me(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),Me(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,C&&f<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};On.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;return n?(this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0",this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+(e.viewHeight-(t?r:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),t?(this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+(e.viewWidth-e.barLeft-(n?r:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},On.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},On.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},On.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=_&&!le?"12px":"18px",this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Z,this.disableVert=new Z},On.prototype.enableZeroWidthBar=function(e,t,n){e.style.visibility="",t.set(1e3,function r(){var i=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.visibility="hidden":t.set(1e3,r)})},On.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var mi=function(){};function zn(e,t){t||(t=gi(e));var n=e.display.barWidth,r=e.display.barHeight;Ta(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&ji(e),Ta(e,gi(e)),n=e.display.barWidth,r=e.display.barHeight}function Ta(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}mi.prototype.update=function(){return{bottom:0,right:0}},mi.prototype.setScrollLeft=function(){},mi.prototype.setScrollTop=function(){},mi.prototype.clear=function(){};var Aa={native:On,null:mi};function Ma(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&ne(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Aa[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),Me(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?Dn(e,t):vi(e,t)},e),e.display.scrollbars.addClass&&Se(e.display.wrapper,e.display.scrollbars.addClass)}var $l=0;function Fn(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++$l,markArrays:null},function cr(e){Ct?Ct.ops.push(e):e.ownsGroup=Ct={ops:[e],delayedCallbacks:[]}}(e.curOp)}function In(e){var t=e.curOp;t&&function tn(e,t){var n=e.ownsGroup;if(n)try{!function jt(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{Ct=null,t(n)}}(t,function(n){for(var r=0;r<n.ops.length;r++)n.ops[r].cm.curOp=null;!function es(e){for(var t=e.ops,n=0;n<t.length;n++)ts(t[n]);for(var r=0;r<t.length;r++)rs(t[r]);for(var i=0;i<t.length;i++)ns(t[i]);for(var a=0;a<t.length;a++)is(t[a]);for(var u=0;u<t.length;u++)os(t[u])}(n)})}function ts(e){var t=e.cm,n=t.display;(function ls(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Jr(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Jr(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&j(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Ji(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function rs(e){e.updatedDisplay=e.mustUpdate&&Fo(e.cm,e.update)}function ns(e){var t=e.cm,n=t.display;e.updatedDisplay&&ji(t),e.barMeasure=gi(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=sa(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Jr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Tn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function is(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Dn(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==fe(Ge(t));e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&zn(t,e.barMeasure),e.updatedDisplay&&Bo(t,e.barMeasure),e.selectionChanged&&Ao(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&Ca(e.cm)}function os(e){var t=e.cm,n=t.display,r=t.doc;e.updatedDisplay&&Ea(t,e.update),null!=n.wheelStartX&&(null!=e.scrollTop||null!=e.scrollLeft||e.scrollToPos)&&(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&La(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Dn(t,e.scrollLeft,!0,!0),e.scrollToPos&&function Ql(e,t){if(!ft(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null,a=n.wrapper.ownerDocument;if(t.top+r.top<0?i=!0:t.bottom+r.top>(a.defaultView.innerHeight||a.documentElement.clientHeight)&&(i=!1),null!=i&&!Ae){var u=R("div","\u200b",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-Wi(e.display))+"px;\n                         height: "+(t.bottom-t.top+Jr(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(u),u.scrollIntoView(i),e.display.lineSpace.removeChild(u)}}}(t,function Xl(e,t,n,r){var i;null==r&&(r=0),!e.options.lineWrapping&&t==n&&(n="before"==t.sticky?d(t.line,t.ch+1,"before"):t,t=t.ch?d(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t);for(var a=0;a<5;a++){var u=!1,h=Kr(e,t),v=n&&n!=t?Kr(e,n):h,y=Do(e,i={left:Math.min(h.left,v.left),top:Math.min(h.top,v.top)-r,right:Math.max(h.left,v.left),bottom:Math.max(h.bottom,v.bottom)+r}),E=e.doc.scrollTop,B=e.doc.scrollLeft;if(null!=y.scrollTop&&(vi(e,y.scrollTop),Math.abs(e.doc.scrollTop-E)>1&&(u=!0)),null!=y.scrollLeft&&(Dn(e,y.scrollLeft),Math.abs(e.doc.scrollLeft-B)>1&&(u=!0)),!u)break}return i}(t,De(r,e.scrollToPos.from),De(r,e.scrollToPos.to),e.scrollToPos.margin));var a=e.maybeHiddenMarkers,u=e.maybeUnhiddenMarkers;if(a)for(var h=0;h<a.length;++h)a[h].lines.length||at(a[h],"hide");if(u)for(var v=0;v<u.length;++v)u[v].lines.length&&at(u[v],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&at(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Ar(e,t){if(e.curOp)return t();Fn(e);try{return t()}finally{In(e)}}function Zt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Fn(e);try{return t.apply(e,arguments)}finally{In(e)}}}function hr(e){return function(){if(this.curOp)return e.apply(this,arguments);Fn(this);try{return e.apply(this,arguments)}finally{In(this)}}}function Yt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Fn(t);try{return e.apply(this,arguments)}finally{In(t)}}}function yi(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,k(as,e))}function as(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=$r(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(a){if(r.line>=e.display.viewFrom){var u=a.styles,h=a.text.length>e.options.maxHighlightLength?zt(t.mode,r.state):null,v=Yr(e,a,r,!0);h&&(r.state=h),a.styles=v.styles;var y=a.styleClasses,E=v.classes;E?a.styleClasses=E:y&&(a.styleClasses=null);for(var B=!u||u.length!=a.styles.length||y!=E&&(!y||!E||y.bgClass!=E.bgClass||y.textClass!=E.textClass),V=0;!B&&V<u.length;++V)B=u[V]!=a.styles[V];B&&i.push(r.line),a.stateAfter=r.save(),r.nextLine()}else a.text.length<=e.options.maxHighlightLength&&en(e,a.text,r),a.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return yi(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&Ar(e,function(){for(var a=0;a<i.length;a++)cn(e,i[a],"text")})}}var Ji=function(e,t,n){var r=e.display;this.viewport=t,this.visible=Zi(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Tn(e),this.force=n,this.dims=wo(e),this.events=[]};function Fo(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return hn(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==ka(e))return!1;Oa(e)&&(hn(e),t.dims=wo(e));var i=r.first+r.size,a=Math.max(t.visible.from-e.options.viewportMargin,r.first),u=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<a&&a-n.viewFrom<20&&(a=Math.max(r.first,n.viewFrom)),n.viewTo>u&&n.viewTo-u<20&&(u=Math.min(i,n.viewTo)),Pr&&(a=p(e.doc,a),u=g(e.doc,u));var h=a!=n.viewFrom||u!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;(function Yl(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=ot(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=ot(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(En(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(ot(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,En(e,n)))),r.viewTo=n})(e,a,u),n.viewOffset=A(_e(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var v=ka(e);if(!h&&0==v&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var y=function ss(e){if(e.hasFocus())return null;var t=fe(Ge(e));if(!t||!ve(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=N(e).getSelection();r.anchorNode&&r.extend&&ve(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(e);return v>4&&(n.lineDiv.style.display="none"),function fs(e,t,n){var r=e.display,i=e.options.lineNumbers,a=r.lineDiv,u=a.firstChild;function h(he){var be=he.nextSibling;return I&&_&&e.display.currentWheelTarget==he?he.style.display="none":he.parentNode.removeChild(he),be}for(var v=r.view,y=r.viewFrom,E=0;E<v.length;E++){var B=v[E];if(!B.hidden)if(B.node&&B.node.parentNode==a){for(;u!=B.node;)u=h(u);var J=i&&null!=t&&t<=y&&B.lineNumber;B.changes&&(te(B.changes,"gutter")>-1&&(J=!1),ta(e,B,y,n)),J&&(Y(B.lineNumber),B.lineNumber.appendChild(document.createTextNode(we(e.options,y)))),u=B.node.nextSibling}else{var V=Rl(e,B,y,n);a.insertBefore(V,u)}y+=B.size}for(;u;)u=h(u)}(e,n.updateLineNumbers,t.dims),v>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function us(e){if(e&&e.activeElt&&e.activeElt!=fe(e.activeElt.ownerDocument)&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&ve(document.body,e.anchorNode)&&ve(document.body,e.focusNode))){var t=e.activeElt.ownerDocument,n=t.defaultView.getSelection(),r=t.createRange();r.setEnd(e.anchorNode,e.anchorOffset),r.collapse(!1),n.removeAllRanges(),n.addRange(r),n.extend(e.focusNode,e.focusOffset)}}(y),Y(n.cursorDiv),Y(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,h&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,yi(e,400)),n.updateLineNumbers=null,!0}function Ea(e,t){for(var n=t.viewport,r=!0;;r=!1){if(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Tn(e))r&&(t.visible=Zi(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+go(e.display)-mo(e),n.top)}),t.visible=Zi(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!Fo(e,t))break;ji(e);var i=gi(e);di(e),zn(e,i),Bo(e,i),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Io(e,t){var n=new Ji(e,t);if(Fo(e,n)){ji(e),Ea(e,n);var r=gi(e);di(e),zn(e,r),Bo(e,r),n.finish()}}function No(e){e.sizer.style.marginLeft=e.gutters.offsetWidth+"px",Et(e,"gutterChanged",e)}function Bo(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Jr(e)+"px"}function Da(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=So(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,a=r+"px",u=0;u<n.length;u++)if(!n[u].hidden){e.options.fixedGutter&&(n[u].gutter&&(n[u].gutter.style.left=a),n[u].gutterBackground&&(n[u].gutterBackground.style.left=a));var h=n[u].alignable;if(h)for(var v=0;v<h.length;v++)h[v].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function Oa(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=we(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(R("div",[R("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=i.firstChild.offsetWidth,u=i.offsetWidth-a;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(a,r.lineGutter.offsetWidth-u)+1,r.lineNumWidth=r.lineNumInnerWidth+u,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",No(e.display),!0}return!1}function Po(e,t){for(var n=[],r=!1,i=0;i<e.length;i++){var a=e[i],u=null;if("string"!=typeof a&&(u=a.style,a=a.className),"CodeMirror-linenumbers"==a){if(!t)continue;r=!0}n.push({className:a,style:u})}return t&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function Fa(e){var t=e.gutters,n=e.gutterSpecs;Y(t),e.lineGutter=null;for(var r=0;r<n.length;++r){var i=n[r],a=i.className,u=i.style,h=t.appendChild(R("div",null,"CodeMirror-gutter "+a));u&&(h.style.cssText=u),"CodeMirror-linenumbers"==a&&(e.lineGutter=h,h.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",No(e)}function xi(e){Fa(e.display),gr(e),Da(e)}function cs(e,t,n,r){var i=this;this.input=n,i.scrollbarFiller=R("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=R("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=me("div",null,"CodeMirror-code"),i.selectionDiv=R("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=R("div",null,"CodeMirror-cursors"),i.measure=R("div",null,"CodeMirror-measure"),i.lineMeasure=R("div",null,"CodeMirror-measure"),i.lineSpace=me("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var a=me("div",[i.lineSpace],"CodeMirror-lines");i.mover=R("div",[a],null,"position: relative"),i.sizer=R("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=R("div",null,null,"position: absolute; height: "+ye+"px; width: 1px;"),i.gutters=R("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=R("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=R("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),q&&X>=105&&(i.wrapper.style.clipPath="inset(0px)"),i.wrapper.setAttribute("translate","no"),C&&f<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),!I&&!(T&&D)&&(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,i.gutterSpecs=Po(r.gutters,r.lineNumbers),Fa(i),n.init(i)}Ji.prototype.signal=function(e,t){rt(e,t)&&this.events.push(arguments)},Ji.prototype.finish=function(){for(var e=0;e<this.events.length;e++)at.apply(null,this.events[e])};var Qi=0,nn=null;function Ia(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function hs(e){var t=Ia(e);return t.x*=nn,t.y*=nn,t}function Na(e,t){q&&102==X&&(null==e.display.chromeScrollHack?e.display.sizer.style.pointerEvents="none":clearTimeout(e.display.chromeScrollHack),e.display.chromeScrollHack=setTimeout(function(){e.display.chromeScrollHack=null,e.display.sizer.style.pointerEvents=""},100));var n=Ia(t),r=n.x,i=n.y,a=nn;0===t.deltaMode&&(r=t.deltaX,i=t.deltaY,a=1);var u=e.display,h=u.scroller,y=h.scrollHeight>h.clientHeight;if(r&&h.scrollWidth>h.clientWidth||i&&y){if(i&&_&&I)e:for(var E=t.target,B=u.view;E!=h;E=E.parentNode)for(var V=0;V<B.length;V++)if(B[V].node==E){e.display.currentWheelTarget=E;break e}if(r&&!T&&!K&&null!=a)return i&&y&&vi(e,Math.max(0,h.scrollTop+i*a)),Dn(e,Math.max(0,h.scrollLeft+r*a)),(!i||i&&y)&&At(t),void(u.wheelStartX=null);if(i&&null!=a){var J=i*a,he=e.doc.scrollTop,be=he+u.wrapper.clientHeight;J<0?he=Math.max(0,he+J-50):be=Math.min(e.doc.height,be+J+50),Io(e,{top:he,bottom:be})}Qi<20&&0!==t.deltaMode&&(null==u.wheelStartX?(u.wheelStartX=h.scrollLeft,u.wheelStartY=h.scrollTop,u.wheelDX=r,u.wheelDY=i,setTimeout(function(){if(null!=u.wheelStartX){var Te=h.scrollLeft-u.wheelStartX,Fe=h.scrollTop-u.wheelStartY,Be=Fe&&u.wheelDY&&Fe/u.wheelDY||Te&&u.wheelDX&&Te/u.wheelDX;u.wheelStartX=u.wheelStartY=null,Be&&(nn=(nn*Qi+Be)/(Qi+1),++Qi)}},200)):(u.wheelDX+=r,u.wheelDY+=i))}}C?nn=-.53:T?nn=15:q?nn=-.7:ae&&(nn=-1/3);var Or=function(e,t){this.ranges=e,this.primIndex=t};Or.prototype.primary=function(){return this.ranges[this.primIndex]},Or.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!oe(n.anchor,r.anchor)||!oe(n.head,r.head))return!1}return!0},Or.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new dt(ke(this.ranges[t].anchor),ke(this.ranges[t].head));return new Or(e,this.primIndex)},Or.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},Or.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(w(t,r.from())>=0&&w(e,r.to())<=0)return n}return-1};var dt=function(e,t){this.anchor=e,this.head=t};function Ur(e,t,n){var r=e&&e.options.selectionsMayTouch,i=t[n];t.sort(function(V,J){return w(V.from(),J.from())}),n=te(t,i);for(var a=1;a<t.length;a++){var u=t[a],h=t[a-1],v=w(h.to(),u.from());if(r&&!u.empty()?v>0:v>=0){var y=Je(h.from(),u.from()),E=We(h.to(),u.to()),B=h.empty()?u.from()==u.head:h.from()==h.head;a<=n&&--n,t.splice(--a,2,new dt(B?E:y,B?y:E))}}return new Or(t,n)}function dn(e,t){return new Or([new dt(e,t||e)],0)}function pn(e){return e.text?d(e.from.line+e.text.length-1,Ze(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Ba(e,t){if(w(e,t.from)<0)return e;if(w(e,t.to)<=0)return pn(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=pn(t).ch-t.to.ch),d(n,r)}function Ro(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new dt(Ba(i.anchor,t),Ba(i.head,t)))}return Ur(e.cm,n,e.sel.primIndex)}function Pa(e,t,n){return e.line==t.line?d(n.line,e.ch-t.ch+n.ch):d(n.line+(e.line-t.line),e.ch)}function Ho(e){e.doc.mode=ir(e.options,e.doc.modeOption),ki(e)}function ki(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,yi(e,100),e.state.modeGen++,e.curOp&&gr(e)}function Ra(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Ze(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function _o(e,t,n,r){function i(Be){return n?n[Be]:null}function a(Be,Ie,Re){(function xe(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),ai(e),li(e,n);var i=r?r(e):1;i!=e.height&&Pt(e,i)})(Be,Ie,Re,r),Et(Be,"change",Be,t)}function u(Be,Ie){for(var Re=[],Qe=Be;Qe<Ie;++Qe)Re.push(new ue(y[Qe],i(Qe),r));return Re}var h=t.from,v=t.to,y=t.text,E=_e(e,h.line),B=_e(e,v.line),V=Ze(y),J=i(y.length-1),he=v.line-h.line;if(t.full)e.insert(0,u(0,y.length)),e.remove(y.length,e.size-y.length);else if(Ra(e,t)){var be=u(0,y.length-1);a(B,B.text,J),he&&e.remove(h.line,he),be.length&&e.insert(h.line,be)}else if(E==B)if(1==y.length)a(E,E.text.slice(0,h.ch)+V+E.text.slice(v.ch),J);else{var Te=u(1,y.length-1);Te.push(new ue(V+E.text.slice(v.ch),J,r)),a(E,E.text.slice(0,h.ch)+y[0],i(0)),e.insert(h.line+1,Te)}else if(1==y.length)a(E,E.text.slice(0,h.ch)+y[0]+B.text.slice(v.ch),i(0)),e.remove(h.line+1,he);else{a(E,E.text.slice(0,h.ch)+y[0],i(0)),a(B,V+B.text.slice(v.ch),J);var Fe=u(1,y.length-1);he>1&&e.remove(h.line+1,he-1),e.insert(h.line+1,Fe)}Et(e,"change",e,t)}function vn(e,t,n){!function r(i,a,u){if(i.linked)for(var h=0;h<i.linked.length;++h){var v=i.linked[h];if(v.doc!=a){var y=u&&v.sharedHist;n&&!y||(t(v.doc,y),r(v.doc,i,y))}}}(e,null,!0)}function Ha(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Lo(e),Ho(e),_a(e),e.options.direction=t.direction,e.options.lineWrapping||j(e),e.options.mode=t.modeOption,gr(e)}function _a(e){("rtl"==e.doc.direction?Se:ne)(e.display.lineDiv,"CodeMirror-rtl")}function Xi(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Wo(e,t){var n={from:ke(t.from),to:pn(t),text:Tr(e,t.from,t.to)};return Ua(e,n,t.from.line,t.to.line+1),vn(e,function(r){return Ua(r,n,t.from.line,t.to.line+1)},!0),n}function Wa(e){for(;e.length&&Ze(e).ranges;)e.pop()}function Ka(e,t,n,r){var i=e.history;i.undone.length=0;var u,h,a=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(u=function vs(e,t){return t?(Wa(e.done),Ze(e.done)):e.done.length&&!Ze(e.done).ranges?Ze(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Ze(e.done)):void 0}(i,i.lastOp==r)))h=Ze(u.changes),0==w(t.from,t.to)&&0==w(t.from,h.to)?h.to=pn(t):u.changes.push(Wo(e,t));else{var v=Ze(i.done);for((!v||!v.ranges)&&Vi(e.sel,i.done),u={changes:[Wo(e,t)],generation:i.generation},i.done.push(u);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,h||at(e,"historyAdded")}function ms(e,t,n,r){var i=e.history,a=r&&r.origin;n==i.lastSelOp||a&&i.lastSelOrigin==a&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==a||function gs(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,a,Ze(i.done),t))?i.done[i.done.length-1]=t:Vi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=a,i.lastSelOp=n,r&&!1!==r.clearRedo&&Wa(i.undone)}function Vi(e,t){var n=Ze(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Ua(e,t,n,r){var i=t["spans_"+e.id],a=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(u){u.markedSpans&&((i||(i=t["spans_"+e.id]={}))[a]=u.markedSpans),++a})}function ys(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function za(e,t){var n=function xs(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(ys(n[i]));return r}(e,t),r=oi(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var a=n[i],u=r[i];if(a&&u)e:for(var h=0;h<u.length;++h){for(var v=u[h],y=0;y<a.length;++y)if(a[y].marker==v.marker)continue e;a.push(v)}else u&&(n[i]=u)}return n}function Gn(e,t,n){for(var r=[],i=0;i<e.length;++i){var a=e[i];if(a.ranges)r.push(n?Or.prototype.deepCopy.call(a):a);else{var u=a.changes,h=[];r.push({changes:h});for(var v=0;v<u.length;++v){var y=u[v],E=void 0;if(h.push({from:y.from,to:y.to,text:y.text}),t)for(var B in y)(E=B.match(/^spans_(\d+)$/))&&te(t,Number(E[1]))>-1&&(Ze(h)[B]=y[B],delete y[B])}}}return r}function Ko(e,t,n,r){if(r){var i=e.anchor;if(n){var a=w(t,i)<0;a!=w(n,i)<0?(i=t,t=n):a!=w(t,n)<0&&(t=n)}return new dt(i,t)}return new dt(n||t,t)}function qi(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),ar(e,new Or([Ko(e.sel.primary(),t,n,i)],0),r)}function Ga(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),a=0;a<e.sel.ranges.length;a++)r[a]=Ko(e.sel.ranges[a],t[a],null,i);ar(e,Ur(e.cm,r,e.sel.primIndex),n)}function Uo(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,ar(e,Ur(e.cm,i,e.sel.primIndex),r)}function ja(e,t,n,r){ar(e,dn(t,n),r)}function Za(e,t,n){var r=e.history.done,i=Ze(r);i&&i.ranges?(r[r.length-1]=t,$i(e,t,n)):ar(e,t,n)}function ar(e,t,n){$i(e,t,n),ms(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function $i(e,t,n){(rt(e,"beforeSelectionChange")||e.cm&&rt(e.cm,"beforeSelectionChange"))&&(t=function ks(e,t,n){var r={ranges:t.ranges,update:function(i){this.ranges=[];for(var a=0;a<i.length;a++)this.ranges[a]=new dt(De(e,i[a].anchor),De(e,i[a].head))},origin:n&&n.origin};return at(e,"beforeSelectionChange",e,r),e.cm&&at(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?Ur(e.cm,r.ranges,r.ranges.length-1):t}(e,t,n));var r=n&&n.bias||(w(t.primary().head,e.sel.primary().head)<0?-1:1);Ya(e,Qa(e,t,r,!0)),(!n||!1!==n.scroll)&&e.cm&&"nocursor"!=e.cm.getOption("readOnly")&&Un(e.cm)}function Ya(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,Cr(e.cm)),Et(e,"cursorActivity",e))}function Ja(e){Ya(e,Qa(e,e.sel,null,!1))}function Qa(e,t,n,r){for(var i,a=0;a<t.ranges.length;a++){var u=t.ranges[a],h=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[a],v=eo(e,u.anchor,h&&h.anchor,n,r),y=u.head==u.anchor?v:eo(e,u.head,h&&h.head,n,r);(i||v!=u.anchor||y!=u.head)&&(i||(i=t.ranges.slice(0,a)),i[a]=new dt(v,y))}return i?Ur(e.cm,i,t.primIndex):t}function jn(e,t,n,r,i){var a=_e(e,t.line);if(a.markedSpans)for(var u=0;u<a.markedSpans.length;++u){var h=a.markedSpans[u],v=h.marker,y="selectLeft"in v?!v.selectLeft:v.inclusiveLeft,E="selectRight"in v?!v.selectRight:v.inclusiveRight;if((null==h.from||(y?h.from<=t.ch:h.from<t.ch))&&(null==h.to||(E?h.to>=t.ch:h.to>t.ch))){if(i&&(at(v,"beforeCursorEnter"),v.explicitlyCleared)){if(a.markedSpans){--u;continue}break}if(!v.atomic)continue;if(n){var B=v.find(r<0?1:-1),V=void 0;if((r<0?E:y)&&(B=Xa(e,B,-r,B&&B.line==t.line?a:null)),B&&B.line==t.line&&(V=w(B,n))&&(r<0?V<0:V>0))return jn(e,B,t,r,i)}var J=v.find(r<0?-1:1);return(r<0?y:E)&&(J=Xa(e,J,r,J.line==t.line?a:null)),J?jn(e,J,t,r,i):null}}return t}function eo(e,t,n,r,i){var a=r||1;return jn(e,t,n,a,i)||!i&&jn(e,t,n,a,!0)||jn(e,t,n,-a,i)||!i&&jn(e,t,n,-a,!0)||(e.cantEdit=!0,d(e.first,0))}function Xa(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?De(e,d(t.line-1)):null:n>0&&t.ch==(r||_e(e,t.line)).text.length?t.line<e.first+e.size-1?d(t.line+1,0):null:new d(t.line,t.ch+n)}function Va(e){e.setSelection(d(e.firstLine(),0),d(e.lastLine()),Ce)}function qa(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(i,a,u,h){i&&(r.from=De(e,i)),a&&(r.to=De(e,a)),u&&(r.text=u),void 0!==h&&(r.origin=h)}),at(e,"beforeChange",e,r),e.cm&&at(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Zn(e,t,n){if(e.cm){if(!e.cm.curOp)return Zt(e.cm,Zn)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(rt(e,"beforeChange")||e.cm&&rt(e.cm,"beforeChange"))||(t=qa(e,t,!0))){var r=ii&&!n&&function ho(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(J){if(J.markedSpans)for(var he=0;he<J.markedSpans.length;++he){var be=J.markedSpans[he].marker;be.readOnly&&(!r||-1==te(r,be))&&(r||(r=[])).push(be)}}),!r)return null;for(var i=[{from:t,to:n}],a=0;a<r.length;++a)for(var u=r[a],h=u.find(0),v=0;v<i.length;++v){var y=i[v];if(!(w(y.to,h.from)<0||w(y.from,h.to)>0)){var E=[v,1],B=w(y.from,h.from),V=w(y.to,h.to);(B<0||!u.inclusiveLeft&&!B)&&E.push({from:y.from,to:h.from}),(V>0||!u.inclusiveRight&&!V)&&E.push({from:h.to,to:y.to}),i.splice.apply(i,E),v+=E.length-3}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)$a(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else $a(e,t)}}function $a(e,t){if(1!=t.text.length||""!=t.text[0]||0!=w(t.from,t.to)){var n=Ro(e,t);Ka(e,t,n,e.cm?e.cm.curOp.id:NaN),bi(e,t,n,oi(e,t));var r=[];vn(e,function(i,a){!a&&-1==te(r,i.history)&&(nl(i.history,t),r.push(i.history)),bi(i,t,null,oi(i,t))})}}function to(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!r||n){for(var a,i=e.history,u=e.sel,h="undo"==t?i.done:i.undone,v="undo"==t?i.undone:i.done,y=0;y<h.length&&(a=h[y],!(n?a.ranges&&!a.equals(e.sel):!a.ranges));y++);if(y!=h.length){for(i.lastOrigin=i.lastSelOrigin=null;;){if(!(a=h.pop()).ranges){if(r)return void h.push(a);break}if(Vi(a,v),n&&!a.equals(e.sel))return void ar(e,a,{clearRedo:!1});u=a}var E=[];Vi(u,v),v.push({changes:E,generation:i.generation}),i.generation=a.generation||++i.maxGeneration;for(var B=rt(e,"beforeChange")||e.cm&&rt(e.cm,"beforeChange"),V=function(be){var Te=a.changes[be];if(Te.origin=t,B&&!qa(e,Te,!1))return h.length=0,{};E.push(Wo(e,Te));var Fe=be?Ro(e,Te):Ze(h);bi(e,Te,Fe,za(e,Te)),!be&&e.cm&&e.cm.scrollIntoView({from:Te.from,to:pn(Te)});var Be=[];vn(e,function(Ie,Re){!Re&&-1==te(Be,Ie.history)&&(nl(Ie.history,Te),Be.push(Ie.history)),bi(Ie,Te,null,za(Ie,Te))})},J=a.changes.length-1;J>=0;--J){var he=V(J);if(he)return he.v}}}}function el(e,t){if(0!=t&&(e.first+=t,e.sel=new Or(xt(e.sel.ranges,function(i){return new dt(d(i.anchor.line+t,i.anchor.ch),d(i.head.line+t,i.head.ch))}),e.sel.primIndex),e.cm)){gr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)cn(e.cm,r,"gutter")}}function bi(e,t,n,r){if(e.cm&&!e.cm.curOp)return Zt(e.cm,bi)(e,t,n,r);if(t.to.line<e.first)el(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);el(e,i),t={from:d(e.first,0),to:d(t.to.line+i,t.to.ch),text:[Ze(t.text)],origin:t.origin}}var a=e.lastLine();t.to.line>a&&(t={from:t.from,to:d(a,_e(e,a).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Tr(e,t.from,t.to),n||(n=Ro(e,t)),e.cm?function bs(e,t,n){var r=e.doc,i=e.display,a=t.from,u=t.to,h=!1,v=a.line;e.options.lineWrapping||(v=ge(l(_e(r,a.line))),r.iter(v,u.line+1,function(J){if(J==i.maxLine)return h=!0,!0})),r.sel.contains(t.from,t.to)>-1&&Cr(e),_o(r,t,n,xa(e)),e.options.lineWrapping||(r.iter(v,a.line+t.text.length,function(J){var he=G(J);he>i.maxLineLength&&(i.maxLine=J,i.maxLineLength=he,i.maxLineChanged=!0,h=!1)}),h&&(e.curOp.updateMaxLine=!0)),function ni(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=_e(e,r).stateAfter;if(i&&(!(i instanceof ct)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(r,a.line),yi(e,400);var y=t.text.length-(u.line-a.line)-1;t.full?gr(e):a.line!=u.line||1!=t.text.length||Ra(e.doc,t)?gr(e,a.line,u.line+1,y):cn(e,a.line,"text");var E=rt(e,"changes"),B=rt(e,"change");if(B||E){var V={from:a,to:u,text:t.text,removed:t.removed,origin:t.origin};B&&Et(e,"change",e,V),E&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(V)}e.display.selForContextMenu=null}(e.cm,t,r):_o(e,t,r),$i(e,n,Ce),e.cantEdit&&eo(e,d(e.firstLine(),0))&&(e.cantEdit=!1)}}function Yn(e,t,n,r,i){var a;r||(r=n),w(r,n)<0&&(n=(a=[r,n])[0],r=a[1]),"string"==typeof t&&(t=e.splitLines(t)),Zn(e,{from:n,to:r,text:t,origin:i})}function tl(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function rl(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i],u=!0;if(a.ranges){a.copied||((a=e[i]=a.deepCopy()).copied=!0);for(var h=0;h<a.ranges.length;h++)tl(a.ranges[h].anchor,t,n,r),tl(a.ranges[h].head,t,n,r)}else{for(var v=0;v<a.changes.length;++v){var y=a.changes[v];if(n<y.from.line)y.from=d(y.from.line+r,y.from.ch),y.to=d(y.to.line+r,y.to.ch);else if(t<=y.to.line){u=!1;break}}u||(e.splice(0,i+1),i=0)}}}function nl(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;rl(e.done,n,r,i),rl(e.undone,n,r,i)}function Ci(e,t,n,r){var i=t,a=t;return"number"==typeof t?a=_e(e,Ye(e,t)):i=ge(t),null==i?null:(r(a,i)&&e.cm&&cn(e.cm,i,n),a)}function wi(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function Si(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}dt.prototype.from=function(){return Je(this.anchor,this.head)},dt.prototype.to=function(){return We(this.anchor,this.head)},dt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},wi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,pe(i),Et(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},Si.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var a=Math.min(t,i-e),u=r.height;if(r.removeInner(e,a),this.height-=u-r.height,i==a&&(this.children.splice(n--,1),r.parent=null),0==(t-=a))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof wi))){var h=[];this.collapse(h),this.children=[new wi(h)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],a=i.chunkSize();if(e<=a){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var u=i.lines.length%25+25,h=u;h<i.lines.length;){var v=new wi(i.lines.slice(h,h+=25));i.height-=v.height,this.children.splice(++r,0,v),v.parent=this}i.lines=i.lines.slice(0,u),this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var n=new Si(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=n.size,e.height-=n.height;var i=te(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var r=new Si(e.children);r.parent=e,e.children=[r,n],e=r}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],a=i.chunkSize();if(e<a){var u=Math.min(t,a-e);if(i.iterN(e,u,n))return!0;if(0==(t-=u))break;e=0}else e-=a}}};var Li=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function il(e,t,n){A(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Oo(e,n)}Li.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=ge(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var a=ci(this);Pt(n,Math.max(0,n.height-a)),e&&(Ar(e,function(){il(e,n,-a),cn(e,r,"widget")}),Et(e,"lineWidgetCleared",e,this,r))}},Li.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=ci(this)-t;i&&(S(this.doc,r)||Pt(r,r.height+i),n&&Ar(n,function(){n.curOp.forceUpdate=!0,il(n,r,i),Et(n,"lineWidgetChanged",n,e,ge(r))}))},wr(Li);var ol=0,gn=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ol};function Jn(e,t,n,r,i){if(r&&r.shared)return function ws(e,t,n,r,i){(r=Oe(r)).shared=!1;var a=[Jn(e,t,n,r,i)],u=a[0],h=r.widgetNode;return vn(e,function(v){h&&(r.widgetNode=h.cloneNode(!0)),a.push(Jn(v,De(v,t),De(v,n),r,i));for(var y=0;y<v.linked.length;++y)if(v.linked[y].isParent)return;u=Ze(a)}),new Ti(a,u)}(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Zt(e.cm,Jn)(e,t,n,r,i);var a=new gn(e,i),u=w(t,n);if(r&&Oe(r,a,!1),u>0||0==u&&!1!==a.clearWhenEmpty)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=me("span",[a.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(o(e,t.line,t,n,a)||t.line!=n.line&&o(e,n.line,t,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function Ri(){Pr=!0}()}a.addToHistory&&Ka(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var y,h=t.line,v=e.cm;if(e.iter(h,n.line+1,function(B){v&&a.collapsed&&!v.options.lineWrapping&&l(B)==v.display.maxLine&&(y=!0),a.collapsed&&h!=t.line&&Pt(B,0),function Hi(e,t,n){var r=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));r&&e.markedSpans&&r.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],r&&r.add(e.markedSpans)),t.marker.attachLine(e)}(B,new vr(a,h==t.line?t.ch:null,h==n.line?n.ch:null),e.cm&&e.cm.curOp),++h}),a.collapsed&&e.iter(t.line,n.line+1,function(B){S(e,B)&&Pt(B,0)}),a.clearOnEnter&&Me(a,"beforeCursorEnter",function(){return a.clear()}),a.readOnly&&(function Pi(){ii=!0}(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++ol,a.atomic=!0),v){if(y&&(v.curOp.updateMaxLine=!0),a.collapsed)gr(v,t.line,n.line+1);else if(a.className||a.startStyle||a.endStyle||a.css||a.attributes||a.title)for(var E=t.line;E<=n.line;E++)cn(v,E,"text");a.atomic&&Ja(v.doc),Et(v,"markerAdded",v,a)}return a}gn.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Fn(e),rt(this,"clear")){var n=this.find();n&&Et(this,"clear",n.from,n.to)}for(var r=null,i=null,a=0;a<this.lines.length;++a){var u=this.lines[a],h=wn(u.markedSpans,this);e&&!this.collapsed?cn(e,ge(u),"text"):e&&(null!=h.to&&(i=ge(u)),null!=h.from&&(r=ge(u))),u.markedSpans=Sn(u.markedSpans,h),null==h.from&&this.collapsed&&!S(this.doc,u)&&e&&Pt(u,_n(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var v=0;v<this.lines.length;++v){var y=l(this.lines[v]),E=G(y);E>e.display.maxLineLength&&(e.display.maxLine=y,e.display.maxLineLength=E,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&gr(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Ja(e.doc)),e&&Et(e,"markerCleared",e,this,r,i),t&&In(e),this.parent&&this.parent.clear()}},gn.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,r,i=0;i<this.lines.length;++i){var a=this.lines[i],u=wn(a.markedSpans,this);if(null!=u.from&&(n=d(t?a:ge(a),u.from),-1==e))return n;if(null!=u.to&&(r=d(t?a:ge(a),u.to),1==e))return r}return n&&{from:n,to:r}},gn.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;!t||!r||Ar(r,function(){var i=t.line,a=ge(t.line),u=yo(r,a);if(u&&(ca(u),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!S(n.doc,i)&&null!=n.height){var h=n.height;n.height=null;var v=ci(n)-h;v&&Pt(i,i.height+v)}Et(r,"markerChanged",r,e)})},gn.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||-1==te(t.maybeHiddenMarkers,this))&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},gn.prototype.detachLine=function(e){if(this.lines.splice(te(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},wr(gn);var Ti=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function al(e){return e.findMarks(d(e.first,0),e.clipPos(d(e.lastLine())),function(t){return t.parent})}function Ls(e){for(var t=function(r){var i=e[r],a=[i.primary.doc];vn(i.primary.doc,function(v){return a.push(v)});for(var u=0;u<i.markers.length;u++){var h=i.markers[u];-1==te(a,h.doc)&&(h.parent=null,i.markers.splice(u--,1))}},n=0;n<e.length;n++)t(n)}Ti.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Et(this,"clear")}},Ti.prototype.find=function(e,t){return this.primary.find(e,t)},wr(Ti);var Ts=0,mr=function(e,t,n,r,i){if(!(this instanceof mr))return new mr(e,t,n,r,i);null==n&&(n=0),Si.call(this,[new wi([new ue("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var a=d(n,0);this.sel=dn(a),this.history=new Xi(null),this.id=++Ts,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),_o(this,{from:a,to:a,text:e}),ar(this,dn(a),Ce)};mr.prototype=It(Si.prototype,{constructor:mr,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=or(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Yt(function(e){var t=d(this.first,0),n=this.first+this.size-1;Zn(this,{from:t,to:d(n,_e(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&pi(this.cm,0,0),ar(this,dn(t),Ce)}),replaceRange:function(e,t,n,r){Yn(this,e,t=De(this,t),n=n?De(this,n):t,r)},getRange:function(e,t,n){var r=Tr(this,De(this,e),De(this,t));return!1===n?r:r.join(""===n?"":n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(ee(this,e))return _e(this,e)},getLineNumber:function(e){return ge(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=_e(this,e)),l(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return De(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Yt(function(e,t,n){ja(this,De(this,"number"==typeof e?d(e,t||0):e),null,n)}),setSelection:Yt(function(e,t,n){ja(this,De(this,e),De(this,t||e),n)}),extendSelection:Yt(function(e,t,n){qi(this,De(this,e),t&&De(this,t),n)}),extendSelections:Yt(function(e,t){Ga(this,it(this,e),t)}),extendSelectionsBy:Yt(function(e,t){Ga(this,it(this,xt(this.sel.ranges,e)),t)}),setSelections:Yt(function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new dt(De(this,e[i].anchor),De(this,e[i].head||e[i].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),ar(this,Ur(this.cm,r,t),n)}}),addSelection:Yt(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new dt(De(this,e),De(this,t||e))),ar(this,Ur(this.cm,r,r.length-1),n)}),getSelection:function(e){for(var n,t=this.sel.ranges,r=0;r<t.length;r++){var i=Tr(this,t[r].from(),t[r].to());n=n?n.concat(i):i}return!1===e?n:n.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=Tr(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Yt(function(e,t,n){for(var r=[],i=this.sel,a=0;a<i.ranges.length;a++){var u=i.ranges[a];r[a]={from:u.from(),to:u.to(),text:this.splitLines(e[a]),origin:n}}for(var h=t&&"end"!=t&&function ds(e,t,n){for(var r=[],i=d(e.first,0),a=i,u=0;u<t.length;u++){var h=t[u],v=Pa(h.from,i,a),y=Pa(pn(h),i,a);if(i=h.to,a=y,"around"==n){var E=e.sel.ranges[u],B=w(E.head,E.anchor)<0;r[u]=new dt(B?y:v,B?v:y)}else r[u]=new dt(v,v)}return new Or(r,e.sel.primIndex)}(this,r,t),v=r.length-1;v>=0;v--)Zn(this,r[v]);h?Za(this,h):this.cm&&Un(this.cm)}),undo:Yt(function(){to(this,"undo")}),redo:Yt(function(){to(this,"redo")}),undoSelection:Yt(function(){to(this,"undo",!0)}),redoSelection:Yt(function(){to(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new Xi(this.history),vn(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Gn(this.history.done),undone:Gn(this.history.undone)}},setHistory:function(e){var t=this.history=new Xi(this.history);t.done=Gn(e.done.slice(0),null,!0),t.undone=Gn(e.undone.slice(0),null,!0)},setGutterMarker:Yt(function(e,t,n){return Ci(this,e,"gutter",function(r){var i=r.gutterMarkers||(r.gutterMarkers={});return i[t]=n,!n&&br(i)&&(r.gutterMarkers=null),!0})}),clearGutter:Yt(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&Ci(t,n,"gutter",function(){return n.gutterMarkers[e]=null,br(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!(ee(this,e)&&(t=e,e=_e(this,e))))return null}else if(null==(t=ge(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Yt(function(e,t,n){return Ci(this,e,"gutter"==t?"gutter":"class",function(r){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(r[i]){if(z(n).test(r[i]))return!1;r[i]+=" "+n}else r[i]=n;return!0})}),removeLineClass:Yt(function(e,t,n){return Ci(this,e,"gutter"==t?"gutter":"class",function(r){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",a=r[i];if(!a)return!1;if(null==n)r[i]=null;else{var u=a.match(z(n));if(!u)return!1;var h=u.index+u[0].length;r[i]=a.slice(0,u.index)+(u.index&&h!=a.length?" ":"")+a.slice(h)||null}return!0})}),addLineWidget:Yt(function(e,t,n){return function Cs(e,t,n,r){var i=new Li(e,n,r),a=e.cm;return a&&i.noHScroll&&(a.display.alignWidgets=!0),Ci(e,t,"widget",function(u){var h=u.widgets||(u.widgets=[]);if(null==i.insertAt?h.push(i):h.splice(Math.min(h.length,Math.max(0,i.insertAt)),0,i),i.line=u,a&&!S(e,u)){var v=A(u)<e.scrollTop;Pt(u,u.height+ci(i)),v&&Oo(a,i.height),a.curOp.forceUpdate=!0}return!0}),a&&Et(a,"lineWidgetAdded",a,i,"number"==typeof t?t:ge(t)),i}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Jn(this,De(this,e),De(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Jn(this,e=De(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=_e(this,(e=De(this,e)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=De(this,e),t=De(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(a){var u=a.markedSpans;if(u)for(var h=0;h<u.length;h++){var v=u[h];!(null!=v.to&&i==e.line&&e.ch>=v.to||null==v.from&&i!=e.line||null!=v.from&&i==t.line&&v.from>=t.ch)&&(!n||n(v.marker))&&r.push(v.marker.parent||v.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var a=i.text.length+r;if(a>e)return t=e,!0;e-=a,++n}),De(this,d(n,t))},indexFromPos:function(e){var t=(e=De(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(r){t+=r.text.length+n}),t},copy:function(e){var t=new mr(or(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new mr(or(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function Ss(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),a=e.clipPos(i.from),u=e.clipPos(i.to);if(w(a,u)){var h=Jn(e,a,u,r.primary,r.primary.type);r.markers.push(h),h.parent=r}}}(r,al(this)),r},unlinkDoc:function(e){if(e instanceof bt&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Ls(al(this));break}if(e.history==this.history){var r=[e.id];vn(e,function(i){return r.push(i.id)},!0),e.history=new Xi(null),e.history.done=Gn(this.history.done,r),e.history.undone=Gn(this.history.undone,r)}},iterLinkedDocs:function(e){vn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ut(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Yt(function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&function ps(e){Ar(e,function(){_a(e),gr(e)})}(this.cm))})}),mr.prototype.eachLine=mr.prototype.iter;var ll=0;function As(e){var t=this;if(sl(t),!ft(t,e)&&!rn(t.display,e)){At(e),C&&(ll=+new Date);var n=Mn(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,a=Array(i),u=0,h=function(){++u==i&&Zt(t,function(){var J={from:n=De(t.doc,n),to:n,text:t.doc.splitLines(a.filter(function(he){return null!=he}).join(t.doc.lineSeparator())),origin:"paste"};Zn(t.doc,J),Za(t.doc,dn(De(t.doc,n),De(t.doc,pn(J))))})()},v=function(J,he){if(t.options.allowDropFileTypes&&-1==te(t.options.allowDropFileTypes,J.type))h();else{var be=new FileReader;be.onerror=function(){return h()},be.onload=function(){var Te=be.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Te)||(a[he]=Te),h()},be.readAsText(J)}},y=0;y<r.length;y++)v(r[y],y);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var E=e.dataTransfer.getData("Text");if(E){var B;if(t.state.draggingText&&!t.state.draggingText.copy&&(B=t.listSelections()),$i(t.doc,dn(n,n)),B)for(var V=0;V<B.length;++V)Yn(t.doc,"",B[V].anchor,B[V].head,"drag");t.replaceSelection(E,"around","paste"),t.display.input.focus()}}catch{}}}}function sl(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function ul(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<t.length;r++){var i=t[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation(function(){for(var a=0;a<n.length;a++)e(n[a])})}}var fl=!1;function Ds(){fl||(function Os(){var e;Me(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,ul(Fs)},100))}),Me(window,"blur",function(){return ul(Kn)})}(),fl=!0)}function Fs(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var mn={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ai=0;Ai<10;Ai++)mn[Ai+48]=mn[Ai+96]=String(Ai);for(var ro=65;ro<=90;ro++)mn[ro]=String.fromCharCode(ro);for(var Mi=1;Mi<=12;Mi++)mn[Mi+111]=mn[Mi+63235]="F"+Mi;var on={};function Is(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var n,r,i,a,u=0;u<t.length-1;u++){var h=t[u];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))n=!0;else if(/^(c|ctrl|control)$/i.test(h))r=!0;else{if(!/^s(hift)?$/i.test(h))throw new Error("Unrecognized modifier name: "+h);i=!0}}return n&&(e="Alt-"+e),r&&(e="Ctrl-"+e),a&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function Ns(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=xt(n.split(" "),Is),a=0;a<i.length;a++){var u=void 0,h=void 0;a==i.length-1?(h=i.join(" "),u=r):(h=i.slice(0,a+1).join(" "),u="...");var v=t[h];if(v){if(v!=u)throw new Error("Inconsistent bindings for "+h)}else t[h]=u}delete e[n]}for(var y in t)e[y]=t[y];return e}function Qn(e,t,n,r){var i=(t=no(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Qn(e,t.fallthrough,n,r);for(var a=0;a<t.fallthrough.length;a++){var u=Qn(e,t.fallthrough[a],n,r);if(u)return u}}}function cl(e){var t="string"==typeof e?e:mn[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function hl(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(P?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(P?t.ctrlKey:t.metaKey)&&"Mod"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function dl(e,t){if(K&&34==e.keyCode&&e.char)return!1;var n=mn[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),hl(n,e,t))}function no(e){return"string"==typeof e?on[e]:e}function Xn(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var a=t(n[i]);r.length&&w(a.from,Ze(r).to)<=0;){var u=r.pop();if(w(u.from,a.from)<0){a.from=u.from;break}}r.push(a)}Ar(e,function(){for(var h=r.length-1;h>=0;h--)Yn(e.doc,"",r[h].from,r[h].to,"+delete");Un(e)})}function zo(e,t,n){var r=Ir(e.text,t+n,n);return r<0||r>e.text.length?null:r}function Go(e,t,n){var r=zo(e,t.ch,n);return null==r?null:new d(t.line,r,n<0?"after":"before")}function jo(e,t,n,r,i){if(e){"rtl"==t.doc.direction&&(i=-i);var a=_t(n,t.doc.direction);if(a){var y,u=i<0?Ze(a):a[0],v=i<0==(1==u.level)?"after":"before";if(u.level>0||"rtl"==t.doc.direction){var E=Hn(t,n),B=Qr(t,E,y=i<0?n.text.length-1:0).top;y=Lt(function(V){return Qr(t,E,V).top==B},i<0==(1==u.level)?u.from:u.to-1,y),"before"==v&&(y=zo(n,y,1))}else y=i<0?u.to:u.from;return new d(r,y,v)}}return new d(r,i<0?n.text.length:0,i<0?"before":"after")}on.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},on.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},on.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},on.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},on.default=_?on.macDefault:on.pcDefault;var Ei={selectAll:Va,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Ce)},killLine:function(e){return Xn(e,function(t){if(t.empty()){var n=_e(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:d(t.head.line+1,0)}:{from:t.head,to:d(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Xn(e,function(t){return{from:d(t.from().line,0),to:De(e.doc,d(t.to().line+1,0))}})},delLineLeft:function(e){return Xn(e,function(t){return{from:d(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return Xn(e,function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}})},delWrappedLineRight:function(e){return Xn(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(d(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(d(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return pl(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return vl(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function Ps(e,t){var n=_e(e.doc,t),r=function s(e){for(var t;t=fn(e);)e=t.find(1,!0).line;return e}(n);return r!=n&&(t=ge(r)),jo(!0,e,n,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},ze)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},ze)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?vl(e,t.head):r},ze)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var a=n[i].from(),u=F(e.getLine(a.line),a.ch,r);t.push(pt(r-u%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Ar(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,a=_e(e.doc,i.line).text;if(a)if(i.ch==a.length&&(i=new d(i.line,i.ch-1)),i.ch>0)i=new d(i.line,i.ch+1),e.replaceRange(a.charAt(i.ch-1)+a.charAt(i.ch-2),d(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var u=_e(e.doc,i.line-1).text;u&&(i=new d(i.line,1),e.replaceRange(a.charAt(0)+e.doc.lineSeparator()+u.charAt(u.length-1),d(i.line-1,u.length-1),i,"+transpose"))}n.push(new dt(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){return Ar(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Un(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function pl(e,t){var n=_e(e.doc,t),r=l(n);return r!=n&&(t=ge(r)),jo(!0,e,r,t,1)}function vl(e,t){var n=pl(e,t.line),r=_e(e.doc,n.line),i=_t(r,e.doc.direction);if(!i||0==i[0].level){var a=Math.max(n.ch,r.text.search(/\S/));return d(n.line,t.line==n.line&&t.ch<=a&&t.ch?0:a,n.sticky)}return n}function io(e,t,n){if("string"==typeof t&&!(t=Ei[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=Ee}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}var Hs=new Z;function Di(e,t,n,r){var i=e.state.keySeq;if(i){if(cl(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Hs.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),gl(e,i+" "+t,n,r))return!0}return gl(e,t,n,r)}function gl(e,t,n,r){var i=function Rs(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Qn(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Qn(t,e.options.extraKeys,n,e)||Qn(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&Et(e,"keyHandled",e,t,n),("handled"==i||"multi"==i)&&(At(n),Ao(e)),!!i}function ml(e,t){var n=dl(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?Di(e,"Shift-"+n,t,function(r){return io(e,r,!0)})||Di(e,n,t,function(r){if("string"==typeof r?/^go[A-Z]/.test(r):r.motion)return io(e,r)}):Di(e,n,t,function(r){return io(e,r)}))}var Zo=null;function yl(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=fe(Ge(t)),ft(t,e)))){C&&f<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=ml(t,e);K&&(Zo=r?n:null,!r&&88==n&&!bn&&(_?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),T&&!_&&!r&&46==n&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==n&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&function Ws(e){var t=e.display.lineDiv;function n(r){(18==r.keyCode||!r.altKey)&&(ne(t,"CodeMirror-crosshair"),He(document,"keyup",n),He(document,"mouseover",n))}Se(t,"CodeMirror-crosshair"),Me(document,"keyup",n),Me(document,"mouseover",n)}(t)}}function xl(e){16==e.keyCode&&(this.doc.sel.shift=!1),ft(this,e)}function kl(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||rn(t.display,e)||ft(t,e)||e.ctrlKey&&!e.altKey||_&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(K&&n==Zo)return Zo=null,void At(e);if(!K||e.which&&!(e.which<10)||!ml(t,e)){var i=String.fromCharCode(r??n);"\b"!=i&&(function _s(e,t,n){return Di(e,"'"+n+"'",t,function(r){return io(e,r,!0)})}(t,e,i)||t.display.input.onKeyPress(e))}}}var Oi,Fi,Yo=function(e,t,n){this.time=e,this.pos=t,this.button=n};function bl(e){var t=this,n=t.display;if(!(ft(t,e)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=e.shiftKey,rn(n,e))return void(I||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100)));if(!Jo(t,e)){var r=Mn(t,e),i=jr(e),a=r?function Us(e,t){var n=+new Date;return Fi&&Fi.compare(n,e,t)?(Oi=Fi=null,"triple"):Oi&&Oi.compare(n,e,t)?(Fi=new Yo(n,e,t),Oi=null,"double"):(Oi=new Yo(n,e,t),Fi=null,"single")}(r,i):"single";N(t).focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),(!r||!function zs(e,t,n,r,i){var a="Click";return"double"==r?a="Double"+a:"triple"==r&&(a="Triple"+a),Di(e,hl(a=(1==t?"Left":2==t?"Middle":"Right")+a,i),i,function(u){if("string"==typeof u&&(u=Ei[u]),!u)return!1;var h=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),h=u(e,n)!=Ee}finally{e.state.suppressEdits=!1}return h})}(t,i,r,a,e))&&(1==i?r?function js(e,t,n,r){C?setTimeout(k(Ca,e),0):e.curOp.focus=fe(Ge(e));var u,i=function Gs(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};return null==i.unit&&(i.unit=(m?n.shiftKey&&n.metaKey:n.altKey)?"rectangle":"single"==t?"char":"double"==t?"word":"line"),(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=_?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(_?n.altKey:n.ctrlKey)),i}(e,n,r),a=e.doc.sel;e.options.dragDrop&&qt&&!e.isReadOnly()&&"single"==n&&(u=a.contains(t))>-1&&(w((u=a.ranges[u]).from(),t)<0||t.xRel>0)&&(w(u.to(),t)>0||t.xRel<0)?function Zs(e,t,n,r){var i=e.display,a=!1,u=Zt(e,function(y){I&&(i.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Mo(e)),He(i.wrapper.ownerDocument,"mouseup",u),He(i.wrapper.ownerDocument,"mousemove",h),He(i.scroller,"dragstart",v),He(i.scroller,"drop",u),a||(At(y),r.addNew||qi(e.doc,n,null,null,r.extend),I&&!ae||C&&9==f?setTimeout(function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()},20):i.input.focus())}),h=function(y){a=a||Math.abs(t.clientX-y.clientX)+Math.abs(t.clientY-y.clientY)>=10},v=function(){return a=!0};I&&(i.scroller.draggable=!0),e.state.draggingText=u,u.copy=!r.moveOnDrag,Me(i.wrapper.ownerDocument,"mouseup",u),Me(i.wrapper.ownerDocument,"mousemove",h),Me(i.scroller,"dragstart",v),Me(i.scroller,"drop",u),e.state.delayingBlurEvent=!0,setTimeout(function(){return i.input.focus()},20),i.scroller.dragDrop&&i.scroller.dragDrop()}(e,r,t,i):function Ys(e,t,n,r){C&&Mo(e);var i=e.display,a=e.doc;At(t);var u,h,v=a.sel,y=v.ranges;if(r.addNew&&!r.extend?(h=a.sel.contains(n),u=h>-1?y[h]:new dt(n,n)):(u=a.sel.primary(),h=a.sel.primIndex),"rectangle"==r.unit)r.addNew||(u=new dt(n,n)),n=Mn(e,t,!0,!0),h=-1;else{var E=Cl(e,n,r.unit);u=r.extend?Ko(u,E.anchor,E.head,r.extend):E}r.addNew?-1==h?(h=y.length,ar(a,Ur(e,y.concat([u]),h),{scroll:!1,origin:"*mouse"})):y.length>1&&y[h].empty()&&"char"==r.unit&&!r.extend?(ar(a,Ur(e,y.slice(0,h).concat(y.slice(h+1)),0),{scroll:!1,origin:"*mouse"}),v=a.sel):Uo(a,h,u,Ke):(h=0,ar(a,new Or([u],0),Ke),v=a.sel);var B=n;function V(Ie){if(0!=w(B,Ie))if(B=Ie,"rectangle"==r.unit){for(var Re=[],Qe=e.options.tabSize,je=F(_e(a,n.line).text,n.ch,Qe),nt=F(_e(a,Ie.line).text,Ie.ch,Qe),gt=Math.min(je,nt),Jt=Math.max(je,nt),wt=Math.min(n.line,Ie.line),Mr=Math.min(e.lastLine(),Math.max(n.line,Ie.line));wt<=Mr;wt++){var yr=_e(a,wt).text,Rt=st(yr,gt,Qe);gt==Jt?Re.push(new dt(d(wt,Rt),d(wt,Rt))):yr.length>Rt&&Re.push(new dt(d(wt,Rt),d(wt,st(yr,Jt,Qe))))}Re.length||Re.push(new dt(n,n)),ar(a,Ur(e,v.ranges.slice(0,h).concat(Re),h),{origin:"*mouse",scroll:!1}),e.scrollIntoView(Ie)}else{var Ht,xr=u,tr=Cl(e,Ie,r.unit),Kt=xr.anchor;w(tr.anchor,Kt)>0?(Ht=tr.head,Kt=Je(xr.from(),tr.anchor)):(Ht=tr.anchor,Kt=We(xr.to(),tr.head));var Dt=v.ranges.slice(0);Dt[h]=function Js(e,t){var n=t.anchor,r=t.head,i=_e(e.doc,n.line);if(0==w(n,r)&&n.sticky==r.sticky)return t;var a=_t(i);if(!a)return t;var u=Tt(a,n.ch,n.sticky),h=a[u];if(h.from!=n.ch&&h.to!=n.ch)return t;var y,v=u+(h.from==n.ch==(1!=h.level)?0:1);if(0==v||v==a.length)return t;if(r.line!=n.line)y=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var E=Tt(a,r.ch,r.sticky),B=E-u||(r.ch-n.ch)*(1==h.level?-1:1);y=E==v-1||E==v?B<0:B>0}var V=a[v+(y?-1:0)],J=y==(1==V.level),he=J?V.from:V.to,be=J?"after":"before";return n.ch==he&&n.sticky==be?t:new dt(new d(n.line,he,be),r)}(e,new dt(De(a,Kt),Ht)),ar(a,Ur(e,Dt,h),Ke)}}var J=i.wrapper.getBoundingClientRect(),he=0;function be(Ie){var Re=++he,Qe=Mn(e,Ie,!0,"rectangle"==r.unit);if(Qe)if(0!=w(Qe,B)){e.curOp.focus=fe(Ge(e)),V(Qe);var je=Zi(i,a);(Qe.line>=je.to||Qe.line<je.from)&&setTimeout(Zt(e,function(){he==Re&&be(Ie)}),150)}else{var nt=Ie.clientY<J.top?-20:Ie.clientY>J.bottom?20:0;nt&&setTimeout(Zt(e,function(){he==Re&&(i.scroller.scrollTop+=nt,be(Ie))}),50)}}function Te(Ie){e.state.selectingText=!1,he=1/0,Ie&&(At(Ie),i.input.focus()),He(i.wrapper.ownerDocument,"mousemove",Fe),He(i.wrapper.ownerDocument,"mouseup",Be),a.history.lastSelOrigin=null}var Fe=Zt(e,function(Ie){0!==Ie.buttons&&jr(Ie)?be(Ie):Te(Ie)}),Be=Zt(e,Te);e.state.selectingText=Be,Me(i.wrapper.ownerDocument,"mousemove",Fe),Me(i.wrapper.ownerDocument,"mouseup",Be)}(e,r,t,i)}(t,r,a,e):Hr(e)==n.scroller&&At(e):2==i?(r&&qi(t.doc,r),setTimeout(function(){return n.input.focus()},20)):3==i&&(b?t.display.input.onContextMenu(e):Mo(t)))}}}function Cl(e,t,n){if("char"==n)return new dt(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new dt(d(t.line,0),De(e.doc,d(t.line+1,0)));var r=n(e,t);return new dt(r.from,r.to)}function wl(e,t,n,r){var i,a;if(t.touches)i=t.touches[0].clientX,a=t.touches[0].clientY;else try{i=t.clientX,a=t.clientY}catch{return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&At(t);var u=e.display,h=u.lineDiv.getBoundingClientRect();if(a>h.bottom||!rt(e,n))return Rr(t);a-=h.top-u.viewOffset;for(var v=0;v<e.display.gutterSpecs.length;++v){var y=u.gutters.childNodes[v];if(y&&y.getBoundingClientRect().right>=i)return at(e,n,e,U(e.doc,a),e.display.gutterSpecs[v].className,t),Rr(t)}}function Jo(e,t){return wl(e,t,"gutterClick",!0)}function Sl(e,t){rn(e.display,t)||function Qs(e,t){return!!rt(e,"gutterContextMenu")&&wl(e,t,"gutterContextMenu",!1)}(e,t)||ft(e,t,"contextmenu")||b||e.display.input.onContextMenu(t)}function Ll(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),hi(e)}Yo.prototype.compare=function(e,t,n){return this.time+400>e&&0==w(t,this.pos)&&n==this.button};var Vn={toString:function(){return"CodeMirror.Init"}},Tl={},oo={};function Vs(e,t,n){if(!t!=!(n&&n!=Vn)){var i=e.display.dragFunctions,a=t?Me:He;a(e.display.scroller,"dragstart",i.start),a(e.display.scroller,"dragenter",i.enter),a(e.display.scroller,"dragover",i.over),a(e.display.scroller,"dragleave",i.leave),a(e.display.scroller,"drop",i.drop)}}function qs(e){e.options.lineWrapping?(Se(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(ne(e.display.wrapper,"CodeMirror-wrap"),j(e)),Lo(e),gr(e),hi(e),setTimeout(function(){return zn(e)},100)}function bt(e,t){var n=this;if(!(this instanceof bt))return new bt(e,t);this.options=t=t?Oe(t):{},Oe(Tl,t,!1);var r=t.value;"string"==typeof r?r=new mr(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var i=new bt.inputStyles[t.inputStyle](this),a=this.display=new cs(e,r,i,t);for(var u in a.wrapper.CodeMirror=this,Ll(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Ma(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Z,keySeq:null,specialChars:null},t.autofocus&&!D&&a.input.focus(),C&&f<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function $s(e){var t=e.display;Me(t.scroller,"mousedown",Zt(e,bl)),Me(t.scroller,"dblclick",C&&f<11?Zt(e,function(v){if(!ft(e,v)){var y=Mn(e,v);if(y&&!Jo(e,v)&&!rn(e.display,v)){At(v);var E=e.findWordAt(y);qi(e.doc,E.anchor,E.head)}}}):function(v){return ft(e,v)||At(v)}),Me(t.scroller,"contextmenu",function(v){return Sl(e,v)}),Me(t.input.getField(),"contextmenu",function(v){t.scroller.contains(v.target)||Sl(e,v)});var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),(r=t.activeTouch).end=+new Date)}function a(v){if(1!=v.touches.length)return!1;var y=v.touches[0];return y.radiusX<=1&&y.radiusY<=1}function u(v,y){if(null==y.left)return!0;var E=y.left-v.left,B=y.top-v.top;return E*E+B*B>400}Me(t.scroller,"touchstart",function(v){if(!ft(e,v)&&!a(v)&&!Jo(e,v)){t.input.ensurePolled(),clearTimeout(n);var y=+new Date;t.activeTouch={start:y,moved:!1,prev:y-r.end<=300?r:null},1==v.touches.length&&(t.activeTouch.left=v.touches[0].pageX,t.activeTouch.top=v.touches[0].pageY)}}),Me(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),Me(t.scroller,"touchend",function(v){var y=t.activeTouch;if(y&&!rn(t,v)&&null!=y.left&&!y.moved&&new Date-y.start<300){var B,E=e.coordsChar(t.activeTouch,"page");B=!y.prev||u(y,y.prev)?new dt(E,E):!y.prev.prev||u(y,y.prev.prev)?e.findWordAt(E):new dt(d(E.line,0),De(e.doc,d(E.line+1,0))),e.setSelection(B.anchor,B.head),e.focus(),At(v)}i()}),Me(t.scroller,"touchcancel",i),Me(t.scroller,"scroll",function(){t.scroller.clientHeight&&(vi(e,t.scroller.scrollTop),Dn(e,t.scroller.scrollLeft,!0),at(e,"scroll",e))}),Me(t.scroller,"mousewheel",function(v){return Na(e,v)}),Me(t.scroller,"DOMMouseScroll",function(v){return Na(e,v)}),Me(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(v){ft(e,v)||rr(v)},over:function(v){ft(e,v)||(function Es(e,t){var n=Mn(e,t);if(n){var r=document.createDocumentFragment();To(e,n,r),e.display.dragCursor||(e.display.dragCursor=R("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),ce(e.display.dragCursor,r)}}(e,v),rr(v))},start:function(v){return function Ms(e,t){if(C&&(!e.state.draggingText||+new Date-ll<100))rr(t);else if(!ft(e,t)&&!rn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!ae)){var n=R("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",K&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),K&&n.parentNode.removeChild(n)}}(e,v)},drop:Zt(e,As),leave:function(v){ft(e,v)||sl(e)}};var h=t.input.getField();Me(h,"keyup",function(v){return xl.call(e,v)}),Me(h,"keydown",Zt(e,yl)),Me(h,"keypress",Zt(e,kl)),Me(h,"focus",function(v){return Eo(e,v)}),Me(h,"blur",function(v){return Kn(e,v)})}(this),Ds(),Fn(this),this.curOp.forceUpdate=!0,Ha(this,r),t.autofocus&&!D||this.hasFocus()?setTimeout(function(){n.hasFocus()&&!n.state.focused&&Eo(n)},20):Kn(this),oo)oo.hasOwnProperty(u)&&oo[u](this,t[u],Vn);Oa(this),t.finishInit&&t.finishInit(this);for(var h=0;h<Qo.length;++h)Qo[h](this);In(this),I&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}bt.defaults=Tl,bt.optionHandlers=oo;var Qo=[];function Ii(e,t,n,r){var a,i=e.doc;null==n&&(n="add"),"smart"==n&&(i.mode.indent?a=$r(e,t).state:n="prev");var u=e.options.tabSize,h=_e(i,t),v=F(h.text,null,u);h.stateAfter&&(h.stateAfter=null);var E,y=h.text.match(/^\s*/)[0];if(r||/\S/.test(h.text)){if("smart"==n&&((E=i.mode.indent(a,h.text.slice(y.length),h.text))==Ee||E>150)){if(!r)return;n="prev"}}else E=0,n="not";"prev"==n?E=t>i.first?F(_e(i,t-1).text,null,u):0:"add"==n?E=v+e.options.indentUnit:"subtract"==n?E=v-e.options.indentUnit:"number"==typeof n&&(E=v+n),E=Math.max(0,E);var B="",V=0;if(e.options.indentWithTabs)for(var J=Math.floor(E/u);J;--J)V+=u,B+="\t";if(V<E&&(B+=pt(E-V)),B!=y)return Yn(i,B,d(t,0),d(t,y.length),"+input"),h.stateAfter=null,!0;for(var he=0;he<i.sel.ranges.length;he++){var be=i.sel.ranges[he];if(be.head.line==t&&be.head.ch<y.length){var Te=d(t,y.length);Uo(i,he,new dt(Te,Te));break}}}bt.defineInitHook=function(e){return Qo.push(e)};var zr=null;function ao(e){zr=e}function Xo(e,t,n,r,i){var a=e.doc;e.display.shift=!1,r||(r=a.sel);var u=+new Date-200,h="paste"==i||e.state.pasteIncoming>u,v=Ut(t),y=null;if(h&&r.ranges.length>1)if(zr&&zr.text.join("\n")==t){if(r.ranges.length%zr.text.length==0){y=[];for(var E=0;E<zr.text.length;E++)y.push(a.splitLines(zr.text[E]))}}else v.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(y=xt(v,function(Fe){return[Fe]}));for(var B=e.curOp.updateInput,V=r.ranges.length-1;V>=0;V--){var J=r.ranges[V],he=J.from(),be=J.to();J.empty()&&(n&&n>0?he=d(he.line,he.ch-n):e.state.overwrite&&!h?be=d(be.line,Math.min(_e(a,be.line).text.length,be.ch+Ze(v).length)):h&&zr&&zr.lineWise&&zr.text.join("\n")==v.join("\n")&&(he=be=d(he.line,0)));var Te={from:he,to:be,text:y?y[V%y.length]:v,origin:i||(h?"paste":e.state.cutIncoming>u?"cut":"+input")};Zn(e.doc,Te),Et(e,"inputRead",e,Te)}t&&!h&&Ml(e,t),Un(e),e.curOp.updateInput<2&&(e.curOp.updateInput=B),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Al(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&t.hasFocus()&&Ar(t,function(){return Xo(t,n,0,null,"paste")}),!0}function Ml(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var a=e.getModeAt(i.head),u=!1;if(a.electricChars){for(var h=0;h<a.electricChars.length;h++)if(t.indexOf(a.electricChars.charAt(h))>-1){u=Ii(e,i.head.line,"smart");break}}else a.electricInput&&a.electricInput.test(_e(e.doc,i.head.line).text.slice(0,i.head.ch))&&(u=Ii(e,i.head.line,"smart"));u&&Et(e,"electricInput",e,i.head.line)}}}function El(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,a={anchor:d(i,0),head:d(i+1,0)};n.push(a),t.push(e.getRange(a.anchor,a.head))}return{text:t,ranges:n}}function Vo(e,t,n,r){e.setAttribute("autocorrect",n?"on":"off"),e.setAttribute("autocapitalize",r?"on":"off"),e.setAttribute("spellcheck",!!t)}function Dl(){var e=R("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=R("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return I?e.style.width="1000px":e.setAttribute("wrap","off"),$&&(e.style.border="1px solid black"),t}function qo(e,t,n,r,i){var a=t,u=n,h=_e(e,t.line),v=i&&"rtl"==e.direction?-n:n;function E(Be){var Ie;if("codepoint"==r){var Re=h.text.charCodeAt(t.ch+(n>0?0:-1));Ie=isNaN(Re)?null:new d(t.line,Math.max(0,Math.min(h.text.length,t.ch+n*((n>0?Re>=55296&&Re<56320:Re>=56320&&Re<57343)?2:1))),-n)}else Ie=i?function Bs(e,t,n,r){var i=_t(t,e.doc.direction);if(!i)return Go(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var a=Tt(i,n.ch,n.sticky),u=i[a];if("ltr"==e.doc.direction&&u.level%2==0&&(r>0?u.to>n.ch:u.from<n.ch))return Go(t,n,r);var v,h=function(Fe,Be){return zo(t,Fe instanceof d?Fe.ch:Fe,Be)},y=function(Fe){return e.options.lineWrapping?(v=v||Hn(e,t),ya(e,t,v,Fe)):{begin:0,end:t.text.length}},E=y("before"==n.sticky?h(n,-1):n.ch);if("rtl"==e.doc.direction||1==u.level){var B=1==u.level==r<0,V=h(n,B?1:-1);if(null!=V&&(B?V<=u.to&&V<=E.end:V>=u.from&&V>=E.begin))return new d(n.line,V,B?"before":"after")}var he=function(Fe,Be,Ie){for(;Fe>=0&&Fe<i.length;Fe+=Be){var Qe=i[Fe],je=Be>0==(1!=Qe.level),nt=je?Ie.begin:h(Ie.end,-1);if(Qe.from<=nt&&nt<Qe.to||(nt=je?Qe.from:h(Qe.to,-1),Ie.begin<=nt&&nt<Ie.end))return gt=nt,je?new d(n.line,h(gt,1),"before"):new d(n.line,gt,"after")}var gt},be=he(a+r,r,E);if(be)return be;var Te=r>0?E.end:h(E.begin,-1);return null==Te||r>0&&Te==t.text.length||!(be=he(r>0?0:i.length-1,r,y(Te)))?null:be}(e.cm,h,t,n):Go(h,t,n);if(null==Ie){if(Be||!function y(){var Be=t.line+v;return!(Be<e.first||Be>=e.first+e.size)&&(t=new d(Be,t.ch,t.sticky),h=_e(e,Be))}())return!1;t=jo(i,e.cm,h,t.line,v)}else t=Ie;return!0}if("char"==r||"codepoint"==r)E();else if("column"==r)E(!0);else if("word"==r||"group"==r)for(var B=null,V="group"==r,J=e.cm&&e.cm.getHelper(t,"wordChars"),he=!0;!(n<0)||E(!he);he=!1){var be=h.text.charAt(t.ch)||"\n",Te=Er(be,J)?"w":V&&"\n"==be?"n":!V||/\s/.test(be)?null:"p";if(V&&!he&&!Te&&(Te="s"),B&&B!=Te){n<0&&(n=1,E(),t.sticky="after");break}if(Te&&(B=Te),n>0&&!E(!he))break}var Fe=eo(e,t,a,u,!0);return oe(a,Fe)&&(Fe.hitSide=!0),Fe}function Ol(e,t,n,r){var u,y,i=e.doc,a=t.left;if("page"==r){var h=Math.min(e.display.wrapper.clientHeight,N(e).innerHeight||i(e).documentElement.clientHeight),v=Math.max(h-.5*_n(e.display),3);u=(n>0?t.bottom:t.top)+n*v}else"line"==r&&(u=n>0?t.bottom+3:t.top-3);for(;(y=bo(e,a,u)).outside;){if(n<0?u<=0:u>=i.height){y.hitSide=!0;break}u+=5*n}return y}var vt=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Z,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Fl(e,t){var n=yo(e,t.line);if(!n||n.hidden)return null;var r=_e(e.doc,t.line),i=la(n,r,t.line),a=_t(r,e.doc.direction),u="left";a&&(u=Tt(a,t.ch)%2?"right":"left");var v=fa(i.map,t.ch,u);return v.offset="right"==v.collapse?v.end:v.start,v}function qn(e,t){return t&&(e.bad=!0),e}function lo(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return qn(e.clipPos(d(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var a=e.display.view[i];if(a.node==r)return nu(a,t,n)}}function nu(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!ve(r,t))return qn(d(ge(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var a=e.rest?Ze(e.rest):e.line;return qn(d(ge(a),a.text.length),i)}var u=3==t.nodeType?t:null,h=t;for(!u&&1==t.childNodes.length&&3==t.firstChild.nodeType&&(u=t.firstChild,n&&(n=u.nodeValue.length));h.parentNode!=r;)h=h.parentNode;var v=e.measure,y=v.maps;function E(Te,Fe,Be){for(var Ie=-1;Ie<(y?y.length:0);Ie++)for(var Re=Ie<0?v.map:y[Ie],Qe=0;Qe<Re.length;Qe+=3){var je=Re[Qe+2];if(je==Te||je==Fe){var nt=ge(Ie<0?e.line:e.rest[Ie]),gt=Re[Qe]+Be;return(Be<0||je!=Te)&&(gt=Re[Qe+(Be?1:0)]),d(nt,gt)}}}var B=E(u,h,n);if(B)return qn(B,i);for(var V=h.nextSibling,J=u?u.nodeValue.length-n:0;V;V=V.nextSibling){if(B=E(V,V.firstChild,0))return qn(d(B.line,B.ch-J),i);J+=V.textContent.length}for(var he=h.previousSibling,be=n;he;he=he.previousSibling){if(B=E(he,he.firstChild,-1))return qn(d(B.line,B.ch+be),i);be+=he.textContent.length}}vt.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;function a(h){for(var v=h.target;v;v=v.parentNode){if(v==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(v.className))break}return!1}function u(h){if(a(h)&&!ft(r,h)){if(r.somethingSelected())ao({lineWise:!1,text:r.getSelections()}),"cut"==h.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var v=El(r);ao({lineWise:!0,text:v.text}),"cut"==h.type&&r.operation(function(){r.setSelections(v.ranges,0,Ce),r.replaceSelection("",null,"cut")})}if(h.clipboardData){h.clipboardData.clearData();var y=zr.text.join("\n");if(h.clipboardData.setData("Text",y),h.clipboardData.getData("Text")==y)return void h.preventDefault()}var E=Dl(),B=E.firstChild;Vo(B),r.display.lineSpace.insertBefore(E,r.display.lineSpace.firstChild),B.value=zr.text.join("\n");var V=fe(i.ownerDocument);Ue(B),setTimeout(function(){r.display.lineSpace.removeChild(E),V.focus(),V==i&&n.showPrimarySelection()},50)}}i.contentEditable=!0,Vo(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize),Me(i,"paste",function(h){!a(h)||ft(r,h)||Al(h,r)||f<=11&&setTimeout(Zt(r,function(){return t.updateFromDOM()}),20)}),Me(i,"compositionstart",function(h){t.composing={data:h.data,done:!1}}),Me(i,"compositionupdate",function(h){t.composing||(t.composing={data:h.data,done:!1})}),Me(i,"compositionend",function(h){t.composing&&(h.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),Me(i,"touchstart",function(){return n.forceCompositionEnd()}),Me(i,"input",function(){t.composing||t.readFromDOMSoon()}),Me(i,"copy",u),Me(i,"cut",u)},vt.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},vt.prototype.prepareSelection=function(){var e=ba(this.cm,!1);return e.focus=fe(this.div.ownerDocument)==this.div,e},vt.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},vt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},vt.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),r=n.from(),i=n.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||i.line<t.display.viewFrom)e.removeAllRanges();else{var a=lo(t,e.anchorNode,e.anchorOffset),u=lo(t,e.focusNode,e.focusOffset);if(!a||a.bad||!u||u.bad||0!=w(Je(a,u),r)||0!=w(We(a,u),i)){var h=t.display.view,v=r.line>=t.display.viewFrom&&Fl(t,r)||{node:h[0].measure.map[2],offset:0},y=i.line<t.display.viewTo&&Fl(t,i);if(!y){var E=h[h.length-1].measure,B=E.maps?E.maps[E.maps.length-1]:E.map;y={node:B[B.length-1],offset:B[B.length-2]-B[B.length-3]}}if(!v||!y)return void e.removeAllRanges();var J,V=e.rangeCount&&e.getRangeAt(0);try{J=x(v.node,v.offset,y.offset,y.node)}catch{}J&&(!T&&t.state.focused?(e.collapse(v.node,v.offset),J.collapsed||(e.removeAllRanges(),e.addRange(J))):(e.removeAllRanges(),e.addRange(J)),V&&null==e.anchorNode?e.addRange(V):T&&this.startGracePeriod()),this.rememberSelection()}}},vt.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},vt.prototype.showMultipleSelections=function(e){ce(this.cm.display.cursorDiv,e.cursors),ce(this.cm.display.selectionDiv,e.selection)},vt.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},vt.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return ve(this.div,t)},vt.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||fe(this.div.ownerDocument)!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},vt.prototype.blur=function(){this.div.blur()},vt.prototype.getField=function(){return this.div},vt.prototype.supportsTouch=function(){return!0},vt.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):Ar(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function n(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,n))})},vt.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},vt.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(re&&q&&this.cm.display.gutterSpecs.length&&function tu(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=lo(t,e.anchorNode,e.anchorOffset),r=lo(t,e.focusNode,e.focusOffset);n&&r&&Ar(t,function(){ar(t.doc,dn(n,r),Ce),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},vt.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a,u,h,e=this.cm,t=e.display,n=e.doc.sel.primary(),r=n.from(),i=n.to();if(0==r.ch&&r.line>e.firstLine()&&(r=d(r.line-1,_e(e.doc,r.line-1).length)),i.ch==_e(e.doc,i.line).text.length&&i.line<e.lastLine()&&(i=d(i.line+1,0)),r.line<t.viewFrom||i.line>t.viewTo-1)return!1;r.line==t.viewFrom||0==(a=En(e,r.line))?(u=ge(t.view[0].line),h=t.view[0].node):(u=ge(t.view[a].line),h=t.view[a-1].node.nextSibling);var y,E,v=En(e,i.line);if(v==t.view.length-1?(y=t.viewTo-1,E=t.lineDiv.lastChild):(y=ge(t.view[v+1].line)-1,E=t.view[v+1].node.previousSibling),!h)return!1;for(var B=e.doc.splitLines(function ru(e,t,n,r,i){var a="",u=!1,h=e.doc.lineSeparator(),v=!1;function E(){u&&(a+=h,v&&(a+=h),u=v=!1)}function B(J){J&&(E(),a+=J)}function V(J){if(1==J.nodeType){var he=J.getAttribute("cm-text");if(he)return void B(he);var Te,be=J.getAttribute("cm-marker");if(be){var Fe=e.findMarks(d(r,0),d(i+1,0),function y(J){return function(he){return he.id==J}}(+be));return void(Fe.length&&(Te=Fe[0].find(0))&&B(Tr(e.doc,Te.from,Te.to).join(h)))}if("false"==J.getAttribute("contenteditable"))return;var Be=/^(pre|div|p|li|table|br)$/i.test(J.nodeName);if(!/^br$/i.test(J.nodeName)&&0==J.textContent.length)return;Be&&E();for(var Ie=0;Ie<J.childNodes.length;Ie++)V(J.childNodes[Ie]);/^(pre|p)$/i.test(J.nodeName)&&(v=!0),Be&&(u=!0)}else 3==J.nodeType&&B(J.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;V(t),t!=n;)t=t.nextSibling,v=!1;return a}(e,h,E,u,y)),V=Tr(e.doc,d(u,0),d(y,_e(e.doc,y).text.length));B.length>1&&V.length>1;)if(Ze(B)==Ze(V))B.pop(),V.pop(),y--;else{if(B[0]!=V[0])break;B.shift(),V.shift(),u++}for(var J=0,he=0,be=B[0],Te=V[0],Fe=Math.min(be.length,Te.length);J<Fe&&be.charCodeAt(J)==Te.charCodeAt(J);)++J;for(var Be=Ze(B),Ie=Ze(V),Re=Math.min(Be.length-(1==B.length?J:0),Ie.length-(1==V.length?J:0));he<Re&&Be.charCodeAt(Be.length-he-1)==Ie.charCodeAt(Ie.length-he-1);)++he;if(1==B.length&&1==V.length&&u==r.line)for(;J&&J>r.ch&&Be.charCodeAt(Be.length-he-1)==Ie.charCodeAt(Ie.length-he-1);)J--,he++;B[B.length-1]=Be.slice(0,Be.length-he).replace(/^\u200b+/,""),B[0]=B[0].slice(J).replace(/\u200b+$/,"");var Qe=d(u,J),je=d(y,V.length?Ze(V).length-he:0);return B.length>1||B[0]||w(Qe,je)?(Yn(e.doc,B,Qe,je,"+input"),!0):void 0},vt.prototype.ensurePolled=function(){this.forceCompositionEnd()},vt.prototype.reset=function(){this.forceCompositionEnd()},vt.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},vt.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},vt.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&Ar(this.cm,function(){return gr(e.cm)})},vt.prototype.setUneditable=function(e){e.contentEditable="false"},vt.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Zt(this.cm,Xo)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},vt.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},vt.prototype.onContextMenu=function(){},vt.prototype.resetPosition=function(){},vt.prototype.needsContentAttribute=!0;var Ft=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Z,this.hasSelection=!1,this.composing=null,this.resetting=!1};Ft.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var i=this.textarea;function a(u){if(!ft(r,u)){if(r.somethingSelected())ao({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var h=El(r);ao({lineWise:!0,text:h.text}),"cut"==u.type?r.setSelections(h.ranges,null,Ce):(n.prevInput="",i.value=h.text.join("\n"),Ue(i))}"cut"==u.type&&(r.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),$&&(i.style.width="0px"),Me(i,"input",function(){C&&f>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),Me(i,"paste",function(u){ft(r,u)||Al(u,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())}),Me(i,"cut",a),Me(i,"copy",a),Me(e.scroller,"paste",function(u){if(!rn(e,u)&&!ft(r,u)){if(!i.dispatchEvent)return r.state.pasteIncoming=+new Date,void n.focus();var h=new Event("paste");h.clipboardData=u.clipboardData,i.dispatchEvent(h)}}),Me(e.lineSpace,"selectstart",function(u){rn(e,u)||At(u)}),Me(i,"compositionstart",function(){var u=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:u,range:r.markText(u,r.getCursor("to"),{className:"CodeMirror-composing"})}}),Me(i,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},Ft.prototype.createField=function(e){this.wrapper=Dl(),this.textarea=this.wrapper.firstChild;var t=this.cm.options;Vo(this.textarea,t.spellcheck,t.autocorrect,t.autocapitalize)},Ft.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Ft.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=ba(e);if(e.options.moveInputWithCursor){var i=Kr(e,n.sel.primary().head,"div"),a=t.wrapper.getBoundingClientRect(),u=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+u.top-a.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+u.left-a.left))}return r},Ft.prototype.showSelection=function(e){var n=this.cm.display;ce(n.cursorDiv,e.cursors),ce(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Ft.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing&&e)){var t=this.cm;if(this.resetting=!0,t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&Ue(this.textarea),C&&f>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",C&&f>=9&&(this.hasSelection=null));this.resetting=!1}},Ft.prototype.getField=function(){return this.textarea},Ft.prototype.supportsTouch=function(){return!1},Ft.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!D||fe(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},Ft.prototype.blur=function(){this.textarea.blur()},Ft.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ft.prototype.receivedFocus=function(){this.slowPoll()},Ft.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Ft.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))})},Ft.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||this.resetting||!t.state.focused||ln(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(C&&f>=9&&this.hasSelection===i||_&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var a=i.charCodeAt(0);if(8203==a&&!r&&(r="\u200b"),8666==a)return this.reset(),this.cm.execCommand("undo")}for(var u=0,h=Math.min(r.length,i.length);u<h&&r.charCodeAt(u)==i.charCodeAt(u);)++u;return Ar(t,function(){Xo(t,i.slice(u),r.length-u,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ft.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ft.prototype.onKeyPress=function(){C&&f>=9&&(this.hasSelection=null),this.fastPoll()},Ft.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var a=Mn(n,e),u=r.scroller.scrollTop;if(a&&!K){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(a)&&Zt(n,ar)(n.doc,dn(a),Ce);var B,v=i.style.cssText,y=t.wrapper.style.cssText,E=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-E.top-5)+"px; left: "+(e.clientX-E.left-5)+"px;\n      z-index: 1000; background: "+(C?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",I&&(B=i.ownerDocument.defaultView.scrollY),r.input.focus(),I&&i.ownerDocument.defaultView.scrollTo(null,B),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=J,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),C&&f>=9&&V(),b){rr(e);var he=function(){He(window,"mouseup",he),setTimeout(J,20)};Me(window,"mouseup",he)}else setTimeout(J,50)}function V(){if(null!=i.selectionStart){var be=n.somethingSelected(),Te="\u200b"+(be?i.value:"");i.value="\u21da",i.value=Te,t.prevInput=be?"":"\u200b",i.selectionStart=1,i.selectionEnd=Te.length,r.selForContextMenu=n.doc.sel}}function J(){if(t.contextMenuPending==J&&(t.contextMenuPending=!1,t.wrapper.style.cssText=y,i.style.cssText=v,C&&f<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=u),null!=i.selectionStart)){(!C||C&&f<9)&&V();var be=0,Te=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"\u200b"==t.prevInput?Zt(n,Va)(n):be++<10?r.detectingSelectAll=setTimeout(Te,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(Te,200)}}},Ft.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},Ft.prototype.setUneditable=function(){},Ft.prototype.needsContentAttribute=!1,function Xs(e){var t=e.optionHandlers;function n(r,i,a,u){e.defaults[r]=i,a&&(t[r]=u?function(h,v,y){y!=Vn&&a(h,v,y)}:a)}e.defineOption=n,e.Init=Vn,n("value","",function(r,i){return r.setValue(i)},!0),n("mode",null,function(r,i){r.doc.modeOption=i,Ho(r)},!0),n("indentUnit",2,Ho,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(r){ki(r),hi(r),gr(r)},!0),n("lineSeparator",null,function(r,i){if(r.doc.lineSep=i,i){var a=[],u=r.doc.first;r.doc.iter(function(v){for(var y=0;;){var E=v.text.indexOf(i,y);if(-1==E)break;y=E+i.length,a.push(d(u,E))}u++});for(var h=a.length-1;h>=0;h--)Yn(r.doc,i,a[h],d(a[h].line,a[h].ch+i.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(r,i,a){r.state.specialChars=new RegExp(i.source+(i.test("\t")?"":"|\t"),"g"),a!=Vn&&r.refresh()}),n("specialCharPlaceholder",et,function(r){return r.refresh()},!0),n("electricChars",!0),n("inputStyle",D?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(r,i){return r.getInputField().spellcheck=i},!0),n("autocorrect",!1,function(r,i){return r.getInputField().autocorrect=i},!0),n("autocapitalize",!1,function(r,i){return r.getInputField().autocapitalize=i},!0),n("rtlMoveVisually",!L),n("wholeLineUpdateBefore",!0),n("theme","default",function(r){Ll(r),xi(r)},!0),n("keyMap","default",function(r,i,a){var u=no(i),h=a!=Vn&&no(a);h&&h.detach&&h.detach(r,u),u.attach&&u.attach(r,h||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,qs,!0),n("gutters",[],function(r,i){r.display.gutterSpecs=Po(i,r.options.lineNumbers),xi(r)},!0),n("fixedGutter",!0,function(r,i){r.display.gutters.style.left=i?So(r.display)+"px":"0",r.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(r){return zn(r)},!0),n("scrollbarStyle","native",function(r){Ma(r),zn(r),r.display.scrollbars.setScrollTop(r.doc.scrollTop),r.display.scrollbars.setScrollLeft(r.doc.scrollLeft)},!0),n("lineNumbers",!1,function(r,i){r.display.gutterSpecs=Po(r.options.gutters,i),xi(r)},!0),n("firstLineNumber",1,xi,!0),n("lineNumberFormatter",function(r){return r},xi,!0),n("showCursorWhenSelecting",!1,di,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(r,i){"nocursor"==i&&(Kn(r),r.display.input.blur()),r.display.input.readOnlyChanged(i)}),n("screenReaderLabel",null,function(r,i){r.display.input.screenReaderLabelChanged(i=""===i?null:i)}),n("disableInput",!1,function(r,i){i||r.display.input.reset()},!0),n("dragDrop",!0,Vs),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,di,!0),n("singleCursorHeightPerLine",!0,di,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,ki,!0),n("addModeClass",!1,ki,!0),n("pollInterval",100),n("undoDepth",200,function(r,i){return r.doc.history.undoDepth=i}),n("historyEventDelay",1250),n("viewportMargin",10,function(r){return r.refresh()},!0),n("maxHighlightLength",1e4,ki,!0),n("moveInputWithCursor",!0,function(r,i){i||r.display.input.resetPosition()}),n("tabindex",null,function(r,i){return r.display.input.getField().tabIndex=i||""}),n("autofocus",null),n("direction","ltr",function(r,i){return r.doc.setDirection(i)},!0),n("phrases",null)}(bt),function eu(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){N(this).focus(),this.display.input.focus()},setOption:function(r,i){var a=this.options,u=a[r];a[r]==i&&"mode"!=r||(a[r]=i,t.hasOwnProperty(r)&&Zt(this,t[r])(this,i,u),at(this,"optionChange",this,r))},getOption:function(r){return this.options[r]},getDoc:function(){return this.doc},addKeyMap:function(r,i){this.state.keyMaps[i?"push":"unshift"](no(r))},removeKeyMap:function(r){for(var i=this.state.keyMaps,a=0;a<i.length;++a)if(i[a]==r||i[a].name==r)return i.splice(a,1),!0},addOverlay:hr(function(r,i){var a=r.token?r:e.getMode(this.options,r);if(a.startState)throw new Error("Overlays may not be stateful.");(function Vt(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)})(this.state.overlays,{mode:a,modeSpec:r,opaque:i&&i.opaque,priority:i&&i.priority||0},function(u){return u.priority}),this.state.modeGen++,gr(this)}),removeOverlay:hr(function(r){for(var i=this.state.overlays,a=0;a<i.length;++a){var u=i[a].modeSpec;if(u==r||"string"==typeof r&&u.name==r)return i.splice(a,1),this.state.modeGen++,void gr(this)}}),indentLine:hr(function(r,i,a){"string"!=typeof i&&"number"!=typeof i&&(i=null==i?this.options.smartIndent?"smart":"prev":i?"add":"subtract"),ee(this.doc,r)&&Ii(this,r,i,a)}),indentSelection:hr(function(r){for(var i=this.doc.sel.ranges,a=-1,u=0;u<i.length;u++){var h=i[u];if(h.empty())h.head.line>a&&(Ii(this,h.head.line,r,!0),a=h.head.line,u==this.doc.sel.primIndex&&Un(this));else{var v=h.from(),y=h.to(),E=Math.max(a,v.line);a=Math.min(this.lastLine(),y.line-(y.ch?0:1))+1;for(var B=E;B<a;++B)Ii(this,B,r);var V=this.doc.sel.ranges;0==v.ch&&i.length==V.length&&V[u].from().ch>0&&Uo(this.doc,u,new dt(v,V[u].to()),Ce)}}}),getTokenAt:function(r,i){return ri(this,r,i)},getLineTokens:function(r,i){return ri(this,d(r),i,!0)},getTokenTypeAt:function(r){r=De(this.doc,r);var v,i=qr(this,_e(this.doc,r.line)),a=0,u=(i.length-1)/2,h=r.ch;if(0==h)v=i[2];else for(;;){var y=a+u>>1;if((y?i[2*y-1]:0)>=h)u=y;else{if(!(i[2*y+1]<h)){v=i[2*y+2];break}a=y+1}}var E=v?v.indexOf("overlay "):-1;return E<0?v:0==E?null:v.slice(0,E-1)},getModeAt:function(r){var i=this.doc.mode;return i.innerMode?e.innerMode(i,this.getTokenAt(r).state).mode:i},getHelper:function(r,i){return this.getHelpers(r,i)[0]},getHelpers:function(r,i){var a=[];if(!n.hasOwnProperty(i))return a;var u=n[i],h=this.getModeAt(r);if("string"==typeof h[i])u[h[i]]&&a.push(u[h[i]]);else if(h[i])for(var v=0;v<h[i].length;v++){var y=u[h[i][v]];y&&a.push(y)}else h.helperType&&u[h.helperType]?a.push(u[h.helperType]):u[h.name]&&a.push(u[h.name]);for(var E=0;E<u._global.length;E++){var B=u._global[E];B.pred(h,this)&&-1==te(a,B.val)&&a.push(B.val)}return a},getStateAfter:function(r,i){var a=this.doc;return $r(this,(r=Ye(a,r??a.first+a.size-1))+1,i).state},cursorCoords:function(r,i){var u=this.doc.sel.primary();return Kr(this,null==r?u.head:"object"==typeof r?De(this.doc,r):r?u.from():u.to(),i||"page")},charCoords:function(r,i){return Ui(this,De(this.doc,r),i||"page")},coordsChar:function(r,i){return bo(this,(r=va(this,r,i||"page")).left,r.top)},lineAtHeight:function(r,i){return r=va(this,{top:r,left:0},i||"page").top,U(this.doc,r+this.display.viewOffset)},heightAtLine:function(r,i,a){var h,u=!1;if("number"==typeof r){var v=this.doc.first+this.doc.size-1;r<this.doc.first?r=this.doc.first:r>v&&(r=v,u=!0),h=_e(this.doc,r)}else h=r;return Ki(this,h,{top:0,left:0},i||"page",a||u).top+(u?this.doc.height-A(h):0)},defaultTextHeight:function(){return _n(this.display)},defaultCharWidth:function(){return Wn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(r,i,a,u,h){var v=this.display,y=(r=Kr(this,De(this.doc,r))).bottom,E=r.left;if(i.style.position="absolute",i.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(i),v.sizer.appendChild(i),"over"==u)y=r.top;else if("above"==u||"near"==u){var B=Math.max(v.wrapper.clientHeight,this.doc.height),V=Math.max(v.sizer.clientWidth,v.lineSpace.clientWidth);("above"==u||r.bottom+i.offsetHeight>B)&&r.top>i.offsetHeight?y=r.top-i.offsetHeight:r.bottom+i.offsetHeight<=B&&(y=r.bottom),E+i.offsetWidth>V&&(E=V-i.offsetWidth)}i.style.top=y+"px",i.style.left=i.style.right="","right"==h?(E=v.sizer.clientWidth-i.offsetWidth,i.style.right="0px"):("left"==h?E=0:"middle"==h&&(E=(v.sizer.clientWidth-i.offsetWidth)/2),i.style.left=E+"px"),a&&function Vl(e,t){var n=Do(e,t);null!=n.scrollTop&&vi(e,n.scrollTop),null!=n.scrollLeft&&Dn(e,n.scrollLeft)}(this,{left:E,top:y,right:E+i.offsetWidth,bottom:y+i.offsetHeight})},triggerOnKeyDown:hr(yl),triggerOnKeyPress:hr(kl),triggerOnKeyUp:xl,triggerOnMouseDown:hr(bl),execCommand:function(r){if(Ei.hasOwnProperty(r))return Ei[r].call(null,this)},triggerElectric:hr(function(r){Ml(this,r)}),findPosH:function(r,i,a,u){var h=1;i<0&&(h=-1,i=-i);for(var v=De(this.doc,r),y=0;y<i&&!(v=qo(this.doc,v,h,a,u)).hitSide;++y);return v},moveH:hr(function(r,i){var a=this;this.extendSelectionsBy(function(u){return a.display.shift||a.doc.extend||u.empty()?qo(a.doc,u.head,r,i,a.options.rtlMoveVisually):r<0?u.from():u.to()},ze)}),deleteH:hr(function(r,i){var u=this.doc;this.doc.sel.somethingSelected()?u.replaceSelection("",null,"+delete"):Xn(this,function(h){var v=qo(u,h.head,r,i,!1);return r<0?{from:v,to:h.head}:{from:h.head,to:v}})}),findPosV:function(r,i,a,u){var h=1,v=u;i<0&&(h=-1,i=-i);for(var y=De(this.doc,r),E=0;E<i;++E){var B=Kr(this,y,"div");if(null==v?v=B.left:B.left=v,(y=Ol(this,B,h,a)).hitSide)break}return y},moveV:hr(function(r,i){var a=this,u=this.doc,h=[],v=!this.display.shift&&!u.extend&&u.sel.somethingSelected();if(u.extendSelectionsBy(function(E){if(v)return r<0?E.from():E.to();var B=Kr(a,E.head,"div");null!=E.goalColumn&&(B.left=E.goalColumn),h.push(B.left);var V=Ol(a,B,r,i);return"page"==i&&E==u.sel.primary()&&Oo(a,Ui(a,V,"div").top-B.top),V},ze),h.length)for(var y=0;y<u.sel.ranges.length;y++)u.sel.ranges[y].goalColumn=h[y]}),findWordAt:function(r){var a=_e(this.doc,r.line).text,u=r.ch,h=r.ch;if(a){var v=this.getHelper(r,"wordChars");"before"!=r.sticky&&h!=a.length||!u?++h:--u;for(var y=a.charAt(u),E=Er(y,v)?function(B){return Er(B,v)}:/\s/.test(y)?function(B){return/\s/.test(B)}:function(B){return!/\s/.test(B)&&!Er(B)};u>0&&E(a.charAt(u-1));)--u;for(;h<a.length&&E(a.charAt(h));)++h}return new dt(d(r.line,u),d(r.line,h))},toggleOverwrite:function(r){null!=r&&r==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Se(this.display.cursorDiv,"CodeMirror-overwrite"):ne(this.display.cursorDiv,"CodeMirror-overwrite"),at(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==fe(Ge(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:hr(function(r,i){pi(this,r,i)}),getScrollInfo:function(){var r=this.display.scroller;return{left:r.scrollLeft,top:r.scrollTop,height:r.scrollHeight-Jr(this)-this.display.barHeight,width:r.scrollWidth-Jr(this)-this.display.barWidth,clientHeight:mo(this),clientWidth:Tn(this)}},scrollIntoView:hr(function(r,i){null==r?(r={from:this.doc.sel.primary().head,to:null},null==i&&(i=this.options.cursorScrollMargin)):"number"==typeof r?r={from:d(r,0),to:null}:null==r.from&&(r={from:r,to:null}),r.to||(r.to=r.from),r.margin=i||0,null!=r.from.line?function ql(e,t){Yi(e),e.curOp.scrollToPos=t}(this,r):Sa(this,r.from,r.to,r.margin)}),setSize:hr(function(r,i){var a=this,u=function(v){return"number"==typeof v||/^\d+$/.test(String(v))?v+"px":v};null!=r&&(this.display.wrapper.style.width=u(r)),null!=i&&(this.display.wrapper.style.height=u(i)),this.options.lineWrapping&&ha(this);var h=this.display.viewFrom;this.doc.iter(h,this.display.viewTo,function(v){if(v.widgets)for(var y=0;y<v.widgets.length;y++)if(v.widgets[y].noHScroll){cn(a,h,"widget");break}++h}),this.curOp.forceUpdate=!0,at(this,"refresh",this)}),operation:function(r){return Ar(this,r)},startOperation:function(){return Fn(this)},endOperation:function(){return In(this)},refresh:hr(function(){var r=this.display.cachedTextHeight;gr(this),this.curOp.forceUpdate=!0,hi(this),pi(this,this.doc.scrollLeft,this.doc.scrollTop),No(this.display),(null==r||Math.abs(r-_n(this.display))>.5||this.options.lineWrapping)&&Lo(this),at(this,"refresh",this)}),swapDoc:hr(function(r){var i=this.doc;return i.cm=null,this.state.selectingText&&this.state.selectingText(),Ha(this,r),hi(this),this.display.input.reset(),pi(this,r.scrollLeft,r.scrollTop),this.curOp.forceScroll=!0,Et(this,"swapDoc",this,i),i}),phrase:function(r){var i=this.options.phrases;return i&&Object.prototype.hasOwnProperty.call(i,r)?i[r]:r},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},wr(e),e.registerHelper=function(r,i,a){n.hasOwnProperty(r)||(n[r]=e[r]={_global:[]}),n[r][i]=a},e.registerGlobalHelper=function(r,i,a,u){e.registerHelper(r,i,u),n[r]._global.push({pred:a,val:u})}}(bt);var au="iter insert remove copy getEditor constructor".split(" ");for(var so in mr.prototype)mr.prototype.hasOwnProperty(so)&&te(au,so)<0&&(bt.prototype[so]=function(e){return function(){return e.apply(this.doc,arguments)}}(mr.prototype[so]));return wr(mr),bt.inputStyles={textarea:Ft,contenteditable:vt},bt.defineMode=function(e){!bt.defaults.mode&&"null"!=e&&(bt.defaults.mode=e),Lr.apply(this,arguments)},bt.defineMIME=function Cn(e,t){Sr[e]=t},bt.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),bt.defineMIME("text/plain","null"),bt.defineExtension=function(e,t){bt.prototype[e]=t},bt.defineDocExtension=function(e,t){mr.prototype[e]=t},bt.fromTextArea=function iu(e,t){if((t=t?Oe(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=fe(e.ownerDocument);t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function r(){e.value=h.getValue()}var i;if(e.form&&(Me(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var a=e.form;i=a.submit;try{var u=a.submit=function(){r(),a.submit=i,a.submit(),a.submit=u}}catch{}}t.finishInit=function(v){v.save=r,v.getTextArea=function(){return e},v.toTextArea=function(){v.toTextArea=isNaN,r(),e.parentNode.removeChild(v.getWrapperElement()),e.style.display="",e.form&&(He(e.form,"submit",r),!t.leaveSubmitMethodAlone&&"function"==typeof e.form.submit&&(e.form.submit=i))}},e.style.display="none";var h=bt(function(v){return e.parentNode.insertBefore(v,e.nextSibling)},t);return h},function ou(e){e.off=He,e.on=Me,e.wheelEventPixels=hs,e.Doc=mr,e.splitLines=Ut,e.countColumn=F,e.findColumn=st,e.isWordChar=sr,e.Pass=Ee,e.signal=at,e.Line=ue,e.changeEnd=pn,e.scrollbarModel=Aa,e.Pos=d,e.cmpPos=w,e.modes=er,e.mimeModes=Sr,e.resolveMode=fr,e.getMode=ir,e.modeExtensions=Bt,e.extendMode=_r,e.copyState=zt,e.startState=Dr,e.innerMode=Br,e.commands=Ei,e.keyMap=on,e.keyName=dl,e.isModifierKey=cl,e.lookupKey=Qn,e.normalizeKeyMap=Ns,e.StringStream=lt,e.SharedTextMarker=Ti,e.TextMarker=gn,e.LineWidget=Li,e.e_preventDefault=At,e.e_stopPropagation=ur,e.e_stop=rr,e.addClass=Se,e.contains=ve,e.rmClass=ne,e.keyNames=mn}(bt),bt.version="5.65.12",bt}()},69915:(yt,tt,de)=>{!function(T){"use strict";var Q=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/i;T.defineMode("gfm",function(H,W){var C=0;var I={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(X){return{code:X.code,codeBlock:X.codeBlock,ateSpace:X.ateSpace}},token:function(X,K){if(K.combineTokens=null,K.codeBlock)return X.match(/^```+/)?(K.codeBlock=!1,null):(X.skipToEnd(),null);if(X.sol()&&(K.code=!1),X.sol()&&X.match(/^```+/))return X.skipToEnd(),K.codeBlock=!0,null;if("`"===X.peek()){X.next();var ae=X.pos;X.eatWhile("`");var le=1+X.pos-ae;return K.code?le===C&&(K.code=!1):(C=le,K.code=!0),null}if(K.code)return X.next(),null;if(X.eatSpace())return K.ateSpace=!0,null;if((X.sol()||K.ateSpace)&&(K.ateSpace=!1,!1!==W.gitHubSpice)){if(X.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/))return K.combineTokens=!0,"link";if(X.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return K.combineTokens=!0,"link"}return X.match(Q)&&"]("!=X.string.slice(X.start-2,X.start)&&(0==X.start||/\W/.test(X.string.charAt(X.start-1)))?(K.combineTokens=!0,"link"):(X.next(),null)},blankLine:function f(X){return X.code=!1,null}},ie={taskLists:!0,strikethrough:!0,emoji:!0};for(var q in W)ie[q]=W[q];return ie.name="markdown",T.overlayMode(T.getMode(H,ie),I)},"markdown"),T.defineMIME("text/x-gfm","gfm")}(de(43867),de(39477),de(93784))},93518:(yt,tt,de)=>{!function(T){"use strict";T.defineMode("javascript",function(Q,H){var $,re,W=Q.indentUnit,C=H.statementIndent,f=H.jsonld,I=H.json||f,ie=!1!==H.trackScope,q=H.typescript,X=H.wordCharacters||/[\w$\xa1-\uffff]/,K=function(){function d(De){return{type:De,style:"keyword"}}var w=d("keyword a"),oe=d("keyword b"),ke=d("keyword c"),We=d("keyword d"),Je=d("operator"),Ye={type:"atom",style:"atom"};return{if:d("if"),while:w,with:w,else:oe,do:oe,try:oe,finally:oe,return:We,break:We,continue:We,new:d("new"),delete:ke,void:ke,throw:ke,debugger:d("debugger"),var:d("var"),const:d("var"),let:d("var"),function:d("function"),catch:d("catch"),for:d("for"),switch:d("switch"),case:d("case"),default:d("default"),in:Je,typeof:Je,instanceof:Je,true:Ye,false:Ye,null:Ye,undefined:Ye,NaN:Ye,Infinity:Ye,this:d("this"),class:d("class"),super:d("atom"),yield:ke,export:d("export"),import:d("import"),extends:ke,await:ke}}(),ae=/[+\-*&%=<>!?|~^@]/,le=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function D(d,w,oe){return $=d,re=oe,w}function _(d,w){var oe=d.next();if('"'==oe||"'"==oe)return w.tokenize=function m(d){return function(w,oe){var We,ke=!1;if(f&&"@"==w.peek()&&w.match(le))return oe.tokenize=_,D("jsonld-keyword","meta");for(;null!=(We=w.next())&&(We!=d||ke);)ke=!ke&&"\\"==We;return ke||(oe.tokenize=_),D("string","string")}}(oe),w.tokenize(d,w);if("."==oe&&d.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return D("number","number");if("."==oe&&d.match(".."))return D("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(oe))return D(oe);if("="==oe&&d.eat(">"))return D("=>","operator");if("0"==oe&&d.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return D("number","number");if(/\d/.test(oe))return d.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),D("number","number");if("/"==oe)return d.eat("*")?(w.tokenize=L,L(d,w)):d.eat("/")?(d.skipToEnd(),D("comment","comment")):we(d,w,1)?(function Ae(d){for(var oe,w=!1,ke=!1;null!=(oe=d.next());){if(!w){if("/"==oe&&!ke)return;"["==oe?ke=!0:ke&&"]"==oe&&(ke=!1)}w=!w&&"\\"==oe}}(d),d.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),D("regexp","string-2")):(d.eat("="),D("operator","operator",d.current()));if("`"==oe)return w.tokenize=M,M(d,w);if("#"==oe&&"!"==d.peek())return d.skipToEnd(),D("meta","meta");if("#"==oe&&d.eatWhile(X))return D("variable","property");if("<"==oe&&d.match("!--")||"-"==oe&&d.match("->")&&!/\S/.test(d.string.slice(0,d.start)))return d.skipToEnd(),D("comment","comment");if(ae.test(oe))return(">"!=oe||!w.lexical||">"!=w.lexical.type)&&(d.eat("=")?("!"==oe||"="==oe)&&d.eat("="):/[<>*+\-|&?]/.test(oe)&&(d.eat(oe),">"==oe&&d.eat(oe))),"?"==oe&&d.eat(".")?D("."):D("operator","operator",d.current());if(X.test(oe)){d.eatWhile(X);var ke=d.current();if("."!=w.lastType){if(K.propertyIsEnumerable(ke)){var We=K[ke];return D(We.type,We.style,ke)}if("async"==ke&&d.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return D("async","keyword",ke)}return D("variable","variable",ke)}}function L(d,w){for(var ke,oe=!1;ke=d.next();){if("/"==ke&&oe){w.tokenize=_;break}oe="*"==ke}return D("comment","comment")}function M(d,w){for(var ke,oe=!1;null!=(ke=d.next());){if(!oe&&("`"==ke||"$"==ke&&d.eat("{"))){w.tokenize=_;break}oe=!oe&&"\\"==ke}return D("quasi","string-2",d.current())}var P="([{}])";function b(d,w){w.fatArrowAt&&(w.fatArrowAt=null);var oe=d.string.indexOf("=>",d.start);if(!(oe<0)){if(q){var ke=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(d.string.slice(d.start,oe));ke&&(oe=ke.index)}for(var We=0,Je=!1,Ye=oe-1;Ye>=0;--Ye){var De=d.string.charAt(Ye),mt=P.indexOf(De);if(mt>=0&&mt<3){if(!We){++Ye;break}if(0==--We){"("==De&&(Je=!0);break}}else if(mt>=3&&mt<6)++We;else if(X.test(De))Je=!0;else if(/["'\/`]/.test(De))for(;;--Ye){if(0==Ye)return;if(d.string.charAt(Ye-1)==De&&"\\"!=d.string.charAt(Ye-2)){Ye--;break}}else if(Je&&!We){++Ye;break}}Je&&!We&&(w.fatArrowAt=Ye)}}var z={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function ne(d,w,oe,ke,We,Je){this.indented=d,this.column=w,this.type=oe,this.prev=We,this.info=Je,null!=ke&&(this.align=ke)}function Y(d,w){if(!ie)return!1;for(var oe=d.localVars;oe;oe=oe.next)if(oe.name==w)return!0;for(var ke=d.context;ke;ke=ke.prev)for(oe=ke.vars;oe;oe=oe.next)if(oe.name==w)return!0}function ce(d,w,oe,ke,We){var Je=d.cc;for(R.state=d,R.stream=We,R.marked=null,R.cc=Je,R.style=w,d.lexical.hasOwnProperty("align")||(d.lexical.align=!0);;)if((Je.length?Je.pop():I?Ke:Ee)(oe,ke)){for(;Je.length&&Je[Je.length-1].lex;)Je.pop()();return R.marked?R.marked:"variable"==oe&&Y(d,ke)?"variable-2":w}}var R={state:null,column:null,marked:null,cc:null};function me(){for(var d=arguments.length-1;d>=0;d--)R.cc.push(arguments[d])}function x(){return me.apply(null,arguments),!0}function ve(d,w){for(var oe=w;oe;oe=oe.next)if(oe.name==d)return!0;return!1}function fe(d){var w=R.state;if(R.marked="def",ie){if(w.context)if("var"==w.lexical.info&&w.context&&w.context.block){var oe=Se(d,w.context);if(null!=oe)return void(w.context=oe)}else if(!ve(d,w.localVars))return void(w.localVars=new Ge(d,w.localVars));H.globalVars&&!ve(d,w.globalVars)&&(w.globalVars=new Ge(d,w.globalVars))}}function Se(d,w){if(w){if(w.block){var oe=Se(d,w.prev);return oe?oe==w.prev?w:new Ue(oe,w.vars,!0):null}return ve(d,w.vars)?w:new Ue(w.prev,new Ge(d,w.vars),!1)}return null}function Pe(d){return"public"==d||"private"==d||"protected"==d||"abstract"==d||"readonly"==d}function Ue(d,w,oe){this.prev=d,this.vars=w,this.block=oe}function Ge(d,w){this.name=d,this.next=w}var N=new Ge("this",new Ge("arguments",null));function k(){R.state.context=new Ue(R.state.context,R.state.localVars,!1),R.state.localVars=N}function Oe(){R.state.context=new Ue(R.state.context,R.state.localVars,!0),R.state.localVars=null}function F(){R.state.localVars=R.state.context.vars,R.state.context=R.state.context.prev}function Z(d,w){var oe=function(){var ke=R.state,We=ke.indented;if("stat"==ke.lexical.type)We=ke.lexical.indented;else for(var Je=ke.lexical;Je&&")"==Je.type&&Je.align;Je=Je.prev)We=Je.indented;ke.lexical=new ne(We,R.stream.column(),d,null,ke.lexical,w)};return oe.lex=!0,oe}function te(){var d=R.state;d.lexical.prev&&(")"==d.lexical.type&&(d.indented=d.lexical.indented),d.lexical=d.lexical.prev)}function ye(d){return function w(oe){return oe==d?x():";"==d||"}"==oe||")"==oe||"]"==oe?me():x(w)}}function Ee(d,w){return"var"==d?x(Z("vardef",w),jr,ye(";"),te):"keyword a"==d?x(Z("form"),st,Ee,te):"keyword b"==d?x(Z("form"),Ee,te):"keyword d"==d?R.stream.match(/^\s*$/,!1)?x():x(Z("stat"),pt,ye(";"),te):"debugger"==d?x(ye(";")):"{"==d?x(Z("}"),Oe,Gr,te,F):";"==d?x():"if"==d?("else"==R.state.lexical.info&&R.state.cc[R.state.cc.length-1]==te&&R.state.cc.pop()(),x(Z("form"),st,Ee,te,Ut)):"function"==d?x(nr):"for"==d?x(Z("form"),Oe,ln,Ee,F,te):"class"==d||q&&"interface"==w?(R.marked="keyword",x(Z("form","class"==d?d:w),fr,te)):"variable"==d?q&&"declare"==w?(R.marked="keyword",x(Ee)):q&&("module"==w||"enum"==w||"type"==w)&&R.stream.match(/^\s*\w/,!1)?(R.marked="keyword","enum"==w?x(ge):"type"==w?x(Sr,ye("operator"),He,ye(";")):x(Z("form"),qt,ye("{"),Z("}"),Gr,te,te)):q&&"namespace"==w?(R.marked="keyword",x(Z("form"),Ke,Ee,te)):q&&"abstract"==w?(R.marked="keyword",x(Ee)):x(Z("stat"),xn):"switch"==d?x(Z("form"),st,ye("{"),Z("}","switch"),Oe,Gr,te,te,F):"case"==d?x(Ke,ye(":")):"default"==d?x(ye(":")):"catch"==d?x(Z("form"),k,Ce,Ee,te,F):"export"==d?x(Z("stat"),zt,te):"import"==d?x(Z("stat"),Dr,te):"async"==d?x(Ee):"@"==w?x(Ke,Ee):me(Z("stat"),Ke,ye(";"),te)}function Ce(d){if("("==d)return x(Lr,ye(")"))}function Ke(d,w){return Xt(d,w,!1)}function ze(d,w){return Xt(d,w,!0)}function st(d){return"("!=d?me():x(Z(")"),pt,ye(")"),te)}function Xt(d,w,oe){if(R.state.fatArrowAt==R.stream.start){var ke=oe?St:It;if("("==d)return x(k,Z(")"),qe(Lr,")"),te,ye("=>"),ke,F);if("variable"==d)return me(k,qt,ye("=>"),ke,F)}var We=oe?xt:Ze;return z.hasOwnProperty(d)?x(We):"function"==d?x(nr,We):"class"==d||q&&"interface"==w?(R.marked="keyword",x(Z("form"),Cn,te)):"keyword c"==d||"async"==d?x(oe?ze:Ke):"("==d?x(Z(")"),pt,ye(")"),te,We):"operator"==d||"spread"==d?x(oe?ze:Ke):"["==d?x(Z("]"),Pt,te,We):"{"==d?Tt(Ir,"}",null,We):"quasi"==d?me(Vt,We):"new"==d?x(function sr(d){return function(w){return"."==w?x(d?br:Er):"variable"==w&&q?x(Rr,d?xt:Ze):me(d?ze:Ke)}}(oe)):x()}function pt(d){return d.match(/[;\}\)\],]/)?me():me(Ke)}function Ze(d,w){return","==d?x(pt):xt(d,w,!1)}function xt(d,w,oe){var ke=0==oe?Ze:xt,We=0==oe?Ke:ze;if("=>"==d)return x(k,oe?St:It,F);if("operator"==d)return/\+\+|--/.test(w)||q&&"!"==w?x(ke):q&&"<"==w&&R.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?x(Z(">"),qe(He,">"),te,ke):"?"==w?x(Ke,ye(":"),We):x(We);if("quasi"==d)return me(Vt,ke);if(";"!=d){if("("==d)return Tt(ze,")","call",ke);if("."==d)return x(Fr,ke);if("["==d)return x(Z("]"),pt,ye("]"),te,ke);if(q&&"as"==w)return R.marked="keyword",x(He,ke);if("regexp"==d)return R.state.lastType=R.marked="operator",R.stream.backUp(R.stream.pos-R.stream.start-1),x(We)}}function Vt(d,w){return"quasi"!=d?me():"${"!=w.slice(w.length-2)?x(Vt):x(pt,pr)}function pr(d){if("}"==d)return R.marked="string-2",R.state.tokenize=M,x(Vt)}function It(d){return b(R.stream,R.state),me("{"==d?Ee:Ke)}function St(d){return b(R.stream,R.state),me("{"==d?Ee:ze)}function Er(d,w){if("target"==w)return R.marked="keyword",x(Ze)}function br(d,w){if("target"==w)return R.marked="keyword",x(xt)}function xn(d){return":"==d?x(te,Ee):me(Ze,ye(";"),te)}function Fr(d){if("variable"==d)return R.marked="property",x()}function Ir(d,w){return"async"==d?(R.marked="property",x(Ir)):"variable"==d||"keyword"==R.style?(R.marked="property","get"==w||"set"==w?x(Lt):(q&&R.state.fatArrowAt==R.stream.start&&(oe=R.stream.match(/^\s*:\s*/,!1))&&(R.state.fatArrowAt=R.stream.pos+oe[0].length),x(Nt))):"number"==d||"string"==d?(R.marked=f?"property":R.style+" property",x(Nt)):"jsonld-keyword"==d?x(Nt):q&&Pe(w)?(R.marked="keyword",x(Ir)):"["==d?x(Ke,_t,ye("]"),Nt):"spread"==d?x(ze,Nt):"*"==w?(R.marked="keyword",x(Ir)):":"==d?me(Nt):void 0;var oe}function Lt(d){return"variable"!=d?me(Nt):(R.marked="property",x(nr))}function Nt(d){return":"==d?x(ze):"("==d?me(nr):void 0}function qe(d,w,oe){function ke(We,Je){if(oe?oe.indexOf(We)>-1:","==We){var Ye=R.state.lexical;return"call"==Ye.info&&(Ye.pos=(Ye.pos||0)+1),x(function(De,mt){return De==w||mt==w?me():me(d)},ke)}return We==w||Je==w?x():oe&&oe.indexOf(";")>-1?me(d):x(ye(w))}return function(We,Je){return We==w||Je==w?x():me(d,ke)}}function Tt(d,w,oe){for(var ke=3;ke<arguments.length;ke++)R.cc.push(arguments[ke]);return x(Z(w,oe),qe(d,w),te)}function Gr(d){return"}"==d?x():me(Ee,Gr)}function _t(d,w){if(q){if(":"==d)return x(He);if("?"==w)return x(_t)}}function Vr(d,w){if(q&&(":"==d||"in"==w))return x(He)}function Me(d){if(q&&":"==d)return R.stream.match(/^\s*\w+\s+is\b/,!1)?x(Ke,Ot,He):x(He)}function Ot(d,w){if("is"==w)return R.marked="keyword",x()}function He(d,w){return"keyof"==w||"typeof"==w||"infer"==w||"readonly"==w?(R.marked="keyword",x("typeof"==w?ze:He)):"variable"==d||"void"==w?(R.marked="type",x(ur)):"|"==w||"&"==w?x(He):"string"==d||"number"==d||"atom"==d?x(ur):"["==d?x(Z("]"),qe(He,"]",","),te,ur):"{"==d?x(Z("}"),ft,te,ur):"("==d?x(qe(At,")"),at,ur):"<"==d?x(qe(He,">"),He):"quasi"==d?me(rt,ur):void 0}function at(d){if("=>"==d)return x(He)}function ft(d){return d.match(/[\}\)\]]/)?x():","==d||";"==d?x(ft):me(Cr,ft)}function Cr(d,w){return"variable"==d||"keyword"==R.style?(R.marked="property",x(Cr)):"?"==w||"number"==d||"string"==d?x(Cr):":"==d?x(He):"["==d?x(ye("variable"),Vr,ye("]"),Cr):"("==d?me(er,Cr):d.match(/[;\}\)\],]/)?void 0:x()}function rt(d,w){return"quasi"!=d?me():"${"!=w.slice(w.length-2)?x(rt):x(He,wr)}function wr(d){if("}"==d)return R.marked="string-2",R.state.tokenize=M,x(rt)}function At(d,w){return"variable"==d&&R.stream.match(/^\s*[?:]/,!1)||"?"==w?x(At):":"==d?x(He):"spread"==d?x(At):me(He)}function ur(d,w){return"<"==w?x(Z(">"),qe(He,">"),te,ur):"|"==w||"."==d||"&"==w?x(He):"["==d?x(He,ye("]"),ur):"extends"==w||"implements"==w?(R.marked="keyword",x(He)):"?"==w?x(He,ye(":"),He):void 0}function Rr(d,w){if("<"==w)return x(Z(">"),qe(He,">"),te,ur)}function rr(){return me(He,Hr)}function Hr(d,w){if("="==w)return x(He)}function jr(d,w){return"enum"==w?(R.marked="keyword",x(ge)):me(qt,_t,$t,kn)}function qt(d,w){return q&&Pe(w)?(R.marked="keyword",x(qt)):"variable"==d?(fe(w),x()):"spread"==d?x(qt):"["==d?Tt(Nr,"]"):"{"==d?Tt(Zr,"}"):void 0}function Zr(d,w){return"variable"!=d||R.stream.match(/^\s*:/,!1)?("variable"==d&&(R.marked="property"),"spread"==d?x(qt):"}"==d?me():"["==d?x(Ke,ye("]"),ye(":"),Zr):x(ye(":"),qt,$t)):(fe(w),x($t))}function Nr(){return me(qt,$t)}function $t(d,w){if("="==w)return x(ze)}function kn(d){if(","==d)return x(jr)}function Ut(d,w){if("keyword b"==d&&"else"==w)return x(Z("form","else"),Ee,te)}function ln(d,w){return"await"==w?x(ln):"("==d?x(Z(")"),bn,te):void 0}function bn(d){return"var"==d?x(jr,Mt):"variable"==d?x(Mt):me(Mt)}function Mt(d,w){return")"==d?x():";"==d?x(Mt):"in"==w||"of"==w?(R.marked="keyword",x(Ke,Mt)):me(Ke,Mt)}function nr(d,w){return"*"==w?(R.marked="keyword",x(nr)):"variable"==d?(fe(w),x(nr)):"("==d?x(k,Z(")"),qe(Lr,")"),te,Me,Ee,F):q&&"<"==w?x(Z(">"),qe(rr,">"),te,nr):void 0}function er(d,w){return"*"==w?(R.marked="keyword",x(er)):"variable"==d?(fe(w),x(er)):"("==d?x(k,Z(")"),qe(Lr,")"),te,Me,F):q&&"<"==w?x(Z(">"),qe(rr,">"),te,er):void 0}function Sr(d,w){return"keyword"==d||"variable"==d?(R.marked="type",x(Sr)):"<"==w?x(Z(">"),qe(rr,">"),te):void 0}function Lr(d,w){return"@"==w&&x(Ke,Lr),"spread"==d?x(Lr):q&&Pe(w)?(R.marked="keyword",x(Lr)):q&&"this"==d?x(_t,$t):me(qt,_t,$t)}function Cn(d,w){return"variable"==d?fr(d,w):ir(d,w)}function fr(d,w){if("variable"==d)return fe(w),x(ir)}function ir(d,w){return"<"==w?x(Z(">"),qe(rr,">"),te,ir):"extends"==w||"implements"==w||q&&","==d?("implements"==w&&(R.marked="keyword"),x(q?He:Ke,ir)):"{"==d?x(Z("}"),Bt,te):void 0}function Bt(d,w){return"async"==d||"variable"==d&&("static"==w||"get"==w||"set"==w||q&&Pe(w))&&R.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1)?(R.marked="keyword",x(Bt)):"variable"==d||"keyword"==R.style?(R.marked="property",x(_r,Bt)):"number"==d||"string"==d?x(_r,Bt):"["==d?x(Ke,_t,ye("]"),_r,Bt):"*"==w?(R.marked="keyword",x(Bt)):q&&"("==d?me(er,Bt):";"==d||","==d?x(Bt):"}"==d?x():"@"==w?x(Ke,Bt):void 0}function _r(d,w){if("!"==w||"?"==w)return x(_r);if(":"==d)return x(He,$t);if("="==w)return x(ze);var oe=R.state.lexical.prev;return me(oe&&"interface"==oe.info?er:nr)}function zt(d,w){return"*"==w?(R.marked="keyword",x(or,ye(";"))):"default"==w?(R.marked="keyword",x(Ke,ye(";"))):"{"==d?x(qe(Br,"}"),or,ye(";")):me(Ee)}function Br(d,w){return"as"==w?(R.marked="keyword",x(ye("variable"))):"variable"==d?me(ze,Br):void 0}function Dr(d){return"string"==d?x():"("==d?me(Ke):"."==d?me(Ze):me(lt,_e,or)}function lt(d,w){return"{"==d?Tt(lt,"}"):("variable"==d&&fe(w),"*"==w&&(R.marked="keyword"),x(Tr))}function _e(d){if(","==d)return x(lt,_e)}function Tr(d,w){if("as"==w)return R.marked="keyword",x(lt)}function or(d,w){if("from"==w)return R.marked="keyword",x(Ke)}function Pt(d){return"]"==d?x():me(qe(ze,"]"))}function ge(){return me(Z("form"),qt,ye("{"),Z("}"),qe(U,"}"),te,te)}function U(){return me(qt,$t)}function we(d,w,oe){return w.tokenize==_&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(w.lastType)||"quasi"==w.lastType&&/\{\s*$/.test(d.string.slice(0,d.pos-(oe||0)))}return k.lex=Oe.lex=!0,F.lex=!0,te.lex=!0,{startState:function(d){var w={tokenize:_,lastType:"sof",cc:[],lexical:new ne((d||0)-W,0,"block",!1),localVars:H.localVars,context:H.localVars&&new Ue(null,null,!1),indented:d||0};return H.globalVars&&"object"==typeof H.globalVars&&(w.globalVars=H.globalVars),w},token:function(d,w){if(d.sol()&&(w.lexical.hasOwnProperty("align")||(w.lexical.align=!1),w.indented=d.indentation(),b(d,w)),w.tokenize!=L&&d.eatSpace())return null;var oe=w.tokenize(d,w);return"comment"==$?oe:(w.lastType="operator"!=$||"++"!=re&&"--"!=re?$:"incdec",ce(w,oe,$,re,d))},indent:function(d,w){if(d.tokenize==L||d.tokenize==M)return T.Pass;if(d.tokenize!=_)return 0;var We,oe=w&&w.charAt(0),ke=d.lexical;if(!/^\s*else\b/.test(w))for(var Je=d.cc.length-1;Je>=0;--Je){var Ye=d.cc[Je];if(Ye==te)ke=ke.prev;else if(Ye!=Ut&&Ye!=F)break}for(;("stat"==ke.type||"form"==ke.type)&&("}"==oe||(We=d.cc[d.cc.length-1])&&(We==Ze||We==xt)&&!/^[,\.=+\-*:?[\(]/.test(w));)ke=ke.prev;C&&")"==ke.type&&"stat"==ke.prev.type&&(ke=ke.prev);var De=ke.type,mt=oe==De;return"vardef"==De?ke.indented+("operator"==d.lastType||","==d.lastType?ke.info.length+1:0):"form"==De&&"{"==oe?ke.indented:"form"==De?ke.indented+W:"stat"==De?ke.indented+(function ee(d,w){return"operator"==d.lastType||","==d.lastType||ae.test(w.charAt(0))||/[,.]/.test(w.charAt(0))}(d,w)?C||W:0):"switch"!=ke.info||mt||0==H.doubleIndentSwitch?ke.align?ke.column+(mt?0:1):ke.indented+(mt?0:W):ke.indented+(/^(?:case|default)\b/.test(w)?W:2*W)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:I?null:"/*",blockCommentEnd:I?null:"*/",blockCommentContinue:I?null:" * ",lineComment:I?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:I?"json":"javascript",jsonldMode:f,jsonMode:I,expressionAllowed:we,skipExpression:function(d){ce(d,"atom","atom","true",new T.StringStream("",2,null))}}}),T.registerHelper("wordChars","javascript",/[\w$]/),T.defineMIME("text/javascript","javascript"),T.defineMIME("text/ecmascript","javascript"),T.defineMIME("application/javascript","javascript"),T.defineMIME("application/x-javascript","javascript"),T.defineMIME("application/ecmascript","javascript"),T.defineMIME("application/json",{name:"javascript",json:!0}),T.defineMIME("application/x-json",{name:"javascript",json:!0}),T.defineMIME("application/manifest+json",{name:"javascript",json:!0}),T.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),T.defineMIME("text/typescript",{name:"javascript",typescript:!0}),T.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(de(43867))},39477:(yt,tt,de)=>{!function(T){"use strict";T.defineMode("markdown",function(Q,H){var W=T.getMode(Q,"text/html"),C="null"==W.name;void 0===H.highlightFormatting&&(H.highlightFormatting=!1),void 0===H.maxBlockquoteDepth&&(H.maxBlockquoteDepth=0),void 0===H.taskLists&&(H.taskLists=!1),void 0===H.strikethrough&&(H.strikethrough=!1),void 0===H.emoji&&(H.emoji=!1),void 0===H.fencedCodeBlockHighlighting&&(H.fencedCodeBlockHighlighting=!0),void 0===H.fencedCodeBlockDefaultMode&&(H.fencedCodeBlockDefaultMode="text/plain"),void 0===H.xml&&(H.xml=!0),void 0===H.tokenTypeOverrides&&(H.tokenTypeOverrides={});var I={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var ie in I)I.hasOwnProperty(ie)&&H.tokenTypeOverrides[ie]&&(I[ie]=H.tokenTypeOverrides[ie]);var q=/^([*\-_])(?:\s*\1){2,}\s*$/,X=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,K=/^\[(x| )\](?=\s)/i,ae=H.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,le=/^ {0,3}(?:\={1,}|-{2,})\s*$/,Ae=/^[^#!\[\]*_\\<>` "'(~:]+/,$=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,re=/^\s*\[[^\]]+?\]:.*$/,D=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function m(N,k,Oe){return k.f=k.inline=Oe,Oe(N,k)}function L(N,k,Oe){return k.f=k.block=Oe,Oe(N,k)}function P(N){if(N.linkTitle=!1,N.linkHref=!1,N.linkText=!1,N.em=!1,N.strong=!1,N.strikethrough=!1,N.quote=0,N.indentedCode=!1,N.f==z){var k=C;if(!k){var Oe=T.innerMode(W,N.htmlState);k="xml"==Oe.mode.name&&null===Oe.state.tagStart&&!Oe.state.context&&Oe.state.tokenize.isInText}k&&(N.f=R,N.block=b,N.htmlState=null)}return N.trailingSpace=0,N.trailingSpaceNewLine=!1,N.prevLine=N.thisLine,N.thisLine={stream:null},null}function b(N,k){var Oe=N.column()===k.indentation,F=function M(N){return!N||!/\S/.test(N.string)}(k.prevLine.stream),Z=k.indentedCode,te=k.prevLine.hr,ye=!1!==k.list,Ee=(k.listStack[k.listStack.length-1]||0)+3;k.indentedCode=!1;var Ce=k.indentation;if(null===k.indentationDiff&&(k.indentationDiff=k.indentation,ye)){for(k.list=null;Ce<k.listStack[k.listStack.length-1];)k.listStack.pop(),k.listStack.length?k.indentation=k.listStack[k.listStack.length-1]:k.list=!1;!1!==k.list&&(k.indentationDiff=Ce-k.listStack[k.listStack.length-1])}var Ke=!(F||te||k.prevLine.header||ye&&Z||k.prevLine.fencedCodeEnd),ze=(!1===k.list||te||F)&&k.indentation<=Ee&&N.match(q),st=null;if(k.indentationDiff>=4&&(Z||k.prevLine.fencedCodeEnd||k.prevLine.header||F))return N.skipToEnd(),k.indentedCode=!0,I.code;if(N.eatSpace())return null;if(Oe&&k.indentation<=Ee&&(st=N.match(ae))&&st[1].length<=6)return k.quote=0,k.header=st[1].length,k.thisLine.header=!0,H.highlightFormatting&&(k.formatting="header"),k.f=k.inline,Y(k);if(k.indentation<=Ee&&N.eat(">"))return k.quote=Oe?1:k.quote+1,H.highlightFormatting&&(k.formatting="quote"),N.eatSpace(),Y(k);if(!ze&&!k.setext&&Oe&&k.indentation<=Ee&&(st=N.match(X))){var Xt=st[1]?"ol":"ul";return k.indentation=Ce+N.current().length,k.list=!0,k.quote=0,k.listStack.push(k.indentation),k.em=!1,k.strong=!1,k.code=!1,k.strikethrough=!1,H.taskLists&&N.match(K,!1)&&(k.taskList=!0),k.f=k.inline,H.highlightFormatting&&(k.formatting=["list","list-"+Xt]),Y(k)}return Oe&&k.indentation<=Ee&&(st=N.match($,!0))?(k.quote=0,k.fencedEndRE=new RegExp(st[1]+"+ *$"),k.localMode=H.fencedCodeBlockHighlighting&&function f(N){if(T.findModeByName){var k=T.findModeByName(N);k&&(N=k.mime||k.mimes[0])}var Oe=T.getMode(Q,N);return"null"==Oe.name?null:Oe}(st[2]||H.fencedCodeBlockDefaultMode),k.localMode&&(k.localState=T.startState(k.localMode)),k.f=k.block=ne,H.highlightFormatting&&(k.formatting="code-block"),k.code=-1,Y(k)):k.setext||!(Ke&&ye||k.quote||!1!==k.list||k.code||ze||re.test(N.string))&&(st=N.lookAhead(1))&&(st=st.match(le))?(k.setext?(k.header=k.setext,k.setext=0,N.skipToEnd(),H.highlightFormatting&&(k.formatting="header")):(k.header="="==st[0].charAt(0)?1:2,k.setext=k.header),k.thisLine.header=!0,k.f=k.inline,Y(k)):ze?(N.skipToEnd(),k.hr=!0,k.thisLine.hr=!0,I.hr):"["===N.peek()?m(N,k,Se):m(N,k,k.inline)}function z(N,k){var Oe=W.token(N,k.htmlState);if(!C){var F=T.innerMode(W,k.htmlState);("xml"==F.mode.name&&null===F.state.tagStart&&!F.state.context&&F.state.tokenize.isInText||k.md_inside&&N.current().indexOf(">")>-1)&&(k.f=R,k.block=b,k.htmlState=null)}return Oe}function ne(N,k){var te,Oe=k.listStack[k.listStack.length-1]||0,F=k.indentation<Oe;return k.fencedEndRE&&k.indentation<=Oe+3&&(F||N.match(k.fencedEndRE))?(H.highlightFormatting&&(k.formatting="code-block"),F||(te=Y(k)),k.localMode=k.localState=null,k.block=b,k.f=R,k.fencedEndRE=null,k.code=0,k.thisLine.fencedCodeEnd=!0,F?L(N,k,k.block):te):k.localMode?k.localMode.token(N,k.localState):(N.skipToEnd(),I.code)}function Y(N){var k=[];if(N.formatting){k.push(I.formatting),"string"==typeof N.formatting&&(N.formatting=[N.formatting]);for(var Oe=0;Oe<N.formatting.length;Oe++)k.push(I.formatting+"-"+N.formatting[Oe]),"header"===N.formatting[Oe]&&k.push(I.formatting+"-"+N.formatting[Oe]+"-"+N.header),"quote"===N.formatting[Oe]&&k.push(!H.maxBlockquoteDepth||H.maxBlockquoteDepth>=N.quote?I.formatting+"-"+N.formatting[Oe]+"-"+N.quote:"error")}if(N.taskOpen)return k.push("meta"),k.length?k.join(" "):null;if(N.taskClosed)return k.push("property"),k.length?k.join(" "):null;if(N.linkHref?k.push(I.linkHref,"url"):(N.strong&&k.push(I.strong),N.em&&k.push(I.em),N.strikethrough&&k.push(I.strikethrough),N.emoji&&k.push(I.emoji),N.linkText&&k.push(I.linkText),N.code&&k.push(I.code),N.image&&k.push(I.image),N.imageAltText&&k.push(I.imageAltText,"link"),N.imageMarker&&k.push(I.imageMarker)),N.header&&k.push(I.header,I.header+"-"+N.header),N.quote&&(k.push(I.quote),k.push(!H.maxBlockquoteDepth||H.maxBlockquoteDepth>=N.quote?I.quote+"-"+N.quote:I.quote+"-"+H.maxBlockquoteDepth)),!1!==N.list){var F=(N.listStack.length-1)%3;k.push(F?1===F?I.list2:I.list3:I.list1)}return N.trailingSpaceNewLine?k.push("trailing-space-new-line"):N.trailingSpace&&k.push("trailing-space-"+(N.trailingSpace%2?"a":"b")),k.length?k.join(" "):null}function ce(N,k){if(N.match(Ae,!0))return Y(k)}function R(N,k){var Oe=k.text(N,k);if(typeof Oe<"u")return Oe;if(k.list)return k.list=null,Y(k);if(k.taskList)return" "===N.match(K,!0)[1]?k.taskOpen=!0:k.taskClosed=!0,H.highlightFormatting&&(k.formatting="task"),k.taskList=!1,Y(k);if(k.taskOpen=!1,k.taskClosed=!1,k.header&&N.match(/^#+$/,!0))return H.highlightFormatting&&(k.formatting="header"),Y(k);var Z=N.next();if(k.linkTitle){k.linkTitle=!1;var te=Z;if("("===Z&&(te=")"),te=(te+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"),N.match(new RegExp("^\\s*(?:[^"+te+"\\\\]+|\\\\\\\\|\\\\.)"+te),!0))return I.linkHref}if("`"===Z){var Ee=k.formatting;H.highlightFormatting&&(k.formatting="code"),N.eatWhile("`");var Ce=N.current().length;if(0==k.code&&(!k.quote||1==Ce))return k.code=Ce,Y(k);if(Ce==k.code){var Ke=Y(k);return k.code=0,Ke}return k.formatting=Ee,Y(k)}if(k.code)return Y(k);if("\\"===Z&&(N.next(),H.highlightFormatting)){var ze=Y(k),st=I.formatting+"-escape";return ze?ze+" "+st:st}if("!"===Z&&N.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return k.imageMarker=!0,k.image=!0,H.highlightFormatting&&(k.formatting="image"),Y(k);if("["===Z&&k.imageMarker&&N.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return k.imageMarker=!1,k.imageAltText=!0,H.highlightFormatting&&(k.formatting="image"),Y(k);if("]"===Z&&k.imageAltText){H.highlightFormatting&&(k.formatting="image");ze=Y(k);return k.imageAltText=!1,k.image=!1,k.inline=k.f=x,ze}if("["===Z&&!k.image)return k.linkText&&N.match(/^.*?\]/)||(k.linkText=!0,H.highlightFormatting&&(k.formatting="link")),Y(k);if("]"===Z&&k.linkText){H.highlightFormatting&&(k.formatting="link");ze=Y(k);return k.linkText=!1,k.inline=k.f=N.match(/\(.*?\)| ?\[.*?\]/,!1)?x:R,ze}if("<"===Z&&N.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return k.f=k.inline=me,H.highlightFormatting&&(k.formatting="link"),(ze=Y(k))?ze+=" ":ze="",ze+I.linkInline;if("<"===Z&&N.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return k.f=k.inline=me,H.highlightFormatting&&(k.formatting="link"),(ze=Y(k))?ze+=" ":ze="",ze+I.linkEmail;if(H.xml&&"<"===Z&&N.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var Xt=N.string.indexOf(">",N.pos);if(-1!=Xt){var pt=N.string.substring(N.start,Xt);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(pt)&&(k.md_inside=!0)}return N.backUp(1),k.htmlState=T.startState(W),L(N,k,z)}if(H.xml&&"<"===Z&&N.match(/^\/\w*?>/))return k.md_inside=!1,"tag";if("*"===Z||"_"===Z){for(var Ze=1,xt=1==N.pos?" ":N.string.charAt(N.pos-2);Ze<3&&N.eat(Z);)Ze++;var Vt=N.peek()||" ",pr=!/\s/.test(Vt)&&(!D.test(Vt)||/\s/.test(xt)||D.test(xt)),It=!/\s/.test(xt)&&(!D.test(xt)||/\s/.test(Vt)||D.test(Vt)),St=null,sr=null;if(Ze%2&&(k.em||!pr||"*"!==Z&&It&&!D.test(xt)?k.em==Z&&It&&("*"===Z||!pr||D.test(Vt))&&(St=!1):St=!0),Ze>1&&(k.strong||!pr||"*"!==Z&&It&&!D.test(xt)?k.strong==Z&&It&&("*"===Z||!pr||D.test(Vt))&&(sr=!1):sr=!0),null!=sr||null!=St)return H.highlightFormatting&&(k.formatting=null==St?"strong":null==sr?"em":"strong em"),!0===St&&(k.em=Z),!0===sr&&(k.strong=Z),Ke=Y(k),!1===St&&(k.em=!1),!1===sr&&(k.strong=!1),Ke}else if(" "===Z&&(N.eat("*")||N.eat("_"))){if(" "===N.peek())return Y(k);N.backUp(1)}if(H.strikethrough)if("~"===Z&&N.eatWhile(Z)){if(k.strikethrough)return H.highlightFormatting&&(k.formatting="strikethrough"),Ke=Y(k),k.strikethrough=!1,Ke;if(N.match(/^[^\s]/,!1))return k.strikethrough=!0,H.highlightFormatting&&(k.formatting="strikethrough"),Y(k)}else if(" "===Z&&N.match("~~",!0)){if(" "===N.peek())return Y(k);N.backUp(2)}if(H.emoji&&":"===Z&&N.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){k.emoji=!0,H.highlightFormatting&&(k.formatting="emoji");var Er=Y(k);return k.emoji=!1,Er}return" "===Z&&(N.match(/^ +$/,!1)?k.trailingSpace++:k.trailingSpace&&(k.trailingSpaceNewLine=!0)),Y(k)}function me(N,k){if(">"===N.next()){k.f=k.inline=R,H.highlightFormatting&&(k.formatting="link");var F=Y(k);return F?F+=" ":F="",F+I.linkInline}return N.match(/^[^>]+/,!0),I.linkInline}function x(N,k){if(N.eatSpace())return null;var Oe=N.next();return"("===Oe||"["===Oe?(k.f=k.inline=function fe(N){return function(k,Oe){if(k.next()===N){Oe.f=Oe.inline=R,H.highlightFormatting&&(Oe.formatting="link-string");var Z=Y(Oe);return Oe.linkHref=!1,Z}return k.match(ve[N]),Oe.linkHref=!0,Y(Oe)}}("("===Oe?")":"]"),H.highlightFormatting&&(k.formatting="link-string"),k.linkHref=!0,Y(k)):"error"}var ve={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function Se(N,k){return N.match(/^([^\]\\]|\\.)*\]:/,!1)?(k.f=Pe,N.next(),H.highlightFormatting&&(k.formatting="link"),k.linkText=!0,Y(k)):m(N,k,R)}function Pe(N,k){if(N.match("]:",!0)){k.f=k.inline=Ue,H.highlightFormatting&&(k.formatting="link");var Oe=Y(k);return k.linkText=!1,Oe}return N.match(/^([^\]\\]|\\.)+/,!0),I.linkText}function Ue(N,k){return N.eatSpace()?null:(N.match(/^[^\s]+/,!0),void 0===N.peek()?k.linkTitle=!0:N.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),k.f=k.inline=R,I.linkHref+" url")}var Ge={startState:function(){return{f:b,prevLine:{stream:null},thisLine:{stream:null},block:b,htmlState:null,indentation:0,inline:R,text:ce,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(N){return{f:N.f,prevLine:N.prevLine,thisLine:N.thisLine,block:N.block,htmlState:N.htmlState&&T.copyState(W,N.htmlState),indentation:N.indentation,localMode:N.localMode,localState:N.localMode?T.copyState(N.localMode,N.localState):null,inline:N.inline,text:N.text,formatting:!1,linkText:N.linkText,linkTitle:N.linkTitle,linkHref:N.linkHref,code:N.code,em:N.em,strong:N.strong,strikethrough:N.strikethrough,emoji:N.emoji,header:N.header,setext:N.setext,hr:N.hr,taskList:N.taskList,list:N.list,listStack:N.listStack.slice(0),quote:N.quote,indentedCode:N.indentedCode,trailingSpace:N.trailingSpace,trailingSpaceNewLine:N.trailingSpaceNewLine,md_inside:N.md_inside,fencedEndRE:N.fencedEndRE}},token:function(N,k){if(k.formatting=!1,N!=k.thisLine.stream){if(k.header=0,k.hr=!1,N.match(/^\s*$/,!0))return P(k),null;if(k.prevLine=k.thisLine,k.thisLine={stream:N},k.taskList=!1,k.trailingSpace=0,k.trailingSpaceNewLine=!1,!k.localState&&(k.f=k.block,k.f!=z)){var Oe=N.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(k.indentation=Oe,k.indentationDiff=null,Oe>0)return null}}return k.f(N,k)},innerMode:function(N){return N.block==z?{state:N.htmlState,mode:W}:N.localState?{state:N.localState,mode:N.localMode}:{state:N,mode:Ge}},indent:function(N,k,Oe){return N.block==z&&W.indent?W.indent(N.htmlState,k,Oe):N.localState&&N.localMode.indent?N.localMode.indent(N.localState,k,Oe):T.Pass},blankLine:P,getType:Y,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return Ge},"xml"),T.defineMIME("text/markdown","markdown"),T.defineMIME("text/x-markdown","markdown")}(de(43867),de(51483),de(97874))},97874:(yt,tt,de)=>{!function(T){"use strict";T.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var Q=0;Q<T.modeInfo.length;Q++){var H=T.modeInfo[Q];H.mimes&&(H.mime=H.mimes[0])}T.findModeByMIME=function(W){W=W.toLowerCase();for(var C=0;C<T.modeInfo.length;C++){var f=T.modeInfo[C];if(f.mime==W)return f;if(f.mimes)for(var I=0;I<f.mimes.length;I++)if(f.mimes[I]==W)return f}return/\+xml$/.test(W)?T.findModeByMIME("application/xml"):/\+json$/.test(W)?T.findModeByMIME("application/json"):void 0},T.findModeByExtension=function(W){W=W.toLowerCase();for(var C=0;C<T.modeInfo.length;C++){var f=T.modeInfo[C];if(f.ext)for(var I=0;I<f.ext.length;I++)if(f.ext[I]==W)return f}},T.findModeByFileName=function(W){for(var C=0;C<T.modeInfo.length;C++){var f=T.modeInfo[C];if(f.file&&f.file.test(W))return f}var I=W.lastIndexOf("."),ie=I>-1&&W.substring(I+1,W.length);if(ie)return T.findModeByExtension(ie)},T.findModeByName=function(W){W=W.toLowerCase();for(var C=0;C<T.modeInfo.length;C++){var f=T.modeInfo[C];if(f.name.toLowerCase()==W)return f;if(f.alias)for(var I=0;I<f.alias.length;I++)if(f.alias[I].toLowerCase()==W)return f}}}(de(43867))},51483:(yt,tt,de)=>{!function(T){"use strict";var Q={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},H={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};T.defineMode("xml",function(W,C){var X,K,f=W.indentUnit,I={},ie=C.htmlMode?Q:H;for(var q in ie)I[q]=ie[q];for(var q in C)I[q]=C[q];function ae(x,ve){function fe(Ue){return ve.tokenize=Ue,Ue(x,ve)}var Se=x.next();return"<"==Se?x.eat("!")?x.eat("[")?x.match("CDATA[")?fe($("atom","]]>")):null:x.match("--")?fe($("comment","--\x3e")):x.match("DOCTYPE",!0,!0)?(x.eatWhile(/[\w\._\-]/),fe(re(1))):null:x.eat("?")?(x.eatWhile(/[\w\._\-]/),ve.tokenize=$("meta","?>"),"meta"):(X=x.eat("/")?"closeTag":"openTag",ve.tokenize=le,"tag bracket"):"&"==Se?(x.eat("#")?x.eat("x")?x.eatWhile(/[a-fA-F\d]/)&&x.eat(";"):x.eatWhile(/[\d]/)&&x.eat(";"):x.eatWhile(/[\w\.\-:]/)&&x.eat(";"))?"atom":"error":(x.eatWhile(/[^&<]/),null)}function le(x,ve){var fe=x.next();if(">"==fe||"/"==fe&&x.eat(">"))return ve.tokenize=ae,X=">"==fe?"endTag":"selfcloseTag","tag bracket";if("="==fe)return X="equals",null;if("<"==fe){ve.tokenize=ae,ve.state=M,ve.tagName=ve.tagStart=null;var Se=ve.tokenize(x,ve);return Se?Se+" tag error":"tag error"}return/[\'\"]/.test(fe)?(ve.tokenize=function Ae(x){var ve=function(fe,Se){for(;!fe.eol();)if(fe.next()==x){Se.tokenize=le;break}return"string"};return ve.isInAttribute=!0,ve}(fe),ve.stringStartCol=x.column(),ve.tokenize(x,ve)):(x.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function $(x,ve){return function(fe,Se){for(;!fe.eol();){if(fe.match(ve)){Se.tokenize=ae;break}fe.next()}return x}}function re(x){return function(ve,fe){for(var Se;null!=(Se=ve.next());){if("<"==Se)return fe.tokenize=re(x+1),fe.tokenize(ve,fe);if(">"==Se){if(1==x){fe.tokenize=ae;break}return fe.tokenize=re(x-1),fe.tokenize(ve,fe)}}return"meta"}}function D(x){return x&&x.toLowerCase()}function _(x,ve,fe){this.prev=x.context,this.tagName=ve||"",this.indent=x.indented,this.startOfLine=fe,(I.doNotIndent.hasOwnProperty(ve)||x.context&&x.context.noIndent)&&(this.noIndent=!0)}function m(x){x.context&&(x.context=x.context.prev)}function L(x,ve){for(var fe;;){if(!x.context||!I.contextGrabbers.hasOwnProperty(D(fe=x.context.tagName))||!I.contextGrabbers[D(fe)].hasOwnProperty(D(ve)))return;m(x)}}function M(x,ve,fe){return"openTag"==x?(fe.tagStart=ve.column(),P):"closeTag"==x?b:M}function P(x,ve,fe){return"word"==x?(fe.tagName=ve.current(),K="tag",Y):I.allowMissingTagName&&"endTag"==x?(K="tag bracket",Y(x,0,fe)):(K="error",P)}function b(x,ve,fe){if("word"==x){var Se=ve.current();return fe.context&&fe.context.tagName!=Se&&I.implicitlyClosed.hasOwnProperty(D(fe.context.tagName))&&m(fe),fe.context&&fe.context.tagName==Se||!1===I.matchClosing?(K="tag",z):(K="tag error",ne)}return I.allowMissingTagName&&"endTag"==x?(K="tag bracket",z(x,0,fe)):(K="error",ne)}function z(x,ve,fe){return"endTag"!=x?(K="error",z):(m(fe),M)}function ne(x,ve,fe){return K="error",z(x,0,fe)}function Y(x,ve,fe){if("word"==x)return K="attribute",ce;if("endTag"==x||"selfcloseTag"==x){var Se=fe.tagName,Pe=fe.tagStart;return fe.tagName=fe.tagStart=null,"selfcloseTag"==x||I.autoSelfClosers.hasOwnProperty(D(Se))?L(fe,Se):(L(fe,Se),fe.context=new _(fe,Se,Pe==fe.indented)),M}return K="error",Y}function ce(x,ve,fe){return"equals"==x?R:(I.allowMissing||(K="error"),Y(x,0,fe))}function R(x,ve,fe){return"string"==x?me:"word"==x&&I.allowUnquoted?(K="string",Y):(K="error",Y(x,0,fe))}function me(x,ve,fe){return"string"==x?me:Y(x,0,fe)}return ae.isInText=!0,{startState:function(x){var ve={tokenize:ae,state:M,indented:x||0,tagName:null,tagStart:null,context:null};return null!=x&&(ve.baseIndent=x),ve},token:function(x,ve){if(!ve.tagName&&x.sol()&&(ve.indented=x.indentation()),x.eatSpace())return null;X=null;var fe=ve.tokenize(x,ve);return(fe||X)&&"comment"!=fe&&(K=null,ve.state=ve.state(X||fe,x,ve),K&&(fe="error"==K?fe+" error":K)),fe},indent:function(x,ve,fe){var Se=x.context;if(x.tokenize.isInAttribute)return x.tagStart==x.indented?x.stringStartCol+1:x.indented+f;if(Se&&Se.noIndent)return T.Pass;if(x.tokenize!=le&&x.tokenize!=ae)return fe?fe.match(/^(\s*)/)[0].length:0;if(x.tagName)return!1!==I.multilineTagIndentPastTag?x.tagStart+x.tagName.length+2:x.tagStart+f*(I.multilineTagIndentFactor||1);if(I.alignCDATA&&/<!\[CDATA\[/.test(ve))return 0;var Pe=ve&&/^<(\/)?([\w_:\.-]*)/.exec(ve);if(Pe&&Pe[1])for(;Se;){if(Se.tagName==Pe[2]){Se=Se.prev;break}if(!I.implicitlyClosed.hasOwnProperty(D(Se.tagName)))break;Se=Se.prev}else if(Pe)for(;Se;){var Ue=I.contextGrabbers[D(Se.tagName)];if(!Ue||!Ue.hasOwnProperty(D(Pe[2])))break;Se=Se.prev}for(;Se&&Se.prev&&!Se.startOfLine;)Se=Se.prev;return Se?Se.indent+f:x.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:I.htmlMode?"html":"xml",helperType:I.htmlMode?"html":"xml",skipAttribute:function(x){x.state==R&&(x.state=Y)},xmlCurrentTag:function(x){return x.tagName?{name:x.tagName,close:"closeTag"==x.type}:null},xmlCurrentContext:function(x){for(var ve=[],fe=x.context;fe;fe=fe.prev)ve.push(fe.tagName);return ve.reverse()}}}),T.defineMIME("text/xml","xml"),T.defineMIME("application/xml","xml"),T.mimeModes.hasOwnProperty("text/html")||T.defineMIME("text/html",{name:"xml",htmlMode:!0})}(de(43867))},81685:(yt,tt,de)=>{!function(T){var Q={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}",mutiCharsPairs:[["*(",")*"]]},H=T.Pos;function W($,re){return"pairs"==re&&"string"==typeof $?$:"object"==typeof $&&null!=$[re]?$[re]:Q[re]}T.defineOption("autoCloseBrackets",!1,function($,re,D){D&&D!=T.Init&&($.removeKeyMap(C),$.state.closeBrackets=null),re&&(f(W(re,"pairs")),$.state.closeBrackets=re,$.addKeyMap(C))});var C={Backspace:function q($){var re=ie($);if(!re||$.getOption("disableInput"))return T.Pass;for(var D=W(re,"pairs"),_=$.listSelections(),m=0;m<_.length;m++){if(!_[m].empty())return T.Pass;var L=le($,_[m].head);if(!L||D.indexOf(L)%2!=0)return T.Pass}for(m=_.length-1;m>=0;m--){var M=_[m].head;$.replaceRange("",H(M.line,M.ch-1),H(M.line,M.ch+1),"+delete")}},Enter:function X($){var re=ie($),D=re&&W(re,"explode");if(!D||$.getOption("disableInput"))return T.Pass;for(var _=$.listSelections(),m=0;m<_.length;m++){if(!_[m].empty())return T.Pass;var L=le($,_[m].head);if(!L||D.indexOf(L)%2!=0)return T.Pass}$.operation(function(){var M=$.lineSeparator()||"\n";$.replaceSelection(M+M,null),$.execCommand("goCharLeft"),_=$.listSelections();for(var P=0;P<_.length;P++){var b=_[P].head.line;$.indentLine(b,null,!0),$.indentLine(b+1,null,!0)}})}};function f($){for(var re=0;re<$.length;re++){var D=$.charAt(re),_="'"+D+"'";C[_]||(C[_]=I(D))}}function I($){return function(re){return function ae($,re){var D=ie($);if(!D||$.getOption("disableInput"))return T.Pass;var _=W(D,"pairs"),m=_.indexOf(re);if(-1==m)return T.Pass;var L=W(D,"triples"),M=_.charAt(m+1)==re,P=$.listSelections(),b=m%2==0;const z=W(D,"mutiCharsPairs");var ne;let Y,ce;for(var R=0;R<P.length;R++){var ve,me=P[R],x=me.head,fe=$.getRange(x,H(x.line,x.ch+1));for(const Ge of z){if(Y=Ge[0],Y[Y.length-1]===re)for(let N=1;N<Y.length;N++){const k=$.getRange(H(x.line,x.ch-N),x);if(Y[Y.length-1-N]!==k){Y=void 0;break}}else Y=void 0;if(Y){ce=Ge[1];break}}if(Y)ve="mutiCharsPairs";else if(b&&!me.empty())ve="surround";else if(!M&&b||fe!=re)if(M&&x.ch>1&&L.indexOf(re)>=0&&$.getRange(H(x.line,x.ch-2),x)==re+re){if(x.ch>2&&/\bstring/.test($.getTokenTypeAt(H(x.line,x.ch-2))))return T.Pass;ve="addFour"}else if(M){var Se=0==x.ch?" ":$.getRange(H(x.line,x.ch-1),x);if(T.isWordChar(fe)||Se==re||T.isWordChar(Se))return T.Pass;ve="both"}else{if(!b)return T.Pass;ve="both"}else ve=M&&Ae($,x)?"both":L.indexOf(re)>=0&&$.getRange(x,H(x.line,x.ch+3))==re+re+re?"skipThree":"skip";if(ne){if(ne!=ve)return T.Pass}else ne=ve}var Pe=m%2?_.charAt(m-1):re,Ue=m%2?re:_.charAt(m+1);$.operation(function(){if("skip"==ne)$.execCommand("goCharRight");else if("skipThree"==ne)for(var Ge=0;Ge<3;Ge++)$.execCommand("goCharRight");else if("surround"==ne){var N=$.getSelections();for(Ge=0;Ge<N.length;Ge++)N[Ge]=Pe+N[Ge]+Ue;for($.replaceSelections(N,"around"),N=$.listSelections().slice(),Ge=0;Ge<N.length;Ge++)N[Ge]=K(N[Ge]);$.setSelections(N)}else if("both"==ne)$.replaceSelection(Pe+Ue,null),$.triggerElectric(Pe+Ue),$.execCommand("goCharLeft");else if("addFour"==ne)$.replaceSelection(Pe+Pe+Pe+Pe,"before"),$.execCommand("goCharRight");else if("mutiCharsPairs"===ne){$.replaceSelection(Y[Y.length-1]+ce,null),$.triggerElectric(Y[Y.length-1]+ce);for(let k=0;k<ce.length;k++)$.execCommand("goCharLeft")}})}(re,$)}}function ie($){var re=$.state.closeBrackets;return!re||re.override?re:$.getModeAt($.getCursor()).closeBrackets||re}function K($){var re=T.cmpPos($.anchor,$.head)>0;return{anchor:new H($.anchor.line,$.anchor.ch+(re?-1:1)),head:new H($.head.line,$.head.ch+(re?1:-1))}}function le($,re){var D=$.getRange(H(re.line,re.ch-1),H(re.line,re.ch+1));return 2==D.length?D:null}function Ae($,re){var D=$.getTokenAt(H(re.line,re.ch+1));return/\bstring/.test(D.type)&&D.start==re.ch&&(0==re.ch||!/\bstring/.test($.getTokenTypeAt(re)))}f(Q.pairs+"`")}(de(43867))}}]);